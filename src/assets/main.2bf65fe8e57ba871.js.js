globalThis.$localize=Object.assign(globalThis.$localize || {},{locale:"en"});
"use strict";(function(global,_global$ng,_global$ng2,_global$ng2$common,_global$ng$common,_global$ng$common$loc){(_global$ng=global.ng)!==null&&_global$ng!==void 0?_global$ng:global.ng={};(_global$ng2$common=(_global$ng2=global.ng).common)!==null&&_global$ng2$common!==void 0?_global$ng2$common:_global$ng2.common={};(_global$ng$common$loc=(_global$ng$common=global.ng.common).locales)!==null&&_global$ng$common$loc!==void 0?_global$ng$common$loc:_global$ng$common.locales={};const u=undefined;function plural(val){const n=val,i=Math.floor(Math.abs(val)),v=val.toString().replace(/^[^.]*\.?/,"").length;if(i===1&&v===0)return 1;return 5}global.ng.common.locales["en"]=["en",[["a","p"],["AM","PM"],u],[["AM","PM"],u,u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",u,"{1} 'at' {0}",u],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",plural,[[["mi","n","in the morning","in the afternoon","in the evening","at night"],["midnight","noon","in the morning","in the afternoon","in the evening","at night"],u],[["midnight","noon","morning","afternoon","evening","night"],u,u],["00:00","12:00",["06:00","12:00"],["12:00","18:00"],["18:00","21:00"],["21:00","06:00"]]]]})(globalThis);;
(self.webpackChunknorad_tracks_santa_web=self.webpackChunknorad_tracks_santa_web||[]).push([[792],{92:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.AppComponent=void 0;const z=w(1635),T=w(177),V=w(7768),N=w(4569),R=w(2980),M=w(9091),G=w(3481),Y=z.__importStar(w(3953)),K=z.__importStar(w(4569));C.AppComponent=(()=>{class se{constructor(_e,Ae,Ne){this.msalGuardConfig=_e,this.authService=Ae,this.msalBroadcastService=Ne,this.title="norad-tracks-santa-web",this.isIframe=!1,this.loginDisplay=!1,this._destroying$=new M.Subject}ngOnInit(){this.authService.handleRedirectObservable().subscribe(),this.isIframe=window!==window.parent&&!window.opener,this.setLoginDisplay(),this.authService.instance.enableAccountStorageEvents(),this.msalBroadcastService.msalSubject$.pipe((0,G.filter)(_e=>_e.eventType===R.EventType.ACCOUNT_ADDED||_e.eventType===R.EventType.ACCOUNT_REMOVED)).subscribe(_e=>{0===this.authService.instance.getAllAccounts().length?window.location.pathname="/":this.setLoginDisplay()}),this.msalBroadcastService.inProgress$.pipe((0,G.filter)(_e=>_e===R.InteractionStatus.None),(0,G.takeUntil)(this._destroying$)).subscribe(()=>{this.setLoginDisplay(),this.checkAndSetActiveAccount()})}setLoginDisplay(){this.loginDisplay=this.authService.instance.getAllAccounts().length>0}checkAndSetActiveAccount(){if(!this.authService.instance.getActiveAccount()&&this.authService.instance.getAllAccounts().length>0){let Ae=this.authService.instance.getAllAccounts();this.authService.instance.setActiveAccount(Ae[0])}}loginRedirect(){this.msalGuardConfig.authRequest?this.authService.loginRedirect({...this.msalGuardConfig.authRequest}):this.authService.loginRedirect()}loginPopup(){this.msalGuardConfig.authRequest?this.authService.loginPopup({...this.msalGuardConfig.authRequest}).pipe((0,G.catchError)(_e=>(console.error("Login popup failed",_e),(0,M.of)(null)))).subscribe(_e=>{_e&&this.authService.instance.setActiveAccount(_e.account)}):this.authService.loginPopup().pipe((0,G.catchError)(_e=>(console.error("Login popup failed",_e),(0,M.of)(null)))).subscribe(_e=>{_e&&this.authService.instance.setActiveAccount(_e.account)})}logout(_e){_e?this.authService.logoutPopup({mainWindowRedirectUri:"/"}):this.authService.logoutRedirect()}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}static{this.\u0275fac=function(Ae){return new(Ae||se)(Y.\u0275\u0275directiveInject(N.MSAL_GUARD_CONFIG),Y.\u0275\u0275directiveInject(K.MsalService),Y.\u0275\u0275directiveInject(K.MsalBroadcastService))}}static{this.\u0275cmp=Y.\u0275\u0275defineComponent({type:se,selectors:[["app-root"]],standalone:!0,features:[Y.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(Ae,Ne){1&Ae&&Y.\u0275\u0275element(0,"router-outlet")},dependencies:[T.CommonModule,V.RouterOutlet,N.MsalModule]})}}return se})()},289:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.appConfig=C.MSALGuardConfigFactory=C.MSALInterceptorConfigFactory=C.MSALInstanceFactory=C.loggerCallback=void 0;const z=w(7768),T=w(2181),V=w(1626),N=w(4569),R=w(2980),M=w(5312);function G(se,U){console.log(U)}function Y(){try{return new R.PublicClientApplication({auth:{clientId:M.environment.msalClientId,authority:M.environment.msalAuthority,redirectUri:"/"},cache:{cacheLocation:R.BrowserCacheLocation.LocalStorage},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:G,logLevel:R.LogLevel.Info,piiLoggingEnabled:!1}}})}catch(se){throw console.error("Failed to create MSAL instance",se),se}}function K(){const se=new Map;return se.set(M.environment.apiConfig.uri,M.environment.apiConfig.scopes),{interactionType:R.InteractionType.Redirect,protectedResourceMap:se}}function J(){return{interactionType:R.InteractionType.Redirect,authRequest:{scopes:[...M.environment.apiConfig.scopes]},loginFailedRoute:"/login-failed"}}C.loggerCallback=G,C.MSALInstanceFactory=Y,C.MSALInterceptorConfigFactory=K,C.MSALGuardConfigFactory=J,C.appConfig={providers:[(0,z.provideRouter)(T.routes),(0,V.provideHttpClient)((0,V.withInterceptorsFromDi)(),(0,V.withFetch)()),{provide:V.HTTP_INTERCEPTORS,useClass:N.MsalInterceptor,multi:!0},{provide:N.MSAL_INSTANCE,useFactory:Y},{provide:N.MSAL_GUARD_CONFIG,useFactory:J},{provide:N.MSAL_INTERCEPTOR_CONFIG,useFactory:K},N.MsalService,N.MsalGuard,N.MsalBroadcastService]}},2181:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.routes=void 0;const z=w(7824),T=w(1332),V=w(1064),N=w(5794),R=w(1016),M=w(5932),G=w(6488),Y=w(4569),K=w(5312),J=w(8263),se=w(2170),U=w(4336),_e=w(8635),Ae=w(578),Ne=w(4334),Le=w(6184);C.routes=K.environment.enableAuth?[{path:"home",component:z.HomeComponent,canActivate:[Y.MsalGuard]},{path:"",component:z.HomeComponent,canActivate:[Y.MsalGuard]},{path:"calendar",component:N.CalendarComponent,canActivate:[Y.MsalGuard]},{path:"library",component:R.LibraryComponent,canActivate:[Y.MsalGuard]},{path:"musicplayer",component:M.MusicplayerComponent,canActivate:[Y.MsalGuard]},{path:"noradhq",component:T.NoradhqComponent,canActivate:[Y.MsalGuard]},{path:"privacy",component:G.PrivacyComponent,canActivate:[Y.MsalGuard]},{path:"map",component:J.MapComponent,canActivate:[Y.MsalGuard]},{path:"holidaytraditions",component:se.HolidayTraditionsComponent,canActivate:[Y.MsalGuard]},{path:"santahistory",component:U.SantaHistoryComponent,canActivate:[Y.MsalGuard]},{path:"sleighinformation",component:_e.SleighInformationComponent,canActivate:[Y.MsalGuard]},{path:"holidayactivities",component:Ae.HolidayActivitiesComponent,canActivate:[Y.MsalGuard]},{path:"login-failed",component:Le.FailedComponent},{path:"**",component:V.NotFoundComponent,canActivate:[Y.MsalGuard]}]:[{path:"home",component:z.HomeComponent},{path:"",component:z.HomeComponent},{path:"calendar",component:N.CalendarComponent},{path:"library",component:R.LibraryComponent},{path:"musicplayer",component:M.MusicplayerComponent},{path:"noradhq",component:T.NoradhqComponent},{path:"privacy",component:G.PrivacyComponent},{path:"map",component:J.MapComponent},{path:"holidaytraditions",component:se.HolidayTraditionsComponent},{path:"santahistory",component:U.SantaHistoryComponent},{path:"sleighinformation",component:_e.SleighInformationComponent},{path:"holidayactivities",component:Ae.HolidayActivitiesComponent},{path:"social",component:Ne.SocialMediaComponent},{path:"login-failed",component:Le.FailedComponent},{path:"**",component:z.HomeComponent}]},3640:(it,C,w)=>{"use strict";var z=w(9293).default;Object.defineProperty(C,"__esModule",{value:!0}),C.ChatbotComponent=void 0;const T=w(1635),V=w(5312),N=w(3184),R=T.__importStar(w(3953)),M=T.__importStar(w(1626)),G=["botWindow"];window.WebChat=window.WebChat||{},C.ChatbotComponent=(()=>{class K{constructor(se){this.client=se,this.isShowChat=!1}ngAfterViewInit(){var se=this;return z(function*(){const _e=(yield se.client.get(`${V.environment.chatApiUrl}/api/token`).pipe((0,N.retryBackoff)({initialInterval:100,maxRetries:1,resetOnSuccess:!0})).toPromise())?.token;var Ae=window.WebChat.createDirectLine({token:_e});window.WebChat.renderWebChat({directLine:Ae,styleOptions:{bubbleBackground:"rgba(0, 0, 255, .1)",bubbleFromUserBackground:"rgba(0, 255, 0, .1)",backgroundColor:"Turquoise",botAvatarInitials:"R",userAvatarInitials:"U",hideUploadButton:!0,primaryFont:"'Comic Sans MS', 'Arial', sans-serif",fontSizeSmall:"60%"}},se.botWindowElement.nativeElement),Ae.postActivity({from:{id:"USER_ID",name:"USER_NAME"},name:"requestWelcomeDialog",type:"event",value:"token"}).subscribe(Ne=>console.log(`Posted activity, assigned ID ${Ne}`),Ne=>console.log(`Error posting activity ${Ne}`))})()}toggleChatDiv(){this.isShowChat=!this.isShowChat}static{this.\u0275fac=function(U){return new(U||K)(R.\u0275\u0275directiveInject(M.HttpClient))}}static{this.\u0275cmp=R.\u0275\u0275defineComponent({type:K,selectors:[["app-chatbot"]],viewQuery:function(U,_e){if(1&U&&R.\u0275\u0275viewQuery(G,5),2&U){let Ae;R.\u0275\u0275queryRefresh(Ae=R.\u0275\u0275loadQuery())&&(_e.botWindowElement=Ae.first)}},standalone:!0,features:[R.\u0275\u0275StandaloneFeature],decls:8,vars:2,consts:[["botWindow",""],["id","radarchatcontainer",2,"padding-bottom","15px","padding-left","15px","float","left","width","-webkit-fill-available"],["id","radarchatwindow",2,"max-width","350px",3,"hidden"],[1,"webchat-container",2,"height","400px","border","none"],[2,"color","black","padding-left","10px","text-align","left",3,"hidden"],["id","radarbutton",2,"background-color","transparent","background-repeat","no-repeat","border","none","cursor","pointer","padding-left","20px",3,"click"],["id","radarimage","src","assets/images/icons/radar_animated-legacy.gif","width","116px","height","auto"]],template:function(U,_e){if(1&U){const Ae=R.\u0275\u0275getCurrentView();R.\u0275\u0275elementStart(0,"div",1)(1,"div",2),R.\u0275\u0275element(2,"div",3,0),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(4,"h3",4),R.\u0275\u0275text(5,"CHAT WITH RADAR"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(6,"button",5),R.\u0275\u0275listener("click",function(){return R.\u0275\u0275restoreView(Ae),R.\u0275\u0275resetView(_e.toggleChatDiv())}),R.\u0275\u0275element(7,"img",6),R.\u0275\u0275elementEnd()()}2&U&&(R.\u0275\u0275advance(),R.\u0275\u0275property("hidden",!_e.isShowChat),R.\u0275\u0275advance(3),R.\u0275\u0275property("hidden",_e.isShowChat))}})}}return K})()},1086:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.CountDownComponent=void 0;const z=w(1635),T=w(9091),V=z.__importStar(w(3953)),N=z.__importStar(w(8842));C.CountDownComponent=(()=>{class M{constructor(Y){this.timer=Y}ngOnInit(){this.timer.getTime().subscribe(Y=>{this.timer.dateNow=new Date(Y),this.countdownSubscription=(0,T.interval)(1e3).subscribe(K=>{this.timer.dateNow.setSeconds(this.timer.dateNow.getSeconds()+1),this.timer.getTimeDifference()}),this.syncTimeSubscription=(0,T.interval)(3e5).subscribe(K=>{this.timer.getTime().subscribe(J=>{this.timer.dateNow=new Date(J)})})})}ngOnDestroy(){this.countdownSubscription.unsubscribe(),this.syncTimeSubscription.unsubscribe()}daysToDday(){return this.timer.daysToDday}hoursToDday(){return this.timer.hoursToDday}minutesToDday(){return this.timer.minutesToDday}secondsToDday(){return this.timer.secondsToDday}static{this.\u0275fac=function(K){return new(K||M)(V.\u0275\u0275directiveInject(N.TimerService))}}static{this.\u0275cmp=V.\u0275\u0275defineComponent({type:M,selectors:[["app-count-down"]],standalone:!0,features:[V.\u0275\u0275StandaloneFeature],decls:15,vars:4,consts:[[1,"timer"],["id","days"],["id","hours"],["id","minutes"],["id","seconds"]],template:function(K,J){1&K&&(V.\u0275\u0275elementStart(0,"div",0)(1,"h4"),V.\u0275\u0275text(2," SANTA TRACKER COUNTDOWN "),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(3,"span",1),V.\u0275\u0275text(4),V.\u0275\u0275elementEnd(),V.\u0275\u0275text(5,"Day(s) "),V.\u0275\u0275elementStart(6,"span",2),V.\u0275\u0275text(7),V.\u0275\u0275elementEnd(),V.\u0275\u0275text(8,"Hrs "),V.\u0275\u0275elementStart(9,"span",3),V.\u0275\u0275text(10),V.\u0275\u0275elementEnd(),V.\u0275\u0275text(11,"Min "),V.\u0275\u0275elementStart(12,"span",4),V.\u0275\u0275text(13),V.\u0275\u0275elementEnd(),V.\u0275\u0275text(14,"S\n"),V.\u0275\u0275elementEnd()),2&K&&(V.\u0275\u0275advance(4),V.\u0275\u0275textInterpolate1(" ",J.daysToDday()," "),V.\u0275\u0275advance(3),V.\u0275\u0275textInterpolate1(" ",J.hoursToDday()," "),V.\u0275\u0275advance(3),V.\u0275\u0275textInterpolate1(" ",J.minutesToDday()," "),V.\u0275\u0275advance(3),V.\u0275\u0275textInterpolate1(" ",J.secondsToDday()," "))},styles:[".timer[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;font-size:2em;letter-spacing:-1px;color:#000;margin-bottom:4px}.timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2em;margin:0 3px 0 15px}@media (max-width: 1366px){.timer[_ngcontent-%COMP%]{font-size:1.6em}}@media only screen and (max-device-width: 480px),(max-width: 480px){.timer[_ngcontent-%COMP%]{font-size:1.4em}}"]})}}return M})()},6184:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.FailedComponent=void 0;const T=w(1635).__importStar(w(3953));C.FailedComponent=(()=>{class N{static{this.\u0275fac=function(G){return new(G||N)}}static{this.\u0275cmp=T.\u0275\u0275defineComponent({type:N,selectors:[["login-failed"]],standalone:!0,features:[T.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(G,Y){1&G&&(T.\u0275\u0275elementStart(0,"p"),T.\u0275\u0275text(1,"Login failed. Please try again."),T.\u0275\u0275elementEnd())},encapsulation:2})}}return N})()},5794:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.CalendarComponent=void 0;const z=w(1635),T=w(3953),V=w(177),N=w(5312),R=w(7768),M=z.__importStar(w(3953)),G=z.__importStar(w(8842)),Y=z.__importStar(w(7768)),K=z.__importStar(w(177)),J=()=>["/"],se=()=>["/holidayactivities"],U=_t=>[_t];function _e(_t,Bt){if(1&_t&&(M.\u0275\u0275elementStart(0,"a",115),M.\u0275\u0275element(1,"img",116),M.\u0275\u0275elementEnd()),2&_t){const yt=M.\u0275\u0275nextContext().$implicit;M.\u0275\u0275propertyInterpolate("target",yt.target),M.\u0275\u0275propertyInterpolate("href",yt.baseUrl+yt.link,M.\u0275\u0275sanitizeUrl),M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate("src",yt.baseUrl+yt.image,M.\u0275\u0275sanitizeUrl)}}function Ae(_t,Bt){if(1&_t&&(M.\u0275\u0275elementStart(0,"a",117),M.\u0275\u0275element(1,"img",116),M.\u0275\u0275elementEnd()),2&_t){const yt=M.\u0275\u0275nextContext().$implicit;M.\u0275\u0275propertyInterpolate("target",yt.target),M.\u0275\u0275property("routerLink",M.\u0275\u0275pureFunction1(3,U,yt.link)),M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate("src",yt.baseUrl+yt.image,M.\u0275\u0275sanitizeUrl)}}function Ne(_t,Bt){if(1&_t&&(M.\u0275\u0275elementStart(0,"div",109)(1,"div",110),M.\u0275\u0275element(2,"img",111),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(3,"div",112),M.\u0275\u0275template(4,_e,2,3,"a",113)(5,Ae,2,5,"a",114),M.\u0275\u0275elementEnd()()),2&_t){const yt=Bt.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate("id",yt.day),M.\u0275\u0275property("hidden",!yt.locked),M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate1("src","assets/images/gifts/",yt.day,".png",M.\u0275\u0275sanitizeUrl),M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate("id",yt.day),M.\u0275\u0275property("hidden",yt.locked),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",""!==yt.baseUrl),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",""===yt.baseUrl)}}function Le(_t,Bt){if(1&_t&&(M.\u0275\u0275elementStart(0,"div")(1,"div",107),M.\u0275\u0275template(2,Ne,6,8,"div",108),M.\u0275\u0275elementEnd()()),2&_t){const yt=Bt.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate1("id","row-",yt.rowNumber,""),M.\u0275\u0275advance(),M.\u0275\u0275property("ngForOf",yt.games)}}C.CalendarComponent=(()=>{class _t{constructor(yt,Pt){this.timer=yt,this.locale=Pt,this.gifts=[{rowNumber:1,games:[{day:1,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SD/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-01",target:"_blank"},{day:2,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/PXC/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-02",target:"_blank"},{day:3,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SW/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-03",target:"_blank"},{day:4,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/HH/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-04",target:"_blank"},{day:5,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/CCH/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-05",target:"_blank"}]},{rowNumber:2,games:[{day:6,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SGS/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-06",target:"_blank"},{day:7,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SSL/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-07",target:"_blank"},{day:8,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/DB/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-08",target:"_blank"},{day:9,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/O/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-09",target:"_blank"},{day:10,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/MGM/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-10",target:"_blank"},{day:11,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/RA/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-11",target:"_blank"}]},{rowNumber:3,games:[{day:12,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/NB/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-12",target:"_blank"},{day:13,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SYR/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-13",target:"_blank"},{day:14,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/3DSR/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-14",target:"_blank"},{day:15,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/PZB/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-15",target:"_blank"},{day:16,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/FC/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-16",target:"_blank"},{day:17,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SGR/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-17",target:"_blank"}]},{rowNumber:4,games:[{day:18,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SMM/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-18",target:"_blank"},{day:19,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/GM/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-19",target:"_blank"},{day:20,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/HM/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-20",target:"_blank"},{day:21,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SAR/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-21",target:"_blank"},{day:22,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/IV/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-22",target:"_blank"},{day:23,locked:!0,baseUrl:N.environment.gameApiUrl+"/AG/SJP/",link:"index.html",image:"GameTile.png",lockedImage:"#icon-23",target:"_blank"},{day:24,locked:!0,baseUrl:"",link:"/map",image:"assets/images/overlay/games/calendar/img/track-santa.png",lockedImage:"#icon-24",target:"_self"}]}]}ngOnInit(){this.timer.getTime().subscribe(yt=>{if(this.dateNow=new Date(yt),11==this.dateNow.getMonth())for(var Pt=0;Pt<this.gifts.length;Pt++){let Gt=this.gifts[Pt]?.games;for(var vt=0;vt<Gt.length;vt++){let Ht=Gt?.[vt];null!=Ht&&Ht.day<=this.dateNow.getDate()&&(Ht.locked=!1)}}})}static{this.\u0275fac=function(Pt){return new(Pt||_t)(M.\u0275\u0275directiveInject(G.TimerService),M.\u0275\u0275directiveInject(T.LOCALE_ID))}}static{this.\u0275cmp=M.\u0275\u0275defineComponent({type:_t,selectors:[["app-calendar"]],standalone:!0,features:[M.\u0275\u0275ProvidersFeature([V.DatePipe]),M.\u0275\u0275StandaloneFeature],decls:160,vars:5,consts:()=>{let yt,Pt,vt,Gt,Ht,jt,Yt;return yt="The Arcade",Pt="Play Games",vt="Games",Gt="Come back on the XXth to unlock this game",Ht="Click to reveal today\u2019s game",jt="Holiday Activities",Yt="Play",[yt,Pt,vt,Gt,Ht,jt,Yt,["version","1.1","id","day-icons","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 300 300","enable-background","new 0 0 300 300",0,"xml","space","preserve",2,"display","none"],["id","icon-01","viewBox","0 0 300 300"],["id","_x31_","fill","currentColor","preserveAspectRatio","xMidYMid meet","d","M99.044,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535c0,0-1.873,4.012-9.362,11.234\n                l-20.062,20.062L99.579,98.241l42.53-42.263h17.655v171.459h41.192v16.584H99.044V227.438z"],["id","icon-02","viewBox","0 0 300 300"],["id","_x32_","fill","currentColor","display","inline","preserveAspectRatio","xMidYMid meet","d","M185.843,105.709c0-20.062-14.712-35.308-38.518-35.308c-18.724,0-33.436,9.629-33.436,20.329\n                v8.827H96.235V85.648c0-23.806,32.366-32.901,51.625-32.901c35.842,0,57.242,23.539,57.242,52.695\n                c0,66.069-99.504,64.464-99.504,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641c3.745,0,5.885-1.873,5.885-5.885v-12.572h17.387\n                v18.725c0,11.502-4.814,16.316-16.316,16.316H103.19c-12.839,0-16.852-5.35-16.852-18.457\n                C86.338,155.729,185.843,161.347,185.843,105.709z"],["id","icon-03","viewBox","0 0 300 300"],["id","_x33_","fill","currentColor","display","inline","preserveAspectRatio","xMidYMid meet","d","M100.113,205.503c0,0,19.259,22.469,49.218,22.469c22.202,0,42.53-16.584,42.53-40.658\n                c0-25.411-21.934-39.588-45.74-39.588h-13.107l-4.28-10.967l46.275-55.637c4.548-6.152,9.63-10.432,9.63-10.432v-0.535\n                c0,0-5.35,0.802-15.247,0.802h-48.95c-3.745,0-5.885,1.873-5.885,5.885v12.572H97.171V70.69c0-11.502,4.28-16.316,15.782-16.316\n                h95.494v12.304l-55.371,65c23.54,1.337,58.045,14.979,58.045,55.369c0,31.831-26.481,58.58-62.058,58.58\n                c-37.181,0-60.185-26.214-60.185-26.214L100.113,205.503z"],["id","icon-04","viewBox","0 0 300 300"],["id","_x34_","fill","currentColor","display","inline","preserveAspectRatio","xMidYMid meet","d","M79.25,179.825l91.481-123.847h20.061v119.566h29.959v16.584h-29.959v51.893h-18.724v-51.893\n                H79.25V179.825z M172.335,98.776c0-8.025,0.803-18.189,0.803-18.189h-0.535c0,0-4.548,7.757-9.63,14.444l-52.16,69.012\n                c-5.082,6.688-9.897,11.77-9.897,11.77v0.535c0,0,7.49-0.803,15.514-0.803h55.905V98.776z"],["id","icon-05","viewBox","0 0 300 300"],["id","_x35_","fill","currentColor","display","inline","preserveAspectRatio","xMidYMid meet","d","M101.05,205.771c0,0,14.177,22.201,43.6,22.201c26.749,0,46.811-18.991,46.811-43.868\n                c0-25.945-21.666-44.135-48.683-44.135c-21.131,0-36.11,10.432-36.11,10.432l-9.63-4.012l8.025-75.699\n                c1.07-11.502,4.814-16.316,16.316-16.316h61.79c11.234,0,16.049,4.814,16.049,16.316v18.724h-17.387V76.842\n                c0-4.012-2.14-5.885-5.884-5.885h-47.614c-3.745,0-5.35,1.873-5.884,5.885l-4.815,42.53c-0.802,6.688-1.605,10.7-1.605,10.7h0.535\n                c0,0,11.769-6.955,28.354-6.955c38.251,0,65.802,27.283,65.802,61.254c0,33.437-27.818,61.255-66.069,61.255\n                c-37.448,0-55.37-26.749-55.37-26.749L101.05,205.771z"],["id","icon-06","viewBox","0 0 300 300"],["id","_x36_","fill","currentColor","display","inline","preserveAspectRatio","xMidYMid meet","d","M86.472,161.368c0-47.88,24.609-108.6,82.653-108.6c20.597,0,34.506,7.757,34.506,7.757\n                l-6.954,16.316c0,0-11.77-6.687-27.284-6.687c-39.32,0-59.382,39.32-62.859,77.304h0.535c8.827-14.712,28.354-22.736,47.88-22.736\n                c34.238,0,58.58,24.608,58.58,59.649c0,39.053-26.214,62.859-59.114,62.859C113.488,247.231,86.472,210.586,86.472,161.368z\n                 M154.146,229.845c25.411,0,40.391-19.259,40.391-45.205c0-26.214-16.852-43.333-42.531-43.333\n                c-25.143,0-45.472,16.852-45.472,32.099C106.533,198.281,126.06,229.845,154.146,229.845z"],["id","icon-07","viewBox","0 0 300 300"],["id","_x37_","fill","currentColor","display","inline","preserveAspectRatio","xMidYMid meet","d","M181.429,89.949c5.351-10.165,10.433-17.387,10.433-17.387v-0.535\n                c0,0-4.815,0.535-14.177,0.535h-67.674c-3.745,0-5.885,1.873-5.885,5.885v12.572H86.472V72.295\n                c0-11.502,4.547-16.316,16.049-16.316h111.006v12.839l-93.084,175.204H99.579L181.429,89.949z"],["id","icon-08","viewBox","0 0 300 300"],["id","_x38_","fill","currentColor","display","inline","d","M119.908,141.307v-0.535c0,0-25.679-12.037-25.679-38.785\n                c0-25.946,20.329-49.218,56.707-49.218c35.577,0,57.51,20.864,57.51,50.02c0,28.621-25.144,46.542-25.144,46.542v0.535\n                c17.653,9.095,30.226,21.132,30.226,43.065c0,29.424-27.283,54.3-63.127,54.3c-33.168,0-63.929-20.597-63.929-56.172\n                C86.472,158.158,119.908,141.307,119.908,141.307z M150.401,229.845c22.202,0,43.869-15.247,43.869-37.181\n                c0-19.526-16.05-27.283-35.844-35.309c-6.954-2.942-19.794-7.489-21.934-7.489c-7.222,0-30.761,17.119-30.761,40.391\n                C105.731,214.865,127.397,229.845,150.401,229.845z M165.916,141.307c6.687,0,23.806-18.457,23.806-37.983\n                c0-20.329-16.049-33.168-38.786-33.168c-23.806,0-37.983,14.177-37.983,31.831c0,19.794,16.584,27.016,36.11,34.238\n                C153.344,137.829,162.438,141.307,165.916,141.307z"],["id","icon-09","viewBox","0 0 300 300"],["id","_x39_","fill","currentColor","display","inline","d","M103.19,223.157c0,0,11.77,6.688,27.284,6.688c39.32,0,59.649-39.588,62.859-77.571h-0.535\n                c-8.827,14.712-28.354,23.004-47.88,23.004c-34.238,0-58.312-24.608-58.312-59.649c0-39.053,25.946-62.859,58.847-62.859\n                c40.925,0,67.941,36.646,67.941,85.863c0,47.88-24.341,108.6-82.653,108.6c-20.597,0-34.506-7.757-34.506-7.757L103.19,223.157z\n                 M193.333,126.595c0-24.876-19.526-56.439-47.612-56.439c-25.412,0-40.391,19.259-40.391,45.205\n                c0,26.214,16.852,43.333,42.53,43.333C173.004,158.693,193.333,141.842,193.333,126.595z"],["id","icon-10","viewBox","0 0 300 300"],["id","_x31__1_","fill","currentColor","display","inline","d","M24.147,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L24.682,98.241l42.53-42.263h17.654v171.459h41.193v16.584H24.147V227.438z"],["id","_x30_","fill","currentColor","display","inline","d","M146.122,149.866c0-54.032,15.782-97.098,64.732-97.098s64.999,43.065,64.999,97.098\n                c0,54.567-16.049,97.365-64.999,97.365S146.122,204.434,146.122,149.866z M256.594,149.866c0-44.67-10.165-79.711-45.74-79.711\n                c-35.576,0-45.74,35.041-45.74,79.711c0,44.938,10.164,79.979,45.74,79.979C246.429,229.845,256.594,194.804,256.594,149.866z"],["id","icon-11","viewBox","0 0 300 300"],["id","_x31__3_","fill","currentColor","display","inline","d","M35.382,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432H77.11\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L35.917,98.241l42.53-42.263h17.654v171.459h41.193v16.584H35.382V227.438z"],["id","_x31__2_","fill","currentColor","display","inline","d","M162.706,227.438h41.995V89.414c0-5.35,0.268-10.432,0.268-10.432h-0.535\n                c0,0-1.872,4.012-9.361,11.234l-20.062,20.062l-11.77-12.037l42.53-42.263h17.654v171.459h41.192v16.584H162.706V227.438z"],["id","icon-12","viewBox","0 0 300 300"],["id","_x31__4_","fill","currentColor","display","inline","d","M25.619,227.416h41.996V89.393c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L26.154,98.22l42.53-42.263h17.654v171.459h41.193V244H25.619V227.416z"],["id","_x32__1_","fill","currentColor","display","inline","d","M246.563,105.709c0-20.062-14.712-35.308-38.518-35.308\n                c-18.725,0-33.437,9.629-33.437,20.329v8.827h-17.653V85.648c0-23.806,32.365-32.901,51.624-32.901\n                c35.844,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.141,5.35,6.152,5.35h78.642\n                c3.744,0,5.885-1.873,5.885-5.885v-12.572h17.386v18.725c0,11.502-4.814,16.316-16.316,16.316H163.91\n                c-12.839,0-16.851-5.35-16.851-18.457C147.059,155.729,246.563,161.347,246.563,105.709z"],["id","icon-13","viewBox","0 0 300 300"],["id","_x31__5_","fill","currentColor","display","inline","d","M30.834,227.458H72.83V89.434c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L31.369,98.261l42.53-42.263h17.654v171.459h41.193v16.584H30.834V227.458z"],["id","_x33__1_","fill","currentColor","display","inline","d","M158.159,207.128c0,0,19.259,22.469,49.217,22.469c22.202,0,42.53-16.584,42.53-40.658\n                c0-25.411-21.934-39.588-45.739-39.588H191.06l-4.279-10.967l46.274-55.637c4.548-6.152,9.63-10.432,9.63-10.432V71.78\n                c0,0-5.35,0.802-15.247,0.802h-48.95c-3.744,0-5.884,1.873-5.884,5.885v12.572h-17.387V72.315c0-11.502,4.279-16.316,15.781-16.316\n                h95.493v12.304l-55.37,65c23.539,1.337,58.045,14.979,58.045,55.369c0,31.831-26.481,58.58-62.058,58.58\n                c-37.18,0-60.184-26.214-60.184-26.214L158.159,207.128z"],["id","icon-14","viewBox","0 0 300 300"],["id","_x31__6_","fill","currentColor","display","inline","d","M24.547,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L25.082,98.241l42.53-42.263h17.654v171.459h41.193v16.584H24.547V227.438z"],["id","_x34__1_","fill","currentColor","display","inline","d","M133.953,179.825l91.48-123.847h20.062v119.566h29.958v16.584h-29.958v51.893h-18.724\n                v-51.893h-92.818V179.825z M227.038,98.776c0-8.025,0.803-18.189,0.803-18.189h-0.535c0,0-4.547,7.757-9.629,14.444l-52.16,69.012\n                c-5.082,6.688-9.897,11.77-9.897,11.77v0.535c0,0,7.49-0.803,15.515-0.803h55.904V98.776z"],["id","icon-15","viewBox","0 0 300 300"],["id","_x31__7_","fill","currentColor","display","inline","d","M27.89,227.458h41.996V89.434c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L28.425,98.261l42.53-42.263h17.654v171.459h41.193v16.584H27.89V227.458z"],["id","_x35__1_","fill","currentColor","display","inline","d","M162.44,207.396c0,0,14.177,22.201,43.601,22.201c26.749,0,46.811-18.991,46.811-43.868\n                c0-25.945-21.667-44.135-48.683-44.135c-21.132,0-36.111,10.432-36.111,10.432l-9.629-4.012l8.024-75.699\n                c1.07-11.502,4.814-16.316,16.316-16.316h61.79c11.234,0,16.049,4.814,16.049,16.316v18.724h-17.387V78.467\n                c0-4.012-2.14-5.885-5.885-5.885h-47.612c-3.745,0-5.35,1.873-5.885,5.885l-4.815,42.53c-0.802,6.688-1.604,10.7-1.604,10.7h0.535\n                c0,0,11.77-6.955,28.354-6.955c38.251,0,65.802,27.283,65.802,61.254c0,33.437-27.818,61.255-66.069,61.255\n                c-37.448,0-55.37-26.749-55.37-26.749L162.44,207.396z"],["id","icon-16","viewBox","0 0 300 300"],["id","_x31__8_","fill","currentColor","display","inline","d","M27.087,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L27.622,98.241l42.53-42.263h17.654v171.459H129v16.584H27.087V227.438z"],["id","_x36__1_","fill","currentColor","display","inline","d","M145.856,161.368c0-47.88,24.609-108.6,82.654-108.6c20.596,0,34.505,7.757,34.505,7.757\n                l-6.954,16.316c0,0-11.77-6.687-27.284-6.687c-39.32,0-59.382,39.32-62.859,77.304h0.535c8.827-14.712,28.354-22.736,47.88-22.736\n                c34.238,0,58.58,24.608,58.58,59.649c0,39.053-26.214,62.859-59.114,62.859C172.873,247.231,145.856,210.586,145.856,161.368z\n                 M213.531,229.845c25.411,0,40.391-19.259,40.391-45.205c0-26.214-16.853-43.333-42.53-43.333\n                c-25.145,0-45.474,16.852-45.474,32.099C165.918,198.281,185.445,229.845,213.531,229.845z"],["id","icon-17","viewBox","0 0 300 300"],["id","_x31__9_","fill","currentColor","display","inline","d","M28.694,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L29.229,98.241l42.53-42.263h17.654v171.459h41.193v16.584H28.694V227.438z"],["id","_x37__1_","fill","currentColor","display","inline","d","M239.208,89.949c5.351-10.165,10.433-17.387,10.433-17.387v-0.535\n                c0,0-4.815,0.535-14.177,0.535h-67.675c-3.744,0-5.884,1.873-5.884,5.885v12.572h-17.654V72.295\n                c0-11.502,4.547-16.316,16.049-16.316h111.007v12.839l-93.085,175.204h-20.864L239.208,89.949z"],["id","icon-18","viewBox","0 0 300 300"],["id","_x31__10_","fill","currentColor","display","inline","d","M26.017,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L26.552,98.241l42.53-42.263h17.654v171.459h41.193v16.584H26.017V227.438z"],["id","_x38__1_","fill","currentColor","display","inline","d","M180.362,141.307v-0.535c0,0-25.679-12.037-25.679-38.785\n                c0-25.946,20.329-49.218,56.707-49.218c35.576,0,57.51,20.864,57.51,50.02c0,28.621-25.144,46.542-25.144,46.542v0.535\n                c17.654,9.095,30.227,21.132,30.227,43.065c0,29.424-27.284,54.3-63.127,54.3c-33.169,0-63.93-20.597-63.93-56.172\n                C146.926,158.158,180.362,141.307,180.362,141.307z M210.856,229.845c22.201,0,43.867-15.247,43.867-37.181\n                c0-19.526-16.049-27.283-35.843-35.309c-6.955-2.942-19.794-7.489-21.934-7.489c-7.223,0-30.762,17.119-30.762,40.391\n                C166.185,214.865,187.852,229.845,210.856,229.845z M226.369,141.307c6.688,0,23.807-18.457,23.807-37.983\n                c0-20.329-16.049-33.168-38.786-33.168c-23.806,0-37.982,14.177-37.982,31.831c0,19.794,16.584,27.016,36.11,34.238\n                C213.798,137.829,222.892,141.307,226.369,141.307z"],["id","icon-19","viewBox","0 0 300 300"],["id","_x31__11_","fill","currentColor","display","inline","d","M27.221,227.438h41.996V89.414c0-5.35,0.267-10.432,0.267-10.432h-0.535\n                c0,0-1.873,4.012-9.362,11.234l-20.062,20.062L27.756,98.241l42.53-42.263H87.94v171.459h41.193v16.584H27.221V227.438z"],["id","_x39__1_","fill","currentColor","display","inline","d","M162.575,223.157c0,0,11.77,6.688,27.283,6.688c39.32,0,59.649-39.588,62.859-77.571\n                h-0.535c-8.827,14.712-28.354,23.004-47.88,23.004c-34.238,0-58.313-24.608-58.313-59.649c0-39.053,25.946-62.859,58.848-62.859\n                c40.926,0,67.941,36.646,67.941,85.863c0,47.88-24.341,108.6-82.653,108.6c-20.597,0-34.506-7.757-34.506-7.757L162.575,223.157z\n                 M252.718,126.595c0-24.876-19.526-56.439-47.612-56.439c-25.411,0-40.391,19.259-40.391,45.205\n                c0,26.214,16.852,43.333,42.53,43.333C232.388,158.693,252.718,141.842,252.718,126.595z"],["id","icon-20","viewBox","0 0 300 300"],["id","_x32__2_","fill","currentColor","display","inline","d","M107.601,105.731c0-20.062-14.711-35.308-38.518-35.308\n                c-18.724,0-33.436,9.629-33.436,20.329v8.827H17.993V85.669c0-23.806,32.366-32.901,51.625-32.901\n                c35.843,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641\n                c3.745,0,5.885-1.873,5.885-5.885V208.98h17.387v18.725c0,11.502-4.815,16.316-16.317,16.316H24.948\n                c-12.839,0-16.852-5.35-16.852-18.457C8.096,155.751,107.601,161.368,107.601,105.731z"],["id","_x30__1_","fill","currentColor","display","inline","d","M162.173,149.866c0-54.032,15.781-97.098,64.731-97.098s65,43.065,65,97.098\n                c0,54.567-16.05,97.365-65,97.365S162.173,204.434,162.173,149.866z M272.644,149.866c0-44.67-10.164-79.711-45.74-79.711\n                c-35.575,0-45.74,35.041-45.74,79.711c0,44.938,10.165,79.979,45.74,79.979C262.48,229.845,272.644,194.804,272.644,149.866z"],["id","icon-21","viewBox","0 0 300 300"],["id","_x32__3_","fill","currentColor","display","inline","d","M120.175,105.709c0-20.062-14.711-35.308-38.518-35.308\n                c-18.724,0-33.436,9.629-33.436,20.329v8.827H30.567V85.648c0-23.806,32.366-32.901,51.625-32.901\n                c35.843,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641\n                c3.745,0,5.885-1.873,5.885-5.885v-12.572h17.387v18.725c0,11.502-4.815,16.316-16.317,16.316H37.521\n                c-12.839,0-16.852-5.35-16.852-18.457C20.67,155.729,120.175,161.347,120.175,105.709z"],["id","_x31__12_","fill","currentColor","display","inline","d","M177.418,227.416h41.995V89.393c0-5.35,0.268-10.432,0.268-10.432h-0.535\n                c0,0-1.872,4.012-9.361,11.234l-20.062,20.062l-11.77-12.037l42.53-42.263h17.654v171.459h41.192V244H177.418V227.416z"],["id","icon-22","viewBox","0 0 300 300"],["id","_x32__5_","fill","currentColor","display","inline","d","M110.412,105.709c0-20.062-14.711-35.308-38.518-35.308\n                c-18.724,0-33.436,9.629-33.436,20.329v8.827H20.804V85.648c0-23.806,32.366-32.901,51.625-32.901\n                c35.843,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641\n                c3.745,0,5.885-1.873,5.885-5.885v-12.572h17.387v18.725c0,11.502-4.815,16.316-16.317,16.316H27.758\n                c-12.839,0-16.852-5.35-16.852-18.457C10.907,155.729,110.412,161.347,110.412,105.709z"],["id","_x32__4_","fill","currentColor","display","inline","d","M261.275,105.709c0-20.062-14.712-35.308-38.519-35.308\n                c-18.724,0-33.436,9.629-33.436,20.329v8.827h-17.654V85.648c0-23.806,32.366-32.901,51.625-32.901\n                c35.843,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641\n                c3.745,0,5.885-1.873,5.885-5.885v-12.572h17.387v18.725c0,11.502-4.814,16.316-16.316,16.316h-94.155\n                c-12.84,0-16.852-5.35-16.852-18.457C161.77,155.729,261.275,161.347,261.275,105.709z"],["id","icon-23","viewBox","0 0 300 300"],["id","_x32__6_","fill","currentColor","display","inline","d","M115.092,105.731c0-20.062-14.711-35.308-38.518-35.308\n                c-18.724,0-33.436,9.629-33.436,20.329v8.827H25.484V85.669c0-23.806,32.366-32.901,51.625-32.901\n                c35.843,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641\n                c3.745,0,5.885-1.873,5.885-5.885V208.98h17.387v18.725c0,11.502-4.815,16.316-16.317,16.316H32.439\n                c-12.839,0-16.852-5.35-16.852-18.457C15.587,155.751,115.092,161.368,115.092,105.731z"],["id","_x33__2_","fill","currentColor","display","inline","d","M173.406,207.108c0,0,19.259,22.469,49.217,22.469c22.202,0,42.53-16.584,42.53-40.658\n                c0-25.411-21.934-39.588-45.74-39.588h-13.106l-4.279-10.967l46.274-55.637c4.548-6.152,9.63-10.432,9.63-10.432V71.76\n                c0,0-5.35,0.802-15.247,0.802h-48.949c-3.745,0-5.885,1.873-5.885,5.885v12.572h-17.387V72.295\n                c0-11.502,4.279-16.316,15.781-16.316h95.493v12.304l-55.37,65c23.539,1.337,58.045,14.979,58.045,55.369\n                c0,31.831-26.481,58.58-62.058,58.58c-37.181,0-60.184-26.214-60.184-26.214L173.406,207.108z"],["id","icon-24","viewBox","0 0 300 300"],["id","_x32__7_","fill","currentColor","display","inline","d","M11.041,231.963c0-66.069,96.295-74.629,96.295-125.451\n                c0-20.596-15.514-36.11-39.053-36.11c-27.551,0-41.996,25.679-41.996,25.679l-13.909-9.362c0,0,17.119-33.971,56.975-33.971\n                c35.843,0,57.242,23.271,57.242,52.695c0,63.126-94.958,71.954-95.226,121.974h98.168V244H12.111\n                C11.308,239.72,11.041,235.708,11.041,231.963z"],["id","_x34__2_","fill","currentColor","display","inline","d","M149.599,179.804l92.55-123.847h20.062v119.566h26.749v16.316H262.21V244h-18.456v-52.16\n                h-94.155V179.804z M243.754,175.523V96.882c0-8.024,0.803-17.654,0.803-17.654h-0.535c0,0-4.28,7.489-9.362,14.177l-62.592,81.583\n                v0.535H243.754z"],["id","icon-25","viewBox","0 0 300 300"],["id","_x32__8_","fill","currentColor","display","inline","d","M111.749,105.731c0-20.062-14.711-35.308-38.518-35.308\n                c-18.724,0-33.436,9.629-33.436,20.329v8.827H22.141V85.669c0-23.806,32.366-32.901,51.625-32.901\n                c35.843,0,57.242,23.539,57.242,52.695c0,66.069-99.505,64.464-99.505,116.625c0,3.744,2.14,5.35,6.152,5.35h78.641\n                c3.745,0,5.885-1.873,5.885-5.885V208.98h17.387v18.725c0,11.502-4.815,16.316-16.317,16.316H29.096\n                c-12.839,0-16.852-5.35-16.852-18.457C12.244,155.751,111.749,161.368,111.749,105.731z"],["id","_x35__2_","fill","currentColor","display","inline","d","M178.086,207.376c0,0,14.177,22.201,43.601,22.201c26.749,0,46.811-18.991,46.811-43.868\n                c0-25.945-21.667-44.135-48.683-44.135c-21.132,0-36.111,10.432-36.111,10.432l-9.629-4.012l8.024-75.699\n                c1.07-11.502,4.814-16.316,16.316-16.316h61.79c11.234,0,16.049,4.814,16.049,16.316v18.724h-17.387V78.447\n                c0-4.012-2.14-5.885-5.885-5.885H205.37c-3.745,0-5.35,1.873-5.885,5.885l-4.814,42.53c-0.803,6.688-1.605,10.7-1.605,10.7h0.535\n                c0,0,11.77-6.955,28.354-6.955c38.251,0,65.802,27.283,65.802,61.254c0,33.437-27.818,61.255-66.069,61.255\n                c-37.448,0-55.37-26.749-55.37-26.749L178.086,207.376z"],["version","1.1","id","locks","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 60 90","enable-background","new 0 0 60 90",0,"xml","space","preserve",2,"display","none"],["id","day-locked","viewBox","0 0 60 90"],["id","lockbody-dark","fill-rule","evenodd","clip-rule","evenodd","fill","#383838","d","M5,37.875v36l2.875,4l48.938,4l1.969-45\n                    l-2.891-4L5,37.875z M35.312,63.631l1.038,10.244L27,72.198l0.475-8.429l-3-4c0,0-0.944,0.014-1.048-0.227\n                    c-0.435-1.007-0.676-2.115-0.676-3.279c0-4.632,3.806-8.387,8.5-8.387s8.5,3.755,8.5,8.387\n                    C39.75,59.442,37.956,62.209,35.312,63.631z"],["id","ubolt-dark","fill-rule","evenodd","clip-rule","evenodd","fill","#383838","d","M22.058,31.875c0-5.75,4.884-10.321,10.508-10.321\n                    s9.865,4.415,9.625,10.415l-1.419,19.906l8.095,1.721l0.953-22.721c0.567-10-6.825-18.512-16.863-18.512\n                    c-10.038,0-18.447,8.855-18.447,18.512c-0.76,1.188-2.755,3.984-2.755,3.984l3,4l7.207,0.182\n                    C21.962,39.042,22.058,35.094,22.058,31.875z"],["id","lockbody","fill-rule","evenodd","clip-rule","evenodd","fill","#aaaaaa","d","M1.75,33.875l3,40l49,4l2-45L1.75,33.875z\n                     M32.312,59.631l1.038,10.244L24,68.198l0.475-8.429c-2.797-1.373-4.725-4.214-4.725-7.506c0-4.632,3.806-8.387,8.5-8.387\n                    s8.5,3.755,8.5,8.387C36.75,55.442,34.956,58.209,32.312,59.631z"],["id","ubolt","fill-rule","evenodd","clip-rule","evenodd","fill","#aaaaaa","d","M19.058,27.875c0-5.75,4.884-10.321,10.508-10.321\n                    s9.865,4.415,9.625,10.415l-1.419,19.906l8.095,1.721l0.953-22.721c0.567-10-6.825-18.512-16.863-18.512\n                    c-10.038,0-18.447,8.855-18.447,18.512c0,3.251,0.245,7.984,0.245,7.984l7.207,0.182C18.962,35.042,19.058,31.094,19.058,27.875z"],[1,"popup__wrapper",2,"min-height","100vh"],[1,"button","b-close"],[3,"routerLink"],["src","assets/images/close.png"],[1,"popup__contentwrapper"],[1,"popup__header"],[1,"popup__header__title"],[1,"popup__header__subtitle"],[1,"popup__content"],["id","calendartitle",1,"calendar__day__title"],[1,"calendar__container"],[1,"arcade_column_title"],[1,"calendar__content"],[1,"tr"],[4,"ngFor","ngForOf"],["id","santasVillage_theArcade_contents_comeBackOn",1,"tooltip-content","locked-content"],["id","santasVillage_theArcade_contents_clickToReveal",1,"tooltip-content","unlocked-content"],["id","arcade_promo_container"],["id","arcade_promo_button"],["onclick","window.top.playOrStopMusicPlayer(1);",3,"routerLink"],["src","assets/images/pop/arcade/holiday-activities.jpg","alt","","id","arcade_promo_image"],[1,"arcade_button_label"],[2,"clear","both"],[2,"display","none"],["id","faketrackinglink","href","../../../"],[1,"clearfix"],[1,"spotimg","spotimg--arcade"],[3,"id"],["style","border: none; background-color: transparent; display: inline-block;",4,"ngFor","ngForOf"],[2,"border","none","background-color","transparent","display","inline-block"],[1,"calendar__day","locked",3,"hidden","id"],["width","120","height","120",3,"src"],[1,"calendar__day","opened",3,"hidden","id"],["class","showsBack",3,"target","href",4,"ngIf"],["class","v",3,"target","routerLink",4,"ngIf"],[1,"showsBack",3,"target","href"],[1,"arcadegameicon",3,"src"],[1,"v",3,"target","routerLink"]]},template:function(Pt,vt){1&Pt&&(M.\u0275\u0275namespaceSVG(),M.\u0275\u0275elementStart(0,"svg",7)(1,"symbol",8)(2,"title"),M.\u0275\u0275text(3,"Icon - Day 1"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(4,"path",9),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(5,"symbol",10)(6,"title"),M.\u0275\u0275text(7,"Icon - Day 2"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(8,"path",11),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(9,"symbol",12)(10,"title"),M.\u0275\u0275text(11,"Icon - Day 3"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(12,"path",13),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(13,"symbol",14)(14,"title"),M.\u0275\u0275text(15,"Icon - Day 4"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(16,"path",15),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(17,"symbol",16)(18,"title"),M.\u0275\u0275text(19,"Icon - Day 5"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(20,"path",17),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(21,"symbol",18)(22,"title"),M.\u0275\u0275text(23,"Icon - Day 6"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(24,"path",19),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(25,"symbol",20)(26,"title"),M.\u0275\u0275text(27,"Icon - Day 7"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(28,"path",21),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(29,"symbol",22)(30,"title"),M.\u0275\u0275text(31,"Icon - Day 8"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(32,"path",23),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(33,"symbol",24)(34,"title"),M.\u0275\u0275text(35,"Icon - Day 9"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(36,"path",25),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(37,"symbol",26)(38,"title"),M.\u0275\u0275text(39,"Icon - Day 10"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(40,"path",27)(41,"path",28),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(42,"symbol",29)(43,"title"),M.\u0275\u0275text(44,"Icon - Day 11"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(45,"path",30)(46,"path",31),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(47,"symbol",32)(48,"title"),M.\u0275\u0275text(49,"Icon - Day 12"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(50,"path",33)(51,"path",34),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(52,"symbol",35)(53,"title"),M.\u0275\u0275text(54,"Icon - Day 13"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(55,"path",36)(56,"path",37),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(57,"symbol",38)(58,"title"),M.\u0275\u0275text(59,"Icon - Day 14"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(60,"path",39)(61,"path",40),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(62,"symbol",41)(63,"title"),M.\u0275\u0275text(64,"Icon - Day 15"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(65,"path",42)(66,"path",43),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(67,"symbol",44)(68,"title"),M.\u0275\u0275text(69,"Icon - Day 16"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(70,"path",45)(71,"path",46),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(72,"symbol",47)(73,"title"),M.\u0275\u0275text(74,"Icon - Day 17"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(75,"path",48)(76,"path",49),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(77,"symbol",50)(78,"title"),M.\u0275\u0275text(79,"Icon - Day 18"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(80,"path",51)(81,"path",52),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(82,"symbol",53)(83,"title"),M.\u0275\u0275text(84,"Icon - Day 19"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(85,"path",54)(86,"path",55),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(87,"symbol",56)(88,"title"),M.\u0275\u0275text(89,"Icon - Day 20"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(90,"path",57)(91,"path",58),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(92,"symbol",59)(93,"title"),M.\u0275\u0275text(94,"Icon - Day 21"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(95,"path",60)(96,"path",61),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(97,"symbol",62)(98,"title"),M.\u0275\u0275text(99,"Icon - Day 22"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(100,"path",63)(101,"path",64),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(102,"symbol",65)(103,"title"),M.\u0275\u0275text(104,"Icon - Day 23"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(105,"path",66)(106,"path",67),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(107,"symbol",68)(108,"title"),M.\u0275\u0275text(109,"Icon - Day 24"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(110,"path",69)(111,"path",70),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(112,"symbol",71)(113,"title"),M.\u0275\u0275text(114,"Icon - Day 25"),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(115,"path",72)(116,"path",73),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(117,"svg",74)(118,"symbol",75),M.\u0275\u0275element(119,"path",76)(120,"path",77)(121,"path",78)(122,"path",79),M.\u0275\u0275elementEnd()(),M.\u0275\u0275namespaceHTML(),M.\u0275\u0275elementStart(123,"div",80)(124,"span",81)(125,"a",82),M.\u0275\u0275element(126,"img",83),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(127,"div",84)(128,"div",85)(129,"h3",86),M.\u0275\u0275i18n(130,0),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(131,"h4",87),M.\u0275\u0275i18n(132,1),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(133,"div",88),M.\u0275\u0275element(134,"div",89),M.\u0275\u0275elementStart(135,"div",90)(136,"h4",91),M.\u0275\u0275i18n(137,2),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(138,"div",92)(139,"div",93),M.\u0275\u0275template(140,Le,3,3,"div",94),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementStart(141,"span",95),M.\u0275\u0275i18n(142,3),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(143,"span",96),M.\u0275\u0275i18n(144,4),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(145,"div",97)(146,"h4",91),M.\u0275\u0275i18n(147,5),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(148,"div",98)(149,"a",99),M.\u0275\u0275element(150,"img",100),M.\u0275\u0275elementStart(151,"span",101),M.\u0275\u0275i18n(152,6),M.\u0275\u0275elementEnd()()()(),M.\u0275\u0275element(153,"div",102),M.\u0275\u0275elementStart(154,"div",103),M.\u0275\u0275element(155,"a",104),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(156,"div",105),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(157,"div",106),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(158,"noscript"),M.\u0275\u0275element(159,"div"),M.\u0275\u0275elementEnd()),2&Pt&&(M.\u0275\u0275advance(125),M.\u0275\u0275property("routerLink",M.\u0275\u0275pureFunction0(3,J)),M.\u0275\u0275advance(15),M.\u0275\u0275property("ngForOf",vt.gifts),M.\u0275\u0275advance(9),M.\u0275\u0275property("routerLink",M.\u0275\u0275pureFunction0(4,se)))},dependencies:[R.RouterModule,Y.RouterLink,V.CommonModule,K.NgForOf,K.NgIf],styles:[".calendar__content[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:flex;flex-direction:column;font-family:Roboto,sans-serif}#row-1[_ngcontent-%COMP%], #row-2[_ngcontent-%COMP%], #row-3[_ngcontent-%COMP%], #row-4[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.calendar__day[_ngcontent-%COMP%]{height:110px;width:110px;margin:5px;display:flex;flex-direction:column;justify-content:center;text-align:center}#row-1[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:3px}#row-3[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:3px 8px}#row-4[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:3px 5px}@media (max-width: 1350px){#row-1[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:3px 1px}#row-3[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:3px 2px}#row-4[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:3px 1px}.calendar__day[_ngcontent-%COMP%]{height:80px;width:80px;margin:2px}.calendar__day[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}}@media (max-width: 900px){#row-1[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%], #row-2[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:1px -1px}#row-3[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:1px 0}#row-4[_ngcontent-%COMP%]   .calendar__day[_ngcontent-%COMP%]{margin:1px -2px}.calendar__day[_ngcontent-%COMP%]{height:70px;width:70px;margin:0}.calendar__day[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}}@media (max-width: 800px){.calendar__day[_ngcontent-%COMP%]{height:90px;width:90px;margin:0}.calendar__day[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px}}@media (max-width: 750px){.calendar__content[_ngcontent-%COMP%], #row-1[_ngcontent-%COMP%], #row-2[_ngcontent-%COMP%], #row-3[_ngcontent-%COMP%], #row-4[_ngcontent-%COMP%]{display:inline}.calendar__day[_ngcontent-%COMP%]{height:100px;width:200px;display:inline-block}}"]})}}return _t})()},578:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.HolidayActivitiesComponent=void 0;const z=w(1635),T=w(7768),V=z.__importStar(w(3953)),N=z.__importStar(w(7768)),R=()=>["/library"];C.HolidayActivitiesComponent=(()=>{class G{static{this.\u0275fac=function(J){return new(J||G)}}static{this.\u0275cmp=V.\u0275\u0275defineComponent({type:G,selectors:[["app-holiday-activities"]],standalone:!0,features:[V.\u0275\u0275StandaloneFeature],decls:116,vars:2,consts:()=>{let K,J,se,U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br;return K="HOLIDAY ACTIVITIES",J="Santa has a message for you",se="Get your personalized ",U="free video message",_e=" from Santa!",Ae="Kid's Games and Activities",Ne="Welcome to the North Pole",Le="games and activities",tt="Locate Santa",_t="Watch this video",Bt=" and learn how to locate Santa on December 24 in your OnStar-equipped vehicle!",yt="Snowy the Mouse",Pt="Year-Round Holiday Family Fun!",vt=" Join Snowy the Mouse for games, recipes, crafts, videos, and more!",Gt="NASA Space Place",Ht="Explore Earth and Space with",jt="NASA Space Place",Yt="SciJinks",On="Weather and Earth science is fun at ",In="SciJinks",Rn="Space Foundation",Nr="Did you know NORAD Tracks Santa\xAE has Space Certification\u2122 through the",wr="Space Foundation",Gr="Holiday Games",Tn="Light up the kid in you by finding all the",Nn="fun holiday activities",br=" on the page!",[K,J,se,U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,[1,"popup__wrapper",2,"min-height","100vh"],["aria-label","Back to Library","role","button","tabindex","0",3,"routerLink"],["role","button","aria-label","Go Back","tabindex","0",1,"button","library-b-back"],["src","assets/images/backBtn.png","alt","Back Button"],[1,"navContentTitle"],["id","library__content--activities","aria-labelledby","activities-title",1,"library__content"],[1,"library__bgbook--top"],[1,"library__bgbook--right"],[1,"book__spread"],[1,"book__page"],["target","_blank","href","http://www.portablenorthpole.com","aria-label","Santa has a message for you on Portable North Pole",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/pnp.png","alt","Portable North Pole"],[1,"book__page__imglink"],[1,"navContentSubTitle"],["target","_blank","href","http://www.portablenorthpole.com",1,"externalDisclaimer"],[1,"book__page","book_page_second"],["target","_blank","href","http://www.elfontheshelf.com/north-pole-games","aria-label","Kids' Games and Activities on The Elf on the Shelf",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/elfontheshelf.png","alt","Elf on the Shelf games"],["target","_blank","href","http://www.elfontheshelf.com/north-pole-games",1,"externalDisclaimer"],["target","_blank","href","https://www.youtube.com/watch?v=q3MVFtVQKO0","aria-label","Locate Santa with OnStar video",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/onstar.png","alt","OnStar video"],["target","_blank","href","https://www.youtube.com/watch?v=q3MVFtVQKO0",1,"externalDisclaimer"],["target","_blank","href","https://snowythemouse.com/snowys-north-pole-village/","aria-label","Join Snowy the Mouse for games, recipes, crafts, and more",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/SnowyTheMouse.png","alt","Snowy the Mouse"],["target","_blank","href","https://snowythemouse.com/snowys-north-pole-village/",1,"externalDisclaimer"],["target","_blank","href","https://spaceplace.nasa.gov","aria-label","Explore Earth and Space with NASA Space Place",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/spaceplace.png","alt","NASA Space Place"],["target","_blank","href","https://spaceplace.nasa.gov",1,"externalDisclaimer"],["target","_blank","href","https://scijinks.gov/","aria-label","Weather and Earth science activities on SciJinks",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/scijinks.png","alt","SciJinks activities"],["target","_blank","href","https://scijinks.gov/",1,"externalDisclaimer"],["target","_blank","href","http://www.spacefoundation.org/programs/space-certification","aria-label","Learn about Space Certification by Space Foundation",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/space-foundation-logo.png","alt","Space Foundation"],["target","_blank","href","http://www.spacefoundation.org/programs/space-certification",1,"externalDisclaimer"],["target","_blank","href","http://www.christmasinthepark.com/p/other/284","aria-label","Find holiday activities at Christmas in the Park",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/christmaspark.png","alt","Christmas in the Park activities"],["target","_blank","href","http://www.christmasinthepark.com/p/other/284",1,"externalDisclaimer"],["id","weeElf","aria-hidden","true",1,"spotimg","spotimg--library"]]},template:function(J,se){1&J&&(V.\u0275\u0275elementStart(0,"div",27)(1,"a",28)(2,"div",29),V.\u0275\u0275element(3,"img",30),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(4,"div")(5,"h1",31),V.\u0275\u0275i18n(6,0),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(7,"section",32),V.\u0275\u0275element(8,"div",33)(9,"div",34),V.\u0275\u0275elementStart(10,"div",35)(11,"div",36)(12,"a",37),V.\u0275\u0275element(13,"img",38)(14,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(15,"div",40)(16,"span"),V.\u0275\u0275i18n(17,1),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(18,"p")(19,"span"),V.\u0275\u0275i18n(20,2),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(21,"a",41),V.\u0275\u0275i18n(22,3),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(23,"span"),V.\u0275\u0275i18n(24,4),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(25,"div",42)(26,"a",43),V.\u0275\u0275element(27,"img",44)(28,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(29,"div",40)(30,"span"),V.\u0275\u0275i18n(31,5),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(32,"p")(33,"span"),V.\u0275\u0275i18n(34,6),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(35,"a",45),V.\u0275\u0275i18n(36,7),V.\u0275\u0275elementEnd()()()(),V.\u0275\u0275elementStart(37,"div",35)(38,"div",36)(39,"a",46),V.\u0275\u0275element(40,"img",47)(41,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(42,"div",40)(43,"span"),V.\u0275\u0275i18n(44,8),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(45,"p")(46,"a",48),V.\u0275\u0275i18n(47,9),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(48,"span"),V.\u0275\u0275i18n(49,10),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(50,"div",42)(51,"a",49),V.\u0275\u0275element(52,"img",50)(53,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(54,"div",40)(55,"span"),V.\u0275\u0275i18n(56,11),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(57,"p")(58,"a",51),V.\u0275\u0275i18n(59,12),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(60,"span"),V.\u0275\u0275i18n(61,13),V.\u0275\u0275elementEnd()()()(),V.\u0275\u0275elementStart(62,"div",35)(63,"div",42)(64,"a",52),V.\u0275\u0275element(65,"img",53)(66,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(67,"div",40)(68,"span"),V.\u0275\u0275i18n(69,14),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(70,"p")(71,"span"),V.\u0275\u0275i18n(72,15),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(73,"a",54),V.\u0275\u0275i18n(74,16),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(75,"div",36)(76,"a",55),V.\u0275\u0275element(77,"img",56)(78,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(79,"div",40)(80,"span"),V.\u0275\u0275i18n(81,17),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(82,"p")(83,"span"),V.\u0275\u0275i18n(84,18),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(85,"a",57),V.\u0275\u0275i18n(86,19),V.\u0275\u0275elementEnd()()()(),V.\u0275\u0275elementStart(87,"div",35)(88,"div",42)(89,"a",58),V.\u0275\u0275element(90,"img",59)(91,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(92,"div",40)(93,"span"),V.\u0275\u0275i18n(94,20),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(95,"p")(96,"span"),V.\u0275\u0275i18n(97,21),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(98,"a",60),V.\u0275\u0275i18n(99,22),V.\u0275\u0275elementEnd(),V.\u0275\u0275text(100,"? "),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(101,"div",36)(102,"a",61),V.\u0275\u0275element(103,"img",62)(104,"span",39),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(105,"div",40)(106,"span"),V.\u0275\u0275i18n(107,23),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(108,"p")(109,"span"),V.\u0275\u0275i18n(110,24),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(111,"a",63),V.\u0275\u0275i18n(112,25),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(113,"span"),V.\u0275\u0275i18n(114,26),V.\u0275\u0275elementEnd()()()()(),V.\u0275\u0275element(115,"div",64),V.\u0275\u0275elementEnd()()),2&J&&(V.\u0275\u0275advance(),V.\u0275\u0275property("routerLink",V.\u0275\u0275pureFunction0(1,R)))},dependencies:[T.RouterModule,N.RouterLink],styles:["p[_ngcontent-%COMP%]{font-size:x-large;line-height:1.5em}.library__content[_ngcontent-%COMP%]{background-image:url(librarybook-spine.685c9aba8df474ad.png);background-position:top left;background-repeat:repeat-y;background-size:40% auto;left:2vw;position:relative;background-color:#f6fbfd;padding:2em 5.5em 2em 8.5em;min-height:85vh;max-width:83vw}@media (min-width: 1600px){.library__content[_ngcontent-%COMP%]{padding-left:11em}}#library__content--about[_ngcontent-%COMP%], #library__content--regarding[_ngcontent-%COMP%], #library__content--activities[_ngcontent-%COMP%]{font-family:museo_sans300,sans-serif;font-size:1.6em;color:#000;line-height:1.25em;padding-right:1.5em}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e12836;text-decoration:none}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e12836;text-decoration:underline}.library__bgbook--top[_ngcontent-%COMP%]{position:absolute;top:-22px;right:0;height:22px;width:100%;overflow:hidden;background:url(librarybook-top.052f6fc0fcaca86e.svg) no-repeat;background-position:right top;background-size:60% 100%}.library__bgbook--right[_ngcontent-%COMP%]{position:absolute;top:0;right:-28px;width:28px;height:100%;overflow:hidden;background:url(librarybook-right.a917951f8b2c2a2e.svg) no-repeat;background-position:right top;background-size:100% 100%}.book__spread[_ngcontent-%COMP%]{background-image:url(pagecontent-divider.cc6e64d03e33db54.svg);background-position:center bottom;background-size:auto;background-repeat:no-repeat;padding:50px 0;display:inline-block;width:100%}.book__page[_ngcontent-%COMP%]{width:49.5%;margin:0;padding:0 3%;float:left;text-align:center}.book__page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left;margin-top:20px}.book__page__imglink[_ngcontent-%COMP%]{display:none}.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.3em;font-weight:700}.skypeContentContainer[_ngcontent-%COMP%]   .navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400;width:95%;display:inline-block}.navContentSubTitle[_ngcontent-%COMP%]{text-align:left;margin-bottom:20px;margin-top:30px}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.25em;font-weight:700}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:125px;height:auto;max-width:27%;margin:3px}.library-b-back[_ngcontent-%COMP%]{position:absolute;right:21px;top:3px;cursor:pointer;z-index:290}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.navContentSubTitle[_ngcontent-%COMP%]{margin-left:0}@media (max-width: 1150px){.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.navContentSubTitle[_ngcontent-%COMP%]{text-align:left;margin:0 0 30px;font-size:1.1em}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 769px) and (orientation: portrait),only screen and (max-device-width: 640px) and (orientation: portrait),(min-resolution: 192dpi) and (max-device-width: 769px) and (orientation: portrait){.library__content[_ngcontent-%COMP%]{padding:0 5%}#library__content--about[_ngcontent-%COMP%], #library__content--regarding[_ngcontent-%COMP%], #library__content--activities[_ngcontent-%COMP%], .book__spread[_ngcontent-%COMP%]{padding-right:0}.library__bgbook--right[_ngcontent-%COMP%]{display:none}.book__page[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-device-width: 480px),(max-width: 480px){.library__content[_ngcontent-%COMP%]{padding:2em 5%}#library__content--about[_ngcontent-%COMP%], #library__content--regarding[_ngcontent-%COMP%], #library__content--activities[_ngcontent-%COMP%], .book__spread[_ngcontent-%COMP%]{padding-right:0}.library__bgbook--right[_ngcontent-%COMP%]{display:none}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__spread[_ngcontent-%COMP%] > .book__page[_ngcontent-%COMP%]:last-child{margin-top:19%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}.navContentSubTitle[_ngcontent-%COMP%]{margin-left:0}}"]})}}return G})()},2170:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.HolidayTraditionsComponent=void 0;const z=w(1635),T=z.__importStar(w(8813)),V=w(5312),N=w(7768),R=w(177),M=z.__importStar(w(3953)),G=z.__importStar(w(8229)),Y=z.__importStar(w(7768)),K=()=>["/library"];C.HolidayTraditionsComponent=(()=>{class se{constructor(_e){this.countriesService=_e,this.env=V.environment,this.key=this.env.azureMapsKey,this.showTradition="none"}safeResize(){console.log("try to resize the map: "+this.map),setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)}ngAfterViewInit(){console.log("Creating map"),this.map=new T.Map("mapContainer",{renderWorldCopies:!0,view:"Auto",authOptions:{authType:T.AuthenticationType.subscriptionKey,subscriptionKey:this.key}}),this.map.events.add("ready",()=>{console.log("Map is ready to use"),this.countriesService.countries.forEach(_e=>{var Ae=new T.HtmlMarker({htmlContent:"<img width=32px height=32px alt="+_e.name+' "flag" src="'+_e.flag+'"/>',position:[_e.longitude,_e.latitude]});this.map.markers.add(Ae);var Ne=this;this.map.events.add("click",Ae,function(Le){Ne.showTradition=_e.name})})})}static{this.\u0275fac=function(Ae){return new(Ae||se)(M.\u0275\u0275directiveInject(G.CountriesService))}}static{this.\u0275cmp=M.\u0275\u0275defineComponent({type:se,selectors:[["app-holiday-traditions"]],standalone:!0,features:[M.\u0275\u0275StandaloneFeature],decls:106,vars:21,consts:()=>{let _e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo;return _e="HOLIDAY TRADITIONS FROM AROUND THE WORLD",Ae="Germany",Ne="There is so much celebrating that it has to begin on December 6th, St. Nicholas Day. As in many other European countries, on the eve of Dec. 6th children place a shoe or boot by the fireplace. During the night, St. Nicholas, the patron saint of children, hops from house to house carrying a book of sins in which all of the misdeeds of the children are written. If they have been good, he fills the shoe or boot with delicious holiday edibles. If they have not been good, their shoe is filled with twigs.",Le="Italy",tt="On Christmas Eve, Italian children hang their stockings by the chimney where it remains empty until Jan. 6, the Befana day (also known as the Epiphany,) when the befana (during the night) fills it with sweets or coal, depending on whether the children were good or naughty. (The Befana is an old woman (witch) that flies on a broom; she is considered nice and kind.)",_t="Spain",Bt="Christmas dinner is never eaten until after midnight. Christmas Day is spent at church, at feasts and in more merry-making. It is not Santa who comes to Spain bearing gifts, but the Three Wise Men. [Children stuff their shoes with straw for the Magi's camels and receive gifts in return.]",yt="Mexico",Pt="On Christmas Eve, small children dressed as shepherds stand on either side of the nativity scene while members of the company kneel and sing a litany, after which the Christ Child is lulled to sleep with the cradle song, \"El Rorro\" (Babe in Arms). At midnight the birth of Christ is announced with fireworks, ringing bells and blowing whistles. Devout worshipers surge into churches to attend the famous \"Misa de Gallo\" or \"Mass of the Rooster.\" Following Mass, families return home for a tremendous dinner of traditional Mexican foods. Christmas Day has no special celebration though many have adopted the American style Christmas with a Christmas tree and Santa Claus.",vt="France",Gt="Family celebrations begin with the decoration of the Christmas tree a few days before Christmas; candles and lights, tinsel and many colored stars are attached to it. On Christmas Eve when the children are asleep, little toys, candies and fruits are hung on the branches of the tree as a supplement to the gifts Santa Claus has left in the shoes before the fireplace. Puppet shows are also given every year for Christmas. At midnight everyone attends the Christmas mass. When the family returns home after midnight mass, there is a late supper known as \"le r'veillon.\" Ordinarily, young children do not attend midnight mass with their parents, but go to bed early to dream of their Christmas gifts. Before going to bed, they put their shoes by the fireside for a gift from \"le p're de Noel\" or \"le petit Jesus.\"",Ht="Japan",jt="The Nativity scene is given a corner in every Christian house. They also have turkey for Christmas dinner, Christmas trees, evergreens and mistletoe in their stores and homes and even Hoeiosho, the Japanese equivalent of Santa Claus, who is a Buddhist monk bearing gifts for the children. The family members exchange gifts and send cards with the true heart of giving. Japan's Christmas traditions for Japanese Christians are to spend the day for worship, and charity for the poor and sick. The children perform plays re-enacting the Nativity scene on Christmas Eve. Unique Christmas traditions of Japan are Christmas Cakes, Fried Chicken, and Daiku.",Yt="China",On="Christians in China celebrate by lighting their houses with beautiful paper lanterns and decorating their Christmas trees, which they call \"Trees of Light,\" with paper chains, paper flowers, and paper lanterns. Chinese children hang muslin stockings and await a visit from Santa Claus, whom they call Dun Che Lao Ren (dwyn-chuh-lau-oh-run) which means \"Christmas Old Man.\"",In="Russia",Rn="Santa's stop in Russia on the NORAD Tracks Santa map December 24 comes before most people there are celebrating Christmas. In Russia, the biggest holiday is January 1, New Year's Day. They celebrate it similarly to Christmas, with Christmas trees and Ded Moroz, who is a lot like Santa Claus. Many Russians celebrate Christmas, but they celebrate it on January 7 -- so Christmas comes after New Year's Day!",Nr="Brazil",wr="In Brazil, it is hot at Christmastime so Santa Claus wears silk instead of fur. People also get presents from a secret friend, called an \"amigo secreto.\" (Family and friends put their names into a hat to pick secret friends before Christmas.) After Christmas the secret friend reveals his or her name.",Gr="Australia",Tn="Many candles may light the way for Santa Claus in Australia; Australians like to sing Christmas carols by candlelight. They sing the same carols as in other countries, but have some special ones too, such as \"Six White Boomers\". What's a \"boomer\"? It's a kangaroo! Christmas in Australia is December 25, but it is summer then, not winter, since the country is located in the southern hemisphere.",Nn="Israel",br="Long ago, the very first Christmas was celebrated in the land of Israel.  Today, the major holiday in December celebrated by many people in Israel, as throughout the Jewish world, is Hanukkah, the Holiday of Lights. Hanukkah begins December 7 and is celebrated for eight nights and days. Each night another candle is lit in a special candelabrum called a menorah. Children may receive a special present, a spinning top called a dreidel.",bt="India",qt="India has many different holiday traditions because there are many cultures and religions across the country. The biggest winter holiday is Diwali, the festival of light, when people light candles everywhere, eat a feast and exchange gifts. People who have Christmas trees often decorate them in green silk, colored stones, and gold paint.",fn="Saudi Arabia",Ut="December 24 is a special day in Saudi Arabia, but not because it is Christmas Eve; it is the birthday of the Prophet Mohammed. The biggest holiday in Saudi Arabia, as throughout the Muslim world, is Ramadan. The date changes from year to year and it lasts a month. In 2017, Ramadan began in June. Muslims do not eat or drink at all during the day for Ramadan, but have wonderful feasts every night after sunset. ",bn="Kenya",Pn="Santa won't be the only one traveling in Kenya for Christmas. Many people travel from the cities where they live most of the year, to their family home in the country where they grew up. With their family, they enjoy singing and special, traditional foods. They give and receive presents, but do not open them until the day after Christmas, which is known as Boxing Day.",gr="Sweden",ui="In Sweden, Christmas is the biggest family holiday, and the biggest day is Christmas Eve. The special meal they eat is what they call a smorgasbord, with many kinds of meats and treats. About 10 days before Christmas, on Saint Lucy's Day, the oldest daughter of the house wears a crown with lighted candles and sings to the family!",Oi="England",Dr="Kids wake up Christmas morning to find that Father Christmas left presents at the foot of the bed. Hanging mistletoe and holly are traditions that many believe will bring good luck. When friends and families sit down to the midday feast, they find a colorful Christmas cracker beside their dinner plate. A Christmas cracker is a paper-covered tube, covered in foil, twisted at both ends. When the end tabs are pulled, there is a loud crack, spilling out a fun paper hat to wear at dinner, small trinkets, and a riddle to read aloud to everyone at the table",hr="Iceland",ei="The residents on the far northern island don't believe in Santa Claus, but rather 13 Yule Lads. One Yule Lad visits every evening of the 13 days preceding Christmas. Before kids go to sleep, they take one of their best shoes and leave it near an open window. Depending on how good they behaved the day prior, a Yule Lad leaves sweets and small gifts.or rotting potatoes.",ra="Canada",Hi="Santa Claus is a holiday fixture in Canada, but the ethnic diversity of the country is reflected in a variety of holiday traditions. English settlers brought Father Christmas; French settlers welcomed Pere Noel and German immigrants brought St. Nicholas.",No="United States",fo="Holiday traditions in the United States reflect a blend of cultures from all around the world. The roots of Christmas carols trace back to traditions in England and Australia.  Christmas trees customs are believed to have come from Germany. Santa Claus in a red suit originated in Scandinavia and his arrival through the chimney to fill stockings is reminiscent of the Netherlands. Gifts are typically placed under Christmas trees that are decorated with lights and ornaments.",[_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,[1,"popup__wrapper",2,"min-height","100vh"],[3,"routerLink"],[2,"border","none","background-color","transparent"],["tabindex","0",1,"button","library-b-back"],["src","assets/images/backBtn.png"],[1,"navContentTitle"],["id","library__content--traditions",1,"library__content"],["id","mapContainer",2,"min-height","70vh"],[1,"tradition1","traditionsContent-info",3,"hidden"],[1,"tradition2","traditionsContent-info",3,"hidden"],[1,"tradition3","traditionsContent-info",3,"hidden"],[1,"tradition4","traditionsContent-info",3,"hidden"],[1,"tradition5","traditionsContent-info",3,"hidden"],[1,"tradition6","traditionsContent-info",3,"hidden"],[1,"tradition7","traditionsContent-info",3,"hidden"],[1,"tradition8","traditionsContent-info",3,"hidden"],[1,"tradition9","traditionsContent-info",3,"hidden"],[1,"tradition10","traditionsContent-info",3,"hidden"],[1,"tradition11","traditionsContent-info",3,"hidden"],[1,"tradition12","traditionsContent-info",3,"hidden"],[1,"tradition13","traditionsContent-info",3,"hidden"],[1,"tradition14","traditionsContent-info",3,"hidden"],[1,"tradition15","traditionsContent-info",3,"hidden"],[1,"tradition16","traditionsContent-info",3,"hidden"],[1,"tradition17","traditionsContent-info",3,"hidden"],[1,"tradition18","traditionsContent-info",3,"hidden"],[1,"tradition19","traditionsContent-info",3,"hidden"],["id","weeElf",1,"spotimg","spotimg--library"]]},template:function(Ae,Ne){1&Ae&&(M.\u0275\u0275elementStart(0,"div",39)(1,"a",40)(2,"button",41)(3,"span",42),M.\u0275\u0275element(4,"img",43),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementStart(5,"div")(6,"h1",44),M.\u0275\u0275i18n(7,0),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(8,"section",45),M.\u0275\u0275element(9,"div",46),M.\u0275\u0275elementStart(10,"div",47)(11,"h2"),M.\u0275\u0275i18n(12,1),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(13,"p"),M.\u0275\u0275i18n(14,2),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(15,"div",48)(16,"h2"),M.\u0275\u0275i18n(17,3),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(18,"p"),M.\u0275\u0275i18n(19,4),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(20,"div",49)(21,"h2"),M.\u0275\u0275i18n(22,5),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(23,"p"),M.\u0275\u0275i18n(24,6),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(25,"div",50)(26,"h2"),M.\u0275\u0275i18n(27,7),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(28,"p"),M.\u0275\u0275i18n(29,8),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(30,"div",51)(31,"h2"),M.\u0275\u0275i18n(32,9),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(33,"p"),M.\u0275\u0275i18n(34,10),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(35,"div",52)(36,"h2"),M.\u0275\u0275i18n(37,11),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(38,"p"),M.\u0275\u0275i18n(39,12),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(40,"div",53)(41,"h2"),M.\u0275\u0275i18n(42,13),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(43,"p"),M.\u0275\u0275i18n(44,14),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(45,"div",54)(46,"h2"),M.\u0275\u0275i18n(47,15),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(48,"p"),M.\u0275\u0275i18n(49,16),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(50,"div",55)(51,"h2"),M.\u0275\u0275i18n(52,17),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(53,"p"),M.\u0275\u0275i18n(54,18),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(55,"div",56)(56,"h2"),M.\u0275\u0275i18n(57,19),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(58,"p"),M.\u0275\u0275i18n(59,20),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(60,"div",57)(61,"h2"),M.\u0275\u0275i18n(62,21),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(63,"p"),M.\u0275\u0275i18n(64,22),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(65,"div",58)(66,"h2"),M.\u0275\u0275i18n(67,23),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(68,"p"),M.\u0275\u0275i18n(69,24),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(70,"div",59)(71,"h2"),M.\u0275\u0275i18n(72,25),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(73,"p"),M.\u0275\u0275i18n(74,26),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(75,"div",60)(76,"h2"),M.\u0275\u0275i18n(77,27),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(78,"p"),M.\u0275\u0275i18n(79,28),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(80,"div",61)(81,"h2"),M.\u0275\u0275i18n(82,29),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(83,"p"),M.\u0275\u0275i18n(84,30),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(85,"div",62)(86,"h2"),M.\u0275\u0275i18n(87,31),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(88,"p"),M.\u0275\u0275i18n(89,32),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(90,"div",63)(91,"h2"),M.\u0275\u0275i18n(92,33),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(93,"p"),M.\u0275\u0275i18n(94,34),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(95,"div",64)(96,"h2"),M.\u0275\u0275i18n(97,35),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(98,"p"),M.\u0275\u0275i18n(99,36),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(100,"div",65)(101,"h2"),M.\u0275\u0275i18n(102,37),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(103,"p"),M.\u0275\u0275i18n(104,38),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275element(105,"div",66),M.\u0275\u0275elementEnd()()),2&Ae&&(M.\u0275\u0275advance(),M.\u0275\u0275property("routerLink",M.\u0275\u0275pureFunction0(20,K)),M.\u0275\u0275advance(9),M.\u0275\u0275property("hidden","Germany"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Italy"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Spain"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Mexico"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","France"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Japan"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","China"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Russia"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Brazil"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Australia"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Israel"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","India"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Saudi Arabia"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Kenya"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Sweden"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","England"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Iceland"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","Canada"!=Ne.showTradition),M.\u0275\u0275advance(5),M.\u0275\u0275property("hidden","United States of America"!=Ne.showTradition))},dependencies:[N.RouterModule,Y.RouterLink,R.CommonModule],styles:["p[_ngcontent-%COMP%]{font-size:x-large;line-height:1.5em}.library__content[_ngcontent-%COMP%]{background-image:url(librarybook-spine.685c9aba8df474ad.png);background-position:top left;background-repeat:repeat-y;background-size:40% auto;left:2vw;position:relative;background-color:#f6fbfd;padding:2em 5.5em 2em 8.5em;min-height:85vh;max-width:83vw}@media (min-width: 1600px){.library__content[_ngcontent-%COMP%]{padding-left:11em}}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e12836;text-decoration:none}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e12836;text-decoration:underline}.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.3em;font-weight:700}.skypeContentContainer[_ngcontent-%COMP%]   .navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400;width:95%;display:inline-block}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.25em;font-weight:700}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:125px;height:auto;max-width:27%;margin:3px}.traditionsContent-info[_ngcontent-%COMP%]{background-color:#0003;line-height:1.4em;padding:10px}.traditionsContent[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#a70626;font-size:1.9em;font-family:museo_sans500;font-weight:500;text-align:center;margin:15px;text-transform:uppercase}.library-b-back[_ngcontent-%COMP%]{position:absolute;right:21px;top:3px;cursor:pointer;z-index:290}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}@media (max-width: 1150px){.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 769px) and (orientation: portrait),only screen and (max-device-width: 640px) and (orientation: portrait),(min-resolution: 192dpi) and (max-device-width: 769px) and (orientation: portrait){.library__content[_ngcontent-%COMP%]{padding:0 5%}}@media only screen and (max-device-width: 480px),(max-width: 480px){.library__content[_ngcontent-%COMP%]{padding:2em 5%}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}}"]})}}return se})()},7824:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.HomeComponent=void 0;const z=w(1635),T=w(3953),V=w(177),N=w(5312),R=w(2128),M=w(1086),G=w(4334),Y=w(4576),K=w(3640),J=w(7768),se=z.__importDefault(w(5918)),U=z.__importStar(w(3953)),_e=z.__importStar(w(8842)),Ae=z.__importStar(w(177)),Ne=z.__importStar(w(7768)),Le=["countdown"],tt=()=>["/calendar"],_t=()=>["/musicplayer"],Bt=()=>["/library"],yt=()=>["/santahistory"],Pt=()=>["/sleighinformation"],vt=()=>["/holidaytraditions"],Gt=()=>["/holidayActivities"],Ht=()=>["/noradhq"],jt=()=>["/map"],Yt=()=>["/privacy"];function On(Rn,Nr){if(1&Rn&&(U.\u0275\u0275elementStart(0,"li")(1,"a",186),U.\u0275\u0275text(2),U.\u0275\u0275elementEnd()()),2&Rn){const wr=Nr.$implicit,Gr=U.\u0275\u0275nextContext();U.\u0275\u0275advance(),U.\u0275\u0275propertyInterpolate2("href","",Gr.env.apiUrl,"/",wr.code,"/index.html",U.\u0275\u0275sanitizeUrl),U.\u0275\u0275attribute("aria-label","Switch to "+wr.name+" language"),U.\u0275\u0275advance(),U.\u0275\u0275textInterpolate(wr.name)}}C.HomeComponent=(()=>{class Rn{constructor(wr,Gr){this.timerService=Gr,this.env=N.environment,this.shouldShowVillage=!1,this.languageArray=[{name:"English",code:"en"},{name:"Espa\xf1ol",code:"es"},{name:"Deutsch",code:"de"},{name:"Fran\xe7ais",code:"fr"},{name:"Italiano",code:"it"},{name:"\ud55c\uae00",code:"ko"},{name:"\u65e5\u672c\u8a9e",code:"ja"},{name:"\u4e2d\u6587",code:"zh"},{name:"Portugu\xeas",code:"pt"}],this.locale=wr}getCurrentLanguage(){return this.languageArray.filter(wr=>wr.code===this.locale)[0]?.name||"English"}getLocalizedImageUrl(){return"assets/images/pop/christmastide/trackNow_"+(0,V.getLocaleId)(this.locale)+".png"}hasCountdownExpired(){const wr=this.timerService.hasCountdownExpired();return"yes"!==sessionStorage.getItem("firstLoad")&&wr&&(sessionStorage.setItem("firstLoad","yes"),document.getElementById("trackSantaId").click()),wr}showVillage(){return this.shouldShowVillage!==this.timerService.showVillage&&(this.updateVillage(),this.shouldShowVillage=this.timerService.showVillage),this.shouldShowVillage}showChatbot(){return this.timerService.showChatbot}ngOnInit(){this.shouldShowVillage&&this.updateVillage()}ngAfterViewInit(){window.gsap=se.default,Promise.all(["assets/images/village/animation/lights-library.png","assets/images/village/animation/lights-theatre.png"].map(Gr=>this.preloadImage(Gr))).then(()=>{this.greensockAnimations()})}preloadImage(wr){return new Promise((Gr,Tn)=>{const Nn=new Image;Nn.src=wr,Nn.onload=()=>Gr(),Nn.onerror=Tn})}updateVillage(){$(document).ready(()=>{this.greensockAnimations()})}greensockAnimations(){console.log("Running GSAP animations");const wr=$(window).height();if($("#section-village").css({height:wr}),$("#section-footer").css({height:wr}),$("#defaultCountdown, #countMsg").css("color","#000000"),$("#village-animations").height()>=wr||0===$("#village-animations").width()){const Ut=3.839171975*wr;$("#village-animations").css({height:`${wr}px`,width:`${Ut}px`}),$("#village-links").css({height:`${wr}px`,width:`${Ut}px`})}[{linkClass:".linkLibrary",boxId:"#linkBoxLibrary"},{linkClass:".linkArcade",boxId:"#linkBoxArcade"},{linkClass:".linkNoradHQ",boxId:"#linkBoxNoradHQ"},{linkClass:".linkMusic",boxId:"#linkBoxMusic"},{linkClass:".linkMovies",boxId:"#linkBoxMovies"},{linkClass:".linkGiftshop",boxId:"#linkBoxGiftShop"}].forEach(({linkClass:Ut,boxId:bn})=>{$(Ut).mouseenter(()=>{$(bn).css("display","inherit")}).mouseleave(()=>{$(bn).css("display","none")})});var Tn=[];[{id:"village-musicstage",animations:[{duration:.8,opacity:.95},{duration:.6,opacity:0},{duration:.8,opacity:.5},{duration:.4,opacity:.8},{duration:1.8,opacity:.1},{duration:.4,opacity:.4},{duration:.6,opacity:.3},{duration:1.4,opacity:.8},{duration:.4,opacity:.3},{duration:.4,opacity:.95},{duration:1,opacity:.6},{duration:.4,opacity:.95}]},{id:"village-library",animations:[{duration:.8,opacity:.95},{duration:1,opacity:.6},{duration:.4,opacity:.95},{duration:1.8,opacity:.1},{duration:.4,opacity:.4},{duration:.6,opacity:.3},{duration:1.4,opacity:.8},{duration:.4,opacity:.3},{duration:.6,opacity:0},{duration:.8,opacity:.5},{duration:.4,opacity:.8},{duration:.4,opacity:.95}]},{id:"village-theater",animations:[{duration:.2,opacity:.4},{duration:.5,opacity:.3},{duration:.7,opacity:.8},{duration:.4,opacity:.5},{duration:.2,opacity:.8},{duration:.2,opacity:.3},{duration:.7,opacity:0},{duration:.9,opacity:.95},{duration:.4,opacity:.6},{duration:.2,opacity:.95},{duration:.9,opacity:.1},{duration:.2,opacity:.95}]},{id:"village-arcade",animations:[{duration:.7,opacity:0},{duration:.7,opacity:0},{duration:.9,opacity:.95},{duration:.2,opacity:.4},{duration:.5,opacity:.3},{duration:.4,opacity:.5},{duration:.9,opacity:.1},{duration:.2,opacity:.95},{duration:.2,opacity:.8},{duration:.2,opacity:.3},{duration:.7,opacity:.8},{duration:.4,opacity:.6},{duration:.2,opacity:.95}]},{id:"village-noradhq",animations:[{duration:.4,opacity:.95},{duration:.3,opacity:0},{duration:.4,opacity:.5},{duration:.2,opacity:.8},{duration:.9,opacity:.1},{duration:.2,opacity:.4},{duration:.3,opacity:.3},{duration:.7,opacity:.8},{duration:.2,opacity:.3},{duration:.2,opacity:.95},{duration:.5,opacity:.6},{duration:.2,opacity:.95}]}].forEach(Ut=>{const bn=document.getElementById(Ut.id);console.log(`Checking element with ID: ${Ut.id}`,bn),bn?((Ut,bn)=>{const Pn=document.getElementById(Ut);if(Pn){console.log(`Animating element with ID: ${Ut}`);const gr=se.default.timeline({repeat:-1});Tn.push(gr),bn.forEach(ui=>{gr.add(se.default.to(Pn,ui))})}else console.warn(`Element with ID "${Ut}" not found`)})(Ut.id,Ut.animations):console.warn(`Element with ID "${Ut.id}" is missing in the DOM`)});const bt=(Ut,bn,Pn,gr)=>{const ui=document.getElementById(Ut),Oi=document.getElementById(bn);if(ui&&Oi){console.log(`Animating elf skating with IDs: ${Ut}, ${bn}`);const Dr=se.default.timeline({repeat:-1});Tn.push(Dr),Dr.add(se.default.to(ui,{duration:Pn,left:"-50px",ease:"Linear.easeNone"})),Dr.add(se.default.to(Oi,{duration:gr,left:"1850px",ease:"Linear.easeNone"}))}else console.warn(`Elf elements with IDs "${Ut}" or "${bn}" not found`)};bt("elf-iceskate-left","elf-iceskate-right",20,20),bt("elf-iceskate-left2","elf-iceskate-right2",10,5),console.log("GSAP animations initialization complete"),window.addEventListener("scroll",()=>{const Ut=window.innerHeight;document.querySelectorAll("#defaultCountdown, #countMsg").forEach(fo=>{fo.style.color="#000000"}),document.querySelectorAll("#northPoleWeatherReport>h3,#northPoleWeatherReport>div").forEach(fo=>{fo.style.color="#000000"}),document.querySelectorAll("#userWeatherReport>h3,#userWeatherReport>div").forEach(fo=>{fo.style.color="#000000"});const bn=document.querySelector("#northPoleWeatherReport i");bn&&(bn.style.color="#000000");const Pn=document.querySelector("#userWeatherReport i");Pn&&(Pn.style.color="#000000");const gr=document.querySelector("#musicArrow");gr&&(gr.style.fill="#000000"),document.querySelectorAll(".langOpt").forEach(fo=>{fo.style.color="#000000"});const ui=document.querySelector("#langSelDropCurrentValue");ui&&(ui.style.color="#000000");const Oi=document.querySelector("#langArrow");Oi&&(Oi.style.fill="#000000");const Dr=document.querySelector("#iconTwitter");Dr&&(Dr.style.backgroundPosition="-31px 0");const hr=document.querySelector("#iconFacebook");hr&&(hr.style.backgroundPosition="5px 0");const ei=document.querySelector("#iconYouTube");ei&&(ei.style.backgroundPosition="-70px 0");const ra=document.querySelector("#iconNewsline");ra&&(ra.style.backgroundPosition="-179px 0");const Hi=document.querySelector("#iconInstagram");Hi&&(Hi.style.backgroundPosition="-144px 0");const No=document.querySelector("#section-footer");No&&(No.style.height=`${Ut}px`)});const fn=(Ut,bn)=>{const Pn=document.getElementById(Ut);if(Pn){const gr=se.default.timeline({repeat:-1});Tn.push(gr),bn.forEach(ui=>{gr.set(Pn,{x:ui.x,y:ui.y},`+=${ui.duration}`)})}else console.warn(`Sprite element with ID "${Ut}" not found`)};fn("elf-chimneysweeper",[{x:0,y:0,duration:.1},{x:-40,y:0,duration:10},{x:-80,y:0,duration:.1},{x:-120,y:0,duration:.1},{x:-160,y:0,duration:.1},{x:-200,y:0,duration:.1},{x:-240,y:0,duration:.1},{x:-280,y:0,duration:.1},{x:0,y:-78,duration:.1},{x:-40,y:-78,duration:.1},{x:-80,y:-78,duration:.1},{x:-120,y:-78,duration:.1},{x:-160,y:-78,duration:.1},{x:-200,y:-78,duration:.1},{x:-240,y:-78,duration:.1},{x:-280,y:-78,duration:.1},{x:0,y:-156,duration:.1},{x:-40,y:-156,duration:.1},{x:-80,y:-156,duration:.1},{x:-120,y:-156,duration:.1},{x:-160,y:-156,duration:.1},{x:-200,y:-156,duration:.1},{x:-240,y:-156,duration:.1},{x:-280,y:-156,duration:.1},{x:0,y:-234,duration:.1},{x:-40,y:-234,duration:.1},{x:-80,y:-234,duration:.1},{x:-120,y:-234,duration:.1},{x:-160,y:-234,duration:.1},{x:-200,y:-234,duration:.1},{x:-240,y:-234,duration:.1},{x:-280,y:-234,duration:.1},{x:0,y:-312,duration:.1},{x:-40,y:-312,duration:.1},{x:-80,y:-312,duration:.1},{x:-120,y:-312,duration:.1},{x:-160,y:-312,duration:.1},{x:-200,y:-312,duration:.1},{x:-240,y:-312,duration:3}]),fn("elf-diver",[{x:0,y:0,duration:.1},{x:-116,y:0,duration:.1},{x:-232,y:0,duration:.1},{x:-348,y:0,duration:.1},{x:-464,y:0,duration:.1},{x:-580,y:0,duration:.1},{x:-696,y:0,duration:.1},{x:0,y:-73,duration:.1},{x:-116,y:-73,duration:.1},{x:-232,y:-73,duration:.1},{x:-348,y:-73,duration:.1},{x:-464,y:-73,duration:.1},{x:-580,y:-73,duration:.1},{x:-696,y:-73,duration:.1},{x:0,y:-146,duration:.1},{x:-116,y:-146,duration:.1},{x:-232,y:-146,duration:.1},{x:-348,y:-146,duration:.1},{x:-464,y:-146,duration:20},{x:-580,y:-146,duration:.1},{x:-696,y:-146,duration:.1},{x:0,y:-219,duration:.1},{x:-116,y:-219,duration:.1},{x:-232,y:-219,duration:.1},{x:-348,y:-219,duration:.1},{x:-464,y:-219,duration:.1},{x:-580,y:-219,duration:.1}]),fn("elf-airtanker",[{x:0,y:0,duration:8},{x:-71,y:0,duration:.1},{x:-142,y:0,duration:.1},{x:-213,y:0,duration:.1},{x:-284,y:0,duration:.1},{x:0,y:-97,duration:.1},{x:-71,y:-97,duration:.1},{x:-142,y:-97,duration:.1},{x:-213,y:-97,duration:.1},{x:-284,y:-97,duration:.1},{x:0,y:-194,duration:.1},{x:-71,y:-194,duration:.1},{x:-142,y:-194,duration:.1},{x:-213,y:-194,duration:.1},{x:-284,y:-194,duration:.1},{x:0,y:-291,duration:.1},{x:-71,y:-291,duration:.1},{x:-142,y:-291,duration:.1},{x:-213,y:-291,duration:.1},{x:-284,y:-291,duration:.1},{x:0,y:-388,duration:.1},{x:-71,y:-388,duration:.1},{x:-142,y:-388,duration:.1},{x:-213,y:-388,duration:.1},{x:-284,y:-388,duration:.1},{x:0,y:-485,duration:.1},{x:-71,y:-485,duration:.1},{x:-142,y:-485,duration:.1},{x:-213,y:-485,duration:.1},{x:-284,y:-485,duration:.1}]),fn("elf-skywatch",[{x:0,y:0,duration:.5},{x:-69,y:0,duration:.5},{x:-138,y:0,duration:.5},{x:-207,y:0,duration:.5},{x:-276,y:0,duration:.5},{x:0,y:-59,duration:.7},{x:-69,y:-59,duration:.5},{x:-138,y:-59,duration:.5},{x:-207,y:-59,duration:.5},{x:-276,y:-59,duration:.7},{x:0,y:-118,duration:.5},{x:-69,y:-118,duration:.5},{x:-138,y:-118,duration:.7},{x:-207,y:-118,duration:.5},{x:-276,y:-118,duration:.5},{x:0,y:-177,duration:.5},{x:-69,y:-177,duration:.7},{x:-138,y:-177,duration:.5},{x:-207,y:-177,duration:.5},{x:-276,y:-177,duration:.5}]),fn("elf-mailboxchecker",[{x:0,y:0,duration:.2},{x:-71,y:0,duration:.2},{x:-142,y:0,duration:.2},{x:-213,y:0,duration:.2},{x:-284,y:0,duration:1},{x:-355,y:0,duration:.2},{x:-426,y:0,duration:.2},{x:0,y:-72,duration:.2},{x:-71,y:-72,duration:.2},{x:-142,y:-72,duration:.2},{x:-213,y:-72,duration:.2},{x:-284,y:-72,duration:.2},{x:-355,y:-72,duration:.2},{x:-426,y:-72,duration:.2},{x:0,y:-144,duration:.2},{x:-71,y:-144,duration:.2},{x:-142,y:-144,duration:.2},{x:-213,y:-144,duration:.2},{x:-284,y:-144,duration:.2},{x:-355,y:-144,duration:.2},{x:-426,y:-144,duration:.2},{x:0,y:-216,duration:.8},{x:-71,y:-216,duration:.2},{x:-142,y:-216,duration:.2},{x:-213,y:-216,duration:.6},{x:-284,y:-216,duration:.2},{x:-355,y:-216,duration:.2},{x:-426,y:-216,duration:.2},{x:0,y:-288,duration:.2},{x:-71,y:-288,duration:.2},{x:-142,y:-288,duration:.2},{x:-213,y:-288,duration:.2},{x:-284,y:-288,duration:.2},{x:-355,y:-288,duration:.2},{x:-426,y:-288,duration:.2}]),fn("hqdish",[{x:0,y:0,duration:1},{x:-80,y:0,duration:.16},{x:-160,y:0,duration:.16},{x:-240,y:0,duration:.16},{x:-320,y:0,duration:.16},{x:-320,y:0,duration:.16},{x:-80,y:-68,duration:.16},{x:-160,y:-68,duration:.16},{x:-240,y:-68,duration:.16},{x:-320,y:-68,duration:.16},{x:-80,y:-136,duration:.16},{x:-160,y:-136,duration:.16},{x:-240,y:-136,duration:.16},{x:-320,y:-136,duration:.16},{x:-80,y:-204,duration:10},{x:-160,y:-204,duration:.16},{x:-240,y:-204,duration:.16},{x:-320,y:-204,duration:.16},{x:-80,y:-272,duration:.16},{x:-160,y:-272,duration:.16},{x:-240,y:-272,duration:.16}]),console.log("All animations have been initialized")}toggleHNav(wr){const Gr=$("#hamburgerControl");(!wr||wr&&Gr.hasClass("isVisible"))&&Gr.toggleClass("isVisible")}static{this.\u0275fac=function(Gr){return new(Gr||Rn)(U.\u0275\u0275directiveInject(T.LOCALE_ID),U.\u0275\u0275directiveInject(_e.TimerService))}}static{this.\u0275cmp=U.\u0275\u0275defineComponent({type:Rn,selectors:[["app-home"]],viewQuery:function(Gr,Tn){if(1&Gr&&U.\u0275\u0275viewQuery(Le,5),2&Gr){let Nn;U.\u0275\u0275queryRefresh(Nn=U.\u0275\u0275loadQuery())&&(Tn.countdown=Nn.first)}},standalone:!0,features:[U.\u0275\u0275StandaloneFeature],decls:257,vars:57,consts:()=>{let wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,jr,Do,_i,xs,tc,gc,Vs,Fo,Ta,kr,Ei,dr,Gs,va,$a,ca,Xo,ua,Ho,Aa,oo,so;return wr="North Pole",Gr="Gift Shop",Tn="Games",Nn="Movies",br="Music",bt="Library",qt="About Santa",fn="Regarding Santa's Sleigh",Ut="Holiday Traditions from around the world",bn="Holiday Activities",Pn="NORAD HQ",gr="NORAD's Mission",ui="How We Track Santa",Oi="Our Team",Dr="Why We Track Santa",hr="Pressroom",ei="NORAD HQ",ra="THE ARCADE",Hi="THE THEATRE",No="THE MUSIC STAGE",fo="THE LIBRARY",jr="GIFT SHOP",Do="Gift Shop",_i="Buy Santa and NORAD gear",xs="The Arcade",tc="Play a new game every day",gc="The Library",Vs="Learn about Santa, his magic sleigh, and holiday traditions",Fo="The Theater",Ta="Watch movies about Santa and NORAD",kr="The Music Stage",Ei="Listen to Santa's favorite holiday songs",dr="NORAD HQ",Gs="Learn about NORAD and our mission",va="Come Back December 24th to track Santa's flight around the world",$a="The Wait is Over! Start tracking Santa now!",ca="Via Phone: +1 (877) HI-NORAD",Xo="Track Santa on the fly with our mobile apps",ua="Download Android App",Ho="Download iOS App",Aa="Privacy Policy",oo="Press Room",so="Copyright 2023 NORAD Tracks Santa",[wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,jr,Do,_i,xs,tc,gc,Vs,Fo,Ta,kr,Ei,dr,Gs,va,$a,ca,Xo,ua,Ho,Aa,oo,so,["id","wrapper",3,"hidden"],["id","root-container",3,"hidden"],["id","languageContainer","aria-label","Language Selection"],["id","langSelDrop",1,"langSelDrop"],["id","langSelDropCurrentValue",2,"color","rgb(0, 0, 0)"],["aria-label","Language Selection List",1,"langSelDropList"],[4,"ngFor","ngForOf"],["id","countdownContainer","aria-label","Countdown Clock"],[1,"countdownInternal"],["id","socialContainer","aria-label","Social Media"],["id","chatContainer","aria-label","Chat and Weather Reports"],[3,"hidden"],["id","northPoleWeatherReport","aria-label","North Pole Weather Report"],["id","userWeatherReport","aria-label","User Weather Report",2,"padding-left","15px"],["id","hamburgerControl","aria-label","Mobile Navigation",1,"hnavListContainer"],[1,"hnavList","accordion"],["id","hnavPanel1",1,"hnavLiLabel"],[1,"hnavLi"],["target","_blank","id","hnavLinkGiftShop","href","https://www.shirtstoponline.com/stores/NoradSantaTrackerGear",1,"externalDisclaimer"],["id","hnavLinkGames",1,"popupTrigger",3,"routerLink"],["target","_blank","href","https://www.youtube.com/noradtrackssanta","id","hnavLinkMovies",1,"externalDisclaimer"],["id","hnavLinkMusic",1,"popupTrigger",3,"routerLink"],["id","hnavLinkLibrary",1,"popupTrigger",3,"routerLink"],[1,"indent"],["id","hnavLinkAboutSanta",1,"popupTrigger",3,"routerLink"],["id","hnavLinkSantasSleigh",1,"popupTrigger",3,"routerLink"],["id","hnavLinkHolidayTraditions",1,"popupTrigger",3,"routerLink"],["id","hnavLinkHolidayActivities",1,"popupTrigger",3,"routerLink"],["id","hnavPanel2",1,"hnavLiLabel"],[1,"hnavLi","hnav-is-expandable","hnav-is-collapsed"],["fragment","OurMission","id","hnavLinkNORADsMission","data-section","contentMission",1,"popupTrigger",3,"routerLink"],["fragment","HowWeTrackSanta","id","hnavLinkHowWeTrackSanta","data-section","contentHowTrackSanta",1,"popupTrigger",3,"routerLink"],["fragment","OurTeam","id","hnavLinkOurTeam","data-section","contentTeam",1,"popupTrigger",3,"routerLink"],["fragment","WhyWeTrackSanta","id","hnavLinkWhyWeTrackSanta","data-section","contentWhyTrackSanta",1,"popupTrigger",3,"routerLink"],["fragment","PressRoom","id","hnavLinkPressroom","data-section","contentPressroom",1,"popupTrigger",3,"routerLink"],["id","section-village","data-speed","10000","aria-label","Village Section",1,"background-village"],[1,"villageTitle"],["id","phoneElfContainer","aria-label","Elf Navigation"],[1,"phoneElfLogo"],["id","phoneNavContainer"],["id","phoneNavNoradHQ","aria-label","NORAD HQ",1,"phoneNavButton","phoneNavButtonLeft","popupTrigger"],["fragment","OurMission","aria-label","NORAD HQ",3,"routerLink"],[1,"icon"],[0,"xlink","href","#icon-noradhq"],["id","phoneNavArcade","aria-label","The Arcade",1,"phoneNavButton","popupTrigger"],["aria-label","The Arcade",3,"routerLink"],[0,"xlink","href","#icon-arcade"],["id","phoneNavTheatre",1,"phoneNavButton","phoneNavButtonLeft"],["target","_blank","href","https://www.youtube.com/noradtrackssanta","aria-label","The Theatre",1,"externalDisclaimer"],[0,"xlink","href","#icon-theater"],["id","phoneNavMusic","aria-label","The Music Stage",1,"phoneNavButton","popupTrigger"],[3,"routerLink"],[0,"xlink","href","#icon-musicstage"],["id","phoneNavLibrary","aria-label","The Library",1,"phoneNavButton","phoneNavButtonLeft","popupTrigger"],[0,"xlink","href","#icon-library"],["id","phoneNavShop",1,"phoneNavButton"],["target","_blank","href","https://www.shirtstoponline.com/stores/NoradSantaTrackerGear","aria-label","Gift Shop",1,"externalDisclaimer"],[0,"xlink","href","#icon-giftshop"],["id","trackSantaId",3,"routerLink"],["alt","Button: The wait is over track santa now",2,"height","auto","width","75%",3,"src"],["id","phoneElf"],["src","assets/images/village/phoneElf.png","alt","Phone Elf Image"],["id","villageContentContainer","role","main"],["id","village-animations","aria-label","Village Animations",2,"outline","1px black"],["id","village-musicstage"],["src","assets/images/village/animation/lights-music.png","alt","Light in windows and doors coming from The Music Stage"],["id","village-library"],["src","assets/images/village/animation/lights-library.png","alt","Light in windows and doors coming from The Library"],["id","village-theater"],["src","assets/images/village/animation/lights-theatre.png","alt","Light in windows and doors coming from The Theatre"],["id","village-arcade"],["src","assets/images/village/animation/lights-arcade.png","alt","Light in windows and doors coming from The Arcade"],["id","village-noradhq"],["src","assets/images/village/animation/lights-noradhq.png","alt","Light in windows and doors coming from Norad HQ"],["id","elf-snowmanmaker"],["src","assets/images/village/animation/elf_anim_snowmanmaker.gif","alt","Animated elf and snowman"],["id","elf-skywatch-container"],["id","elf-skywatch"],["id","elf-chimneysweeper-container"],["id","elf-chimneysweeper"],["id","elf-mailboxchecker-container"],["id","elf-mailboxchecker"],["id","elf-diver-container"],["id","elf-diver"],["id","elf-airtanker-container"],["id","elf-airtanker"],["id","hqdishcontainer"],["id","hqdish"],["id","elf-iceskate-left"],["src","assets/images/village/animation/elf_anim_iceskate_left.gif","alt","Animated elfe ice skating"],["id","elf-iceskate-right"],["src","assets/images/village/animation/elf_anim_iceskate_right.gif","alt","Animated elfe ice skating"],["id","elf-iceskate-left2"],["id","elf-iceskate-right2"],["id","tree-blinking"],["src","assets/images/village/animation/tree-blinking.gif","alt","Green tree wtih blinking lights"],["id","villageForeground"],["src","assets/images/village/trees/ta.png","alt","Green tree",1,"treeE"],["src","assets/images/village/trees/td.png","alt","Green tree",1,"treeH"],["src","assets/images/village/trees/tb.png","alt","Green tree",1,"treeI"],["id","village-links","aria-label","Village Links"],["id","waitOverSign",2,"top","5%",3,"hidden"],["alt","Button: The wait is over, track Santa now",2,"height","auto","width","75%",3,"src"],["id","linkBoxGiftShop",1,"linkBox"],["id","linkBoxArcade",1,"linkBox"],["id","linkBoxLibrary",1,"linkBox"],["id","linkBoxMovies",1,"linkBox"],["id","linkBoxMusic",1,"linkBox"],["id","linkBoxNoradHQ",1,"linkBox"],["target","_blank","href","https://www.youtube.com/noradtrackssanta","aria-label","Movies",1,"linkMovies","externalDisclaimer"],["target","_blank","href","https://www.shirtstoponline.com/stores/NoradSantaTrackerGear","aria-label","Gift Shop",1,"linkGiftshop","externalDisclaimer"],["aria-label","Arcade",1,"linkArcade","popupTrigger",3,"routerLink"],["aria-label","Library",1,"linkLibrary","popupTrigger",3,"routerLink"],["aria-label","Music",1,"linkMusic","popupTrigger",3,"routerLink"],["aria-label","NORAD HQ",1,"linkNoradHQ","popupTrigger",3,"routerLink"],["id","hamburgerMenuButtonContainer"],[1,"hnavButtonRoot"],["id","hnavToggleButton","aria-label","Toggle Navigation",1,"hnavToggleButton","hnavControl",3,"click"],["id","section-footer","role","contentinfo"],["id","section-footer-inner"],["id","section-footer-left"],["id","comeBackText"],["id","waitOverText",1,"isInvisible"],["aria-label","Contact Information",1,"contactus__list"],["href","tel:+1-877-HI-NORAD","aria-label","Call NORAD Tracks Santa",1,"contactvia__phone"],["src","assets/images/noradHq/icon-phone.svg","alt","Phone Icon"],["id","section-footer-right"],["id","section-footer-mobileapps"],["id","section-footer-mobileapps-icons"],["id","android"],["target","_blank","href","https://play.google.com/store/apps/details?id=org.norad.santa","aria-label","Android App",1,"externalDisclaimer"],["id","ios"],["target","_blank","href","https://itunes.apple.com/us/app/norad-santa-tracker/id1181633163","aria-label","iOS App",1,"externalDisclaimer"],[1,"clearfix"],["id","section-footer-footerlinks"],["id","footerPrivacyLink",1,"popupTrigger",3,"routerLink"],["fragment","PressRoom","id","footerPressRoomLink",1,"popupTrigger",3,"routerLink"],[1,"floatLeft"],["data-href","http://www.noradsanta.org","data-layout","button_count","data-size","large","data-action","like","data-show-faces","false","data-share","false",1,"fb-like"],[1,"hidden-svg"],["version","1.1","xmlns","http://www.w3.org/2000/svg"],["id","icon-village","viewBox","0 0 54 54"],["fill-rule","evenodd","clip-rule","evenodd","d","M21.672,14.352l0.766,13.077l3.7,5.569l0.925-1.856l-3.089-17.05\n             c1.274-0.584,2.164-1.864,2.164-3.358V10.71c0-2.044-1.656-3.701-3.7-3.701c-2.043,0-3.7,1.657-3.7,3.701v0.023\n             C18.739,12.514,19.997,13.999,21.672,14.352z M22.438,38.567v-3.713h1.85l-5.549-9.282l-4.625,9.282h1.85v3.713h1.85v-3.713h2.775\n             v3.713H22.438z M35.387,38.567v-3.713h1.85l-5.55-9.282l-4.625,9.282h1.85v3.713h1.85v-3.713h2.775v3.713H35.387z M37.237,36.711\n             c-0.231,1.856,0,2.785,0,2.785h-9.249v-2.785h-3.7v2.785H14.114v-2.785c0,0-10.637,2.088-11.099,4.641\n             c-0.463,2.553,9.725,6.191,22.198,5.569C57.321,45.322,57.178,36.711,37.237,36.711z M31.688,22.788l8.324,12.995h4.625\n             l-6.474-11.139l-5.55-9.282l-5.549,7.426l0.925,4.641L31.688,22.788z M17.814,22.788l2.775,0.928v-3.713l-6.474-3.713l-1.85,9.282\n             H7.64L5.79,37.639l6.475-1.856L17.814,22.788z"],[1,"dropdown-item",3,"href"]]},template:function(Gr,Tn){1&Gr&&(U.\u0275\u0275elementStart(0,"div",43),U.\u0275\u0275element(1,"app-welcome"),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(2,"div",44)(3,"nav",45)(4,"ul",46)(5,"li")(6,"span",47),U.\u0275\u0275text(7),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(8,"ul",48),U.\u0275\u0275template(9,On,3,5,"li",49),U.\u0275\u0275elementEnd()()()(),U.\u0275\u0275elementStart(10,"section",50)(11,"div",51),U.\u0275\u0275element(12,"app-count-down"),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(13,"section",52),U.\u0275\u0275element(14,"app-social-media"),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(15,"section",53),U.\u0275\u0275element(16,"app-chatbot",54)(17,"div",55)(18,"div",56),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(19,"nav",57)(20,"h2"),U.\u0275\u0275text(21,"NORAD TRACKS SANTA"),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(22,"div",58)(23,"h3",59),U.\u0275\u0275i18n(24,0),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(25,"div",60)(26,"ul")(27,"li")(28,"a",61),U.\u0275\u0275i18n(29,1),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(30,"li")(31,"a",62),U.\u0275\u0275i18n(32,2),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(33,"li")(34,"a",63),U.\u0275\u0275i18n(35,3),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(36,"li")(37,"a",64),U.\u0275\u0275i18n(38,4),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(39,"li")(40,"a",65),U.\u0275\u0275i18n(41,5),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(42,"li",66)(43,"a",67),U.\u0275\u0275i18n(44,6),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(45,"li",66)(46,"a",68),U.\u0275\u0275i18n(47,7),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(48,"li",66)(49,"a",69),U.\u0275\u0275i18n(50,8),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(51,"li",66)(52,"a",70),U.\u0275\u0275i18n(53,9),U.\u0275\u0275elementEnd()()()(),U.\u0275\u0275elementStart(54,"h3",71),U.\u0275\u0275i18n(55,10),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(56,"div",72)(57,"ul")(58,"li")(59,"a",73),U.\u0275\u0275i18n(60,11),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(61,"li")(62,"a",74),U.\u0275\u0275i18n(63,12),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(64,"li")(65,"a",75),U.\u0275\u0275i18n(66,13),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(67,"li")(68,"a",76),U.\u0275\u0275i18n(69,14),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(70,"li")(71,"a",77),U.\u0275\u0275i18n(72,15),U.\u0275\u0275elementEnd()()()()()(),U.\u0275\u0275elementStart(73,"section",78),U.\u0275\u0275element(74,"span",79),U.\u0275\u0275elementStart(75,"nav",80),U.\u0275\u0275element(76,"div",81),U.\u0275\u0275elementStart(77,"div",82)(78,"div",83)(79,"a",84),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(80,"svg",85),U.\u0275\u0275element(81,"use",86),U.\u0275\u0275elementEnd(),U.\u0275\u0275namespaceHTML(),U.\u0275\u0275element(82,"br"),U.\u0275\u0275elementStart(83,"span"),U.\u0275\u0275i18n(84,16),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(85,"div",87)(86,"a",88),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(87,"svg",85),U.\u0275\u0275element(88,"use",89),U.\u0275\u0275elementEnd(),U.\u0275\u0275namespaceHTML(),U.\u0275\u0275element(89,"br"),U.\u0275\u0275elementStart(90,"span"),U.\u0275\u0275i18n(91,17),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(92,"div",90)(93,"a",91),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(94,"svg",85),U.\u0275\u0275element(95,"use",92),U.\u0275\u0275elementEnd(),U.\u0275\u0275namespaceHTML(),U.\u0275\u0275element(96,"br"),U.\u0275\u0275elementStart(97,"span"),U.\u0275\u0275i18n(98,18),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(99,"div",93)(100,"a",94),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(101,"svg",85),U.\u0275\u0275element(102,"use",95),U.\u0275\u0275elementEnd(),U.\u0275\u0275namespaceHTML(),U.\u0275\u0275element(103,"br"),U.\u0275\u0275elementStart(104,"span"),U.\u0275\u0275i18n(105,19),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(106,"div",96)(107,"a",94),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(108,"svg",85),U.\u0275\u0275element(109,"use",97),U.\u0275\u0275elementEnd(),U.\u0275\u0275namespaceHTML(),U.\u0275\u0275element(110,"br"),U.\u0275\u0275elementStart(111,"span"),U.\u0275\u0275i18n(112,20),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(113,"div",98)(114,"a",99),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(115,"svg",85),U.\u0275\u0275element(116,"use",100),U.\u0275\u0275elementEnd(),U.\u0275\u0275namespaceHTML(),U.\u0275\u0275element(117,"br"),U.\u0275\u0275elementStart(118,"span"),U.\u0275\u0275i18n(119,21),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(120,"div",54)(121,"a",101),U.\u0275\u0275element(122,"img",102),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(123,"div",103),U.\u0275\u0275element(124,"img",104),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(125,"section")(126,"div",105)(127,"div",106)(128,"div",107),U.\u0275\u0275element(129,"img",108),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(130,"div",109),U.\u0275\u0275element(131,"img",110),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(132,"div",111),U.\u0275\u0275element(133,"img",112),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(134,"div",113),U.\u0275\u0275element(135,"img",114),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(136,"div",115),U.\u0275\u0275element(137,"img",116),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(138,"div",117),U.\u0275\u0275element(139,"img",118),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(140,"div",119),U.\u0275\u0275element(141,"div",120),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(142,"div",121),U.\u0275\u0275element(143,"div",122),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(144,"div",123),U.\u0275\u0275element(145,"div",124),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(146,"div",125),U.\u0275\u0275element(147,"div",126),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(148,"div",127),U.\u0275\u0275element(149,"div",128),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(150,"div",129),U.\u0275\u0275element(151,"div",130),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(152,"div",131),U.\u0275\u0275element(153,"img",132),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(154,"div",133),U.\u0275\u0275element(155,"img",134),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(156,"div",135),U.\u0275\u0275element(157,"img",132),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(158,"div",136),U.\u0275\u0275element(159,"img",134),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(160,"div",137),U.\u0275\u0275element(161,"img",138),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(162,"div",139),U.\u0275\u0275element(163,"img",140)(164,"img",141)(165,"img",142),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(166,"div",143)(167,"div",144)(168,"a",101),U.\u0275\u0275element(169,"img",145),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(170,"div",146)(171,"h1"),U.\u0275\u0275i18n(172,22),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(173,"span"),U.\u0275\u0275i18n(174,23),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(175,"div",147)(176,"h1"),U.\u0275\u0275i18n(177,24),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(178,"span"),U.\u0275\u0275i18n(179,25),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(180,"div",148)(181,"h1"),U.\u0275\u0275i18n(182,26),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(183,"span"),U.\u0275\u0275i18n(184,27),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(185,"div",149)(186,"h1"),U.\u0275\u0275i18n(187,28),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(188,"span"),U.\u0275\u0275i18n(189,29),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(190,"div",150)(191,"h1"),U.\u0275\u0275i18n(192,30),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(193,"span"),U.\u0275\u0275i18n(194,31),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(195,"div",151)(196,"h1"),U.\u0275\u0275i18n(197,32),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(198,"span"),U.\u0275\u0275i18n(199,33),U.\u0275\u0275elementEnd()(),U.\u0275\u0275element(200,"a",152)(201,"a",153)(202,"a",154)(203,"a",155)(204,"a",156)(205,"a",157),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275element(206,"app-site-music-controls"),U.\u0275\u0275elementStart(207,"div",158)(208,"div",159)(209,"button",160),U.\u0275\u0275listener("click",function(){return Tn.toggleHNav(!1)}),U.\u0275\u0275elementEnd()()(),U.\u0275\u0275elementStart(210,"section",161)(211,"div",162)(212,"div",163)(213,"div")(214,"h4",164),U.\u0275\u0275i18n(215,34),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(216,"h4",165),U.\u0275\u0275i18n(217,35),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(218,"ul",166)(219,"li")(220,"a",167),U.\u0275\u0275element(221,"img",168),U.\u0275\u0275elementStart(222,"span"),U.\u0275\u0275i18n(223,36),U.\u0275\u0275elementEnd()()()()()(),U.\u0275\u0275elementStart(224,"div",169)(225,"div",170)(226,"h4"),U.\u0275\u0275i18n(227,37),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(228,"div",171)(229,"ul")(230,"li",172)(231,"a",173),U.\u0275\u0275i18n(232,38),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(233,"li",174)(234,"a",175),U.\u0275\u0275i18n(235,39),U.\u0275\u0275elementEnd()()()()()(),U.\u0275\u0275element(236,"div",176),U.\u0275\u0275elementStart(237,"div",177)(238,"a",178),U.\u0275\u0275i18n(239,40),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(240,"a",179),U.\u0275\u0275i18n(241,41),U.\u0275\u0275elementEnd(),U.\u0275\u0275element(242,"br"),U.\u0275\u0275elementStart(243,"div",180),U.\u0275\u0275i18n(244,42),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(245,"div",180),U.\u0275\u0275element(246,"div",181),U.\u0275\u0275elementEnd(),U.\u0275\u0275element(247,"div",176),U.\u0275\u0275elementEnd()(),U.\u0275\u0275elementStart(248,"div",182),U.\u0275\u0275namespaceSVG(),U.\u0275\u0275elementStart(249,"svg",183)(250,"defs")(251,"symbol",184)(252,"title"),U.\u0275\u0275text(253,"Village Icon"),U.\u0275\u0275elementEnd(),U.\u0275\u0275elementStart(254,"desc"),U.\u0275\u0275text(255,"An image of the village in front of a large north pole and three mountains."),U.\u0275\u0275elementEnd(),U.\u0275\u0275element(256,"path",185),U.\u0275\u0275elementEnd()()()()()),2&Gr&&(U.\u0275\u0275property("hidden",Tn.showVillage()),U.\u0275\u0275advance(2),U.\u0275\u0275property("hidden",!Tn.showVillage()),U.\u0275\u0275advance(5),U.\u0275\u0275textInterpolate(Tn.getCurrentLanguage()),U.\u0275\u0275advance(2),U.\u0275\u0275property("ngForOf",Tn.languageArray),U.\u0275\u0275advance(7),U.\u0275\u0275property("hidden",!Tn.showChatbot()),U.\u0275\u0275advance(15),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(33,tt)),U.\u0275\u0275advance(6),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(34,_t)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(35,Bt)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(36,yt)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(37,Pt)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(38,vt)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(39,Gt)),U.\u0275\u0275advance(7),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(40,Ht)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(41,Ht)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(42,Ht)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(43,Ht)),U.\u0275\u0275advance(3),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(44,Ht)),U.\u0275\u0275advance(8),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(45,Ht)),U.\u0275\u0275advance(7),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(46,tt)),U.\u0275\u0275advance(14),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(47,_t)),U.\u0275\u0275advance(7),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(48,Bt)),U.\u0275\u0275advance(13),U.\u0275\u0275property("hidden",!Tn.hasCountdownExpired()),U.\u0275\u0275advance(),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(49,jt)),U.\u0275\u0275advance(),U.\u0275\u0275propertyInterpolate("src",Tn.getLocalizedImageUrl(),U.\u0275\u0275sanitizeUrl),U.\u0275\u0275advance(45),U.\u0275\u0275property("hidden",!Tn.hasCountdownExpired()),U.\u0275\u0275advance(),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(50,jt)),U.\u0275\u0275advance(),U.\u0275\u0275propertyInterpolate("src",Tn.getLocalizedImageUrl(),U.\u0275\u0275sanitizeUrl),U.\u0275\u0275advance(33),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(51,tt)),U.\u0275\u0275advance(),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(52,Bt)),U.\u0275\u0275advance(),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(53,_t)),U.\u0275\u0275advance(),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(54,Ht)),U.\u0275\u0275advance(33),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(55,Yt)),U.\u0275\u0275advance(2),U.\u0275\u0275property("routerLink",U.\u0275\u0275pureFunction0(56,Ht)))},dependencies:[V.CommonModule,Ae.NgForOf,J.RouterModule,Ne.RouterLink,R.WelcomeComponent,M.CountDownComponent,G.SocialMediaComponent,Y.SiteMusicControlsComponent,K.ChatbotComponent],styles:[".hidden-svg[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;visibility:hidden}"]})}}return Rn})()},1016:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.LibraryComponent=void 0;const z=w(1635),T=w(7768),V=w(177),N=z.__importStar(w(3953)),R=z.__importStar(w(7768)),M=()=>["/"],G=()=>["/santahistory"],Y=()=>["/sleighinformation"],K=()=>["/holidaytraditions"],J=()=>["/holidayactivities"];C.LibraryComponent=(()=>{class U{constructor(Ae,Ne){this.route=Ae,this.renderer=Ne,this.fragment=""}changeVisualSet(Ae){console.log("changeVisualSet called.");const Ne=document.querySelector(".popup__content");Ne&&(this.renderer.removeClass(Ne,"popup__content--nobg"),this.renderer.addClass(Ne,"popup__content--nobg")),window.scrollTo({top:0,behavior:"smooth"})}ngOnInit(){this.route.fragment.subscribe(Ae=>{this.fragment=Ae})}ngAfterViewInit(){try{this.fragment&&document.querySelector("#"+this.fragment)?.scrollIntoView({behavior:"smooth"})}catch{}}static{this.\u0275fac=function(Ne){return new(Ne||U)(N.\u0275\u0275directiveInject(R.ActivatedRoute),N.\u0275\u0275directiveInject(N.Renderer2))}}static{this.\u0275cmp=N.\u0275\u0275defineComponent({type:U,selectors:[["app-library"]],standalone:!0,features:[N.\u0275\u0275StandaloneFeature],decls:40,vars:10,consts:()=>{let Ae,Ne,Le,tt,_t,Bt;return Ae="THE LIBRARY",Ne="Learn about Santa, his magic sleigh, and holiday traditions",Le="ABOUT SANTA",tt="REGARDING SANTA'S SLEIGH",_t="HOLIDAY TRADITIONS FROM AROUND THE WORLD",Bt="HOLIDAY ACTIVITIES",[Ae,Ne,Le,tt,_t,Bt,[1,"popup__wrapper",2,"min-height","100vh"],["id","element_to_pop_up","role","dialog","aria-labelledby","libraryTitle","aria-describedby","subtitle"],["role","button","tabindex","0","aria-label","Go Back",1,"button","b-back","noradHqBack"],["src","assets/images/backBtn.png","alt","Back"],[1,"content"],["role","button","tabindex","0","aria-label","Close",1,"button","b-close"],[3,"routerLink"],["src","assets/images/close.png","alt","Close"],[1,"popup__contentwrapper"],[1,"popup__header"],["id","libraryTitle",1,"popup__header__title"],["id","subtitle",1,"popup__header__subtitle"],[1,"popup__content","popup__content--nobg"],["id","library__content--nav",1,"popup__navwrapper"],["role","navigation","aria-label","Library Navigation",1,"popup__nav","clearfix"],["role","button","aria-label","About Santa",1,"popup__navitem",3,"routerLink"],["id","navAboutSanta","data-section","navAboutSanta"],["src","assets/images/pop/library/book_aboutsanta.png","alt","Book about Santa"],["role","button","aria-label","Regarding Santa's Sleigh",1,"popup__navitem",3,"routerLink"],["id","navSantasSleigh"],["src","assets/images/pop/library/book_santassleigh.png","alt","Book about Santa's Sleigh"],["role","button","aria-label","Holiday Traditions From Around the World",1,"popup__navitem",3,"routerLink"],["id","navHolidayTraditions"],["src","assets/images/pop/library/book_worldtraditions.png","alt","Book about holiday traditions"],["role","button","aria-label","Holiday Activities",1,"popup__navitem",3,"routerLink"],["id","navHolidayActivities"],["src","assets/images/pop/library/book_holidayactivities.png","alt","Book about holiday activities"],["id","weeElf","aria-hidden","true",1,"spotimg","spotimg--library"]]},template:function(Ne,Le){1&Ne&&(N.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"span",8),N.\u0275\u0275element(3,"img",9),N.\u0275\u0275elementEnd(),N.\u0275\u0275element(4,"div",10),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(5,"span",11)(6,"a",12),N.\u0275\u0275element(7,"img",13),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(8,"div",14)(9,"header",15)(10,"h3",16),N.\u0275\u0275i18n(11,0),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(12,"h4",17),N.\u0275\u0275i18n(13,1),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(14,"section",18)(15,"div",19)(16,"nav",20)(17,"a",21)(18,"div",22),N.\u0275\u0275element(19,"img",23),N.\u0275\u0275elementStart(20,"span"),N.\u0275\u0275i18n(21,2),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(22,"a",24)(23,"div",25),N.\u0275\u0275element(24,"img",26),N.\u0275\u0275elementStart(25,"span"),N.\u0275\u0275i18n(26,3),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(27,"a",27)(28,"div",28),N.\u0275\u0275element(29,"img",29),N.\u0275\u0275elementStart(30,"span"),N.\u0275\u0275i18n(31,4),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(32,"a",30)(33,"div",31),N.\u0275\u0275element(34,"img",32),N.\u0275\u0275elementStart(35,"span"),N.\u0275\u0275i18n(36,5),N.\u0275\u0275elementEnd()()()()()(),N.\u0275\u0275element(37,"div",33),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(38,"noscript"),N.\u0275\u0275element(39,"div"),N.\u0275\u0275elementEnd()),2&Ne&&(N.\u0275\u0275advance(6),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(5,M)),N.\u0275\u0275advance(11),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(6,G)),N.\u0275\u0275advance(5),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(7,Y)),N.\u0275\u0275advance(5),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(8,K)),N.\u0275\u0275advance(5),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(9,J)))},dependencies:[T.RouterModule,R.RouterLink,V.CommonModule],styles:[".library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e12836;text-decoration:none}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e12836;text-decoration:underline}.skypeContentContainer[_ngcontent-%COMP%]   .navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400;width:95%;display:inline-block}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.25em;font-weight:700}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:125px;height:auto;max-width:27%;margin:3px}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}.popup__navitem[_ngcontent-%COMP%]{width:19vw}@media (max-width: 1150px){.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}@media only screen and (max-device-width: 480px),(max-width: 480px){.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}}"]})}}return U})()},8263:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.MapComponent=void 0;const z=w(1635),T=w(7768),V=z.__importStar(w(3953)),N=z.__importStar(w(7768)),R=()=>["/"];C.MapComponent=(()=>{class G{static{this.\u0275fac=function(J){return new(J||G)}}static{this.\u0275cmp=V.\u0275\u0275defineComponent({type:G,selectors:[["app-map"]],standalone:!0,features:[V.\u0275\u0275StandaloneFeature],decls:6,vars:2,consts:[[2,"float","right","position","absolute","right","15px"],[1,"button","b-close"],[3,"routerLink"],["src","assets/images/close.png","alt","Close Map",2,"width","2vw","height","auto","min-width","20px"],["id","iframeMapId","src",V.\u0275\u0275trustConstantResourceUrl`assets/map/embed.html`,"allowFullScreen","","mozAllowFullScreen","","webkitAllowFullScreen","",2,"height","95.6vh","width","-webkit-fill-available"]],template:function(J,se){1&J&&(V.\u0275\u0275elementStart(0,"div",0)(1,"span",1)(2,"a",2),V.\u0275\u0275element(3,"img",3),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(4,"div"),V.\u0275\u0275element(5,"iframe",4),V.\u0275\u0275elementEnd()),2&J&&(V.\u0275\u0275advance(2),V.\u0275\u0275property("routerLink",V.\u0275\u0275pureFunction0(1,R)))},dependencies:[T.RouterModule,N.RouterLink]})}}return G})()},5932:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.MusicplayerComponent=void 0;const z=w(1635),T=w(7768),V=w(177),N=z.__importStar(w(3953)),R=z.__importStar(w(4368)),M=z.__importStar(w(7768)),G=z.__importStar(w(177)),Y=()=>["/"];function K(se,U){if(1&se){const _e=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"div")(1,"li",46),N.\u0275\u0275listener("click",function(){const Ne=N.\u0275\u0275restoreView(_e).index,Le=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(Le.songSelected(Ne))}),N.\u0275\u0275elementStart(2,"span",47),N.\u0275\u0275text(3),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(4,"span"),N.\u0275\u0275element(5,"img",48),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(6,"span")(7,"span",49),N.\u0275\u0275text(8),N.\u0275\u0275elementEnd(),N.\u0275\u0275element(9,"br"),N.\u0275\u0275elementStart(10,"span",50),N.\u0275\u0275text(11),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(12,"span",51),N.\u0275\u0275text(13),N.\u0275\u0275elementEnd()()()()}if(2&se){const _e=U.$implicit,Ae=U.index;N.\u0275\u0275advance(3),N.\u0275\u0275textInterpolate(Ae+1),N.\u0275\u0275advance(2),N.\u0275\u0275propertyInterpolate("src",_e.image,N.\u0275\u0275sanitizeUrl),N.\u0275\u0275advance(3),N.\u0275\u0275textInterpolate(_e.title),N.\u0275\u0275advance(3),N.\u0275\u0275textInterpolate1("by ",_e.artist,""),N.\u0275\u0275advance(2),N.\u0275\u0275textInterpolate(_e.album)}}C.MusicplayerComponent=(()=>{class se{constructor(_e){this.musicService=_e}getIsPlaying(){return this.musicService.getIsPlaying()}getPlaylist(){return this.musicService.playlist.iPlaylist}getSelectedIndex(){return this.musicService.getSelectedIndex()}songSelected(_e){this.musicService.setIsPlaying(!0),this.musicService.setSelectedIndex(_e),this.pauseAudio(),this.playAudio()}playAudio(){this.musicService.audio.src=this.musicService.playlist.iPlaylist[this.musicService.getSelectedIndex()].mp3,this.musicService.audio.load(),this.musicService.audio.play()}pauseAudio(){this.musicService.audio.pause()}nextSong(){this.musicService.getSelectedIndex()<this.musicService.playlist.iPlaylist.length-2?this.musicService.setSelectedIndex(this.musicService.getSelectedIndex()+1):this.musicService.setSelectedIndex(0),this.playAudio()}previousSong(){this.musicService.getSelectedIndex()>0?this.musicService.setSelectedIndex(this.musicService.getSelectedIndex()-1):this.musicService.setSelectedIndex(this.musicService.playlist.iPlaylist.length-1),this.playAudio()}togglePlay(){this.musicService.setIsPlaying(!this.musicService.getIsPlaying())}ngOnInit(){}static{this.\u0275fac=function(Ae){return new(Ae||se)(N.\u0275\u0275directiveInject(R.MusicService))}}static{this.\u0275cmp=N.\u0275\u0275defineComponent({type:se,selectors:[["app-musicplayer"]],standalone:!0,features:[N.\u0275\u0275StandaloneFeature],decls:58,vars:7,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",2,"display","none"],["id","play_button","viewBox","0 0 64 64"],["cx","32","cy","32","r","30"],["points","22.1,18.2 46.2,32.1 22.2,46.2 ",1,"playpausepunchout"],["id","pause_button","viewBox","0 0 64 64"],["cx","32","cy","32","r","30",1,"st0"],["d","M24.3,46.2L24.3,46.2c-1.4,0-2.5-1.1-2.5-2.5v-23c0-1.4,1.1-2.5,2.5-2.5l0,0c1.4,0,2.5,1.1,2.5,2.5v23\nC26.8,45.1,25.6,46.2,24.3,46.2z",1,"playpausepunchout"],["d","M39.3,46.2L39.3,46.2c-1.4,0-2.5-1.1-2.5-2.5v-23c0-1.4,1.1-2.5,2.5-2.5l0,0c1.4,0,2.5,1.1,2.5,2.5v23\nC41.8,45.1,40.6,46.2,39.3,46.2z",1,"playpausepunchout"],["id","fwd_button","viewBox","0 0 30 30"],["points","3.1,1.2 27.1,15.1 3.2,29.2 "],["d","M25.3,29.2L25.3,29.2c-1.4,0-2.5-1.1-2.5-2.5v-23c0-1.4,1.1-2.5,2.5-2.5l0,0c1.4,0,2.5,1.1,2.5,2.5v23\nC27.8,28.1,26.6,29.2,25.3,29.2z"],["id","rev_button","viewBox","0 0 30 30"],["points","27.8,29.2 3.8,15.3 27.7,1.2 "],["d","M5.6,1.2L5.6,1.2c1.4,0,2.5,1.1,2.5,2.5v23c0,1.4-1.1,2.5-2.5,2.5l0,0c-1.4,0-2.5-1.1-2.5-2.5v-23\nC3.1,2.3,4.3,1.2,5.6,1.2z"],["id","audio"],[1,"popup__wrapper"],[1,"button","b-close"],[3,"routerLink"],["src","assets/images/close.png"],[1,"popup__contentwrapper"],[1,"popup__header"],["src","assets/images/NoradLogo.png",1,"popup__header__title",2,"width","25%"],[1,"popup__content",2,"margin-left","7%"],[1,"popup__content__musicplayer",2,"width","75vw"],[2,"background-color","transparent","border","none","cursor","pointer","display","inline",3,"click"],["id","revbutton",1,"music-icon","music-icon-rev"],[0,"xlink","href","#rev_button"],[3,"hidden"],["id","playbutton",1,"music-icon-lg",3,"click"],[0,"xlink","href","#play_button"],["id","pausebutton",1,"music-icon-lg",3,"click"],[0,"xlink","href","#pause_button"],["id","fwdbutton",1,"music-icon","music-icon-fwd"],[0,"xlink","href","#fwd_button"],[1,"popup__content_metadata"],[1,"popup__content_metadata__title"],[1,"popup__content_metadata__artist"],[1,"popup__navwrapper"],["role","navigation",1,"popup__nav","clearfix"],[1,"popup__nav__playlist"],[1,"playlistmusic",2,"columns","1","-webkit-columns","1","-moz-columns","1"],[2,"float","left"],[2,"margin-left","10vw"],[1,"popup__content_li__header__album",2,"float","right"],[4,"ngFor","ngForOf"],[1,"spotimg","spotimg--musicstage"],[3,"click"],[2,"float","left","vertical-align","middle","line-height","100px"],[1,"playlist__icon",3,"src"],["tabindex","0",1,"popup__content_li__metadata__title"],[1,"popup__content_li__metadata__artist"],[1,"popup__content_li__metadata__album",2,"float","right"]],template:function(Ae,Ne){1&Ae&&(N.\u0275\u0275namespaceSVG(),N.\u0275\u0275elementStart(0,"svg",0)(1,"defs")(2,"symbol",1),N.\u0275\u0275element(3,"circle",2)(4,"polygon",3),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(5,"symbol",4),N.\u0275\u0275element(6,"circle",5)(7,"path",6)(8,"path",7),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(9,"symbol",8),N.\u0275\u0275element(10,"polygon",9)(11,"path",10),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(12,"symbol",11),N.\u0275\u0275element(13,"polygon",12)(14,"path",13),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275namespaceHTML(),N.\u0275\u0275element(15,"audio",14),N.\u0275\u0275elementStart(16,"div",15)(17,"span",16)(18,"a",17),N.\u0275\u0275element(19,"img",18),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(20,"div",19)(21,"div",20),N.\u0275\u0275element(22,"img",21),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(23,"div",22)(24,"div",23)(25,"button",24),N.\u0275\u0275listener("click",function(){return Ne.previousSong()}),N.\u0275\u0275namespaceSVG(),N.\u0275\u0275elementStart(26,"svg",25),N.\u0275\u0275element(27,"use",26),N.\u0275\u0275elementEnd()(),N.\u0275\u0275namespaceHTML(),N.\u0275\u0275elementStart(28,"button",24),N.\u0275\u0275listener("click",function(){return Ne.togglePlay()}),N.\u0275\u0275elementStart(29,"div",27),N.\u0275\u0275namespaceSVG(),N.\u0275\u0275elementStart(30,"svg",28),N.\u0275\u0275listener("click",function(){return Ne.playAudio()}),N.\u0275\u0275element(31,"use",29),N.\u0275\u0275elementEnd()(),N.\u0275\u0275namespaceHTML(),N.\u0275\u0275elementStart(32,"div",27),N.\u0275\u0275namespaceSVG(),N.\u0275\u0275elementStart(33,"svg",30),N.\u0275\u0275listener("click",function(){return Ne.pauseAudio()}),N.\u0275\u0275element(34,"use",31),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275namespaceHTML(),N.\u0275\u0275elementStart(35,"button",24),N.\u0275\u0275listener("click",function(){return Ne.nextSong()}),N.\u0275\u0275namespaceSVG(),N.\u0275\u0275elementStart(36,"svg",32),N.\u0275\u0275element(37,"use",33),N.\u0275\u0275elementEnd()(),N.\u0275\u0275namespaceHTML(),N.\u0275\u0275elementStart(38,"div",34)(39,"div",35),N.\u0275\u0275text(40),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(41,"div",36),N.\u0275\u0275text(42),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(43,"div",37)(44,"nav",38)(45,"div",39)(46,"ul",40)(47,"li")(48,"span",41),N.\u0275\u0275text(49,"#"),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(50,"span",42),N.\u0275\u0275text(51,"Title"),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(52,"span",43),N.\u0275\u0275text(53,"Album"),N.\u0275\u0275elementEnd()(),N.\u0275\u0275template(54,K,14,5,"div",44),N.\u0275\u0275elementEnd()()()()(),N.\u0275\u0275element(55,"div",45),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(56,"noscript"),N.\u0275\u0275element(57,"div"),N.\u0275\u0275elementEnd()),2&Ae&&(N.\u0275\u0275advance(18),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(6,Y)),N.\u0275\u0275advance(11),N.\u0275\u0275property("hidden",Ne.getIsPlaying()),N.\u0275\u0275advance(3),N.\u0275\u0275property("hidden",!Ne.getIsPlaying()),N.\u0275\u0275advance(8),N.\u0275\u0275textInterpolate(Ne.getPlaylist()[Ne.getSelectedIndex()].title),N.\u0275\u0275advance(2),N.\u0275\u0275textInterpolate(Ne.getPlaylist()[Ne.getSelectedIndex()].artist),N.\u0275\u0275advance(12),N.\u0275\u0275property("ngForOf",Ne.getPlaylist()))},dependencies:[T.RouterModule,M.RouterLink,V.CommonModule,G.NgForOf],styles:[".popup__content_li__metadata__title[_ngcontent-%COMP%]{font-size:1.4em;clear:both;color:#113b63;line-height:50px;vertical-align:middle}.popup__content_li__header__album[_ngcontent-%COMP%], .popup__content_li__metadata__album[_ngcontent-%COMP%]{color:#273353}.popup__navwrapper[_ngcontent-%COMP%]{display:block;width:65%;margin:1em auto 0;padding:20px 20px 20px 60px;text-align:center}@media (max-width: 940px){.popup__navwrapper[_ngcontent-%COMP%]{display:block;width:100%;margin:0;padding:5px}.popup__content[_ngcontent-%COMP%]{width:95%}.playlist__icon[_ngcontent-%COMP%]{width:20%;margin:0 10px}.playlistmusic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:30px;width:95%}}@media only screen and (max-device-width: 480px),(max-width: 480px){.popup__nav__playlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:10px 0 10px -24px;text-align:left}.playlistmusic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{max-width:100%;width:100%;font-size:1.1em;float:none;text-align:unset;margin:1.1em 0;text-align:left;line-height:10px}.playlistmusic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle;width:90px;height:auto;margin-right:10px}.popup__content_li__metadata__title[_ngcontent-%COMP%]{font-size:1.4em;clear:both;color:#113b63;line-height:20px;vertical-align:middle}.popup__content_li__metadata__artist[_ngcontent-%COMP%]{font-size:1.1em;line-height:20px}.popup__content_li__metadata__album[_ngcontent-%COMP%]{font-size:.9em;padding-top:40px}}"]})}}return se})()},1332:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.NoradhqComponent=void 0;const z=w(1635),T=w(7768),V=w(7116),N=w(1086),R=z.__importStar(w(3953)),M=z.__importStar(w(7768)),G=()=>["/"],Y=()=>["/noradhq"];C.NoradhqComponent=(()=>{class J{static{this.\u0275fac=function(_e){return new(_e||J)}}static{this.\u0275cmp=R.\u0275\u0275defineComponent({type:J,selectors:[["app-noradhq"]],standalone:!0,features:[R.\u0275\u0275StandaloneFeature],decls:446,vars:12,consts:()=>{let U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,jr,Do,_i,xs,tc,gc,Vs,Fo,Ta,kr,Ei,dr,Gs,va,$a,ca,Xo,ua,Ho,Aa,oo,so,Ci,Oc,Ns,Ds,ns,ba,_s,Kt,en,Qe,Et,wn,$n,Ti,ji,xn,ia,oa,ys,jc,Tl,qs,Wo,eu,vs,Va,Pc,rs,ks,Ia,Al,cl,ll,ul,Cs,Il,jl,Dl,dl,Zo,Ga,hl,We,At,ut,vn,Jn,mr,pr,Ai,Ii,co,ko,jo;return U="Secret Santa Files",_e="NORAD's Mission",Ae="Pressroom",Ne="Our Team",Le="Contact Us",tt="NORAD HQ",_t="Homeland Defense is our #1 priority.",Bt="NORAD's Mission",yt="\"We have the watch.\"",Pt="The North American Aerospace Defense Command (NORAD) is a United States and Canada bi-national organization which defends the homeland through aerospace warning, aerospace control, and maritime warning for North America. Aerospace warning includes the monitoring of man-made objects in space, and the detection, validation, and warning of attack against North America whether by aircraft, missiles, or space vehicles, through mutual support arrangements with other commands.",vt="Aerospace control includes ensuring air sovereignty and air defense of the airspace of Canada and the United States. The renewal of the NORAD Agreement in May 2006 added a maritime warning mission, which entails a shared awareness and understanding of the activities conducted in U.S. and Canadian maritime approaches, maritime areas and internal waterways.",Gt="Headquartered in Colorado Springs, Colorado, NORAD's mission has evolved over the years to meet the changing threat. Through outstanding bi-national cooperation, NORAD has proven itself effective in its roles of watching, warning, and responding. The events of September 11, 2001 demonstrated NORAD's continued relevance to North American security. Today, NORAD provides civil authorities with a potent military response capability to counter domestic airspace threats should all other methods fail.",Ht="The men and women of NORAD are constantly watching the skies and waterways of the United States and Canada to keep us safe.",jt="How we track Santa and protect North America",Yt="Radar",On="It all starts with the NORAD radar system called the North Warning System. This powerful radar system has 47 installations strung across Canada's North and Alaska. NORAD makes a point of checking the radar closely for indications of Santa Claus leaving the North Pole every holiday season. The moment our radar tells us that Santa has lifted off, we begin to use the same satellites that we use in providing air warning of possible missile launches aimed at North America.",In="Satellites",Rn="These satellites are located in a geo-synchronous orbit (that's a cool phrase meaning that the satellite is always fixed over the same spot on the Earth) at 22,300 miles above the Earth. The satellites have infrared sensors, meaning they can see heat. When a rocket or missile is launched, a tremendous amount of heat is produced - enough for the satellites to see them. Rudolph's nose gives off an infrared signature similar to a missile launch. The satellites detect Rudolph's bright red nose with no problem.",Nr="Jet Fighters",wr="The last system we use is the NORAD jet fighter. Canadian NORAD fighter pilots, flying the CF-18, take off out of Newfoundland and welcome Santa to North America. Then at numerous locations in Canada other CF-18 fighter pilots escort Santa. While in the United States, American NORAD fighter pilots in either the F-15s, F16s or F-22s get the thrill of flying with Santa and the famous Reindeer - Dasher, Dancer, Prancer, Vixen, Comet, Cupid, Donner, Blitzen and Rudolph. Even though Santa flies faster than any jet fighter (Santa actually slows down for us to escort him), all of these systems together provide NORAD with a very good continuous picture of his whereabouts.",Gr="Frequently Asked Questions (FAQs)",Tn="How long has NORAD been tracking Santa?",Nn="NORAD's predecessor, the Continental Air Defense Command (CONAD), began tracking Santa in 1955. NORAD replaced CONAD in 1958 and took over the mission of tracking Santa's flight around the world, and they have been tracking Santa every year since!",br="Why does NORAD track Santa?",bt="Twenty four hours a day, 365 days a year, NORAD tracks airplanes, missiles, space launches and anything else that flies in or around the North American continent, while also completing some other very important missions. While the tradition of tracking Santa began purely by accident, NORAD continues to track Santa. We're the only organization that has the technology, the qualifications, and the people to do it. And, we love it! NORAD is honored to be Santa's official tracker!",qt="When will Santa arrive at my house?",fn="NORAD tracks Santa, but only Santa knows his route, which means we cannot predict where and when he will arrive at your house. We do, however, know from history that it appears he arrives only when children are asleep! In most countries, it seems Santa arrives between 9:00 p.m. and midnight on December 24th. If children are still awake when Santa arrives, he moves on to other houses. He returns later, but only when the children are asleep!",Ut="What route does Santa travel?",bn="Santa usually starts at the International Date Line in the Pacific Ocean and travels west. So, historically, Santa visits the South Pacific first, then New Zealand and Australia. After that, he shoots up to Japan, over to Asia, across to Africa, then onto Western Europe, Canada, the United States, Mexico and Central and South America. Keep in mind, Santa's route can be affected by weather, so it's really unpredictable. NORAD coordinates with Santa's Elf Launch Staff to confirm his launch time, but from that point on, Santa calls the shots. We just track him!",Pn="Does Santa visit everyone?",gr="Indeed! Santa visits all homes where children believe in him.",ui="How can Santa travel the world within 24 hours?",Oi="NORAD intelligence reports indicate that Santa does not experience time the way we do. His trip seems to take 24 hours to us, but to Santa it might last days, weeks or even months. Santa would not want to rush the important job of delivering presents to children and spreading joy to everyone, so the only logical conclusion is that Santa somehow functions within his own time-space continuum.",Dr="Is there a Santa Claus?",hr="Mountains of historical data and NORAD tracking information leads us to believe that Santa Claus is alive and well in the hearts of people throughout the world.",ei="How old is Santa?",ra="It's hard to know for sure, but NORAD intelligence indicates Santa is AT LEAST 16 centuries old.",Hi="What does Santa look like?",No="Based on flight profile data gathered from NORAD's radar and satellite tracking, NORAD concludes that Santa probably stands about 5 feet 7 inches tall and weighs approximately 260 pounds (before cookies). Based on fighter-aircraft photos, we know he has a generous girth (belly), rosy cheeks from sleigh riding in cold weather, and a flowing white beard.",fo="How does Santa get down chimneys?",jr="Although NORAD has different hypotheses and theories as to how Santa actually gets down the chimneys, we don't have definitive information to explain the magical phenomenon.",Do="Do your planes ever intercept Santa?",_i="Over the past 65 years, our fighter jets (F-16s, F-15s, F-22s and CF-18s) have intercepted Santa many, many times. When the jets intercept Santa, they tip their wings to say, \"Hello Santa! NORAD is tracking you again this year!\" Santa always waves. He loves to see the pilots!",xs="Does NORAD have any pictures of Santa taken from your planes?",tc="Our fighter pilots love to take photos of Santa. We also have NORAD Santa Cams in space which take video of Santa as he flies round the world. These videos appear almost every hour on December 24th at",gc="www.noradsanta.org",Vs=".",Fo="Does NORAD have any statistics on Santa's sleigh?",Ta="NORAD can confirm that Santa's sleigh is a versatile, all weather, multi-purpose, vertical short-take-off and landing vehicle. It is capable of traveling vast distances without refueling and is deployed, as far as we know, only on December 24th (and sometimes briefly for a test flight about a month before Christmas).",kr="Sleigh Technical Data",Ei="Designer & Builder",dr="K. Kringle & Elves, Inc.",Gs="Probable First Flight",va="Dec. 24, 343 A.D.",$a="Home Base",ca="North Pole",Xo="Length",ua="75 cc (candy canes) / 150 lp (lollipops)",Ho="Width",Aa="40 cc / 80 lp",oo="Height",so="55 cc / 110 lp",Ci="Note: Length, width and height are without reindeer",Oc="Weight at takeoff",Ns="75,000 gd (gumdrops)",Ds="Passenger weight at takeoff",ns="Santa Claus 260 pounds",ba="Weight of gifts at takeoff",_s="60,000 tons",Kt="Weight at landing",en="80,000 gd (ice & snow accumulation)",Qe="Passenger weight at landing",Et="1,260 pounds",wn="Propulsion",$n="Nine (9) rp (reindeer power)",Ti="Armament",ji="Antlers (purely defensive)",xn="Fuel",ia="Hay, oats and carrots (for reindeer)",oa="Emissions",ys="Classified",jc="Climbing speed",Tl="One \"T\" (Twinkle of an eye)",qs="Max speed",Wo="Faster than starlight",eu="Where is Santa right now?",vs="Santa is at the North Pole, where he lives with Mrs. Claus and the elves who make toys and take care of the reindeer year round! Each year on December 24th, Santa and his reindeer launch from the North Pole very early in the morning for their famous trip around the world. The minute they launch, NORAD starts to track him! Come back to this website on December 24th and you can track Santa along with NORAD!",Va="Has Santa ever crashed into anything when he was flying around the world?",Pc="Santa has been flying for centuries without hitting anything. He must be a great pilot!",rs="I would rather talk to someone at NORAD to find out where Santa is located. Is there a number I can call?",ks="Yes! The NORAD Tracks Santa Operations Center is fully operational beginning at 4 AM MST on December 24th. You can call 1 877 HI-NORAD (1 877 446-6723) to talk directly to a NORAD staff member who will be able to tell you Santa's exact location. Operators are available until midnight.",Ia="Besides tracking Santa, what does NORAD normally do?",Al="NORAD is a bi-national U.S./Canadian military organization responsible for aerospace warning, aerospace control, and maritime warning in the defense of North America. NORAD provides warning of impending missile and air attacks, safeguards the air sovereignty of North America, and maintains airborne forces for defense against attack. NORAD performs this important mission 24 hours a day, 365 days a year.",cl="www.norad.mil",ll="or follow us on Facebook at",ul=".",Cs="How many people support this effort, and are they active duty military personnel?",Il="More than 1,250 Canadian and American uniformed personnel and DOD civilians volunteer their time on December 24th to answer the thousands of phone calls and emails that flood in from around the world. In addition to the support provided by our corporate contributors to make this program possible, NORAD has two lead project officers who manage the program.",jl="How much money is spent on this project?",Dl="The NORAD Tracks Santa program is made possible by volunteers and through the generous support of corporate licensees who bear virtually all of the costs.",dl="Our Team",Zo="The NORAD Tracks Santa\xAE (NTS) program has been around for a long time, since 1955 to be exact! And while NORAD has the history and the necessary technology to track Santa, the NTS program spends only minimal government funds.",Ga="So, how do we do it? The NTS program is funded through generous contributions from our corporate team. Everything from computer servers, web site design, video imaging, Santa's tracking map, and telephone services are donated.",hl="Without this generosity, the NTS program would not be as successful. NORAD would like to thank each and every one of our counterparts for their terrific support.",We="The NTS program is managed by the NORAD and the United States Northern Command Public Affairs Office at Peterson Space Force Base, Colorado.",At="The 2023 NORAD Tracks Santa\xAE program is made possible by the following corporate contributors:",ut="The use of trade, firm, or corporation names on this website does not constitute an official endorsement or approval by the United States Department of Defense or NORAD of any product or service to the exclusion of others that may be suitable.",vn="Why we track Santa and protect North America",Jn="In Memory of Retired Colonel Harry Shoup, NORAD's First Santa Tracker",mr="September 29, 1917 - March 14, 2009",pr="On Dec. 24, we have the very special mission of also tracking Santa using the same systems we use every day: satellite systems, high-powered radar and jet fighters. For more than 65 years, NORAD and its predecessor, the Continental Air Defense Command (CONAD) have tracked Santa\u2019s flight around the world.",Ai="The modern tradition of tracking Santa began in 1955 when a young child accidentally dialed the unlisted phone number of the CONAD Operations Center upon seeing an newspaper advertisement telling kids to call Santa. The Director of Operations, Colonel Harry Shoup, answered the phone and instructed his staff to check the radar for indications of Santa making his way south from the North Pole.",Ii="Thus a tradition was born, and continued when NORAD was formed in 1958. Each year since, NORAD has dutifully reported Santa\u2019s location on Dec. 24 to millions of children and families across the globe.",co="NORAD receives calls from around the world on Dec. 24 asking for Santa's location. Children, families and fans also keep track of Santa's location on the NORAD Tracks Santa\xAE website and our social media platforms.",ko="All of this is made possible by the amazing generosity of our volunteers and our government and corporate partners who help bring the NORAD Tracks Santa\xAE program to the world.",jo="\"We have the watch.\"",[U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,jr,Do,_i,xs,tc,gc,Vs,Fo,Ta,kr,Ei,dr,Gs,va,$a,ca,Xo,ua,Ho,Aa,oo,so,Ci,Oc,Ns,Ds,ns,ba,_s,Kt,en,Qe,Et,wn,$n,Ti,ji,xn,ia,oa,ys,jc,Tl,qs,Wo,eu,vs,Va,Pc,rs,ks,Ia,Al,cl,ll,ul,Cs,Il,jl,Dl,dl,Zo,Ga,hl,We,At,ut,vn,Jn,mr,pr,Ai,Ii,co,ko,jo,["version","1.1","xmlns","http://www.w3.org/2000/svg",1,"isInvisible"],["id","icon-secretsanta","viewBox","0 0 99 89"],["d","M50.3,54.7c-1.8-0.4-3.5,0.8-3.9,2.5c-0.2,1.2,0.2,2.3,1,3.1L46.7,64c-0.2,0.9,0.4,1.8,1.3,1.9\n            c0.9,0.2,1.8-0.4,1.9-1.3l0.8-3.7c1.1-0.4,1.9-1.2,2.2-2.4C53.2,56.8,52.1,55.1,50.3,54.7z"],["d","M85.2,37L85.6,10l4.9-4.6L94.3,1H64.1l5.4,8.3l0.5,9.5l-4.3-5.1h-16H49H33L1,51.8l11,2.3l2.4-9.2l12.3,41.8h4\n            h8h19.7h11.8h1.6l12.3-41.8l2.4,9.2l11-2.3L85.2,37z M43.9,41.5c1.2-5.9,5.1-9.7,11-8.5c5.9,1.2,7.9,6.2,6.7,12.1l-0.4,1.7\n            l-17.6-3.7L43.9,41.5z M67,54.8l-3.3,16c-0.6,2.7-3.2,4.4-5.8,3.8L35.4,70c-2.7-0.6-4.4-3.2-3.8-5.8l3.3-16\n            c0.6-2.7,3.2-4.4,5.8-3.8L63.2,49C65.9,49.6,67.6,52.2,67,54.8z"],["id","icon-noradmission","viewBox","0 0 99 89"],["d","M91.9,42.8c-0.6-0.1-16.8-4.2-17.8-4.4c-0.9-0.2-18-4.2-18-4.2L35.7,3.5L44,3.4c0,0,0.7-0.5,0.7-1.1\n            c0-0.6-0.8-1.1-0.8-1.1l-12.8,0c0,0-1.4-0.1-1.4,1.1c0,1.2,1.5,1.2,1.5,1.2l0.6,33.2l-10.2,1.1c0,0-8.1-9.4-9.1-11\n            c-1.1-1.6-2-0.9-2-0.9l0.2,15.2l-2.3,1.1v4.8l2.1,1.2c0,0,0,7.8,0,10.4c0,2.6,0,4.4,0.9,4.3c0.9-0.1,10.1-12.3,10.9-12.4\n            c0.8-0.1,9.7,1.6,9.7,1.6l-0.5,33.2c0,0-0.8,0.2-1.4,0.4c-0.6,0.1,0,1.3,0,1.3s9.4,0.1,12.1,0c2.7-0.1,2.7-0.1,2.7-0.8\n            c0-0.7-0.9-0.9-0.9-0.9H36c0,0,0,0,0.4-0.1c0.4-0.1,13.9-22.5,14.9-23.9c0.9-1.4,4.8-6.7,6-7.1c1.2-0.5,19.4-4.3,20.6-4.6\n            c1.2-0.2,16.6-4.6,16.7-5.3S92.5,43,91.9,42.8z M65,50.3c0,0-6.9-5.6-6.9-6.2c0-0.5,6.9-5.8,6.9-5.8C65.4,38.4,65,50.3,65,50.3z\n            M66.8,50.3c0,0-0.1-8.5,0-11.2l16.9,5.3L66.8,50.3z"],["id","icon-pressroom","viewBox","0 0 99 89"],["d","M85.4,71.7c-0.2-0.5-0.5-1-0.7-1.5c-0.3-0.8-1.3-1.1-2-0.8c-0.8,0.3-1.1,1.3-0.8,2c0.2,0.5,0.5,1,0.7,1.5\n                c1.9,3.9,2.9,6.5,0.3,9.2c-1.4,1.5-2.7,2.2-3.9,2.1c-1.2-0.1-2.6-1-4.1-2.7l2.7-2.1c0.3-0.2,0.4-0.7,0.2-1l-23-39.9\n                c-2.1,3.9-2.4,6-7,9.7c-2.6,2-5.6,3.3-8.7,3.8l30.3,32.4c0.2,0.2,0.4,0.3,0.6,0.3c0.2,0,0.3-0.1,0.5-0.2l2-1.1\n                c1.6,1.8,3.7,3.8,6.4,3.9c0.1,0,0.2,0,0.3,0c2,0,4-1,6-3C89.3,80,87.1,75.4,85.4,71.7z M54.6,57.3c-0.3,0.2-0.6,0.4-1,0.4\n                c-0.4,0-0.9-0.2-1.2-0.5l-3.3-3.9c-0.5-0.6-0.5-1.6,0.2-2.2c0.7-0.5,1.6-0.5,2.2,0.2l3.3,3.9C55.3,55.8,55.2,56.8,54.6,57.3z"],["d","M40.2,46C29,51.8,19.7,45.6,14,34.4S12.7,9.5,23.9,3.8S45,4.4,50.7,15.6S51.4,40.3,40.2,46z"],["id","icon-ourteam","viewBox","0 0 112 89"],["d","M10.9,15.8c3.6,0.1,3.4,3.4,11.8,5.7s24.7,2,27.9,12.7C53.8,45,14.3,23.2,10,21.7\n\t\tC5.7,20.2,10.9,15.8,10.9,15.8z"],["d","M45,36.2c0-0.4,0-0.9,0.1-1.3c0.2-4.1,2.6-11.6,6.5-12.9c6.2-2.1,13.9,0.1,13.9,0.1s0.3,1,1,2.3\n\t\t\tc0.7,1.4,2.4,3.6,5.3,4.3s5.7-0.2,7.5-1c2.7-1.1,3.1-5.6,2.5-8.4S77.1,14,74.7,14c-2.4,0-5.3,1.3-5.8,1.8c-0.5,0.5-1,0.7-1.4,0.7\n\t\t\tc-0.4-0.1-5.1-5-7.1-6.7c-2-1.6-9.9-6.1-12.4-7.3c-2.4-1.2-5.1-1-6.3-0.5c-1.2,0.5-10.1,6.9-12.4,8.3\n\t\t\tc-2.2,1.4-15.1,11.1-16.9,12.2c-1,0.7-1.3,0.8-1.4,0.9C22.5,27.4,34.2,30.9,45,36.2z"],["cx","26.1","cy","36.2","r","16.2"],["cx","9.1","cy","36.7","rx","7.1","ry","5.2"],["d","M34.6,53.3c3.6,0.1,3.4,3.4,11.8,5.7s24.7,2,27.9,12.7c3.2,10.7-36.3-11.1-40.6-12.6\n\t\tC29.4,57.7,34.6,53.3,34.6,53.3z"],["d","M71.5,71.1c0-0.4,0-0.9,0.1-1.3c0.2-4.1,2.6-11.6,6.5-12.9C84.3,54.7,92,57,92,57s0.3,1,1,2.3\n\t\tc0.7,1.4,2.4,3.6,5.3,4.3c2.9,0.7,5.7-0.2,7.5-1c2.7-1.1,3.1-5.6,2.5-8.4c-0.6-2.9-4.6-5.3-7.1-5.3s-5.3,1.3-5.8,1.8\n\t\tc-0.5,0.5-1,0.7-1.4,0.7c-0.4-0.1-5.1-5-7.1-6.7c-2-1.6-9.9-6.1-12.4-7.3s-5.1-1-6.3-0.5c-1.2,0.5-10.1,6.9-12.4,8.3\n\t\tC53.6,46.7,40.7,56.3,39,57.5c-1,0.7-1.3,0.8-1.4,0.9C49.1,62.4,60.7,65.8,71.5,71.1z"],["cx","52.6","cy","71.1","r","16.2"],["cx","35.6","cy","71.7","rx","7.1","ry","5.2"],["id","icon-contactus","viewBox","0 0 99 89"],["d","M68.2,2.9C50.2-0.5,3.3,1.6,2.1,25.2s8.1,41.7,31.1,45.3c15.5,2.4,17.5,1.6,17.2,0.8l17.8,16.1l8.5-19.2\n\tc0,0,15-1.1,19.7-25.3C100.3,22.2,86.2,6.3,68.2,2.9z M70.7,50.3l-1.1,1.4c-0.8,1.1-5.2,5.6-10.1,6.5c-5.9,1.1-12.7-1.6-20.3-7.8\n\tC31.5,44.2,27.6,38,27.5,32C27.4,27,29,19,30,18l1.1-1.4c2.1-2.5,4.3-1.1,6.5,1.4l1.3,1.5c2.2,2.5,4.5,10,2.5,12.5l-1.3,1.5\n\tc-0.9,1.1-5.3,3.2,3.9,10.8c9.2,7.5,10.4,2.9,11.3,1.8l1.2-1.5c2.1-2.5,6.8-3.1,9.6-1.4l1.7,1C70.9,45.9,72.7,47.8,70.7,50.3z"],["id","icon-trapizoidA","viewBox","0 0 266 210","preserveAspectRatio","none"],["stroke","#96D9EE","stroke-width","2.5","stroke-miterlimit","10","points","2.6,1.7 263.5,7.2 235.6,207.7\n\t19.1,207.7 "],["id","icon-trapizoidB","viewBox","0 0 266 210","preserveAspectRatio","none"],["stroke","#96D9EE","stroke-width","2.5","stroke-miterlimit","10","points","2.6,207.7 263.5,202.2 235.6,1.7\n\t19.1,1.7 "],["id","icon-email","viewBox","0 0 54 54"],["points","48.981,38.332 10.231,44.418 5.019,15.283\n                        31.481,28.582 47.647,12.015",2,"fill-rule","evenodd","clip-rule","evenodd","fill","currentColor"],["points","47.481,9.582 5.019,13.201 30.731,24.582",2,"fill-rule","evenodd","clip-rule","evenodd","fill","currentColor"],["id","icon-phone","viewBox","0 0 54 54"],["d","M33.266,30.177c0.361-0.368,0.586-0.625,0.586-0.625C33.629,29.737,33.438,29.95,33.266,30.177z",2,"fill","currentColor"],["d","M43.193,40.77c0,0-0.454,0.273-1.19,0.662C42.434,41.281,42.837,41.066,43.193,40.77z",2,"fill","currentColor"],["d","M41.186,33.537c-2.579-3.098-6.461-4.118-8.67-2.279c0,0-0.225,0.258-0.586,0.625\n                            c-1.099,1.119-2.553,2.327-3.766,1.386c-1.612-1.25-4.829-5.343-5.978-6.98c-1.149-1.637,1.972-5.068,1.972-5.068\n                            c2.209-1.839,1.909-5.842-0.671-8.939s-6.461-4.118-8.67-2.279c-0.428,0.356-0.759,0.795-1,1.292l-0.001-0.001\n                            c0,0-3.1,4.614-3.152,9.246c-0.063,5.57,15.428,23.617,19.417,25.083c3.099,1.14,8.27-1.26,10.586-2.485\n                            c0.735-0.389,1.19-0.662,1.19-0.662C44.066,40.637,43.766,36.635,41.186,33.537z M15.621,13.026\n                            c0.161-0.441,0.417-0.828,0.776-1.127c1.462-1.217,4.031-0.542,5.738,1.508c1.707,2.05,1.906,4.699,0.444,5.916\n                            c-0.074,0.062-0.162,0.097-0.241,0.149c-1.489,0.975-3.876,0.289-5.497-1.657C15.553,16.269,15.126,14.383,15.621,13.026z\n                             M40.221,40.512c-1.435,1.195-3.958,0.532-5.634-1.481s-1.871-4.613-0.436-5.808c1.435-1.195,3.958-0.532,5.634,1.481\n                            S41.657,39.317,40.221,40.512z",2,"fill","currentColor"],[1,"popupHQ__wrapper"],[1,"popupHQ__contentwrapper"],[1,"popupHQ__header",2,"background-color","#007575","z-index","99999"],[1,"noradtitle"],[1,"button","b-close"],[3,"routerLink"],["src","assets/images/close.png","alt","Close button"],[1,"popupHQ__navwrapper"],[1,"popupHQ__Navigation"],["role","navigation","aria-label","Main navigation",1,"navHQ","clearfix"],[1,"iconli"],["fragment","OurMission","aria-label","Learn about NORAD's Mission",1,"navOurMission",3,"routerLink"],[1,"icon"],[0,"xlink","href","#icon-noradmission"],["fragment","HowWeTrackSanta","aria-label","Discover How We Track Santa",1,"navHowWeTrackSanta",3,"routerLink"],["src","assets/images/noradHq/satellite_icon.png","alt","Satellite Icon","width","50","height","50"],["fragment","OurTeam","aria-label","Meet Our Team",1,"navOurTeam",3,"routerLink"],[0,"xlink","href","#icon-ourteam"],["fragment","WhyWeTrackSanta","aria-label","Why We Track Santa",1,"navWhyWeTrackSanta",3,"routerLink"],["src","assets/images/noradHq/radar_icon.png","alt","Radar Icon","width","50","height","50"],["fragment","PressRoom","aria-label","Visit Press Room",1,"navPressRoom",3,"routerLink"],["aria-hidden","true",1,"icon"],[0,"xlink","href","#icon-pressroom"],[1,"popupHQ__content","popupHQ__content--paginated"],[1,"clearfix"],["id","OurMission","disabledata-appear","fade-in","aria-labelledby","mission-heading"],[1,"popUpHQ__Content__inner#"],["id","mission-heading",1,"navContentHQSubTitle"],["id","trackMission1",1,"row","popUpHQ__Content__para"],[1,"column-image"],["src","assets/images/noradHq/ContentPhotos/mission2.jpg","alt","Image showing NORAD's Mission",2,"max-width","20vw"],[1,"column-text"],["src","assets/images/noradHq/ContentPhotos/mission3.jpg","alt","",2,"max-width","20vw"],["id","HowWeTrackSanta","disabledata-appear","fade-in"],[1,"popUpHQ__Content__inner"],["id","contentHowWeTrackSanta","disabledata-appear","fade-in"],["id","h3how",1,"navContentHQSubTitle"],["id","trackHowContent_how1",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/sbirgeo.jpg","alt","",2,"max-width","20vw"],["src","assets/images/noradHq/ContentPhotos/radar-snow.jpg","alt","",2,"max-width","20vw"],["id","trackHowContent_how2",1,"row","popUpHQ__Content__para"],["id","trackHowContent_how4",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/Canadian-CF-18.jpg","alt","",2,"max-width","20vw"],[1,"column-text-wide"],["id","trackFaqContent","disabledata-appear","fade-in"],["id","h3faq",1,"navContentHQSubTitle"],["id","trackFaqContent_faq1",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/faq3.jpg","alt","",2,"max-width","20vw"],["src","assets/images/noradHq/ContentPhotos/faq1.jpg","alt","",2,"max-width","20vw"],["id","trackFaqContent_faq2",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/faq2.jpg","alt","",2,"max-width","20vw"],["src","assets/images/noradHq/ContentPhotos/faq4.jpg","alt","",2,"max-width","20vw"],["id","trackFaqContent_faq4",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/faq5.jpg","alt","",2,"max-width","20vw"],["id","trackFaqContent_faq6",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/faq6.jpg","alt","An image explaining NORAD's mission of tracking Santa",2,"max-width","20vw"],["href","https://www.noradsanta.org/","target","_blank"],["src","assets/images/noradHq/sleighs.jpg","alt","",2,"max-width","20vw"],["id","trackFaqContent_faq7",1,"popUpHQ__Content__para"],[1,"sleighTechData_HQ__container"],[1,"sleighTechData_HQ__header"],[1,"sleighTechData_HQ"],["colspan","2",1,"sleighTechData__note"],["id","trackFaqContent_faq8",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/faq8.jpg","alt","",2,"max-width","20vw"],["src","assets/images/noradHq/ContentPhotos/faq9.jpg","alt","",2,"max-width","20vw"],["id","trackFaqContent_faq10",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/faq10.jpg","alt","",2,"max-width","20vw"],["href","http://www.norad.mil/","target","_blank"],["target",".blank","href","http://www.facebook.com/noradnorthcom",1,"externalDisclaimer"],["src","assets/images/noradHq/ContentPhotos/faq11.jpg","alt","",2,"max-width","20vw"],["id","OurTeam","disabledata-appear","fade-in","role","region","aria-labelledby","our-team-heading"],["id","our-team-heading",1,"navContentHQSubTitle"],[1,"popUpHQ__Content__para"],["id","WhyWeTrackSanta","disabledata-appear","fade-in"],["id","contentWhyWeTrackSanta","disabledata-appear","fade-in"],["id","h3why",1,"navContentHQSubTitle"],["id","trackWhyContent_why1",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/santa_and_shoup.jpg","alt","Col Shoup and Santa"],["id","trackWhyContent_why2",1,"row","popUpHQ__Content__para"],["src","assets/images/noradHq/ContentPhotos/volunteers2.jpg","alt",""],["src","assets/images/noradHq/ContentPhotos/volunteers3.jpg","alt",""],[1,"popupHQ__content--mobilecheck"],[1,"monitorsHQ--smallmonitors"],[1,"monitorsHQ--smallmonitors--left"],[1,"monitorsHQ--smallmonitors--right"],["id","monitorsHQ--smallmonitors--right--countdown","aria-label","Countdown to Santa's journey"],["id","defaultCountdownHQ"],["id","hqCountdown"],[1,"monitorsHQ--smallmonitors--inner"],[1,"monitorsHQ--smallmonitors--center"],[1,"monitorsHQ--smallmonitors--center--inner"],[1,"monitorsHQ--smallmonitors--screentitle"]]},template:function(_e,Ae){1&_e&&(R.\u0275\u0275namespaceSVG(),R.\u0275\u0275elementStart(0,"svg",116)(1,"defs")(2,"symbol",117)(3,"title"),R.\u0275\u0275i18n(4,0),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(5,"desc"),R.\u0275\u0275text(6,"Shhhh... Eyes Only secrets"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(7,"path",118)(8,"path",119),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(9,"symbol",120)(10,"title"),R.\u0275\u0275i18n(11,1),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(12,"desc"),R.\u0275\u0275text(13,"Read about NORAD's important duties"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(14,"path",121),R.\u0275\u0275elementEnd(),R.\u0275\u0275text(15," <"),R.\u0275\u0275elementStart(16,"symbol",122)(17,"title"),R.\u0275\u0275i18n(18,2),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(19,"desc"),R.\u0275\u0275text(20,"Stop the presses!"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(21,"path",123)(22,"path",124),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(23,"symbol",125)(24,"title"),R.\u0275\u0275i18n(25,3),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(26,"desc"),R.\u0275\u0275text(27,"Meet those who make the magic possible"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(28,"path",126)(29,"path",127)(30,"circle",128)(31,"ellipse",129)(32,"path",130)(33,"path",131)(34,"circle",132)(35,"ellipse",133),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(36,"symbol",134)(37,"title"),R.\u0275\u0275i18n(38,4),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(39,"desc"),R.\u0275\u0275text(40,"Pick up the phone, open that email, we are here"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(41,"path",135),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(42,"symbol",136)(43,"title"),R.\u0275\u0275text(44,"Icon Selection Polygon A"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(45,"desc"),R.\u0275\u0275text(46,"Poly"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(47,"polygon",137),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(48,"symbol",138)(49,"title"),R.\u0275\u0275text(50,"Icon Selection Polygon B"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(51,"desc"),R.\u0275\u0275text(52,"Poly"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(53,"polygon",139),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(54,"symbol",140)(55,"title"),R.\u0275\u0275text(56,"Contact Us via Email"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(57,"desc"),R.\u0275\u0275text(58,"Email icon"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(59,"polygon",141)(60,"polygon",142),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(61,"symbol",143)(62,"title"),R.\u0275\u0275text(63,"Contact Us via Phone"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(64,"desc"),R.\u0275\u0275text(65,"Email icon"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(66,"g"),R.\u0275\u0275element(67,"path",144)(68,"path",145)(69,"path",146),R.\u0275\u0275elementEnd()()()(),R.\u0275\u0275namespaceHTML(),R.\u0275\u0275elementStart(70,"div",147)(71,"div",148)(72,"div",149)(73,"h1",150),R.\u0275\u0275i18n(74,5),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(75,"h4",150),R.\u0275\u0275i18n(76,6),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(77,"span",151)(78,"a",152),R.\u0275\u0275element(79,"img",153),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(80,"div",154)(81,"div",155)(82,"nav",156)(83,"ul")(84,"li",157)(85,"a",158),R.\u0275\u0275namespaceSVG(),R.\u0275\u0275elementStart(86,"svg",159),R.\u0275\u0275element(87,"use",160),R.\u0275\u0275elementEnd(),R.\u0275\u0275namespaceHTML(),R.\u0275\u0275element(88,"span"),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(89,"li",157)(90,"a",161),R.\u0275\u0275element(91,"img",162)(92,"span"),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(93,"li",157)(94,"a",163),R.\u0275\u0275namespaceSVG(),R.\u0275\u0275elementStart(95,"svg",159),R.\u0275\u0275element(96,"use",164),R.\u0275\u0275elementEnd(),R.\u0275\u0275namespaceHTML(),R.\u0275\u0275element(97,"span"),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(98,"li",157)(99,"a",165),R.\u0275\u0275element(100,"img",166)(101,"span"),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(102,"li",157)(103,"a",167),R.\u0275\u0275namespaceSVG(),R.\u0275\u0275elementStart(104,"svg",168),R.\u0275\u0275element(105,"use",169),R.\u0275\u0275elementEnd(),R.\u0275\u0275namespaceHTML(),R.\u0275\u0275element(106,"span"),R.\u0275\u0275elementEnd()()()()()()(),R.\u0275\u0275elementStart(107,"div",170),R.\u0275\u0275element(108,"div",171),R.\u0275\u0275elementStart(109,"section",172)(110,"div",173)(111,"h3",174),R.\u0275\u0275i18n(112,7),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(113,"div",175)(114,"div",176),R.\u0275\u0275element(115,"img",177),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(116,"div",178)(117,"h4"),R.\u0275\u0275i18n(118,8),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(119,"p"),R.\u0275\u0275i18n(120,9),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(121,"p"),R.\u0275\u0275i18n(122,10),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(123,"p"),R.\u0275\u0275i18n(124,11),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(125,"p"),R.\u0275\u0275i18n(126,12),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(127,"div",176),R.\u0275\u0275element(128,"img",179),R.\u0275\u0275elementEnd()()()(),R.\u0275\u0275elementStart(129,"section",180)(130,"div",181)(131,"div",182)(132,"h3",183),R.\u0275\u0275i18n(133,13),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(134,"div",184)(135,"div",176),R.\u0275\u0275element(136,"img",185),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(137,"div",178)(138,"h4"),R.\u0275\u0275i18n(139,14),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(140,"p"),R.\u0275\u0275i18n(141,15),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(142,"h4"),R.\u0275\u0275i18n(143,16),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(144,"p"),R.\u0275\u0275i18n(145,17),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(146,"div",176),R.\u0275\u0275element(147,"img",186),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(148,"div",187),R.\u0275\u0275element(149,"div",178),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(150,"div",188)(151,"div",176),R.\u0275\u0275element(152,"img",189),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(153,"div",190)(154,"h4"),R.\u0275\u0275i18n(155,18),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(156,"p"),R.\u0275\u0275i18n(157,19),R.\u0275\u0275elementEnd()()()(),R.\u0275\u0275elementStart(158,"div",191)(159,"h3",192),R.\u0275\u0275i18n(160,20),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(161,"div",193)(162,"div",176),R.\u0275\u0275element(163,"img",194),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(164,"div",178)(165,"h4"),R.\u0275\u0275i18n(166,21),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(167,"p"),R.\u0275\u0275i18n(168,22),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(169,"h4"),R.\u0275\u0275i18n(170,23),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(171,"p"),R.\u0275\u0275i18n(172,24),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(173,"h4"),R.\u0275\u0275i18n(174,25),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(175,"p"),R.\u0275\u0275i18n(176,26),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(177,"div",176),R.\u0275\u0275element(178,"img",195),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(179,"div",196)(180,"div",176),R.\u0275\u0275element(181,"img",197),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(182,"div",178)(183,"h4"),R.\u0275\u0275i18n(184,27),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(185,"p"),R.\u0275\u0275i18n(186,28),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(187,"h4"),R.\u0275\u0275i18n(188,29),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(189,"p"),R.\u0275\u0275i18n(190,30),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(191,"h4"),R.\u0275\u0275i18n(192,31),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(193,"p"),R.\u0275\u0275i18n(194,32),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(195,"div",176),R.\u0275\u0275element(196,"img",198),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(197,"div",199)(198,"div",190)(199,"h4"),R.\u0275\u0275i18n(200,33),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(201,"p"),R.\u0275\u0275i18n(202,34),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(203,"h4"),R.\u0275\u0275i18n(204,35),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(205,"p"),R.\u0275\u0275i18n(206,36),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(207,"h4"),R.\u0275\u0275i18n(208,37),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(209,"p"),R.\u0275\u0275i18n(210,38),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(211,"h4"),R.\u0275\u0275i18n(212,39),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(213,"p"),R.\u0275\u0275i18n(214,40),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(215,"div",176),R.\u0275\u0275element(216,"img",200),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(217,"div",201)(218,"div",176),R.\u0275\u0275element(219,"img",202),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(220,"div",178)(221,"h4"),R.\u0275\u0275i18n(222,41),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(223,"p"),R.\u0275\u0275i18n(224,42),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(225,"h4"),R.\u0275\u0275i18n(226,43),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(227,"p")(228,"span"),R.\u0275\u0275i18n(229,44),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(230,"a",203),R.\u0275\u0275i18n(231,45),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(232,"span"),R.\u0275\u0275i18n(233,46),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(234,"h4"),R.\u0275\u0275i18n(235,47),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(236,"p"),R.\u0275\u0275i18n(237,48),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(238,"div",176),R.\u0275\u0275element(239,"img",204),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(240,"div",205)(241,"div",206)(242,"h4",207),R.\u0275\u0275i18n(243,49),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(244,"table",208)(245,"tbody")(246,"tr")(247,"td"),R.\u0275\u0275i18n(248,50),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(249,"td"),R.\u0275\u0275i18n(250,51),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(251,"tr")(252,"td"),R.\u0275\u0275i18n(253,52),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(254,"td"),R.\u0275\u0275i18n(255,53),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(256,"tr")(257,"td"),R.\u0275\u0275i18n(258,54),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(259,"td"),R.\u0275\u0275i18n(260,55),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(261,"tr")(262,"td"),R.\u0275\u0275i18n(263,56),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(264,"td"),R.\u0275\u0275i18n(265,57),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(266,"tr")(267,"td"),R.\u0275\u0275i18n(268,58),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(269,"td"),R.\u0275\u0275i18n(270,59),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(271,"tr")(272,"td"),R.\u0275\u0275i18n(273,60),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(274,"td"),R.\u0275\u0275i18n(275,61),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(276,"tr")(277,"td",209),R.\u0275\u0275i18n(278,62),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(279,"tr")(280,"td"),R.\u0275\u0275i18n(281,63),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(282,"td"),R.\u0275\u0275i18n(283,64),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(284,"tr")(285,"td"),R.\u0275\u0275i18n(286,65),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(287,"td"),R.\u0275\u0275i18n(288,66),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(289,"tr")(290,"td"),R.\u0275\u0275i18n(291,67),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(292,"td"),R.\u0275\u0275i18n(293,68),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(294,"tr")(295,"td"),R.\u0275\u0275i18n(296,69),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(297,"td"),R.\u0275\u0275i18n(298,70),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(299,"tr")(300,"td"),R.\u0275\u0275i18n(301,71),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(302,"td"),R.\u0275\u0275i18n(303,72),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(304,"tr")(305,"td"),R.\u0275\u0275i18n(306,73),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(307,"td"),R.\u0275\u0275i18n(308,74),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(309,"tr")(310,"td"),R.\u0275\u0275i18n(311,75),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(312,"td"),R.\u0275\u0275i18n(313,76),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(314,"tr")(315,"td"),R.\u0275\u0275i18n(316,77),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(317,"td"),R.\u0275\u0275i18n(318,78),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(319,"tr")(320,"td"),R.\u0275\u0275i18n(321,79),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(322,"td"),R.\u0275\u0275i18n(323,80),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(324,"tr")(325,"td"),R.\u0275\u0275i18n(326,81),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(327,"td"),R.\u0275\u0275i18n(328,82),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(329,"tr")(330,"td"),R.\u0275\u0275i18n(331,83),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(332,"td"),R.\u0275\u0275i18n(333,84),R.\u0275\u0275elementEnd()()()()()(),R.\u0275\u0275elementStart(334,"div",210)(335,"div",176),R.\u0275\u0275element(336,"img",211),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(337,"div",178)(338,"h4"),R.\u0275\u0275i18n(339,85),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(340,"p"),R.\u0275\u0275i18n(341,86),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(342,"h4"),R.\u0275\u0275i18n(343,87),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(344,"p"),R.\u0275\u0275i18n(345,88),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(346,"h4"),R.\u0275\u0275i18n(347,89),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(348,"p"),R.\u0275\u0275i18n(349,90),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(350,"div",176),R.\u0275\u0275element(351,"img",212),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(352,"div",213)(353,"div",176),R.\u0275\u0275element(354,"img",214),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(355,"div",178)(356,"h4"),R.\u0275\u0275i18n(357,91),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(358,"p")(359,"span"),R.\u0275\u0275i18n(360,92),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(361,"a",215),R.\u0275\u0275i18n(362,93),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(363,"span"),R.\u0275\u0275i18n(364,94),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(365,"a",216),R.\u0275\u0275text(366," facebook.com/noradnorthcom"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(367,"span"),R.\u0275\u0275i18n(368,95),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(369,"h4"),R.\u0275\u0275i18n(370,96),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(371,"p"),R.\u0275\u0275i18n(372,97),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(373,"h4"),R.\u0275\u0275i18n(374,98),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(375,"p"),R.\u0275\u0275i18n(376,99),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(377,"div",176),R.\u0275\u0275element(378,"img",217),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275element(379,"div",171),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(380,"section",218)(381,"div",181)(382,"h3",219),R.\u0275\u0275i18n(383,100),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(384,"div",220)(385,"p"),R.\u0275\u0275i18n(386,101),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(387,"p"),R.\u0275\u0275i18n(388,102),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(389,"p"),R.\u0275\u0275i18n(390,103),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(391,"p"),R.\u0275\u0275i18n(392,104),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(393,"p"),R.\u0275\u0275i18n(394,105),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(395,"app-partners")(396,"br"),R.\u0275\u0275elementStart(397,"p"),R.\u0275\u0275i18n(398,106),R.\u0275\u0275elementEnd()(),R.\u0275\u0275element(399,"div",171),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(400,"section",221)(401,"div",181)(402,"div",222)(403,"h3",223),R.\u0275\u0275i18n(404,107),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(405,"div",224)(406,"figure",176),R.\u0275\u0275element(407,"img",225),R.\u0275\u0275elementStart(408,"figcaption")(409,"span"),R.\u0275\u0275i18n(410,108),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(411,"br"),R.\u0275\u0275elementStart(412,"span"),R.\u0275\u0275i18n(413,109),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275elementStart(414,"div",178)(415,"p"),R.\u0275\u0275i18n(416,110),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(417,"p"),R.\u0275\u0275i18n(418,111),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(419,"p"),R.\u0275\u0275i18n(420,112),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(421,"p"),R.\u0275\u0275i18n(422,113),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(423,"p"),R.\u0275\u0275i18n(424,114),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275elementStart(425,"div",226)(426,"div",178),R.\u0275\u0275element(427,"img",227),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(428,"div",176),R.\u0275\u0275element(429,"img",228),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275element(430,"div",171),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275element(431,"div",229),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(432,"div",171),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(433,"div",230),R.\u0275\u0275element(434,"div",231),R.\u0275\u0275elementStart(435,"div",232)(436,"section",233)(437,"div",234),R.\u0275\u0275element(438,"app-count-down",235),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275elementStart(439,"div",236)(440,"div",237)(441,"div",238)(442,"h2",239),R.\u0275\u0275i18n(443,115),R.\u0275\u0275elementEnd()()()()(),R.\u0275\u0275elementStart(444,"noscript"),R.\u0275\u0275element(445,"div"),R.\u0275\u0275elementEnd()),2&_e&&(R.\u0275\u0275advance(78),R.\u0275\u0275property("routerLink",R.\u0275\u0275pureFunction0(6,G)),R.\u0275\u0275advance(7),R.\u0275\u0275property("routerLink",R.\u0275\u0275pureFunction0(7,Y)),R.\u0275\u0275advance(5),R.\u0275\u0275property("routerLink",R.\u0275\u0275pureFunction0(8,Y)),R.\u0275\u0275advance(4),R.\u0275\u0275property("routerLink",R.\u0275\u0275pureFunction0(9,Y)),R.\u0275\u0275advance(5),R.\u0275\u0275property("routerLink",R.\u0275\u0275pureFunction0(10,Y)),R.\u0275\u0275advance(4),R.\u0275\u0275property("routerLink",R.\u0275\u0275pureFunction0(11,Y)))},dependencies:[T.RouterModule,M.RouterLink,V.PartnersComponent,N.CountDownComponent],styles:['p[_ngcontent-%COMP%]{line-height:1.25em;margin-bottom:1em}.row[_ngcontent-%COMP%]{display:flex}.column-image[_ngcontent-%COMP%]{flex:10%;padding:5px}.column-text[_ngcontent-%COMP%]{flex:50%;padding:5px}.column-text-wide[_ngcontent-%COMP%]{flex:70%;padding:5px}.popupHQ__wrapper[_ngcontent-%COMP%]{height:auto;min-height:100%;width:100%;position:relative;background-image:url(MountainBG1366x768.5a420045aba4299f.jpg);background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:fixed;padding:10px}.popupHQ__contentwrapper[_ngcontent-%COMP%]{background:url(hqdigihud1179x565.220c3c2fcfd2a908.png) no-repeat center center;background-attachment:scroll;background-color:#001d39;transition:all .3s ease;border:11px solid #4e4f4f;border-radius:9px;background-position-y:50px;background-size:cover;inset:10px 10px 60px}.navHQ[_ngcontent-%COMP%]{color:#b5f3fc;font-weight:700;text-align:center}.navHQ--borderA[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .navHQ--borderB[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100px;height:100px}.popupHQ__navwrapper[_ngcontent-%COMP%]{margin-top:0;transition:all .5s ease}.navHQ--borderA[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .navHQ--borderB[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:currentColor}.popupHQ__content[_ngcontent-%COMP%]{overflow:visible;height:auto;padding:0 5.5em;color:#fff}.popupHQ__content--paginated[_ngcontent-%COMP%]{padding:0 6.5em 7em}.popupHQ__content--mobilecheck[_ngcontent-%COMP%]{display:none;width:0;height:0}.popUpHQ__Content__inner[_ngcontent-%COMP%]{margin:20px}.popUpHQ__Content__para[_ngcontent-%COMP%]{line-height:1.5em;font-size:1.6em}.popUpHQ__Content__para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .popUpHQ__Content__para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:underline;font-family:museo_sans100}.popUpHQ__Content__para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.popupHQ__Navigation[_ngcontent-%COMP%]{display:table;margin:0 auto}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;display:table-row}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:table-cell;vertical-align:middle;cursor:pointer;padding:20px;font-size:.9em;color:#b5f3fc}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:currentColor;display:block}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px;display:inline-block}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{vertical-align:middle;width:50px;height:50px;color:currentColor;padding:0;background:transparent;fill:currentColor;transition:all .15s ease}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:url(trapizoidA_ovr_small.fb839506dadc5dc0.svg) no-repeat center;background-size:100% 80%}.sleighTechData_HQ__container[_ngcontent-%COMP%]{margin:0 0 100px;padding:0;border:1px dashed #B5F3FC;border-radius:10px;clear:both}.sleighTechData_HQ__header[_ngcontent-%COMP%]{background-color:#fffc;padding:1em 10px;border-radius:10px 10px 0 0;color:#1f242a;margin:0}.sleighTechData_HQ[_ngcontent-%COMP%]{padding:10px;border-collapse:collapse;width:100%}.sleighTechData_HQ[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1)}.sleighTechData_HQ[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:.4em 1em}.sleighTechData__note[_ngcontent-%COMP%]{font-style:italic;font-size:.9em;font-weight:400}.codeBlock[_ngcontent-%COMP%]{background-color:#333;padding:10px;overflow:auto;font-family:monospace;border:1px solid #B5F3FC;text-align:left;width:100%}.hqContent__list[_ngcontent-%COMP%]{list-style-type:circle;text-align:left}.hqContent__list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5em}.timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2em;margin:0 3px 0 15px}.popupHQ__header[_ngcontent-%COMP%]   .b-close[_ngcontent-%COMP%]{top:5px;position:fixed}.popupHQ__header--scrolled[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1em;line-height:0}.contactus__list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#b5f3fc;display:inline-block;height:5em;padding-top:1.5em;padding-left:6em;background-repeat:no-repeat;background-position:left top;background-size:5em 5em;position:relative}.contactus__list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.contactvia__email[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .contactvia__phone[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em!important;border:0!important;position:absolute;left:0}.monitorsHQ--smallmonitors[_ngcontent-%COMP%]{position:fixed;height:105px;bottom:0;z-index:100;width:100%;background:url(table-bottom.ed7746bea80bec5a.png) repeat-x bottom}.monitorsHQ--smallmonitors--inner[_ngcontent-%COMP%]{margin:auto;width:40%}.monitorsHQ--smallmonitors--center--inner[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:100%;background:url(NoradLogo.cb496306b565ec3f.png) no-repeat;background-size:174px auto;background-position-y:70%}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%]{position:fixed;left:0;bottom:18px;width:370px;height:150px;background:url(Monitors_left.5eb85b795e61b29c.png) no-repeat left;background-size:100% auto}.monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{position:fixed;right:0;bottom:8px;width:324px;height:220px;background:url(Monitors_right.44cfafca684ac11a.png) no-repeat right;background-size:100% auto}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{display:inline-block;position:relative;height:100px;width:100%;border-top:7px solid;border-bottom:7px solid #050406;text-align:center;white-space:nowrap;background-color:#1b202b}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:after, .monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:before{position:absolute;content:"";top:-7px;bottom:0;height:100px;width:50%;z-index:-1;background-color:#1b202b}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:before{left:-5px;border-left:7px solid #050406;border-bottom:7px solid #050406;transform-origin:left top;transform:skew(-20deg)}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:after{right:-5px;border-right:7px solid #050406;border-bottom:7px solid #050406;transform-origin:right top;transform:skew(20deg)}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{text-transform:uppercase;color:#b5f3fc;font-size:.93em;font-weight:100;margin-left:175px;padding-top:20px}#MainScreen[_ngcontent-%COMP%]{margin-bottom:80px}#SecretSanta[_ngcontent-%COMP%], #OurMission[_ngcontent-%COMP%], #OurTeam[_ngcontent-%COMP%], #ContactUs[_ngcontent-%COMP%], #PressRoom[_ngcontent-%COMP%]{margin-bottom:20px;padding-top:1em}.popUpHQ__Content__para[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:7px solid #B5F3FC}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--fittoscreen[_ngcontent-%COMP%]{width:100%;max-width:700px}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--noborder[_ngcontent-%COMP%]{border:none}.imgs-HQ-right-tilt[_ngcontent-%COMP%]{transform:rotate(3deg)}.imgs-HQ-left-tilt[_ngcontent-%COMP%]{transform:rotate(-3deg)}.leftflow--imghq[_ngcontent-%COMP%], .rightflow--imghq[_ngcontent-%COMP%], .leftflow--imghq--why[_ngcontent-%COMP%], .rightflow--imghq--why[_ngcontent-%COMP%]{width:32%;min-width:300px;height:auto;max-width:500px}.rightflow--imghq[_ngcontent-%COMP%], .rightflow--imghq--why[_ngcontent-%COMP%], .rightflow--imghq-vert[_ngcontent-%COMP%]{float:right;margin-left:60px;margin-bottom:60px}.hqimg--sizer[_ngcontent-%COMP%]{width:100%;height:auto}.noradtitle[_ngcontent-%COMP%]{text-align:center;color:#b5f3fc;margin-top:0;height:2.5em;line-height:2.5em;margin-bottom:0}@media screen and (min-width: 1600px){.popupHQ__wrapper[_ngcontent-%COMP%]{background-image:url(MountainBG1920x1080.27827a64ad4c45a8.jpg)}.popupHQ__contentwrapper[_ngcontent-%COMP%]{background:url(hqdigihud1820x872.320382c52fae2d00.png) no-repeat center center;background-attachment:fixed;background-color:#0f3561cc;transition:all .3s ease;border:11px solid #1f242a;border-radius:9px;background-position-y:70px;background-size:100% auto,cover}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px 30px;font-size:initial}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:60px;height:60px}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%]{position:fixed;background:url(Monitors_left.5eb85b795e61b29c.png) no-repeat left;background-size:100% auto}.monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{position:fixed;right:0;bottom:8px;width:405px;height:275px;background:url(Monitors_right.44cfafca684ac11a.png) no-repeat right;background-size:100% auto}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{font-size:1.4em}#defaultCountdownHQ[_ngcontent-%COMP%]{margin:30px 60px}.leftflow--imghq--why[_ngcontent-%COMP%], .rightflow--imghq--why[_ngcontent-%COMP%]{width:33%}.leftflow--imghq[_ngcontent-%COMP%], .rightflow--imghq[_ngcontent-%COMP%]{width:46%;min-width:300px;height:auto;margin-top:1em}.leftflow--imghq-vert[_ngcontent-%COMP%], .rightflow--imghq-vert[_ngcontent-%COMP%]{width:27%;min-width:300px;height:auto}}@media only screen and (max-device-width: 480px),(max-width: 480px){.popupHQ__wrapper[_ngcontent-%COMP%]{background-color:#205485;background-image:none;padding:0}.popupHQ__contentwrapper[_ngcontent-%COMP%]{border:none;border-radius:0;inset:3em 0 0}.popupHQ__header[_ngcontent-%COMP%]{position:fixed;top:0;display:block;width:100%;background-color:transparent;padding:0;box-shadow:0 5px 10px #00000080}.popupHQ__content[_ngcontent-%COMP%]{background-image:url(hqdigihud550x650.e6545c5fb7b9a057.png);padding:0 1em}.popupHQ__content--mobilecheck[_ngcontent-%COMP%]{display:block;width:0;height:0}.popupHQ__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.25em;margin-bottom:1em}.popupHQ__navwrapper[_ngcontent-%COMP%]{display:block;z-index:290;transition:all .5s ease;font-size:1.5em;margin-top:2em}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%], .monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{display:none}.monitorsHQ--smallmonitors[_ngcontent-%COMP%]{position:fixed;height:80px;width:100%;background-image:none;left:50%;margin-left:-50%;text-align:center}.popupHQ__Navigation[_ngcontent-%COMP%]{min-width:auto;display:block;margin:0 auto;background-color:#0000004d;border-bottom:2px dashed #B5F3FC}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:inline-block}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:18%;padding:0;margin:0;display:inline-block}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:50%;padding:0}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}#OurTeam[_ngcontent-%COMP%]{padding-bottom:0;margin-bottom:0}.popupHQ__content[_ngcontent-%COMP%]{padding:0 1.5em 3em}.popUpHQ__Content__inner[_ngcontent-%COMP%]{margin:4em 0 0}.popUpHQ__Content__para[_ngcontent-%COMP%]{margin-bottom:3em;font-size:1em}.codeBlock[_ngcontent-%COMP%]{width:95%;height:200px}.popUpHQ__Content__para[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;float:none!important;margin:5px 0 20px 5px;height:auto}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--noborder[_ngcontent-%COMP%]{border:none}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--actualsize[_ngcontent-%COMP%]{width:auto;height:auto}.leftflow--imghq--why[_ngcontent-%COMP%], .rightflow--imghq--why[_ngcontent-%COMP%]{width:100%}.imgs-HQ-right-tilt[_ngcontent-%COMP%], .imgs-HQ-left-tilt[_ngcontent-%COMP%]{transform:none}figcaption[_ngcontent-%COMP%]{font-size:.75em;margin-bottom:1.7em}#imagesForDownload[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{font-size:.75em}.contactus__list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:1em;padding-left:5em;background-position:left top;background-size:4em 6em}.monitorsHQ--smallmonitors--inner[_ngcontent-%COMP%]{width:auto;left:0;bottom:0}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{font-size:.8em;white-space:normal;word-wrap:normal;padding-top:10px;padding-right:30px;line-height:1.25em;display:inline-block;width:75%;text-align:center;margin-top:0;position:relative;right:42px}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{display:inline-block;position:relative;height:auto;width:77%;text-align:center;white-space:nowrap}.monitorsHQ--smallmonitors--center--inner[_ngcontent-%COMP%]{height:100%;width:100%;font-size:.93em;margin-left:0;padding-top:0;text-align:right;background-size:123px auto;background-position:left 5px}}@media (max-width: 800px) and (min-width: 700px){.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:0 45px}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 767px),only screen and (max-device-width: 640px),(min-resolution: 192dpi) and (max-device-width: 767px){.popupHQ__content--mobilecheck[_ngcontent-%COMP%]{display:block;width:0;height:0}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 767px),only screen and (max-device-width: 640px),(min-resolution: 192dpi) and (max-device-width: 767px){.popupHQ__wrapper[_ngcontent-%COMP%]{height:auto;min-height:100%;width:100%;position:relative;background-image:url(MountainBG1366x768.5a420045aba4299f.jpg);background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:fixed;padding:10px}.popupHQ__contentwrapper[_ngcontent-%COMP%]{border-width:0;border-radius:0;inset:3em 0 27px}.popupHQ__header[_ngcontent-%COMP%]{position:fixed;top:0;display:block;width:100%;background-color:transparent;padding:0;box-shadow:0 5px 10px #050406}.noradtitle[_ngcontent-%COMP%]{display:inherit;text-align:center;color:#b5f3fc;background-color:#205485;line-height:3em;margin:0;position:absolute;width:100%;top:0;z-index:300;font-size:1em;height:3em}.popupHQ__navwrapper[_ngcontent-%COMP%]{display:block;z-index:290;transition:all .5s ease;font-size:1.5em;margin-top:2em}.popupHQ__Navigation[_ngcontent-%COMP%]{min-width:auto;display:block;margin:0 auto;background-color:#525252;border-bottom:2px dashed #B5F3FC}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;padding:0;margin:0;width:100%}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:18%;vertical-align:top;font-size:.75em;padding:5px 0;margin:0;display:inline-block}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px;height:40px}.navHQ[_ngcontent-%COMP%]{padding-top:0}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:none;width:20%;padding:0;margin:0}.figure__imgwrap[_ngcontent-%COMP%]   .imgs-HQ-left-tilt[_ngcontent-%COMP%]{width:100%;margin-top:-50%}.imgs-HQ-right-tilt[_ngcontent-%COMP%], .imgs-HQ-left-tilt[_ngcontent-%COMP%]{transform:none}.monitorsHQ--smallmonitors[_ngcontent-%COMP%]{height:60px}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%], .monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{display:none}.monitorsHQ--smallmonitors--inner[_ngcontent-%COMP%]{width:90%}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{width:90%;left:5%}.monitorsHQ--smallmonitors--center--inner[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:100%;background:url(NoradLogo.cb496306b565ec3f.png) no-repeat;background-size:112px auto}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{padding-top:15px}.popupHQ__content--paginated[_ngcontent-%COMP%]{padding:4.7em 2% 7em;min-width:150px}.navHQ[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{display:none}.navHQ--borderA[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .navHQ--borderB[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:45px;height:45px}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 769px) and (orientation: portrait),only screen and (max-device-width: 640px) and (orientation: portrait),(min-resolution: 192dpi) and (max-device-width: 769px) and (orientation: portrait){#MainScreen[_ngcontent-%COMP%]{margin-left:0;margin-right:0}#MainScreen[_ngcontent-%COMP%]   .navHQ[_ngcontent-%COMP%]{padding-top:0}.navHQ--borderA[_ngcontent-%COMP%]{width:30%;margin-bottom:2em}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{left:0}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{padding-top:10px;margin-left:150px}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{vertical-align:middle;height:3em}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:none;width:20%;padding:0;margin:0}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:15%;padding:0;margin:0}.figure__imgwrap[_ngcontent-%COMP%]   .imgs-HQ-left-tilt[_ngcontent-%COMP%]{width:45%;margin-top:0}}@media only screen and (min-device-width: 320px) and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: landscape){.popupHQ__content--mobilecheck[_ngcontent-%COMP%]{display:block;width:0;height:0}}']})}}return J})()},1064:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.NotFoundComponent=void 0;const T=w(1635).__importStar(w(3953));C.NotFoundComponent=(()=>{class N{static{this.\u0275fac=function(G){return new(G||N)}}static{this.\u0275cmp=T.\u0275\u0275defineComponent({type:N,selectors:[["app-not-found"]],standalone:!0,features:[T.\u0275\u0275StandaloneFeature],decls:23,vars:0,consts:()=>{let M,G,Y;return M="Whoops!",G="The elves have looked everywhere for the page you've requested, but it has either moved or is no longer on the NORAD Tracks Santa website. ",Y="Santa's Village",[M,G,Y,["version","1.1","xmlns","http://www.w3.org/2000/svg",2,"display","none"],["id","icon-village","viewBox","0 0 54 54"],["fill-rule","evenodd","clip-rule","evenodd","d","M21.672,14.352l0.766,13.077l3.7,5.569l0.925-1.856l-3.089-17.05\n        c1.274-0.584,2.164-1.864,2.164-3.358V10.71c0-2.044-1.656-3.701-3.7-3.701c-2.043,0-3.7,1.657-3.7,3.701v0.023\n        C18.739,12.514,19.997,13.999,21.672,14.352z M22.438,38.567v-3.713h1.85l-5.549-9.282l-4.625,9.282h1.85v3.713h1.85v-3.713h2.775\n        v3.713H22.438z M35.387,38.567v-3.713h1.85l-5.55-9.282l-4.625,9.282h1.85v3.713h1.85v-3.713h2.775v3.713H35.387z M37.237,36.711\n        c-0.231,1.856,0,2.785,0,2.785h-9.249v-2.785h-3.7v2.785H14.114v-2.785c0,0-10.637,2.088-11.099,4.641\n        c-0.463,2.553,9.725,6.191,22.198,5.569C57.321,45.322,57.178,36.711,37.237,36.711z M31.688,22.788l8.324,12.995h4.625\n        l-6.474-11.139l-5.55-9.282l-5.549,7.426l0.925,4.641L31.688,22.788z M17.814,22.788l2.775,0.928v-3.713l-6.474-3.713l-1.85,9.282\n        H7.64L5.79,37.639l6.475-1.856L17.814,22.788z"],[1,"popup__wrapper"],[1,"popup__contentwrapper"],[1,"popup__content","popup__content--nobg","popup__content--fullwidth"],[1,"fourohfour__content"],["id","fourohfour__elf","src","assets/images/static/404elf.png"],["id","fourohfour__title"],["id","fourohfour__error-message"],["id","fourohfour__village-link"],["href","./index.html"],[1,"icon"],[0,"xlink","href","#icon-village"]]},template:function(G,Y){1&G&&(T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(0,"svg",3)(1,"defs")(2,"symbol",4)(3,"title"),T.\u0275\u0275text(4,"Village Icon"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(5,"desc"),T.\u0275\u0275text(6,"An image of the village in front of a large north pole and three mountains."),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(7,"path",5),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),T.\u0275\u0275element(12,"img",10),T.\u0275\u0275elementStart(13,"p",11),T.\u0275\u0275i18n(14,0),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(15,"p",12),T.\u0275\u0275i18n(16,1),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(17,"div",13)(18,"a",14),T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(19,"svg",15),T.\u0275\u0275element(20,"use",16),T.\u0275\u0275elementEnd(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(21,"span"),T.\u0275\u0275i18n(22,2),T.\u0275\u0275elementEnd()()()()()()())}})}}return N})()},7116:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.PartnersComponent=void 0;const z=w(1635),T=w(177),V=z.__importStar(w(3953)),N=z.__importStar(w(177));function R(G,Y){if(1&G&&(V.\u0275\u0275elementStart(0,"div",2)(1,"a",3),V.\u0275\u0275element(2,"img",4),V.\u0275\u0275elementEnd()()),2&G){const K=Y.$implicit;V.\u0275\u0275advance(),V.\u0275\u0275propertyInterpolate("href",K.link,V.\u0275\u0275sanitizeUrl),V.\u0275\u0275advance(),V.\u0275\u0275propertyInterpolate("src",K.image,V.\u0275\u0275sanitizeUrl),V.\u0275\u0275propertyInterpolate("alt",K.name)}}C.PartnersComponent=(()=>{class G{constructor(){this.partners=[{link:"http://www.microsoft.com",image:"assets/images/static/partners/microsoft.jpg",name:"Microsoft Corporation"},{link:"http://azure.microsoft.com",image:"assets/images/static/partners/microsoftazure.png",name:"Microsoft Azure"},{link:"https://www.bing.com/",image:"assets/images/static/partners/bing.png",name:"Bing"},{link:"http://www.ansys.com",image:"assets/images/static/partners/ansys.png",name:"Ansys"},{link:"http://www.cesium.com",image:"assets/images/static/partners/cesium.png",name:"Cesium - Next Dimension Mapping"},{link:"http://www.globelinkflc.com/",image:"assets/images/static/partners/iu.png",name:"Globelink Foreign Language Center"},{link:"https://aws.amazon.com/government-education/defense/",image:"assets/images/static/partners/AWS_logo_RGB.png",name:"AWS"},{link:"http://www.verizonbusiness.com/",image:"assets/images/static/partners/verizon.jpg",name:"Verizon"},{link:"http://www.agingo.com",image:"assets/images/static/partners/Agingo_Logo_240w.png",name:"Agingo"},{link:"https://www.meetup.com/nashville-NET-User-Group",image:"assets/images/static/partners/NashDotNet-logo.png",name:"Nashville .NET User Group"},{link:"https://www.onstar.com/web/portal/home?g=1",image:"assets/images/static/partners/onstar.jpg",name:"OnStar"},{link:"http://www.dvidshub.net",image:"assets/images/static/partners/divids.jpg",name:"Defense Video &amp; Imagery Distribution System"},{link:"https://www.amazon.com/gp/product/B077D2GY1Z",image:"assets/images/static/partners/just-ask-amazon-alexa.png",name:"Just Ask Amazon Alexa"},{link:"http://www.hp.com",image:"assets/images/static/partners/hp.jpg",name:"Hewlett Packard"},{link:"http://www.avayagov.com",image:"assets/images/static/partners/avaya.jpg",name:"Avaya"},{link:"http://www.centurylink.com/aboutus/community",image:"assets/images/static/partners/CenturyLink.png",name:"Century Link"},{link:"https://coloradospringschamberedc.com/",image:"assets/images/static/partners/coloradoalliance.jpg",name:"Colorado Springs Chamber of Commerce/Economic Development Center Millitary Affairs Council"},{link:"https://qceventdesign.com/",image:"assets/images/static/partners/quill.png",name:"Quill"},{link:"https://hausofholidayllc.com/",image:"assets/images/static/partners/Haus_of_Holiday_logo.png",name:"Haus of Holiday"},{link:"https://www.thearcppr.org/",image:"assets/images/static/partners/The-Arc-Logo-200px.png",name:"Arc Pikes Peak Region"},{link:"http://www.meshbox.com",image:"assets/images/static/partners/meshbox.jpg",name:"Meshbox"},{link:"https://prkarma.com/",image:"assets/images/static/partners/PR KARMA CIRCLE 2-01.png",name:"24-7 Press Release"},{link:"https://www.balsambrands.com/",image:"assets/images/static/partners/balsamhill.jpg",name:"Balsam Brands"},{link:"https://twsfoundation.ca",image:"assets/images/static/partners/TWS Master logo-300x300.png",name:"TWS"},{link:"https://www.teamusa.com",image:"assets/images/static/partners/united-states-olympic-committee.png",name:"USOC"},{link:"http://acuityscheduling.com",image:"assets/images/static/partners/Layer_4.jpg",name:"Acuity Scheduling"},{link:"https://www.shirtstoponline.com/",image:"assets/images/static/partners/shirtshoplogo2.png",name:"Shirt Stop"},{link:"http://www.peterson.af.mil",image:"assets/images/static/partners/SBD1.JPG",name:"21st Space Wing"},{link:"https://www.armyfieldband.com/about/ensembles/six-string-soldiers",image:"assets/images/static/partners/sixstringsoldiers.png",name:"Six String Soldiers"},{link:"https://usnwc.edu/Navy-Band-Northeast",image:"assets/images/static/partners/nbne.jpg",name:"Navy Band Northeast"},{link:"http://www.toysfortots.org",image:"assets/images/static/partners/toysfortots.jpg",name:"Marine Toys for Tots Foundation"},{link:"http://www.nadenband.ca",image:"assets/images/static/partners/nadenband.jpg",name:"Naden Band of Maritime Forces Pacific (Victoria, BC)"},{link:"http://www.norad.mil/About-NORAD/Alaskan-NORAD-Region/",image:"assets/images/static/partners/Layer_30.jpg",name:"Alaska NORAD Region"},{link:"http://www.usmma.edu/",image:"assets/images/static/partners/usmma.jpg",name:"U.S. Merchant Marine Academy (Kings Point, NY)"},{link:"http://www.uscg.mil/band/",image:"assets/images/static/partners/uscgband.jpg",name:"U.S. Coast Guard Band (New London, CT)"},{link:"http://www.usafacademyband.af.mil",image:"assets/images/static/partners/usafacademyband.jpg",name:"Air Force Academy Band (Peterson SFB, CO)"},{link:"http://www.norad.mil/AboutNORAD/CanadianNORADRegion.aspx",image:"assets/images/static/partners/canadanorad.jpg",name:"Canadian NORAD Region"},{link:"http://www.puebloriverwalk.org/",image:"assets/images/static/partners/historicpueblo.jpg",name:"Historic Arkansas Riverwalk of Pueblo (Pueblo Riverwalk)"},{link:"https://printshopguy.com/",image:"assets/images/static/partners/Printshopguy_Logo_Square.png",name:"Print Shop Guy"},{link:"https://christmasthisyear.org/",image:"assets/images/static/partners/cty2_logo.jpg",name:"Christmas This Year"},{link:"http://www.norad.mil/AboutNORAD/ContinentalUSNORADRegion.aspx",image:"assets/images/static/partners/conafnorth.jpg",name:"Continental NORAD Region"},{link:"http://www.spacefoundation.org",image:"assets/images/static/partners/spacefoundation.jpg",name:"Space Foundation"},{link:"http://www.portablenorthpole.com/home",image:"assets/images/static/partners/pnp.jpg",name:"Ugroup Media (Portable North Pole)"},{link:"http://www.usafband.af.mil/",image:"assets/images/static/partners/usafband.jpg",name:"USAF Band (Bolling AFB, DC)"},{link:"http://www.heartlandofamericaband.af.mil",image:"assets/images/static/partners/usafbandheartland.jpg",name:"USAF Heartland of America Band (Offutt AFB, NE)"},{link:"http://www.siriusxm.com",image:"assets/images/static/partners/siriusxm.jpg",name:"SiriusXM Radio"},{link:"https://www.packagefromsanta.com",image:"assets/images/static/partners/PackageFromSantaLogo_Dark_transparent_001a.png",name:"PFS"},{link:"http://www.elfontheshelf.com",image:"assets/images/static/partners/eots.jpg",name:"Elf on the Shelf"},{link:"http://www.aerospacedefence.ca",image:"assets/images/static/partners/canadaforces.jpg",name:"Canadian Forces Museum of Aerospace Defence"},{link:"https://www.christmasinthepark.com/",image:"assets/images/static/partners/christmas-in-the-park.png",name:"Christmas In The Park"},{link:"https://scijinks.gov/",image:"assets/images/static/partners/SciJinks.png",name:"SciJinks"},{link:"https://spaceplace.nasa.gov",image:"assets/images/static/partners/spaceplace.png",name:"NASA Space Place"},{link:"https://snowythemouse.com/snowys-north-pole-village/",image:"assets/images/static/partners/SnowyTheMouse.png",name:"Snowy the Mouse"},{link:"https://www.zillow.com/house/santas-house/",image:"assets/images/static/partners/Zillow_Stacked_Blue_RGB.png",name:"Zillow"}]}ngOnInit(){}static{this.\u0275fac=function(J){return new(J||G)}}static{this.\u0275cmp=V.\u0275\u0275defineComponent({type:G,selectors:[["app-partners"]],standalone:!0,features:[V.\u0275\u0275StandaloneFeature],decls:2,vars:1,consts:[["id","partners"],["class","logoContainer",4,"ngFor","ngForOf"],[1,"logoContainer"],["target","_blank",3,"href"],[3,"src","alt"]],template:function(J,se){1&J&&(V.\u0275\u0275elementStart(0,"div",0),V.\u0275\u0275template(1,R,3,3,"div",1),V.\u0275\u0275elementEnd()),2&J&&(V.\u0275\u0275advance(),V.\u0275\u0275property("ngForOf",se.partners))},dependencies:[T.CommonModule,N.NgForOf],styles:["#partners[_ngcontent-%COMP%]   .logoContainer[_ngcontent-%COMP%]{float:none;display:inline-block;margin-right:.5%;margin-top:10px;width:18%;max-width:300px;min-width:120px;background-color:#fff;border-width:7px;border-color:#82e9fa;border-style:solid}#partners[_ngcontent-%COMP%]   .logoContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}#partners[_ngcontent-%COMP%]{clear:both}"]})}}return G})()},6488:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.PrivacyComponent=void 0;const z=w(1635),T=w(7768),V=w(177),N=z.__importStar(w(3953)),R=z.__importStar(w(7768)),M=()=>["/"];C.PrivacyComponent=(()=>{class Y{static{this.\u0275fac=function(se){return new(se||Y)}}static{this.\u0275cmp=N.\u0275\u0275defineComponent({type:Y,selectors:[["app-privacy"]],standalone:!0,features:[N.\u0275\u0275StandaloneFeature],decls:137,vars:2,consts:()=>{let J,se,U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,jr,Do;return J="Privacy Policy",se="Mission of the Website",U="Mission of the Website",_e=" The NORAD Tracks Santa\xAE (hereinafter \"NTS\") program is a North American Aerospace Defense Command (NORAD) Public Affairs (N-NC/PA) community engagement program. It supports the relationship between NORAD and the civilian populace by enhancing and supporting understanding about the mission of NORAD while simultaneously increasing goodwill and community awareness during the December holiday season. To that end, the missions of USNORTHCOM are also enhanced through this program. In existence since 1955, NTS is one of DoD's largest community outreach programs. NTS, through the years, has expanded exponentially through the no-cost support of commercial enterprises. ",Ae="If you are looking for the official source of information about NORAD, please visit",Ne="http://www.norad.mil/",Le="and for USNORTHCOM, see",tt="http://www.northcom.mil/",_t="Contact Information",Bt="Privacy and Security Policy",yt="NORAD Tracks Santa\xAE (NTS) website",Pt="http://www.noradsanta.org",vt="is operated by Microsoft Corporation as a Licensee of NTS and is not a government website although NORAD has created the text for the website. NORAD's privacy policy (see",Gt="https://www.defense.gov/Resources/Privacy/",Ht=") does not apply to this website. More information about the mission of NORAD can be found at",jt="http://www.norad.mil",Yt=" This website does not knowingly collect personal information from children or adults. Neither NORAD nor any of the other Official Licensees who have helped create and support this website or applications will maintain, use or share any personally identifiable information inadvertently obtained through the NTS website or the NTS applications. ",On=" The NTS site is in strict compliance with DoD 5400.11-R, Department of Defense Privacy Program, May 14, 2007 and DoD Directive 5400.11, DoD Privacy Program, May 8, 2007, as amended. ",In=" For site management, information may be collected for statistical purposes. This computer system uses software programs to create summary statistics, which are used for such purposes as assessing what information is of most and least interest, determining technical design specifications, and identifying system performance or problem areas. For site security purposes and to ensure that this service remains available to all users, software programs are employed to monitor network traffic to identify unauthorized attempts to upload or change information, or otherwise cause damage. ",Rn="Children's Online Privacy Protection Act",Nr=" All practices on this site are in compliance with the Children's Online Privacy Protection Act, 15 USC 6501, et seq. We recognize the need to provide additional privacy protections when children visit our site. Children can enjoy content and features on this site without directly providing contact information. Any information provided by users of this website or its applications for the purposes of interactive features such as games, or entering trivia contests, will not be used for any purpose other than to enhance the user's ability to interact on the website. Depending on the application, we may during the course of the NTS program use information provided to respond to a communication requested by the child. If we knowingly collect, use, or disclose contact information collected from a child, we will provide notice and obtain parental consent in accordance with applicable law. ",wr="Visitors to this website are invited to view",Gr="http://onguardonline.gov/articles/0031-kids-privacy",Tn="for tips from the Federal Trade Commission on protecting kids' privacy online.",Nn="Tracking",br=" Visitors to this website and any of its applications will not be \"tracked\" for marketing purposes pursuant to Official Licensee's voluntary compliance with the February 2012 White House Policy entitled \"Consumer Data Privacy in a Networked World\". ",bt="External Links Disclaimer",qt=" The appearance of external hyperlinks or logos, or the use of trade, firm, or corporation names on this website (or any of its corresponding applications) does not constitute endorsement by the Department of Defense, North American Aerospace Defense Command (NORAD), or United States Northern Command of non-U.S. Government sites or the information, products, or services contained therein. NORAD, U.S .Northern Command, and NORAD Tracks Santa do not exercise editorial control over the information that you may find at these locations. Such links are provided consistent with the stated purpose of this website. Please note that the privacy policies of these other websites will be different from this privacy policy. ",fn=" Alerts and/or pop-ups are provided to provide additional notice of this disclaimer. ",Ut=" Third-party websites and applications used on this site or by NTS are integral to the NTS \"tracking Santa\" experience. Various third-party applications are used on this website by our Official Licensees. For example, Radiant Blue created the interactive countdown calendar and interactive games. ",bn="Web Measurement and Customization Technologies (WMCT)",Pn=" In accordance with OMB Memorandum M-10-22, Guidance for Online Use of Web Measurement and Customization Technologies (2010), this site may use WMCT (e.g., cookies) for the purpose of improving DoD services online through conducting measurement and analysis of usage or through customization of the user's experience. ",gr=" This website may use measurement and customization technology known as \"cookies.\" Cookies are used to remember a user's online interactions with a website or online application in order to conduct measurement and analysis of usage or to customize the user's experience. There are two kinds of cookies used on this website. A single-session cookie (Tier 1) is a line of text that is stored temporarily on a user's computer and deleted as soon as the browser is closed. A persistent or multi-session cookie (Tier 2) is saved to a file on a user's hard drive and is called up the next time that user visits a website. ",ui=" The information is not used to track users' individual-level activity on the internet outside of this site. It is not shared with other agencies or partners. It is not used to collect Personally Identifiable Information (PII). ",Oi="Copyright and Trademark Information",Dr=" All content of this website pertaining to the \"mission\" of tracking Santa Claus (to include the map links, games, applications, and artwork) are protected by copyright and trademark laws within the United States. Please contact NORAD Public Affairs if you desire to further distribute or copy the information for profit. If the information (such as videos, images, or photos) is used for entertainment, NORAD Tracks Santa\xAE respectfully requests that you properly credit NORAD Tracks Santa\xAE by using an appropriate byline. ",hr="Bing Maps Privacy Policy",ei="The Bing Maps Service may collect certain information as set forth in the Microsoft Online Privacy Statement, a current copy of which is available at",ra="http://go.microsoft.com/fwlink/?LinkID=248686",Hi="Use of Bing Maps is subject to the Bing Maps TOU at",No="https://www.microsoft.com/en-us/maps/product/terms-april-2011",fo="Questions or Comments?",jr=" If you have any questions or comments about this website, please forward them to NORAD Public Affairs. ",Do="\"We have the watch.\"",[J,se,U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,hr,ei,ra,Hi,No,fo,jr,Do,[1,"popupHQ__wrapper"],[1,"button","b-close"],[3,"routerLink"],["src","assets/images/close.png"],[1,"popupHQ__contentwrapper"],[1,"popupHQ__header"],[1,"popup__header__title"],[1,"popup__header__subtitle"],[1,"popupHQ__content"],["id","PrivacyPolicy","DISABLEdata-appear","fade-in"],[1,"popUpHQ__Content__inner"],[1,"popUpHQ__Content__para","privacypagepadding"],["href","http://www.norad.mil","target","_blank"],["href","http://www.northcom.mil","target","_blank"],["href","http://www.noradsanta.org","target","_blank"],["href","https://www.defense.gov/Resources/Privacy/","target","_blank"],["href","http://onguardonline.gov/articles/0031-kids-privacy","target","_blank",1,"externalDisclaimer"],["href","http://go.microsoft.com/fwlink/?LinkID=248686","target","_blank",1,"externalDisclaimer"],["href","https://www.microsoft.com/en-us/maps/product/terms-april-2011","target","_blank",1,"externalDisclaimer"],[1,"clearfix"],[1,"monitorsHQ--smallmonitors"],[1,"monitorsHQ--smallmonitors--left"],[1,"monitorsHQ--smallmonitors--right"],["id","monitorsHQ--smallmonitors--right--countdown"],["id","defaultCountdownHQ"],[1,"monitorsHQ--smallmonitors--inner"],[1,"monitorsHQ--smallmonitors--center"],[1,"monitorsHQ--smallmonitors--center--inner"],[1,"monitorsHQ--smallmonitors--screentitle"]]},template:function(se,U){1&se&&(N.\u0275\u0275elementStart(0,"div",44)(1,"span",45)(2,"a",46),N.\u0275\u0275element(3,"img",47),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(4,"div",48)(5,"div",49)(6,"h1",50),N.\u0275\u0275i18n(7,0),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(8,"h2",51),N.\u0275\u0275i18n(9,1),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(10,"div",52)(11,"section",53)(12,"div",54)(13,"div",55)(14,"h4"),N.\u0275\u0275i18n(15,2),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(16,"p"),N.\u0275\u0275i18n(17,3),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(18,"p")(19,"span"),N.\u0275\u0275i18n(20,4),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(21,"a",56),N.\u0275\u0275i18n(22,5),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(23,"span"),N.\u0275\u0275i18n(24,6),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(25,"a",57),N.\u0275\u0275i18n(26,7),N.\u0275\u0275elementEnd(),N.\u0275\u0275text(27,". "),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(28,"h4"),N.\u0275\u0275i18n(29,8),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(30,"p"),N.\u0275\u0275element(31,"span")(32,"br")(33,"span")(34,"br")(35,"span")(36,"br")(37,"span")(38,"br")(39,"span")(40,"span")(41,"span"),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(42,"h4"),N.\u0275\u0275i18n(43,9),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(44,"p")(45,"span"),N.\u0275\u0275i18n(46,10),N.\u0275\u0275elementEnd(),N.\u0275\u0275text(47," ( "),N.\u0275\u0275elementStart(48,"a",58),N.\u0275\u0275i18n(49,11),N.\u0275\u0275elementEnd(),N.\u0275\u0275text(50,") "),N.\u0275\u0275elementStart(51,"span"),N.\u0275\u0275i18n(52,12),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(53,"a",59),N.\u0275\u0275i18n(54,13),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(55,"span"),N.\u0275\u0275i18n(56,14),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(57,"a",56),N.\u0275\u0275i18n(58,15),N.\u0275\u0275elementEnd(),N.\u0275\u0275text(59,". "),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(60,"p"),N.\u0275\u0275i18n(61,16),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(62,"p"),N.\u0275\u0275i18n(63,17),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(64,"p"),N.\u0275\u0275i18n(65,18),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(66,"h4"),N.\u0275\u0275i18n(67,19),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(68,"p"),N.\u0275\u0275i18n(69,20),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(70,"p")(71,"span"),N.\u0275\u0275i18n(72,21),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(73,"a",60),N.\u0275\u0275i18n(74,22),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(75,"span"),N.\u0275\u0275i18n(76,23),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(77,"h4"),N.\u0275\u0275i18n(78,24),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(79,"p"),N.\u0275\u0275i18n(80,25),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(81,"h4"),N.\u0275\u0275i18n(82,26),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(83,"p"),N.\u0275\u0275i18n(84,27),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(85,"p"),N.\u0275\u0275i18n(86,28),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(87,"p"),N.\u0275\u0275i18n(88,29),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(89,"h4"),N.\u0275\u0275i18n(90,30),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(91,"p"),N.\u0275\u0275i18n(92,31),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(93,"p"),N.\u0275\u0275i18n(94,32),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(95,"p"),N.\u0275\u0275i18n(96,33),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(97,"h4"),N.\u0275\u0275i18n(98,34),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(99,"p"),N.\u0275\u0275i18n(100,35),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(101,"h4"),N.\u0275\u0275i18n(102,36),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(103,"p")(104,"span"),N.\u0275\u0275i18n(105,37),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(106,"a",61),N.\u0275\u0275i18n(107,38),N.\u0275\u0275elementEnd(),N.\u0275\u0275text(108,". "),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(109,"p")(110,"span"),N.\u0275\u0275i18n(111,39),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(112,"a",62),N.\u0275\u0275i18n(113,40),N.\u0275\u0275elementEnd(),N.\u0275\u0275text(114,". "),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(115,"h4"),N.\u0275\u0275i18n(116,41),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(117,"p"),N.\u0275\u0275i18n(118,42),N.\u0275\u0275elementEnd()()()()(),N.\u0275\u0275element(119,"div",63),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(120,"div",64),N.\u0275\u0275element(121,"div",65),N.\u0275\u0275elementStart(122,"div",66)(123,"section",67),N.\u0275\u0275element(124,"div",68),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(125,"div",69)(126,"div",70)(127,"div",71)(128,"h2",72),N.\u0275\u0275i18n(129,43),N.\u0275\u0275elementEnd()()()()()(),N.\u0275\u0275elementStart(130,"div"),N.\u0275\u0275element(131,"br")(132,"br")(133,"br")(134,"br")(135,"br")(136,"br"),N.\u0275\u0275elementEnd()),2&se&&(N.\u0275\u0275advance(2),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(1,M)))},dependencies:[V.CommonModule,T.RouterModule,R.RouterLink],styles:['.popupHQ__wrapper[_ngcontent-%COMP%]{height:auto;min-height:100%;width:100%;position:relative;background-image:url(MountainBG1366x768.5a420045aba4299f.jpg);background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:fixed;padding:10px}.popupHQ__contentwrapper[_ngcontent-%COMP%]{background:url(hqdigihud1179x565.220c3c2fcfd2a908.png) no-repeat center center;background-attachment:scroll;background-color:#001d39;transition:all .3s ease;border:11px solid rgba(20,20,20,.8);border-radius:9px;background-position-y:50px;background-size:cover;inset:10px 10px 60px}.popupHQ__content[_ngcontent-%COMP%]{overflow:visible;height:auto;padding:0 5.5em;color:#aaa}.popUpHQ__Content__inner[_ngcontent-%COMP%]{margin:20px}.popUpHQ__Content__para[_ngcontent-%COMP%]{line-height:1.5em;font-size:1.6em}.popUpHQ__Content__para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .popUpHQ__Content__para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:underline;font-family:museo_sans100}.popUpHQ__Content__para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:currentColor;display:block}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px;display:inline-block}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#25e393;fill:#25e393}.timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2em;margin:0 3px 0 15px}.popupHQ__header[_ngcontent-%COMP%]   .b-close[_ngcontent-%COMP%]{top:5px;position:fixed}.popupHQ__header--scrolled[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1em;line-height:0}.contactus__list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#b5f3fc;display:inline-block;height:5em;padding-top:1.5em;padding-left:6em;background-repeat:no-repeat;background-position:left top;background-size:5em 5em;position:relative}.contactus__list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.contactvia__email[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .contactvia__phone[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em!important;border:0!important;position:absolute;left:0}.monitorsHQ--smallmonitors[_ngcontent-%COMP%]{position:fixed;height:105px;bottom:0;z-index:100;width:100%;background:url(table-bottom.ed7746bea80bec5a.png) repeat-x bottom}.monitorsHQ--smallmonitors--inner[_ngcontent-%COMP%]{margin:auto;width:40%}.monitorsHQ--smallmonitors--center--inner[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:100%;background:url(NoradLogo.cb496306b565ec3f.png) no-repeat;background-size:174px auto;background-position-y:70%}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%]{position:fixed;left:0;bottom:18px;width:370px;height:150px;background:url(Monitors_left.5eb85b795e61b29c.png) no-repeat left;background-size:100% auto}.monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{position:fixed;right:0;bottom:8px;width:324px;height:220px;background:url(Monitors_right.44cfafca684ac11a.png) no-repeat right;background-size:100% auto}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{display:inline-block;position:relative;height:100px;width:100%;border-top:7px solid;border-bottom:7px solid #050406;text-align:center;white-space:nowrap;background-color:#777}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:after, .monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:before{position:absolute;content:"";top:-7px;bottom:0;height:100px;width:50%;z-index:-1;background-color:#777}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:before{left:-5px;border-left:7px solid #050406;border-bottom:7px solid #050406;transform-origin:left top;transform:skew(-20deg)}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]:after{right:-5px;border-right:7px solid #050406;border-bottom:7px solid #050406;transform-origin:right top;transform:skew(20deg)}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{text-transform:uppercase;color:#b5f3fc;font-size:.93em;font-weight:100;margin-left:175px;padding-top:20px}.popUpHQ__Content__para[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:7px solid #B5F3FC}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--fittoscreen[_ngcontent-%COMP%]{width:100%;max-width:700px}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--noborder[_ngcontent-%COMP%]{border:none}@media screen and (min-width: 1600px){.popupHQ__wrapper[_ngcontent-%COMP%]{background-image:url(MountainBG1920x1080.27827a64ad4c45a8.jpg)}.popupHQ__contentwrapper[_ngcontent-%COMP%]{background:url(hqdigihud1820x872.320382c52fae2d00.png) no-repeat center center;background-attachment:fixed;background-color:#205485;transition:all .3s ease;border:11px solid #1f242a;border-radius:9px;background-position-y:70px;background-size:100% auto,cover}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%]{position:fixed;background:url(Monitors_left.5eb85b795e61b29c.png) no-repeat left;background-size:100% auto}.monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{position:fixed;right:0;bottom:8px;width:405px;height:275px;background:url(Monitors_right.44cfafca684ac11a.png) no-repeat right;background-size:100% auto}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{font-size:1.4em}#defaultCountdownHQ[_ngcontent-%COMP%]{margin:30px 60px}}@media only screen and (max-device-width: 480px),(max-width: 480px){.popupHQ__wrapper[_ngcontent-%COMP%]{background-color:#205485;background-image:none;padding:0}.popupHQ__contentwrapper[_ngcontent-%COMP%]{border:none;border-radius:0;inset:3em 0 0}.popupHQ__header[_ngcontent-%COMP%]{position:fixed;top:0;display:block;width:100%;background-color:transparent;padding:0;box-shadow:0 5px 10px #00000080}.popupHQ__content[_ngcontent-%COMP%]{background-image:url(hqdigihud550x650.e6545c5fb7b9a057.png);padding:0 1em}.popupHQ__content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.25em;margin-bottom:1em}.monitorsHQ--smallmonitors[_ngcontent-%COMP%]{position:fixed;height:80px;width:100%;background-image:none;left:50%;margin-left:-50%;text-align:center}.popupHQ__Navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.popupHQ__content[_ngcontent-%COMP%]{padding:0 1.5em 3em}.popUpHQ__Content__inner[_ngcontent-%COMP%]{margin:4em 0 0}.popUpHQ__Content__para[_ngcontent-%COMP%]{margin-bottom:3em;font-size:1em}.popUpHQ__Content__para[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;float:none!important;margin:5px 0 20px 5px;height:auto}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--noborder[_ngcontent-%COMP%]{border:none}.popUpHQ__Content__para[_ngcontent-%COMP%]   img.img--actualsize[_ngcontent-%COMP%]{width:auto;height:auto}.contactus__list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:1em;padding-left:5em;background-position:left top;background-size:4em 6em}.monitorsHQ--smallmonitors--inner[_ngcontent-%COMP%]{width:auto;left:0;bottom:0}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{font-size:.8em;white-space:normal;word-wrap:normal;padding-top:10px;padding-right:30px;line-height:1.25em;display:inline-block;width:75%;text-align:center;margin-top:0;position:relative;right:42px}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{display:inline-block;position:relative;height:auto;width:77%;text-align:center;white-space:nowrap}.monitorsHQ--smallmonitors--center--inner[_ngcontent-%COMP%]{height:100%;width:100%;font-size:.93em;margin-left:0;padding-top:0;text-align:right;background-size:123px auto;background-position:left 5px}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 767px),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 767px),only screen and (max-device-width: 640px),(min-resolution: 192dpi) and (max-device-width: 767px){.popupHQ__wrapper[_ngcontent-%COMP%]{height:auto;min-height:100%;width:100%;position:relative;background-image:url(MountainBG1366x768.5a420045aba4299f.jpg);background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:fixed;padding:10px}.popupHQ__contentwrapper[_ngcontent-%COMP%]{border-width:0;border-radius:0;inset:3em 0 27px}.popupHQ__header[_ngcontent-%COMP%]{position:fixed;top:0;display:block;width:100%;background-color:transparent;padding:0;box-shadow:0 5px 10px #00000080}.popupHQ__Navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.monitorsHQ--smallmonitors[_ngcontent-%COMP%]{height:60px}.monitorsHQ--smallmonitors--left[_ngcontent-%COMP%], .monitorsHQ--smallmonitors--right[_ngcontent-%COMP%]{display:none}.monitorsHQ--smallmonitors--inner[_ngcontent-%COMP%]{width:90%}.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{width:90%;left:5%}.monitorsHQ--smallmonitors--center--inner[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:100%;background:url(NoradLogo.cb496306b565ec3f.png) no-repeat;background-size:112px auto}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{padding-top:15px}.navHQ[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{display:none}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 769px) and (orientation: portrait),only screen and (max-device-width: 640px) and (orientation: portrait),(min-resolution: 192dpi) and (max-device-width: 769px) and (orientation: portrait){.monitorsHQ--smallmonitors--center[_ngcontent-%COMP%]{left:0}.monitorsHQ--smallmonitors--screentitle[_ngcontent-%COMP%]{padding-top:10px;margin-left:150px}}']})}}return Y})()},4336:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.SantaHistoryComponent=void 0;const z=w(1635),T=w(7768),V=w(177),N=z.__importStar(w(3953)),R=z.__importStar(w(7768)),M=z.__importStar(w(177)),G=()=>["/library"];function Y(_e,Ae){if(1&_e){const Ne=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"button",43),N.\u0275\u0275listener("click",function(){N.\u0275\u0275restoreView(Ne);const tt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(tt.playVirginia())}),N.\u0275\u0275text(1,"Play"),N.\u0275\u0275elementEnd()}}function K(_e,Ae){if(1&_e){const Ne=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"button",44),N.\u0275\u0275listener("click",function(){N.\u0275\u0275restoreView(Ne);const tt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(tt.playVirginia())}),N.\u0275\u0275text(1,"Stop"),N.\u0275\u0275elementEnd()}}function J(_e,Ae){if(1&_e){const Ne=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"button",45),N.\u0275\u0275listener("click",function(){N.\u0275\u0275restoreView(Ne);const tt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(tt.playEditor())}),N.\u0275\u0275text(1,"Play"),N.\u0275\u0275elementEnd()}}function se(_e,Ae){if(1&_e){const Ne=N.\u0275\u0275getCurrentView();N.\u0275\u0275elementStart(0,"button",46),N.\u0275\u0275listener("click",function(){N.\u0275\u0275restoreView(Ne);const tt=N.\u0275\u0275nextContext();return N.\u0275\u0275resetView(tt.playEditor())}),N.\u0275\u0275text(1,"Stop"),N.\u0275\u0275elementEnd()}}C.SantaHistoryComponent=(()=>{class _e{constructor(){this.virginiaPlaying=!1,this.editorPlaying=!1}ngOnInit(){}playVirginia(){this.virginiaPlaying=!this.virginiaPlaying}playEditor(){this.editorPlaying=!this.editorPlaying}static{this.\u0275fac=function(Le){return new(Le||_e)}}static{this.\u0275cmp=N.\u0275\u0275defineComponent({type:_e,selectors:[["app-santa-history"]],standalone:!0,features:[N.\u0275\u0275StandaloneFeature],decls:81,vars:6,consts:()=>{let Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In;return Ne="ABOUT SANTA",Le="IS HE REAL?",tt=" Santa Claus is known by many names, including Saint Nick... ",_t=" It may be that the Santa we know today emerged from the legacy of Saint Nicholas... ",Bt=" Virginia's letter, written in December 1897, is the most famous example... ",yt="Listen to Virginia's famous letter",Pt="Listen to the Editor's response to Virginia's letter",vt=" Based on historical data and more than 50 years of NORAD tracking information... ",Gt="HIS MAGICAL JOURNEY",Ht=" Santa keeps a long list of children who have been good throughout the year... ",jt=" Check out the world's population right now ",Yt=" Though his list gets longer, Santa still has to deliver all of the presents... ",On=" Santa would never rush the important job of distributing presents... ",In=" Long before the Wright brothers flew the first airplane... ",[Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,[1,"popup__wrapper",2,"min-height","100vh"],["aria-label","Back to Library","role","button","tabindex","0",3,"routerLink"],["role","button","aria-label","Go Back","tabindex","0",1,"button","library-b-back"],["src","assets/images/backBtn.png","alt","Back Button"],[1,"navContentTitle"],["id","library__content--about",1,"library__content"],[1,"library__bgbook--top"],[1,"library__bgbook--right"],["src","assets/images/pop/library/librarybook-right.svg","alt","Library book illustration"],[1,"page__subtitle"],[1,"navContentSubTitle"],[1,"book__spread"],[1,"book__page"],["src","assets/images/pop/library/photos/st-nicholas.png","alt","Portrait of Saint Nicholas"],["src","assets/images/pop/library/photos/MerryOldSanta.png","alt","Old Santa illustration"],["id","audioVirginia"],["aria-label","Play Virginia's Letter",3,"click",4,"ngIf"],["aria-label","Stop Playing Virginia's Letter",3,"click",4,"ngIf"],["id","audioEditor"],["aria-label","Play Editor's Response",3,"click",4,"ngIf"],["aria-label","Stop Playing Editor's Response",3,"click",4,"ngIf"],["src","assets/images/pop/library/photos/virginialetter.png","alt","Virginia's Letter"],["src","assets/images/pop/library/photos/childrenhearts.png","alt","Children with hearts illustration"],["target","_blank","href","http://www.census.gov/popclock/",1,"externalDisclaimer"],["src","assets/images/pop/library/photos/childrenpop.png","alt","World population illustration"],["src","assets/images/pop/library/photos/presents.png","alt","Santa's presents"],["src","assets/images/pop/library/photos/truemystery.png","alt","True mystery illustration"],["src","assets/images/pop/library/photos/reindeer.png","alt","Flying reindeer illustration"],["id","weeElf","aria-hidden","true",1,"spotimg","spotimg--library"],["aria-label","Play Virginia's Letter",3,"click"],["aria-label","Stop Playing Virginia's Letter",3,"click"],["aria-label","Play Editor's Response",3,"click"],["aria-label","Stop Playing Editor's Response",3,"click"]]},template:function(Le,tt){1&Le&&(N.\u0275\u0275elementStart(0,"div",14)(1,"a",15)(2,"div",16),N.\u0275\u0275element(3,"img",17),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(4,"div")(5,"h1",18),N.\u0275\u0275i18n(6,0),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(7,"section",19),N.\u0275\u0275element(8,"div",20),N.\u0275\u0275elementStart(9,"div",21),N.\u0275\u0275element(10,"img",22),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(11,"div",23)(12,"div",24)(13,"span"),N.\u0275\u0275i18n(14,1),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(15,"div",25)(16,"div",26)(17,"p"),N.\u0275\u0275i18n(18,2),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(19,"div",26),N.\u0275\u0275element(20,"img",27),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(21,"div",25)(22,"div",26),N.\u0275\u0275element(23,"img",28),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(24,"div",26)(25,"p"),N.\u0275\u0275i18n(26,3),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(27,"div",25)(28,"div",26)(29,"p"),N.\u0275\u0275i18n(30,4),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(31,"p"),N.\u0275\u0275i18n(32,5),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(33,"div",29),N.\u0275\u0275template(34,Y,2,0,"button",30)(35,K,2,0,"button",31),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(36,"p"),N.\u0275\u0275i18n(37,6),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(38,"div",32),N.\u0275\u0275template(39,J,2,0,"button",33)(40,se,2,0,"button",34),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(41,"div",26),N.\u0275\u0275element(42,"img",35),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(43,"div",25)(44,"div",26),N.\u0275\u0275element(45,"img",36),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(46,"div",26)(47,"p"),N.\u0275\u0275i18n(48,7),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(49,"div",23)(50,"div",24)(51,"span"),N.\u0275\u0275i18n(52,8),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(53,"div",25)(54,"div",26)(55,"p")(56,"span"),N.\u0275\u0275i18n(57,9),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(58,"a",37),N.\u0275\u0275i18n(59,10),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(60,"div",26),N.\u0275\u0275element(61,"img",38),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(62,"div",25)(63,"div",26),N.\u0275\u0275element(64,"img",39),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(65,"div",26)(66,"p"),N.\u0275\u0275i18n(67,11),N.\u0275\u0275elementEnd()()(),N.\u0275\u0275elementStart(68,"div",25)(69,"div",26)(70,"p"),N.\u0275\u0275i18n(71,12),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(72,"div",26),N.\u0275\u0275element(73,"img",40),N.\u0275\u0275elementEnd()(),N.\u0275\u0275elementStart(74,"div",25)(75,"div",26),N.\u0275\u0275element(76,"img",41),N.\u0275\u0275elementEnd(),N.\u0275\u0275elementStart(77,"div",26)(78,"p"),N.\u0275\u0275i18n(79,13),N.\u0275\u0275elementEnd()()()(),N.\u0275\u0275element(80,"div",42),N.\u0275\u0275elementEnd()()),2&Le&&(N.\u0275\u0275advance(),N.\u0275\u0275property("routerLink",N.\u0275\u0275pureFunction0(5,G)),N.\u0275\u0275advance(33),N.\u0275\u0275property("ngIf",!tt.virginiaPlaying),N.\u0275\u0275advance(),N.\u0275\u0275property("ngIf",tt.virginiaPlaying),N.\u0275\u0275advance(4),N.\u0275\u0275property("ngIf",!tt.editorPlaying),N.\u0275\u0275advance(),N.\u0275\u0275property("ngIf",tt.editorPlaying))},dependencies:[T.RouterModule,R.RouterLink,V.CommonModule,M.NgIf],styles:["p[_ngcontent-%COMP%]{font-size:x-large;line-height:1.5em}.library__content[_ngcontent-%COMP%]{background-image:url(librarybook-spine.685c9aba8df474ad.png);background-position:top left;background-repeat:repeat-y;background-size:40% auto;left:2vw;position:relative;background-color:#f6fbfd;padding:2em 5.5em 2em 8.5em;min-height:85vh;max-width:83vw}@media (min-width: 1600px){.library__content[_ngcontent-%COMP%]{padding-left:11em}}#library__content--about[_ngcontent-%COMP%]{font-family:museo_sans300,sans-serif;font-size:1.6em;color:#000;line-height:1.25em;padding-right:1.5em}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e12836;text-decoration:none}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e12836;text-decoration:underline}.library__bgbook--top[_ngcontent-%COMP%]{position:absolute;top:-22px;right:0;height:22px;width:100%;overflow:hidden;background:url(librarybook-top.052f6fc0fcaca86e.svg) no-repeat;background-position:right top;background-size:60% 100%}.library__bgbook--right[_ngcontent-%COMP%]{position:absolute;top:0;right:-28px;width:28px;height:100%;overflow:hidden;background:url(librarybook-right.a917951f8b2c2a2e.svg) no-repeat;background-position:right top;background-size:100% 100%}.book__spread[_ngcontent-%COMP%]{background-image:url(pagecontent-divider.cc6e64d03e33db54.svg);background-position:center bottom;background-size:auto;background-repeat:no-repeat;padding:50px 0;display:inline-block;width:100%}.book__page[_ngcontent-%COMP%]{width:49.5%;margin:0;padding:0 3%;float:left;text-align:center}.book__page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left;margin-top:20px}.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.3em;font-weight:700}.skypeContentContainer[_ngcontent-%COMP%]   .navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400;width:95%;display:inline-block}.navContentSubTitle[_ngcontent-%COMP%]{text-align:left;margin-bottom:20px;margin-top:30px}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.25em;font-weight:700}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:125px;height:auto;max-width:27%;margin:3px}.library-b-back[_ngcontent-%COMP%]{position:absolute;right:21px;top:3px;cursor:pointer;z-index:290}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.navContentSubTitle[_ngcontent-%COMP%]{margin-left:0}@media (max-width: 1150px){.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.navContentSubTitle[_ngcontent-%COMP%]{text-align:left;margin:0 0 30px;font-size:1.1em}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 769px) and (orientation: portrait),only screen and (max-device-width: 640px) and (orientation: portrait),(min-resolution: 192dpi) and (max-device-width: 769px) and (orientation: portrait){.library__content[_ngcontent-%COMP%]{padding:0 5%}.book__spread[_ngcontent-%COMP%]{padding-right:0}.library__bgbook--right[_ngcontent-%COMP%]{display:none}.book__page[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-device-width: 480px),(max-width: 480px){.library__content[_ngcontent-%COMP%]{padding:2em 5%}.book__spread[_ngcontent-%COMP%]{padding-right:0}.library__bgbook--right[_ngcontent-%COMP%]{display:none}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__spread[_ngcontent-%COMP%] > .book__page[_ngcontent-%COMP%]:last-child{margin-top:19%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}.navContentSubTitle[_ngcontent-%COMP%]{margin-left:0}}"]})}}return _e})()},8229:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.CountriesService=void 0;const T=w(1635).__importStar(w(3953));C.CountriesService=(()=>{class N{constructor(){this.countries=[{name:"Germany",code2:"DE",code3:"DEU",latitude:51,longitude:9,tradition:"<p i18n>There is so much celebrating that it has to begin on December 6th, St. Nicholas Day. As in many other European countries, on the eve of Dec. 6th children place a shoe or boot by the fireplace. During the night, St. Nicholas, the patron saint of children, hops from house to house carrying a book of sins in which all of the misdeeds of the children are written. If they have been good, he fills the shoe or boot with delicious holiday edibles. If they have not been good, their shoe is filled with twigs.</p>",flag:"assets/images/pop/library/traditions/germanyFlag.png"},{name:"Italy",code2:"IT",code3:"ITA",latitude:42.5,longitude:12.5,tradition:" <p i18n>On Christmas Eve, Italian children hang their stockings by the chimney where it remains empty until Jan. 6, the Befana day (also known as the Epiphany,) when the befana (during the night) fills it with sweets or coal, depending on whether the children were good or naughty. (The Befana is an old woman (witch) that flies on a broom; she is considered nice and kind.)</p>",flag:"assets/images/pop/library/traditions/italyFlag.png"},{name:"Spain",code2:"ES",code3:"ESP",latitude:40,longitude:-4,tradition:"<p i18n>Christmas dinner is never eaten until after midnight. Christmas Day is spent at church, at feasts and in more merry-making. It is not Santa who comes to Spain bearing gifts, but the Three Wise Men. [Children stuff their shoes with straw for the Magi's camels and receive gifts in return.]</p>",flag:"assets/images/pop/library/traditions/spainFlag.png"},{name:"Mexico",code2:"MX",code3:"MEX",latitude:23.63,longitude:-102.53,tradition:'<p i18n>On Christmas Eve, small children dressed as shepherds stand on either side of the nativity scene while members of the company kneel and sing a litany, after which the Christ Child is lulled to sleep with the cradle song, "El Rorro" (Babe in Arms). At midnight the birth of Christ is announced with fireworks, ringing bells and blowing whistles. Devout worshipers surge into churches to attend the famous "Misa de Gallo" or "Mass of the Rooster." Following Mass, families return home for a tremendous dinner of traditional Mexican foods. Christmas Day has no special celebration though many have adopted the American style Christmas with a Christmas tree and Santa Claus.</p>',flag:"assets/images/pop/library/traditions/mexicoFlag.png"},{name:"France",code2:"FR",code3:"FRA",latitude:46.64,longitude:2.34,tradition:'<p i18n>Family celebrations begin with the decoration of the Christmas tree a few days before Christmas; candles and lights, tinsel and many colored stars are attached to it. On Christmas Eve when the children are asleep, little toys, candies and fruits are hung on the branches of the tree as a supplement to the gifts Santa Claus has left in the shoes before the fireplace. Puppet shows are also given every year for Christmas. At midnight everyone attends the Christmas mass. When the family returns home after midnight mass, there is a late supper known as "le r\'veillon." Ordinarily, young children do not attend midnight mass with their parents, but go to bed early to dream of their Christmas gifts. Before going to bed, they put their shoes by the fireside for a gift from "le p\'re de Noel" or "le petit Jesus."</p>',flag:"assets/images/pop/library/traditions/franceFlag.png"},{name:"Japan",code2:"JP",code3:"JPN",latitude:36,longitude:138,tradition:"<p i18n>The Nativity scene is given a corner in every Christian house. They also have turkey for Christmas dinner, Christmas trees, evergreens and mistletoe in their stores and homes and even Hoeiosho, the Japanese equivalent of Santa Claus, who is a Buddhist monk bearing gifts for the children. The family members exchange gifts and send cards with the true heart of giving. Japan's Christmas traditions for Japanese Christians are to spend the day for worship, and charity for the poor and sick. The children perform plays re-enacting the Nativity scene on Christmas Eve. Unique Christmas traditions of Japan are Christmas Cakes, Fried Chicken, and Daiku.</p>",flag:"assets/images/pop/library/traditions/japanFlag.png"},{name:"China",code2:"CN",code3:"CHN",latitude:35.51,longitude:104.08,tradition:'<p i18n>Christians in China celebrate by lighting their houses with beautiful paper lanterns and decorating their Christmas trees, which they call "Trees of Light," with paper chains, paper flowers, and paper lanterns. Chinese children hang muslin stockings and await a visit from Santa Claus, whom they call Dun Che Lao Ren (dwyn-chuh-lau-oh-run) which means "Christmas Old Man."</p>',flag:"assets/images/pop/library/traditions/chinaFlag.png"},{name:"Russia",code2:"RU",code3:"RUS",latitude:60,longitude:100,tradition:"<p i18n>Russia content</p>",flag:"assets/images/pop/library/traditions/russiaFlag.png"},{name:"Brazil",code2:"BR",code3:"BRA",latitude:-10,longitude:-55,tradition:"<p i18n>Brazil content</p>",flag:"assets/images/pop/library/traditions/brazilFlag.png"},{name:"Australia",code2:"AU",code3:"AUS",latitude:-27,longitude:133,tradition:"<p i18n>Australia content</p>",flag:"assets/images/pop/library/traditions/australiaFlag.png"},{name:"Israel",code2:"IL",code3:"ISR",latitude:31.3,longitude:34.45,tradition:"<p i18n>Israel content</p>",flag:"assets/images/pop/library/traditions/israelFlag.png"},{name:"India",code2:"IN",code3:"IND",latitude:20,longitude:77,tradition:"<p i18n>India content</p>",flag:"assets/images/pop/library/traditions/indiaFlag.png"},{name:"Saudi Arabia",code2:"SA",code3:"SAU",latitude:25,longitude:45,tradition:"<p i18n>Saudi Arabia content</p>",flag:"assets/images/pop/library/traditions/saudiFlag.png"},{name:"Kenya",code2:"KE",code3:"KEN",latitude:1,longitude:38,tradition:"<p i18n>Kenya content</p>",flag:"assets/images/pop/library/traditions/kenyaFlag.png"},{name:"Sweden",code2:"SE",code3:"SWE",latitude:62,longitude:15,tradition:"<p i18n>Sweden content</p>",flag:"assets/images/pop/library/traditions/swedenFlag.png"},{name:"England",code2:"GB",code3:"GBR",latitude:52.53,longitude:-1.26,tradition:"<p i18n>England content</p>",flag:"assets/images/pop/library/traditions/englandFlag.png"},{name:"Iceland",code2:"IS",code3:"ISL",latitude:65,longitude:-18,tradition:"<p i18n>Iceland content</p>",flag:"assets/images/pop/library/traditions/icelandFlag.png"},{name:"Canada",code2:"CA",code3:"CAN",latitude:55,longitude:-95,tradition:"<p i18n>Canada content</p>",flag:"assets/images/pop/library/traditions/canadaFlag.png"},{name:"United States of America",code2:"US",code3:"USA",latitude:38,longitude:-97,tradition:"<p i18n>United States content</p>",flag:"assets/images/pop/library/traditions/unitedstatesFlag.png"}]}static{this.\u0275fac=function(G){return new(G||N)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}return N})()},4368:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.MusicService=void 0;const z=w(1635),T=w(5312),V=z.__importStar(w(3953));C.MusicService=(()=>{class R{constructor(){this._selectedSongIndex=0,this._playing=!1,this.audio=new Audio,this.playlist={iPlaylist:[{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/santaclausiscomingtotown.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/santaclausiscomingtotown.ogg",title:"Santa Claus is Coming to Town",artist:"Rampart Winds",duration:"00:02:26",album:"Holiday Music for NORAD Tracks Santa",image:"assets/images/static/partners/Academy.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/herecomessantaclaus.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/herecomessantaclaus.ogg",title:"Here Comes Santa Claus",artist:"The NORAD Commanders",duration:"00:01:51",album:"NORAD Tracks Santa",image:"assets/images/static/partners/NORAD Tracks Santa Album.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/goodkingwenceslas.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/goodkingwenceslas.ogg",title:"Good King Wenceslas",artist:"Meshbox Music",duration:"00:02:18",album:"Toon Santa's Christmas Classics Volume 2",image:"assets/images/static/partners/meshbox.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/hanginroundthemistletoe.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/hanginroundthemistletoe.ogg",title:"Hangin Round the Mistletoe",artist:"Wild Blue Country",duration:"00:02:39",album:"Holiday Music for NORAD Tracks Santa",image:"assets/images/static/partners/Academy.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/santaclausisbackintown.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/santaclausisbackintown.ogg",title:"Santa Claus is Back in Town",artist:"Pegasus",duration:"00:03:13",album:"Holiday Music for NORAD Tracks Santa",image:"assets/images/static/partners/USAF.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/whatchildisthis.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/whatchildisthis.ogg",title:"What Child is This",artist:"Protocol Combo",duration:"00:04:08",album:"Holiday Music for NORAD Tracks Santa",image:"assets/images/static/partners/nbne.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/winterwonderlandnorad.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/winterwonderlandnorad.ogg",title:"Winter Wonderland Norad",artist:"The NORAD Commanders",duration:"00:02:39",album:"NORAD Tracks Santa",image:"assets/images/static/partners/NORAD Tracks Santa Album.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/letitsnowletitsnow.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/letitsnowletitsnow.ogg",title:"Let it Snow Let it Snow Let it Snow",artist:"Blue Steel",duration:"00:02:46",album:"Holiday Music for NORAD Tracks Santa",image:"assets/images/static/partners/USAF.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/winterwonderland.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/winterwonderland.ogg",title:"Winter Wonderland",artist:"Falconaires",duration:"00:01:49",album:"Holiday Music for NORAD Tracks Santa",image:"assets/images/static/partners/Academy.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/cantique_de_noel.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/cantique_de_noel.ogg",title:"Cantique de Noel",artist:"US Air Force Academy Band",duration:"00:02:38",album:"Joy To The World",image:"assets/images/static/partners/Academy.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/that_night_in_bethlehem.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/that_night_in_bethlehem.ogg",title:"That Night in Bethlehem",artist:"US Air Force Academy Band",duration:"00:03:39",album:"Joy To The World",image:"assets/images/static/partners/Academy.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/coolyule.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/coolyule.ogg",title:"Cool Yule",artist:"Naden Band",duration:"00:02:53",album:"NORAD Track Santa",image:"assets/images/static/partners/nadenband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/itsbeginningtolookalotlikechristmas.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/itsbeginningtolookalotlikechristmas.ogg",title:"It's Beginning To Look A Lot Like Christmas",artist:"Naden Band",duration:"00:02:27",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nadenband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/littledrummerboy.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/littledrummerboy.ogg",title:"Little Drummer Boy",artist:"Naden Band",duration:"00:03:12",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nadenband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/silentnight.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/silentnight.ogg",title:"Silent Night",artist:"Naden Band",duration:"00:03:13",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nadenband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/sleighride.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/sleighride.ogg",title:"Sleigh Ride",artist:"Naden Band",duration:"00:02:53",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nadenband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/thebestgift.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/thebestgift.ogg",title:"The Best Gift",artist:"Naden Band",duration:"00:03:13",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nadenband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/achristmasfanfare.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/achristmasfanfare.ogg",title:"A Christmas Fanfare",artist:"US Coast Guard Band",duration:"00:03:28",album:"Holiday Fanfare",image:"assets/images/static/partners/uscgband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/miracleon34thstreet.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/miracleon34thstreet.ogg",title:"Miracle on 34th Street",artist:"US Coast Guard Band",duration:"00:06:11",album:"Holiday Fanfare",image:"assets/images/static/partners/uscgband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/jinglebells.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/jinglebells.ogg",title:"Jingle Bells",artist:"US Coast Guard Band",duration:"00:03:51",album:"Holiday Fanfare",image:"assets/images/static/partners/uscgband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/achristmasfestival.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/achristmasfestival.ogg",title:"A Christmas Festival",artist:"US Coast Guard Band",duration:"00:07:14",album:"Holiday Fanfare",image:"assets/images/static/partners/uscgband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/happybirthday.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/happybirthday.ogg",title:"Happy Birthday",artist:"US Merchant Marine Academy Band",duration:"00:00:45",album:"Oceans of Glory: The Regimental Band of the United States Merchant Marine Academy",image:"assets/images/static/partners/usmma.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/battlehymnoftherepublic.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/battlehymnoftherepublic.ogg",title:"Battle Hymn of the Republic",artist:"US Merchant Marine Academy Band",duration:"00:04:12",album:"Oceans of Glory: The Regimental Band of the United States Merchant Marine Academy",image:"assets/images/static/partners/usmma.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/thebigapplemarch.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/thebigapplemarch.ogg",title:"The Big Apple March",artist:"US Merchant Marine Academy Band",duration:"00:05:45",album:"Heroes of New York",image:"assets/images/static/partners/usmma.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/12daysofchristmas.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/12daysofchristmas.ogg",title:"12 Days of Christmas",artist:"Meshbox Music",duration:"00:04:49",album:"Toon Santa's Christmas Classics Volume 2",image:"assets/images/static/partners/meshbox.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/deckthehall.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/deckthehall.ogg",title:"Deck the Halls",artist:"Meshbox Music",duration:"00:01:34",album:"Toon Santa's Christmas Classics",image:"assets/images/static/partners/meshbox.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/12%20Days%20of%20Christmas%20-%20USAF%20Heritage%20of%20America%20Band.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/12%20Days%20of%20Christmas%20-%20USAF%20Heritage%20of%20America%20Band.ogg",title:"12 Days of Christmas",artist:"USAF Heritage of America Band",duration:"00:04:18",album:"Peace On Earth",image:"assets/images/static/partners/Heartland.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/18-Wheel%20Chrome%20and%20Steel%20Sleigh%20-%20Six-String%20Soldiers.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/18-Wheel%20Chrome%20and%20Steel%20Sleigh%20-%20Six-String%20Soldiers.ogg",title:"18-Wheel Chrome and Steel Sleigh",artist:"Six-String Soldiers",duration:"00:02:58",album:"18 Wheel Chrome and Steel Sleigh",image:"assets/images/static/partners/sixstringsoldiers.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Carol%20of%20the%20Bells%20-%20USAF%20Band.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Carol%20of%20the%20Bells%20-%20USAF%20Band.ogg",title:"Carol of the Bells",artist:"USAF Band",duration:"00:03:37",album:"Spirit of hte Season IV",image:"assets/images/static/partners/USAF.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Chanukah%20Celebration%20-%20Navy%20Band%20Northeast.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Chanukah%20Celebration%20-%20Navy%20Band%20Northeast.ogg",title:"Chanukah Celebration",artist:"Navy Band Northeast",duration:"00:05:07",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nbne.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Funk%20Lang%20Syne%20-%20USAFE%20Band.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Funk%20Lang%20Syne%20-%20USAFE%20Band.ogg",title:"Funk Lang Syne",artist:"USAFE Band",duration:"00:00:57",album:"Broadcast Music Beds",image:"assets/images/static/partners/usafband.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Good%20Swing%20Wenceslas%20-%20Navy%20Band%20Northeast.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Good%20Swing%20Wenceslas%20-%20Navy%20Band%20Northeast.ogg",title:"Good Swing Wenceslas",artist:"Navy Band Northeast",duration:"00:03:55",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nbne.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Greensleeves%20-%20Navy%20Band%20Northeast.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Greensleeves%20-%20Navy%20Band%20Northeast.ogg",title:"Greensleeves",artist:"Navy Band Northeast",duration:"00:06:25",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nbne.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/March%20of%20the%20Toys%20-%20Navy%20Band%20Northeast.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/March%20of%20the%20Toys%20-%20Navy%20Band%20Northeast.ogg",title:"March of the Toys",artist:"Navy Band Northeast",duration:"00:04:08",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nbne.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Sleigh%20Ride%20-%20Navy%20Band%20Northeast.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Sleigh%20Ride%20-%20Navy%20Band%20Northeast.ogg",title:"Sleigh Ride",artist:"Navy Band Northeast",duration:"00:03:03",album:"NORAD Tracks Santa",image:"assets/images/static/partners/nbne.jpg"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Christmas%20Overture%20-%20ACC%20Heartland%20of%20America%20Band.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/ogg/Christmas%20Overture%20-%20ACC%20Heartland%20of%20America%20Band.ogg",title:"Christmas Overture",artist:"USAF Heritage of America Band",duration:"00:06:32",album:"Christmas from the Heartland",image:"assets/images/static/partners/Heartland.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Frosty%20the%20Snowman.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Frosty%20the%20Snowman.mp3",title:"Frosty the Snowman",artist:"RCAF Band",duration:"00:03:41",album:"NORAD Tracks Santa",image:"assets/images/static/partners/RCAF Band Logo A.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Jingle%20Bells.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Jingle%20Bells.mp3",title:"Jingle Bells",artist:"RCAF Band",duration:"00:02:47",album:"NORAD Tracks Santa",image:"assets/images/static/partners/RCAF Band Logo A.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/What%20Christmas%20Means%20to%20Me.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/mp3/What%20Christmas%20Means%20to%20Me.mp3",title:"What Christmas Means to Me",artist:"RCAF Band",duration:"00:02:49",album:"NORAD Tracks Santa",image:"assets/images/static/partners/RCAF Band Logo A.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Winter%20Wonderland.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/mp3/Winter%20Wonderland.mp3",title:"Winter Wonderland",artist:"RCAF Band",duration:"00:02:55",album:"NORAD Tracks Santa",image:"assets/images/static/partners/RCAF Band Logo A.png"},{mp3:T.environment.mediaApiUrl+"/norad-web-audio/mp3/You_re%20A%20Mean%20One,%20Mr.%20Grinch.mp3",oga:T.environment.mediaApiUrl+"/norad-web-audio/mp3/You_re%20A%20Mean%20One,%20Mr.%20Grinch.mp3",title:"You're a Mean One, Mr. Grinch",artist:"RCAF Band",duration:"00:02:25",album:"NORAD Tracks Santa",image:"assets/images/static/partners/RCAF Band Logo A.png"}]}}getSelectedIndex(){return this._selectedSongIndex}setSelectedIndex(G){this._selectedSongIndex=G}getIsPlaying(){return this._playing}setIsPlaying(G){this._playing=G}static{this.\u0275fac=function(Y){return new(Y||R)}}static{this.\u0275prov=V.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}return R})()},8842:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.TimerService=void 0;const z=w(1635),T=w(1626),V=w(5312),N=w(3184),R=z.__importStar(w(3953)),M=z.__importStar(w(1626));C.TimerService=(()=>{class Y{constructor(J){this.http=J,this.env=V.environment,this.dDay=new Date("Dec 24 "+(new Date).getUTCFullYear()+" 09:00:00"),this.milliSecondsInASecond=1e3,this.hoursInADay=24,this.minutesInAnHour=60,this.SecondsInAMinute=60,this.HTTPOptionsForText={headers:new T.HttpHeaders({"Content-Type":"application/json"}),responseType:"text"},this.showVillage=11==(new Date).getUTCMonth()}getTime(){return this.http.get(this.env.timerApiUrl,this.HTTPOptionsForText).pipe((0,N.retryBackoff)({initialInterval:100,maxRetries:12,resetOnSuccess:!0}))}getTimeDifference(){this.showVillage=11==this.dateNow.getMonth(),this.countdownExpired=this.dateNow>=this.dDay,this.timeDifference=this.dDay.getTime()-this.dateNow.getTime(),this.allocateTimeUnits(this.timeDifference),this.showChatbot=this.daysToDday<7&&0==this.countdownExpired}hasCountdownExpired(){return this.countdownExpired}allocateTimeUnits(J){this.secondsToDday=Math.floor(J/this.milliSecondsInASecond%this.SecondsInAMinute),this.secondsToDday<0&&(this.secondsToDday=0),this.minutesToDday=Math.floor(J/(this.milliSecondsInASecond*this.minutesInAnHour)%this.SecondsInAMinute),this.minutesToDday<0&&(this.minutesToDday=0),this.hoursToDday=Math.floor(J/(this.milliSecondsInASecond*this.minutesInAnHour*this.SecondsInAMinute)%this.hoursInADay),this.hoursToDday<0&&(this.hoursToDday=0),this.daysToDday=Math.floor(J/(this.milliSecondsInASecond*this.minutesInAnHour*this.SecondsInAMinute*this.hoursInADay)),this.daysToDday<0&&(this.daysToDday=0)}static{this.\u0275fac=function(se){return new(se||Y)(R.\u0275\u0275inject(M.HttpClient))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:Y,factory:Y.\u0275fac,providedIn:"root"})}}return Y})()},4576:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.SiteMusicControlsComponent=void 0;const z=w(1635),T=z.__importStar(w(3953)),V=z.__importStar(w(4368));C.SiteMusicControlsComponent=(()=>{class R{constructor(G){this.musicService=G}getIsPlaying(){return this.musicService.getIsPlaying()}getPlaylist(){return this.musicService.playlist.iPlaylist}getSelectedIndex(){return this.musicService.getSelectedIndex()}songSelected(G){this.musicService.setIsPlaying(!0),this.musicService.setSelectedIndex(G),this.pauseAudio(),this.playAudio()}playAudio(){this.musicService.audio.src=this.musicService.playlist.iPlaylist[this.musicService.getSelectedIndex()].mp3,this.musicService.audio.load(),this.musicService.audio.play()}pauseAudio(){this.musicService.audio.pause()}nextSong(){this.musicService.getSelectedIndex()<this.musicService.playlist.iPlaylist.length-2?this.musicService.setSelectedIndex(this.musicService.getSelectedIndex()+1):this.musicService.setSelectedIndex(0),this.playAudio()}previousSong(){this.musicService.getSelectedIndex()>0?this.musicService.setSelectedIndex(this.musicService.getSelectedIndex()-1):this.musicService.setSelectedIndex(this.musicService.playlist.iPlaylist.length-1),this.playAudio()}togglePlay(){this.musicService.setIsPlaying(!this.musicService.getIsPlaying())}ngOnInit(){}static{this.\u0275fac=function(Y){return new(Y||R)(T.\u0275\u0275directiveInject(V.MusicService))}}static{this.\u0275cmp=T.\u0275\u0275defineComponent({type:R,selectors:[["app-site-music-controls"]],standalone:!0,features:[T.\u0275\u0275StandaloneFeature],decls:51,vars:6,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",2,"display","none"],["id","play_button","viewBox","0 0 64 64"],["cx","32","cy","32","r","30"],["points","22.1,18.2 46.2,32.1 22.2,46.2 ",1,"playpausepunchout"],["id","pause_button","viewBox","0 0 64 64"],["cx","32","cy","32","r","30",1,"st0"],["d","M24.3,46.2L24.3,46.2c-1.4,0-2.5-1.1-2.5-2.5v-23c0-1.4,1.1-2.5,2.5-2.5l0,0c1.4,0,2.5,1.1,2.5,2.5v23\nC26.8,45.1,25.6,46.2,24.3,46.2z",1,"playpausepunchout"],["d","M39.3,46.2L39.3,46.2c-1.4,0-2.5-1.1-2.5-2.5v-23c0-1.4,1.1-2.5,2.5-2.5l0,0c1.4,0,2.5,1.1,2.5,2.5v23\nC41.8,45.1,40.6,46.2,39.3,46.2z",1,"playpausepunchout"],["id","fwd_button","viewBox","0 0 30 30"],["points","3.1,1.2 27.1,15.1 3.2,29.2 "],["d","M25.3,29.2L25.3,29.2c-1.4,0-2.5-1.1-2.5-2.5v-23c0-1.4,1.1-2.5,2.5-2.5l0,0c1.4,0,2.5,1.1,2.5,2.5v23\nC27.8,28.1,26.6,29.2,25.3,29.2z"],["id","rev_button","viewBox","0 0 30 30"],["points","27.8,29.2 3.8,15.3 27.7,1.2 "],["d","M5.6,1.2L5.6,1.2c1.4,0,2.5,1.1,2.5,2.5v23c0,1.4-1.1,2.5-2.5,2.5l0,0c-1.4,0-2.5-1.1-2.5-2.5v-23\nC3.1,2.3,4.3,1.2,5.6,1.2z"],["id","musicContainer",1,"musicContainer"],[1,"musicContainer_inner"],[1,"musicContainer_left"],[3,"hidden"],["id","musicContainer_eq","src","assets/images/control/musiccontrol/equalizer_off_dr.gif","alt","Music equalizer off"],["id","musicContainer_eq","src","assets/images/control/musiccontrol/equalizer_on_dr.gif","alt","Music equalizer on"],[1,"musicContainer_player"],[1,"musicContainer_PlayControls",2,"user-select","none"],[2,"background-color","transparent","border","none","cursor","pointer",3,"click"],["id","revbutton",1,"music-icon","music-icon-rev"],[0,"xlink","href","#rev_button"],["id","pausebutton",1,"music-icon-lg",3,"click"],[0,"xlink","href","#pause_button"],["id","playbutton",1,"music-icon-lg",3,"click"],[0,"xlink","href","#play_button"],["id","fwdbutton",1,"music-icon","music-icon-fwd"],[0,"xlink","href","#fwd_button"],[1,"musicContainer_right"],[2,"float","right"],[1,"playlistCollection"],[1,"ddaMusicPlayer","ddaMusicPlayer--open"],[1,"musicTrackAndNodeContainer"],[1,"floatLeft"],[1,"music-icon"],[0,"xlink","href","#icon-musicstage"],[1,"musicContainer__title"],[1,"musicContainer__artist"],[1,"popup__nav__playlist",2,"display","none"],["id","audio"]],template:function(Y,K){1&Y&&(T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(0,"svg",0)(1,"defs")(2,"symbol",1),T.\u0275\u0275element(3,"circle",2)(4,"polygon",3),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(5,"symbol",4),T.\u0275\u0275element(6,"circle",5)(7,"path",6)(8,"path",7),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(9,"symbol",8),T.\u0275\u0275element(10,"polygon",9)(11,"path",10),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(12,"symbol",11),T.\u0275\u0275element(13,"polygon",12)(14,"path",13),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(15,"section",14)(16,"div",15)(17,"div",16)(18,"div",17),T.\u0275\u0275element(19,"img",18),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(20,"div",17),T.\u0275\u0275element(21,"img",19),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(22,"div",20)(23,"div",21)(24,"button",22),T.\u0275\u0275listener("click",function(){return K.previousSong()}),T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(25,"svg",23),T.\u0275\u0275element(26,"use",24),T.\u0275\u0275elementEnd()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(27,"button",22),T.\u0275\u0275listener("click",function(){return K.togglePlay()}),T.\u0275\u0275elementStart(28,"div",17),T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(29,"svg",25),T.\u0275\u0275listener("click",function(){return K.pauseAudio()}),T.\u0275\u0275element(30,"use",26),T.\u0275\u0275elementEnd()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(31,"div",17),T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(32,"svg",27),T.\u0275\u0275listener("click",function(){return K.playAudio()}),T.\u0275\u0275element(33,"use",28),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(34,"button",22),T.\u0275\u0275listener("click",function(){return K.nextSong()}),T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(35,"svg",29),T.\u0275\u0275element(36,"use",30),T.\u0275\u0275elementEnd()()()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(37,"div",31)(38,"div",32)(39,"div",33),T.\u0275\u0275element(40,"div",34),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(41,"div",35)(42,"div",36),T.\u0275\u0275namespaceSVG(),T.\u0275\u0275elementStart(43,"svg",37),T.\u0275\u0275element(44,"use",38),T.\u0275\u0275elementEnd()(),T.\u0275\u0275namespaceHTML(),T.\u0275\u0275elementStart(45,"div",39),T.\u0275\u0275text(46),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(47,"div",40),T.\u0275\u0275text(48),T.\u0275\u0275elementEnd()(),T.\u0275\u0275element(49,"div",41),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275element(50,"audio",42),T.\u0275\u0275elementEnd()),2&Y&&(T.\u0275\u0275advance(18),T.\u0275\u0275property("hidden",K.getIsPlaying()),T.\u0275\u0275advance(2),T.\u0275\u0275property("hidden",!K.getIsPlaying()),T.\u0275\u0275advance(8),T.\u0275\u0275property("hidden",!K.getIsPlaying()),T.\u0275\u0275advance(3),T.\u0275\u0275property("hidden",K.getIsPlaying()),T.\u0275\u0275advance(15),T.\u0275\u0275textInterpolate(K.getPlaylist()[K.getSelectedIndex()].title),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(K.getPlaylist()[K.getSelectedIndex()].artist))},styles:[".popup__content_li__metadata__title[_ngcontent-%COMP%]{font-size:1.4em;clear:both;color:#113b63;line-height:50px;vertical-align:middle}.popup__content_li__header__album[_ngcontent-%COMP%], .popup__content_li__metadata__album[_ngcontent-%COMP%]{color:#273353}.popup__navwrapper[_ngcontent-%COMP%]{display:block;width:65%;margin:1em auto 0;padding:20px 20px 20px 60px;text-align:center}@media (max-width: 940px){.popup__navwrapper[_ngcontent-%COMP%]{display:block;width:100%;margin:0;padding:5px}.popup__content[_ngcontent-%COMP%]{width:95%}.playlist__icon[_ngcontent-%COMP%]{width:20%;margin:0 10px}.playlistmusic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:30px;width:95%}}@media only screen and (max-device-width: 480px),(max-width: 480px){.popup__nav__playlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:10px 0 10px -24px;text-align:left}.playlistmusic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{max-width:100%;width:100%;font-size:1.1em;float:none;text-align:unset;margin:1.1em 0;text-align:left;line-height:10px}.playlistmusic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle;width:90px;height:auto;margin-right:10px}.popup__content_li__metadata__title[_ngcontent-%COMP%]{font-size:1.4em;clear:both;color:#113b63;line-height:20px;vertical-align:middle}.popup__content_li__metadata__artist[_ngcontent-%COMP%]{font-size:1.1em;line-height:20px}.popup__content_li__metadata__album[_ngcontent-%COMP%]{font-size:.9em;padding-top:40px}}"]})}}return R})()},8635:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.SleighInformationComponent=void 0;const z=w(1635),T=w(7768),V=z.__importStar(w(3953)),N=z.__importStar(w(7768)),R=()=>["/library"];C.SleighInformationComponent=(()=>{class G{static{this.\u0275fac=function(J){return new(J||G)}}static{this.\u0275cmp=V.\u0275\u0275defineComponent({type:G,selectors:[["app-sleigh-information"]],standalone:!0,features:[V.\u0275\u0275StandaloneFeature],decls:105,vars:2,consts:()=>{let K,J,se,U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr;return K="REGARDING SANTA'S SLEIGH",J="Probable First Flight",se="Dec. 24, 343 A.D.",U="Home Base",_e="North Pole",Ae="Weight at takeoff",Ne="75,000 gd (gumdrops)",Le="Passenger weight at takeoff",tt="Santa Claus 260 pounds",_t="Weight of gifts at takeoff",Bt="60,000 tons",yt="Weight at landing",Pt="80,000 gd (ice & snow accumulation)",vt="Passenger weight at landing",Gt="1,260 pounds",Ht="Propulsion",jt="Nine (9) rp (reindeer power)",Yt="Armament",On="Antlers (purely defensive)",In="Fuel",Rn="Hay, oats, and carrots (for reindeer)",Nr="Emissions",wr="Classified",Gr="Climbing speed",Tn="One \"T\" (Twinkle of an eye)",Nn="Max speed",br="Faster than starlight",bt="Santa's Sleigh",qt="Length",fn="75 cc (candy canes) / 150 lp (lollipops)",Ut="Width",bn="40 cc / 80 lp",Pn="Height",gr="55 cc / 110 lp",ui="Note: Length, width, and height are without reindeer",Oi="Designer & Builder",Dr="K. Kringle & Elves, Inc.",[K,J,se,U,_e,Ae,Ne,Le,tt,_t,Bt,yt,Pt,vt,Gt,Ht,jt,Yt,On,In,Rn,Nr,wr,Gr,Tn,Nn,br,bt,qt,fn,Ut,bn,Pn,gr,ui,Oi,Dr,[1,"popup__wrapper",2,"min-height","100vh"],["aria-label","Back to Library","role","button","tabindex","0",3,"routerLink"],["role","button","aria-label","Go Back","tabindex","0",1,"button","library-b-back"],["src","assets/images/backBtn.png","alt","Back Button"],[1,"navContentTitle"],["id","library__content--regarding","aria-labelledby","regarding-title",1,"library__content"],[1,"library__bgbook--top"],[1,"library__bgbook--right"],[1,"book__spread"],[1,"sleigh-diagram__additional-info"],["src","assets/images/pop/library/sleigh_1_ilinksystems.png","srcset","assets/images/pop/library/sleigh_1_ilinksystems.png 900w, assets/images/pop/library/sleigh_1_ilinksystems@2x.png 1800w","alt","Diagram of Santa's Sleigh",1,"sleigh-spotimg"],[1,"sleigh-diagram__weights"],[1,"sleigh-diagram__capabilities"],[1,"sleigh-diagram"],[1,"sleigh-diagram__topcard"],[1,"blueprint__title"],["id","regarding-title"],[1,"sleigh-diagram__feature-photo"],["src","assets/images/pop/library/sled-side.png","alt","Side view of Santa's sleigh",1,"sleigh-diagram__sled-side"],["src","assets/images/pop/library/sled-front.png","alt","Front view of Santa's sleigh",1,"sleigh-diagram__sled-front"],[1,"sleigh-diagram__measurements--length"],[1,"sleigh-diagram__measurements--width"],[1,"sleigh-diagram__measurements--height"],[1,"sleigh-diagram__measurement-footnote"],[1,"sleigh-diagram__credits"],[1,"sleigh-credits__builders"],["id","weeElf","aria-hidden","true",1,"spotimg","spotimg--library"]]},template:function(J,se){1&J&&(V.\u0275\u0275elementStart(0,"div",37)(1,"a",38)(2,"div",39),V.\u0275\u0275element(3,"img",40),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(4,"div")(5,"h1",41),V.\u0275\u0275i18n(6,0),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(7,"section",42),V.\u0275\u0275element(8,"div",43)(9,"div",44),V.\u0275\u0275elementStart(10,"div",45)(11,"div",46),V.\u0275\u0275element(12,"img",47),V.\u0275\u0275elementStart(13,"div",48)(14,"dl")(15,"dt"),V.\u0275\u0275i18n(16,1),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(17,"dd"),V.\u0275\u0275i18n(18,2),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(19,"dt"),V.\u0275\u0275i18n(20,3),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(21,"dd"),V.\u0275\u0275i18n(22,4),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(23,"dt"),V.\u0275\u0275i18n(24,5),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(25,"dd"),V.\u0275\u0275i18n(26,6),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(27,"dt"),V.\u0275\u0275i18n(28,7),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(29,"dd"),V.\u0275\u0275i18n(30,8),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(31,"dt"),V.\u0275\u0275i18n(32,9),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(33,"dd"),V.\u0275\u0275i18n(34,10),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(35,"dt"),V.\u0275\u0275i18n(36,11),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(37,"dd"),V.\u0275\u0275i18n(38,12),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(39,"dt"),V.\u0275\u0275i18n(40,13),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(41,"dd"),V.\u0275\u0275i18n(42,14),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(43,"div",49)(44,"dl")(45,"dt"),V.\u0275\u0275i18n(46,15),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(47,"dd"),V.\u0275\u0275i18n(48,16),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(49,"dt"),V.\u0275\u0275i18n(50,17),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(51,"dd"),V.\u0275\u0275i18n(52,18),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(53,"dt"),V.\u0275\u0275i18n(54,19),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(55,"dd"),V.\u0275\u0275i18n(56,20),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(57,"dt"),V.\u0275\u0275i18n(58,21),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(59,"dd"),V.\u0275\u0275i18n(60,22),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(61,"dt"),V.\u0275\u0275i18n(62,23),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(63,"dd"),V.\u0275\u0275i18n(64,24),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(65,"dt"),V.\u0275\u0275i18n(66,25),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(67,"dd"),V.\u0275\u0275i18n(68,26),V.\u0275\u0275elementEnd()()()()(),V.\u0275\u0275elementStart(69,"div",50)(70,"div",51)(71,"div",52)(72,"h4",53),V.\u0275\u0275i18n(73,27),V.\u0275\u0275elementEnd()(),V.\u0275\u0275elementStart(74,"div",54),V.\u0275\u0275element(75,"img",55)(76,"img",56),V.\u0275\u0275elementStart(77,"div",57)(78,"dl")(79,"dt"),V.\u0275\u0275i18n(80,28),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(81,"dd"),V.\u0275\u0275i18n(82,29),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(83,"div",58)(84,"dl")(85,"dt"),V.\u0275\u0275i18n(86,30),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(87,"dd"),V.\u0275\u0275i18n(88,31),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(89,"div",59)(90,"dl")(91,"dt"),V.\u0275\u0275i18n(92,32),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(93,"dd"),V.\u0275\u0275i18n(94,33),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(95,"div",60)(96,"span"),V.\u0275\u0275i18n(97,34),V.\u0275\u0275elementEnd()()(),V.\u0275\u0275elementStart(98,"div",61)(99,"dl",62)(100,"dt"),V.\u0275\u0275i18n(101,35),V.\u0275\u0275elementEnd(),V.\u0275\u0275elementStart(102,"dd"),V.\u0275\u0275i18n(103,36),V.\u0275\u0275elementEnd()()()()()(),V.\u0275\u0275element(104,"div",63),V.\u0275\u0275elementEnd()()),2&J&&(V.\u0275\u0275advance(),V.\u0275\u0275property("routerLink",V.\u0275\u0275pureFunction0(1,R)))},dependencies:[T.RouterModule,N.RouterLink],styles:['p[_ngcontent-%COMP%]{font-size:x-large;line-height:1.5em}.library__content[_ngcontent-%COMP%]{background-image:url(librarybook-spine.685c9aba8df474ad.png);background-position:top left;background-repeat:repeat-y;background-size:40% auto;left:2vw;position:relative;background-color:#f6fbfd;padding:2em 5.5em 2em 8.5em;min-height:85vh;max-width:83vw}@media (min-width: 1600px){.library__content[_ngcontent-%COMP%]{padding-left:11em}}#library__content--about[_ngcontent-%COMP%], #library__content--regarding[_ngcontent-%COMP%]{font-family:museo_sans300,sans-serif;font-size:1.6em;color:#000;line-height:1.25em;padding-right:1.5em}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e12836;text-decoration:none}.library__content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e12836;text-decoration:underline}.library__bgbook--top[_ngcontent-%COMP%]{position:absolute;top:-22px;right:0;height:22px;width:100%;overflow:hidden;background:url(librarybook-top.052f6fc0fcaca86e.svg) no-repeat;background-position:right top;background-size:60% 100%}.library__bgbook--right[_ngcontent-%COMP%]{position:absolute;top:0;right:-28px;width:28px;height:100%;overflow:hidden;background:url(librarybook-right.a917951f8b2c2a2e.svg) no-repeat;background-position:right top;background-size:100% 100%}.book__spread[_ngcontent-%COMP%]{background-image:url(pagecontent-divider.cc6e64d03e33db54.svg);background-position:center bottom;background-size:auto;background-repeat:no-repeat;padding:50px 0;display:inline-block;width:100%}.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.3em;font-weight:700}.skypeContentContainer[_ngcontent-%COMP%]   .navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400;width:95%;display:inline-block}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-size:1.25em;font-weight:700}.sleigh-diagram[_ngcontent-%COMP%]{position:relative;border:1px solid #333;color:#fff;background-color:#205485;background-image:url(blueprint-gridbg.c8e5abbbee9ac220.png),radial-gradient(ellipse at center,#205485,#38b3f6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="$medium-blue",endColorstr="$electric-blue",GradientType=1);background-position:center center,center center;background-repeat:repeat,no-repeat;margin-top:80px}.sleigh-diagram__topcard[_ngcontent-%COMP%]{position:relative;margin:10px;border:4px solid #ffffff}.blueprint__title[_ngcontent-%COMP%]{border-bottom:2px solid white;position:relative}.blueprint__title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.75em;font-weight:400;line-height:1.05em;text-align:center;padding:.25em}.sleigh-diagram[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{font-weight:700}.sleigh-diagram__credits[_ngcontent-%COMP%]{width:100%;border-top:2px solid #ffffff;padding:20px 40px}.sleigh-credits__builders[_ngcontent-%COMP%]{text-align:center;font-size:1.25em;line-height:1.5em}.sleigh-diagram__feature-photo[_ngcontent-%COMP%]{position:relative;top:0;padding:100px 0 0 14.67%}.sleigh-diagram__feature-photo[_ngcontent-%COMP%]   .sleigh-diagram__sled-side[_ngcontent-%COMP%]{width:49.1221%;margin-right:4.9888%;padding-left:2%;border-left:1px dashed #ffffff}.sleigh-diagram__feature-photo[_ngcontent-%COMP%]   .sleigh-diagram__sled-front[_ngcontent-%COMP%]{width:23.2844%}.sleigh-diagram__measurements--length[_ngcontent-%COMP%], .sleigh-diagram__measurements--width[_ngcontent-%COMP%]{border:1px dashed #ffffff;border-top:none;border-bottom:none;text-align:center;width:49.1221%;float:left}.sleigh-diagram[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%], .sleigh-diagram__measurements--length[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .sleigh-diagram__measurements--length[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], .sleigh-diagram__measurements--width[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .sleigh-diagram__measurements--width[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], .sleigh-diagram__measurements--height[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .sleigh-diagram__measurements--height[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{display:inline-block;margin:0 1em 0 0;padding:0;-webkit-margin-start:0;width:100%}.sleigh-diagram__measurements--height[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .sleigh-diagram__measurements--height[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{width:auto}.sleigh-diagram__measurements--width[_ngcontent-%COMP%]{border:1px dashed #ffffff;border-top:none;border-bottom:none;width:23.2844%;margin-left:4.9888%}.sleigh-diagram__measurements--height[_ngcontent-%COMP%]{border-left:none;border-right:none;position:absolute;top:57px;width:auto;text-align:left;margin-left:-10%}.sleigh-diagram__measurement-footnote[_ngcontent-%COMP%]{text-align:right;margin-bottom:15px;margin-right:20px;margin-top:150px;font-size:.75em}.sleigh-diagram__additional-info[_ngcontent-%COMP%]{float:none;width:100%}.sleigh-diagram__weights[_ngcontent-%COMP%], .sleigh-diagram__capabilities[_ngcontent-%COMP%]{width:auto;display:block;margin:0;padding:0}.sleigh-diagram__additional-info[_ngcontent-%COMP%]{margin-left:10%;font-weight:700;width:auto}.sleigh-diagram__additional-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], .sleigh-diagram__additional-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{display:block;margin-right:1em;width:100%;line-height:1.25;font-size:.75em}.sleigh-diagram__additional-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{margin-top:.75em;font-size:1em}.sleigh-spotimg[_ngcontent-%COMP%]{float:right;margin:0 100px 3em 2em;background-color:#205485;padding:30px 20px;border:8px solid #ffffff;border-bottom-width:40px;box-shadow:0 5px 15px #777;transform:rotate(-5deg);-webkit-transform:rotate(-5deg);width:50%}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:125px;height:auto;max-width:27%;margin:3px}.library-b-back[_ngcontent-%COMP%]{position:absolute;right:21px;top:3px;cursor:pointer;z-index:290}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}.sleigh-diagram__additional-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], .sleigh-diagram__additional-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{width:88%}@media (max-width: 1150px){.navContentTitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.navContentTitle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#176db6;font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.navContentSubTitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .navContentSubTitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:museo_sans500,calibri,arial,sans-serif;font-weight:700}.sleigh-diagram__feature-photo[_ngcontent-%COMP%]{font-size:.75em}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}@media only screen and (-min-device-pixel-ratio: 1.5) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 2) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 3) and (max-device-width: 769px) and (orientation: portrait),only screen and (-min-device-pixel-ratio: 1.25) and (max-device-width: 769px) and (orientation: portrait),only screen and (max-device-width: 640px) and (orientation: portrait),(min-resolution: 192dpi) and (max-device-width: 769px) and (orientation: portrait){.library__content[_ngcontent-%COMP%]{padding:0 5%}#library__content--about[_ngcontent-%COMP%], #library__content--regarding[_ngcontent-%COMP%], .book__spread[_ngcontent-%COMP%]{padding-right:0}.library__bgbook--right[_ngcontent-%COMP%]{display:none}}@media only screen and (max-device-width: 480px),(max-width: 480px){.library__content[_ngcontent-%COMP%]{padding:2em 5%}#library__content--about[_ngcontent-%COMP%], #library__content--regarding[_ngcontent-%COMP%], .book__spread[_ngcontent-%COMP%]{padding-right:0}.library__bgbook--right[_ngcontent-%COMP%]{display:none}.spotimg[_ngcontent-%COMP%]{z-index:230}.traditionPhotos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:96%;margin:2%}.book__spread[_ngcontent-%COMP%] > .book__page[_ngcontent-%COMP%]:last-child{margin-top:19%}.book__page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}.sleigh-diagram__additional-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], .sleigh-diagram__additional-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{width:88%}}']})}}return G})()},4334:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.SocialMediaComponent=void 0;const T=w(1635).__importStar(w(3953));C.SocialMediaComponent=(()=>{class N{constructor(){}ngOnInit(){}static{this.\u0275fac=function(G){return new(G||N)}}static{this.\u0275cmp=T.\u0275\u0275defineComponent({type:N,selectors:[["app-social-media"]],standalone:!0,features:[T.\u0275\u0275StandaloneFeature],decls:17,vars:0,consts:[["id","section-header-socialmedia-icons",2,"line-height","1px"],[1,"socialList","style2"],["id","imgtw"],["target","_blank","href","https://www.twitter.com/NoradSanta","tabindex","0",1,"externalDisclaimer"],["id","imgfb"],["target","_blank","href","https://www.facebook.com/noradsanta","tabindex","0",1,"externalDisclaimer"],["id","imgyt"],["target","_blank","href","https://www.youtube.com/channel/UCraEo3em2y6izLUQl-gPXNg","tabindex","0",1,"externalDisclaimer"],["id","imgis"],["target","_blank","href","https://www.instagram.com/noradtrackssanta_official ","tabindex","0",1,"externalDisclaimer"],["id","imgnl"],["target","_blank","href","https://noradsantanews.com/newsroom","tabindex","0",1,"externalDisclaimer"]],template:function(G,Y){1&G&&(T.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),T.\u0275\u0275text(4,"x"),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(5,"li",4)(6,"a",5),T.\u0275\u0275text(7,"Facebook"),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(8,"li",6)(9,"a",7),T.\u0275\u0275text(10,"YouTube"),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(11,"li",8)(12,"a",9),T.\u0275\u0275text(13,"Instagram"),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(14,"li",10)(15,"a",11),T.\u0275\u0275text(16,"NORAD Newsline"),T.\u0275\u0275elementEnd()()()())},styles:["#section-header-socialmedia-icons[_ngcontent-%COMP%]{margin:0 0 13%}#section-header-socialmedia-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:relative;padding:0 0 0 20px}#section-header-socialmedia-icons[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:54px;height:54px;margin:0 2% 0 0;padding:0;list-style:none;background:url(noradfooter_sprite.91c5d012e4c302fd.png) 0 0;display:inline-block;cursor:pointer;text-indent:0;font-size:0}#section-header-socialmedia-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:54px;height:54px;display:block}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgfb[_ngcontent-%COMP%]{background-position:0 0}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgfb[_ngcontent-%COMP%]:hover{background-position:0 -55px}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgtw[_ngcontent-%COMP%]{background-position:-55px 0}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgtw[_ngcontent-%COMP%]:hover{background-position:-55px -55px}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgyt[_ngcontent-%COMP%]{background-position:-110px 0}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgyt[_ngcontent-%COMP%]:hover{background-position:-110px -55px}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgis[_ngcontent-%COMP%]:hover{background-position:-220px -55px}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgis[_ngcontent-%COMP%]{background-position:-220px 0}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgnl[_ngcontent-%COMP%]{background-position:-608px 0}#section-header-socialmedia-icons[_ngcontent-%COMP%]   #imgnl[_ngcontent-%COMP%]:hover{background-position:-608px -55px}@media (max-width: 1200px){#section-header-socialmedia-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{transform:scale(.8);margin-left:-15px}}@media (max-width: 940px){#section-header-socialmedia-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{transform:scale(.6);padding-left:0;margin-left:-40px}}"]})}}return N})()},2128:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.WelcomeComponent=void 0;const T=w(1635).__importStar(w(3953));C.WelcomeComponent=(()=>{class N{static{this.\u0275fac=function(G){return new(G||N)}}static{this.\u0275cmp=T.\u0275\u0275defineComponent({type:N,selectors:[["app-welcome"]],standalone:!0,features:[T.\u0275\u0275StandaloneFeature],decls:31,vars:0,consts:()=>{let M,G,Y,K;return M="Come back Dec. 1",G="To see what NORAD does the rest of the year,",Y="visit us at",K="FOLLOW US!",[M,G,Y,K,["id","content"],["id","noradLogo"],["id","comeBack"],["id","noradLink"],["href","http://www.norad.mil"],["id","socialLinks"],["id","followUs"],["id","socialIcons"],["href","https://www.twitter.com/NoradSanta","target","_blank","rel","noopener",1,"socialIcon"],["alt","NORAD Santa on X","src","assets/images/control/icon/x_logo.svg",1,"welcomeLogo"],["id","facebook","href","https://www.facebook.com/noradsanta","target","_blank","rel","noopener","title","Visit NORAD Santa on Facebook",1,"socialIcon"],["id","youtube","href","http://www.youtube.com/NORADTracksSanta","target","_blank","rel","noopener","title","Visit NORAD Tracks Santa on YouTube",1,"socialIcon"],["id","instagram","href","https://www.instagram.com/noradtrackssanta_official/?hl=en","target","_blank","rel","noopener",1,"socialIcon"],["id","newline360","href","https://noradsantanews.com/newsroom","target","_blank","rel","noopener","title","Visit NORAD Santa News",1,"socialIcon"],["href","https://www.promoplace.com/noradsantatrackergear/","target","_blank","rel","noopener",1,"socialIcon"],["alt","Shirt Shop Link","src","assets/images/static/partners/shirtshoplogo2.png",1,"welcomeLogo"],["id","world"]]},template:function(G,Y){1&G&&(T.\u0275\u0275elementStart(0,"div",4),T.\u0275\u0275element(1,"div",5),T.\u0275\u0275elementStart(2,"div",6)(3,"span"),T.\u0275\u0275i18n(4,0),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(5,"div",7)(6,"div")(7,"span"),T.\u0275\u0275i18n(8,1),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(9,"div")(10,"span"),T.\u0275\u0275i18n(11,2),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(12,"span"),T.\u0275\u0275text(13,"\xa0"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(14,"span")(15,"a",8),T.\u0275\u0275text(16,"NORAD.mil"),T.\u0275\u0275elementEnd(),T.\u0275\u0275text(17,"."),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275elementStart(18,"div",9)(19,"div",10),T.\u0275\u0275i18n(20,3),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(21,"div",11)(22,"a",12),T.\u0275\u0275element(23,"img",13),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(24,"a",14)(25,"a",15)(26,"a",16)(27,"a",17),T.\u0275\u0275elementStart(28,"a",18),T.\u0275\u0275element(29,"img",19),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275element(30,"div",20),T.\u0275\u0275elementEnd())},styles:['/*! HTML5 Boilerplate v4.3.0 | MIT License | http://h5bp.com/ */html,button,input,select,textarea{color:#222}html{font-size:1em;line-height:1.4}::selection{background:#b3d4fc;text-shadow:none}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}audio,canvas,img,video{vertical-align:middle}fieldset{border:0;margin:0;padding:0}textarea{resize:vertical}.browsehappy{margin:.2em 0;background:#ccc;color:#000;padding:.2em 0}@font-face{font-family:museo1;src:url(museosans_100-webfont.94dfd6c410fdf69b.eot);src:url(museosans_100-webfont.94dfd6c410fdf69b.eot?#iefix) format("embedded-opentype"),url(museosans_100-webfont.ba04004ac575dd84.woff) format("woff"),url(museosans_100-webfont.b19e0f6205805fe6.ttf) format("truetype"),url(museosans_100-webfont.f3b0733aec32a3f1.svg#museo_sans100) format("svg");font-weight:400;font-style:normal}@font-face{font-family:museo3;src:url(museosans_300-webfont.749b69b4aefe86ce.eot);src:url(museosans_300-webfont.749b69b4aefe86ce.eot?#iefix) format("embedded-opentype"),url(museosans_300-webfont.da09dc28adca329e.woff) format("woff"),url(museosans_300-webfont.86562953c64aa497.ttf) format("truetype"),url(museosans_300-webfont.2d3691918eb30719.svg#museo_sans300) format("svg");font-weight:400;font-style:normal}@font-face{font-family:museo5;src:url(museosans_500-webfont.5105f236d9059b91.eot);src:url(museosans_500-webfont.5105f236d9059b91.eot?#iefix) format("embedded-opentype"),url(museosans_500-webfont.c3a7b8eb0ca8e04a.woff) format("woff"),url(museosans_500-webfont.fdef994e35234400.ttf) format("truetype"),url(museosans_500-webfont.878c67564dce6d36.svg#museo_sans500) format("svg");font-weight:400;font-style:normal}@font-face{font-family:museo7;src:url(museosans_700-webfont.0c6b85f63a3518fa.eot);src:url(museosans_700-webfont.0c6b85f63a3518fa.eot?#iefix) format("embedded-opentype"),url(museosans_700-webfont.3a8fcf3034e98296.woff) format("woff"),url(museosans_700-webfont.b0bf9225ffca6c9d.ttf) format("truetype"),url(museosans_700-webfont.b5f98ed52f292356.svg#museo_sans700) format("svg");font-weight:400;font-style:normal}@font-face{font-family:museo9;src:url(museosans_900-webfont.5c0735d4002ed1a4.eot);src:url(museosans_900-webfont.5c0735d4002ed1a4.eot?#iefix) format("embedded-opentype"),url(museosans_900-webfont.d63b13519065420d.woff) format("woff"),url(museosans_900-webfont.57fd412a25a1a95e.ttf) format("truetype"),url(museosans_900-webfont.48682fbd61c429ba.svg#museo_sans900) format("svg");font-weight:400;font-style:normal}body{font-family:museo1,calibri,arial,sans-serif;font-size:16px;color:#fff}a{color:#42d48b}#wrapper{height:100%;background-color:#052547}#content{height:100%;margin:0 auto;background:url(bg.53d062b63880c7e8.jpg) top no-repeat;background-size:cover;position:relative;text-align:center}#noradLogo,#comeBack,#noradLink,#socialLinks,#world{position:absolute;left:0;right:0;margin:0 auto}#noradLogo{top:1.5%;height:18.75%;max-height:163px;width:100%;max-width:283px;background-size:85%}#comeBack{display:table;width:100%;top:18.75%;font-size:2.6em;height:10%;line-height:1em;color:#fff}#comeBack span{display:table-cell;vertical-align:middle}#noradLink{top:30%;font-size:1.2em;height:8%;color:#fff}#noradLink>div{display:table;margin:auto;height:50%}#noradLink>div>span{display:table-cell;vertical-align:middle}#noradLink a{font-family:museo7,calibri,arial,sans-serif}#socialLinks{position:absolute;top:47.5%;left:0;right:0;height:20%;max-height:128px;font-size:.9em;color:#fff}#followUs{font-family:museo9,calibri,arial,sans-serif;letter-spacing:.09em;padding:2em 0 1em}.socialIcon{display:inline-block;margin:0 .65em}#facebook{background:url(socialSprite.2af8b3cbb2962cfb.png) no-repeat -16px -16px;width:32px;height:32px}#twitter{background:url(socialSprite.2af8b3cbb2962cfb.png) no-repeat -81px -19px;width:31px;height:26px}.welcomeLogo{width:31px;height:31px;margin-top:-27px;margin-left:-3px}#youtube{background:url(socialSprite.2af8b3cbb2962cfb.png) no-repeat -144px -17px;width:32px;height:27px}#instagram{background:url(socialSprite.2af8b3cbb2962cfb.png) no-repeat -208px -17px;width:32px;height:31px}#newline360{background:url(socialSprite.2af8b3cbb2962cfb.png) no-repeat -268px -15px;width:34px;height:34px}#world{background:url(world.ce3821025aa34c6d.png) bottom no-repeat;height:100vh;position:static}.ir{background-color:transparent;border:0;overflow:hidden;*text-indent: -9999px}.ir:before{content:"";display:block;width:0;height:150%}.hidden{display:none!important;visibility:hidden}.visuallyhidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.visuallyhidden.focusable:active,.visuallyhidden.focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.invisible{visibility:hidden}.clearfix:before,.clearfix:after{content:" ";display:table}.clearfix:after{clear:both}.clearfix{*zoom: 1}@media only screen and (max-width: 479px){body{font-size:11px}#noradLogo,#world{width:60%}}@media only screen and (max-width: 480px) and (orientation: landscape){body{font-size:11px}#noradLogo,#world{width:40%}#comeBack{top:22%}#noradLink{top:32%}#socialLinks{height:28%;top:46%}}@media only screen and (min-width: 480px) and (max-width: 639px){body{font-size:13px}#noradLogo,#world{width:50%}}@media only screen and (min-width: 481px) and (max-width: 640px) and (orientation: landscape){body{font-size:14px}#noradLogo,#world{width:40%}#socialLinks{height:28%;top:46%}}@media only screen and (min-width: 640px) and (max-width: 799px){body{font-size:15px}}@media only screen and (min-width: 641px) and (max-width: 800px) and (orientation: landscape){#noradLogo,#world{width:50%}}@media print{*{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100%!important}@page{margin:.5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}}\n'],encapsulation:2})}}return N})()},5312:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.environment=void 0,C.environment={production:!0,environmentName:"Production",apiUrl:"https://noradsanta.org",timerApiUrl:"https://master-trackers.xyz/time",gameApiUrl:"https://game.noradsanta.org",mediaApiUrl:"https://media.noradsanta.org",routeApiUrl:"https://route.noradsanta.org",terrainApiUrl:"https://terrain.noradsanta.org",chatApiUrl:"https://functions.noradsanta.org",appInsightsKey:"3c132eca-c4bb-4fb6-b666-8b9d12ec40b5",msalClientId:"9bcc8ef0-a7dd-4f7a-b29a-952671724521",msalAuthority:"https://login.microsoftonline.com/44041513-f680-4799-930c-35b89dcf65a7",enableAuth:!1,azureMapsKey:"mYU0gWTBclSDNyKuxVBffK_H2PQ434ozt0TlC8fZTWU",apiConfig:{scopes:["openid","profile"],uri:"https://graph.microsoft.com/v1.0/me"}}},4429:(it,C,w)=>{"use strict";const T=w(345),V=w(92),N=w(289);(0,T.bootstrapApplication)(V.AppComponent,N.appConfig).catch(R=>console.error(R))},8813:(it,C,w)=>{"use strict";w.r(C),w.d(C,{AuthenticationType:()=>Y,ControlPosition:()=>Zo,ControlStyle:()=>Ga,HtmlMarker:()=>IS,Map:()=>Sz,Pixel:()=>id,Popup:()=>PC,PopupTemplate:()=>QV,Shape:()=>Bl,_enableRTLTextPlugin:()=>dl,_getAssetDomain:()=>jl,_getDomain:()=>Dl,_hasMaxParallelImageRequests:()=>ll,_hasSetAuthenticationOptions:()=>rs,_hasSetDomain:()=>ks,_hasSetLanguage:()=>ul,_hasSetSessionId:()=>Cs,_hasSetStyleDefinitionsPath:()=>Ia,_hasSetStyleDefinitionsVersion:()=>Al,_hasSetView:()=>Il,_hasWorkerCount:()=>cl,addImageTemplate:()=>Wo,clearPrewarmedResources:()=>Pc,control:()=>vR,data:()=>Sy,default:()=>oQ,getAllImageTemplateNames:()=>vs,getAuthenticationOptions:()=>ua,getDomain:()=>Aa,getImageTemplate:()=>eu,getLanguage:()=>Ds,getMaxParallelImageRequests:()=>Ns,getSessionId:()=>ns,getStaticAssetsDomain:()=>Ho,getStyleAPIVersion:()=>Ci,getStyleDefinitionsPath:()=>oo,getStyleDefinitionsVersion:()=>so,getSubscriptionKey:()=>ba,getUserRegion:()=>_s,getVersion:()=>en,getView:()=>Kt,getWorkerCount:()=>Oc,internal:()=>Ii,isSupported:()=>Qe,layer:()=>xR,math:()=>yR,prewarm:()=>Va,setAuthenticationOptions:()=>Et,setDomain:()=>wn,setLanguage:()=>oa,setMaxParallelImageRequests:()=>ia,setSessionId:()=>ys,setStyleAPIVersion:()=>ji,setStyleDefinitionsPath:()=>$n,setStyleDefinitionsVersion:()=>Ti,setSubscriptionKey:()=>jc,setUserRegion:()=>Tl,setView:()=>qs,setWorkerCount:()=>xn,source:()=>pS});var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Y,n,N={exports:{}},M=T((N.exports=function(){var t={},e={};function i(o,s,f){e[o]=f,"index"===o&&(f="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",e.shared(o={}),e.index(t,o),typeof window<"u")&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"})))}return i("shared",0,function(o){function s(d,u,g,b){return new(g=g||Promise)(function(P,F){function j(me){try{re(b.next(me))}catch(ge){F(ge)}}function Z(me){try{re(b.throw(me))}catch(ge){F(ge)}}function re(me){var ge;me.done?P(me.value):((ge=me.value)instanceof g?ge:new g(function(Ie){Ie(ge)})).then(j,Z)}re((b=b.apply(d,u||[])).next())})}function f(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var v=I;function I(d,u){this.x=d,this.y=u}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,u){return this.clone()._rotateAround(d,u)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(g){var u=g.x-this.x;return u*u+(g=g.y-this.y)*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,u){return Math.atan2(this.x*u-this.y*d,this.x*d+this.y*u)},_matMult:function(g){var u=g[0]*this.x+g[1]*this.y;return g=g[2]*this.x+g[3]*this.y,this.x=u,this.y=g,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(b){var u=Math.cos(b),g=(b=Math.sin(b),u*this.x-b*this.y);return b=b*this.x+u*this.y,this.x=g,this.y=b,this},_rotateAround:function(P,u){var g=Math.cos(P),b=(P=Math.sin(P),u.x+g*(this.x-u.x)-P*(this.y-u.y));return P=u.y+P*(this.x-u.x)+g*(this.y-u.y),this.x=b,this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(d){return d instanceof I||!Array.isArray(d)?d:new I(d[0],d[1])};var D=f(v),k=X;function X(d,u,g,b){this.cx=3*d,this.bx=3*(g-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=u,this.p2x=g,this.p2y=b}X.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,u){if(void 0===u&&(u=1e-6),d<0)return 0;if(1<d)return 1;for(var g=d,b=0;b<8;b++){var P=this.sampleCurveX(g)-d;if(Math.abs(P)<u)return g;var F=this.sampleCurveDerivativeX(g);if(Math.abs(F)<1e-6)break;g-=P/F}var j=0,Z=1;for(g=d,b=0;b<20&&(P=this.sampleCurveX(g),!(Math.abs(P-d)<u));b++)P<d?j=g:Z=g,g=.5*(Z-j)+j;return g},solve:function(d,u){return this.sampleCurveY(this.solveCurveX(d,u))}};var fe=f(k);let Se,Je;function Ve(){return Se=Se??(typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap)}function lt(){if(null==Je&&(Je=!1,Ve())){var d=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(d){for(let b=0;b<25;b++){var u=4*b;d.fillStyle=`rgb(${u},${1+u},${2+u})`,d.fillRect(b%5,Math.floor(b/5),1,1)}var g=d.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&g[b]!==b){Je=!0;break}}}return Je||!1}function _n(d,u,g,b){const P=new fe(d,u,g,b);return function(F){return P.solve(F)}}function Yn(d,u,g){return Math.min(g,Math.max(u,d))}function sr(P,u,g){var b=g-u;return(P=((P-u)%b+b)%b+u)===u?g:P}function ri(d,...u){for(const g of u)for(const b in g)d[b]=g[b];return d}k=_n(.25,.1,.25,1);let tn=1;function zn(d,u,g){var b={};for(const P in d)b[P]=u.call(g||this,d[P],P,d);return b}function Zn(d,u,g){var b={};for(const P in d)u.call(g||this,d[P],P,d)&&(b[P]=d[P]);return b}function Er(d){return Array.isArray(d)?d.map(Er):"object"==typeof d&&d?zn(d,Er):d}const Lt={};function Hn(d){Lt[d]||(typeof console<"u"&&console.warn(d),Lt[d]=!0)}function hn(d,u,g){return(g.y-d.y)*(u.x-d.x)>(u.y-d.y)*(g.x-d.x)}function vr(d){return typeof WorkerGlobalScope<"u"&&void 0!==d&&d instanceof WorkerGlobalScope}let si=null;function Bi(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const Un="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function pi(d,u,g,b,P){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");var F,j,Z,re,me,ge,Ie,ze,Xe,Ze=new VideoFrame(d,{timestamp:0});try{var dt=Ze?.format;if(!dt||!dt.startsWith("BGR")&&!dt.startsWith("RGB"))throw new Error("Unrecognized format "+dt);var xt=dt.startsWith("BGR"),ct=new Uint8ClampedArray(b*P*4);if(yield Ze.copyTo(ct,(F=d,j=u,Z=g,re=b,me=P,ge=4*Math.max(-j,0),ge=(Math.max(0,Z)-Z)*re*4+ge,Ie=4*re,ze=Math.max(0,j),Xe=Math.max(0,Z),{rect:{x:ze,y:Xe,width:Math.min(F.width,j+re)-ze,height:Math.min(F.height,Z+me)-Xe},layout:[{offset:ge,stride:Ie}]})),xt)for(let un=0;un<ct.length;un+=4){var Vt=ct[un];ct[un]=ct[un+2],ct[un+2]=Vt}return ct}finally{Ze.close()}})}let Bo,Li;const Bn="AbortError";function Qs(){return new Error(Bn)}const Zi={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Na(d){return Zi.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const za="global-dispatcher";class Vi extends Error{constructor(u,g,b,P){super(`AJAXError: ${g} (${u}): `+b),this.status=u,this.statusText=g,this.url=b,this.body=P}}const Sn=()=>vr(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href;function Si(d,u){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){var g=Na(d.url);if(g)return g(d,u);if(vr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:za},u)}if(!(d=>/^file:/.test(d)||/^file:/.test(Sn())&&!/^\w+:/.test(d))(d.url)){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(F,j){return s(this,void 0,void 0,function*(){var Z=new Request(F.url,{method:F.method||"GET",body:F.body,credentials:F.credentials,headers:F.headers,cache:F.cache,referrer:Sn(),signal:j.signal});if(!("json"===F.type&&Z.headers.set("Accept","application/json"),Z=yield fetch(Z)).ok)throw me=yield Z.blob(),new Vi(Z.status,Z.statusText,F.url,me);let re;var me=yield re="arrayBuffer"===F.type||"image"===F.type?Z.arrayBuffer():"json"===F.type?Z.json():Z.text();if(j.signal.aborted)throw Qs();return{data:me,cacheControl:Z.headers.get("Cache-Control"),expires:Z.headers.get("Expires")}})}(d,u);if(vr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:za},u)}return b=d,P=u,new Promise((F,j)=>{const Z=new XMLHttpRequest;Z.open(b.method||"GET",b.url,!0),"arrayBuffer"!==b.type&&"image"!==b.type||(Z.responseType="arraybuffer");for(const re in b.headers)Z.setRequestHeader(re,b.headers[re]);"json"===b.type&&(Z.responseType="text",Z.setRequestHeader("Accept","application/json")),Z.withCredentials="include"===b.credentials,Z.onerror=()=>{j(new Error(Z.statusText))},Z.onload=()=>{if(!P.signal.aborted)if((200<=Z.status&&Z.status<300||0===Z.status)&&null!==Z.response){let me=Z.response;if("json"===b.type)try{me=JSON.parse(Z.response)}catch(ge){return void j(ge)}F({data:me,cacheControl:Z.getResponseHeader("Cache-Control"),expires:Z.getResponseHeader("Expires")})}else{var re=new Blob([Z.response],{type:Z.getResponseHeader("Content-Type")});j(new Vi(Z.status,Z.statusText,b.url,re))}},P.signal.addEventListener("abort",()=>{Z.abort(),j(Qs())}),Z.send(b.body)});var b,P}function Dn(d){var u;return!d||d.indexOf("://")<=0||0===d.indexOf("data:image/")||0===d.indexOf("blob:")||(d=new URL(d),u=window.location,d.protocol===u.protocol&&d.host===u.host)}function er(d,u,g){g[d]&&-1!==g[d].indexOf(u)||(g[d]=g[d]||[],g[d].push(u))}function hi(d,u,g){g&&g[d]&&-1!==(u=g[d].indexOf(u))&&g[d].splice(u,1)}class to{constructor(u,g={}){ri(this,g),this.type=u}}class Gi extends to{constructor(u,g={}){super("error",ri({error:u},g))}}class Vo{on(u,g){return this._listeners=this._listeners||{},er(u,g,this._listeners),this}off(u,g){return hi(u,g,this._listeners),hi(u,g,this._oneTimeListeners),this}once(u,g){return g?(this._oneTimeListeners=this._oneTimeListeners||{},er(u,g,this._oneTimeListeners),this):new Promise(b=>this.once(u,b))}fire(u,g){var b=(u="string"==typeof u?new to(u,g||{}):u).type;if(this.listens(b)){for(const P of(u.target=this)._listeners&&this._listeners[b]?this._listeners[b].slice():[])P.call(this,u);for(const P of this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[])hi(b,P,this._oneTimeListeners),P.call(this,u);(g=this._eventedParent)&&(ri(u,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),g.fire(u))}else u instanceof Gi&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&0<this._listeners[u].length||this._oneTimeListeners&&this._oneTimeListeners[u]&&0<this._oneTimeListeners[u].length||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,g){return this._eventedParent=u,this._eventedParentData=g,this}}var Ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Be=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Pe(d,u){if(Array.isArray(d)){if(!Array.isArray(u)||d.length!==u.length)return;for(let g=0;g<d.length;g++)if(!Pe(d[g],u[g]))return;return 1}if("object"!=typeof d||null===d||null===u)return d===u;if("object"==typeof u&&Object.keys(d).length===Object.keys(u).length){for(const g in d)if(!Pe(d[g],u[g]))return;return 1}}function $e(d,u){d.push(u)}function gt(d,u,g){$e(g,{command:"addSource",args:[d,u[d]]})}function kt(d,u,g){$e(u,{command:"removeSource",args:[d]}),g[d]=!0}function Fn(d,u,g,b,P,F){u=u||{};for(const j in d=d||{})!Object.prototype.hasOwnProperty.call(d,j)||Pe(d[j],u[j])||g.push({command:F,args:[b,j,u[j],P]});for(const j in u)!Object.prototype.hasOwnProperty.call(u,j)||Object.prototype.hasOwnProperty.call(d,j)||Pe(d[j],u[j])||g.push({command:F,args:[b,j,u[j],P]})}function St(d){return d.id}function pn(d,u){return d[u.id]=u,d}class Wt{constructor(u,g,b,P){this.message=(u?u+": ":"")+b,P&&(this.identifier=P),null!=g&&g.__line__&&(this.line=g.__line__)}}function Yr(d,...u){for(const g of u)for(const b in g)d[b]=g[b];return d}class Br extends Error{constructor(u,g){super(g),this.message=g,this.key=u}}class vi{constructor(u,g=[]){for(var[b,P]of(this.parent=u,this.bindings={},g))this.bindings[b]=P}concat(u){return new vi(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const eo={kind:"null"},Mn={kind:"number"},fi={kind:"string"},Hr={kind:"boolean"},fa={kind:"color"},Xs={kind:"object"},Ki={kind:"value"},bl={kind:"collator"},Yc={kind:"formatted"},Yo={kind:"padding"},rt={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function je(d,u){return{kind:"array",itemType:d,N:u}}function Ue(d){var u;return"array"===d.kind?(u=Ue(d.itemType),"number"==typeof d.N?`array<${u}, ${d.N}>`:"value"===d.itemType.kind?"array":`array<${u}>`):d.kind}const Tt=[eo,Mn,fi,Hr,fa,Yc,Xs,je(Ki),Yo,rt,xe];function Jt(d,u){if("error"===u.kind)return null;if("array"===d.kind){if("array"===u.kind&&(0===u.N&&"value"===u.itemType.kind||!Jt(d.itemType,u.itemType))&&("number"!=typeof d.N||d.N===u.N))return null}else{if(d.kind===u.kind)return null;if("value"===d.kind)for(const g of Tt)if(!Jt(g,u))return null}return`Expected ${Ue(d)} but found ${Ue(u)} instead.`}function mn(d,u){return u.some(g=>g.kind===d.kind)}function Qt(d,u){return u.some(g=>"null"===g?null===d:"array"===g?Array.isArray(d):"object"===g?d&&!Array.isArray(d)&&"object"==typeof d:g===typeof d)}function zt(d,u){return"array"===d.kind&&"array"===u.kind?d.itemType.kind===u.itemType.kind&&"number"==typeof d.N:d.kind===u.kind}const ci=4/29,Eo=6/29,uo=3*Eo*Eo,Ro=Eo*Eo*Eo,As=Math.PI/180,zs=180/Math.PI;function Da(d){return(d%=360)<0&&(d+=360),d}function Ya([Z,u,g,b]){let P,F;var j=Mo((.2225045*(Z=Io(Z))+.7168786*(u=Io(u))+.0606169*(g=Io(g)))/1);return[(Z===u&&u===g?P=F=j:(P=Mo((.4360747*Z+.3850649*u+.1430804*g)/.96422),F=Mo((.0139322*Z+.0971045*u+.7141733*g)/.82521)),(Z=116*j-16)<0?0:Z),500*(P-j),200*(j-F),b]}function Io(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Mo(d){return d>Ro?Math.pow(d,1/3):d/uo+ci}function Is([d,u,g,b]){return d=(d+16)/116,u=isNaN(u)?d:d+u/500,g=isNaN(g)?d:d-g/200,d=1*Md(d),[Nu(3.1338561*(u=.96422*Md(u))-1.6168667*d-.4906146*(g=.82521*Md(g))),Nu(-.9787684*u+1.9161415*d+.033454*g),Nu(.0719453*u-.2289914*d+1.4052427*g),b]}function Nu(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:1<d?1:d}function Md(d){return d>Eo?d*d*d:uo*(d-ci)}function Kp(d){return parseInt(d.padEnd(2,d),16)/255}function iP(d,u){return jb(u?d/100:d,0,1)}function jb(d,u,g){return Math.min(Math.max(u,d),g)}function rF(d){return!d.some(Number.isNaN)}const wz={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Fc{constructor(u,g,b,P=1,F=!0){this.r=u,this.g=g,this.b=b,this.a=P,F||(this.r*=P,this.g*=P,this.b*=P,P)||this.overwriteGetter("rgb",[u,g,b,P])}static parse(u){return u instanceof Fc?u:"string"==typeof u&&(u=function Xd(d){if("transparent"===(d=d.toLowerCase().trim()))return[0,0,0,0];var Ie,ze,Xe,Ze;if(Ze=wz[d])return[Ze,g,u]=Ze,[Ze/255,g/255,u/255,1];if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d))return[Kp(d.slice(g=1,g+=Ze=d.length<6?1:2)),Kp(d.slice(g,g+=Ze)),Kp(d.slice(g,g+=Ze)),Kp(d.slice(g,g+Ze)||"ff")];if(d.startsWith("rgb")&&(u=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/))){var u,[,g,Ze,u,b,P,F,j,Z,re,me,ge]=u;return("  "===(u=[u||" ",F||" ",re].join(""))||"  /"===u||",,"===u||",,,"===u)&&(re="%%%"===(F=[Ze,P,Z].join(""))?100:""===F?255:0)&&rF(u=[jb(+g/re,0,1),jb(+b/re,0,1),jb(+j/re,0,1),me?iP(+me,ge):1])?u:void 0}if(Ze=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/)){var ge,[,P,Z,F,g,b,j,re,me]=Ze;if(("  "===(ge=[Z||" ",g||" ",j].join(""))||"  /"===ge||",,"===ge||",,,"===ge)&&rF(u=[+P,jb(+F,0,100),jb(+b,0,100),re?iP(+re,me):1]))return[Ie,ze,Xe,d]=[u][0],Ie=Da(Ie),ze/=100,Xe/=100,[dt(0),dt(8),dt(4),d]}function dt(ct){ct=(ct+Ie/30)%12;var Vt=ze*Math.min(Xe,1-Xe);return Xe-Vt*Math.max(-1,Math.min(ct-3,9-ct,1))}}(u))?new Fc(...u,!1):void 0}get rgb(){var{r:u,g,b,a:P}=this,F=P||1/0;return this.overwriteGetter("rgb",[u/F,g/F,b/F,P])}get hcl(){return this.overwriteGetter("hcl",function qp(u){var[u,g,b,P]=Ya(u),F=Math.sqrt(g*g+b*b);return[Math.round(1e4*F)?Da(Math.atan2(b,g)*zs):NaN,F,u,P]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ya(this.rgb))}overwriteGetter(u,g){return Object.defineProperty(this,u,{value:g}),g}toString(){var[u,g,b,P]=this.rgb;return`rgba(${[u,g,b].map(F=>Math.round(255*F)).join(",")},${P})`}}Fc.black=new Fc(0,0,0,1),Fc.white=new Fc(1,1,1,1),Fc.transparent=new Fc(0,0,0,0),Fc.red=new Fc(1,0,0,1);class T1{constructor(u,g,b){this.sensitivity=u?g?"variant":"case":g?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale||[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,g){return this.collator.compare(u,g)}resolvedLocale(){return new Intl.Collator(this.locale||[]).resolvedOptions().locale}}class ok{constructor(u,g,b,P,F){this.text=u,this.image=g,this.scale=b,this.fontStack=P,this.textColor=F}}class Cf{constructor(u){this.sections=u}static fromString(u){return new Cf([new ok(u,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(u=>0!==u.text.length||u.image&&0!==u.image.name.length)}static factory(u){return u instanceof Cf?u:Cf.fromString(u)}toString(){return 0===this.sections.length?"":this.sections.map(u=>u.text).join("")}}class gh{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof gh)return u;if("number"==typeof u)return new gh([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||4<u.length)){for(const g of u)if("number"!=typeof g)return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new gh(u)}}toString(){return JSON.stringify(this.values)}}const Tz=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ng{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ng)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let P=0;P<u.length;P+=2){var g=u[P],b=u[P+1];if("string"!=typeof g||!Tz.has(g)||!Array.isArray(b)||2!==b.length||"number"!=typeof b[0]||"number"!=typeof b[1])return}return new ng(u)}}toString(){return JSON.stringify(this.values)}}class rg{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new rg({name:u,available:!1}):null}}function ak(d,u,g,b){return"number"==typeof d&&0<=d&&d<=255&&"number"==typeof u&&0<=u&&u<=255&&"number"==typeof g&&0<=g&&g<=255?void 0===b||"number"==typeof b&&0<=b&&b<=1?null:`Invalid rgba value [${[d,u,g,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof b?[d,u,g,b]:[d,u,g]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function A1(d){if(null===d||"string"==typeof d||"boolean"==typeof d||"number"==typeof d||d instanceof Fc||d instanceof T1||d instanceof Cf||d instanceof gh||d instanceof ng||d instanceof rg)return 1;if(Array.isArray(d)){for(const u of d)if(!A1(u))return;return 1}if("object"==typeof d){for(const u in d)if(!A1(d[u]))return;return 1}}function ud(d){if(null===d)return eo;if("string"==typeof d)return fi;if("boolean"==typeof d)return Hr;if("number"==typeof d)return Mn;if(d instanceof Fc)return fa;if(d instanceof T1)return bl;if(d instanceof Cf)return Yc;if(d instanceof gh)return Yo;if(d instanceof ng)return xe;if(d instanceof rg)return rt;if(Array.isArray(d)){var u=d.length;let b;for(const P of d){var g=ud(P);if(b){if(b!==g){b=Ki;break}}else b=g}return je(b||Ki,u)}return Xs}function I1(d){var u=typeof d;return null===d?"":"string"==u||"number"==u||"boolean"==u?String(d):d instanceof Fc||d instanceof Cf||d instanceof gh||d instanceof ng||d instanceof rg?d.toString():JSON.stringify(d)}class X_{constructor(u,g){this.type=u,this.value=g}static parse(u,g){if(2!==u.length)return g.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!A1(u[1]))return g.error("invalid value");let b=ud(u=u[1]);return g=g.expectedType,"array"!==b.kind||0!==b.N||!g||"array"!==g.kind||"number"==typeof g.N&&0!==g.N||(b=g),new X_(b,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class hc{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Cv={string:fi,number:Mn,boolean:Hr,object:Xs};class fs{constructor(u,g){this.type=u,this.args=g}static parse(u,g){if(u.length<2)return g.error("Expected at least one argument.");let P,b=1;var F=u[0];if("array"===F){let re,me;if(2<u.length){const ge=u[1];if("string"!=typeof ge||!(ge in Cv)||"object"===ge)return g.error('The item type argument of "array" must be one of string, number, boolean',1);re=Cv[ge],b++}else re=Ki;if(3<u.length){if(null!==u[2]&&("number"!=typeof u[2]||u[2]<0||u[2]!==Math.floor(u[2])))return g.error('The length argument to "array" must be a positive integer literal',2);me=u[2],b++}P=je(re,me)}else{if(!Cv[F])throw new Error("Types doesn't contain name = "+F);P=Cv[F]}for(var j=[];b<u.length;b++){var Z=g.parse(u[b],b,Ki);if(!Z)return null;j.push(Z)}return new fs(P,j)}evaluate(u){for(let b=0;b<this.args.length;b++){var g=this.args[b].evaluate(u);if(!Jt(this.type,ud(g)))return g;if(b===this.args.length-1)throw new hc(`Expected value to be of type ${Ue(this.type)}, but found ${Ue(ud(g))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const iF={"to-boolean":Hr,"to-color":fa,"to-number":Mn,"to-string":fi};class bv{constructor(u,g){this.type=u,this.args=g}static parse(u,g){if(u.length<2)return g.error("Expected at least one argument.");if(!iF[b=u[0]])throw new Error(`Can't parse ${b} as it is not part of the known types`);if(("to-boolean"===b||"to-string"===b)&&2!==u.length)return g.error("Expected one argument.");var b=iF[b],P=[];for(let j=1;j<u.length;j++){var F=g.parse(u[j],j,Ki);if(!F)return null;P.push(F)}return new bv(b,P)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let j,Z;for(const re of this.args){if(j=re.evaluate(u),Z=null,j instanceof Fc)return j;if("string"==typeof j){var g=u.parseColor(j);if(g)return g}else if(Array.isArray(j)&&!(Z=j.length<3||4<j.length?`Invalid rbga value ${JSON.stringify(j)}: expected an array containing either three or four numeric values.`:ak(j[0],j[1],j[2],j[3])))return new Fc(j[0]/255,j[1]/255,j[2]/255,j[3])}throw new hc(Z||`Could not parse color from value '${"string"==typeof j?j:JSON.stringify(j)}'`)}case"padding":{let j;for(const Z of this.args){j=Z.evaluate(u);var b=gh.parse(j);if(b)return b}throw new hc(`Could not parse padding from value '${"string"==typeof j?j:JSON.stringify(j)}'`)}case"variableAnchorOffsetCollection":{let j;for(const Z of this.args){j=Z.evaluate(u);var P=ng.parse(j);if(P)return P}throw new hc(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof j?j:JSON.stringify(j)}'`)}case"number":{let j=null;for(const Z of this.args){if(null===(j=Z.evaluate(u)))return 0;var F=Number(j);if(!isNaN(F))return F}throw new hc(`Could not convert ${JSON.stringify(j)} to number.`)}case"formatted":return Cf.fromString(I1(this.args[0].evaluate(u)));case"resolvedImage":return rg.fromString(I1(this.args[0].evaluate(u)));default:return I1(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const sk=["Unknown","Point","LineString","Polygon"];class oF{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?sk[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){return this._parseColorCache[u]||(this._parseColorCache[u]=Fc.parse(u))}}class MT{constructor(u,g,b=[],P,F=new vi,j=[]){this.registry=u,this.path=b,this.key=b.map(Z=>`[${Z}]`).join(""),this.scope=F,this.errors=j,this.expectedType=P,this._isConstant=g}parse(u,g,b,P,F={}){return(g?this.concat(g,b,P):this)._parse(u,F)}_parse(u,g){function b(Z,re,me){return"assert"===me?new fs(re,[Z]):"coerce"===me?new bv(re,[Z]):Z}if(null!==u&&"string"!=typeof u&&"boolean"!=typeof u&&"number"!=typeof u||(u=["literal",u]),Array.isArray(u)){if(0===u.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var P=u[0];if("string"!=typeof P)return this.error(`Expression name must be a string, but found ${typeof P} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;if(F=this.registry[P]){let Z=F.parse(u,this);if(!Z)return null;if(this.expectedType){var F,j=Z.type;if("string"!==(F=this.expectedType).kind&&"number"!==F.kind&&"boolean"!==F.kind&&"object"!==F.kind&&"array"!==F.kind||"value"!==j.kind)if("color"!==F.kind&&"formatted"!==F.kind&&"resolvedImage"!==F.kind||"value"!==j.kind&&"string"!==j.kind)if("padding"!==F.kind||"value"!==j.kind&&"number"!==j.kind&&"array"!==j.kind)if("variableAnchorOffsetCollection"!==F.kind||"value"!==j.kind&&"array"!==j.kind){if(this.checkSubtype(F,j))return null}else Z=b(Z,F,g.typeAnnotation||"coerce");else Z=b(Z,F,g.typeAnnotation||"coerce");else Z=b(Z,F,g.typeAnnotation||"coerce");else Z=b(Z,F,g.typeAnnotation||"assert")}if(!(Z instanceof X_)&&"resolvedImage"!==Z.type.kind&&this._isConstant(Z)){j=new oF;try{Z=new X_(Z.type,Z.evaluate(j))}catch(re){return this.error(re.message),null}}return Z}return this.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===u?"'undefined' value invalid. Use null instead.":"object"==typeof u?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,g,b){return u="number"==typeof u?this.path.concat(u):this.path,b=b?this.scope.concat(b):this.scope,new MT(this.registry,this._isConstant,u,g||null,b,this.errors)}error(u,...g){g=""+this.key+g.map(b=>`[${b}]`).join(""),this.errors.push(new Br(g,u))}checkSubtype(u,g){return(u=Jt(u,g))&&this.error(u),u}}class OT{constructor(u,g,b){this.type=bl,this.locale=b,this.caseSensitive=u,this.diacriticSensitive=g}static parse(u,g){if(2!==u.length)return g.error("Expected one argument.");if("object"!=typeof(u=u[1])||Array.isArray(u))return g.error("Collator options argument must be an object.");var b=g.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,Hr);if(!b)return null;var P=g.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,Hr);if(!P)return null;let F=null;return u.locale&&!(F=g.parse(u.locale,1,fi))?null:new OT(b,P,F)}evaluate(u){return new T1(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}const Ev=8192;function oP(d,u){d[0]=Math.min(d[0],u[0]),d[1]=Math.min(d[1],u[1]),d[2]=Math.max(d[2],u[0]),d[3]=Math.max(d[3],u[1])}function PT(d,u){return!(d[0]<=u[0]||d[2]>=u[2]||d[1]<=u[1]||d[3]>=u[3])}function Az(b,P){var g=(180+b[0])/360;return b=b[1],b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+b*Math.PI/360)))/360,P=Math.pow(2,P.z),[Math.round(g*P*Ev),Math.round(b*P*Ev)]}function ck(d,u){let g=!1;for(let me=0,ge=u.length;me<ge;me++){var b=u[me];for(let Ie=0,ze=b.length;Ie<ze-1;Ie++){if(re=Z=void 0,Z=(P=d)[0]-(F=b[Ie])[0],F=P[1]-F[1],re=P[0]-(j=b[Ie+1])[0],Z*(P=P[1]-j[1])-re*F==0&&Z*re<=0&&F*P<=0)return;(Z=b[Ie])[1]>(j=d)[1]!=(re=b[Ie+1])[1]>j[1]&&j[0]<(re[0]-Z[0])*(j[1]-Z[1])/(re[1]-Z[1])+Z[0]&&(g=!g)}}var P,F,j,Z,re;return g}function aF(P,j,me,re){var F=j[0]-me[0],Z=(j=j[1]-me[1],re[0]-me[0]),ge=(me=(ge=P[0]-me[0])*(re=re[1]-me[1])-Z*(P=P[1]-me[1]),F*re-Z*j);return 0<me&&ge<0||me<0&&0<ge}function Iz(d,u,g){for(const me of g)for(let ge=0;ge<me.length-1;++ge)if((re=[(j=me[ge+1])[0]-(F=me[ge])[0],j[1]-F[1]])[0]*(Z=[(P=u)[0]-(b=d)[0],P[1]-b[1]])[1]-re[1]*Z[0]!=0&&aF(b,P,F,j)&&aF(F,j,b,P))return 1;var b,P,F,j,Z,re}function lk(d,u){for(let g=0;g<d.length;++g)if(!ck(d[g],u))return;for(let g=0;g<d.length-1;++g)if(Iz(d[g],d[g+1],u))return;return 1}function aP(d,u,g){var b=[];for(let j=0;j<d.length;j++){var P=[];for(let Z=0;Z<d[j].length;Z++){var F=Az(d[j][Z],g);oP(u,F),P.push(F)}b.push(P)}return b}function sF(d,u,g){var b=[];for(let F=0;F<d.length;F++){var P=aP(d[F],u,g);b.push(P)}return b}function cF(d,u,g,b){if(d[0]<g[0]||d[0]>g[2]){var P=.5*b;let F=d[0]-g[0]>P?-b:g[0]-d[0]>P?b:0;0===F&&(F=d[0]-g[2]>P?-b:g[2]-d[0]>P?b:0),d[0]+=F}oP(u,d)}function lF(d,u,g,b){var P=Math.pow(2,b.z)*Ev,F=[b.x*Ev,b.y*Ev],j=[];for(const re of d)for(const me of re){var Z=[me.x+F[0],me.y+F[1]];cF(Z,u,g,P),j.push(Z)}return j}function sP(d,u,g,b){var P=Math.pow(2,b.z)*Ev,F=[b.x*Ev,b.y*Ev],j=[];for(const me of d){var Z=[];for(const ge of me){var re=[ge.x+F[0],ge.y+F[1]];oP(u,re),Z.push(re)}j.push(Z)}if(u[2]-u[0]<=P/2){(b=u)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const me of j)for(const ge of me)cF(ge,u,g,P)}return j}class M1{constructor(u,g){this.type=Hr,this.geojson=u,this.geometries=g}static parse(u,g){if(2!==u.length)return g.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(A1(u[1]))if("FeatureCollection"===(u=u[1]).type){var b=[];for(const Z of u.features){var{type:P,coordinates:F}=Z.geometry;"Polygon"===P&&b.push(F),"MultiPolygon"===P&&b.push(...F)}if(b.length)return new M1(u,j={type:"MultiPolygon",coordinates:b})}else if("Feature"===u.type){var j=u.geometry.type;if("Polygon"===j||"MultiPolygon"===j)return new M1(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new M1(u,u);return g.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(null!=u.geometry()&&null!=u.canonicalID()){if("Point"===u.geometryType())return function uF(d,u){var g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],P=d.canonicalID();if("Polygon"===u.type){var F=aP(u.coordinates,b,P),j=lF(d.geometry(),g,b,P);if(!PT(g,b))return!1;for(const re of j)if(!ck(re,F))return!1}if("MultiPolygon"===u.type){var Z=sF(u.coordinates,b,P);if(j=lF(d.geometry(),g,b,P),!PT(g,b))return!1;for(const me of j)if(!function(ge,Ie){for(let ze=0;ze<Ie.length;ze++)if(ck(ge,Ie[ze]))return 1}(me,Z))return!1}return!0}(u,this.geometries);if("LineString"===u.geometryType())return function dF(d,u){var g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],P=d.canonicalID();if("Polygon"===u.type){var F=aP(u.coordinates,b,P),j=sP(d.geometry(),g,b,P);if(!PT(g,b))return!1;for(const re of j)if(!lk(re,F))return!1}if("MultiPolygon"===u.type){var Z=sF(u.coordinates,b,P);if(j=sP(d.geometry(),g,b,P),!PT(g,b))return!1;for(const me of j)if(!function(ge,Ie){for(let ze=0;ze<Ie.length;ze++)if(lk(ge,Ie[ze]))return 1}(me,Z))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class RT{constructor(u,g){this.type=g.type,this.name=u,this.boundExpression=g}static parse(u,g){return 2!==u.length||"string"!=typeof u[1]?g.error("'var' expression requires exactly one string literal argument."):g.scope.has(u=u[1])?new RT(u,g.scope.get(u)):g.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class bf{constructor(u,g,b,P){this.name=u,this.type=g,this._evaluate=b,this.args=P}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,g){var b=u[0];if(!(Z=bf.definitions[b]))return g.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);var P,F,Z,j=Array.isArray(Z)?Z[0]:Z.type,re=(Z=Array.isArray(Z)?[[Z[1],Z[2]]]:Z.overloads).filter(([ct])=>!Array.isArray(ct)||ct.length===u.length-1);let me=null;for([P,F]of re){me=new MT(g.registry,cP,g.path,null,g.scope);var ge=[];let ct=!1;for(let Vt=1;Vt<u.length;Vt++){var ze=u[Vt],Ie=Array.isArray(P)?P[Vt-1]:P.type;if(!(ze=me.parse(ze,1+ge.length,Ie))){ct=!0;break}ge.push(ze)}if(!ct)if(Array.isArray(P)&&P.length!==ge.length)me.error(`Expected ${P.length} arguments, but found ${ge.length} instead.`);else{for(let Vt=0;Vt<ge.length;Vt++){var Xe=Array.isArray(P)?P[Vt]:P.type,Ze=ge[Vt];me.concat(Vt+1).checkSubtype(Xe,Ze.type)}if(0===me.errors.length)return new bf(b,j,F,ge)}}if(1===re.length)g.errors.push(...me.errors);else{re=(re.length?re:Z).map(([Vt])=>function Mz(d){return Array.isArray(d)?`(${d.map(Ue).join(", ")})`:`(${Ue(d.type)}...)`}(Vt)).join(" | ");var dt=[];for(let Vt=1;Vt<u.length;Vt++){var xt=g.parse(u[Vt],1+dt.length);if(!xt)return null;dt.push(Ue(xt.type))}g.error(`Expected arguments of type ${re}, but found (${dt.join(", ")}) instead.`)}return null}static register(u,g){for(const b in bf.definitions=g)u[b]=bf}}function cP(d){if(d instanceof RT)return cP(d.boundExpression);if(d instanceof bf&&"error"===d.name||d instanceof OT||d instanceof M1)return!1;const u=d instanceof bv||d instanceof fs;let g=!0;return d.eachChild(b=>{g=u?g&&cP(b):g&&b instanceof X_}),!!g&&lP(d)&&uP(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function lP(d){if(d instanceof bf&&("get"===d.name&&1===d.args.length||"feature-state"===d.name||"has"===d.name&&1===d.args.length||"properties"===d.name||"geometry-type"===d.name||"id"===d.name||/^filter-/.test(d.name))||d instanceof M1)return!1;let u=!0;return d.eachChild(g=>{u&&!lP(g)&&(u=!1)}),u}function xT(d){if(!(d instanceof bf&&"feature-state"===d.name)){let u=!0;return d.eachChild(g=>{u&&!xT(g)&&(u=!1)}),u}}function uP(d,u){if(d instanceof bf&&0<=u.indexOf(d.name))return!1;let g=!0;return d.eachChild(b=>{g&&!uP(b,u)&&(g=!1)}),g}function dP(d,u){var g=d.length-1;let b=0,P=g;for(var F,j;b<=P;)if((j=d[F=Math.floor((b+P)/2)])<=u){if(F===g||u<d[F+1])return F;b=F+1}else{if(!(u<j))throw new hc("Input is not a number.");P=F-1}return 0}class O1{constructor(u,g,b){for(var[P,F]of(this.type=u,this.input=g,this.labels=[],this.outputs=[],b))this.labels.push(P),this.outputs.push(F)}static parse(u,g){if(u.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return g.error("Expected an even number of arguments.");var b=g.parse(u[1],1,Mn);if(!b)return null;var P=[];let F=null;g.expectedType&&"value"!==g.expectedType.kind&&(F=g.expectedType);for(let ge=1;ge<u.length;ge+=2){var j=1===ge?-1/0:u[ge],Z=u[ge+1],re=ge,me=ge+1;if("number"!=typeof j)return g.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(P.length&&P[P.length-1][0]>=j)return g.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);if(!(re=g.parse(Z,me,F)))return null;F=F||re.type,P.push([j,re])}return new O1(F,b,P)}evaluate(u){var g,b,P=this.labels,F=this.outputs;return(1===P.length||(g=this.input.evaluate(u))<=P[0]?F[0]:g>=P[(b=P.length)-1]?F[b-1]:F[dP(P,g)]).evaluate(u)}eachChild(u){u(this.input);for(const g of this.outputs)u(g)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}var DT=Ec;function Ec(d,u,g,b){this.cx=3*d,this.bx=3*(g-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=u,this.p2x=g,this.p2y=b}Ec.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,u){if(void 0===u&&(u=1e-6),d<0)return 0;if(1<d)return 1;for(var g=d,b=0;b<8;b++){var P=this.sampleCurveX(g)-d;if(Math.abs(P)<u)return g;var F=this.sampleCurveDerivativeX(g);if(Math.abs(F)<1e-6)break;g-=P/F}var j=0,Z=1;for(g=d,b=0;b<20&&(P=this.sampleCurveX(g),!(Math.abs(P-d)<u));b++)P<d?j=g:Z=g,g=.5*(Z-j)+j;return g},solve:function(d,u){return this.sampleCurveY(this.solveCurveX(d,u))}};var Oz=function hP(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}(DT);function P1(d,u,g){return d+g*(u-d)}function pP(d,u,g){return d.map((b,P)=>P1(b,u[P],g))}const Ef={number:P1,color:function(d,u,g,b="rgb"){switch(b){case"rgb":var[P,F,ge,j]=pP(d.rgb,u.rgb,g);return new Fc(P,F,ge,j,!1);case"hcl":{var[P,F,ge,j]=d.hcl,[re,me,Ie,Z]=u.hcl;let xt,ct;if(isNaN(P)||isNaN(re))isNaN(P)?isNaN(re)?xt=NaN:(xt=re,1!==ge&&0!==ge||(ct=me)):(xt=P,1!==Ie&&0!==Ie||(ct=F));else{let jn=re-P;P<re&&180<jn?jn-=360:re<P&&180<P-re&&(jn+=360),xt=P+g*jn}[re,P,F,me]=[xt,ct??P1(F,me,g),P1(ge,Ie,g),P1(j,Z,g)],re=isNaN(re)?0:re*As;var[ge,Ie,j,Z]=Is([F,Math.cos(re)*P,Math.sin(re)*P,me]);return new Fc(ge,Ie,j,Z,!1)}case"lab":var[re,me,ge,Ie]=Is(pP(d.lab,u.lab,g));return new Fc(re,me,ge,Ie,!1)}},array:pP,padding:function(d,u,g){return new gh(pP(d.values,u.values,g))},variableAnchorOffsetCollection:function(d,u,g){var b=d.values,P=u.values;if(b.length!==P.length)throw new hc(`Cannot interpolate values of different length. from: ${d.toString()}, to: `+u.toString());var F=[];for(let ge=0;ge<b.length;ge+=2){if(b[ge]!==P[ge])throw new hc(`Cannot interpolate values containing mismatched anchors. from[${ge}]: ${b[ge]}, to[${ge}]: `+P[ge]);F.push(b[ge]);var[j,Z]=b[ge+1],[re,me]=P[ge+1];F.push([P1(j,re,g),P1(Z,me,g)])}return new ng(F)}};class Sf{constructor(u,g,b,P,F){for(var[j,Z]of(this.type=u,this.operator=g,this.interpolation=b,this.input=P,this.labels=[],this.outputs=[],F))this.labels.push(j),this.outputs.push(Z)}static interpolationFactor(u,g,b,P){let F=0;return"exponential"===u.name?F=uk(g,u.base,b,P):"linear"===u.name?F=uk(g,1,b,P):"cubic-bezier"===u.name&&(F=(u=new Oz((u=u.controlPoints)[0],u[1],u[2],u[3])).solve(uk(g,1,b,P))),F}static parse(u,g){let[b,P,F,...j]=u;if(!Array.isArray(P)||0===P.length)return g.error("Expected an interpolation type expression.",1);if("linear"===P[0])P={name:"linear"};else if("exponential"===P[0]){var Z=P[1];if("number"!=typeof Z)return g.error("Exponential interpolation requires a numeric base.",1,1);P={name:"exponential",base:Z}}else{if("cubic-bezier"!==P[0])return g.error("Unknown interpolation type "+String(P[0]),1,0);if(4!==(Z=P.slice(1)).length||Z.some(Ze=>"number"!=typeof Ze||Ze<0||1<Ze))return g.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);P={name:"cubic-bezier",controlPoints:Z}}if(u.length-1<4)return g.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return g.error("Expected an even number of arguments.");if(!(F=g.parse(F,2,Mn)))return null;var re=[];let me=null;"interpolate-hcl"===b||"interpolate-lab"===b?me=fa:g.expectedType&&"value"!==g.expectedType.kind&&(me=g.expectedType);for(let Ze=0;Ze<j.length;Ze+=2){var ge=j[Ze],Ie=j[Ze+1],ze=Ze+3,Xe=Ze+4;if("number"!=typeof ge)return g.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ze);if(re.length&&re[re.length-1][0]>=ge)return g.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ze);if(!(ze=g.parse(Ie,Xe,me)))return null;me=me||ze.type,re.push([ge,ze])}return zt(me,Mn)||zt(me,fa)||zt(me,Yo)||zt(me,xe)||zt(me,je(Mn))?new Sf(me,b,P,F,re):g.error(`Type ${Ue(me)} is not interpolatable.`)}evaluate(u){var g=this.outputs;if(1===(j=this.labels).length)return g[0].evaluate(u);var b=this.input.evaluate(u);if(b<=j[0])return g[0].evaluate(u);if(b>=j[(P=j.length)-1])return g[P-1].evaluate(u);var j,P=dP(j,b),Z=Sf.interpolationFactor(this.interpolation,b,j[P],j=j[P+1]),re=g[P].evaluate(u),me=g[P+1].evaluate(u);switch(this.operator){case"interpolate":return Ef[this.type.kind](re,me,Z);case"interpolate-hcl":return Ef.color(re,me,Z,"hcl");case"interpolate-lab":return Ef.color(re,me,Z,"lab")}}eachChild(u){u(this.input);for(const g of this.outputs)u(g)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function uk(d,u,g,b){return d-=g,0==(b-=g)?0:1===u?d/b:(Math.pow(u,d)-1)/(Math.pow(u,b)-1)}class NT{constructor(u,g){this.type=u,this.args=g}static parse(u,g){if(u.length<2)return g.error("Expectected at least one argument.");let b=null;const P=g.expectedType;P&&"value"!==P.kind&&(b=P);var F=[];for(const Z of u.slice(1)){var j=g.parse(Z,1+F.length,b,void 0,{typeAnnotation:"omit"});if(!j)return null;b=b||j.type,F.push(j)}if(b)return P&&F.some(Z=>Jt(P,Z.type))?new NT(Ki,F):new NT(b,F);throw new Error("No output type")}evaluate(u){let P,g=null,b=0;for(const F of this.args)if(b++,null!==(g=(g=F.evaluate(u))&&g instanceof rg&&!g.available&&(P=P||g.name,g=null,b===this.args.length)?P:g))break;return g}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}class fP{constructor(u,g){this.type=g.type,this.bindings=[].concat(u),this.result=g}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const g of this.bindings)u(g[1]);u(this.result)}static parse(u,g){if(u.length<4)return g.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);var b=[];for(let Z=1;Z<u.length-1;Z+=2){var P=u[Z];if("string"!=typeof P)return g.error(`Expected string, but found ${typeof P} instead.`,Z);if(/[^a-zA-Z0-9_]/.test(P))return g.error("Variable names must contain only alphanumeric characters or '_'.",Z);var F=g.parse(u[Z+1],Z+1);if(!F)return null;b.push([P,F])}var j=g.parse(u[u.length-1],u.length-1,g.expectedType,b);return j?new fP(b,j):null}outputDefined(){return this.result.outputDefined()}}function hF(d,u){return"=="===d||"!="===d?"boolean"===u.kind||"string"===u.kind||"number"===u.kind||"null"===u.kind||"value"===u.kind:"string"===u.kind||"number"===u.kind||"value"===u.kind}function pF(d,u,g,b){return 0===b.compare(u,g)}function $b(d,u,g){const b="=="!==d&&"!="!==d;return class hq{constructor(F,j,Z){this.type=Hr,this.lhs=F,this.rhs=j,this.collator=Z,this.hasUntypedArgument="value"===F.type.kind||"value"===j.type.kind}static parse(F,j){if(3!==F.length&&4!==F.length)return j.error("Expected two or three arguments.");var Z=F[0];let re=j.parse(F[1],1,Ki);if(!re)return null;if(!hF(Z,re.type))return j.concat(1).error(`"${Z}" comparisons are not supported for type '${Ue(re.type)}'.`);let me=j.parse(F[2],2,Ki);if(!me)return null;if(!hF(Z,me.type))return j.concat(2).error(`"${Z}" comparisons are not supported for type '${Ue(me.type)}'.`);if(re.type.kind!==me.type.kind&&"value"!==re.type.kind&&"value"!==me.type.kind)return j.error(`Cannot compare types '${Ue(re.type)}' and '${Ue(me.type)}'.`);b&&("value"===re.type.kind&&"value"!==me.type.kind?re=new fs(me.type,[re]):"value"!==re.type.kind&&"value"===me.type.kind&&(me=new fs(re.type,[me])));let ge=null;if(4===F.length){if("string"!==re.type.kind&&"string"!==me.type.kind&&"value"!==re.type.kind&&"value"!==me.type.kind)return j.error("Cannot use collator to compare non-string types.");if(!(ge=j.parse(F[3],3,bl)))return null}return new hq(re,me,ge)}evaluate(F){var j=this.lhs.evaluate(F),Z=this.rhs.evaluate(F);if(b&&this.hasUntypedArgument){var re=ud(j),me=ud(Z);if(re.kind!==me.kind||"string"!==re.kind&&"number"!==re.kind)throw new hc(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${re.kind}, ${me.kind}) instead.`)}return this.collator&&!b&&this.hasUntypedArgument&&(re=ud(j),me=ud(Z),"string"!==re.kind||"string"!==me.kind)?u(F,j,Z):this.collator?g(F,j,Z,this.collator.evaluate(F)):u(F,j,Z)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}}}DT=$b("==",function(d,u,g){return u===g},pF);var xd=$b("!=",function(d,u,g){return u!==g},function(d,u,g,b){return!pF(0,u,g,b)}),cg=$b("<",function(d,u,g){return u<g},function(d,u,g,b){return b.compare(u,g)<0}),kT=$b(">",function(d,u,g){return g<u},function(d,u,g,b){return 0<b.compare(u,g)}),Z_=$b("<=",function(d,u,g){return u<=g},function(d,u,g,b){return b.compare(u,g)<=0}),Bc=$b(">=",function(d,u,g){return g<=u},function(d,u,g,b){return 0<=b.compare(u,g)});class gP{constructor(u){this.type=Yc,this.sections=u}static parse(u,g){if(u.length<2)return g.error("Expected at least one argument.");var b=u[1];if(!Array.isArray(b)&&"object"==typeof b)return g.error("First argument must be an image or text section.");var P=[];let F=!1;for(let re=1;re<=u.length-1;++re){var j=u[re];if(F&&"object"==typeof j&&!Array.isArray(j)){F=!1;let me=null;if(j["font-scale"]&&!(me=g.parse(j["font-scale"],1,Mn)))return null;let ge=null;if(j["text-font"]&&!(ge=g.parse(j["text-font"],1,je(fi))))return null;let Ie=null;if(j["text-color"]&&!(Ie=g.parse(j["text-color"],1,fa)))return null;(j=P[P.length-1]).scale=me,j.font=ge,j.textColor=Ie}else{if(!(j=g.parse(u[re],1,Ki)))return null;var Z=j.type.kind;if("string"!==Z&&"value"!==Z&&"null"!==Z&&"resolvedImage"!==Z)return g.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,P.push({content:j,scale:null,font:null,textColor:null})}}return new gP(P)}evaluate(u){return new Cf(this.sections.map(g=>{var b=g.content.evaluate(u);return ud(b)===rt?new ok("",b,null,null,null):new ok(I1(b),null,g.scale?g.scale.evaluate(u):null,g.font?g.font.evaluate(u).join(","):null,g.textColor?g.textColor.evaluate(u):null)}))}eachChild(u){for(const g of this.sections)u(g.content),g.scale&&u(g.scale),g.font&&u(g.font),g.textColor&&u(g.textColor)}outputDefined(){return!1}}const Vb={"==":DT,"!=":xd,">":kT,"<":cg,">=":Bc,"<=":Z_,array:fs,at:class pq{constructor(u,g,b){this.type=u,this.index=g,this.input=b}static parse(u,g){var b;return 3!==u.length?g.error(`Expected 2 arguments, but found ${u.length-1} instead.`):(b=g.parse(u[1],1,Mn),u=g.parse(u[2],2,je(g.expectedType||Ki)),b&&u?new pq((g=u.type).itemType,b,u):null)}evaluate(b){var g=this.index.evaluate(b);if(b=this.input.evaluate(b),g<0)throw new hc(`Array index out of bounds: ${g} < 0.`);if(g>=b.length)throw new hc(`Array index out of bounds: ${g} > ${b.length-1}.`);if(g!==Math.floor(g))throw new hc(`Array index must be an integer, but found ${g} instead.`);return b[g]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}},boolean:fs,case:class fq{constructor(u,g,b){this.type=u,this.branches=g,this.otherwise=b}static parse(u,g){if(u.length<4)return g.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return g.error("Expected an odd number of arguments.");let b;g.expectedType&&"value"!==g.expectedType.kind&&(b=g.expectedType);var P=[];for(let re=1;re<u.length-1;re+=2){var F=g.parse(u[re],re,Hr);if(!F)return null;var j=g.parse(u[re+1],re+1,b);if(!j)return null;P.push([F,j]),b=b||j.type}var Z=g.parse(u[u.length-1],u.length-1,b);if(!Z)return null;if(b)return new fq(b,P,Z);throw new Error("Can't infer output type")}evaluate(u){for(var[g,b]of this.branches)if(g.evaluate(u))return b.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(var[g,b]of this.branches)u(g),u(b);u(this.otherwise)}outputDefined(){return this.branches.every(([,u])=>u.outputDefined())&&this.otherwise.outputDefined()}},coalesce:NT,collator:OT,format:gP,image:class gq{constructor(u){this.type=rt,this.input=u}static parse(u,g){return 2!==u.length?g.error("Expected two arguments."):(u=g.parse(u[1],1,fi))?new gq(u):g.error("No image name provided.")}evaluate(u){var g=this.input.evaluate(u),b=rg.fromString(g);return b&&u.availableImages&&(b.available=-1<u.availableImages.indexOf(g)),b}eachChild(u){u(this.input)}outputDefined(){return!1}},in:class mq{constructor(u,g){this.type=Hr,this.needle=u,this.haystack=g}static parse(u,g){var b;return 3!==u.length?g.error(`Expected 2 arguments, but found ${u.length-1} instead.`):(b=g.parse(u[1],1,Ki),u=g.parse(u[2],2,Ki),b&&u?mn(b.type,[Hr,fi,Mn,eo,Ki])?new mq(b,u):g.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(b.type)} instead`):null)}evaluate(u){var g=this.needle.evaluate(u);if(!(u=this.haystack.evaluate(u)))return!1;if(!Qt(g,["boolean","string","number","null"]))throw new hc(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(ud(g))} instead.`);if(Qt(u,["string","array"]))return 0<=u.indexOf(g);throw new hc(`Expected second argument to be of type array or string, but found ${Ue(ud(u))} instead.`)}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}},"index-of":class Tj{constructor(u,g,b){this.type=Mn,this.needle=u,this.haystack=g,this.fromIndex=b}static parse(u,g){var b,P;return u.length<=2||5<=u.length?g.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`):(b=g.parse(u[1],1,Ki),P=g.parse(u[2],2,Ki),b&&P?mn(b.type,[Hr,fi,Mn,eo,Ki])?4===u.length?(u=g.parse(u[3],3,Mn))?new Tj(b,P,u):null:new Tj(b,P):g.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(b.type)} instead`):null)}evaluate(u){var g=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!Qt(g,["boolean","string","number","null"]))throw new hc(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(ud(g))} instead.`);if(Qt(b,["string","array"]))return this.fromIndex?(u=this.fromIndex.evaluate(u),b.indexOf(g,u)):b.indexOf(g);throw new hc(`Expected second argument to be of type array or string, but found ${Ue(ud(b))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}},interpolate:Sf,"interpolate-hcl":Sf,"interpolate-lab":Sf,length:class _q{constructor(u){this.type=Mn,this.input=u}static parse(u,g){return 2!==u.length?g.error(`Expected 1 argument, but found ${u.length-1} instead.`):(u=g.parse(u[1],1))?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?g.error(`Expected argument of type string or array, but found ${Ue(u.type)} instead.`):new _q(u):null}evaluate(u){if("string"==typeof(u=this.input.evaluate(u))||Array.isArray(u))return u.length;throw new hc(`Expected value to be of type string or array, but found ${Ue(ud(u))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}},let:fP,literal:X_,match:class yq{constructor(u,g,b,P,F,j){this.inputType=u,this.type=g,this.input=b,this.cases=P,this.outputs=F,this.otherwise=j}static parse(u,g){if(u.length<5)return g.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return g.error("Expected an even number of arguments.");let b,P;g.expectedType&&"value"!==g.expectedType.kind&&(P=g.expectedType);var F={},j=[];for(let Ie=2;Ie<u.length-1;Ie+=2){let ze=u[Ie];var Z=u[Ie+1],re=(Array.isArray(ze)||(ze=[ze]),g.concat(Ie));if(0===ze.length)return re.error("Expected at least one branch label.");for(const Xe of ze){if("number"!=typeof Xe&&"string"!=typeof Xe)return re.error("Branch labels must be numbers or strings.");if("number"==typeof Xe&&Math.abs(Xe)>Number.MAX_SAFE_INTEGER)return re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Xe&&Math.floor(Xe)!==Xe)return re.error("Numeric branch labels must be integer values.");if(b){if(re.checkSubtype(b,ud(Xe)))return null}else b=ud(Xe);if(void 0!==F[String(Xe)])return re.error("Branch labels must be unique.");F[String(Xe)]=j.length}if(!(Z=g.parse(Z,Ie,P)))return null;P=P||Z.type,j.push(Z)}var me,ge=g.parse(u[1],1,Ki);return!ge||!(me=g.parse(u[u.length-1],u.length-1,P))||"value"!==ge.type.kind&&g.concat(1).checkSubtype(b,ge.type)?null:new yq(b,P,ge,F,j,me)}evaluate(u){var g=this.input.evaluate(u);return(ud(g)===this.inputType&&this.outputs[this.cases[g]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}},number:fs,"number-format":class vq{constructor(u,g,b,P,F){this.type=fi,this.number=u,this.locale=g,this.currency=b,this.minFractionDigits=P,this.maxFractionDigits=F}static parse(u,g){if(3!==u.length)return g.error("Expected two arguments.");var b=g.parse(u[1],1,Mn);if(!b)return null;if("object"!=typeof(u=u[2])||Array.isArray(u))return g.error("NumberFormat options argument must be an object.");let P=null;if(u.locale&&!(P=g.parse(u.locale,1,fi)))return null;let F=null;if(u.currency&&!(F=g.parse(u.currency,1,fi)))return null;let j=null;if(u["min-fraction-digits"]&&!(j=g.parse(u["min-fraction-digits"],1,Mn)))return null;let Z=null;return u["max-fraction-digits"]&&!(Z=g.parse(u["max-fraction-digits"],1,Mn))?null:new vq(b,P,F,j,Z)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}},object:fs,slice:class Aj{constructor(u,g,b,P){this.type=u,this.input=g,this.beginIndex=b,this.endIndex=P}static parse(u,g){var b,P;return u.length<=2||5<=u.length?g.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`):(b=g.parse(u[1],1,Ki),P=g.parse(u[2],2,Mn),b&&P?mn(b.type,[je(Ki),fi,Ki])?4===u.length?(u=g.parse(u[3],3,Mn))?new Aj(b.type,b,P,u):null:new Aj(b.type,b,P):g.error(`Expected first argument to be of type array or string, but found ${Ue(b.type)} instead`):null)}evaluate(u){var g=this.input.evaluate(u),b=this.beginIndex.evaluate(u);if(Qt(g,["string","array"]))return this.endIndex?(u=this.endIndex.evaluate(u),g.slice(b,u)):g.slice(b);throw new hc(`Expected first argument to be of type array or string, but found ${Ue(ud(g))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}},step:O1,string:fs,"to-boolean":bv,"to-color":bv,"to-number":bv,"to-string":bv,var:RT,within:M1};function fF(d,[u,g,b,P]){if(d=ak(u=u.evaluate(d),g=g.evaluate(d),b=b.evaluate(d),P=P?P.evaluate(d):1))throw new hc(d);return new Fc(u/255,g/255,b/255,P,!1)}function dk(d,u){return void 0===(u=u[d])?null:u}function R1(d){return{type:d}}function hk(d){return{result:"success",value:d}}function Gb(d){return{result:"error",value:d}}function qb(d){return"data-driven"===d["property-type"]||"cross-faded-data-driven"===d["property-type"]}function gF(d){return d.expression&&-1<d.expression.parameters.indexOf("zoom")}function pk(d){return d.expression&&d.expression.interpolated}function pc(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":null===d?"null":typeof d}function mP(d){return"object"==typeof d&&null!==d&&!Array.isArray(d)}function Pz(d){return d}function mF(d,u){var g="color"===u.type,b=d.stops&&"object"==typeof d.stops[0][0],P=b||void 0!==d.property,F=(P=b||!P,d.type||(pk(u)?"exponential":"interval"));if(g||"padding"===u.type){const Xe=(g?Fc:gh).parse;(d=Yr({},d)).stops&&(d.stops=d.stops.map(Ze=>[Ze[0],Xe(Ze[1])])),d.default=Xe(d.default?d.default:u.default)}if(d.colorSpace&&"rgb"!==(g=d.colorSpace)&&"hcl"!==g&&"lab"!==g)throw new Error(`Unknown color space: "${d.colorSpace}"`);let j,Z,re;if("exponential"===F)j=_P;else if("interval"===F)j=xz;else if("categorical"===F){j=Rz,Z=Object.create(null);for(const Xe of d.stops)Z[Xe[0]]=Xe[1];re=typeof d.stops[0][0]}else{if("identity"!==F)throw new Error(`Unknown function type "${F}"`);j=Nz}if(b){var me={},ge=[];for(let Ze=0;Ze<d.stops.length;Ze++){var Ie=d.stops[Ze],ze=Ie[0].zoom;void 0===me[ze]&&(me[ze]={zoom:ze,type:d.type,property:d.property,default:d.default,stops:[]},ge.push(ze)),me[ze].stops.push([Ie[0].value,Ie[1]])}const Xe=[];for(const Ze of ge)Xe.push([me[Ze].zoom,mF(me[Ze],u)]);return{kind:"composite",interpolationType:g={name:"linear"},interpolationFactor:Sf.interpolationFactor.bind(void 0,g),zoomStops:Xe.map(Ze=>Ze[0]),evaluate:({zoom:Ze},dt)=>_P({stops:Xe,base:d.base},u,Ze).evaluate(Ze,dt)}}return P?{kind:"camera",interpolationType:b="exponential"===F?{name:"exponential",base:void 0!==d.base?d.base:1}:null,interpolationFactor:Sf.interpolationFactor.bind(void 0,b),zoomStops:d.stops.map(Xe=>Xe[0]),evaluate:({zoom:Xe})=>j(d,u,Xe,Z,re)}:{kind:"source",evaluate:(Xe,Ze)=>void 0===(Ze=Ze&&Ze.properties?Ze.properties[d.property]:void 0)?LT(d.default,u.default):j(d,u,Ze,Z,re)}}function LT(d,u,g){return void 0!==d?d:void 0!==u?u:void 0!==g?g:void 0}function Rz(d,u,g,b,P){return LT(typeof g===P?b[g]:void 0,d.default,u.default)}function xz(d,u,g){return"number"!==pc(g)?LT(d.default,u.default):(1===(u=d.stops.length)||g<=d.stops[0][0]?d.stops[0]:g>=d.stops[u-1][0]?d.stops[u-1]:(u=dP(d.stops.map(b=>b[0]),g),d.stops[u]))[1]}function _P(d,u,g){var b=void 0!==d.base?d.base:1;if("number"!==pc(g))return LT(d.default,u.default);var P=d.stops.length;if(1===P||g<=d.stops[0][0])return d.stops[0][1];if(g>=d.stops[P-1][0])return d.stops[P-1][1];P=dP(d.stops.map(me=>me[0]),g);const F=(me=g,ge=b,ze=d.stops[P+1][0],me-=Ie=d.stops[P][0],0==(ze-=Ie)?0:1===ge?me/ze:(Math.pow(ge,me)-1)/(Math.pow(ge,ze)-1)),j=d.stops[P][1],Z=d.stops[P+1][1],re=Ef[u.type]||Pz;var me,ge,Ie,ze;return"function"==typeof j.evaluate?{evaluate(...Ie){var ge=j.evaluate.apply(void 0,Ie);if(Ie=Z.evaluate.apply(void 0,Ie),void 0!==ge&&void 0!==Ie)return re(ge,Ie,F,d.colorSpace)}}:re(j,Z,F,d.colorSpace)}function Nz(d,u,g){switch(u.type){case"color":g=Fc.parse(g);break;case"formatted":g=Cf.fromString(g.toString());break;case"resolvedImage":g=rg.fromString(g.toString());break;case"padding":g=gh.parse(g);break;default:pc(g)===u.type||"enum"===u.type&&u.values[g]||(g=void 0)}return LT(g,d.default,u.default)}bf.register(Vb,{error:[{kind:"error"},[fi],(d,[u])=>{throw new hc(u.evaluate(d))}],typeof:[fi,[Ki],(d,[u])=>Ue(ud(u.evaluate(d)))],"to-rgba":[je(Mn,4),[fa],(b,[g])=>{var[g,b,P,F]=g.evaluate(b).rgb;return[255*g,255*b,255*P,F]}],rgb:[fa,[Mn,Mn,Mn],fF],rgba:[fa,[Mn,Mn,Mn,Mn],fF],has:{type:Hr,overloads:[[[fi],(d,[u])=>u.evaluate(d)in d.properties()],[[fi,Xs],(d,[u,g])=>u.evaluate(d)in g.evaluate(d)]]},get:{type:Ki,overloads:[[[fi],(d,[u])=>dk(u.evaluate(d),d.properties())],[[fi,Xs],(d,[u,g])=>dk(u.evaluate(d),g.evaluate(d))]]},"feature-state":[Ki,[fi],(d,[u])=>dk(u.evaluate(d),d.featureState||{})],properties:[Xs,[],d=>d.properties()],"geometry-type":[fi,[],d=>d.geometryType()],id:[Ki,[],d=>d.id()],zoom:[Mn,[],d=>d.globals.zoom],"heatmap-density":[Mn,[],d=>d.globals.heatmapDensity||0],"line-progress":[Mn,[],d=>d.globals.lineProgress||0],accumulated:[Ki,[],d=>void 0===d.globals.accumulated?null:d.globals.accumulated],"+":[Mn,R1(Mn),(d,u)=>{let g=0;for(const b of u)g+=b.evaluate(d);return g}],"*":[Mn,R1(Mn),(d,u)=>{let g=1;for(const b of u)g*=b.evaluate(d);return g}],"-":{type:Mn,overloads:[[[Mn,Mn],(d,[u,g])=>u.evaluate(d)-g.evaluate(d)],[[Mn],(d,[u])=>-u.evaluate(d)]]},"/":[Mn,[Mn,Mn],(d,[u,g])=>u.evaluate(d)/g.evaluate(d)],"%":[Mn,[Mn,Mn],(d,[u,g])=>u.evaluate(d)%g.evaluate(d)],ln2:[Mn,[],()=>Math.LN2],pi:[Mn,[],()=>Math.PI],e:[Mn,[],()=>Math.E],"^":[Mn,[Mn,Mn],(d,[u,g])=>Math.pow(u.evaluate(d),g.evaluate(d))],sqrt:[Mn,[Mn],(d,[u])=>Math.sqrt(u.evaluate(d))],log10:[Mn,[Mn],(d,[u])=>Math.log(u.evaluate(d))/Math.LN10],ln:[Mn,[Mn],(d,[u])=>Math.log(u.evaluate(d))],log2:[Mn,[Mn],(d,[u])=>Math.log(u.evaluate(d))/Math.LN2],sin:[Mn,[Mn],(d,[u])=>Math.sin(u.evaluate(d))],cos:[Mn,[Mn],(d,[u])=>Math.cos(u.evaluate(d))],tan:[Mn,[Mn],(d,[u])=>Math.tan(u.evaluate(d))],asin:[Mn,[Mn],(d,[u])=>Math.asin(u.evaluate(d))],acos:[Mn,[Mn],(d,[u])=>Math.acos(u.evaluate(d))],atan:[Mn,[Mn],(d,[u])=>Math.atan(u.evaluate(d))],min:[Mn,R1(Mn),(d,u)=>Math.min(...u.map(g=>g.evaluate(d)))],max:[Mn,R1(Mn),(d,u)=>Math.max(...u.map(g=>g.evaluate(d)))],abs:[Mn,[Mn],(d,[u])=>Math.abs(u.evaluate(d))],round:[Mn,[Mn],(d,[u])=>(u=u.evaluate(d))<0?-Math.round(-u):Math.round(u)],floor:[Mn,[Mn],(d,[u])=>Math.floor(u.evaluate(d))],ceil:[Mn,[Mn],(d,[u])=>Math.ceil(u.evaluate(d))],"filter-==":[Hr,[fi,Ki],(d,[u,g])=>d.properties()[u.value]===g.value],"filter-id-==":[Hr,[Ki],(d,[u])=>d.id()===u.value],"filter-type-==":[Hr,[fi],(d,[u])=>d.geometryType()===u.value],"filter-<":[Hr,[fi,Ki],(d,[u,g])=>typeof(d=d.properties()[u.value])==typeof(u=g.value)&&d<u],"filter-id-<":[Hr,[Ki],(d,[u])=>typeof(d=d.id())==typeof(u=u.value)&&d<u],"filter->":[Hr,[fi,Ki],(d,[u,g])=>typeof(d=d.properties()[u.value])==typeof(u=g.value)&&u<d],"filter-id->":[Hr,[Ki],(d,[u])=>typeof(d=d.id())==typeof(u=u.value)&&u<d],"filter-<=":[Hr,[fi,Ki],(d,[u,g])=>typeof(d=d.properties()[u.value])==typeof(u=g.value)&&d<=u],"filter-id-<=":[Hr,[Ki],(d,[u])=>typeof(d=d.id())==typeof(u=u.value)&&d<=u],"filter->=":[Hr,[fi,Ki],(d,[u,g])=>typeof(d=d.properties()[u.value])==typeof(u=g.value)&&u<=d],"filter-id->=":[Hr,[Ki],(d,[u])=>typeof(d=d.id())==typeof(u=u.value)&&u<=d],"filter-has":[Hr,[Ki],(d,[u])=>u.value in d.properties()],"filter-has-id":[Hr,[],d=>null!==d.id()&&void 0!==d.id()],"filter-type-in":[Hr,[je(fi)],(d,[u])=>0<=u.value.indexOf(d.geometryType())],"filter-id-in":[Hr,[je(Ki)],(d,[u])=>0<=u.value.indexOf(d.id())],"filter-in-small":[Hr,[fi,je(Ki)],(d,[u,g])=>0<=g.value.indexOf(d.properties()[u.value])],"filter-in-large":[Hr,[fi,je(Ki)],(d,[u,g])=>{for(var b=d.properties()[u.value],P=g.value,F=0,j=g.value.length-1;F<=j;){var Z=F+j>>1;if(P[Z]===b)return!0;P[Z]>b?j=Z-1:F=1+Z}return!1}],all:{type:Hr,overloads:[[[Hr,Hr],(d,[u,g])=>u.evaluate(d)&&g.evaluate(d)],[R1(Hr),(d,u)=>{for(const g of u)if(!g.evaluate(d))return!1;return!0}]]},any:{type:Hr,overloads:[[[Hr,Hr],(d,[u,g])=>u.evaluate(d)||g.evaluate(d)],[R1(Hr),(d,u)=>{for(const g of u)if(g.evaluate(d))return!0;return!1}]]},"!":[Hr,[Hr],(d,[u])=>!u.evaluate(d)],"is-supported-script":[Hr,[fi],(d,[u])=>{var g=d.globals&&d.globals.isSupportedScript;return!g||g(u.evaluate(d))}],upcase:[fi,[fi],(d,[u])=>u.evaluate(d).toUpperCase()],downcase:[fi,[fi],(d,[u])=>u.evaluate(d).toLowerCase()],concat:[fi,R1(Ki),(d,u)=>u.map(g=>I1(g.evaluate(d))).join("")],"resolved-locale":[fi,[bl],(d,[u])=>u.evaluate(d).resolvedLocale()]});class fk{constructor(u,g){this.expression=u,this._warningHistory={},this._evaluator=new oF,this._defaultValue=g?function _F(d){return"color"===d.type&&mP(d.default)?new Fc(0,0,0,0):"color"===d.type?Fc.parse(d.default)||null:"padding"===d.type?gh.parse(d.default)||null:"variableAnchorOffsetCollection"===d.type?ng.parse(d.default)||null:void 0===d.default?null:d.default}(g):null,this._enumValues=g&&"enum"===g.type?g.values:null}evaluateWithoutErrorHandling(u,g,b,P,F,j){return this._evaluator.globals=u,this._evaluator.feature=g,this._evaluator.featureState=b,this._evaluator.canonical=P,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=j,this.expression.evaluate(this._evaluator)}evaluate(u,g,b,P,F,j){this._evaluator.globals=u,this._evaluator.feature=g||null,this._evaluator.featureState=b||null,this._evaluator.canonical=P,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=j||null;try{var Z=this.expression.evaluate(this._evaluator);if(null==Z||"number"==typeof Z&&Z!=Z)return this._defaultValue;if(!this._enumValues||Z in this._enumValues)return Z;throw new hc(`Expected value to be one of ${Object.keys(this._enumValues).map(re=>JSON.stringify(re)).join(", ")}, but found ${JSON.stringify(Z)} instead.`)}catch(re){return this._warningHistory[re.message]||(this._warningHistory[re.message]=!0,typeof console<"u"&&console.warn(re.message)),this._defaultValue}}}function yP(d){return Array.isArray(d)&&0<d.length&&"string"==typeof d[0]&&d[0]in Vb}function vP(d,u){var g=new MT(Vb,cP,[],u?(g={color:fa,string:fi,number:Mn,enum:fi,boolean:Hr,formatted:Yc,padding:Yo,resolvedImage:rt,variableAnchorOffsetCollection:xe},"array"!==(b=u).type?g[b.type]:je(g[b.value]||Ki,b.length)):void 0),b=g.parse(d,void 0,void 0,void 0,u&&"string"===u.type?{typeAnnotation:"coerce"}:void 0);return b?hk(new fk(b,u)):Gb(g.errors)}class hu{constructor(u,g){this.kind=u,this._styleExpression=g,this.isStateDependent="constant"!==u&&!xT(g.expression)}evaluateWithoutErrorHandling(u,g,b,P,F,j){return this._styleExpression.evaluateWithoutErrorHandling(u,g,b,P,F,j)}evaluate(u,g,b,P,F,j){return this._styleExpression.evaluate(u,g,b,P,F,j)}}class CP{constructor(u,g,b,P){this.kind=u,this.zoomStops=b,this._styleExpression=g,this.isStateDependent="camera"!==u&&!xT(g.expression),this.interpolationType=P}evaluateWithoutErrorHandling(u,g,b,P,F,j){return this._styleExpression.evaluateWithoutErrorHandling(u,g,b,P,F,j)}evaluate(u,g,b,P,F,j){return this._styleExpression.evaluate(u,g,b,P,F,j)}interpolationFactor(u,g,b){return this.interpolationType?Sf.interpolationFactor(this.interpolationType,u,g,b):0}}function Xl(F,u){var g,b,P;return"error"===(F=vP(F,u)).result?F:(g=lP(b=F.value.expression))||qb(u)?(P=uP(b,["zoom"]))||gF(u)?(b=function j(Z){let re=null;if(Z instanceof fP)re=j(Z.result);else if(Z instanceof NT){for(const me of Z.args)if(re=j(me))break}else(Z instanceof O1||Z instanceof Sf)&&Z.input instanceof bf&&"zoom"===Z.input.name&&(re=Z);return re instanceof Br||Z.eachChild(me=>{const ge=j(me);ge instanceof Br?re=ge:!re&&ge?re=new Br("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):re&&ge&&re!==ge&&(re=new Br("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),re}(b))||P?b instanceof Br?Gb([b]):b instanceof Sf&&!pk(u)?Gb([new Br("",'"interpolate" expressions cannot be used with this property')]):hk(b?new CP(g?"camera":"composite",F.value,b.labels,P=b instanceof Sf?b.interpolation:void 0):new hu(g?"constant":"source",F.value)):Gb([new Br("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):Gb([new Br("","zoom expressions not supported")]):Gb([new Br("","data expressions not supported")])}class El{constructor(u,g){this._parameters=u,this._specification=g,Yr(this,mF(this._parameters,this._specification))}static deserialize(u){return new El(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function gk(d){if(!0===d||!1===d)return 1;if(Array.isArray(d)&&0!==d.length)switch(d[0]){case"has":return 2<=d.length&&"$id"!==d[1]&&"$type"!==d[1];case"in":return 3<=d.length&&("string"!=typeof d[1]||Array.isArray(d[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==d.length||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const u of d.slice(1))if(!gk(u)&&"boolean"!=typeof u)return;return 1;default:return 1}}const Dz={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function EP(d){if(null==d)return{filter:()=>!0,needGeometry:!1};const u=vP(d=gk(d)?d:SP(d),Dz);if("error"===u.result)throw new Error(u.value.map(g=>g.key+": "+g.message).join(", "));return{filter:(g,b,P)=>u.value.evaluate(g,b,{},P),needGeometry:function g(b){if(!Array.isArray(b))return!1;if("within"===b[0])return!0;for(let P=1;P<b.length;P++)if(g(b[P]))return!0;return!1}(d)}}function yF(d,u){return d<u?-1:u<d?1:0}function SP(d){var u,g;return!d||(u=d[0],d.length<=1?"any"!==u:"=="===u?mk(d[1],d[2],"=="):"!="===u?wP(mk(d[1],d[2],"==")):"<"===u||">"===u||"<="===u||">="===u?mk(d[1],d[2],u):"any"===u?(g=d.slice(1),["any"].concat(g.map(SP))):"all"===u?["all"].concat(d.slice(1).map(SP)):"none"===u?["all"].concat(d.slice(1).map(SP).map(wP)):"in"===u?vF(d[1],d.slice(2)):"!in"===u?wP(vF(d[1],d.slice(2))):"has"===u?_k(d[1]):"!has"===u?wP(_k(d[1])):"within"!==u||d)}function mk(d,u,g){switch(d){case"$type":return["filter-type-"+g,u];case"$id":return["filter-id-"+g,u];default:return["filter-"+g,d,u]}}function vF(d,u){if(0===u.length)return!1;switch(d){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return 200<u.length&&!u.some(g=>typeof g!=typeof u[0])?["filter-in-large",d,["literal",u.sort(yF)]]:["filter-in-small",d,["literal",u]]}}function _k(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function wP(d){return["!",d]}function CF(d){let u="";for(const g of Be)u+="/"+function b(P){var F=typeof P;if("number"==F||"boolean"==F||"string"==F||null==P)return JSON.stringify(P);if(Array.isArray(P)){let re="[";for(const me of P)re+=b(me)+",";return re+"]"}var j=Object.keys(P).sort();let Z="{";for(let re=0;re<j.length;re++)Z+=`${JSON.stringify(j[re])}:${b(P[j[re]])},`;return Z+"}"}(d[g]);return u}function bF(g){var u=g.key;return(g=g.value)?[new Wt(u,g,"constants have been deprecated as of v8")]:[]}function pu(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function x1(d){if(Array.isArray(d))return d.map(x1);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){var u={};for(const g in d)u[g]=x1(d[g]);return u}return pu(d)}function ig(d){var u=d.key,g=d.value,b=d.valueSpec||{},P=d.objectElementValidators||{},F=d.style,j=d.styleSpec,Z=d.validateSpec;let re=[];if("object"!==(d=pc(g)))return[new Wt(u,g,`object expected, ${d} found`)];for(const Ie in g){var me=Ie.split(".")[0],ge=b[me]||b["*"];let ze;if(P[me])ze=P[me];else if(b[me])ze=Z;else if(P["*"])ze=P["*"];else{if(!b["*"]){re.push(new Wt(u,g[Ie],`unknown property "${Ie}"`));continue}ze=Z}re=re.concat(ze({key:(u&&u+".")+Ie,value:g[Ie],valueSpec:ge,style:F,styleSpec:j,object:g,objectKey:Ie,validateSpec:Z},g))}for(const Ie in b)P[Ie]||b[Ie].required&&void 0===b[Ie].default&&void 0===g[Ie]&&re.push(new Wt(u,g,`missing required property "${Ie}"`));return re}function yk(d){var u=d.value,g=d.valueSpec,P=d.style,F=d.styleSpec,j=d.key,Z=d.arrayElementValidator||d.validateSpec;if("array"!==pc(u))return[new Wt(j,u,`array expected, ${pc(u)} found`)];if(g.length&&u.length!==g.length)return[new Wt(j,u,`array length ${g.length} expected, length ${u.length} found`)];if(g["min-length"]&&u.length<g["min-length"])return[new Wt(j,u,`array length at least ${g["min-length"]} expected, length ${u.length} found`)];let re={type:g.value,values:g.values},me=(F.$version<7&&(re.function=g.function),"object"===pc(g.value)&&(re=g.value),[]);for(let ge=0;ge<u.length;ge++)me=me.concat(Z({array:u,arrayIndex:ge,value:u[ge],valueSpec:re,validateSpec:d.validateSpec,style:P,styleSpec:F,key:`${j}[${ge}]`}));return me}function vk(b){var u=b.key,g=b.value;b=b.valueSpec;let P=pc(g);return"number"!==(P="number"===P&&g!=g?"NaN":P)?[new Wt(u,g,`number expected, ${P} found`)]:"minimum"in b&&g<b.minimum?[new Wt(u,g,g+" is less than the minimum value "+b.minimum)]:"maximum"in b&&g>b.maximum?[new Wt(u,g,g+" is greater than the maximum value "+b.maximum)]:[]}function EF(d){const u=d.valueSpec,g=pu(d.value.type);let b,F,j,P={};var Z="categorical"!==g&&void 0===d.value.property,re=!Z;const me="array"===pc(d.value.stops)&&"array"===pc(d.value.stops[0])&&"object"===pc(d.value.stops[0][0]);var ge=ig({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Xe){if("identity"===g)return[new Wt(Xe.key,Xe.value,'identity function may not have a "stops" property')];let Ze=[];var dt=Xe.value;return Ze=Ze.concat(yk({key:Xe.key,value:dt,valueSpec:Xe.valueSpec,validateSpec:Xe.validateSpec,style:Xe.style,styleSpec:Xe.styleSpec,arrayElementValidator:Ie})),"array"===pc(dt)&&0===dt.length&&Ze.push(new Wt(Xe.key,dt,"array must have at least one stop")),Ze},default:function(Xe){return Xe.validateSpec({key:Xe.key,value:Xe.value,valueSpec:u,validateSpec:Xe.validateSpec,style:Xe.style,styleSpec:Xe.styleSpec})}}});return"identity"===g&&Z&&ge.push(new Wt(d.key,d.value,'missing required property "property"')),"identity"===g||d.value.stops||ge.push(new Wt(d.key,d.value,'missing required property "stops"')),"exponential"===g&&d.valueSpec.expression&&!pk(d.valueSpec)&&ge.push(new Wt(d.key,d.value,"exponential functions not supported")),8<=d.styleSpec.$version&&(re&&!qb(d.valueSpec)?ge.push(new Wt(d.key,d.value,"property functions not supported")):Z&&!gF(d.valueSpec)&&ge.push(new Wt(d.key,d.value,"zoom functions not supported"))),"categorical"!==g&&!me||void 0!==d.value.property||ge.push(new Wt(d.key,d.value,'"property" property is required')),ge;function Ie(Xe){let Ze=[];var dt=Xe.value,xt=Xe.key;if("array"!==pc(dt))return[new Wt(xt,dt,`array expected, ${pc(dt)} found`)];if(2!==dt.length)return[new Wt(xt,dt,`array length 2 expected, length ${dt.length} found`)];if(me){if("object"!==pc(dt[0]))return[new Wt(xt,dt,`object expected, ${pc(dt[0])} found`)];if(void 0===dt[0].zoom)return[new Wt(xt,dt,"object stop key must have zoom")];if(void 0===dt[0].value)return[new Wt(xt,dt,"object stop key must have value")];if(j&&j>pu(dt[0].zoom))return[new Wt(xt,dt[0].zoom,"stop zoom values must appear in ascending order")];pu(dt[0].zoom)!==j&&(j=pu(dt[0].zoom),F=void 0,P={}),Ze=Ze.concat(ig({key:xt+"[0]",value:dt[0],valueSpec:{zoom:{}},validateSpec:Xe.validateSpec,style:Xe.style,styleSpec:Xe.styleSpec,objectElementValidators:{zoom:vk,value:ze}}))}else Ze=Ze.concat(ze({key:xt+"[0]",value:dt[0],valueSpec:{},validateSpec:Xe.validateSpec,style:Xe.style,styleSpec:Xe.styleSpec},dt));return yP(x1(dt[1]))?Ze.concat([new Wt(xt+"[1]",dt[1],"expressions are not allowed in function stops.")]):Ze.concat(Xe.validateSpec({key:xt+"[1]",value:dt[1],valueSpec:u,validateSpec:Xe.validateSpec,style:Xe.style,styleSpec:Xe.styleSpec}))}function ze(Xe,ct){var dt=pc(Xe.value),xt=pu(Xe.value);if(ct=null!==Xe.value?Xe.value:ct,b){if(dt!==b)return[new Wt(Xe.key,ct,dt+" stop domain type must match previous stop domain type "+b)]}else b=dt;if("number"!==dt&&"string"!==dt&&"boolean"!==dt)return[new Wt(Xe.key,ct,"stop domain value must be a number, string, or boolean")];if("number"===dt||"categorical"===g)return"categorical"!==g||"number"!==dt||isFinite(xt)&&Math.floor(xt)===xt?"categorical"!==g&&"number"===dt&&void 0!==F&&xt<F?[new Wt(Xe.key,ct,"stop domain values must appear in ascending order")]:(F=xt,"categorical"===g&&xt in P?[new Wt(Xe.key,ct,"stop domain values must be unique")]:(P[xt]=!0,[])):[new Wt(Xe.key,ct,"integer expected, found "+xt)];{let Vt=`number expected, ${dt} found`;return qb(u)&&void 0===g&&(Vt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wt(Xe.key,ct,Vt)]}}}function Kb(d){var u=("property"===d.expressionContext?Xl:vP)(x1(d.value),d.valueSpec);if("error"===u.result)return u.value.map(g=>new Wt(""+d.key+g.key,d.value,g.message));if(u=u.value.expression||u.value._styleExpression.expression,"property"===d.expressionContext&&"text-font"===d.propertyKey&&!u.outputDefined())return[new Wt(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===d.expressionContext&&"layout"===d.propertyType&&!xT(u))return[new Wt(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===d.expressionContext&&!xT(u))return[new Wt(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&0===d.expressionContext.indexOf("cluster")){if(!uP(u,["zoom","feature-state"]))return[new Wt(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===d.expressionContext&&!lP(u))return[new Wt(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function FT(b){var u=b.key,g=b.value,P=(b=b.valueSpec,[]);return Array.isArray(b.values)?-1===b.values.indexOf(pu(g))&&P.push(new Wt(u,g,`expected one of [${b.values.join(", ")}], ${JSON.stringify(g)} found`)):-1===Object.keys(b.values).indexOf(pu(g))&&P.push(new Wt(u,g,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(g)} found`)),P}function Ck(d){return gk(x1(d.value))?Kb(Yr({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function u(g){const b=g.value,P=g.key;if("array"!==pc(b))return[new Wt(P,b,`array expected, ${pc(b)} found`)];const F=g.styleSpec;let j,Z=[];if(b.length<1)return[new Wt(P,b,"filter array must have at least 1 element")];switch(Z=Z.concat(FT({key:P+"[0]",value:b[0],valueSpec:F.filter_operator,style:g.style,styleSpec:g.styleSpec})),pu(b[0])){case"<":case"<=":case">":case">=":2<=b.length&&"$type"===pu(b[1])&&Z.push(new Wt(P,b,`"$type" cannot be use with operator "${b[0]}"`));case"==":case"!=":3!==b.length&&Z.push(new Wt(P,b,`filter array for operator "${b[0]}" must have 3 elements`));case"in":case"!in":2<=b.length&&"string"!==(j=pc(b[1]))&&Z.push(new Wt(P+"[1]",b[1],`string expected, ${j} found`));for(let re=2;re<b.length;re++)j=pc(b[re]),"$type"===pu(b[1])?Z=Z.concat(FT({key:`${P}[${re}]`,value:b[re],valueSpec:F.geometry_type,style:g.style,styleSpec:g.styleSpec})):"string"!==j&&"number"!==j&&"boolean"!==j&&Z.push(new Wt(`${P}[${re}]`,b[re],`string, number, or boolean expected, ${j} found`));break;case"any":case"all":case"none":for(let re=1;re<b.length;re++)Z=Z.concat(u({key:`${P}[${re}]`,value:b[re],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":j=pc(b[1]),2!==b.length?Z.push(new Wt(P,b,`filter array for "${b[0]}" operator must have 2 elements`)):"string"!==j&&Z.push(new Wt(P+"[1]",b[1],`string expected, ${j} found`));break;case"within":j=pc(b[1]),2!==b.length?Z.push(new Wt(P,b,`filter array for "${b[0]}" operator must have 2 elements`)):"object"!==j&&Z.push(new Wt(P+"[1]",b[1],`object expected, ${j} found`))}return Z}(d)}function SF(d,u){var g=d.key,b=d.validateSpec,P=d.style,F=d.styleSpec,j=d.value,Z=d.objectKey,re=F[u+"_"+d.layerType];if(!re)return[];var me=Z.match(/^(.*)-transition$/);if("paint"===u&&me&&re[me[1]]&&re[me[1]].transition)return b({key:g,value:j,valueSpec:F.transition,style:P,styleSpec:F});if(!(me=d.valueSpec||re[Z]))return[new Wt(g,j,`unknown property "${Z}"`)];let ge;return"string"===pc(j)&&qb(me)&&!me.tokens&&(ge=/^{([^}]+)}$/.exec(j))?[new Wt(g,j,`"${Z}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ge[1])} }\`.`)]:(re=[],"symbol"===d.layerType&&("text-field"===Z&&P&&!P.glyphs&&re.push(new Wt(g,j,'use of "text-field" requires a style "glyphs" property')),"text-font"===Z)&&mP(x1(j))&&"identity"===pu(j.type)&&re.push(new Wt(g,j,'"text-font" does not support identity functions')),re.concat(b({key:d.key,value:j,valueSpec:me,style:P,styleSpec:F,expressionContext:"property",propertyType:u,propertyKey:Z})))}function bk(d){return SF(d,"paint")}function Ek(d){return SF(d,"layout")}function HT(d){let u=[];const g=d.value,b=d.key;var P,F,j=d.style;const Z=d.styleSpec;g.type||g.ref||u.push(new Wt(b,g,'either "type" or "ref" is required'));let re=pu(g.type);const me=pu(g.ref);if(g.id){var ge=pu(g.id);for(let ze=0;ze<d.arrayIndex;ze++){var Ie=j.layers[ze];pu(Ie.id)===ge&&u.push(new Wt(b,g.id,`duplicate layer id "${g.id}", previously used at line `+Ie.id.__line__))}}if("ref"in g){let ze;["type","source","source-layer","filter","layout"].forEach(Xe=>{Xe in g&&u.push(new Wt(b,g[Xe],`"${Xe}" is prohibited for ref layers`))}),j.layers.forEach(Xe=>{pu(Xe.id)===me&&(ze=Xe)}),ze?ze.ref?u.push(new Wt(b,g.ref,"ref cannot reference another ref layer")):re=pu(ze.type):u.push(new Wt(b,g.ref,`ref layer "${me}" not found`))}else"background"!==re&&(g.source?(F=(P=j.sources&&j.sources[g.source])&&pu(P.type),P?"vector"===F&&"raster"===re?u.push(new Wt(b,g.source,`layer "${g.id}" requires a raster source`)):"raster-dem"!==F&&"hillshade"===re?u.push(new Wt(b,g.source,`layer "${g.id}" requires a raster-dem source`)):"raster"===F&&"raster"!==re?u.push(new Wt(b,g.source,`layer "${g.id}" requires a vector source`)):"vector"!==F||g["source-layer"]?"raster-dem"===F&&"hillshade"!==re?u.push(new Wt(b,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==re||!g.paint||!g.paint["line-gradient"]||"geojson"===F&&P.lineMetrics||u.push(new Wt(b,g,`layer "${g.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new Wt(b,g,`layer "${g.id}" must specify a "source-layer"`)):u.push(new Wt(b,g.source,`source "${g.source}" not found`))):u.push(new Wt(b,g,'missing required property "source"')));return u=u.concat(ig({key:b,value:g,valueSpec:Z.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:b+".type",value:g.type,valueSpec:Z.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:g,objectKey:"type"}),filter:Ck,layout:ze=>ig({layer:g,key:ze.key,value:ze.value,style:ze.style,styleSpec:ze.styleSpec,validateSpec:ze.validateSpec,objectElementValidators:{"*":Xe=>Ek(Yr({layerType:re},Xe))}}),paint:ze=>ig({layer:g,key:ze.key,value:ze.value,style:ze.style,styleSpec:ze.styleSpec,validateSpec:ze.validateSpec,objectElementValidators:{"*":Xe=>bk(Yr({layerType:re},Xe))}})}}))}function N1(g){var u=g.value,b=(g=g.key,pc(u));return"string"!==b?[new Wt(g,u,`string expected, ${b} found`)]:[]}const wF={promoteId:function({key:d,value:u}){if("string"===pc(u))return N1({key:d,value:u});var g=[];for(const b in u)g.push(...N1({key:d+"."+b,value:u[b]}));return g}};function TF(d){var u=d.value,g=d.key,b=d.styleSpec,P=d.style,F=d.validateSpec;if(!u.type)return[new Wt(g,u,'"type" is required')];var j=pu(u.type);let Z;switch(j){case"vector":case"raster":return ig({key:g,value:u,valueSpec:b["source_"+j.replace("-","_")],style:d.style,styleSpec:b,objectElementValidators:wF,validateSpec:F});case"raster-dem":return function(ge){var Ie=null!=(ct=ge.sourceName)?ct:"",ze=ge.value,Xe=ge.styleSpec,Ze=Xe.source_raster_dem,dt=ge.style;let xt=[];var ct=pc(ze);if(void 0!==ze)if("object"!==ct)xt.push(new Wt("source_raster_dem",ze,`object expected, ${ct} found`));else{var Vt="custom"===pu(ze.encoding),un=["redFactor","greenFactor","blueFactor","baseShift"],kn=ge.value.encoding?`"${ge.value.encoding}"`:"Default";for(const jn in ze)!Vt&&un.includes(jn)?xt.push(new Wt(jn,ze[jn],`In "${Ie}": "${jn}" is only valid when "encoding" is set to "custom". ${kn} encoding found`)):Ze[jn]?xt=xt.concat(ge.validateSpec({key:jn,value:ze[jn],valueSpec:Ze[jn],validateSpec:ge.validateSpec,style:dt,styleSpec:Xe})):xt.push(new Wt(jn,ze[jn],`unknown property "${jn}"`))}return xt}({sourceName:g,value:u,style:d.style,styleSpec:b,validateSpec:F});case"geojson":if(Z=ig({key:g,value:u,valueSpec:b.source_geojson,style:P,styleSpec:b,validateSpec:F,objectElementValidators:wF}),u.cluster)for(const ge in u.clusterProperties){var[me,re]=u.clusterProperties[ge],me="string"==typeof me?[me,["accumulated"],["get",ge]]:me;Z.push(...Kb({key:`${g}.${ge}.map`,value:re,validateSpec:F,expressionContext:"cluster-map"})),Z.push(...Kb({key:`${g}.${ge}.reduce`,value:me,validateSpec:F,expressionContext:"cluster-reduce"}))}return Z;case"video":return ig({key:g,value:u,valueSpec:b.source_video,style:P,validateSpec:F,styleSpec:b});case"image":return ig({key:g,value:u,valueSpec:b.source_image,style:P,validateSpec:F,styleSpec:b});case"canvas":return[new Wt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return FT({key:g+".type",value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,validateSpec:F,styleSpec:b})}}function AF(d){var u=d.value,g=d.styleSpec,b=g.light,P=d.style;let F=[];var j=pc(u);if(void 0!==u){if("object"!==j)return F.concat([new Wt("light",u,`object expected, ${j} found`)]);for(const re in u){var Z=re.match(/^(.*)-transition$/);F=F.concat(Z&&b[Z[1]]&&b[Z[1]].transition?d.validateSpec({key:re,value:u[re],valueSpec:g.transition,validateSpec:d.validateSpec,style:P,styleSpec:g}):b[re]?d.validateSpec({key:re,value:u[re],valueSpec:b[re],validateSpec:d.validateSpec,style:P,styleSpec:g}):[new Wt(re,u[re],`unknown property "${re}"`)])}}return F}function IF(F){var u=F.value,g=F.styleSpec,b=g.sky,P=F.style;if(F=pc(u),void 0===u)return[];if("object"!==F)return[new Wt("sky",u,`object expected, ${F} found`)];let j=[];for(const Z in u)j=j.concat(b[Z]?J_({key:Z,value:u[Z],valueSpec:b[Z],style:P,styleSpec:g}):[new Wt(Z,u[Z],`unknown property "${Z}"`)]);return j}function Sk(d){var u=d.value,g=d.styleSpec,b=g.terrain,P=d.style;let F=[];var j=pc(u);if(void 0!==u){if("object"!==j)return F.concat([new Wt("terrain",u,`object expected, ${j} found`)]);for(const Z in u)F=F.concat(b[Z]?d.validateSpec({key:Z,value:u[Z],valueSpec:b[Z],validateSpec:d.validateSpec,style:P,styleSpec:g}):[new Wt(Z,u[Z],`unknown property "${Z}"`)])}return F}function MF(d){let u=[];var g=d.value,b=d.key;if(Array.isArray(g)){var P=[],F=[];for(const j in g)g[j].id&&P.includes(g[j].id)&&u.push(new Wt(b,g,`all the sprites' ids must be unique, but ${g[j].id} is duplicated`)),P.push(g[j].id),g[j].url&&F.includes(g[j].url)&&u.push(new Wt(b,g,`all the sprites' URLs must be unique, but ${g[j].url} is duplicated`)),F.push(g[j].url),u=u.concat(ig({key:`${b}[${j}]`,value:g[j],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return u}return N1({key:b,value:g})}const TP={"*":()=>[],array:yk,boolean:function(g){var u=g.value,b=(g=g.key,pc(u));return"boolean"!==b?[new Wt(g,u,`boolean expected, ${b} found`)]:[]},number:vk,color:function(d){var u=d.key,g=pc(d=d.value);return"string"!==g?[new Wt(u,d,`color expected, ${g} found`)]:Fc.parse(String(d))?[]:[new Wt(u,d,`color expected, "${d}" found`)]},constants:bF,enum:FT,filter:Ck,function:EF,layer:HT,object:ig,source:TF,light:AF,sky:IF,terrain:Sk,string:N1,formatted:function(d){return 0===N1(d).length?[]:Kb(d)},resolvedImage:function(d){return 0===N1(d).length?[]:Kb(d)},padding:function(d){var u=d.key,g=d.value;if("array"!==pc(g))return vk({key:u,value:g,valueSpec:{}});{if(g.length<1||4<g.length)return[new Wt(u,g,`padding requires 1 to 4 values; ${g.length} values found`)];var b={type:"number"};let P=[];for(let F=0;F<g.length;F++)P=P.concat(d.validateSpec({key:`${u}[${F}]`,value:g[F],validateSpec:d.validateSpec,valueSpec:b}));return P}},variableAnchorOffsetCollection:function(d){var u=d.key,g=d.value,b=pc(g),P=d.styleSpec;if("array"!==b||g.length<1||g.length%2!=0)return[new Wt(u,g,"variableAnchorOffsetCollection requires a non-empty array of even length")];let F=[];for(let j=0;j<g.length;j+=2)F=(F=F.concat(FT({key:`${u}[${j}]`,value:g[j],valueSpec:P.layout_symbol["text-anchor"]}))).concat(yk({key:`${u}[${j+1}]`,value:g[j+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:P}));return F},sprite:MF};function J_(d){var u=d.value,g=d.valueSpec,b=d.styleSpec;return d.validateSpec=J_,g.expression&&mP(pu(u))?EF(d):g.expression&&yP(x1(u))?Kb(d):g.type&&TP[g.type]?TP[g.type](d):ig(Yr({},d,{valueSpec:g.type?b[g.type]:g}))}function UT(b){var u=b.value,g=b.key;return(b=N1(b)).length||(-1===u.indexOf("{fontstack}")&&b.push(new Wt(g,u,'"glyphs" url must include a "{fontstack}" token')),-1===u.indexOf("{range}")&&b.push(new Wt(g,u,'"glyphs" url must include a "{range}" token'))),b}function Yp(d,u=Ye){let g=[];return g=g.concat(J_({key:"",value:d,valueSpec:u.$root,styleSpec:u,style:d,validateSpec:J_,objectElementValidators:{glyphs:UT,"*":()=>[]}})),wk(g=d.constants?g.concat(bF({key:"constants",value:d.constants,style:d,styleSpec:u,validateSpec:J_})):g)}function og(d){return function(u){return d({...u,validateSpec:J_})}}function wk(d){return[].concat(d).sort((u,g)=>u.line-g.line)}function Vg(d){return function(...u){return wk(d.apply(this,u))}}Yp.source=Vg(og(TF)),Yp.sprite=Vg(og(MF)),Yp.glyphs=Vg(og(UT)),Yp.light=Vg(og(AF)),Yp.sky=Vg(og(IF)),Yp.terrain=Vg(og(Sk)),Yp.layer=Vg(og(HT)),Yp.filter=Vg(og(Ck)),Yp.paintProperty=Vg(og(bk)),Yp.layoutProperty=Vg(og(Ek));const Sv=Yp;DT=Sv.light;const kz=Sv.paintProperty,Lz=Sv.layoutProperty;function OF(d,u){let g=!1;if(u&&u.length)for(const b of u)d.fire(new Gi(new Error(b.message))),g=!0;return g}class BT{constructor(u,g,b){var P=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var F=new Int32Array(this.arrayBuffer);u=F[0],this.d=(g=F[1])+2*(b=F[2]);for(let ge=0;ge<this.d*this.d;ge++){var j=F[3+ge],Z=F[3+ge+1];P.push(j===Z?null:F.subarray(j,Z))}var re=F[3+P.length],me=F[3+P.length+1];this.keys=F.subarray(re,me),this.bboxes=F.subarray(me),this.insert=this._insertReadonly}else{this.d=g+2*b;for(let ge=0;ge<this.d*this.d;ge++)P.push([]);this.keys=[],this.bboxes=[]}this.n=g,this.extent=u,this.padding=b,this.scale=g/u,this.uid=0,this.min=-(re=b/g*u),this.max=u+re}insert(u,g,b,P,F){this._forEachCell(g,b,P,F,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(P),this.bboxes.push(F)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,g,b,P,F,j){this.cells[F].push(j)}query(u,g,b,P,F){var j=this.min,Z=this.max;return u<=j&&g<=j&&Z<=b&&Z<=P&&!F?Array.prototype.slice.call(this.keys):(this._forEachCell(u,g,b,P,this._queryCell,j=[],{},F),j)}_queryCell(u,g,b,P,F,j,Z,re){var me=this.cells[F];if(null!==me){var ge=this.keys,Ie=this.bboxes;for(let Ze=0;Ze<me.length;Ze++){var ze,Xe=me[Ze];void 0===Z[Xe]&&(ze=4*Xe,(re?re(Ie[0+ze],Ie[1+ze],Ie[2+ze],Ie[3+ze]):u<=Ie[2+ze]&&g<=Ie[3+ze]&&b>=Ie[0+ze]&&P>=Ie[1+ze])?(Z[Xe]=!0,j.push(ge[Xe])):Z[Xe]=!1)}}}_forEachCell(u,g,b,P,F,j,Z,re){var me=this._convertToCellCoord(u),ge=this._convertToCellCoord(g),Ie=this._convertToCellCoord(b),ze=this._convertToCellCoord(P);for(let Ze=me;Ze<=Ie;Ze++)for(let dt=ge;dt<=ze;dt++){var Xe=this.d*dt+Ze;if((!re||re(this._convertFromCellCoord(Ze),this._convertFromCellCoord(dt),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(dt+1)))&&F.call(this,u,g,b,P,Xe,j,Z,re))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;var u=this.cells,g=3+this.cells.length+1+1;let b=0;for(let Z=0;Z<this.cells.length;Z++)b+=this.cells[Z].length;var P=new Int32Array(g+b+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;let F=g;for(let Z=0;Z<u.length;Z++){var j=u[Z];P[3+Z]=F,P.set(j,F),F+=j.length}return P[3+u.length]=F,P.set(this.keys,F),F+=this.keys.length,P[3+u.length+1]=F,P.set(this.bboxes,F),F+=this.bboxes.length,P.buffer}static serialize(u,g){return u=u.toArrayBuffer(),g&&g.push(u),{buffer:u}}static deserialize(u){return new BT(u.buffer)}}const Gg={};function Fi(d,u,g={}){if(Gg[d])throw new Error(d+" is already registered.");Object.defineProperty(u,"_classRegistryKey",{value:d,writeable:!1}),Gg[d]={klass:u,omit:g.omit||[],shallow:g.shallow||[]}}Fi("Object",Object),Fi("TransferableGridIndex",BT),Fi("Color",Fc),Fi("Error",Error),Fi("AJAXError",Vi),Fi("ResolvedImage",rg),Fi("StylePropertyFunction",El),Fi("StyleExpression",fk,{omit:["_evaluator"]}),Fi("ZoomDependentExpression",CP),Fi("ZoomConstantExpression",hu),Fi("CompoundExpression",bf,{omit:["_evaluate"]});for(const d in Vb)Vb[d]._classRegistryKey||Fi("Expression_"+d,Vb[d]);function Wp(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&"ArrayBuffer"===d.constructor.name)}function ey(d,u){if(null==d||"boolean"==typeof d||"number"==typeof d||"string"==typeof d||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error)return d;if(Wp(d)||Bi(d))return u&&u.push(d),d;if(ArrayBuffer.isView(d))return b=d,u&&u.push(b.buffer),b;if(d instanceof ImageData)return u&&u.push(d.data.buffer),d;if(Array.isArray(d)){var g=[];for(const Z of d)g.push(ey(Z,u));return g}if("object"!=typeof d)throw new Error("can't serialize object of type "+typeof d);var b=d.constructor,P=b._classRegistryKey;if(!P)throw new Error("can't serialize object of unregistered class "+b.name);if(!Gg[P])throw new Error(P+" is not registered.");var F,j=b.serialize?b.serialize(d,u):{};if(b.serialize){if(u&&j===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const Z in d)!d.hasOwnProperty(Z)||0<=Gg[P].omit.indexOf(Z)||(F=d[Z],j[Z]=0<=Gg[P].shallow.indexOf(Z)?F:ey(F,u));d instanceof Error&&(j.message=d.message)}if(j.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==P&&(j.$name=P),j}function Yb(d){if(null==d||"boolean"==typeof d||"number"==typeof d||"string"==typeof d||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Wp(d)||Bi(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(Yb);if("object"!=typeof d)throw new Error("can't deserialize object of type "+typeof d);var u=d.$name||"Object";if(!Gg[u])throw new Error("can't deserialize unregistered class "+u);var g=Gg[u].klass;if(!g)throw new Error("can't deserialize unregistered class "+u);if(g.deserialize)return g.deserialize(d);var b,P=Object.create(g.prototype);for(const F of Object.keys(d))"$name"!==F&&(b=d[F],P[F]=0<=Gg[u].shallow.indexOf(F)?b:Yb(b));return P}class PF{constructor(){this.first=!0}update(u,g){var b=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=g):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=g),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=b,!0))}}const wi={"Latin-1 Supplement":d=>128<=d&&d<=255,Arabic:d=>1536<=d&&d<=1791,"Arabic Supplement":d=>1872<=d&&d<=1919,"Arabic Extended-A":d=>2208<=d&&d<=2303,"Hangul Jamo":d=>4352<=d&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>5120<=d&&d<=5759,Khmer:d=>6016<=d&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>6320<=d&&d<=6399,"General Punctuation":d=>8192<=d&&d<=8303,"Letterlike Symbols":d=>8448<=d&&d<=8527,"Number Forms":d=>8528<=d&&d<=8591,"Miscellaneous Technical":d=>8960<=d&&d<=9215,"Control Pictures":d=>9216<=d&&d<=9279,"Optical Character Recognition":d=>9280<=d&&d<=9311,"Enclosed Alphanumerics":d=>9312<=d&&d<=9471,"Geometric Shapes":d=>9632<=d&&d<=9727,"Miscellaneous Symbols":d=>9728<=d&&d<=9983,"Miscellaneous Symbols and Arrows":d=>11008<=d&&d<=11263,"CJK Radicals Supplement":d=>11904<=d&&d<=12031,"Kangxi Radicals":d=>12032<=d&&d<=12255,"Ideographic Description Characters":d=>12272<=d&&d<=12287,"CJK Symbols and Punctuation":d=>12288<=d&&d<=12351,Hiragana:d=>12352<=d&&d<=12447,Katakana:d=>12448<=d&&d<=12543,Bopomofo:d=>12544<=d&&d<=12591,"Hangul Compatibility Jamo":d=>12592<=d&&d<=12687,Kanbun:d=>12688<=d&&d<=12703,"Bopomofo Extended":d=>12704<=d&&d<=12735,"CJK Strokes":d=>12736<=d&&d<=12783,"Katakana Phonetic Extensions":d=>12784<=d&&d<=12799,"Enclosed CJK Letters and Months":d=>12800<=d&&d<=13055,"CJK Compatibility":d=>13056<=d&&d<=13311,"CJK Unified Ideographs Extension A":d=>13312<=d&&d<=19903,"Yijing Hexagram Symbols":d=>19904<=d&&d<=19967,"CJK Unified Ideographs":d=>19968<=d&&d<=40959,"Yi Syllables":d=>40960<=d&&d<=42127,"Yi Radicals":d=>42128<=d&&d<=42191,"Hangul Jamo Extended-A":d=>43360<=d&&d<=43391,"Hangul Syllables":d=>44032<=d&&d<=55215,"Hangul Jamo Extended-B":d=>55216<=d&&d<=55295,"Private Use Area":d=>57344<=d&&d<=63743,"CJK Compatibility Ideographs":d=>63744<=d&&d<=64255,"Arabic Presentation Forms-A":d=>64336<=d&&d<=65023,"Vertical Forms":d=>65040<=d&&d<=65055,"CJK Compatibility Forms":d=>65072<=d&&d<=65103,"Small Form Variants":d=>65104<=d&&d<=65135,"Arabic Presentation Forms-B":d=>65136<=d&&d<=65279,"Halfwidth and Fullwidth Forms":d=>65280<=d&&d<=65519};function D1(d){for(const u of d)if(zT(u.charCodeAt(0)))return!0;return!1}function RF(d){for(const g of d)if(u=g.charCodeAt(0),wi.Arabic(u)||wi["Arabic Supplement"](u)||wi["Arabic Extended-A"](u)||wi["Arabic Presentation Forms-A"](u)||wi["Arabic Presentation Forms-B"](u))return;var u;return 1}function zT(d){return 746===d||747===d||!(d<4352)&&(wi["Bopomofo Extended"](d)||wi.Bopomofo(d)||wi["CJK Compatibility Forms"](d)&&!(65097<=d&&d<=65103)||wi["CJK Compatibility Ideographs"](d)||wi["CJK Compatibility"](d)||wi["CJK Radicals Supplement"](d)||wi["CJK Strokes"](d)||!(!wi["CJK Symbols and Punctuation"](d)||12296<=d&&d<=12305||12308<=d&&d<=12319||12336===d)||wi["CJK Unified Ideographs Extension A"](d)||wi["CJK Unified Ideographs"](d)||wi["Enclosed CJK Letters and Months"](d)||wi["Hangul Compatibility Jamo"](d)||wi["Hangul Jamo Extended-A"](d)||wi["Hangul Jamo Extended-B"](d)||wi["Hangul Jamo"](d)||wi["Hangul Syllables"](d)||wi.Hiragana(d)||wi["Ideographic Description Characters"](d)||wi.Kanbun(d)||wi["Kangxi Radicals"](d)||wi["Katakana Phonetic Extensions"](d)||wi.Katakana(d)&&12540!==d||!(!wi["Halfwidth and Fullwidth Forms"](d)||65288===d||65289===d||65293===d||65306<=d&&d<=65310||65339===d||65341===d||65343===d||65371<=d&&d<=65503||65507===d||65512<=d&&d<=65519)||!(!wi["Small Form Variants"](d)||65112<=d&&d<=65118||65123<=d&&d<=65126)||wi["Unified Canadian Aboriginal Syllabics"](d)||wi["Unified Canadian Aboriginal Syllabics Extended"](d)||wi["Vertical Forms"](d)||wi["Yijing Hexagram Symbols"](d)||wi["Yi Syllables"](d)||!!wi["Yi Radicals"](d))}function xF(d){return!(zT(d)||wi["Latin-1 Supplement"](d)&&(167===d||169===d||174===d||177===d||188===d||189===d||190===d||215===d||247===d)||wi["General Punctuation"](d)&&(8214===d||8224===d||8225===d||8240===d||8241===d||8251===d||8252===d||8258===d||8263===d||8264===d||8265===d||8273===d)||wi["Letterlike Symbols"](d)||wi["Number Forms"](d)||wi["Miscellaneous Technical"](d)&&(8960<=d&&d<=8967||8972<=d&&d<=8991||8996<=d&&d<=9e3||9003===d||9085<=d&&d<=9114||9150<=d&&d<=9165||9167===d||9169<=d&&d<=9179||9186<=d&&d<=9215)||wi["Control Pictures"](d)&&9251!==d||wi["Optical Character Recognition"](d)||wi["Enclosed Alphanumerics"](d)||wi["Geometric Shapes"](d)||wi["Miscellaneous Symbols"](d)&&!(9754<=d&&d<=9759)||wi["Miscellaneous Symbols and Arrows"](d)&&(11026<=d&&d<=11055||11088<=d&&d<=11097||11192<=d&&d<=11243)||wi["CJK Symbols and Punctuation"](d)||wi.Katakana(d)||wi["Private Use Area"](d)||wi["CJK Compatibility Forms"](d)||wi["Small Form Variants"](d)||wi["Halfwidth and Fullwidth Forms"](d)||8734===d||8756===d||8757===d||9984<=d&&d<=10087||10102<=d&&d<=10131||65532===d||65533===d)}function NF(d){return 1424<=d&&d<=2303||wi["Arabic Presentation Forms-A"](d)||wi["Arabic Presentation Forms-B"](d)}const k1=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class il{constructor(u,g){this.zoom=u,g?(this.now=g.now,this.fadeDuration=g.fadeDuration,this.zoomHistory=g.zoomHistory,this.transition=g.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new PF,this.transition={})}isSupportedScript(u){return function Tk(d,u){for(const b of d)if(g=b.charCodeAt(0),!u&&NF(g)||2304<=g&&g<=3583||3840<=g&&g<=4255||wi.Khmer(g))return!1;var g;return!0}(u,"loaded"===k1.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){var u=this.zoom,g=u-Math.floor(u),b=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:g+(1-g)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*g}}}class AP{constructor(u,g){this.property=u,this.value=g,this.expression=function bP(d,u){if(mP(d))return new El(d,u);if(yP(d)){var g=Xl(d,u);if("error"===g.result)throw new Error(g.value.map(b=>b.key+": "+b.message).join(", "));return g.value}{let b=d;return"color"===u.type&&"string"==typeof d?b=Fc.parse(d):"padding"!==u.type||"number"!=typeof d&&!Array.isArray(d)?"variableAnchorOffsetCollection"===u.type&&Array.isArray(d)&&(b=ng.parse(d)):b=gh.parse(d),{kind:"constant",evaluate:()=>b}}}(void 0===g?u.specification.default:g,u.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(u,g,b){return this.property.possiblyEvaluate(this,u,g,b)}}class Ak{constructor(u){this.property=u,this.value=new AP(u,void 0)}transitioned(u,g){return new Ik(this.property,this.value,g,ri({},u.transition,this.transition),u.now)}untransitioned(){return new Ik(this.property,this.value,null,{},0)}}class IP{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Er(this._values[u].value.value)}setValue(u,g){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Ak(this._values[u].property)),this._values[u].value=new AP(this._values[u].property,null===g?void 0:Er(g))}getTransition(u){return Er(this._values[u].transition)}setTransition(u,g){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Ak(this._values[u].property)),this._values[u].transition=Er(g)||void 0}serialize(){var u={};for(const b of Object.keys(this._values)){var g;void 0!==(void 0!==(g=this.getValue(b))&&(u[b]=g),g=this.getTransition(b))&&(u[b+"-transition"]=g)}return u}transitioned(u,g){var b=new MP(this._properties);for(const P of Object.keys(this._values))b._values[P]=this._values[P].transitioned(u,g._values[P]);return b}untransitioned(){var u=new MP(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].untransitioned();return u}}class Ik{constructor(u,g,b,P,F){this.property=u,this.value=g,this.begin=F+P.delay||0,this.end=this.begin+P.duration||0,u.specification.transition&&(P.delay||P.duration)&&(this.prior=b)}possiblyEvaluate(u,g,b){var P=u.now||0,F=this.value.possiblyEvaluate(u,g,b),j=this.prior;return j?P>this.end||this.value.isDataDriven()?(this.prior=null,F):P<this.begin?j.possiblyEvaluate(u,g,b):(P=(P-this.begin)/(this.end-this.begin),this.property.interpolate(j.possiblyEvaluate(u,g,b),F,function mt(d){var u,g;return d<=0?0:1<=d?1:(g=(u=d*d)*d,4*(d<.5?g:3*(d-u)+g-.75))}(P))):F}}class MP{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,g,b){var P=new jT(this._properties);for(const F of Object.keys(this._values))P._values[F]=this._values[F].possiblyEvaluate(u,g,b);return P}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Fz{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return void 0!==this._values[u].value}getValue(u){return Er(this._values[u].value)}setValue(u,g){this._values[u]=new AP(this._values[u].property,null===g?void 0:Er(g))}serialize(){var u={};for(const b of Object.keys(this._values)){var g=this.getValue(b);void 0!==g&&(u[b]=g)}return u}possiblyEvaluate(u,g,b){var P=new jT(this._properties);for(const F of Object.keys(this._values))P._values[F]=this._values[F].possiblyEvaluate(u,g,b);return P}}class ag{constructor(u,g,b){this.property=u,this.value=g,this.parameters=b}isConstant(){return"constant"===this.value.kind}constantOr(u){return"constant"===this.value.kind?this.value.value:u}evaluate(u,g,b,P){return this.property.evaluate(this.value,this.parameters,u,g,b,P)}}class jT{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class ho{constructor(u){this.specification=u}possiblyEvaluate(u,g){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(g)}interpolate(u,g,b){var P;return(P=Ef[P=this.specification.type])?P(u,g,b):u}}class xo{constructor(u,g){this.specification=u,this.overrides=g}possiblyEvaluate(u,g,b,P){return new ag(this,"constant"===u.expression.kind||"camera"===u.expression.kind?{kind:"constant",value:u.expression.evaluate(g,null,{},b,P)}:u.expression,g)}interpolate(u,g,b){var P;return"constant"!==u.value.kind||"constant"!==g.value.kind?u:void 0===u.value.value||void 0===g.value.value?new ag(this,{kind:"constant",value:void 0},u.parameters):(P=Ef[P=this.specification.type])?(P=P(u.value.value,g.value.value,b),new ag(this,{kind:"constant",value:P},u.parameters)):u}evaluate(u,g,b,P,F,j){return"constant"===u.kind?u.value:u.evaluate(g,b,P,F,j)}}class L1 extends xo{possiblyEvaluate(u,g,b,P){return void 0===u.value?new ag(this,{kind:"constant",value:void 0},g):"constant"===u.expression.kind?(b=u.expression.evaluate(g,null,{},b,P),b=this._calculate(P="resolvedImage"===u.property.specification.type&&"string"!=typeof b?b.name:b,P,P,g),new ag(this,{kind:"constant",value:b},g)):"camera"===u.expression.kind?(P=this._calculate(u.expression.evaluate({zoom:g.zoom-1}),u.expression.evaluate({zoom:g.zoom}),u.expression.evaluate({zoom:g.zoom+1}),g),new ag(this,{kind:"constant",value:P},g)):new ag(this,u.expression,g)}evaluate(u,g,b,P,F,j){return"source"===u.kind?(F=u.evaluate(g,b,P,F,j),this._calculate(F,F,F,g)):"composite"===u.kind?this._calculate(u.evaluate({zoom:Math.floor(g.zoom)-1},b,P),u.evaluate({zoom:Math.floor(g.zoom)},b,P),u.evaluate({zoom:Math.floor(g.zoom)+1},b,P),g):u.value}_calculate(u,g,b,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:u,to:g}:{from:b,to:g}}interpolate(u){return u}}class OP{constructor(u){this.specification=u}possiblyEvaluate(u,g,b,P){if(void 0!==u.value)return"constant"===u.expression.kind?(b=u.expression.evaluate(g,null,{},b,P),this._calculate(b,b,b,g)):this._calculate(u.expression.evaluate(new il(Math.floor(g.zoom-1),g)),u.expression.evaluate(new il(Math.floor(g.zoom),g)),u.expression.evaluate(new il(Math.floor(g.zoom+1),g)),g)}_calculate(u,g,b,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:u,to:g}:{from:b,to:g}}interpolate(u){return u}}class PP{constructor(u){this.specification=u}possiblyEvaluate(u,g,b,P){return!!u.expression.evaluate(g,null,{},b,P)}interpolate(){return!1}}class up{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const P in u){var g=((b=u[P]).specification.overridable&&this.overridableProperties.push(P),this.defaultPropertyValues[P]=new AP(b,void 0)),b=this.defaultTransitionablePropertyValues[P]=new Ak(b);this.defaultTransitioningPropertyValues[P]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[P]=g.possiblyEvaluate({})}}}Fi("DataDrivenProperty",xo),Fi("DataConstantProperty",ho),Fi("CrossFadedDataDrivenProperty",L1),Fi("CrossFadedProperty",OP),Fi("ColorRampProperty",PP);const $T="-transition";class sg extends Vo{constructor(u,g){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==u.type&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,"background"!==u.type&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),g.layout&&(this._unevaluatedLayout=new Fz(g.layout)),g.paint)){this._transitionablePaint=new IP(g.paint);for(const b in u.paint)this.setPaintProperty(b,u.paint[b],{validate:!1});for(const b in u.layout)this.setLayoutProperty(b,u.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jT(g.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return"visibility"===u?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,g,b={}){null!=g&&this._validate(Lz,`layers.${this.id}.layout.`+u,u,g,b)||("visibility"===u?this.visibility=g:this._unevaluatedLayout.setValue(u,g))}getPaintProperty(u){return u.endsWith($T)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,g,b={}){if(null!=g){var P=`layers.${this.id}.paint.`+u;if(this._validate(kz,P,u,g,b))return!1}var F;return u.endsWith($T)?(this._transitionablePaint.setTransition(u.slice(0,-11),g||void 0),!1):(b="cross-faded-data-driven"===(P=this._transitionablePaint._values[u]).property.specification["property-type"],F=P.value.isDataDriven(),P=P.value,this._transitionablePaint.setValue(u,g),this._handleSpecialPaintPropertyUpdate(u),(g=this._transitionablePaint._values[u].value).isDataDriven()||F||b||this._handleOverridablePaintPropertyUpdate(u,P,g))}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,g,b){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||"none"===this.visibility}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,g){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,g)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,g)}serialize(){var u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Zn(u,(g,b)=>!(void 0===g||"layout"===b&&!Object.keys(g).length||"paint"===b&&!Object.keys(g).length))}_validate(u,g,b,P,F={}){return(!F||!1!==F.validate)&&OF(this,u.call(Sv,{key:g,layerType:this.type,objectKey:b,value:P,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const g in this.paint._values){var u=this.paint.get(g);if(u instanceof ag&&qb(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}}const DF={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class VT{constructor(u,g){this._structArray=u,this._pos1=g*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fu{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,g){return u._trim(),g&&(u.isTransferred=!0,g.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){var g=Object.create(this.prototype);return g.arrayBuffer=u.arrayBuffer,g.length=u.length,g.capacity=u.arrayBuffer.byteLength/g.bytesPerElement,g._refreshViews(),g}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){u>this.capacity&&(this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),u=this.uint8,this._refreshViews(),u)&&this.uint8.set(u)}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Wu(d,u=1){let g=0,b=0;return{members:d.map(P=>{var F=DF[F=P.type].BYTES_PER_ELEMENT,j=g=Mk(g,Math.max(u,F)),Z=P.components||1;return b=Math.max(b,F),g+=F*Z,{name:P.name,type:P.type,components:Z,offset:j}}),size:Mk(g,Math.max(b,u)),alignment:u}}function Mk(d,u){return Math.ceil(d/u)*u}class Wb extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g){var b=this.length;return this.resize(b+1),this.emplace(b,u,g)}emplace(u,g,b){var P=2*u;return this.int16[0+P]=g,this.int16[1+P]=b,u}}Wb.prototype.bytesPerElement=4,Fi("StructArrayLayout2i4",Wb);class GT extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,b){var P=this.length;return this.resize(P+1),this.emplace(P,u,g,b)}emplace(u,g,b,P){var F=3*u;return this.int16[0+F]=g,this.int16[1+F]=b,this.int16[2+F]=P,u}}GT.prototype.bytesPerElement=6,Fi("StructArrayLayout3i6",GT);class Ok extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,b,P){var F=this.length;return this.resize(F+1),this.emplace(F,u,g,b,P)}emplace(u,g,b,P,F){var j=4*u;return this.int16[0+j]=g,this.int16[1+j]=b,this.int16[2+j]=P,this.int16[3+j]=F,u}}Ok.prototype.bytesPerElement=8,Fi("StructArrayLayout4i8",Ok);class Pk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j){var Z=this.length;return this.resize(Z+1),this.emplace(Z,u,g,b,P,F,j)}emplace(u,g,b,P,F,j,Z){var re=6*u;return this.int16[0+re]=g,this.int16[1+re]=b,this.int16[2+re]=P,this.int16[3+re]=F,this.int16[4+re]=j,this.int16[5+re]=Z,u}}Pk.prototype.bytesPerElement=12,Fi("StructArrayLayout2i4i12",Pk);class RP extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j){var Z=this.length;return this.resize(Z+1),this.emplace(Z,u,g,b,P,F,j)}emplace(u,g,b,P,F,j,Z){var re=4*u,me=8*u;return this.int16[0+re]=g,this.int16[1+re]=b,this.uint8[4+me]=P,this.uint8[5+me]=F,this.uint8[6+me]=j,this.uint8[7+me]=Z,u}}RP.prototype.bytesPerElement=8,Fi("StructArrayLayout2i4ub8",RP);class Qb extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g){var b=this.length;return this.resize(b+1),this.emplace(b,u,g)}emplace(u,g,b){var P=2*u;return this.float32[0+P]=g,this.float32[1+P]=b,u}}Qb.prototype.bytesPerElement=8,Fi("StructArrayLayout2f8",Qb);class xP extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j,Z,re,me,ge){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,u,g,b,P,F,j,Z,re,me,ge)}emplace(u,g,b,P,F,j,Z,re,me,ge,Ie){var ze=10*u;return this.uint16[0+ze]=g,this.uint16[1+ze]=b,this.uint16[2+ze]=P,this.uint16[3+ze]=F,this.uint16[4+ze]=j,this.uint16[5+ze]=Z,this.uint16[6+ze]=re,this.uint16[7+ze]=me,this.uint16[8+ze]=ge,this.uint16[9+ze]=Ie,u}}xP.prototype.bytesPerElement=20,Fi("StructArrayLayout10ui20",xP);class NP extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j,Z,re,me,ge,Ie,ze){var Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,u,g,b,P,F,j,Z,re,me,ge,Ie,ze)}emplace(u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe){var Ze=12*u;return this.int16[0+Ze]=g,this.int16[1+Ze]=b,this.int16[2+Ze]=P,this.int16[3+Ze]=F,this.uint16[4+Ze]=j,this.uint16[5+Ze]=Z,this.uint16[6+Ze]=re,this.uint16[7+Ze]=me,this.int16[8+Ze]=ge,this.int16[9+Ze]=Ie,this.int16[10+Ze]=ze,this.int16[11+Ze]=Xe,u}}NP.prototype.bytesPerElement=24,Fi("StructArrayLayout4i4ui4i24",NP);class Xb extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,b){var P=this.length;return this.resize(P+1),this.emplace(P,u,g,b)}emplace(u,g,b,P){var F=3*u;return this.float32[0+F]=g,this.float32[1+F]=b,this.float32[2+F]=P,u}}Xb.prototype.bytesPerElement=12,Fi("StructArrayLayout3f12",Xb);class Rk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){var g=this.length;return this.resize(g+1),this.emplace(g,u)}emplace(u,g){return this.uint32[+u+0]=g,u}}Rk.prototype.bytesPerElement=4,Fi("StructArrayLayout1ul4",Rk);class qT extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j,Z,re,me){var ge=this.length;return this.resize(ge+1),this.emplace(ge,u,g,b,P,F,j,Z,re,me)}emplace(u,g,b,P,F,j,Z,re,me,ge){var Ie=10*u,ze=5*u;return this.int16[0+Ie]=g,this.int16[1+Ie]=b,this.int16[2+Ie]=P,this.int16[3+Ie]=F,this.int16[4+Ie]=j,this.int16[5+Ie]=Z,this.uint32[3+ze]=re,this.uint16[8+Ie]=me,this.uint16[9+Ie]=ge,u}}qT.prototype.bytesPerElement=20,Fi("StructArrayLayout6i1ul2ui20",qT);class xk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j){var Z=this.length;return this.resize(Z+1),this.emplace(Z,u,g,b,P,F,j)}emplace(u,g,b,P,F,j,Z){var re=6*u;return this.int16[0+re]=g,this.int16[1+re]=b,this.int16[2+re]=P,this.int16[3+re]=F,this.int16[4+re]=j,this.int16[5+re]=Z,u}}xk.prototype.bytesPerElement=12,Fi("StructArrayLayout2i2i2i12",xk);class Nk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,u,g,b,P,F)}emplace(u,g,b,P,F,j){var Z=4*u,re=8*u;return this.float32[0+Z]=g,this.float32[1+Z]=b,this.float32[2+Z]=P,this.int16[6+re]=F,this.int16[7+re]=j,u}}Nk.prototype.bytesPerElement=16,Fi("StructArrayLayout2f1f2i16",Nk);class DP extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,b,P){var F=this.length;return this.resize(F+1),this.emplace(F,u,g,b,P)}emplace(u,g,b,P,F){var j=12*u,Z=3*u;return this.uint8[0+j]=g,this.uint8[1+j]=b,this.float32[1+Z]=P,this.float32[2+Z]=F,u}}DP.prototype.bytesPerElement=12,Fi("StructArrayLayout2ub2f12",DP);class KT extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,b){var P=this.length;return this.resize(P+1),this.emplace(P,u,g,b)}emplace(u,g,b,P){var F=3*u;return this.uint16[0+F]=g,this.uint16[1+F]=b,this.uint16[2+F]=P,u}}KT.prototype.bytesPerElement=6,Fi("StructArrayLayout3ui6",KT);class kP extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt,xt,ct){var Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt,xt,ct)}emplace(u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt,xt,ct,Vt){var un=24*u,kn=12*u,jn=48*u;return this.int16[0+un]=g,this.int16[1+un]=b,this.uint16[2+un]=P,this.uint16[3+un]=F,this.uint32[2+kn]=j,this.uint32[3+kn]=Z,this.uint32[4+kn]=re,this.uint16[10+un]=me,this.uint16[11+un]=ge,this.uint16[12+un]=Ie,this.float32[7+kn]=ze,this.float32[8+kn]=Xe,this.uint8[36+jn]=Ze,this.uint8[37+jn]=dt,this.uint8[38+jn]=xt,this.uint32[10+kn]=ct,this.int16[22+un]=Vt,u}}kP.prototype.bytesPerElement=48,Fi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kP);class Dk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt,xt,ct,Vt,un,kn,jn,tr,Ur,Pi,gi,Ar,li,Vr){var xr=this.length;return this.resize(xr+1),this.emplace(xr,u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt,xt,ct,Vt,un,kn,jn,tr,Ur,Pi,gi,Ar,li,Vr)}emplace(u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt,xt,ct,Vt,un,kn,jn,tr,Ur,Pi,gi,Ar,li,Vr,xr){var ir=32*u,Ui=16*u;return this.int16[0+ir]=g,this.int16[1+ir]=b,this.int16[2+ir]=P,this.int16[3+ir]=F,this.int16[4+ir]=j,this.int16[5+ir]=Z,this.int16[6+ir]=re,this.int16[7+ir]=me,this.uint16[8+ir]=ge,this.uint16[9+ir]=Ie,this.uint16[10+ir]=ze,this.uint16[11+ir]=Xe,this.uint16[12+ir]=Ze,this.uint16[13+ir]=dt,this.uint16[14+ir]=xt,this.uint16[15+ir]=ct,this.uint16[16+ir]=Vt,this.uint16[17+ir]=un,this.uint16[18+ir]=kn,this.uint16[19+ir]=jn,this.uint16[20+ir]=tr,this.uint16[21+ir]=Ur,this.uint16[22+ir]=Pi,this.uint32[12+Ui]=gi,this.float32[13+Ui]=Ar,this.float32[14+Ui]=li,this.uint16[30+ir]=Vr,this.uint16[31+ir]=xr,u}}Dk.prototype.bytesPerElement=64,Fi("StructArrayLayout8i15ui1ul2f2ui64",Dk);class LP extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){var g=this.length;return this.resize(g+1),this.emplace(g,u)}emplace(u,g){return this.float32[+u+0]=g,u}}LP.prototype.bytesPerElement=4,Fi("StructArrayLayout1f4",LP);class kk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,b){var P=this.length;return this.resize(P+1),this.emplace(P,u,g,b)}emplace(u,g,b,P){var F=3*u;return this.uint16[0+6*u]=g,this.float32[1+F]=b,this.float32[2+F]=P,u}}kk.prototype.bytesPerElement=12,Fi("StructArrayLayout1ui2f12",kk);class Lk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g,b){var P=this.length;return this.resize(P+1),this.emplace(P,u,g,b)}emplace(u,g,b,P){var F=4*u;return this.uint32[0+2*u]=g,this.uint16[2+F]=b,this.uint16[3+F]=P,u}}Lk.prototype.bytesPerElement=8,Fi("StructArrayLayout1ul2ui8",Lk);class Fk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,g){var b=this.length;return this.resize(b+1),this.emplace(b,u,g)}emplace(u,g,b){var P=2*u;return this.uint16[0+P]=g,this.uint16[1+P]=b,u}}Fk.prototype.bytesPerElement=4,Fi("StructArrayLayout2ui4",Fk);class wv extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){var g=this.length;return this.resize(g+1),this.emplace(g,u)}emplace(u,g){return this.uint16[+u+0]=g,u}}wv.prototype.bytesPerElement=2,Fi("StructArrayLayout1ui2",wv);class Hk extends fu{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,g,b,P){var F=this.length;return this.resize(F+1),this.emplace(F,u,g,b,P)}emplace(u,g,b,P,F){var j=4*u;return this.float32[0+j]=g,this.float32[1+j]=b,this.float32[2+j]=P,this.float32[3+j]=F,u}}Hk.prototype.bytesPerElement=16,Fi("StructArrayLayout4f16",Hk);class kF extends VT{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}kF.prototype.size=20;class LF extends qT{get(u){return new kF(this,u)}}Fi("CollisionBoxArray",LF);class FF extends VT{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}FF.prototype.size=48;class Uk extends kP{get(u){return new FF(this,u)}}Fi("PlacedSymbolArray",Uk);class HF extends VT{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}HF.prototype.size=64;class UF extends Dk{get(u){return new HF(this,u)}}Fi("SymbolInstanceArray",UF);class BF extends LP{getoffsetX(u){return this.float32[+u+0]}}Fi("GlyphOffsetArray",BF);class zF extends GT{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Fi("SymbolLineVertexArray",zF);class Zb extends VT{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Zb.prototype.size=12;class jF extends kk{get(u){return new Zb(this,u)}}Fi("TextAnchorOffsetArray",jF);class Bk extends VT{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Bk.prototype.size=8;class FP extends Lk{get(u){return new Bk(this,u)}}Fi("FeatureIndexArray",FP);class zk extends Wb{}class jk extends Wb{}class Hz extends Wb{}class HP extends Pk{}class UP extends RP{}class Uz extends Qb{}class Jb extends xP{}class $F extends NP{}class YT extends Xb{}class Bz extends Rk{}class VF extends xk{}class zz extends DP{}class eE extends KT{}class BP extends Fk{}const jz=Wu([{name:"a_pos",components:2,type:"Int16"}],4).members;class x{constructor(u=[]){this.segments=u}prepareSegment(u,g,b,P){let F=this.segments[this.segments.length-1];return u>x.MAX_VERTEX_ARRAY_LENGTH&&Hn(`Max vertices per segment is ${x.MAX_VERTEX_ARRAY_LENGTH}: bucket requested `+u),(!F||F.vertexLength+u>x.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==P)&&(F={vertexOffset:g.length,primitiveOffset:b.length,vertexLength:0,primitiveLength:0},void 0!==P&&(F.sortKey=P),this.segments.push(F)),F}get(){return this.segments}destroy(){for(const u of this.segments)for(const g in u.vaos)u.vaos[g].destroy()}static simpleSegment(u,g,b,P){return new x([{vertexOffset:u,primitiveOffset:g,vertexLength:b,primitiveLength:P,vaos:{},sortKey:0}])}}function c(d,u){return 256*(d=Yn(Math.floor(d),0,255))+Yn(Math.floor(u),0,255)}x.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fi("SegmentVector",x);const m=Wu([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);Z_=(cg={exports:{},exports:function(d,u){for(var g,b=d.length,P=u^b,F=0;4<=b;)g=1540483477*(65535&(g=255&d.charCodeAt(F)|(255&d.charCodeAt(++F))<<8|(255&d.charCodeAt(++F))<<16|(255&d.charCodeAt(++F))<<24))+((1540483477*(g>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16),b-=4,++F;switch(b){case 3:P^=(255&d.charCodeAt(F+2))<<16;case 2:P^=(255&d.charCodeAt(F+1))<<8;case 1:P=1540483477*(65535&(P^=255&d.charCodeAt(F)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}}).exports,(xd={exports:{}}).exports=Bc=(kT={exports:{},exports:function(d,u){for(var g,b,P=3&d.length,F=d.length-P,j=u,Z=3432918353,re=461845907,me=0;me<F;)b=255&d.charCodeAt(me)|(255&d.charCodeAt(++me))<<8|(255&d.charCodeAt(++me))<<16|(255&d.charCodeAt(++me))<<24,++me,j=27492+(65535&(g=5*(65535&(j=(j^=b=(65535&(b=(b=(65535&b)*Z+(((b>>>16)*Z&65535)<<16)&4294967295)<<15|b>>>17))*re+(((b>>>16)*re&65535)<<16)&4294967295)<<13|j>>>19))+((5*(j>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(b=0,P){case 3:b^=(255&d.charCodeAt(me+2))<<16;case 2:b^=(255&d.charCodeAt(me+1))<<8;case 1:j^=b=(65535&(b=(b=(65535&(b^=255&d.charCodeAt(me)))*Z+(((b>>>16)*Z&65535)<<16)&4294967295)<<15|b>>>17))*re+(((b>>>16)*re&65535)<<16)&4294967295}return j=2246822507*(65535&(j=(j^=d.length)^j>>>16))+((2246822507*(j>>>16)&65535)<<16)&4294967295,j=3266489909*(65535&(j^=j>>>13))+((3266489909*(j>>>16)&65535)<<16)&4294967295,(j^=j>>>16)>>>0}}).exports,xd.exports.murmur3=Bc,xd.exports.murmur2=Z_;var E=f(xd.exports);class O{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,g,b,P){this.ids.push(B(u)),this.positions.push(g,b,P)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");var g=B(u);let b=0,P=this.ids.length-1;for(;b<P;){var F=b+P>>1;this.ids[F]>=g?P=F:b=1+F}for(var j=[];this.ids[b]===g;)j.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return j}static serialize(P,g){var b=new Float64Array(P.ids);return ae(b,P=new Uint32Array(P.positions),0,b.length-1),g&&g.push(b.buffer,P.buffer),{ids:b,positions:P}}static deserialize(u){var g=new O;return g.ids=u.ids,g.positions=u.positions,g.indexed=!0,g}}function B(d){var u=+d;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:E(String(d))}function ae(d,u,g,b){for(;g<b;){var P=d[g+b>>1];let F=g-1,j=b+1;for(;;){for(;d[++F]<P;);for(;d[--j]>P;);if(F>=j)break;he(d,F,j),he(u,3*F,3*j),he(u,3*F+1,3*j+1),he(u,3*F+2,3*j+2)}j-g<b-j?(ae(d,u,g,j),g=j+1):(ae(d,u,j+1,b),b=j)}}function he(d,u,g){var b=d[u];d[u]=d[g],d[g]=b}Fi("FeaturePositionMap",O);class Ee{constructor(u,g){this.gl=u.gl,this.location=g}}class ke extends Ee{constructor(u,g){super(u,g),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Ge extends Ee{constructor(u,g){super(u,g),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Re extends Ee{constructor(u,g){super(u,g),this.current=Fc.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const qe=new Float32Array(16);function ft(d){return[c(255*d.r,255*d.g),c(255*d.b,255*d.a)]}class Ct{constructor(u,g,b){this.value=u,this.uniformNames=g.map(P=>"u_"+P),this.type=b}setUniform(u,g,b){u.set(b.constantOr(this.value))}getBinding(u,g,b){return new("color"===this.type?Re:ke)(u,g)}}class Rt{constructor(u,g){this.uniformNames=g.map(b=>"u_"+b),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,g){this.pixelRatioFrom=g.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=g.tlbr,this.patternTo=u.tlbr}setUniform(u,g,b,P){(P="u_pattern_to"===P?this.patternTo:"u_pattern_from"===P?this.patternFrom:"u_pixel_ratio_to"===P?this.pixelRatioTo:"u_pixel_ratio_from"===P?this.pixelRatioFrom:null)&&u.set(P)}getBinding(u,g,b){return new("u_pattern"===b.substr(0,9)?Ge:ke)(u,g)}}class Mt{constructor(u,g,b,P){this.expression=u,this.type=b,this.maxValue=0,this.paintVertexAttributes=g.map(F=>({name:"a_"+F,type:"Float32",components:"color"===b?2:1,offset:0})),this.paintVertexArray=new P}populatePaintArray(u,Z,b,P,F){var j=this.paintVertexArray.length;Z=this.expression.evaluate(new il(0),Z,{},P,[],F),this.paintVertexArray.resize(u),this._setPaintValue(j,u,Z)}updatePaintArray(u,g,b,P){b=this.expression.evaluate({zoom:0},b,P),this._setPaintValue(u,g,b)}_setPaintValue(u,g,b){if("color"===this.type){var P=ft(b);for(let F=u;F<g;F++)this.paintVertexArray.emplace(F,P[0],P[1])}else{for(let F=u;F<g;F++)this.paintVertexArray.emplace(F,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class on{constructor(u,g,b,P,F,j){this.expression=u,this.uniformNames=g.map(Z=>`u_${Z}_t`),this.type=b,this.useIntegerZoom=P,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=g.map(Z=>({name:"a_"+Z,type:"Float32",components:"color"===b?4:2,offset:0})),this.paintVertexArray=new j}populatePaintArray(u,Z,b,re,F){var j=this.expression.evaluate(new il(this.zoom),Z,{},re,[],F);Z=this.expression.evaluate(new il(this.zoom+1),Z,{},re,[],F),re=this.paintVertexArray.length,this.paintVertexArray.resize(u),this._setPaintValue(re,u,j,Z)}updatePaintArray(u,g,j,P){var F=this.expression.evaluate({zoom:this.zoom},j,P);j=this.expression.evaluate({zoom:this.zoom+1},j,P),this._setPaintValue(u,g,F,j)}_setPaintValue(u,g,b,P){if("color"===this.type){var F=ft(b),j=ft(P);for(let Z=u;Z<g;Z++)this.paintVertexArray.emplace(Z,F[0],F[1],j[0],j[1])}else{for(let Z=u;Z<g;Z++)this.paintVertexArray.emplace(Z,b,P);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(P))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,g){g=this.useIntegerZoom?Math.floor(g.zoom):g.zoom,g=Yn(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1),u.set(g)}getBinding(u,g,b){return new ke(u,g)}}class sn{constructor(u,g,b,P,F,j){this.expression=u,this.type=g,this.useIntegerZoom=b,this.zoom=P,this.layerId=j,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F}populatePaintArray(u,g,b){var P=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(P,u,g.patterns&&g.patterns[this.layerId],b)}updatePaintArray(u,g,b,P,F){this._setPaintValues(u,g,b.patterns&&b.patterns[this.layerId],F)}_setPaintValues(u,g,b,P){if(P&&b){var{min:b,mid:F,max:j}=b,Z=P[b],re=P[F],me=P[j];if(Z&&re&&me)for(let Ie=u;Ie<g;Ie++)this.zoomInPaintVertexArray.emplace(Ie,re.tl[0],re.tl[1],re.br[0],re.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],re.pixelRatio,Z.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ie,re.tl[0],re.tl[1],re.br[0],re.br[1],me.tl[0],me.tl[1],me.br[0],me.br[1],re.pixelRatio,me.pixelRatio)}}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,m.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,m.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cn{constructor(u,g,b){this.binders={},this._buffers=[];var P,F,j,Z,re,me,ge=[];for(const Ie in u.paint._values)b(Ie)&&(me=u.paint.get(Ie))instanceof ag&&qb(me.property.specification)&&(P=Qn(Ie,u.type),F=me.value,j=me.property.specification.type,Z=me.property.useIntegerZoom,me="cross-faded"===(me=me.property.specification["property-type"])||"cross-faded-data-driven"===me,"constant"===F.kind?(this.binders[Ie]=me?new Rt(F.value,P):new Ct(F.value,P,j),ge.push("/u_"+Ie)):"source"===F.kind||me?(re=Kn(Ie,j,"source"),this.binders[Ie]=me?new sn(F,j,Z,g,re,u.id):new Mt(F,P,j,re),ge.push("/a_"+Ie)):(me=Kn(Ie,j,"composite"),this.binders[Ie]=new on(F,P,j,Z,g,me),ge.push("/z_"+Ie)));this.cacheKey=ge.sort().join("")}getMaxValue(u){return(u=this.binders[u])instanceof Mt||u instanceof on?u.maxValue:0}populatePaintArrays(u,g,b,P,F){for(const Z in this.binders){var j=this.binders[Z];(j instanceof Mt||j instanceof on||j instanceof sn)&&j.populatePaintArray(u,g,b,P,F)}}setConstantPatternPositions(u,g){for(const P in this.binders){var b=this.binders[P];b instanceof Rt&&b.setConstantPatternPositions(u,g)}}updatePaintArrays(u,g,b,P,F){let j=!1;for(const ge in u)for(const Ie of g.getPositions(ge)){var Z=b.feature(Ie.index);for(const ze in this.binders){var re,me=this.binders[ze];(me instanceof Mt||me instanceof on||me instanceof sn)&&!0===me.expression.isStateDependent&&(re=P.paint.get(ze),me.expression=re.value,me.updatePaintArray(Ie.start,Ie.end,Z,u[ge],F),j=!0)}}return j}defines(){var u=[];for(const b in this.binders){var g=this.binders[b];(g instanceof Ct||g instanceof Rt)&&u.push(...g.uniformNames.map(P=>"#define HAS_UNIFORM_"+P))}return u}getBinderAttributes(){var u=[];for(const b in this.binders){var g=this.binders[b];if(g instanceof Mt||g instanceof on)for(let P=0;P<g.paintVertexAttributes.length;P++)u.push(g.paintVertexAttributes[P].name);else if(g instanceof sn)for(let P=0;P<m.members.length;P++)u.push(m.members[P].name)}return u}getBinderUniforms(){var u=[];for(const b in this.binders){var g=this.binders[b];if(g instanceof Ct||g instanceof Rt||g instanceof on)for(const P of g.uniformNames)u.push(P)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,g){var b=[];for(const j in this.binders){var P,F=this.binders[j];if(F instanceof Ct||F instanceof Rt||F instanceof on)for(const Z of F.uniformNames)g[Z]&&(P=F.getBinding(u,g[Z],Z),b.push({name:Z,property:j,binding:P}))}return b}setUniforms(u,g,b,P){for(var{name:F,property:j,binding:Z}of g)this.binders[j].setUniform(Z,P,b.get(j),F)}updatePaintBuffers(u){this._buffers=[];for(const P in this.binders){var g,b=this.binders[P];u&&b instanceof sn?(g=2===u.fromScale?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer)&&this._buffers.push(g):(b instanceof Mt||b instanceof on)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(u){for(const b in this.binders){var g=this.binders[b];(g instanceof Mt||g instanceof on||g instanceof sn)&&g.upload(u)}this.updatePaintBuffers()}destroy(){for(const g in this.binders){var u=this.binders[g];(u instanceof Mt||u instanceof on||u instanceof sn)&&u.destroy()}}}class Wn{constructor(u,g,b=(()=>!0)){this.programConfigurations={};for(const P of u)this.programConfigurations[P.id]=new cn(P,g,b);this.needsUpload=!1,this._featureMap=new O,this._bufferOffset=0}populatePaintArrays(u,g,b,P,F,j){for(const Z in this.programConfigurations)this.programConfigurations[Z].populatePaintArrays(u,g,P,F,j);void 0!==g.id&&this._featureMap.add(g.id,b,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,g,b,P){for(const F of b)this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(u,this._featureMap,g,F,P)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const g in this.programConfigurations)this.programConfigurations[g].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Qn(d,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(u+"-","").replace(/-/g,"_")]}function Kn(P,u,g){return(P={"line-pattern":{source:Jb,composite:Jb},"fill-pattern":{source:Jb,composite:Jb},"fill-extrusion-pattern":{source:Jb,composite:Jb}}[P])&&P[g]||{color:{source:Qb,composite:Hk},number:{source:LP,composite:Qb}}[u][g]}Fi("ConstantBinder",Ct),Fi("CrossFadedConstantBinder",Rt),Fi("SourceExpressionBinder",Mt),Fi("CrossFadedCompositeBinder",sn),Fi("CompositeExpressionBinder",on),Fi("ProgramConfiguration",cn,{omit:["_buffers"]}),Fi("ProgramConfigurationSet",Wn);const Cr=8192,ur=Math.pow(2,14)-1,$r=-ur-1;function mi(d){var u=Cr/d.extent,g=d.loadGeometry();for(let Z=0;Z<g.length;Z++){var b=g[Z];for(let re=0;re<b.length;re++){var P=b[re],F=Math.round(P.x*u),j=Math.round(P.y*u);P.x=Yn(F,$r,ur),P.y=Yn(j,$r,ur),(F<P.x||F>P.x+1||j<P.y||j>P.y+1)&&Hn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return g}function Yi(d,u){return{type:d.type,id:d.id,properties:d.properties,geometry:u?mi(d):[]}}function So(d,u,g,b,P){d.emplaceBack(2*u+(b+1)/2,2*g+(P+1)/2)}class wo{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(g=>g.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new jk,this.indexArray=new eE,this.segments=new x,this.programConfigurations=new Wn(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(u,g,b){var P,F,j,Z,re=this.layers[0],me=[];let ge=null,Ie=!1;for({feature:P,id:F,index:j,sourceLayerIndex:Z}of("circle"===re.type&&(ge=re.layout.get("circle-sort-key"),Ie=!ge.isConstant()),u)){var ze,Xe=this.layers[0]._featureFilter.needGeometry,Ze=Yi(P,Xe);this.layers[0]._featureFilter.filter(new il(this.zoom),Ze,b)&&(ze=Ie?ge.evaluate(Ze,{},b):void 0,Xe={id:F,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:j,geometry:Xe?Ze.geometry:mi(P),patterns:{},sortKey:ze},me.push(Xe))}Ie&&me.sort((un,kn)=>un.sortKey-kn.sortKey);for(const un of me){var{geometry:dt,index:xt,sourceLayerIndex:ct}=un,Vt=u[xt].feature;this.addFeature(un,dt,xt,b),g.featureIndex.insert(Vt,dt,xt,ct,this.index)}}update(u,g,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,b)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,jz),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,g,b,P){for(const re of g)for(const me of re){var F=me.x,j=me.y;if(!(F<0||F>=Cr||j<0||j>=Cr)){var Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey);const ge=Z.vertexLength;So(this.layoutVertexArray,F,j,-1,-1),So(this.layoutVertexArray,F,j,1,-1),So(this.layoutVertexArray,F,j,1,1),So(this.layoutVertexArray,F,j,-1,1),this.indexArray.emplaceBack(ge,ge+1,ge+2),this.indexArray.emplaceBack(ge,ge+3,ge+2),Z.vertexLength+=4,Z.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{},P)}}function Xi(d,u){for(let g=0;g<d.length;g++)if(Ms(u,d[g]))return!0;for(let g=0;g<u.length;g++)if(Ms(d,u[g]))return!0;return!!zi(d,u)}function po(d,u){if(1===d.length)return cs(u,d[0]);for(let b=0;b<u.length;b++){var g=u[b];for(let P=0;P<g.length;P++)if(Ms(d,g[P]))return!0}for(let b=0;b<d.length;b++)if(cs(u,d[b]))return!0;for(let b=0;b<u.length;b++)if(zi(d,u[b]))return!0;return!1}function zi(d,u){var g,b;if(0!==d.length&&0!==u.length)for(let re=0;re<d.length-1;re++){var P=d[re],F=d[re+1];for(let me=0;me<u.length-1;me++){var j=u[me],Z=u[me+1];if(b=F,hn(g=P,j,Z)!==hn(b,j,Z)&&hn(g,b,j)!==hn(g,b,Z))return 1}}}function gs(d,u,g){var b=g*g;if(1===u.length)return d.distSqr(u[0])<b;for(let P=1;P<u.length;P++)if(Hc(d,u[P-1],u[P])<b)return 1}function Hc(d,u,g){var b=u.distSqr(g);return 0===b||(b=((d.x-u.x)*(g.x-u.x)+(d.y-u.y)*(g.y-u.y))/b)<0?d.distSqr(u):d.distSqr(1<b?g:g.sub(u)._mult(b)._add(u))}function cs(d,u){let b,P,F,g=!1;for(let j=0;j<d.length;j++)for(let Z=0,re=(b=d[j]).length-1;Z<b.length;re=Z++)P=b[Z],F=b[re],P.y>u.y!=F.y>u.y&&u.x<(F.x-P.x)*(u.y-P.y)/(F.y-P.y)+P.x&&(g=!g);return g}function Ms(d,u){let g=!1;for(let F=0,j=d.length-1;F<d.length;j=F++){var b=d[F],P=d[j];b.y>u.y!=P.y>u.y&&u.x<(P.x-b.x)*(u.y-b.y)/(P.y-b.y)+b.x&&(g=!g)}return g}function Uc(d,u,g){var b=u.paint.get(d).value;return"constant"===b.kind?b.value:g.programConfigurations.get(u.id).getMaxValue(d)}function Os(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function Sc(d,u,g,b,P){if(!u[0]&&!u[1])return d;var F=D.convert(u)._mult(P),j=("viewport"===g&&F._rotate(-b),[]);for(let re=0;re<d.length;re++)j.push(d[re].sub(F));return j}let Od,qg;Fi("CircleBucket",wo,{omit:["layers"]});var _h={get paint(){return qg=qg||new up({"circle-radius":new xo(Ye.paint_circle["circle-radius"]),"circle-color":new xo(Ye.paint_circle["circle-color"]),"circle-blur":new xo(Ye.paint_circle["circle-blur"]),"circle-opacity":new xo(Ye.paint_circle["circle-opacity"]),"circle-translate":new ho(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new ho(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ho(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ho(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xo(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xo(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xo(Ye.paint_circle["circle-stroke-opacity"])})},get layout(){return Od=Od||new up({"circle-sort-key":new xo(Ye.layout_circle["circle-sort-key"])})}},Zl=1e-6,gu=typeof Float32Array<"u"?Float32Array:Array;function Lm(){var d=new gu(9);return gu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function ol(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function yh(d,Vt,g){var b=Vt[0],P=Vt[1],F=Vt[2],j=Vt[3],Z=Vt[4],re=Vt[5],me=Vt[6],ge=Vt[7],Ie=Vt[8],ze=Vt[9],Xe=Vt[10],Ze=Vt[11],dt=Vt[12],xt=Vt[13],ct=Vt[14],un=(Vt=Vt[15],g[0]),kn=g[1],jn=g[2],tr=g[3];return d[0]=un*b+kn*Z+jn*Ie+tr*dt,d[1]=un*P+kn*re+jn*ze+tr*xt,d[2]=un*F+kn*me+jn*Xe+tr*ct,d[3]=un*j+kn*ge+jn*Ze+tr*Vt,d[4]=(un=g[4])*b+(kn=g[5])*Z+(jn=g[6])*Ie+(tr=g[7])*dt,d[5]=un*P+kn*re+jn*ze+tr*xt,d[6]=un*F+kn*me+jn*Xe+tr*ct,d[7]=un*j+kn*ge+jn*Ze+tr*Vt,d[8]=(un=g[8])*b+(kn=g[9])*Z+(jn=g[10])*Ie+(tr=g[11])*dt,d[9]=un*P+kn*re+jn*ze+tr*xt,d[10]=un*F+kn*me+jn*Xe+tr*ct,d[11]=un*j+kn*ge+jn*Ze+tr*Vt,d[12]=(un=g[12])*b+(kn=g[13])*Z+(jn=g[14])*Ie+(tr=g[15])*dt,d[13]=un*P+kn*re+jn*ze+tr*xt,d[14]=un*F+kn*me+jn*Xe+tr*ct,d[15]=un*j+kn*ge+jn*Ze+tr*Vt,d}function Fh(){var d=new gu(3);return gu!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function Jl(d,u,g){var b=new gu(3);return b[0]=d,b[1]=u,b[2]=g,b}function Hm(d,j,g){var b=j[0],P=j[1],F=j[2];return d[0]=g[0]*b+g[4]*P+g[8]*F+g[12]*(j=j[3]),d[1]=g[1]*b+g[5]*P+g[9]*F+g[13]*j,d[2]=g[2]*b+g[6]*P+g[10]*F+g[14]*j,d[3]=g[3]*b+g[7]*P+g[11]*F+g[15]*j,d}function Nl(){var d=new gu(4);return gu!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}Math.hypot||(Math.hypot=function(){for(var d=0,u=arguments.length;u--;)d+=arguments[u]*arguments[u];return Math.sqrt(d)}),kT=yh,Fh(),cg=new gu(4),gu!=Float32Array&&(cg[0]=0,cg[1]=0,cg[2]=0,cg[3]=0),Fh(),Jl(1,0,0),Jl(0,1,0),Nl(),Nl(),Lm(),Bc=new gu(2),gu!=Float32Array&&(Bc[0]=0,Bc[1]=0);class Um extends sg{constructor(u){super(u,_h)}createBucket(u){return new wo(u)}queryRadius(u){return Uc("circle-radius",this,u)+Uc("circle-stroke-width",this,u)+Os(this.paint.get("circle-translate"))}queryIntersectsFeature(me,ge,b,P,F,j,Z,re){me=Sc(me,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),j.angle,Z),ge=this.paint.get("circle-radius").evaluate(ge,b)+this.paint.get("circle-stroke-width").evaluate(ge,b);var d,u,g,Ie="map"===this.paint.get("circle-pitch-alignment"),ze=Ie?me:function tE(d,u){return d.map(g=>Bm(g,u))}(me,re),Xe=Ie?ge*Z:ge;for(const xt of P)for(const ct of xt){var Ze=Ie?ct:Bm(ct,re);let Vt=Xe;var dt=Hm([],[ct.x,ct.y,0,1],re);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Vt*=dt[3]/j.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Vt*=j.cameraToCenterDistance/dt[3]),g=Vt,Ms(d=ze,u=Ze)||gs(u,d,g))return!0}return!1}}function Bm(d,u){return d=Hm([],[d.x,d.y,0,1],u),new D(d[0]/d[3],d[1]/d[3])}class Iv extends wo{}let $k;Fi("HeatmapBucket",Iv,{omit:["layers"]});var GF={get paint(){return $k=$k||new up({"heatmap-radius":new xo(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xo(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ho(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new PP(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ho(Ye.paint_heatmap["heatmap-opacity"])})}};function Vk(d,{width:u,height:g},b,P){if(P){if(P instanceof Uint8ClampedArray)P=new Uint8Array(P.buffer);else if(P.length!==u*g*b)throw new RangeError(`mismatched image size. expected: ${P.length} but got: `+u*g*b)}else P=new Uint8Array(u*g*b);return d.width=u,d.height=g,d.data=P,d}function zm(d,{width:u,height:g},b){var P;u===d.width&&g===d.height||(F1(d,P=Vk({},{width:u,height:g},b),{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,u),height:Math.min(d.height,g)},b),d.width=u,d.height=g,d.data=P.data)}function F1(d,u,g,b,P,F){if(0!==P.width&&0!==P.height){if(P.width>d.width||P.height>d.height||g.x>d.width-P.width||g.y>d.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>u.width||P.height>u.height||b.x>u.width-P.width||b.y>u.height-P.height)throw new RangeError("out of range destination coordinates for image copy");var j=d.data,Z=u.data;if(j===Z)throw new Error("srcData equals dstData, so image is already copied");for(let ge=0;ge<P.height;ge++){var re=((g.y+ge)*d.width+g.x)*F,me=((b.y+ge)*u.width+b.x)*F;for(let Ie=0;Ie<P.width*F;Ie++)Z[me+Ie]=j[re+Ie]}}}class Kg{constructor(u,g){Vk(this,u,1,g)}resize(u){zm(this,u,1)}clone(){return new Kg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,g,b,P,F){F1(u,g,b,P,F,1)}}class Yg{constructor(u,g){Vk(this,u,4,g)}resize(u){zm(this,u,4)}replace(u,g){g?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Yg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,g,b,P,F){F1(u,g,b,P,F,4)}}function XV(d){const u={};var g=d.resolution||256,b=d.clips?d.clips.length:1;const P=d.image||new Yg({width:g,height:b});if(Math.log(g)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - "+g);var F=(ge,Ie,ze)=>{u[d.evaluationKey]=ze,ze=d.expression.evaluate(u),P.data[ge+Ie+0]=Math.floor(255*ze.r/ze.a),P.data[ge+Ie+1]=Math.floor(255*ze.g/ze.a),P.data[ge+Ie+2]=Math.floor(255*ze.b/ze.a),P.data[ge+Ie+3]=Math.floor(255*ze.a)};if(d.clips)for(let ge=0,Ie=0;ge<b;++ge,Ie+=4*g)for(let ze=0,Xe=0;ze<g;ze++,Xe+=4){var j=ze/(g-1),{start:Z,end:re}=d.clips[ge];F(Ie,Xe,Z*(1-j)+re*j)}else for(let ge=0,Ie=0;ge<g;ge++,Ie+=4)F(0,Ie,ge/(g-1));return P}Fi("AlphaImage",Kg),Fi("RGBAImage",Yg);class aQ extends sg{createBucket(u){return new Iv(u)}constructor(u){super(u,GF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){"heatmap-color"===u&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=XV({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let ZV;var sQ={get paint(){return ZV=ZV||new up({"hillshade-illumination-direction":new ho(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ho(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ho(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ho(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ho(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ho(Ye.paint_hillshade["hillshade-accent-color"])})}};class cQ extends sg{constructor(u){super(u,sQ)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const lQ=Wu([{name:"a_pos",components:2,type:"Int16"}],4).members;function $z(d,u,g){g=g||2;var b,P,F,j,Z,re=u&&u.length,me=re?u[0]*g:d.length,ge=JV(d,0,me,g,!0),Ie=[];if(ge&&ge.next!==ge.prev){if(re&&(ge=function(dt,xt,ct,Vt){var un,kn,tr,Pi,gi,Ar,Ur=[];for(un=0,kn=xt.length;un<kn;un++)(tr=JV(dt,tr=xt[un]*Vt,un<kn-1?xt[un+1]*Vt:dt.length,Vt,!1))===tr.next&&(tr.steiner=!0),Ur.push(function(Pi){for(var gi=Pi,Ar=Pi;(gi.x<Ar.x||gi.x===Ar.x&&gi.y<Ar.y)&&(Ar=gi),(gi=gi.next)!==Pi;);return Ar}(tr));for(Ur.sort(uQ),un=0;un<Ur.length;un++)void 0,ct=(Ar=function(li,Vr){var xr,ir=Vr,Ui=li.x,Ri=li.y,qi=-1/0;do{if(Ri<=ir.y&&Ri>=ir.next.y&&ir.next.y!==ir.y){var zo=ir.x+(Ri-ir.y)*(ir.next.x-ir.x)/(ir.next.y-ir.y);if(zo<=Ui&&qi<zo&&(qi=zo,xr=ir.x<ir.next.x?ir:ir.next,zo===Ui))return xr}}while((ir=ir.next)!==Vr);if(!xr)return null;var ja,Ps,zc,na=xr,Zs=xr.x,vo=xr.y,ga=1/0;for(ir=xr;Ui>=ir.x&&ir.x>=Zs&&Ui!==ir.x&&zP(Ri<vo?Ui:qi,Ri,Zs,vo,Ri<vo?qi:Ui,Ri,ir.x,ir.y)&&(ja=Math.abs(Ri-ir.y)/(Ui-ir.x),qk(ir,li))&&(ja<ga||ja===ga&&(ir.x>xr.x||ir.x===xr.x&&Xu((Ps=xr).prev,Ps,(zc=ir).prev)<0&&Xu(zc.next,Ps,Ps.next)<0))&&(xr=ir,ga=ja),(ir=ir.next)!==na;);return xr}(Pi=Ur[un],gi=ct))?(WT(Pi=tG(Ar,Pi),Pi.next),WT(Ar,Ar.next)):gi;return ct}(d,u,ge,g)),d.length>80*g){for(var ze=b=d[0],Xe=P=d[1],Ze=g;Ze<me;Ze+=g)(F=d[Ze])<ze&&(ze=F),(j=d[Ze+1])<Xe&&(Xe=j),b<F&&(b=F),P<j&&(P=j);Z=0!==(Z=Math.max(b-ze,P-Xe))?32767/Z:0}Gk(ge,Ie,g,ze,Xe,Z,0)}return Ie}function JV(d,u,g,b,P){var F,j;if(P===0<qz(d,u,g,b))for(F=u;F<g;F+=b)j=nG(F,d[F],d[F+1],j);else for(F=g-b;u<=F;F-=b)j=nG(F,d[F],d[F+1],j);return j&&qF(j,j.next)&&(Kk(j),j=j.next),j}function WT(d,u){if(!d)return d;u=u||d;var g,b=d;do{if(g=!1,b.steiner||!qF(b,b.next)&&0!==Xu(b.prev,b,b.next))b=b.next;else{if(Kk(b),(b=u=b.prev)===b.next)break;g=!0}}while(g||b!==u);return u}function Gk(d,u,g,b,P,F,j){if(d){if(!j&&F){for(var Z=d,re=b,me=P,ge=F,Ie=Z;0===Ie.z&&(Ie.z=Vz(Ie.x,Ie.y,re,me,ge)),Ie.prevZ=Ie.prev,Ie.nextZ=Ie.next,(Ie=Ie.next)!==Z;);Ie.prevZ.nextZ=null,Ie.prevZ=null;var ze,Xe,Ze,dt,xt,ct,Vt,un,kn=Ie,jn=1;do{for(Xe=kn,xt=kn=null,ct=0;Xe;){for(ct++,Ze=Xe,ze=Vt=0;ze<jn&&(Vt++,Ze=Ze.nextZ);ze++);for(un=jn;0<Vt||0<un&&Ze;)0!==Vt&&(0===un||!Ze||Xe.z<=Ze.z)?(Xe=(dt=Xe).nextZ,Vt--):(Ze=(dt=Ze).nextZ,un--),xt?xt.nextZ=dt:kn=dt,dt.prevZ=xt,xt=dt;Xe=Ze}}while(xt.nextZ=null,jn*=2,1<ct)}for(var tr,Ur,Pi=d;d.prev!==d.next;)if(tr=d.prev,Ur=d.next,F?function(gi,Ar,li,Vr){var xr=gi.prev,ir=gi,Ui=gi.next;if(!(0<=Xu(xr,ir,Ui))){for(var Ri=xr.x,qi=ir.x,zo=Ui.x,ja=xr.y,na=ir.y,Zs=Ui.y,vo=Ri<qi?Ri<zo?Ri:zo:qi<zo?qi:zo,ga=ja<na?ja<Zs?ja:Zs:na<Zs?na:Zs,Ps=qi<Ri?zo<Ri?Ri:zo:zo<qi?qi:zo,zc=na<ja?Zs<ja?ja:Zs:Zs<na?na:Zs,Qg=Vz(vo,ga,Ar,li,Vr),Qp=Vz(Ps,zc,Ar,li,Vr),Rs=gi.prevZ,ms=gi.nextZ;Rs&&Rs.z>=Qg&&ms&&ms.z<=Qp;){if(Rs.x>=vo&&Rs.x<=Ps&&Rs.y>=ga&&Rs.y<=zc&&Rs!==xr&&Rs!==Ui&&zP(Ri,ja,qi,na,zo,Zs,Rs.x,Rs.y)&&0<=Xu(Rs.prev,Rs,Rs.next)||(Rs=Rs.prevZ,ms.x>=vo&&ms.x<=Ps&&ms.y>=ga&&ms.y<=zc&&ms!==xr&&ms!==Ui&&zP(Ri,ja,qi,na,zo,Zs,ms.x,ms.y)&&0<=Xu(ms.prev,ms,ms.next)))return;ms=ms.nextZ}for(;Rs&&Rs.z>=Qg;){if(Rs.x>=vo&&Rs.x<=Ps&&Rs.y>=ga&&Rs.y<=zc&&Rs!==xr&&Rs!==Ui&&zP(Ri,ja,qi,na,zo,Zs,Rs.x,Rs.y)&&0<=Xu(Rs.prev,Rs,Rs.next))return;Rs=Rs.prevZ}for(;ms&&ms.z<=Qp;){if(ms.x>=vo&&ms.x<=Ps&&ms.y>=ga&&ms.y<=zc&&ms!==xr&&ms!==Ui&&zP(Ri,ja,qi,na,zo,Zs,ms.x,ms.y)&&0<=Xu(ms.prev,ms,ms.next))return;ms=ms.nextZ}return 1}}(d,b,P,F):function(Vr){var Ar=Vr.prev,li=Vr;if(!(0<=Xu(Ar,li,Vr=Vr.next))){for(var xr=Ar.x,ir=li.x,Ui=Vr.x,Ri=Ar.y,qi=li.y,zo=Vr.y,ja=xr<ir?xr<Ui?xr:Ui:ir<Ui?ir:Ui,na=Ri<qi?Ri<zo?Ri:zo:qi<zo?qi:zo,Zs=ir<xr?Ui<xr?xr:Ui:Ui<ir?ir:Ui,vo=qi<Ri?zo<Ri?Ri:zo:zo<qi?qi:zo,ga=Vr.next;ga!==Ar;){if(ga.x>=ja&&ga.x<=Zs&&ga.y>=na&&ga.y<=vo&&zP(xr,Ri,ir,qi,Ui,zo,ga.x,ga.y)&&0<=Xu(ga.prev,ga,ga.next))return;ga=ga.next}return 1}}(d))u.push(tr.i/g|0),u.push(d.i/g|0),u.push(Ur.i/g|0),Kk(d),d=Ur.next,Pi=Ur.next;else if((d=Ur)===Pi){j?1===j?Gk(d=function(gi,Ar,li){var Vr=gi;do{var xr=Vr.prev,ir=Vr.next.next}while(!qF(xr,ir)&&eG(xr,Vr,Vr.next,ir)&&qk(xr,ir)&&qk(ir,xr)&&(Ar.push(xr.i/li|0),Ar.push(Vr.i/li|0),Ar.push(ir.i/li|0),Kk(Vr),Kk(Vr.next),Vr=gi=ir),(Vr=Vr.next)!==gi);return WT(Vr)}(WT(d),u,g),u,g,b,P,F,2):2===j&&function(gi,Ar,li,Vr,xr,ir){var zo,ja,Ui=gi;do{for(var Ri,qi=Ui.next.next;qi!==Ui.prev;){if(Ui.i!==qi.i&&(zo=Ui).next.i!==(ja=qi).i&&zo.prev.i!==ja.i&&!function(na,Zs){var vo=na;do{if(vo.i!==na.i&&vo.next.i!==na.i&&vo.i!==Zs.i&&vo.next.i!==Zs.i&&eG(vo,vo.next,na,Zs))return 1}while((vo=vo.next)!==na)}(zo,ja)&&(qk(zo,ja)&&qk(ja,zo)&&function(na,Zs){for(var vo=na,ga=!1,Ps=(na.x+Zs.x)/2,zc=(na.y+Zs.y)/2;vo.y>zc!=vo.next.y>zc&&vo.next.y!==vo.y&&Ps<(vo.next.x-vo.x)*(zc-vo.y)/(vo.next.y-vo.y)+vo.x&&(ga=!ga),(vo=vo.next)!==na;);return ga}(zo,ja)&&(Xu(zo.prev,zo,ja.prev)||Xu(zo,ja.prev,ja))||qF(zo,ja)&&0<Xu(zo.prev,zo,zo.next)&&0<Xu(ja.prev,ja,ja.next)))return Ri=tG(Ui,qi),Ui=WT(Ui,Ui.next),Ri=WT(Ri,Ri.next),Gk(Ui,Ar,li,Vr,xr,ir,0),Gk(Ri,Ar,li,Vr,xr,ir,0);qi=qi.next}}while((Ui=Ui.next)!==gi)}(d,u,g,b,P,F):Gk(WT(d),u,g,b,P,F,1);break}}}function uQ(d,u){return d.x-u.x}function Vz(d,u,g,b,P){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-g)*P|0)|d<<8))|d<<4))|d<<2))|d<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-b)*P|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function zP(d,u,g,b,P,F,j,Z){return(d-j)*(F-Z)<=(P-j)*(u-Z)&&(g-j)*(u-Z)<=(d-j)*(b-Z)&&(P-j)*(b-Z)<=(g-j)*(F-Z)}function Xu(d,u,g){return(u.y-d.y)*(g.x-u.x)-(u.x-d.x)*(g.y-u.y)}function qF(d,u){return d.x===u.x&&d.y===u.y}function eG(d,u,g,b){var P=YF(Xu(d,u,g)),F=YF(Xu(d,u,b)),j=YF(Xu(g,b,d)),Z=YF(Xu(g,b,u));return P!==F&&j!==Z||0===P&&KF(d,g,u)||0===F&&KF(d,b,u)||0===j&&KF(g,d,b)||!(0!==Z||!KF(g,u,b))}function KF(d,u,g){return u.x<=Math.max(d.x,g.x)&&u.x>=Math.min(d.x,g.x)&&u.y<=Math.max(d.y,g.y)&&u.y>=Math.min(d.y,g.y)}function YF(d){return 0<d?1:d<0?-1:0}function qk(d,u){return Xu(d.prev,d,d.next)<0?0<=Xu(d,u,d.next)&&0<=Xu(d,d.prev,u):Xu(d,u,d.prev)<0||Xu(d,d.next,u)<0}function tG(d,u){var g=new Gz(d.i,d.x,d.y),b=new Gz(u.i,u.x,u.y),P=d.next,F=u.prev;return(d.next=u).prev=d,(g.next=P).prev=g,(b.next=g).prev=b,(F.next=b).prev=F,b}function nG(d,u,g,b){return d=new Gz(d,u,g),b?(d.next=b.next,(d.prev=b).next.prev=d,b.next=d):(d.prev=d).next=d,d}function Kk(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Gz(d,u,g){this.i=d,this.x=u,this.y=g,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qz(d,u,g,b){for(var P=0,F=u,j=g-b;F<g;F+=b)P+=(d[j]-d[F])*(d[F+1]+d[j+1]),j=F;return P}(Z_={exports:{}}).exports=$z,(Z_.exports.default=$z).deviation=function(d,u,g,b){var P=u&&u.length,j=Math.abs(qz(d,0,P?u[0]*g:d.length,g));if(P)for(var Z=0,re=u.length;Z<re;Z++)j-=Math.abs(qz(d,u[Z]*g,Z<re-1?u[Z+1]*g:d.length,g));var Ie=0;for(Z=0;Z<b.length;Z+=3){var ze=b[Z]*g,Xe=b[Z+1]*g,Ze=b[Z+2]*g;Ie+=Math.abs((d[ze]-d[Ze])*(d[1+Xe]-d[1+ze])-(d[ze]-d[Xe])*(d[1+Ze]-d[1+ze]))}return 0===j&&0===Ie?0:Math.abs((Ie-j)/j)},$z.flatten=function(d){for(var u=d[0][0].length,g={vertices:[],holes:[],dimensions:u},b=0,P=0;P<d.length;P++){for(var F=0;F<d[P].length;F++)for(var j=0;j<u;j++)g.vertices.push(d[P][F][j]);0<P&&g.holes.push(b+=d[P-1].length)}return g};var rG=f(Z_.exports);function dQ(d,u,g,b,P){!function F(j,Z,re,me,ge){for(;re<me;){600<me-re&&(Ie=me-re+1,dt=Z-re+1,Xe=Math.log(Ie),ze=.5*Math.exp(2*Xe/3),Xe=.5*Math.sqrt(Xe*ze*(Ie-ze)/Ie)*(dt-Ie/2<0?-1:1),F(j,Z,Math.max(re,Math.floor(Z-dt*ze/Ie+Xe)),dt=Math.min(me,Math.floor(Z+(Ie-dt)*ze/Ie+Xe)),ge));var Ie,ze,Xe,dt,xt=j[Z],ct=re,Vt=me;for(Yk(j,re,Z),0<ge(j[me],xt)&&Yk(j,re,me);ct<Vt;){for(Yk(j,ct,Vt),ct++,Vt--;ge(j[ct],xt)<0;)ct++;for(;0<ge(j[Vt],xt);)Vt--}0===ge(j[re],xt)?Yk(j,re,Vt):Yk(j,++Vt,me),Vt<=Z&&(re=Vt+1),Z<=Vt&&(me=Vt-1)}}(d,u,g||0,b||d.length-1,P||hQ)}function Yk(d,u,g){var b=d[u];d[u]=d[g],d[g]=b}function hQ(d,u){return d<u?-1:u<d?1:0}function Kz(d,u){var g=d.length;if(g<=1)return[d];var b=[];let P,F;for(let Z=0;Z<g;Z++){var j=function(re){let me=0;for(let Xe,Ze,ge=0,Ie=re.length,ze=Ie-1;ge<Ie;ze=ge++)Xe=re[ge],Ze=re[ze],me+=(Ze.x-Xe.x)*(Xe.y+Ze.y);return me}(d[Z]);0!==j&&(d[Z].area=Math.abs(j),(F=void 0===F?j<0:F)===j<0?(P&&b.push(P),P=[d[Z]]):P.push(d[Z]))}if(P&&b.push(P),1<u)for(let Z=0;Z<b.length;Z++)b[Z].length<=u||(dQ(b[Z],u,1,b[Z].length-1,pQ),b[Z]=b[Z].slice(0,u));return b}function pQ(d,u){return u.area-d.area}function Yz(d,u,g){var b=g.patternDependencies;let P=!1;for(const j of u){var F;(F=j.paint.get(d+"-pattern")).isConstant()||(P=!0),(F=F.constantOr(null))&&(P=!0,b[F.to]=!0,b[F.from]=!0)}return P}function Wz(d,u,g,b,P){var F=P.patternDependencies;for(const me of u){var j,Z,re=me.paint.get(d+"-pattern").value;"constant"!==re.kind&&(j=re.evaluate({zoom:b-1},g,{},P.availableImages),Z=re.evaluate({zoom:b},g,{},P.availableImages),re=re.evaluate({zoom:b+1},g,{},P.availableImages),Z=Z&&Z.name?Z.name:Z,re=re&&re.name?re.name:re,F[j=j&&j.name?j.name:j]=!0,F[Z]=!0,F[re]=!0,g.patterns[me.id]={min:j,mid:Z,max:re})}return g}class Qz{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(g=>g.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Hz,this.indexArray=new eE,this.indexArray2=new BP,this.programConfigurations=new Wn(u.layers,u.zoom),this.segments=new x,this.segments2=new x,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(u,g,b){this.hasPattern=Yz("fill",this.layers,g);var P,F,j,Z,re=this.layers[0].layout.get("fill-sort-key"),me=!re.isConstant(),ge=[];for({feature:P,id:F,index:j,sourceLayerIndex:Z}of u){var Ie,ze=this.layers[0]._featureFilter.needGeometry,Xe=Yi(P,ze);this.layers[0]._featureFilter.filter(new il(this.zoom),Xe,b)&&(Ie=me?re.evaluate(Xe,{},b,g.availableImages):void 0,ze={id:F,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:j,geometry:ze?Xe.geometry:mi(P),patterns:{},sortKey:Ie},ge.push(ze))}me&&ge.sort((Vt,un)=>Vt.sortKey-un.sortKey);for(const Vt of ge){var{geometry:Ze,index:dt,sourceLayerIndex:xt}=Vt,ct=(this.hasPattern?(ct=Wz("fill",this.layers,Vt,this.zoom,g),this.patternFeatures.push(ct)):this.addFeature(Vt,Ze,dt,b,{}),u[dt].feature);g.featureIndex.insert(ct,Ze,dt,xt,this.index)}}update(u,g,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,b)}addFeatures(u,g,b){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,g,b)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,lQ),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,g,b,P,F){for(const Xe of Kz(g,500)){let Ze=0;for(const dt of Xe)Ze+=dt.length;var j=this.segments.prepareSegment(Ze,this.layoutVertexArray,this.indexArray),Z=j.vertexLength,re=[],me=[];for(const dt of Xe)if(0!==dt.length){dt!==Xe[0]&&me.push(re.length/2);var ge=this.segments2.prepareSegment(dt.length,this.layoutVertexArray,this.indexArray2),Ie=ge.vertexLength;this.layoutVertexArray.emplaceBack(dt[0].x,dt[0].y),this.indexArray2.emplaceBack(Ie+dt.length-1,Ie),re.push(dt[0].x),re.push(dt[0].y);for(let xt=1;xt<dt.length;xt++)this.layoutVertexArray.emplaceBack(dt[xt].x,dt[xt].y),this.indexArray2.emplaceBack(Ie+xt-1,Ie+xt),re.push(dt[xt].x),re.push(dt[xt].y);ge.vertexLength+=dt.length,ge.primitiveLength+=dt.length}var ze=rG(re,me);for(let dt=0;dt<ze.length;dt+=3)this.indexArray.emplaceBack(Z+ze[dt],Z+ze[dt+1],Z+ze[dt+2]);j.vertexLength+=Ze,j.primitiveLength+=ze.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,F,P)}}let iG,oG;Fi("FillBucket",Qz,{omit:["layers","patternFeatures"]});var fQ={get paint(){return oG=oG||new up({"fill-antialias":new ho(Ye.paint_fill["fill-antialias"]),"fill-opacity":new xo(Ye.paint_fill["fill-opacity"]),"fill-color":new xo(Ye.paint_fill["fill-color"]),"fill-outline-color":new xo(Ye.paint_fill["fill-outline-color"]),"fill-translate":new ho(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new ho(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new L1(Ye.paint_fill["fill-pattern"])})},get layout(){return iG=iG||new up({"fill-sort-key":new xo(Ye.layout_fill["fill-sort-key"])})}};class gQ extends sg{constructor(u){super(u,fQ)}recalculate(u,g){super.recalculate(u,g),"constant"===(u=this.paint._values["fill-outline-color"]).value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Qz(u)}queryRadius(){return Os(this.paint.get("fill-translate"))}queryIntersectsFeature(u,g,b,P,F,j,Z){return po(Sc(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),j.angle,Z),P)}isTileClipped(){return!0}}xd=Wu([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4);const mQ=Wu([{name:"a_centroid",components:2,type:"Int16"}],4),_Q=xd.members;var nE={},yQ=v;function jP(d,u,g,b,P){this.properties={},this.extent=g,this.type=0,this._pbf=d,this._geometry=-1,this._keys=b,this._values=P,d.readFields(vQ,this,u)}function vQ(d,u,g){if(1==d)u.id=g.readVarint();else if(2==d)for(var b=g,P=u,F=b.readVarint()+b.pos;b.pos<F;){var j=P._keys[b.readVarint()],Z=P._values[b.readVarint()];P.properties[j]=Z}else 3==d?u.type=g.readVarint():4==d&&(u._geometry=g.pos)}cg=jP,jP.types=["Unknown","Point","LineString","Polygon"],jP.prototype.loadGeometry=function(){for(var d,u,g=this._pbf,b=(g.pos=this._geometry,g.readVarint()+g.pos),P=1,F=0,j=0,Z=0,re=[];g.pos<b;)if(F<=0&&(P=7&(u=g.readVarint()),F=u>>3),F--,1===P||2===P)j+=g.readSVarint(),Z+=g.readSVarint(),1===P&&(d&&re.push(d),d=[]),d.push(new yQ(j,Z));else{if(7!==P)throw new Error("unknown command "+P);d&&d.push(d[0].clone())}return d&&re.push(d),re},jP.prototype.bbox=function(){for(var d,u=this._pbf,g=(u.pos=this._geometry,u.readVarint()+u.pos),b=1,P=0,F=0,j=0,Z=1/0,re=-1/0,me=1/0,ge=-1/0;u.pos<g;)if(P<=0&&(b=7&(d=u.readVarint()),P=d>>3),P--,1===b||2===b)(F+=u.readSVarint())<Z&&(Z=F),re<F&&(re=F),(j+=u.readSVarint())<me&&(me=j),ge<j&&(ge=j);else if(7!==b)throw new Error("unknown command "+b);return[Z,me,re,ge]},jP.prototype.toGeoJSON=function(d,u,re){var b,P=this.extent*Math.pow(2,re),F=this.extent*d,j=this.extent*u,Z=this.loadGeometry();function me(ze){for(var Xe=0;Xe<ze.length;Xe++){var Ze=ze[Xe];ze[Xe]=[360*(Ze.x+F)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ze.y+j)/P)*Math.PI/180))-90]}}switch(re=jP.types[this.type],this.type){case 1:for(var ge=[],Ie=0;Ie<Z.length;Ie++)ge[Ie]=Z[Ie][0];me(Z=ge);break;case 2:for(Ie=0;Ie<Z.length;Ie++)me(Z[Ie]);break;case 3:for(Z=function(ze){var Xe=ze.length;if(Xe<=1)return[ze];for(var Ze,dt,xt=[],ct=0;ct<Xe;ct++){var Vt=function(un){for(var kn,jn,tr=0,Ur=0,Pi=un.length,gi=Pi-1;Ur<Pi;gi=Ur++)tr+=((jn=un[gi]).x-(kn=un[Ur]).x)*(kn.y+jn.y);return tr}(ze[ct]);0!==Vt&&((dt=void 0===dt?Vt<0:dt)===Vt<0?(Ze&&xt.push(Ze),Ze=[ze[ct]]):Ze.push(ze[ct]))}return Ze&&xt.push(Ze),xt}(Z),Ie=0;Ie<Z.length;Ie++)for(b=0;b<Z[Ie].length;b++)me(Z[Ie][b])}return 1===Z.length?Z=Z[0]:re="Multi"+re,d={type:"Feature",geometry:{type:re,coordinates:Z},properties:this.properties},"id"in this&&(d.id=this.id),d};var CQ=cg;function aG(d,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(bQ,this,u),this.length=this._features.length}function bQ(d,u,g){15===d?u.version=g.readVarint():1===d?u.name=g.readString():5===d?u.extent=g.readVarint():2===d?u._features.push(g.pos):3===d?u._keys.push(g.readString()):4===d&&u._values.push(function(b){for(var P=null,F=b.readVarint()+b.pos;b.pos<F;){var j=b.readVarint()>>3;P=1==j?b.readString():2==j?b.readFloat():3==j?b.readDouble():4==j?b.readVarint64():5==j?b.readVarint():6==j?b.readSVarint():7==j?b.readBoolean():null}return P}(g))}Bc=aG,aG.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");return this._pbf.pos=this._features[d],d=this._pbf.readVarint()+this._pbf.pos,new CQ(this._pbf,d,this.extent,this._keys,this._values)};var EQ=Bc;function SQ(d,u,g){3===d&&(d=new EQ(g,g.readVarint()+g.pos)).length&&(u[d.name]=d)}nE.VectorTile=function(d,u){this.layers=d.readFields(SQ,{},u)},nE.VectorTileFeature=cg,nE.VectorTileLayer=Bc;const wQ=nE.VectorTileFeature.types,Xz=Math.pow(2,13);function Wk(d,u,g,b,P,F,j,Z){d.emplaceBack(u,g,2*Math.floor(b*Xz)+j,P*Xz*2,F*Xz*2,Math.round(Z))}class Zz{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(g=>g.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new HP,this.centroidVertexArray=new zk,this.indexArray=new eE,this.programConfigurations=new Wn(u.layers,u.zoom),this.segments=new x,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(u,g,b){for(var{feature:P,id:F,index:j,sourceLayerIndex:Z}of(this.features=[],this.hasPattern=Yz("fill-extrusion",this.layers,g),u)){var re=this.layers[0]._featureFilter.needGeometry,me=Yi(P,re);this.layers[0]._featureFilter.filter(new il(this.zoom),me,b)&&(F={id:F,sourceLayerIndex:Z,index:j,geometry:re?me.geometry:mi(P),properties:P.properties,type:P.type,patterns:{}},this.hasPattern?this.features.push(Wz("fill-extrusion",this.layers,F,this.zoom,g)):this.addFeature(F,F.geometry,j,b,{}),g.featureIndex.insert(P,F.geometry,j,Z,this.index,!0))}}addFeatures(u,g,b){for(const F of this.features)this.addFeature(F,F.geometry,F.index,g,b)}update(u,g,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,b)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,_Q),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,mQ.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,g,b,P,F){var d,j={x:0,y:0,vertexCount:0};for(const xt of Kz(g,500)){let ct=0;for(const un of xt)ct+=un.length;let Vt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const un of xt)if(0!==un.length&&!((d=un).every(u=>u.x<0)||d.every(u=>u.x>Cr)||d.every(u=>u.y<0)||d.every(u=>u.y>Cr))){let kn=0;for(let jn=0;jn<un.length;jn++){var Z,re,me,ge=un[jn];1<=jn&&(TQ(ge,Z=un[jn-1])||(Vt.vertexLength+4>x.MAX_VERTEX_ARRAY_LENGTH&&(Vt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)),re=ge.sub(Z)._perp()._unit(),32768<kn+(me=Z.dist(ge))&&(kn=0),Wk(this.layoutVertexArray,ge.x,ge.y,re.x,re.y,0,0,kn),Wk(this.layoutVertexArray,ge.x,ge.y,re.x,re.y,0,1,kn),j.x+=2*ge.x,j.y+=2*ge.y,j.vertexCount+=2,kn+=me,Wk(this.layoutVertexArray,Z.x,Z.y,re.x,re.y,0,0,kn),Wk(this.layoutVertexArray,Z.x,Z.y,re.x,re.y,0,1,kn),j.x+=2*Z.x,j.y+=2*Z.y,j.vertexCount+=2,this.indexArray.emplaceBack(ge=Vt.vertexLength,ge+2,ge+1),this.indexArray.emplaceBack(ge+1,ge+2,ge+3),Vt.vertexLength+=4,Vt.primitiveLength+=2))}}if(Vt.vertexLength+ct>x.MAX_VERTEX_ARRAY_LENGTH&&(Vt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),"Polygon"===wQ[u.type]){var Ie=[],ze=[],Xe=Vt.vertexLength;for(const un of xt)if(0!==un.length){un!==xt[0]&&ze.push(Ie.length/2);for(let kn=0;kn<un.length;kn++){var Ze=un[kn];Wk(this.layoutVertexArray,Ze.x,Ze.y,0,0,1,1,0),j.x+=Ze.x,j.y+=Ze.y,j.vertexCount+=1,Ie.push(Ze.x),Ie.push(Ze.y)}}var dt=rG(Ie,ze);for(let un=0;un<dt.length;un+=3)this.indexArray.emplaceBack(Xe+dt[un],Xe+dt[un+2],Xe+dt[un+1]);Vt.primitiveLength+=dt.length/3,Vt.vertexLength+=ct}}for(let xt=0;xt<j.vertexCount;xt++)this.centroidVertexArray.emplaceBack(Math.floor(j.x/j.vertexCount),Math.floor(j.y/j.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,F,P)}}function TQ(d,u){return d.x===u.x&&(d.x<0||d.x>Cr)||d.y===u.y&&(d.y<0||d.y>Cr)}let sG;Fi("FillExtrusionBucket",Zz,{omit:["layers","features"]});var IQ={get paint(){return sG=sG||new up({"fill-extrusion-opacity":new ho(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xo(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ho(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ho(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new L1(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xo(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xo(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ho(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class MQ extends sg{constructor(u){super(u,IQ)}createBucket(u){return new Zz(u)}queryRadius(){return Os(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(u,g,b,P,F,j,Z,re){return u=Sc(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),j.angle,Z),Z=this.paint.get("fill-extrusion-height").evaluate(g,b),g=this.paint.get("fill-extrusion-base").evaluate(g,b),b=function RQ(d,u,g,b){var P=[];for(const j of d){var F=[j.x,j.y,b,1];Hm(F,F,u),P.push(new D(F[0]/F[3],F[1]/F[3]))}return P}(u,re,0,0),u=function PQ(d,u,g,b){var P=[],F=[],j=b[8]*u,Z=b[9]*u,re=b[10]*u,me=b[11]*u,ge=b[8]*g,Ie=b[9]*g,ze=b[10]*g,Xe=b[11]*g;for(const Pi of d){var Ze=[],dt=[];for(const gi of Pi){var tr=b[0]*(jn=gi.x)+b[4]*(xt=gi.y)+b[12],Ur=b[1]*jn+b[5]*xt+b[13],kn=b[2]*jn+b[6]*xt+b[14],jn=b[3]*jn+b[7]*xt+b[15],xt=kn+re,ct=jn+me,Vt=tr+ge,un=Ur+Ie;kn+=ze,jn+=Xe,((tr=new D((tr+j)/ct,(Ur+Z)/ct)).z=xt/ct,Ze.push(tr),Ur=new D(Vt/jn,un/jn)).z=kn/jn,dt.push(Ur)}P.push(Ze),F.push(dt)}return[P,F]}(P,g,Z,re),function OQ(d,u,g){let b=1/0;po(g,u)&&(b=cG(g,u[0]));for(let me=0;me<u.length;me++){var P=u[me],F=d[me];for(let ge=0;ge<P.length-1;ge++){var re,j=P[ge];Xi(g,re=[j,re=P[ge+1],F[ge+1],F[ge],j])&&(b=Math.min(b,cG(g,re)))}}return b!==1/0&&b}(u[0],u[1],b)}}function Qk(d,u){return d.x*u.x+d.y*u.y}function cG(d,u){if(1===d.length){let ge=0;var g=u[ge++];let Ie;for(;!Ie||g.equals(Ie);)if(!(Ie=u[ge++]))return 1/0;for(;ge<u.length;ge++){var b=u[ge],me=d[0],F=Ie.sub(g),j=b.sub(g),re=(me=me.sub(g),Qk(F,F)),P=Qk(F,j),Z=Qk(j,j);if(F=Qk(me,F),me=Qk(me,j),me=g.z*(1-(Z=(Z*F-P*me)/(j=re*Z-P*P))-(re=(re*me-P*F)/j))+Ie.z*Z+b.z*re,isFinite(me))return me}return 1/0}{let ge=1/0;for(const Ie of u)ge=Math.min(ge,Ie.z);return ge}}const xQ=Wu([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,NQ=Wu([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,DQ=nE.VectorTileFeature.types,kQ=Math.cos(Math.PI/180*37.5),lG=Math.pow(2,14)/.5;class Jz{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(g=>g.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(g=>{this.gradients[g.id]={}}),this.layoutVertexArray=new UP,this.layoutVertexArray2=new Uz,this.indexArray=new eE,this.programConfigurations=new Wn(u.layers,u.zoom),this.segments=new x,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id)}populate(u,g,b){this.hasPattern=Yz("line",this.layers,g);var P,F,j,Z,re=this.layers[0].layout.get("line-sort-key"),me=!re.isConstant(),ge=[];for({feature:P,id:F,index:j,sourceLayerIndex:Z}of u){var Ie,ze=this.layers[0]._featureFilter.needGeometry,Xe=Yi(P,ze);this.layers[0]._featureFilter.filter(new il(this.zoom),Xe,b)&&(Ie=me?re.evaluate(Xe,{},b):void 0,ze={id:F,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:j,geometry:ze?Xe.geometry:mi(P),patterns:{},sortKey:Ie},ge.push(ze))}me&&ge.sort((Vt,un)=>Vt.sortKey-un.sortKey);for(const Vt of ge){var{geometry:Ze,index:dt,sourceLayerIndex:xt}=Vt,ct=(this.hasPattern?(ct=Wz("line",this.layers,Vt,this.zoom,g),this.patternFeatures.push(ct)):this.addFeature(Vt,Ze,dt,b,{}),u[dt].feature);g.featureIndex.insert(ct,Ze,dt,xt,this.index)}}update(u,g,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,g,this.stateDependentLayers,b)}addFeatures(u,g,b){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,g,b)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,NQ)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,xQ),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,g,b,P,F){var j=this.layers[0].layout,Z=j.get("line-join").evaluate(u,{}),re=j.get("line-cap"),me=j.get("line-miter-limit"),ge=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Ie of g)this.addLine(Ie,u,Z,re,me,ge);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,F,P)}addLine(u,g,b,P,F,j){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ur=0;Ur<u.length-1;Ur++)this.totalDistance+=u[Ur].dist(u[Ur+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}var Z="Polygon"===DQ[g.type];let re=u.length;for(;2<=re&&u[re-1].equals(u[re-2]);)re--;let me=0;for(;me<re-1&&u[me].equals(u[me+1]);)me++;if(!(re<(Z?3:2))){"bevel"===b&&(F=1.05);var ge,Ie=this.overscaling<=16?15*Cr/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*re,this.layoutVertexArray,this.indexArray);let Ur,Pi,gi,Ar;this.e1=this.e2=-1,Z&&(Ur=u[re-2],Ar=u[me].sub(Ur)._unit()._perp());for(let li=me;li<re;li++)if(!(ge=li===re-1?Z?u[me+1]:void 0:u[li+1])||!u[li].equals(ge)){Ar&&(gi=Ar),Ur&&(Pi=Ur),Ur=u[li],Ar=ge?ge.sub(Ur)._unit()._perp():gi;let Vr=(gi=gi||Ar).add(Ar);0===Vr.x&&0===Vr.y||Vr._unit();var xt,Xe=gi.x*Ar.x+gi.y*Ar.y,Ze=0!=(xt=Vr.x*Ar.x+Vr.y*Ar.y)?1/xt:1/0,dt=2*Math.sqrt(2-2*xt),ct=0<gi.x*Ar.y-gi.y*Ar.x,Vt=((xt=xt<kQ&&Pi&&ge)&&li>me&&2*Ie<(Vt=Ur.dist(Pi))&&(Vt=Ur.sub(Ur.sub(Pi)._mult(Ie/Vt)._round()),this.updateDistance(Pi,Vt),this.addCurrentVertex(Vt,gi,0,0,ze),Pi=Vt),Pi&&ge);let xr=Vt?b:Z?"butt":P;if(Vt&&"round"===xr&&(Ze<j?xr="miter":Ze<=2&&(xr="fakeround")),"bevel"===(xr="miter"===xr&&F<Ze?"bevel":xr)&&(2<Ze&&(xr="flipbevel"),Ze<F)&&(xr="miter"),Pi&&this.updateDistance(Pi,Ur),"miter"===xr)Vr._mult(Ze),this.addCurrentVertex(Ur,Vr,0,0,ze);else if("flipbevel"===xr)100<Ze?Vr=Ar.mult(-1):(un=Ze*gi.add(Ar).mag()/gi.sub(Ar).mag(),Vr._perp()._mult(un*(ct?-1:1))),this.addCurrentVertex(Ur,Vr,0,0,ze),this.addCurrentVertex(Ur,Vr.mult(-1),0,0,ze);else if("bevel"===xr||"fakeround"===xr){var un=-Math.sqrt(Ze*Ze-1),kn=(Ze=ct?un:0,ct?0:un);if(Pi&&this.addCurrentVertex(Ur,gi,Ze,kn,ze),"fakeround"===xr){var jn=Math.round(180*dt/Math.PI/20);for(let Ui=1;Ui<jn;Ui++){let Ri=Ui/jn;.5!==Ri&&(Ri+=Ri*(tr=Ri-.5)*(Ri-1)*((1.0904+Xe*(Xe*(3.55645-1.43519*Xe)-3.2452))*tr*tr+(.848013+Xe*(.215638*Xe-1.06021))));var tr=Ar.sub(gi)._mult(Ri)._add(gi)._unit()._mult(ct?-1:1);this.addHalfVertex(Ur,tr.x,tr.y,!1,ct,0,ze)}}ge&&this.addCurrentVertex(Ur,Ar,-Ze,-kn,ze)}else"butt"===xr?this.addCurrentVertex(Ur,Vr,0,0,ze):"square"===xr?this.addCurrentVertex(Ur,Vr,dt=Pi?1:-1,dt,ze):"round"===xr&&(Pi&&(this.addCurrentVertex(Ur,gi,0,0,ze),this.addCurrentVertex(Ur,gi,1,1,ze,!0)),ge)&&(this.addCurrentVertex(Ur,Ar,-1,-1,ze,!0),this.addCurrentVertex(Ur,Ar,0,0,ze));xt&&li<re-1&&2*Ie<(Ze=Ur.dist(ge))&&(kn=Ur.add(ge.sub(Ur)._mult(Ie/Ze)._round()),this.updateDistance(Ur,kn),this.addCurrentVertex(kn,Ar,0,0,ze),Ur=kn)}}}addCurrentVertex(u,g,b,P,F,j=!1){var me=g.y*P-g.x,ge=-g.y-g.x*P;this.addHalfVertex(u,g.x+g.y*b,g.y-g.x*b,j,!1,b,F),this.addHalfVertex(u,me,ge,j,!0,-P,F),this.distance>lG/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,g,b,P,F,j))}addHalfVertex({x:u,y:ge},b,P,F,j,Z,re){var me=.5*(this.lineClips?this.scaledDistance*(lG-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(F?1:0),(ge<<1)+(j?1:0),Math.round(63*b)+128,Math.round(63*P)+128,1+(0===Z?0:Z<0?-1:1)|(63&me)<<2,me>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((u=this.scaledDistance-this.lineClips.start)/(F=this.lineClips.end-this.lineClips.start),this.lineClipsArray.length),ge=re.vertexLength++,0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,ge),re.primitiveLength++),j?this.e2=ge:this.e1=ge}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,g){this.distance+=u.dist(g),this.updateScaledDistance()}}let uG,dG;Fi("LineBucket",Jz,{omit:["layers","patternFeatures"]});var hG={get paint(){return dG=dG||new up({"line-opacity":new xo(Ye.paint_line["line-opacity"]),"line-color":new xo(Ye.paint_line["line-color"]),"line-translate":new ho(Ye.paint_line["line-translate"]),"line-translate-anchor":new ho(Ye.paint_line["line-translate-anchor"]),"line-width":new xo(Ye.paint_line["line-width"]),"line-gap-width":new xo(Ye.paint_line["line-gap-width"]),"line-offset":new xo(Ye.paint_line["line-offset"]),"line-blur":new xo(Ye.paint_line["line-blur"]),"line-dasharray":new OP(Ye.paint_line["line-dasharray"]),"line-pattern":new L1(Ye.paint_line["line-pattern"]),"line-gradient":new PP(Ye.paint_line["line-gradient"])})},get layout(){return uG=uG||new up({"line-cap":new ho(Ye.layout_line["line-cap"]),"line-join":new xo(Ye.layout_line["line-join"]),"line-miter-limit":new ho(Ye.layout_line["line-miter-limit"]),"line-round-limit":new ho(Ye.layout_line["line-round-limit"]),"line-sort-key":new xo(Ye.layout_line["line-sort-key"])})}};class LQ extends xo{possiblyEvaluate(u,g){return g=new il(Math.floor(g.zoom),{now:g.now,fadeDuration:g.fadeDuration,zoomHistory:g.zoomHistory,transition:g.transition}),super.possiblyEvaluate(u,g)}evaluate(u,g,b,P){return g=ri({},g,{zoom:Math.floor(g.zoom)}),super.evaluate(u,g,b,P)}}let ej;class FQ extends sg{constructor(u){super(u,hG),this.gradientVersion=0,ej||((ej=new LQ(hG.paint.properties["line-width"].specification)).useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){"line-gradient"===u&&(this.stepInterpolant=!!function js(d){return void 0!==d._styleExpression}(u=this.gradientExpression())&&u._styleExpression.expression instanceof O1,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,g){super.recalculate(u,g),this.paint._values["line-floorwidth"]=ej.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Jz(u)}queryRadius(b){var g=pG(Uc("line-width",this,b),Uc("line-gap-width",this,b));return b=Uc("line-offset",this,b),g/2+Math.abs(b)+Os(this.paint.get("line-translate"))}queryIntersectsFeature(u,g,b,P,F,j,Z){return u=Sc(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),j.angle,Z),j=Z/2*pG(this.paint.get("line-width").evaluate(g,b),this.paint.get("line-gap-width").evaluate(g,b)),function ta(d,u,g){for(let P=0;P<u.length;P++){var b=u[P];if(3<=d.length)for(let F=0;F<b.length;F++)if(Ms(d,b[F]))return!0;if(function(F,j,Z){if(1<F.length){if(zi(F,j))return 1;for(let re=0;re<j.length;re++)if(gs(j[re],F,Z))return 1}for(let re=0;re<F.length;re++)if(gs(F[re],j,Z))return 1}(d,b,g))return!0}return!1}(u,P=(g=this.paint.get("line-offset").evaluate(g,b))?function mh(d,u){var g=[];for(let re=0;re<d.length;re++){var b=d[re],P=[];for(let me=0;me<b.length;me++){var j=b[me-1],F=b[me],Z=b[me+1];j=0===me?new D(0,0):F.sub(j)._unit()._perp(),Z=me===b.length-1?new D(0,0):Z.sub(F)._unit()._perp(),0!=(Z=(j=j._add(Z)._unit()).x*Z.x+j.y*Z.y)&&j._mult(1/Z),P.push(j._mult(u)._add(F))}g.push(P)}return g}(P,g*Z):P,j)}isTileClipped(){return!0}}function pG(d,u){return 0<u?u+2*d:d}const HQ=Wu([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),UQ=Wu([{name:"a_projected_pos",components:3,type:"Float32"}],4),BQ=(Wu([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wu([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),fG=(Wu([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Wu([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4));function zQ(d,u,g){return d.sections.forEach(b=>{var P,F;b.text=(b=b.text,F=g,"uppercase"===(P=(P=u).layout.get("text-transform").evaluate(F,{}))?b=b.toLocaleUpperCase():"lowercase"===P&&(b=b.toLocaleLowerCase()),b=k1.applyArabicShaping?k1.applyArabicShaping(b):b)}),d}Z_=Wu([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Wu([{name:"triangle",components:3,type:"Uint16"}]),Wu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Wu([{type:"Float32",name:"offsetX"}]),Wu([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Wu([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Xk={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Rd=24,WF=(cg=sl,xd={read:function(d,u,g,b,Xe){var F,j,Z=8*Xe-b-1,re=(1<<Z)-1,me=re>>1,ge=-7,Ie=g?Xe-1:0,ze=g?-1:1;for(Xe=d[u+Ie],Ie+=ze,F=Xe&(1<<-ge)-1,Xe>>=-ge,ge+=Z;0<ge;F=256*F+d[u+Ie],Ie+=ze,ge-=8);for(j=F&(1<<-ge)-1,F>>=-ge,ge+=b;0<ge;j=256*j+d[u+Ie],Ie+=ze,ge-=8);if(0===F)F=1-me;else{if(F===re)return j?NaN:1/0*(Xe?-1:1);j+=Math.pow(2,b),F-=me}return(Xe?-1:1)*j*Math.pow(2,F-b)},write:function(d,u,g,b,P,Ze){var j,Z,re=8*Ze-P-1,me=(1<<re)-1,ge=me>>1,Ie=23===P?Math.pow(2,-24)-Math.pow(2,-77):0,ze=b?0:Ze-1,Xe=b?1:-1;for(Ze=u<0||0===u&&1/u<0?1:0,u=Math.abs(u),isNaN(u)||u===1/0?(Z=isNaN(u)?1:0,j=me):(j=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-j))<1&&(j--,b*=2),2<=(u+=1<=j+ge?Ie/b:Ie*Math.pow(2,1-ge))*b&&(j++,b/=2),me<=j+ge?(Z=0,j=me):1<=j+ge?(Z=(u*b-1)*Math.pow(2,P),j+=ge):(Z=u*Math.pow(2,ge-1)*Math.pow(2,P),j=0));8<=P;d[g+ze]=255&Z,ze+=Xe,Z/=256,P-=8);for(j=j<<P|Z,re+=P;0<re;d[g+ze]=255&j,ze+=Xe,j/=256,re-=8);d[g+ze-Xe]|=128*Ze}});function sl(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}sl.Varint=0,sl.Fixed64=1,sl.Bytes=2,sl.Fixed32=5;var tj=4294967296,gG=1/tj,mG=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function H1(d){return d.type===sl.Bytes?d.readVarint()+d.pos:d.pos+1}function _G(d,u,g){var b=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));g.realloc(b);for(var P=g.pos-1;d<=P;P--)g.buf[P+b]=g.buf[P]}function VQ(d,u){for(var g=0;g<d.length;g++)u.writeVarint(d[g])}function GQ(d,u){for(var g=0;g<d.length;g++)u.writeSVarint(d[g])}function qQ(d,u){for(var g=0;g<d.length;g++)u.writeFloat(d[g])}function KQ(d,u){for(var g=0;g<d.length;g++)u.writeDouble(d[g])}function YQ(d,u){for(var g=0;g<d.length;g++)u.writeBoolean(d[g])}function WQ(d,u){for(var g=0;g<d.length;g++)u.writeFixed32(d[g])}function QQ(d,u){for(var g=0;g<d.length;g++)u.writeSFixed32(d[g])}function XQ(d,u){for(var g=0;g<d.length;g++)u.writeFixed64(d[g])}function ZQ(d,u){for(var g=0;g<d.length;g++)u.writeSFixed64(d[g])}function QF(d,u){return(d[u]|d[u+1]<<8|d[u+2]<<16)+16777216*d[u+3]}function VP(d,u,g){d[g]=u,d[g+1]=u>>>8,d[g+2]=u>>>16,d[g+3]=u>>>24}function yG(d,u){return(d[u]|d[u+1]<<8|d[u+2]<<16)+(d[u+3]<<24)}sl.prototype={destroy:function(){this.buf=null},readFields:function(d,u,g){for(g=g||this.length;this.pos<g;){var b=this.readVarint(),P=b>>3,F=this.pos;this.type=7&b,d(P,u,this),this.pos===F&&this.skip(b)}return u},readMessage:function(d,u){return this.readFields(d,u,this.readVarint()+this.pos)},readFixed32:function(){var d=QF(this.buf,this.pos);return this.pos+=4,d},readSFixed32:function(){var d=yG(this.buf,this.pos);return this.pos+=4,d},readFixed64:function(){var d=QF(this.buf,this.pos)+QF(this.buf,this.pos+4)*tj;return this.pos+=8,d},readSFixed64:function(){var d=QF(this.buf,this.pos)+yG(this.buf,this.pos+4)*tj;return this.pos+=8,d},readFloat:function(){var d=WF.read(this.buf,this.pos,!0,23,4);return this.pos+=4,d},readDouble:function(){var d=WF.read(this.buf,this.pos,!0,52,8);return this.pos+=8,d},readVarint:function(j){var F=127&(b=(P=this.buf)[this.pos++]);if(b<128||(F|=(127&(b=P[this.pos++]))<<7,b<128)||(F|=(127&(b=P[this.pos++]))<<14,b<128)||(F|=(127&(b=P[this.pos++]))<<21,b<128))return F;var u,g,b=F|=(15&P[this.pos])<<28,P=j;if(u=(112&(g=(j=(F=this).buf)[F.pos++]))>>4,g<128||(u|=(127&(g=j[F.pos++]))<<3,g<128)||(u|=(127&(g=j[F.pos++]))<<10,g<128)||(u|=(127&(g=j[F.pos++]))<<17,g<128)||(u|=(127&(g=j[F.pos++]))<<24,g<128)||(u|=(1&(g=j[F.pos++]))<<31,g<128))return function $P(d,u,g){return g?4294967296*u+(d>>>0):4294967296*(u>>>0)+(d>>>0)}(b,u,P);throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var d=this.readVarint();return d%2==1?(d+1)/-2:d/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var d=this.readVarint()+this.pos,u=this.pos;if(12<=(this.pos=d)-u&&mG)return mG.decode(this.buf.subarray(u,d));for(var b,P,F,j=this.buf,Z=d,re="",me=u;me<Z;){var ge=j[me],Ie=null,ze=239<ge?4:223<ge?3:191<ge?2:1;if(Z<me+ze)break;1===ze?ge<128&&(Ie=ge):2===ze?128==(192&(b=j[me+1]))&&(Ie=(31&ge)<<6|63&b)<=127&&(Ie=null):3===ze?(P=j[me+2],128==(192&(b=j[me+1]))&&128==(192&P)&&((Ie=(15&ge)<<12|(63&b)<<6|63&P)<=2047||55296<=Ie&&Ie<=57343)&&(Ie=null)):4===ze&&(P=j[me+2],F=j[me+3],128==(192&(b=j[me+1])))&&128==(192&P)&&128==(192&F)&&((Ie=(15&ge)<<18|(63&b)<<12|(63&P)<<6|63&F)<=65535||1114112<=Ie)&&(Ie=null),null===Ie?(Ie=65533,ze=1):65535<Ie&&(Ie-=65536,re+=String.fromCharCode(Ie>>>10&1023|55296),Ie=56320|1023&Ie),re+=String.fromCharCode(Ie),me+=ze}return re},readBytes:function(){var d=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,d);return this.pos=d,u},readPackedVarint:function(d,u){if(this.type!==sl.Bytes)return d.push(this.readVarint(u));var g=H1(this);for(d=d||[];this.pos<g;)d.push(this.readVarint(u));return d},readPackedSVarint:function(d){if(this.type!==sl.Bytes)return d.push(this.readSVarint());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readSVarint());return d},readPackedBoolean:function(d){if(this.type!==sl.Bytes)return d.push(this.readBoolean());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readBoolean());return d},readPackedFloat:function(d){if(this.type!==sl.Bytes)return d.push(this.readFloat());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readFloat());return d},readPackedDouble:function(d){if(this.type!==sl.Bytes)return d.push(this.readDouble());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readDouble());return d},readPackedFixed32:function(d){if(this.type!==sl.Bytes)return d.push(this.readFixed32());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readFixed32());return d},readPackedSFixed32:function(d){if(this.type!==sl.Bytes)return d.push(this.readSFixed32());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readSFixed32());return d},readPackedFixed64:function(d){if(this.type!==sl.Bytes)return d.push(this.readFixed64());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readFixed64());return d},readPackedSFixed64:function(d){if(this.type!==sl.Bytes)return d.push(this.readSFixed64());var u=H1(this);for(d=d||[];this.pos<u;)d.push(this.readSFixed64());return d},skip:function(d){if((d&=7)===sl.Varint)for(;127<this.buf[this.pos++];);else if(d===sl.Bytes)this.pos=this.readVarint()+this.pos;else if(d===sl.Fixed32)this.pos+=4;else{if(d!==sl.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(d,u){this.writeVarint(d<<3|u)},realloc:function(d){for(var u,g=this.length||16;g<this.pos+d;)g*=2;g!==this.length&&((u=new Uint8Array(g)).set(this.buf),this.buf=u,this.length=g)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(d){this.realloc(4),VP(this.buf,d,this.pos),this.pos+=4},writeSFixed32:function(d){this.realloc(4),VP(this.buf,d,this.pos),this.pos+=4},writeFixed64:function(d){this.realloc(8),VP(this.buf,-1&d,this.pos),VP(this.buf,Math.floor(d*gG),this.pos+4),this.pos+=8},writeSFixed64:function(d){this.realloc(8),VP(this.buf,-1&d,this.pos),VP(this.buf,Math.floor(d*gG),this.pos+4),this.pos+=8},writeVarint:function(d){if(268435455<(d=+d||0)||d<0){var P=this;if(0<=(g=d)?(u=g%4294967296|0,b=g/4294967296|0):(b=~(-g/4294967296),4294967295^(u=~(-g%4294967296))?u=u+1|0:b=b+1|(u=0)),0x10000000000000000<=g||g<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");P.realloc(10);var g=u,u=P,b=(u.buf[u.pos++]=127&g|128,g>>>=7,u.buf[u.pos++]=127&g|128,g>>>=7,u.buf[u.pos++]=127&g|128,g>>>=7,u.buf[u.pos++]=127&g|128,u.buf[u.pos]=127&(g>>>=7),g=b,P);P=(7&g)<<4,b.buf[b.pos++]|=P|((g>>>=3)?128:0),g&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g)&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g)&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g)&&(b.buf[b.pos++]=127&g|((g>>>=7)?128:0),g)&&(b.buf[b.pos++]=127&g)}else this.realloc(4),this.buf[this.pos++]=127&d|(127<d?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(127<d?128:0),d<=127)||(this.buf[this.pos++]=127&(d>>>=7)|(127<d?128:0),d<=127)||(this.buf[this.pos++]=d>>>7&127)},writeSVarint:function(d){this.writeVarint(d<0?2*-d-1:2*d)},writeBoolean:function(d){this.writeVarint(!!d)},writeString:function(g){g=String(g),this.realloc(4*g.length),this.pos++;var u=this.pos;128<=(this.pos=function(b,P,F){for(var j,Z,re=0;re<P.length;re++){if(55295<(j=P.charCodeAt(re))&&j<57344){if(!Z){56319<j||re+1===P.length?(b[F++]=239,b[F++]=191,b[F++]=189):Z=j;continue}if(j<56320){b[F++]=239,b[F++]=191,b[F++]=189,Z=j;continue}j=Z-55296<<10|j-56320|65536,Z=null}else Z&&(b[F++]=239,b[F++]=191,b[F++]=189,Z=null);j<128?b[F++]=j:(j<2048?b[F++]=j>>6|192:(j<65536?b[F++]=j>>12|224:(b[F++]=j>>18|240,b[F++]=j>>12&63|128),b[F++]=j>>6&63|128),b[F++]=63&j|128)}return F}(this.buf,g,this.pos),g=this.pos-u)&&_G(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeFloat:function(d){this.realloc(4),WF.write(this.buf,d,this.pos,!0,23,4),this.pos+=4},writeDouble:function(d){this.realloc(8),WF.write(this.buf,d,this.pos,!0,52,8),this.pos+=8},writeBytes:function(d){var u=d.length;this.writeVarint(u),this.realloc(u);for(var g=0;g<u;g++)this.buf[this.pos++]=d[g]},writeRawMessage:function(b,u){this.pos++;var g=this.pos;128<=(b(u,this),b=this.pos-g)&&_G(g,b,this),this.pos=g-1,this.writeVarint(b),this.pos+=b},writeMessage:function(d,u,g){this.writeTag(d,sl.Bytes),this.writeRawMessage(u,g)},writePackedVarint:function(d,u){u.length&&this.writeMessage(d,VQ,u)},writePackedSVarint:function(d,u){u.length&&this.writeMessage(d,GQ,u)},writePackedBoolean:function(d,u){u.length&&this.writeMessage(d,YQ,u)},writePackedFloat:function(d,u){u.length&&this.writeMessage(d,qQ,u)},writePackedDouble:function(d,u){u.length&&this.writeMessage(d,KQ,u)},writePackedFixed32:function(d,u){u.length&&this.writeMessage(d,WQ,u)},writePackedSFixed32:function(d,u){u.length&&this.writeMessage(d,QQ,u)},writePackedFixed64:function(d,u){u.length&&this.writeMessage(d,XQ,u)},writePackedSFixed64:function(d,u){u.length&&this.writeMessage(d,ZQ,u)},writeBytesField:function(d,u){this.writeTag(d,sl.Bytes),this.writeBytes(u)},writeFixed32Field:function(d,u){this.writeTag(d,sl.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(d,u){this.writeTag(d,sl.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(d,u){this.writeTag(d,sl.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(d,u){this.writeTag(d,sl.Fixed64),this.writeSFixed64(u)},writeVarintField:function(d,u){this.writeTag(d,sl.Varint),this.writeVarint(u)},writeSVarintField:function(d,u){this.writeTag(d,sl.Varint),this.writeSVarint(u)},writeStringField:function(d,u){this.writeTag(d,sl.Bytes),this.writeString(u)},writeFloatField:function(d,u){this.writeTag(d,sl.Fixed32),this.writeFloat(u)},writeDoubleField:function(d,u){this.writeTag(d,sl.Fixed64),this.writeDouble(u)},writeBooleanField:function(d,u){this.writeVarintField(d,!!u)}};var XF,nj=f(cg);const rj=3;function JQ(d,u,g){1===d&&g.readMessage(eX,u)}function eX(d,u,g){var b,P,F,j,Z;3===d&&(({id:d,bitmap:g,width:b,height:P,left:F,top:j,advance:Z}=g.readMessage(tX,{})),u.push({id:d,bitmap:new Kg({width:b+2*rj,height:P+2*rj},g),metrics:{width:b,height:P,left:F,top:j,advance:Z}}))}function tX(d,u,g){1===d?u.id=g.readVarint():2===d?u.bitmap=g.readBytes():3===d?u.width=g.readVarint():4===d?u.height=g.readVarint():5===d?u.left=g.readSVarint():6===d?u.top=g.readSVarint():7===d&&(u.advance=g.readVarint())}const vG=rj;function CG(d){let u=0,g=0;for(const re of d)u+=re.w*re.h,g=Math.max(g,re.w);d.sort((re,me)=>me.h-re.h);var b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),g),h:1/0}];let P=0,F=0;for(const re of d)for(let me=b.length-1;0<=me;me--){var j,Z=b[me];if(!(re.w>Z.w||re.h>Z.h)){re.x=Z.x,re.y=Z.y,F=Math.max(F,re.y+re.h),P=Math.max(P,re.x+re.w),re.w===Z.w&&re.h===Z.h?(j=b.pop(),me<b.length&&(b[me]=j)):re.h===Z.h?(Z.x+=re.w,Z.w-=re.w):(re.w!==Z.w&&b.push({x:Z.x+re.w,y:Z.y,w:Z.w-re.w,h:re.h}),Z.y+=re.h,Z.h-=re.h);break}}return{w:P,h:F,fill:u/(P*F)||0}}(Bc=XF=XF||{}).none="none",Bc.height="height",Bc.width="width";class ij{constructor(u,{pixelRatio:g,version:b,stretchX:P,stretchY:F,content:j,contentMatch:Z}){this.paddedRect=u,this.pixelRatio=g,this.stretchX=P,this.stretchY=F,this.content=j,this.version=b,this.contentMatch=Z}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class bG{constructor(u,g){var b={},P={},F=(this.haveRenderCallbacks=[],[]);this.addImages(u,b,F),this.addImages(g,P,F);const{w:j,h:Z}=CG(F);var re=new Yg({width:j||1,height:Z||1});for(const Xe in u){var me=u[Xe],ge=b[Xe].paddedRect;Yg.copy(me.data,re,{x:0,y:0},{x:ge.x+1,y:ge.y+1},me.data)}for(const Xe in g){var Ie=g[Xe],ze=P[Xe].paddedRect;const Ze=ze.x+1,dt=ze.y+1,xt=Ie.data.width,ct=Ie.data.height;Yg.copy(Ie.data,re,{x:0,y:0},{x:Ze,y:dt},Ie.data),Yg.copy(Ie.data,re,{x:0,y:ct-1},{x:Ze,y:dt-1},{width:xt,height:1}),Yg.copy(Ie.data,re,{x:0,y:0},{x:Ze,y:dt+ct},{width:xt,height:1}),Yg.copy(Ie.data,re,{x:xt-1,y:0},{x:Ze-1,y:dt},{width:1,height:ct}),Yg.copy(Ie.data,re,{x:0,y:0},{x:Ze+xt,y:dt},{width:1,height:ct})}this.image=re,this.iconPositions=b,this.patternPositions=P}addImages(u,g,b){for(const j in u){var P=u[j],F={x:0,y:0,w:P.data.width+2,h:P.data.height+2};b.push(F),g[j]=new ij(F,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(j)}}patchUpdatedImages(u,g){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in u.updatedImages)this.patchUpdatedImage(this.iconPositions[b],u.getImage(b),g),this.patchUpdatedImage(this.patternPositions[b],u.getImage(b),g)}patchUpdatedImage(u,g,b){var P;u&&g&&u.version!==g.version&&(u.version=g.version,[u,P]=u.tl,b.update(g.data,void 0,{x:u,y:P}))}}Fi("ImagePosition",ij),Fi("ImageAtlas",bG),o.WritingMode=void 0,(xd=o.WritingMode||(o.WritingMode={}))[xd.none=0]="none",xd[xd.horizontal=1]="horizontal",xd[xd.vertical=2]="vertical",xd[xd.horizontalOnly=3]="horizontalOnly";class Jk{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,g){var b=new Jk;return b.scale=u||1,b.fontStack=g,b}static forImage(u){var g=new Jk;return g.imageName=u,g}}class GP{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,g){var b=new GP;for(let F=0;F<u.sections.length;F++){var P=u.sections[F];P.image?b.addImageSection(P):b.addTextSection(P,g)}return b}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function $Q(d){let u="";for(let P=0;P<d.length;P++){var g=d.charCodeAt(P+1)||null,b=d.charCodeAt(P-1)||null;g&&xF(g)&&!Xk[d[P+1]]||b&&xF(b)&&!Xk[d[P-1]]||!Xk[d[P]]?u+=d[P]:u+=Xk[d[P]]}return u}(this.text)}trim(){let u=0;for(let b=0;b<this.text.length&&JF[this.text.charCodeAt(b)];b++)u++;let g=this.text.length;for(let b=this.text.length-1;0<=b&&b>=u&&JF[this.text.charCodeAt(b)];b--)g--;this.text=this.text.substring(u,g),this.sectionIndex=this.sectionIndex.slice(u,g)}substring(u,g){var b=new GP;return b.text=this.text.substring(u,g),b.sectionIndex=this.sectionIndex.slice(u,g),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,g)=>Math.max(u,this.sections[g].scale),0)}addTextSection(u,g){this.text+=u.text,this.sections.push(Jk.forText(u.scale,u.fontStack||g));var b=this.sections.length-1;for(let P=0;P<u.text.length;++P)this.sectionIndex.push(b)}addImageSection(b){var g;0===(b=b.image?b.image.name:"").length?Hn("Can't add FormattedSection with an empty image."):(g=this.getNextImageSectionCharCode())?(this.text+=String.fromCharCode(g),this.sections.push(Jk.forImage(b)),this.sectionIndex.push(this.sections.length-1)):Hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ZF(Vt,u,g,b,un,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt){var xt=GP.fromFeature(Vt,un);let ct;Ie===o.WritingMode.vertical&&xt.verticalizePunctuation();var pp,{processBidirectionalText:Vt,processStyledBidirectionalText:un}=k1;if(Vt&&1===xt.sections.length){ct=[];for(const Nd of Vt(xt.toString(),oj(xt,me,F,u,b,Xe,Ze))){var kn=new GP;kn.text=Nd,kn.sections=xt.sections;for(let Hh=0;Hh<Nd.length;Hh++)kn.sectionIndex.push(0);ct.push(kn)}}else if(un){ct=[];for(const Nd of un(xt.text,xt.sectionIndex,oj(xt,me,F,u,b,Xe,Ze))){var jn=new GP;jn.text=Nd[0],jn.sectionIndex=Nd[1],jn.sections=xt.sections,ct.push(jn)}}else ct=function(Nd,Hh){var Vm=[],U1=Nd.text;let fc=0;for(const Js of Hh)Vm.push(Nd.substring(fc,Js)),fc=Js;return fc<U1.length&&Vm.push(Nd.substring(fc,U1.length)),Vm}(xt,oj(xt,me,F,u,b,Xe,Ze));{var tr=un={positionedLines:Vt=[],text:xt.toString(),top:ge[1],bottom:ge[1],left:ge[0],right:ge[0],writingMode:Ie,iconsInText:!1,verticalizable:!1},Ur=u,Pi=g,gi=b,Ar=(F=ct,j),li=(Xe=Z,Ze=re,Ie),Vr=me,xr=ze,ir=dt;let Nd=0,Hh=-17,Vm=0,U1=0;var Ui="right"===Ze?1:"left"===Ze?0:.5;let fc=0;for(const dd of F){dd.trim();var Ri=dd.getMaxScale(),qi=(Ri-1)*Rd,zo={positionedGlyphs:[],lineOffset:0},ja=(tr.positionedLines[fc]=zo).positionedGlyphs;let Tf=0;if(dd.length()){for(let wl=0;wl<dd.length();wl++){var na=dd.getSection(wl),Zs=dd.getSectionIndex(wl),vo=dd.getCharCode(wl);let hd=0,Uh=null,hp=null,lg=null,Bh=Rd;var ga=!(li===o.WritingMode.horizontal||!xr&&!zT(vo)||xr&&(JF[vo]||(pp=vo,wi.Arabic(pp)||wi["Arabic Supplement"](pp)||wi["Arabic Extended-A"](pp)||wi["Arabic Presentation Forms-A"](pp)||wi["Arabic Presentation Forms-B"](pp))));if(na.imageName){if(!(Ps=gi[na.imageName]))continue;lg=na.imageName,tr.iconsInText=tr.iconsInText||!0,hp=Ps.paddedRect;var zc,Ps=Ps.displaySize;0<(hd=qi+(na.scale=na.scale*Rd/ir,Uh={width:Ps[0],height:Ps[1],left:1,top:-vG,advance:ga?Ps[1]:Ps[0]},zc=Rd-Ps[1]*na.scale),Bh=Uh.advance,zc=ga?Ps[0]*na.scale-Rd*Ri:Ps[1]*na.scale-Rd*Ri)&&zc>Tf&&(Tf=zc)}else{if((zc=(Ps=Pi[na.fontStack])&&Ps[vo])&&zc.rect)hp=zc.rect,Uh=zc.metrics;else{var Qg;if(!(Qg=(Qg=Ur[na.fontStack])&&Qg[vo]))continue;Uh=Qg.metrics}hd=(Ri-na.scale)*Rd}ga?(tr.verticalizable=!0,ja.push({glyph:vo,imageName:lg,x:Nd,y:Hh+hd,vertical:ga,scale:na.scale,fontStack:na.fontStack,sectionIndex:Zs,metrics:Uh,rect:hp}),Nd+=Bh*na.scale+Vr):(ja.push({glyph:vo,imageName:lg,x:Nd,y:Hh+hd,vertical:ga,scale:na.scale,fontStack:na.fontStack,sectionIndex:Zs,metrics:Uh,rect:hp}),Nd+=Uh.advance*na.scale+Vr)}0!==ja.length&&(Qp=Nd-Vr,Vm=Math.max(Qp,Vm),function(wl,hd,Uh,hp,lg){if(hp||lg){var Bh,pp=(wl[Uh].x+(Bh=(Bh=wl[Uh]).metrics.advance*Bh.scale))*hp;for(let Gm=0;Gm<=Uh;Gm++)wl[Gm].x-=pp,wl[Gm].y+=lg}}(ja,0,ja.length-1,Ui,Tf)),Nd=0;var Qp=Ar*Ri+Tf;zo.lineOffset=Math.max(Tf,qi),Hh+=Qp,U1=Math.max(Qp,U1)}else Hh+=Ar;++fc}Ze=Hh- -17;var{horizontalAlign:Xe,verticalAlign:ge}=aj(Xe);{var Rs=tr.positionedLines,i3=(Ui-Xe)*Vm;let dd=0;dd=U1!==Ar?-Ze*ge- -17:(-ge*F.length+.5)*Ar;for(const Tf of Rs)for(const wl of Tf.positionedGlyphs)wl.x+=i3,wl.y+=dd}tr.top+=-ge*Ze,tr.bottom=tr.top+Ze,tr.left+=-Xe*Vm,tr.right=tr.left+Vm}return!function(Nd){for(const Hh of Nd)if(0!==Hh.positionedGlyphs.length)return;return 1}(Vt)&&un}const JF={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nX={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function EG(d,u,g,b,P,F){return u.imageName?(b=b[u.imageName])?b.displaySize[0]*u.scale*Rd/F+P:0:(F=(b=g[u.fontStack])&&b[d])?F.metrics.advance*u.scale+P:0}function SG(d,u,g,b){var P=Math.pow(d-u,2);return b?d<u?P/2:2*P:P+Math.abs(g)*g}function wG(d,u,g,b,P,F){let j=null,Z=SG(u,g,P,F);for(const me of b){var re=SG(u-me.x,g,P,F)+me.badness;re<=Z&&(j=me,Z=re)}return{index:d,x:u,priorBreak:j,badness:Z}}function oj(d,u,g,b,P,F,j){if("point"!==F)return[];if(!d)return[];var Z=[],re=function(Ze,dt,xt,ct,Vt,un){let kn=0;for(let tr=0;tr<Ze.length();tr++){var jn=Ze.getSection(tr);kn+=EG(Ze.getCharCode(tr),jn,ct,Vt,dt,un)}return kn/Math.max(1,Math.ceil(kn/xt))}(d,u,g,b,P,j),me=0<=d.text.indexOf("\u200b");let ge=0;for(let Ze=0;Ze<d.length();Ze++){var Ie,ze=d.getSection(Ze),Xe=d.getCharCode(Ze);JF[Xe]||(ge+=EG(Xe,ze,b,P,u,j)),Ze<d.length()-1&&(Ie=!((Ie=Xe)<11904||!wi["Bopomofo Extended"](Ie)&&!(wi.Bopomofo(Ie)||wi["CJK Compatibility Forms"](Ie)||wi["CJK Compatibility Ideographs"](Ie)||wi["CJK Compatibility"](Ie)||wi["CJK Radicals Supplement"](Ie)||wi["CJK Strokes"](Ie)||wi["CJK Symbols and Punctuation"](Ie)||wi["CJK Unified Ideographs Extension A"](Ie)||wi["CJK Unified Ideographs"](Ie)||wi["Enclosed CJK Letters and Months"](Ie)||wi["Halfwidth and Fullwidth Forms"](Ie)||wi.Hiragana(Ie)||wi["Ideographic Description Characters"](Ie)||wi["Kangxi Radicals"](Ie)||wi["Katakana Phonetic Extensions"](Ie)||wi.Katakana(Ie)||wi["Vertical Forms"](Ie)||wi["Yi Radicals"](Ie)||wi["Yi Syllables"](Ie))),nX[Xe]||Ie||ze.imageName)&&Z.push(wG(Ze+1,ge,re,Z,function(dt,xt,ct){let Vt=0;return 10===dt&&(Vt-=1e4),ct&&(Vt+=150),40!==dt&&65288!==dt||(Vt+=50),41!==xt&&65289!==xt||(Vt+=50),Vt}(Xe,d.getCharCode(Ze+1),Ie&&me),!1))}return function Ze(dt){return dt?Ze(dt.priorBreak).concat(dt.index):[]}(wG(d.length(),ge,re,Z,0,!0))}function aj(d){let u=.5,g=.5;switch(d){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:u,verticalAlign:g}}function TG(d){let u=d.left,g=d.top,b=d.right-u,P=d.bottom-g;var F=d.image.content[2]-d.image.content[0],j=d.image.content[3]-d.image.content[1];return 0!=j&&0!==b&&0!==P&&(F/=j,d.image.contentMatch===XF.height?b/P<F&&(u*=(j=P*F)/b,b=j):d.image.contentMatch===XF.width&&0!=F&&b/P>F&&(g*=(j=b/F)/j,P=j)),{x1:u,y1:g,x2:u+b,y2:g+P}}function AG(d,u,g,b,P,F){let j;(d=d.image).content&&(j=[(Z=d.content)[0]/(re=d.pixelRatio||1),Z[1]/re,d.displaySize[0]-Z[2]/re,d.displaySize[1]-Z[3]/re]);var Z=u.left*F,re=u.right*F;let me,ge,Ie,ze;return ge="width"===g||"both"===g?(ze=P[0]+Z-b[3],P[0]+re+b[1]):(ze=P[0]+(Z+re-d.displaySize[0])/2)+d.displaySize[0],Z=u.top*F,re=u.bottom*F,Ie="height"===g||"both"===g?(me=P[1]+Z-b[0],P[1]+re+b[2]):(me=P[1]+(Z+re-d.displaySize[1])/2)+d.displaySize[1],{image:d,top:me,right:ge,bottom:Ie,left:ze,collisionPadding:j}}const Mv=128,rE=32640;function IG(d,u){if("constant"===(u=u.expression).kind)return{kind:"constant",layoutSize:u.evaluate(new il(d+1))};if("source"===u.kind)return{kind:"source"};{var{zoomStops:g,interpolationType:b}=u;let j=0;for(;j<g.length&&g[j]<=d;)j++;let Z=j=Math.max(0,j-1);for(;Z<g.length&&g[Z]<d+1;)Z++;Z=Math.min(g.length-1,Z);var P=g[j],F=g[Z];return"composite"===u.kind?{kind:"composite",minZoom:P,maxZoom:F,interpolationType:b}:{kind:"camera",minZoom:P,maxZoom:F,minSize:u.evaluate(new il(P)),maxSize:u.evaluate(new il(F)),interpolationType:b}}}function sj(d,u,g){let b="never";return(u=d.get(u))?b=u:d.get(g)&&(b="always"),b}const rX=nE.VectorTileFeature.types,iX=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function e7(d,u,g,b,P,F,j,Ze,re,me,ge,Ie,ze){var Xe=Ze?Math.min(rE,Math.round(Ze[0])):0;Ze=Ze?Math.min(rE,Math.round(Ze[1])):0,d.emplaceBack(u,g,Math.round(32*b),Math.round(32*P),F,j,(Xe<<1)+(re?1:0),Ze,16*me,16*ge,256*Ie,256*ze)}function cj(d,u,g){d.emplaceBack(u.x,u.y,g),d.emplaceBack(u.x,u.y,g),d.emplaceBack(u.x,u.y,g),d.emplaceBack(u.x,u.y,g)}function oX(d){for(const u of d.sections)if(function(g){for(const b of g)if(NF(b.charCodeAt(0)))return 1}(u.text))return!0;return!1}class lj{constructor(u){this.layoutVertexArray=new $F,this.indexArray=new eE,this.programConfigurations=u,this.segments=new x,this.dynamicLayoutVertexArray=new YT,this.opacityVertexArray=new Bz,this.hasVisibleVertices=!1,this.placedSymbolArray=new Uk}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(u,g,b,P){!this.isEmpty()&&(b&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,HQ.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,g),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,UQ.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,iX,!0),this.opacityVertexBuffer.itemSize=1),b||P)&&this.programConfigurations.upload(u)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Fi("SymbolBuffers",lj);class uj{constructor(u,g,b){this.layoutVertexArray=new u,this.layoutAttributes=g,this.indexArray=new b,this.segments=new x,this.collisionVertexArray=new zz}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,BQ.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Fi("CollisionBuffers",uj);class qP{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(F=>F.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ol([]),this.placementViewportMatrix=ol([]);var g,P=(this.textSizeData=IG(this.zoom,(g=this.layers[0]._unevaluatedLayout._values)["text-size"]),this.iconSizeData=IG(this.zoom,g["icon-size"]),g=this.layers[0].layout).get("symbol-sort-key"),b=g.get("symbol-z-order");this.canOverlap="never"!==sj(g,"text-overlap","text-allow-overlap")||"never"!==sj(g,"icon-overlap","icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==b&&!P.isConstant(),this.sortFeaturesByY=(P="viewport-y"===b||"auto"===b&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===g.get("symbol-placement")&&(this.writingModes=g.get("text-writing-mode").map(F=>o.WritingMode[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=u.sourceID}createArrays(){this.text=new lj(new Wn(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new lj(new Wn(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new BF,this.lineVertexArray=new zF,this.symbolInstances=new UF,this.textAnchorOffsets=new jF}calculateGlyphDependencies(u,g,b,P,F){for(let Z=0;Z<u.length;Z++){var j;g[u.charCodeAt(Z)]=!0,(b||P)&&F&&(j=Xk[u.charAt(Z)])&&(g[j.charCodeAt(0)]=!0)}}populate(u,g,b){var P=this.layers[0],F=P.layout,j=F.get("text-font"),Z=F.get("text-field"),re=F.get("icon-image"),me=("constant"!==Z.value.kind||Z.value.value instanceof Cf&&!Z.value.value.isEmpty()||0<Z.value.value.toString().length)&&("constant"!==j.value.kind||0<j.value.value.length),ge="constant"!==re.value.kind||!!re.value.value||0<Object.keys(re.parameters).length,Ie=F.get("symbol-sort-key");if(this.features=[],me||ge){var ze,Xe,Ze,dt,xt=g.iconDependencies,ct=g.glyphDependencies,Vt=g.availableImages,un=new il(this.zoom);for({feature:ze,id:Xe,index:Ze,sourceLayerIndex:dt}of u){var kn,jn=P._featureFilter.needGeometry,tr=Yi(ze,jn);if(P._featureFilter.filter(un,tr,b)){let li,Vr;if(jn||(tr.geometry=mi(ze)),me&&(jn=P.getValueAndResolveTokens("text-field",tr,b,Vt),jn=Cf.factory(jn),!(kn=this.hasRTLText=this.hasRTLText||oX(jn))||"unavailable"===k1.getRTLTextPluginStatus()||kn&&k1.isParsed())&&(li=zQ(jn,P,tr)),ge&&(Vr=(kn=P.getValueAndResolveTokens("icon-image",tr,b,Vt))instanceof rg?kn:rg.fromString(kn)),(li||Vr)&&(jn=this.sortFeaturesByKey?Ie.evaluate(tr,{},b):void 0,this.features.push(jn={id:Xe,text:li,icon:Vr,index:Ze,sourceLayerIndex:dt,geometry:tr.geometry,properties:ze.properties,type:rX[ze.type],sortKey:jn}),Vr&&(xt[Vr.name]=!0),li)){var Ur,Pi,gi=j.evaluate(tr,{},b).join(","),Ar="viewport"!==F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(o.WritingMode.vertical);for(const xr of li.sections)xr.image?xt[xr.image.name]=!0:(Ur=D1(li.toString()),Pi=ct[Pi=xr.fontStack||gi]=ct[Pi]||{},this.calculateGlyphDependencies(xr.text,Pi,Ar,this.allowVerticalPlacement,Ur))}}}"line"===F.get("symbol-placement")&&(this.features=function jQ(d){const u={},g={},b=[];let P=0;function F(dt){b.push(d[dt]),P++}function j(dt,xt,ct){var Vt=g[dt];return delete g[dt],g[xt]=Vt,b[Vt].geometry[0].pop(),b[Vt].geometry[0]=b[Vt].geometry[0].concat(ct[0]),Vt}function Z(dt,xt,ct){var Vt=u[xt];return delete u[xt],u[dt]=Vt,b[Vt].geometry[0].shift(),b[Vt].geometry[0]=ct[0].concat(b[Vt].geometry[0]),Vt}function re(dt,xt,ct){return`${dt}:${(ct=ct?xt[0][xt[0].length-1]:xt[0][0]).x}:`+ct.y}for(let dt=0;dt<d.length;dt++){var me,ge,Ie,ze,Ze,Xe=(Ze=d[dt]).geometry;(Ze=Ze.text?Ze.text.toString():null)?(me=re(Ze,Xe),ge=re(Ze,Xe,!0),me in g&&ge in u&&g[me]!==u[ge]?(Ie=Z(me,ge,Xe),ze=j(me,ge,b[Ie].geometry),delete u[me],delete g[ge],g[re(Ze,b[ze].geometry,!0)]=ze,b[Ie].geometry=null):me in g?j(me,ge,Xe):ge in u?Z(me,ge,Xe):(F(dt),u[me]=P-1,g[ge]=P-1)):F(dt)}return b.filter(dt=>dt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((li,Vr)=>li.sortKey-Vr.sortKey)}}update(u,g,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,g,this.layers,b),this.icon.programConfigurations.updatePaintArrays(u,g,this.layers,b))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,g){var b=this.lineVertexArray.length;if(void 0!==u.segment){let j=u.dist(g[u.segment+1]),Z=u.dist(g[u.segment]);var P={};for(let re=u.segment+1;re<g.length;re++)P[re]={x:g[re].x,y:g[re].y,tileUnitDistanceFromAnchor:j},re<g.length-1&&(j+=g[re+1].dist(g[re]));for(let re=u.segment||0;0<=re;re--)P[re]={x:g[re].x,y:g[re].y,tileUnitDistanceFromAnchor:Z},0<re&&(Z+=g[re-1].dist(g[re]));for(let re=0;re<g.length;re++){var F=P[re];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(u,g,b,P,F,j,Z,re,me,ge,Ie,ze){var Xe=u.indexArray,Ze=u.layoutVertexArray,dt=u.segments.prepareSegment(4*g.length,Ze,Xe,this.canOverlap?j.sortKey:void 0),xt=this.glyphOffsetArray.length,ct=dt.vertexLength,Vt=this.allowVerticalPlacement&&Z===o.WritingMode.vertical?Math.PI/2:0,un=j.text&&j.text.sections;for(let zo=0;zo<g.length;zo++){var{tl:kn,tr:jn,bl:tr,br:Ur,tex:Pi,pixelOffsetTL:gi,pixelOffsetBR:Ar,minFontScaleX:li,minFontScaleY:Vr,glyphOffset:xr,isSDF:ir,sectionIndex:Ui}=g[zo],Ri=dt.vertexLength,qi=xr[1];e7(Ze,re.x,re.y,kn.x,qi+kn.y,Pi.x,Pi.y,b,ir,gi.x,gi.y,li,Vr),e7(Ze,re.x,re.y,jn.x,qi+jn.y,Pi.x+Pi.w,Pi.y,b,ir,Ar.x,gi.y,li,Vr),e7(Ze,re.x,re.y,tr.x,qi+tr.y,Pi.x,Pi.y+Pi.h,b,ir,gi.x,Ar.y,li,Vr),e7(Ze,re.x,re.y,Ur.x,qi+Ur.y,Pi.x+Pi.w,Pi.y+Pi.h,b,ir,Ar.x,Ar.y,li,Vr),cj(u.dynamicLayoutVertexArray,re,Vt),Xe.emplaceBack(Ri,Ri+1,Ri+2),Xe.emplaceBack(Ri+1,Ri+2,Ri+3),dt.vertexLength+=4,dt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xr[0]),zo!==g.length-1&&Ui===g[zo+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ze.length,j,j.index,{},ze,un&&un[Ui])}u.placedSymbolArray.emplaceBack(re.x,re.y,xt,this.glyphOffsetArray.length-xt,ct,me,ge,re.segment,b?b[0]:0,b?b[1]:0,P[0],P[1],Z,0,!1,0,Ie)}_addCollisionDebugVertex(u,g,b,P,F,j){return g.emplaceBack(0,0),u.emplaceBack(b.x,b.y,P,F,Math.round(j.x),Math.round(j.y))}addCollisionDebugVertices(u,Ze,b,P,F,j,Xe){var re=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),me=re.vertexLength,ge=F.layoutVertexArray,Ie=F.collisionVertexArray,ze=Xe.anchorX;(this._addCollisionDebugVertex(ge,Ie,j,ze,Xe=Xe.anchorY,new D(u,Ze)),this._addCollisionDebugVertex(ge,Ie,j,ze,Xe,new D(b,Ze)),this._addCollisionDebugVertex(ge,Ie,j,ze,Xe,new D(b,P)),this._addCollisionDebugVertex(ge,Ie,j,ze,Xe,new D(u,P)),re.vertexLength+=4,Ze=F.indexArray).emplaceBack(me,me+1),Ze.emplaceBack(me+1,me+2),Ze.emplaceBack(me+2,me+3),Ze.emplaceBack(me+3,me),re.primitiveLength+=4}addDebugCollisionBoxes(u,g,b,P){for(let ge=u;ge<g;ge++){var F=this.collisionBoxArray.get(ge);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,P?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uj(VF,fG.members,BP),this.iconCollisionBox=new uj(VF,fG.members,BP);for(let g=0;g<this.symbolInstances.length;g++){var u=this.symbolInstances.get(g);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(u,g,b,P,F,j,Z,re,me){var ge={};for(let dt=g;dt<b;dt++){var Ie=u.get(dt);ge.textBox={x1:Ie.x1,y1:Ie.y1,x2:Ie.x2,y2:Ie.y2,anchorPointX:Ie.anchorPointX,anchorPointY:Ie.anchorPointY},ge.textFeatureIndex=Ie.featureIndex;break}for(let dt=P;dt<F;dt++){var ze=u.get(dt);ge.verticalTextBox={x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,anchorPointX:ze.anchorPointX,anchorPointY:ze.anchorPointY},ge.verticalTextFeatureIndex=ze.featureIndex;break}for(let dt=j;dt<Z;dt++){var Xe=u.get(dt);ge.iconBox={x1:Xe.x1,y1:Xe.y1,x2:Xe.x2,y2:Xe.y2,anchorPointX:Xe.anchorPointX,anchorPointY:Xe.anchorPointY},ge.iconFeatureIndex=Xe.featureIndex;break}for(let dt=re;dt<me;dt++){var Ze=u.get(dt);ge.verticalIconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,anchorPointX:Ze.anchorPointX,anchorPointY:Ze.anchorPointY},ge.verticalIconFeatureIndex=Ze.featureIndex;break}return ge}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let b=0;b<this.symbolInstances.length;b++){var g=this.symbolInstances.get(b);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return 0<this.text.segments.get().length}hasIconData(){return 0<this.icon.segments.get().length}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length}hasIconCollisionBoxData(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length}addIndicesForPlacedSymbol(u,b){var P=(b=u.placedSymbolArray.get(b)).vertexStartIndex+4*b.numGlyphs;for(let F=b.vertexStartIndex;F<P;F+=4)u.indexArray.emplaceBack(F,F+1,F+2),u.indexArray.emplaceBack(F+1,F+2,F+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var g=Math.sin(u),b=Math.cos(u);const P=[],F=[];var j=[];for(let re=0;re<this.symbolInstances.length;++re){j.push(re);var Z=this.symbolInstances.get(re);P.push(0|Math.round(g*Z.anchorX+b*Z.anchorY)),F.push(Z.featureIndex)}return j.sort((re,me)=>P[re]-P[me]||F[me]-F[re]),j}addToSortKeyRanges(u,g){var b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===g?b.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:g,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const b of this.symbolInstanceIndexes){var g=this.symbolInstances.get(b);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((P,F,j)=>{0<=P&&j.indexOf(P)===F&&this.addIndicesForPlacedSymbol(this.text,P)}),0<=g.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),0<=g.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),0<=g.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let MG,OG;Fi("SymbolBucket",qP,{omit:["layers","collisionBoxArray","features","compareText"]}),qP.MAX_GLYPHS=65535,qP.addDynamicAttributes=cj;var dj={get paint(){return OG=OG||new up({"icon-opacity":new xo(Ye.paint_symbol["icon-opacity"]),"icon-color":new xo(Ye.paint_symbol["icon-color"]),"icon-halo-color":new xo(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new xo(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xo(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new ho(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new ho(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new xo(Ye.paint_symbol["text-opacity"]),"text-color":new xo(Ye.paint_symbol["text-color"],{runtimeType:fa,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new xo(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new xo(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new xo(Ye.paint_symbol["text-halo-blur"]),"text-translate":new ho(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new ho(Ye.paint_symbol["text-translate-anchor"])})},get layout(){return MG=MG||new up({"symbol-placement":new ho(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new ho(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ho(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xo(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ho(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ho(Ye.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ho(Ye.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ho(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new ho(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ho(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new xo(Ye.layout_symbol["icon-size"]),"icon-text-fit":new ho(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ho(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new xo(Ye.layout_symbol["icon-image"]),"icon-rotate":new xo(Ye.layout_symbol["icon-rotate"]),"icon-padding":new xo(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new ho(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new xo(Ye.layout_symbol["icon-offset"]),"icon-anchor":new xo(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ho(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ho(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ho(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new xo(Ye.layout_symbol["text-field"]),"text-font":new xo(Ye.layout_symbol["text-font"]),"text-size":new xo(Ye.layout_symbol["text-size"]),"text-max-width":new xo(Ye.layout_symbol["text-max-width"]),"text-line-height":new ho(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new xo(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new xo(Ye.layout_symbol["text-justify"]),"text-radial-offset":new xo(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ho(Ye.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xo(Ye.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xo(Ye.layout_symbol["text-anchor"]),"text-max-angle":new ho(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new ho(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new xo(Ye.layout_symbol["text-rotate"]),"text-padding":new ho(Ye.layout_symbol["text-padding"]),"text-keep-upright":new ho(Ye.layout_symbol["text-keep-upright"]),"text-transform":new xo(Ye.layout_symbol["text-transform"]),"text-offset":new xo(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new ho(Ye.layout_symbol["text-allow-overlap"]),"text-overlap":new ho(Ye.layout_symbol["text-overlap"]),"text-ignore-placement":new ho(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new ho(Ye.layout_symbol["text-optional"])})}};class PG{constructor(u){if(void 0===u.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:eo,this.defaultValue=u}evaluate(u){if(u.formattedSection){var g=this.defaultValue.property.overrides;if(g&&g.hasOverride(u.formattedSection))return g.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Fi("FormatSectionOverride",PG,{omit:["defaultValue"]});class t7 extends sg{constructor(u){super(u,dj)}recalculate(u,g){if(super.recalculate(u,g),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(u=this.layout.get("text-writing-mode")){var b=[];for(const P of u)b.indexOf(P)<0&&b.push(P);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()}getValueAndResolveTokens(u,g,b,P){return b=this.layout.get(u).evaluate(g,{},b,P),(P=this._unevaluatedLayout._values[u]).isDataDriven()||yP(P.value)||!b?b:function aX(d,u){return u.replace(/{([^{}]+)}/g,(g,b)=>d&&b in d?String(d[b]):"")}(g.properties,b)}createBucket(u){return new qP(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const b of dj.paint.overridableProperties)if(t7.hasPaintOverride(this.layout,b)){var u=this.paint.get(b),g=new PG(u);g=new fk(g,u.property.specification);let P=null;P="constant"===u.value.kind||"source"===u.value.kind?new hu("source",g):new CP("composite",g,u.value.zoomStops),this.paint._values[b]=new ag(u.property,P,u.parameters)}}_handleOverridablePaintPropertyUpdate(u,g,b){return!(!this.layout||g.isDataDriven()||b.isDataDriven())&&t7.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,g){u=u.get("text-field");const b=dj.paint.properties[g];let P=!1;const F=j=>{for(const Z of j)if(b.overrides&&b.overrides.hasOverride(Z))return void(P=!0)};if("constant"===u.value.kind&&u.value.value instanceof Cf)F(u.value.value.sections);else if("source"===u.value.kind){const j=Z=>{P||(Z instanceof X_&&ud(Z.value)===Yc?F(Z.value.sections):Z instanceof gP?F(Z.sections):Z.eachChild(j))};(g=u.value)._styleExpression&&j(g._styleExpression.expression)}return P}}let RG;var sX={get paint(){return RG=RG||new up({"background-color":new ho(Ye.paint_background["background-color"]),"background-pattern":new OP(Ye.paint_background["background-pattern"]),"background-opacity":new ho(Ye.paint_background["background-opacity"])})}};class cX extends sg{constructor(u){super(u,sX)}}let xG;var lX={get paint(){return xG=xG||new up({"raster-opacity":new ho(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new ho(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ho(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ho(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new ho(Ye.paint_raster["raster-saturation"]),"raster-contrast":new ho(Ye.paint_raster["raster-contrast"]),"raster-resampling":new ho(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new ho(Ye.paint_raster["raster-fade-duration"])})}};class uX extends sg{constructor(u){super(u,lX)}}class dX extends sg{constructor(u){super(u,{}),this.onAdd=g=>{this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},this.onRemove=g=>{this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},this.implementation=u}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class hX{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const hj=6371008.8;class iE{constructor(u,g){if(isNaN(u)||isNaN(g))throw new Error(`Invalid LngLat object: (${u}, ${g})`);if(this.lng=+u,this.lat=+g,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new iE(sr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){var g=Math.PI/180,P=this.lat*g,b=u.lat*g;return P=Math.sin(P)*Math.sin(b)+Math.cos(P)*Math.cos(b)*Math.cos((u.lng-this.lng)*g),hj*Math.acos(Math.min(P,1))}static convert(u){if(u instanceof iE)return u;if(Array.isArray(u)&&(2===u.length||3===u.length))return new iE(Number(u[0]),Number(u[1]));if(Array.isArray(u)||"object"!=typeof u||null===u)throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");return new iE(Number("lng"in u?u.lng:u.lon),Number(u.lat))}}const NG=2*Math.PI*hj;function DG(d){return NG*Math.cos(d*Math.PI/180)}function kG(d){return(180+d)/360}function LG(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function FG(d,u){return d/DG(u)}function pj(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}class n7{constructor(u,g,b=0){this.x=+u,this.y=+g,this.z=+b}static fromLngLat(u,g=0){return u=iE.convert(u),new n7(kG(u.lng),LG(u.lat),FG(g,u.lat))}toLngLat(){return new iE(function pX(d){return 360*d-180}(this.x),pj(this.y))}toAltitude(){return function fX(d,u){return d*DG(pj(u))}(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/NG*function gX(d){return 1/Math.cos(d*Math.PI/180)}(pj(this.y))}}function HG(d,u,g){return[d*(g=2*Math.PI*6378137/256/Math.pow(2,g))-2*Math.PI*6378137/2,u*g-2*Math.PI*6378137/2]}class fj{constructor(u,g,b){if(u<0||25<u||b<0||b>=Math.pow(2,u)||g<0||g>=Math.pow(2,u))throw new Error(`x=${g}, y=${b}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=g,this.y=b,this.key=t3(0,u,u,g,b)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,g,b){var P=function mX(P,u,g){var b=HG(256*P,256*(u=Math.pow(2,g)-u-1),g);return P=HG(256*(P+1),256*(u+1),g),b[0]+","+b[1]+","+P[0]+","+P[1]}(this.x,this.y,this.z),F=function _X(d,u,g){let P,b="";for(let F=d;0<F;F--)P=1<<F-1,b+=(u&P?1:0)+(g&P?2:0);return b}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===b?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,1<g?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,P)}isChildOf(u){var g=this.z-u.z;return 0<g&&u.x===this.x>>g&&u.y===this.y>>g}getTilePoint(u){var g=Math.pow(2,this.z);return new D((u.x*g-this.x)*Cr,(u.y*g-this.y)*Cr)}toString(){return`${this.z}/${this.x}/`+this.y}}class UG{constructor(u,g){this.wrap=u,this.canonical=g,this.key=t3(u,g.z,g.z,g.x,g.y)}}class Wg{constructor(u,g,b,P,F){if(u<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = `+b);this.overscaledZ=u,this.wrap=g,this.canonical=new fj(b,+P,+F),this.key=t3(g,u,b,P,F)}clone(){return new Wg(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = `+this.overscaledZ);var g=this.canonical.z-u;return u>this.canonical.z?new Wg(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wg(u,this.wrap,u,this.canonical.x>>g,this.canonical.y>>g)}calculateScaledKey(u,g){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = `+this.overscaledZ);var b=this.canonical.z-u;return u>this.canonical.z?t3(this.wrap*+g,u,this.canonical.z,this.canonical.x,this.canonical.y):t3(this.wrap*+g,u,u,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(u){var g;return u.wrap===this.wrap&&(g=this.canonical.z-u.canonical.z,0===u.overscaledZ||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>g&&u.canonical.y===this.canonical.y>>g)}children(u){var g,b;return this.overscaledZ>=u?[new Wg(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)]:[new Wg(u=this.canonical.z+1,this.wrap,u,g=2*this.canonical.x,b=2*this.canonical.y),new Wg(u,this.wrap,u,1+g,b),new Wg(u,this.wrap,u,g,1+b),new Wg(u,this.wrap,u,1+g,1+b)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Wg(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Wg(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new UG(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/`+this.canonical.y}getTilePoint(u){return this.canonical.getTilePoint(new n7(u.x-this.wrap,u.y))}}function t3(d,u,g,b,P){var F=1<<g;return(F*F*(d=(d*=2)<0?-1*d-1:d)+F*P+b).toString(36)+g.toString(36)+u.toString(36)}Fi("CanonicalTileID",fj),Fi("OverscaledTileID",Wg,{omit:["posMatrix"]});class BG{constructor(u,g,b,P=1,F=1,j=1,Z=0){if(this.uid=u,g.height!==g.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))Hn(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);else{this.stride=g.height;var re=this.dim=g.height-2;switch(this.data=new Uint32Array(g.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=P,this.greenFactor=F,this.blueFactor=j,this.baseShift=Z;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ge=0;ge<re;ge++)this.data[this._idx(-1,ge)]=this.data[this._idx(0,ge)],this.data[this._idx(re,ge)]=this.data[this._idx(re-1,ge)],this.data[this._idx(ge,-1)]=this.data[this._idx(ge,0)],this.data[this._idx(ge,re)]=this.data[this._idx(ge,re-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(re,-1)]=this.data[this._idx(re-1,0)],this.data[this._idx(-1,re)]=this.data[this._idx(0,re-1)],this.data[this._idx(re,re)]=this.data[this._idx(re-1,re-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ge=0;ge<re;ge++)for(let Ie=0;Ie<re;Ie++){var me=this.get(ge,Ie);me>this.max&&(this.max=me),me<this.min&&(this.min=me)}}}get(P,g){var b=new Uint8Array(this.data.buffer);return P=4*this._idx(P,g),this.unpack(b[P],b[1+P],b[2+P])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,g){if(u<-1||u>=this.dim+1||g<-1||g>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(g+1)*this.stride+(u+1)}unpack(u,g,b){return u*this.redFactor+g*this.greenFactor+b*this.blueFactor-this.baseShift}getPixels(){return new Yg({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,g,b){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let P=g*this.dim,F=g*this.dim+this.dim,j=b*this.dim,Z=b*this.dim+this.dim;switch(g){case-1:P=F-1;break;case 1:F=P+1}switch(b){case-1:j=Z-1;break;case 1:Z=j+1}var re=-g*this.dim,me=-b*this.dim;for(let ge=j;ge<Z;ge++)for(let Ie=P;Ie<F;Ie++)this.data[this._idx(Ie,ge)]=u.data[this._idx(Ie+re,ge+me)]}}Fi("DEMData",BG);class zG{constructor(u){this._stringToNumber={},this._numberToString=[];for(let b=0;b<u.length;b++){var g=u[b];this._stringToNumber[g]=b,this._numberToString[b]=g}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length `+this._numberToString.length);return this._numberToString[u]}}class jG{constructor(u,g,b,P,F){this.type="Feature",(this._vectorTileFeature=u)._z=g,u._x=b,u._y=P,this.properties=u.properties,this.id=F}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){var u={geometry:this.geometry};for(const g in this)"_geometry"!==g&&"_vectorTileFeature"!==g&&(u[g]=this[g]);return u}}class $G{constructor(u,g){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new BT(Cr,16,0),this.grid3D=new BT(Cr,16,0),this.featureIndexArray=new FP,this.promoteId=g}insert(u,g,b,P,F,j){var Z=this.featureIndexArray.length,re=(this.featureIndexArray.emplaceBack(b,P,F),j?this.grid3D:this.grid);for(let ze=0;ze<g.length;ze++){var me=g[ze],ge=[1/0,1/0,-1/0,-1/0];for(let Xe=0;Xe<me.length;Xe++){var Ie=me[Xe];ge[0]=Math.min(ge[0],Ie.x),ge[1]=Math.min(ge[1],Ie.y),ge[2]=Math.max(ge[2],Ie.x),ge[3]=Math.max(ge[3],Ie.y)}ge[0]<Cr&&ge[1]<Cr&&0<=ge[2]&&0<=ge[3]&&re.insert(Z,ge[0],ge[1],ge[2],ge[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new nE.VectorTile(new nj(this.rawTileData)).layers,this.sourceLayerCoder=new zG(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,g,b,P){this.loadVTLayers();const F=u.params||{},j=Cr/u.tileSize/u.scale,Z=EP(F.filter),re=u.queryGeometry,me=u.queryPadding*j;var Ie=GG(re),ge=this.grid.query(Ie.minX-me,Ie.minY-me,Ie.maxX+me,Ie.maxY+me);Ie=GG(u.cameraQueryGeometry);for(const dt of this.grid3D.query(Ie.minX-me,Ie.minY-me,Ie.maxX+me,Ie.maxY+me,(xt,ct,Vt,un)=>function ya(d,u,g,b,P){for(const j of d)if(u<=j.x&&g<=j.y&&b>=j.x&&P>=j.y)return!0;var F=[new D(u,g),new D(u,P),new D(b,P),new D(b,g)];if(2<d.length)for(const j of F)if(Ms(d,j))return!0;for(let j=0;j<d.length-1;j++)if(function(Z,re,me){var ge=me[0],Ie=me[2];if(!(Z.x<ge.x&&re.x<ge.x||Z.x>Ie.x&&re.x>Ie.x||Z.y<ge.y&&re.y<ge.y||Z.y>Ie.y&&re.y>Ie.y))return(ge=hn(Z,re,me[0]))!==hn(Z,re,me[1])||ge!==hn(Z,re,me[2])||ge!==hn(Z,re,me[3])}(d[j],d[j+1],F))return!0;return!1}(u.cameraQueryGeometry,xt-me,ct-me,Vt+me,un+me)))ge.push(dt);ge.sort(yX);var ze={};let Xe;for(let dt=0;dt<ge.length;dt++){var Ze=ge[dt];if(Ze!==Xe){Xe=Ze,Ze=this.featureIndexArray.get(Ze);let xt=null;this.loadMatchingFeature(ze,Ze.bucketIndex,Ze.sourceLayerIndex,Ze.featureIndex,Z,F.layers,F.availableImages,g,b,P,(ct,Vt,un)=>(xt=xt||mi(ct),Vt.queryIntersectsFeature(re,ct,un,xt,this.z,u.transform,j,u.pixelPosMatrix)))}}return ze}loadMatchingFeature(u,g,b,P,F,j,Z,re,me,ge,Ie){var ze=this.bucketLayerIDs[g];if(!j||function yi(d,u){for(let g=0;g<d.length;g++)if(0<=u.indexOf(d[g]))return 1}(j,ze)){g=this.sourceLayerCoder.decode(b);var Xe=this.vtLayers[g].feature(P);if(F.needGeometry){if(b=Yi(Xe,!0),!F.filter(new il(this.tileID.overscaledZ),b,this.tileID.canonical))return}else if(!F.filter(new il(this.tileID.overscaledZ),Xe))return;var Ze=this.getId(Xe,g);for(let kn=0;kn<ze.length;kn++){var dt=ze[kn];if(!(j&&j.indexOf(dt)<0)&&(xt=re[dt])){let jn={};Ze&&ge&&(jn=ge.getState(xt.sourceLayer||"_geojsonTileLayer",Ze));var xt,ct=ri({},me[dt]);if(ct.paint=VG(ct.paint,xt.paint,Xe,jn,Z),ct.layout=VG(ct.layout,xt.layout,Xe,jn,Z),xt=!Ie||Ie(Xe,xt,jn)){var Vt=new jG(Xe,this.z,this.x,this.y,Ze);Vt.layer=ct;let Ur=u[dt];(Ur=void 0===Ur?u[dt]=[]:Ur).push({featureIndex:P,feature:Vt,intersectionZ:xt})}}}}}lookupSymbolFeatures(u,g,b,P,F,j,Z,re){var me={},ge=(this.loadVTLayers(),EP(F));for(const Ie of u)this.loadMatchingFeature(me,b,P,Ie,ge,j,Z,re,g);return me}hasLayer(u){for(const g of this.bucketLayerIDs)for(const b of g)if(u===b)return!0;return!1}getId(u,g){let b=u.id;return this.promoteId&&"boolean"==typeof(b=u.properties[g="string"==typeof this.promoteId?this.promoteId:this.promoteId[g]])?Number(b):b}}function VG(d,u,g,b,P){return zn(d,(F,j)=>(j=u instanceof jT?u.get(j):null)&&j.evaluate?j.evaluate(g,b,P):j)}function GG(d){let u=1/0,g=1/0,b=-1/0,P=-1/0;for(const F of d)u=Math.min(u,F.x),g=Math.min(g,F.y),b=Math.max(b,F.x),P=Math.max(P,F.y);return{minX:u,minY:g,maxX:b,maxY:P}}function yX(d,u){return u-d}function qG(d,u,g,b,P){var F=[];for(let Z=0;Z<d.length;Z++){var j=d[Z];let re;for(let me=0;me<j.length-1;me++){let ge=j[me],Ie=j[me+1];ge.x<u&&Ie.x<u||(ge.x<u?ge=new D(u,ge.y+(u-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round():Ie.x<u&&(Ie=new D(u,ge.y+(u-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round()),ge.y<g&&Ie.y<g)||(ge.y<g?ge=new D(ge.x+(g-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),g)._round():Ie.y<g&&(Ie=new D(ge.x+(g-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),g)._round()),ge.x>=b&&Ie.x>=b)||(ge.x>=b?ge=new D(b,ge.y+(b-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round():Ie.x>=b&&(Ie=new D(b,ge.y+(b-ge.x)/(Ie.x-ge.x)*(Ie.y-ge.y))._round()),ge.y>=P&&Ie.y>=P)||(ge.y>=P?ge=new D(ge.x+(P-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),P)._round():Ie.y>=P&&(Ie=new D(ge.x+(P-ge.y)/(Ie.y-ge.y)*(Ie.x-ge.x),P)._round()),re&&ge.equals(re[re.length-1])||(re=[ge],F.push(re)),re.push(Ie))}}return F}Fi("FeatureIndex",$G,{omit:["rawTileData","sourceLayerCoder"]});class oE extends D{constructor(u,g,b,P){super(u,g),this.angle=b,void 0!==P&&(this.segment=P)}clone(){return new oE(this.x,this.y,this.angle,this.segment)}}function KG(d,u,g,b,P){if(void 0!==u.segment&&0!==g){let me=u,ge=u.segment+1,Ie=0;for(;Ie>-g/2;){if(--ge<0)return;Ie-=d[ge].dist(me),me=d[ge]}Ie+=d[ge].dist(d[ge+1]),ge++;var F=[];let ze=0;for(;Ie<g/2;){var j=d[ge-1],Z=d[ge],re=d[ge+1];if(!re)return;for(j=j.angleTo(Z)-Z.angleTo(re),j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:Ie,angleDelta:j}),ze+=j;Ie-F[0].distance>b;)ze-=F.shift().angleDelta;if(ze>P)return;ge++,Ie+=Z.dist(re)}}return 1}function YG(d){let u=0;for(let g=0;g<d.length-1;g++)u+=d[g].dist(d[g+1]);return u}function WG(d,u,g){return d?.6*u*g:0}function QG(d,u){return Math.max(d?d.right-d.left:0,u?u.right-u.left:0)}function vX(d,u,g,ge,Ie,Xe,j,Z,re){var me=WG(ge,Xe,j),ze=(ge=QG(ge,Ie),0===d[0].x||d[0].x===re||0===d[0].y||d[0].y===re);return u-(Ie=ge*j)<u/4&&(u=Ie+u/4),Xe*=2,function Ze(dt,xt,ct,Vt,un,kn,jn,tr,Ur){const Pi=kn/2,gi=YG(dt);let Ar=0,li=xt-ct,Vr=[];for(let xr=0;xr<dt.length-1;xr++){const ir=dt[xr],Ui=dt[xr+1],Ri=ir.dist(Ui),qi=Ui.angleTo(ir);for(;li+ct<Ar+Ri;){const zo=((li+=ct)-Ar)/Ri,ja=Ef.number(ir.x,Ui.x,zo),na=Ef.number(ir.y,Ui.y,zo);if(0<=ja&&ja<Ur&&0<=na&&na<Ur&&0<=li-Pi&&li+Pi<=gi){const Zs=new oE(ja,na,qi,xr);Zs._round(),Vt&&!KG(dt,Zs,kn,Vt,un)||Vr.push(Zs)}}Ar+=Ri}return tr||Vr.length||jn||(Vr=Ze(dt,Ar/2,ct,Vt,un,kn,jn,!0,Ur)),Vr}(d,ze?u/2*Z%u:(ge/2+Xe)*j*Z%u,u,me,g,Ie,ze,!1,re)}Fi("Anchor",oE);const KP=1;function XG(d,u,g,b){var P=[];const F=d.image,j=F.pixelRatio;var Z=F.paddedRect.w-2*KP,re=F.paddedRect.h-2*KP;let me={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};var ge=F.stretchX||[[0,Z]],Ie=F.stretchY||[[0,re]];const ze=ge.reduce(ct=(vo,ga)=>vo+ga[1]-ga[0],0),Xe=Ie.reduce(ct,0);var Ze,dt,xt,ct,Vt=re-Xe;let un=0,kn=ze,jn=0,tr=Xe,Ur=0,Pi=ct=Z-ze,gi=0,Ar=Vt;F.content&&b&&(dt=(Ze=F.content)[2]-Ze[0],xt=Ze[3]-Ze[1],F.contentMatch&&F.content&&(me=TG(d)),un=r7(ge,0,Ze[0]),jn=r7(Ie,0,Ze[1]),kn=r7(ge,Ze[0],Ze[2]),tr=r7(Ie,Ze[1],Ze[3]),Ur=Ze[0]-un,gi=Ze[1]-jn,Pi=dt-kn,Ar=xt-tr);const li=me.x1,Vr=me.y1,xr=me.x2-li,ir=me.y2-Vr;var Ui=($m,ga,Ps,zc)=>{var sE=$m.fixed-Ur-Pi*$m.stretch/ze,dp=ga.fixed-gi-Ar*ga.stretch/Xe,Rs=(Ps.stretch-un)/kn*xr+li,jm=Ps.fixed-Ur-Pi*Ps.stretch/ze,ty=(zc.stretch-jn)/tr*ir+Vr,Ov=zc.fixed-gi-Ar*zc.stretch/Xe,Qg=new D(ms=($m.stretch-un)/kn*xr+li,Qp=(ga.stretch-jn)/tr*ir+Vr),Qp=new D(Rs,Qp),ms=(Rs=new D(Rs,ty),new D(ms,ty));return ty=new D(sE/j,dp/j),sE=new D(jm/j,Ov/j),(dp=u*Math.PI/180)&&(jm=Math.sin(dp),Ov=Math.cos(dp),Qg._matMult(dp=[Ov,-jm,jm,Ov]),Qp._matMult(dp),ms._matMult(dp),Rs._matMult(dp)),{tl:Qg,tr:Qp,bl:ms,br:Rs,tex:{x:F.paddedRect.x+KP+(jm=$m.stretch+$m.fixed),y:F.paddedRect.y+KP+(dp=ga.stretch+ga.fixed),w:(Ov=Ps.stretch+Ps.fixed)-jm,h:($m=zc.stretch+zc.fixed)-dp},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ty,pixelOffsetBR:sE,minFontScaleX:Pi/j/xr,minFontScaleY:Ar/j/ir,isSDF:g}};if(b&&(F.stretchX||F.stretchY)){var Ri=ZG(ge,ct,ze),qi=ZG(Ie,Vt,Xe);for(let vo=0;vo<Ri.length-1;vo++){var zo=Ri[vo],ja=Ri[vo+1];for(let ga=0;ga<qi.length-1;ga++)P.push(Ui(zo,qi[ga],ja,qi[ga+1]))}}else P.push(Ui({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+Z},{fixed:0,stretch:1+re}));return P}function r7(d,u,g){let b=0;for(const P of d)b+=Math.max(u,Math.min(g,P[1]))-Math.max(u,Math.min(g,P[0]));return b}function ZG(d,u,g){var b,P,F=[{fixed:-KP,stretch:0}];for([b,P]of d){var j=F[F.length-1];F.push({fixed:b-j.stretch,stretch:j.stretch}),F.push({fixed:b-j.stretch,stretch:j.stretch+(P-b)})}return F.push({fixed:u+KP,stretch:g}),F}class i7{constructor(u,g,b,P,F,j,Z,re,me,ge){if(this.boxStartIndex=u.length,me){let ze=j.top,Xe=j.bottom;0<((me=j.collisionPadding)&&(ze-=me[1],Xe+=me[3]),me=Xe-ze)&&(me=Math.max(10,me),this.circleDiameter=me)}else{var Ie;(me=null!=(me=j.image)&&me.contentMatch&&j.image.content?TG(j):{x1:j.left,y1:j.top,x2:j.right,y2:j.bottom}).y1=me.y1*Z-re[0],me.x2=me.x2*Z+re[1],me.y2=me.y2*Z+re[2],me.x1=me.x1*Z-re[3],(re=j.collisionPadding)&&(me.x1-=re[0]*Z,me.y1-=re[1]*Z,me.x2+=re[2]*Z,me.y2+=re[3]*Z),ge&&(j=new D(me.x1,me.y1),re=new D(me.x2,me.y1),Z=new D(me.x1,me.y2),Ie=new D(me.x2,me.y2),ge=ge*Math.PI/180,j._rotate(ge),re._rotate(ge),Z._rotate(ge),Ie._rotate(ge),me.x1=Math.min(j.x,re.x,Z.x,Ie.x),me.x2=Math.max(j.x,re.x,Z.x,Ie.x),me.y1=Math.min(j.y,re.y,Z.y,Ie.y),me.y2=Math.max(j.y,re.y,Z.y,Ie.y)),u.emplaceBack(g.x,g.y,me.x1,me.y1,me.x2,me.y2,b,P,F)}this.boxEndIndex=u.length}}class bX{constructor(u=[],g=EX){if(this.data=u,this.length=this.data.length,this.compare=g,0<this.length)for(let b=(this.length>>1)-1;0<=b;b--)this._down(b)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){var u,g;if(0!==this.length)return u=this.data[0],g=this.data.pop(),this.length--,0<this.length&&(this.data[0]=g,this._down(0)),u}peek(){return this.data[0]}_up(u){for(var{data:g,compare:b}=this,P=g[u];0<u;){var F=u-1>>1,j=g[F];if(0<=b(P,j))break;g[u]=j,u=F}g[u]=P}_down(u){for(var{data:g,compare:b}=this,P=this.length>>1,F=g[u];u<P;){let Z=1+(u<<1),re=g[Z];var j=Z+1;if(j<this.length&&b(g[j],re)<0&&(Z=j,re=g[j]),0<=b(re,F))break;g[u]=re,u=Z}g[u]=F}}function EX(d,u){return d<u?-1:u<d?1:0}function SX(d,u=1,g=!1){let b=1/0,P=1/0,F=-1/0,j=-1/0;var Z=d[0];for(let ct=0;ct<Z.length;ct++){var re=Z[ct];(!ct||re.x<b)&&(b=re.x),(!ct||re.y<P)&&(P=re.y),(!ct||re.x>F)&&(F=re.x),(!ct||re.y>j)&&(j=re.y)}var Ie=Math.min(F-b,j-P);let ze=Ie/2;var Xe=new bX([],wX);if(0===Ie)return new D(b,P);for(let ct=b;ct<F;ct+=Ie)for(let Vt=P;Vt<j;Vt+=Ie)Xe.push(new YP(ct+ze,Vt+ze,ze,d));let Ze=function(ct){let Vt=0,un=0,kn=0;var jn=ct[0];for(let gi=0,Ar=jn.length,li=Ar-1;gi<Ar;li=gi++){var tr=jn[gi],Ur=jn[li],Pi=tr.x*Ur.y-Ur.x*tr.y;un+=(tr.x+Ur.x)*Pi,kn+=(tr.y+Ur.y)*Pi,Vt+=3*Pi}return new YP(un/Vt,kn/Vt,0,ct)}(d),dt=Xe.length;for(;Xe.length;){var xt=Xe.pop();(xt.d>Ze.d||!Ze.d)&&(Ze=xt,g)&&console.log("found best %d after %d probes",Math.round(1e4*xt.d)/1e4,dt),xt.max-Ze.d<=u||(ze=xt.h/2,Xe.push(new YP(xt.p.x-ze,xt.p.y-ze,ze,d)),Xe.push(new YP(xt.p.x+ze,xt.p.y-ze,ze,d)),Xe.push(new YP(xt.p.x-ze,xt.p.y+ze,ze,d)),Xe.push(new YP(xt.p.x+ze,xt.p.y+ze,ze,d)),dt+=4)}return g&&(console.log("num probes: "+dt),console.log("best distance: "+Ze.d)),Ze.p}function wX(d,u){return u.max-d.max}function YP(d,u,g,b){this.p=new D(d,u),this.h=g,this.d=function(P,F){let j=!1,Z=1/0;for(let Ie=0;Ie<F.length;Ie++){var re=F[Ie];for(let ze=0,Xe=re.length,Ze=Xe-1;ze<Xe;Ze=ze++){var me=re[ze],ge=re[Ze];me.y>P.y!=ge.y>P.y&&P.x<(ge.x-me.x)*(P.y-me.y)/(ge.y-me.y)+me.x&&(j=!j),Z=Math.min(Z,Hc(P,me,ge))}}return(j?1:-1)*Math.sqrt(Z)}(this.p,b),this.max=this.d+this.h*Math.SQRT2}o.TextAnchorEnum=void 0,(Bc=o.TextAnchorEnum||(o.TextAnchorEnum={}))[Bc.center=1]="center",Bc[Bc.left=2]="left",Bc[Bc.right=3]="right",Bc[Bc.top=4]="top",Bc[Bc.bottom=5]="bottom",Bc[Bc["top-left"]=6]="top-left",Bc[Bc["top-right"]=7]="top-right",Bc[Bc["bottom-left"]=8]="bottom-left",Bc[Bc["bottom-right"]=9]="bottom-right";const aE=7,gj=Number.POSITIVE_INFINITY;function JG(d,u){if(u[1]!==gj){var g=d,b=u[0],P=u[1];let Z=0,re=0;switch(b=Math.abs(b),P=Math.abs(P),g){case"top-right":case"top-left":case"top":re=P-aE;break;case"bottom-right":case"bottom-left":case"bottom":re=-P+aE}switch(g){case"top-right":case"bottom-right":case"right":Z=-b;break;case"top-left":case"bottom-left":case"left":Z=b}return[Z,re]}{g=d;var F=u[0];let re=0,me=0;var j=(F=F<0?0:F)/Math.SQRT2;switch(g){case"top-right":case"top-left":me=j-aE;break;case"bottom-right":case"bottom-left":me=-j+aE;break;case"bottom":me=-F+aE;break;case"top":me=F-aE}switch(g){case"top-right":case"bottom-right":re=-j;break;case"top-left":case"bottom-left":re=j;break;case"left":re=F;break;case"right":re=-F}return[re,me]}}function eq(d,u,g){var b=d.layout,P=null==(P=b.get("text-variable-anchor-offset"))?void 0:P.evaluate(u,{},g);if(P){var F=P.values,j=[];for(let ge=0;ge<F.length;ge+=2){var Z=j[ge]=F[ge],re=F[ge+1].map(Ie=>Ie*Rd);Z.startsWith("top")?re[1]-=aE:Z.startsWith("bottom")&&(re[1]+=aE),j[ge+1]=re}return new ng(j)}if(P=b.get("text-variable-anchor")){let ge;var me=(ge=void 0!==(d=d._unevaluatedLayout).getValue("text-radial-offset")?[b.get("text-radial-offset").evaluate(u,{},g)*Rd,gj]:b.get("text-offset").evaluate(u,{},g).map(ze=>ze*Rd),[]);for(const ze of P)me.push(ze,JG(ze,ge));return new ng(me)}return null}function mj(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tq(d,u,g,b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze){g=function CX(d,u,g,b,P,F,j,Z){var re=b.layout.get("text-rotate").evaluate(F,{})*Math.PI/180,me=[];for(const jn of u.positionedLines)for(const tr of jn.positionedGlyphs)if(tr.rect){var ge=tr.rect||{};let Ur=vG+1,Pi=!0,gi=1,Ar=0;var Ie,ze=tr.metrics.advance*tr.scale/2,Xe=(Z&&u.verticalizable&&(Xe=(tr.scale-1)*Rd,Ie=(Rd-tr.metrics.width*tr.scale)/2,Ar=jn.lineOffset/2-(tr.imageName?-Ie:Xe)),tr.imageName&&(Pi=(Ie=j[tr.imageName]).sdf,gi=Ie.pixelRatio,Ur=1/gi),P?[tr.x+ze,tr.y]:[0,0]);let li=P?[0,0]:[tr.x+ze+g[0],tr.y+g[1]-Ar],Vr=[0,0];(kn=(P||Z)&&tr.vertical)&&(Vr=li,li=[0,0]);var Vt=(ct=(tr.metrics.left-Ur)*tr.scale-ze+li[0])+ge.w/(Ze=tr.metrics.isDoubleResolution?2:1)*tr.scale/gi,Ze=(xt=(-tr.metrics.top-Ur)*tr.scale+li[1])+ge.h/Ze*tr.scale/gi,dt=new D(ct,xt),xt=new D(Vt,xt),ct=new D(ct,Ze),un=(Vt=new D(Vt,Ze),kn&&(Ze=new D(-ze,ze- -17),kn=-Math.PI/2,ze=new D(22-(ze=Rd/2-ze),-(un=tr.imageName?ze:0)),un=new D(...Vr),dt._rotateAround(kn,Ze)._add(ze)._add(un),xt._rotateAround(kn,Ze)._add(ze)._add(un),ct._rotateAround(kn,Ze)._add(ze)._add(un),Vt._rotateAround(kn,Ze)._add(ze)._add(un)),re&&(kn=Math.sin(re),Ze=Math.cos(re),dt._matMult(ze=[Ze,-kn,kn,Ze]),xt._matMult(ze),ct._matMult(ze),Vt._matMult(ze)),new D(0,0)),kn=new D(0,0);me.push({tl:dt,tr:xt,bl:ct,br:Vt,tex:ge,writingMode:u.writingMode,glyphOffset:Xe,sectionIndex:tr.sectionIndex,isSDF:Pi,pixelOffsetTL:un,pixelOffsetBR:kn,minFontScaleX:0,minFontScaleY:0})}return me}(0,g,Z,P,F,j,b,d.allowVerticalPlacement);let dt=null;"source"===(b=d.textSizeData).kind?(dt=[Mv*P.layout.get("text-size").evaluate(j,{})])[0]>rE&&Hn(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`):"composite"===b.kind&&((dt=[Mv*Xe.compositeTextSizes[0].evaluate(j,{},Ze),Mv*Xe.compositeTextSizes[1].evaluate(j,{},Ze)])[0]>rE||dt[1]>rE)&&Hn(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`),d.addSymbols(d.text,g,dt,Z,F,j,me,u,re.lineStartIndex,re.lineLength,ze,Ze);for(const xt of ge)Ie[xt]=d.text.placedSymbolArray.length-1;return 4*g.length}function nq(d){for(const u in d)return d[u];return null}const rq=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function _j(d,u,g,b,P,F){var j;P-b<=g||(function Z(re,me,ge,Ie,ze,Xe){for(;Ie<ze;){if(600<ze-Ie){const ct=ze-Ie+1,Vt=ge-Ie+1,un=Math.log(ct),kn=.5*Math.exp(2*un/3),jn=.5*Math.sqrt(un*kn*(ct-kn)/ct)*(Vt-ct/2<0?-1:1);Z(re,me,ge,Math.max(Ie,Math.floor(ge-Vt*kn/ct+jn)),Math.min(ze,Math.floor(ge+(ct-Vt)*kn/ct+jn)),Xe)}const Ze=me[2*ge+Xe];let dt=Ie,xt=ze;for(n3(re,me,Ie,ge),me[2*ze+Xe]>Ze&&n3(re,me,Ie,ze);dt<xt;){for(n3(re,me,dt,xt),dt++,xt--;me[2*dt+Xe]<Ze;)dt++;for(;me[2*xt+Xe]>Ze;)xt--}me[2*Ie+Xe]===Ze?n3(re,me,Ie,xt):(xt++,n3(re,me,xt,ze)),xt<=ge&&(Ie=xt+1),ge<=xt&&(ze=xt-1)}}(d,u,j=b+P>>1,b,P,F),_j(d,u,g,b,j-1,1-F),_j(d,u,g,1+j,P,1-F))}function n3(d,u,g,b){yj(d,g,b),yj(u,2*g,2*b),yj(u,2*g+1,2*b+1)}function yj(d,u,g){var b=d[u];d[u]=d[g],d[g]=b}function iq(d,u,g,b){return(d-=g)*d+(g=u-b)*g}o.PerformanceMarkers=void 0,(xd=o.PerformanceMarkers||(o.PerformanceMarkers={})).create="create",xd.load="load",xd.fullLoad="fullLoad";let o7=null,r3=[];const vj=1e3/60,Cj="loadTime",bj="fullLoadTime";Bc={mark(d){performance.mark(d)},frame(d){null!=o7&&r3.push(d-o7),o7=d},clearMetrics(){o7=null,r3=[],performance.clearMeasures(Cj),performance.clearMeasures(bj);for(const d in o.PerformanceMarkers)performance.clearMarks(o.PerformanceMarkers[d])},getPerformanceMetrics(){performance.measure(Cj,o.PerformanceMarkers.create,o.PerformanceMarkers.load),performance.measure(bj,o.PerformanceMarkers.create,o.PerformanceMarkers.fullLoad);var d=performance.getEntriesByName(Cj)[0].duration,u=performance.getEntriesByName(bj)[0].duration,g=r3.length,b=1/(r3.reduce((F,j)=>F+j,0)/g/1e3),P=r3.filter(F=>F>vj).reduce((F,j)=>F+(j-vj)/vj,0);return{loadTime:d,fullLoadTime:u,fps:b,percentDroppedFrames:P/(g+P)*100,totalFrames:g}}},o.AJAXError=Vi,o.Actor=class{constructor(d,u){this.target=d,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new hX(()=>this.process()),this.subscription=function Qi(d,u,g,b){return d.addEventListener(u,g,b),{unsubscribe:()=>{d.removeEventListener(u,g,b)}}}(this.target,"message",g=>this.receive(g),!1),this.globalScope=vr(self)?d:window}registerMessageHandler(d,u){this.messageHandlers[d]=u}sendAsync(d,u){return new Promise((g,b)=>{const P=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[P]={resolve:g,reject:b},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[P];var F={id:P,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)},{once:!0}),g=[],b=Object.assign(Object.assign({},d),{id:P,sourceMapId:this.mapId,origin:location.origin,data:ey(d.data,g)}),this.target.postMessage(b,{transfer:g})})}receive(g){var u,b=(g=g.data).id;"file://"!==g.origin&&"file://"!==location.origin&&g.origin!==location.origin||g.targetMapId&&this.mapId!==g.targetMapId||("<cancel>"===g.type?(delete this.tasks[b],u=this.abortControllers[b],delete this.abortControllers[b],u&&u.abort()):vr(self)||g.mustQueue?(this.tasks[b]=g,this.taskQueue.push(b),this.invoker.trigger()):this.processTask(b,g))}process(){var d,u;0!==this.taskQueue.length&&(d=this.taskQueue.shift(),u=this.tasks[d],delete this.tasks[d],0<this.taskQueue.length&&this.invoker.trigger(),u)&&this.processTask(d,u)}processTask(d,u){return s(this,void 0,void 0,function*(){if("<response>"===u.type)return g=this.resolveRejects[d],delete this.resolveRejects[d],g?void(u.error?g.reject(Yb(u.error)):g.resolve(Yb(u.data))):void 0;if(this.messageHandlers[u.type]){var g=Yb(u.data),b=new AbortController;this.abortControllers[d]=b;try{var P=yield this.messageHandlers[u.type](u.sourceMapId,g,b);this.completeTask(d,null,P)}catch(F){this.completeTask(d,F)}}else this.completeTask(d,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: `+Object.keys(this.messageHandlers).join(", ")))})}completeTask(P,u,g){var b=[];delete this.abortControllers[P],P={id:P,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?ey(u):null,data:ey(g,b)},this.target.postMessage(P,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.AlphaImage=Kg,o.CanonicalTileID=fj,o.CollisionBoxArray=LF,o.CollisionCircleLayoutArray=class extends Nk{},o.Color=Fc,o.DEMData=BG,o.DataConstantProperty=ho,o.DictionaryCoder=zG,o.EXTENT=Cr,o.ErrorEvent=Gi,o.EvaluationParameters=il,o.Event=to,o.Evented=Vo,o.FeatureIndex=$G,o.FillBucket=Qz,o.FillExtrusionBucket=Zz,o.GLOBAL_DISPATCHER_ID=za,o.GeoJSONFeature=jG,o.ImageAtlas=bG,o.ImagePosition=ij,o.KDBush=class Cq{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var g,[b,P]=new Uint8Array(u,0,2);if(219!==b)throw new Error("Data does not appear to be in a KDBush format.");if(1!=(b=P>>4))throw new Error(`Got v${b} data when expected v1.`);if(b=rq[15&P])return[P]=new Uint16Array(u,2,1),[g]=new Uint32Array(u,4,1),new Cq(g,P,b,u);throw new Error("Unrecognized array type.")}constructor(u,g=64,b=Float64Array,P){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+g,2),65535),this.ArrayType=b,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;var F=rq.indexOf(this.ArrayType),j=2*u*this.ArrayType.BYTES_PER_ELEMENT,Z=u*this.IndexArrayType.BYTES_PER_ELEMENT,re=(8-Z%8)%8;if(F<0)throw new Error(`Unexpected typed array class: ${b}.`);P&&P instanceof ArrayBuffer?(this.data=P,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+Z+re,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+j+Z+re),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+Z+re,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+F]),new Uint16Array(this.data,2,1)[0]=g,new Uint32Array(this.data,4,1)[0]=u)}add(u,g){var b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=u,this.coords[this._pos++]=g,b}finish(){var u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return _j(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,g,b,P){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:F,coords:j,nodeSize:Z}=this,re=[0,F.length-1,0],me=[];re.length;){var ge=re.pop()||0,Ie=re.pop()||0,ze=re.pop()||0;if(Ie-ze<=Z)for(let Vt=ze;Vt<=Ie;Vt++){var Xe=j[2*Vt],Ze=j[2*Vt+1];u<=Xe&&Xe<=b&&g<=Ze&&Ze<=P&&me.push(F[Vt])}else{var dt=ze+Ie>>1,xt=j[2*dt],ct=j[2*dt+1];u<=xt&&xt<=b&&g<=ct&&ct<=P&&me.push(F[dt]),(0===ge?u<=xt:g<=ct)&&(re.push(ze),re.push(dt-1),re.push(1-ge)),(0===ge?xt<=b:ct<=P)&&(re.push(1+dt),re.push(Ie),re.push(1-ge))}}return me}within(u,g,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:P,coords:F,nodeSize:j}=this,Z=[0,P.length-1,0],re=[],me=b*b;Z.length;){var ge=Z.pop()||0,Ie=Z.pop()||0,ze=Z.pop()||0;if(Ie-ze<=j)for(let xt=ze;xt<=Ie;xt++)iq(F[2*xt],F[2*xt+1],u,g)<=me&&re.push(P[xt]);else{var Xe=ze+Ie>>1,Ze=F[2*Xe],dt=F[2*Xe+1];iq(Ze,dt,u,g)<=me&&re.push(P[Xe]),(0===ge?u-b<=Ze:g-b<=dt)&&(Z.push(ze),Z.push(Xe-1),Z.push(1-ge)),(0===ge?Ze<=u+b:dt<=g+b)&&(Z.push(1+Xe),Z.push(Ie),Z.push(1-ge))}}return re}},o.LineBucket=Jz,o.LineStripIndexArray=class extends wv{},o.LngLat=iE,o.MercatorCoordinate=n7,o.ONE_EM=Rd,o.OverscaledTileID=Wg,o.PerformanceUtils=Bc,o.Point=D,o.Pos3dArray=class extends GT{},o.PosArray=zk,o.Properties=up,o.Protobuf=nj,o.QuadTriangleArray=class extends KT{},o.RGBAImage=Yg,o.RasterBoundsArray=class extends Ok{},o.RequestPerformance=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return 0===d.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},o.SegmentVector=x,o.SymbolBucket=qP,o.Transitionable=IP,o.TriangleIndexArray=eE,o.Uniform1f=ke,o.Uniform1i=class extends Ee{constructor(d,u){super(d,u),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},o.Uniform2f=class extends Ee{constructor(d,u){super(d,u),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},o.Uniform3f=class extends Ee{constructor(d,u){super(d,u),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},o.Uniform4f=Ge,o.UniformColor=Re,o.UniformMatrix4f=class extends Ee{constructor(d,u){super(d,u),this.current=qe}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);else for(let u=1;u<16;u++)if(d[u]!==this.current[u]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},o.UnwrappedTileID=UG,o.ValidationError=Wt,o.ZoomHistory=PF,o.__awaiter=s,o.add=function(d,u,g){return d[0]=u[0]+g[0],d[1]=u[1]+g[1],d[2]=u[2]+g[2],d},o.addDynamicAttributes=cj,o.addProtocol=function(d,u){Zi.REGISTERED_PROTOCOLS[d]=u},o.arrayBufferToImage=d=>new Promise((u,g)=>{const b=new Image;b.onload=()=>{u(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame(()=>{b.src=Un})},b.onerror=()=>g(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));var P=new Blob([new Uint8Array(d)],{type:"image/png"});b.src=d.byteLength?URL.createObjectURL(P):Un}),o.arrayBufferToImageBitmap=d=>s(void 0,void 0,void 0,function*(){if(0===d.byteLength)return createImageBitmap(new ImageData(1,1));var u=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(u)}catch(g){throw new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.bezier=_n,o.clamp=Yn,o.clipLine=qG,o.clone=function(d){var u=new gu(16);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=d[6],u[7]=d[7],u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},o.clone$1=Er,o.clone$2=function(d){var u=new gu(3);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u},o.collisionCircleLayout=Z_,o.config=Zi,o.copy=function(d,u){return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},o.create=function(){var d=new gu(16);return gu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},o.create$1=Lm,o.create$2=function(){var d=new gu(4);return gu!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},o.createAbortError=Qs,o.createExpression=vP,o.createFilter=EP,o.createLayout=Wu,o.createStyleLayer=function(d){if("custom"===d.type)return new dX(d);switch(d.type){case"background":return new cX(d);case"circle":return new Um(d);case"fill":return new gQ(d);case"fill-extrusion":return new MQ(d);case"heatmap":return new aQ(d);case"hillshade":return new cQ(d);case"line":return new FQ(d);case"raster":return new uX(d);case"symbol":return new t7(d)}},o.cross=function Fm(d,F,re){var b=F[0],P=F[1],j=re[0],Z=re[1];return d[0]=P*(re=re[2])-(F=F[2])*Z,d[1]=F*j-b*re,d[2]=b*Z-P*j,d},o.deepEqual=function d(u,g){if(Array.isArray(u)){if(!Array.isArray(g)||u.length!==g.length)return!1;for(let b=0;b<u.length;b++)if(!d(u[b],g[b]))return!1}else{if("object"!=typeof u||null===u||null===g)return u===g;if("object"!=typeof g||Object.keys(u).length!==Object.keys(g).length)return!1;for(const b in u)if(!d(u[b],g[b]))return!1}return!0},o.defaultEasing=k,o.degreesToRadians=function(d){return d*Math.PI/180},o.derefLayers=function(d){d=d.slice();var u=Object.create(null);for(let g=0;g<d.length;g++)u[d[g].id]=d[g];for(let g=0;g<d.length;g++)"ref"in d[g]&&(d[g]=function(b,P){const F={};for(const j in b)"ref"!==j&&(F[j]=b[j]);return Be.forEach(j=>{j in P&&(F[j]=P[j])}),F}(d[g],u[d[g].ref]));return d},o.diffStyles=function(d,u){if(!d)return[{command:"setStyle",args:[u]}];let g=[];try{if(!Pe(d.version,u.version))return[{command:"setStyle",args:[u]}];Pe(d.center,u.center)||g.push({command:"setCenter",args:[u.center]}),Pe(d.zoom,u.zoom)||g.push({command:"setZoom",args:[u.zoom]}),Pe(d.bearing,u.bearing)||g.push({command:"setBearing",args:[u.bearing]}),Pe(d.pitch,u.pitch)||g.push({command:"setPitch",args:[u.pitch]}),Pe(d.sprite,u.sprite)||g.push({command:"setSprite",args:[u.sprite]}),Pe(d.glyphs,u.glyphs)||g.push({command:"setGlyphs",args:[u.glyphs]}),Pe(d.transition,u.transition)||g.push({command:"setTransition",args:[u.transition]}),Pe(d.light,u.light)||g.push({command:"setLight",args:[u.light]}),Pe(d.terrain,u.terrain)||g.push({command:"setTerrain",args:[u.terrain]}),Pe(d.sky,u.sky)||g.push({command:"setSky",args:[u.sky]});const dt={};var b=[];!function yn(d,u,g,b){let P;for(P in u=u||{},d=d||{})!Object.prototype.hasOwnProperty.call(d,P)||Object.prototype.hasOwnProperty.call(u,P)||kt(P,g,b);for(P in u)Object.prototype.hasOwnProperty.call(u,P)&&(Object.prototype.hasOwnProperty.call(d,P)?Pe(d[P],u[P])||("geojson"===d[P].type&&"geojson"===u[P].type&&function(re,me,ge){let Ie;for(Ie in re[ge])if(Object.prototype.hasOwnProperty.call(re[ge],Ie)&&"data"!==Ie&&!Pe(re[ge][Ie],me[ge][Ie]))return;for(Ie in me[ge])if(Object.prototype.hasOwnProperty.call(me[ge],Ie)&&"data"!==Ie&&!Pe(re[ge][Ie],me[ge][Ie]))return;return 1}(d,u,P)?$e(g,{command:"setGeoJSONSourceData",args:[P,u[P].data]}):(j=u,kt(F=P,Z=g,b),gt(F,j,Z))):gt(P,u,g));var F,j,Z}(d.sources,u.sources,b,dt);const xt=[];d.layers&&d.layers.forEach(ct=>{"source"in ct&&dt[ct.source]?g.push({command:"removeLayer",args:[ct.id]}):xt.push(ct)}),g=g.concat(b);{var P=xt,F=u.layers,j=g;F=F||[];var Z,re,me=(P=P||[]).map(St),ge=F.map(St),Ie=P.reduce(pn,{}),ze=F.reduce(pn,{}),Xe=me.slice(),Ze=Object.create(null);let ct,Vt,un;for(let kn=0,jn=0;kn<me.length;kn++)ct=me[kn],Object.prototype.hasOwnProperty.call(ze,ct)?jn++:($e(j,{command:"removeLayer",args:[ct]}),Xe.splice(Xe.indexOf(ct,jn),1));for(let kn=0,jn=0;kn<ge.length;kn++)ct=ge[ge.length-1-kn],Xe[Xe.length-1-kn]!==ct&&(Object.prototype.hasOwnProperty.call(Ie,ct)?($e(j,{command:"removeLayer",args:[ct]}),Xe.splice(Xe.lastIndexOf(ct,Xe.length-jn),1)):jn++,Vt=Xe[Xe.length-kn],$e(j,{command:"addLayer",args:[ze[ct],Vt]}),Xe.splice(Xe.length-kn,0,ct),Ze[ct]=!0);for(let kn=0;kn<ge.length;kn++)if(Z=Ie[ct=ge[kn]],re=ze[ct],!Ze[ct]&&!Pe(Z,re))if(Pe(Z.source,re.source)&&Pe(Z["source-layer"],re["source-layer"])&&Pe(Z.type,re.type)){for(un in Fn(Z.layout,re.layout,j,ct,null,"setLayoutProperty"),Fn(Z.paint,re.paint,j,ct,null,"setPaintProperty"),Pe(Z.filter,re.filter)||$e(j,{command:"setFilter",args:[ct,re.filter]}),Pe(Z.minzoom,re.minzoom)&&Pe(Z.maxzoom,re.maxzoom)||$e(j,{command:"setLayerZoomRange",args:[ct,re.minzoom,re.maxzoom]}),Z)Object.prototype.hasOwnProperty.call(Z,un)&&"layout"!==un&&"paint"!==un&&"filter"!==un&&"metadata"!==un&&"minzoom"!==un&&"maxzoom"!==un&&(0===un.indexOf("paint.")?Fn(Z[un],re[un],j,ct,un.slice(6),"setPaintProperty"):Pe(Z[un],re[un])||$e(j,{command:"setLayerProperty",args:[ct,un,re[un]]}));for(un in re)Object.prototype.hasOwnProperty.call(re,un)&&!Object.prototype.hasOwnProperty.call(Z,un)&&"layout"!==un&&"paint"!==un&&"filter"!==un&&"metadata"!==un&&"minzoom"!==un&&"maxzoom"!==un&&(0===un.indexOf("paint.")?Fn(Z[un],re[un],j,ct,un.slice(6),"setPaintProperty"):Pe(Z[un],re[un])||$e(j,{command:"setLayerProperty",args:[ct,un,re[un]]}))}else $e(j,{command:"removeLayer",args:[ct]}),$e(j,{command:"addLayer",args:[re,Vt=Xe[Xe.lastIndexOf(ct)+1]]})}}catch(dt){console.warn("Unable to compute style diff:",dt),g=[{command:"setStyle",args:[u]}]}return g},o.dot=function Tv(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]},o.dot$1=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]*u[3]},o.earthRadius=hj,o.emitValidationErrors=OF,o.emptyStyle=function(){var d={},u=Ye.$version;for(const b in Ye.$root){var g=Ye.$root[b];if(g.required){let P=null;null!=(P="version"===b?u:"array"===g.type?[]:{})&&(d[b]=P)}}return d},o.equals=function(ct,qi){var g=ct[0],b=ct[1],P=ct[2],F=ct[3],j=ct[4],Z=ct[5],re=ct[6],me=ct[7],ge=ct[8],Ie=ct[9],ze=ct[10],Xe=ct[11],Ze=ct[12],dt=ct[13],xt=ct[14],Vt=(ct=ct[15],qi[0]),un=qi[1],kn=qi[2],jn=qi[3],tr=qi[4],Ur=qi[5],Pi=qi[6],gi=qi[7],Ar=qi[8],li=qi[9],Vr=qi[10],xr=qi[11],ir=qi[12],Ui=qi[13],Ri=qi[14];return qi=qi[15],Math.abs(g-Vt)<=Zl*Math.max(1,Math.abs(g),Math.abs(Vt))&&Math.abs(b-un)<=Zl*Math.max(1,Math.abs(b),Math.abs(un))&&Math.abs(P-kn)<=Zl*Math.max(1,Math.abs(P),Math.abs(kn))&&Math.abs(F-jn)<=Zl*Math.max(1,Math.abs(F),Math.abs(jn))&&Math.abs(j-tr)<=Zl*Math.max(1,Math.abs(j),Math.abs(tr))&&Math.abs(Z-Ur)<=Zl*Math.max(1,Math.abs(Z),Math.abs(Ur))&&Math.abs(re-Pi)<=Zl*Math.max(1,Math.abs(re),Math.abs(Pi))&&Math.abs(me-gi)<=Zl*Math.max(1,Math.abs(me),Math.abs(gi))&&Math.abs(ge-Ar)<=Zl*Math.max(1,Math.abs(ge),Math.abs(Ar))&&Math.abs(Ie-li)<=Zl*Math.max(1,Math.abs(Ie),Math.abs(li))&&Math.abs(ze-Vr)<=Zl*Math.max(1,Math.abs(ze),Math.abs(Vr))&&Math.abs(Xe-xr)<=Zl*Math.max(1,Math.abs(Xe),Math.abs(xr))&&Math.abs(Ze-ir)<=Zl*Math.max(1,Math.abs(Ze),Math.abs(ir))&&Math.abs(dt-Ui)<=Zl*Math.max(1,Math.abs(dt),Math.abs(Ui))&&Math.abs(xt-Ri)<=Zl*Math.max(1,Math.abs(xt),Math.abs(Ri))&&Math.abs(ct-qi)<=Zl*Math.max(1,Math.abs(ct),Math.abs(qi))},o.evaluateSizeForFeature=function(d,{uSize:u,uSizeT:g},{lowerSize:b,upperSize:P}){return"source"===d.kind?b/Mv:"composite"===d.kind?Ef.number(b/Mv,P/Mv,g):u},o.evaluateSizeForZoom=function(d,u){let g=0,b=0;var P,F,j;return"constant"===d.kind?b=d.layoutSize:"source"!==d.kind&&(({interpolationType:j,minZoom:P,maxZoom:F}=d),j=j?Yn(Sf.interpolationFactor(j,u,P,F),0,1):0,"camera"===d.kind?b=Ef.number(d.minSize,d.maxSize,j):g=j),{uSizeT:g,uSize:b}},o.exactEquals=function(d,u){return d[0]===u[0]&&d[1]===u[1]&&d[2]===u[2]&&d[3]===u[3]&&d[4]===u[4]&&d[5]===u[5]&&d[6]===u[6]&&d[7]===u[7]&&d[8]===u[8]&&d[9]===u[9]&&d[10]===u[10]&&d[11]===u[11]&&d[12]===u[12]&&d[13]===u[13]&&d[14]===u[14]&&d[15]===u[15]},o.extend=ri,o.filterObject=Zn,o.findLineIntersection=function(d,F,g,Z){var P=F.y-d.y,j=Z.y-g.y,re=j*(F=F.x-d.x)-(Z=Z.x-g.x)*P;return 0==re?null:new D(d.x+(Z=(Z*(d.y-g.y)-j*(d.x-g.x))/re)*F,d.y+Z*P)},o.fromRotation=function(d,b){var g=Math.sin(b);return b=Math.cos(b),d[0]=b,d[1]=g,d[2]=0,d[3]=-g,d[4]=b,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},o.fromScaling=function(d,u){return d[0]=u[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=u[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=u[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},o.getAnchorAlignment=aj,o.getAnchorJustification=mj,o.getArrayBuffer=(d,u)=>Si(ri(d,{type:"arrayBuffer"}),u),o.getDefaultExportFromCjs=f,o.getImageData=function(d,u,g,b,P){return s(this,void 0,void 0,function*(){if(lt())try{return yield pi(d,u,g,b,P)}catch{}return j=u,Z=g,re=b,me=P,ge=(F=d).width,Ie=F.height,Bo&&Li||(Bo=new OffscreenCanvas(ge,Ie),Li=Bo.getContext("2d",{willReadFrequently:!0})),Bo.width=ge,Bo.height=Ie,Li.drawImage(F,0,0,ge,Ie),F=Li.getImageData(j,Z,re,me),Li.clearRect(0,0,ge,Ie),F.data;var F,j,Z,re,me,ge,Ie})},o.getJSON=(d,u)=>Si(ri(d,{type:"json"}),u),o.getOverlapMode=sj,o.getProtocol=Na,o.getReferrer=Sn,o.getVideo=d=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(g=>{u.onloadstart=()=>{g(u)};for(const P of d){var b=window.document.createElement("source");Dn(P)||(u.crossOrigin="Anonymous"),b.src=P,u.appendChild(b)}})},o.groupByLayout=function(d,u){var g={};for(let F=0;F<d.length;F++){var b=u&&u[d[F].id]||CF(d[F]);u&&(u[d[F].id]=b);let j=g[b];(j=j||(g[b]=[])).push(d[F])}var P=[];for(const F in g)P.push(g[F]);return P},o.identity=ol,o.interpolate=Ef,o.invert=function(d,ct){var g=ct[0],b=ct[1],P=ct[2],F=ct[3],j=ct[4],Z=ct[5],re=ct[6],me=ct[7],ge=ct[8],Ie=ct[9],ze=ct[10],Xe=ct[11],Ze=ct[12],dt=ct[13],xt=ct[14],Vt=g*Z-b*j,un=g*re-P*j,kn=g*me-F*j,jn=b*re-P*Z,tr=b*me-F*Z,Ur=P*me-F*re,Pi=ge*dt-Ie*Ze,gi=ge*xt-ze*Ze,Ar=ge*(ct=ct[15])-Xe*Ze,li=Ie*xt-ze*dt,Vr=Ie*ct-Xe*dt,xr=ze*ct-Xe*xt,ir=Vt*xr-un*Vr+kn*li+jn*Ar-tr*gi+Ur*Pi;return ir?(d[0]=(Z*xr-re*Vr+me*li)*(ir=1/ir),d[1]=(P*Vr-b*xr-F*li)*ir,d[2]=(dt*Ur-xt*tr+ct*jn)*ir,d[3]=(ze*tr-Ie*Ur-Xe*jn)*ir,d[4]=(re*Ar-j*xr-me*gi)*ir,d[5]=(g*xr-P*Ar+F*gi)*ir,d[6]=(xt*kn-Ze*Ur-ct*un)*ir,d[7]=(ge*Ur-ze*kn+Xe*un)*ir,d[8]=(j*Vr-Z*Ar+me*Pi)*ir,d[9]=(b*Ar-g*Vr-F*Pi)*ir,d[10]=(Ze*tr-dt*kn+ct*Vt)*ir,d[11]=(Ie*kn-ge*tr-Xe*Vt)*ir,d[12]=(Z*gi-j*li-re*Pi)*ir,d[13]=(g*li-b*gi+P*Pi)*ir,d[14]=(dt*un-Ze*jn-xt*Vt)*ir,d[15]=(ge*jn-Ie*un+ze*Vt)*ir,d):null},o.isAbortError=function(d){return d.message===Bn},o.isImageBitmap=Bi,o.isOffscreenCanvasDistorted=lt,o.isSafari=function(d){var u;return null==si&&(u=d.navigator?d.navigator.userAgent:null,si=!!d.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))),si},o.isWorker=vr,o.keysDifference=function(d,u){var g=[];for(const b in d)b in u||g.push(b);return g},o.makeRequest=Si,o.mapObject=zn,o.mercatorXfromLng=kG,o.mercatorYfromLat=LG,o.mercatorZfromAltitude=FG,o.mul=kT,o.mul$1=function Av(d,u,g){return d[0]=u[0]*g[0],d[1]=u[1]*g[1],d[2]=u[2]*g[2],d[3]=u[3]*g[3],d},o.multiply=yh,o.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},o.normalize=function Pd(d,u){var P,g=u[1],b=u[2];return 0<(P=(P=u[0])*P+g*g+b*b)&&(P=1/Math.sqrt(P)),d[0]=u[0]*P,d[1]=u[1]*P,d[2]=u[2]*P,d},o.offscreenCanvasSupported=Ve,o.ortho=function Sl(d,u,g,b,P,F,j){var Z=1/(u-g),re=1/(b-P),me=1/(F-j);return d[0]=-2*Z,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*re,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*me,d[11]=0,d[12]=(u+g)*Z,d[13]=(P+b)*re,d[14]=(j+F)*me,d[15]=1,d},o.parseCacheControl=function(d){const u={};return d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(g,b,P,F)=>(u[b]=!(P=P||F)||P.toLowerCase(),"")),u["max-age"]&&(d=parseInt(u["max-age"],10),isNaN(d)?delete u["max-age"]:u["max-age"]=d),u},o.parseGlyphPbf=function(d){return new nj(d).readFields(JQ,[])},o.pbf=cg,o.performSymbolLayout=function(d){d.bucket.createArrays();var u,g,b=512*d.bucket.overscaling,P=(d.bucket.tilePixelRatio=Cr/b,d.bucket.compareText={},d.bucket.iconsNeedLinear=!1,d.bucket.layers[0]),F=P.layout,j={layoutIconSize:(b=P._unevaluatedLayout._values)["icon-size"].possiblyEvaluate(new il(d.bucket.zoom+1),d.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new il(d.bucket.zoom+1),d.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new il(18))};"composite"===d.bucket.textSizeData.kind&&(({minZoom:u,maxZoom:g}=d.bucket.textSizeData),j.compositeTextSizes=[b["text-size"].possiblyEvaluate(new il(u),d.canonical),b["text-size"].possiblyEvaluate(new il(g),d.canonical)]),"composite"===d.bucket.iconSizeData.kind&&(({minZoom:u,maxZoom:g}=d.bucket.iconSizeData),j.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new il(u),d.canonical),b["icon-size"].possiblyEvaluate(new il(g),d.canonical)]);const Z=F.get("text-line-height")*Rd;var re="viewport"!==F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement"),me=F.get("text-keep-upright"),ge=F.get("text-size");for(const ct of d.bucket.features){const Vt=F.get("text-font").evaluate(ct,{},d.canonical).join(","),un=ge.evaluate(ct,{},d.canonical),kn=j.layoutTextSize.evaluate(ct,{},d.canonical);var Ie=j.layoutIconSize.evaluate(ct,{},d.canonical);const jn={horizontal:{},vertical:void 0},tr=ct.text;let Ur=[0,0];if(tr){const Ar=tr.toString();var ze=F.get("text-letter-spacing").evaluate(ct,{},d.canonical)*Rd;const li=RF(Ar)?ze:0,Vr=F.get("text-anchor").evaluate(ct,{},d.canonical);var Xe=eq(P,ct,d.canonical);Xe||(ze=F.get("text-radial-offset").evaluate(ct,{},d.canonical),Ur=ze?JG(Vr,[ze*Rd,gj]):F.get("text-offset").evaluate(ct,{},d.canonical).map(Ri=>Ri*Rd));let xr=re?"center":F.get("text-justify").evaluate(ct,{},d.canonical);const ir=F.get("symbol-placement"),Ui="point"===ir?F.get("text-max-width").evaluate(ct,{},d.canonical)*Rd:0;if(ze=()=>{d.bucket.allowVerticalPlacement&&D1(Ar)&&(jn.vertical=ZF(tr,d.glyphMap,d.glyphPositions,d.imagePositions,Vt,Ui,Z,Vr,"left",li,Ur,o.WritingMode.vertical,!0,ir,kn,un))},!re&&Xe){var Ze,dt=new Set;if("auto"===xr)for(let qi=0;qi<Xe.values.length;qi+=2)dt.add(mj(Xe.values[qi]));else dt.add(xr);let Ri=!1;for(const qi of dt)jn.horizontal[qi]||(Ri?jn.horizontal[qi]=jn.horizontal[0]:(Ze=ZF(tr,d.glyphMap,d.glyphPositions,d.imagePositions,Vt,Ui,Z,"center",qi,li,Ur,o.WritingMode.horizontal,!1,ir,kn,un))&&(jn.horizontal[qi]=Ze,Ri=1===Ze.positionedLines.length));ze()}else{"auto"===xr&&(xr=mj(Vr));var xt=ZF(tr,d.glyphMap,d.glyphPositions,d.imagePositions,Vt,Ui,Z,Vr,xr,li,Ur,o.WritingMode.horizontal,!1,ir,kn,un);xt&&(jn.horizontal[xr]=xt),ze(),D1(Ar)&&re&&me&&(jn.vertical=ZF(tr,d.glyphMap,d.glyphPositions,d.imagePositions,Vt,Ui,Z,Vr,xr,li,Ur,o.WritingMode.vertical,!1,ir,kn,un))}}let Pi,gi=!1;ct.icon&&ct.icon.name&&(xt=d.imageMap[ct.icon.name])&&(Pi=function(Ar,Ri,Ui){var{horizontalAlign:Ui,verticalAlign:xr}=aj(Ui),ir=Ri[0];return Ui=(ir-=Ar.displaySize[0]*Ui)+Ar.displaySize[0],{image:Ar,top:Ri=(Ri=Ri[1])-Ar.displaySize[1]*xr,bottom:Ri+Ar.displaySize[1],left:ir,right:Ui}}(d.imagePositions[ct.icon.name],F.get("icon-offset").evaluate(ct,{},d.canonical),F.get("icon-anchor").evaluate(ct,{},d.canonical)),gi=!!xt.sdf,void 0===d.bucket.sdfIcons?d.bucket.sdfIcons=gi:d.bucket.sdfIcons!==gi&&Hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),xt.pixelRatio!==d.bucket.pixelRatio||0!==F.get("icon-rotate").constantOr(1))&&(d.bucket.iconsNeedLinear=!0),ze=nq(jn.horizontal)||jn.vertical,d.bucket.iconsInText=!!ze&&ze.iconsInText,(ze||Pi)&&function(Ar,li,Vr,xr,ir,Ui,Ri,qi,zo,ja,na){let Zs=Ui.textMaxSize.evaluate(li,{});void 0===Zs&&(Zs=Ri);const vo=Ar.layers[0].layout,ga=vo.get("icon-offset").evaluate(li,{},na),Ps=nq(Vr.horizontal),zc=Ri/24,Qg=Ar.tilePixelRatio*zc,Qp=Ar.tilePixelRatio*Zs/24,Rs=Ar.tilePixelRatio*qi,ms=Ar.tilePixelRatio*vo.get("symbol-spacing"),ty=vo.get("text-padding")*Ar.tilePixelRatio,sE=function(fc,Js,ec,ku=1){return[(Js=(fc=fc.get("icon-padding").evaluate(Js,{},ec))&&fc.values)[0]*ku,Js[1]*ku,Js[2]*ku,Js[3]*ku]}(vo,li,na,Ar.tilePixelRatio),jm=vo.get("text-max-angle")/180*Math.PI,Ov="viewport"!==vo.get("text-rotation-alignment")&&"point"!==vo.get("symbol-placement"),dp="map"===vo.get("icon-rotation-alignment")&&"point"!==vo.get("symbol-placement"),$m=vo.get("symbol-placement"),Ej=ms/2,i3=vo.get("icon-text-fit");let Nd;xr&&"none"!==i3&&(Ar.allowVerticalPlacement&&Vr.vertical&&(Nd=AG(xr,Vr.vertical,i3,vo.get("icon-text-fit-padding"),ga,zc)),Ps)&&(xr=AG(xr,Ps,i3,vo.get("icon-text-fit-padding"),ga,zc));var Hh=(fc,Js)=>{if(!(Js.x<0||Js.x>=Cr||Js.y<0||Js.y>=Cr)){var ec=Ar,ku=Js;Js=fc;var dd=Vr;fc=xr;var Tf=ir,wl=Nd,hd=Ar.layers[0],Uh=Ar.collisionBoxArray,hp=li.index,lg=li.sourceLayerIndex,Bh=Ar.index,pp=Qg,Gm=[ty,ty,ty,ty],Pv=Ov,WP=zo,Rv=Rs,a7=sE,xv=dp,s7=ga,Xg=li,c7=Ui,QT=ja,B1=na,a3=Ri,QP=ec.addToLineVertexArray(ku,Js);let XT,XP,ZP,JP,aq=0,sq=0,cq=0,lq=0,Sj=-1,wj=-1;var z1={};let uq=E("");if(ec.allowVerticalPlacement&&dd.vertical&&(Js=hd.layout.get("text-rotate").evaluate(Xg,{},B1)+90,ZP=new i7(Uh,ku,hp,lg,Bh,o3=dd.vertical,pp,Gm,Pv,Js),wl)&&(JP=new i7(Uh,ku,hp,lg,Bh,wl,Rv,a7,Pv,Js)),fc){var o3=hd.layout.get("icon-rotate").evaluate(Xg,{}),l7=XG(fc,o3,QT,Js="none"!==hd.layout.get("icon-text-fit"));wl=wl?XG(wl,o3,QT,Js):void 0;let ny=null;"source"===(XP=new i7(Uh,ku,hp,lg,Bh,fc,Rv,a7,!1,o3),aq=4*l7.length,QT=ec.iconSizeData).kind?(ny=[Mv*hd.layout.get("icon-size").evaluate(Xg,{})])[0]>rE&&Hn(`${ec.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`):"composite"===QT.kind&&((ny=[Mv*c7.compositeIconSizes[0].evaluate(Xg,{},B1),Mv*c7.compositeIconSizes[1].evaluate(Xg,{},B1)])[0]>rE||ny[1]>rE)&&Hn(`${ec.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`),ec.addSymbols(ec.icon,l7,ny,s7,xv,Xg,o.WritingMode.none,ku,QP.lineStartIndex,QP.lineLength,-1,B1),Sj=ec.icon.placedSymbolArray.length-1,wl&&(sq=4*wl.length,ec.addSymbols(ec.icon,wl,ny,s7,xv,Xg,o.WritingMode.vertical,ku,QP.lineStartIndex,QP.lineLength,-1,B1),wj=ec.icon.placedSymbolArray.length-1)}var oq=Object.keys(dd.horizontal);for(const Dv of oq){var u7=dd.horizontal[Dv],d7=(XT||(uq=E(u7.text),d7=hd.layout.get("text-rotate").evaluate(Xg,{},B1),XT=new i7(Uh,ku,hp,lg,Bh,u7,pp,Gm,Pv,d7)),1===u7.positionedLines.length);if(cq+=tq(ec,ku,u7,Tf,hd,Pv,Xg,WP,QP,dd.vertical?o.WritingMode.horizontal:o.WritingMode.horizontalOnly,d7?oq:[Dv],z1,Sj,c7,B1),d7)break}dd.vertical&&(lq+=tq(ec,ku,dd.vertical,Tf,hd,Pv,Xg,WP,QP,o.WritingMode.vertical,["vertical"],z1,wj,c7,B1)),Js=XT?XT.boxStartIndex:ec.collisionBoxArray.length,fc=XT?XT.boxEndIndex:ec.collisionBoxArray.length,Rv=ZP?ZP.boxStartIndex:ec.collisionBoxArray.length,a7=ZP?ZP.boxEndIndex:ec.collisionBoxArray.length,QT=XP?XP.boxStartIndex:ec.collisionBoxArray.length,l7=XP?XP.boxEndIndex:ec.collisionBoxArray.length,wl=JP?JP.boxStartIndex:ec.collisionBoxArray.length,s7=JP?JP.boxEndIndex:ec.collisionBoxArray.length;let Nv=-1;Nv=(xv=(Dv,s3)=>Dv&&Dv.circleDiameter?Math.max(Dv.circleDiameter,s3):s3)(XT,Nv),Nv=xv(ZP,Nv),Nv=xv(XP,Nv),(xv=-1<(Nv=xv(JP,Nv))?1:0)&&(Nv*=a3/Rd),ec.glyphOffsetArray.length>=qP.MAX_GLYPHS&&Hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Xg.sortKey&&ec.addToSortKeyRanges(ec.symbolInstances.length,Xg.sortKey),a3=eq(hd,Xg,B1);var[a3,TX]=function(Dv,s3){var AX=Dv.length,ny=s3?.values;if(0<ny?.length)for(let h7=0;h7<ny.length;h7+=2){var dq=ny[h7+1];Dv.emplaceBack(o.TextAnchorEnum[ny[h7]],dq[0],dq[1])}return[AX,Dv.length]}(ec.textAnchorOffsets,a3);ec.symbolInstances.emplaceBack(ku.x,ku.y,0<=z1.right?z1.right:-1,0<=z1.center?z1.center:-1,0<=z1.left?z1.left:-1,z1.vertical||-1,Sj,wj,uq,Js,fc,Rv,a7,QT,l7,wl,s7,hp,cq,lq,aq,sq,xv,0,pp,Nv,a3,TX)}};if("line"===$m)for(const fc of qG(li.geometry,0,0,Cr,Cr))for(const Js of vX(fc,ms,jm,Vr.vertical||Ps,xr,24,Qp,Ar.overscaling,Cr))Ps&&function(ec,ku,dd,Tf){if(ku in(ec=ec.compareText)){var wl=ec[ku];for(let hd=wl.length-1;0<=hd;hd--)if(Tf.dist(wl[hd])<dd)return 1}else ec[ku]=[];return ec[ku].push(Tf),0}(Ar,Ps.text,Ej,Js)||Hh(fc,Js);else if("line-center"===$m)for(const fc of li.geometry){var Vm;1<fc.length&&(Vm=function(Js,ec,ku,dd,Tf,wl){var hd=WG(ku,24,wl),Uh=QG(ku,dd)*wl;let hp=0;var lg=YG(Js)/2;for(let Rv=0;Rv<Js.length-1;Rv++){var Bh,pp,Gm=Js[Rv],Pv=Js[Rv+1],WP=Gm.dist(Pv);if(hp+WP>lg)return pp=Ef.number(Gm.x,Pv.x,Bh=(lg-hp)/WP),Bh=Ef.number(Gm.y,Pv.y,Bh),(pp=new oE(pp,Bh,Pv.angleTo(Gm),Rv))._round(),!hd||KG(Js,pp,Uh,hd,ec)?pp:void 0;hp+=WP}}(fc,jm,Vr.vertical||Ps,xr,0,Qp))&&Hh(fc,Vm)}else if("Polygon"===li.type)for(const fc of Kz(li.geometry,0)){var U1=SX(fc,16);Hh(fc[0],new oE(U1.x,U1.y,0))}else if("LineString"===li.type)for(const fc of li.geometry)Hh(fc,new oE(fc[0].x,fc[0].y,0));else if("Point"===li.type)for(const fc of li.geometry)for(const Js of fc)Hh([Js],new oE(Js.x,Js.y,0))}(d.bucket,ct,jn,Pi,d.imageMap,j,kn,Ie,Ur,gi,d.canonical)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},o.perspective=function al(d,u,g,b,P){return u=1/Math.tan(u/2),d[0]=u/g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=u,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,null!=P&&P!==1/0?(d[10]=(P+b)*(g=1/(b-P)),d[14]=2*P*b*g):(d[10]=-1,d[14]=-2*b),d},o.pick=function(d,u){var g={};for(let P=0;P<u.length;P++){var b=u[P];b in d&&(g[b]=d[b])}return g},o.pointGeometry=v,o.polygonIntersectsPolygon=Xi,o.potpack=CG,o.readImageUsingVideoFrame=pi,o.register=Fi,o.removeProtocol=function(d){delete Zi.REGISTERED_PROTOCOLS[d]},o.renderColorRamp=XV,o.renderStyleImage=function(d){var u=d.userImage;return!!(u&&u.render&&u.render())&&(d.data.replace(new Uint8Array(u.data.buffer)),!0)},o.rotate=function(d,j,re){var b=j[0],P=j[1],F=j[2],Z=(j=j[3],Math.sin(re));return re=Math.cos(re),d[0]=b*re+F*Z,d[1]=P*re+j*Z,d[2]=b*-Z+F*re,d[3]=P*-Z+j*re,d},o.rotateX=function(d,u,P){var b=Math.sin(P),F=(P=Math.cos(P),u[4]),j=u[5],Z=u[6],re=u[7],me=u[8],ge=u[9],Ie=u[10],ze=u[11];return u!==d&&(d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[4]=F*P+me*b,d[5]=j*P+ge*b,d[6]=Z*P+Ie*b,d[7]=re*P+ze*b,d[8]=me*P-F*b,d[9]=ge*P-j*b,d[10]=Ie*P-Z*b,d[11]=ze*P-re*b,d},o.rotateZ=function(d,u,P){var b=Math.sin(P),F=(P=Math.cos(P),u[0]),j=u[1],Z=u[2],re=u[3],me=u[4],ge=u[5],Ie=u[6],ze=u[7];return u!==d&&(d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=F*P+me*b,d[1]=j*P+ge*b,d[2]=Z*P+Ie*b,d[3]=re*P+ze*b,d[4]=me*P-F*b,d[5]=ge*P-j*b,d[6]=Ie*P-Z*b,d[7]=ze*P-re*b,d},o.rtlWorkerPlugin=k1,o.sameOrigin=Dn,o.scale=function(d,u,F){var b=F[0],P=F[1];return F=F[2],d[0]=u[0]*b,d[1]=u[1]*b,d[2]=u[2]*b,d[3]=u[3]*b,d[4]=u[4]*P,d[5]=u[5]*P,d[6]=u[6]*P,d[7]=u[7]*P,d[8]=u[8]*F,d[9]=u[9]*F,d[10]=u[10]*F,d[11]=u[11]*F,d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},o.scale$1=function(d,u,g){return d[0]=u[0]*g,d[1]=u[1]*g,d[2]=u[2]*g,d},o.sphericalToCartesian=function([d,u,g]){return u=(u+=90)*(Math.PI/180),g*=Math.PI/180,{x:d*Math.cos(u)*Math.sin(g),y:d*Math.sin(u)*Math.sin(g),z:d*Math.cos(g)}},o.sqrLen=function Du(g){var u=g[0];return u*u+(g=g[1])*g},o.sub=function Qu(d,u,g){return d[0]=u[0]-g[0],d[1]=u[1]-g[1],d[2]=u[2]-g[2],d},o.toEvaluationFeature=Yi,o.transformMat3=function(d,F,g){var b=F[0],P=F[1];return d[0]=b*g[0]+P*g[3]+(F=F[2])*g[6],d[1]=b*g[1]+P*g[4]+F*g[7],d[2]=b*g[2]+P*g[5]+F*g[8],d},o.transformMat4=Hm,o.transformMat4$1=function(d,P,g){var b=P[0];return d[0]=g[0]*b+g[4]*(P=P[1])+g[12],d[1]=g[1]*b+g[5]*P+g[13],d},o.translate=function(d,u,ct){var b,P,F,j,Z,re,me,ge,Ie,ze,Xe,Ze,dt=ct[0],xt=ct[1];return ct=ct[2],u===d?(d[12]=u[0]*dt+u[4]*xt+u[8]*ct+u[12],d[13]=u[1]*dt+u[5]*xt+u[9]*ct+u[13],d[14]=u[2]*dt+u[6]*xt+u[10]*ct+u[14],d[15]=u[3]*dt+u[7]*xt+u[11]*ct+u[15]):(P=u[1],F=u[2],j=u[3],Z=u[4],re=u[5],me=u[6],ge=u[7],Ie=u[8],ze=u[9],Xe=u[10],Ze=u[11],d[0]=b=u[0],d[1]=P,d[2]=F,d[3]=j,d[4]=Z,d[5]=re,d[6]=me,d[7]=ge,d[8]=Ie,d[9]=ze,d[10]=Xe,d[11]=Ze,d[12]=b*dt+Z*xt+Ie*ct+u[12],d[13]=P*dt+re*xt+ze*ct+u[13],d[14]=F*dt+me*xt+Xe*ct+u[14],d[15]=j*dt+ge*xt+Ze*ct+u[15]),d},o.unicodeBlockLookup=wi,o.uniqueId=function(){return tn++},o.v8Spec=Ye,o.validateCustomStyleLayer=function(d){var u=[],g=d.id;return void 0===g&&u.push({message:`layers.${g}: missing required property "id"`}),void 0===d.render&&u.push({message:`layers.${g}: missing required method "render"`}),d.renderingMode&&"2d"!==d.renderingMode&&"3d"!==d.renderingMode&&u.push({message:`layers.${g}: property "renderingMode" must be either "2d" or "3d"`}),u},o.validateLight=DT,o.validateStyle=Sv,o.vectorTile=nE,o.warnOnce=Hn,o.wrap=sr}),i("worker",0,function(o){class s{constructor(xe){this.keyCache={},xe&&this.replace(xe)}replace(xe){this._layerConfigs={},this._layers={},this.update(xe,[])}update(xe,je){for(const Qt of xe){this._layerConfigs[Qt.id]=Qt;var Ue=this._layers[Qt.id]=o.createStyleLayer(Qt);Ue._featureFilter=o.createFilter(Ue.filter),this.keyCache[Qt.id]&&delete this.keyCache[Qt.id]}for(const Qt of je)delete this.keyCache[Qt],delete this._layerConfigs[Qt],delete this._layers[Qt];this.familiesBySource={};for(const Qt of o.groupByLayout(Object.values(this._layerConfigs),this.keyCache)){var Tt=Qt.map(zt=>this._layers[zt.id]),Jt=Tt[0];if("none"!==Jt.visibility){var mn=Jt.source||"";let zt=this.familiesBySource[mn];zt=zt||(this.familiesBySource[mn]={});let rn=zt[mn=Jt.sourceLayer||"_geojsonTileLayer"];(rn=rn||(zt[mn]=[])).push(Tt)}}}}class f{constructor(xe){var je={},Ue=[];for(const uo in xe){var Tt=xe[uo],Jt=je[uo]={};for(const Ro in Tt){var mn,Qt=Tt[+Ro];Qt&&0!==Qt.bitmap.width&&0!==Qt.bitmap.height&&(Ue.push(mn={x:0,y:0,w:Qt.bitmap.width+2,h:Qt.bitmap.height+2}),Jt[Ro]={rect:mn,metrics:Qt.metrics})}}var{w:zt,h:rn}=o.potpack(Ue),fr=new o.AlphaImage({width:zt||1,height:rn||1});for(const uo in xe){var Sr=xe[uo];for(const Ro in Sr){var ci,Eo=Sr[+Ro];Eo&&0!==Eo.bitmap.width&&0!==Eo.bitmap.height&&o.AlphaImage.copy(Eo.bitmap,fr,{x:0,y:0},{x:(ci=je[uo][Ro].rect).x+1,y:ci.y+1},Eo.bitmap)}}this.image=fr,this.positions=je}}o.register("GlyphAtlas",f);class v{constructor(xe){this.tileID=new o.OverscaledTileID(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.uid=xe.uid,this.zoom=xe.zoom,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.collectResourceTiming,this.returnDependencies=!!xe.returnDependencies,this.promoteId=xe.promoteId,this.inFlightDependencies=[]}parse(xe,je,Ue,Tt){return o.__awaiter(this,void 0,void 0,function*(){this.status="parsing",this.data=xe,this.collisionBoxArray=new o.CollisionBoxArray;var Jt=new o.DictionaryCoder(Object.keys(xe.layers).sort()),mn=new o.FeatureIndex(this.tileID,this.promoteId),Qt=(mn.bucketLayerIDs=[],{}),zt={featureIndex:mn,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ue},rn=je.familiesBySource[this.source];for(const Xd in rn){var fr=xe.layers[Xd];if(fr){1===fr.version&&o.warnOnce(`Vector tile source "${this.source}" layer "${Xd}" does not use vector tile spec v2 and therefore may have some rendering errors.`);var Sr=Jt.encode(Xd),ci=[];for(let Kp=0;Kp<fr.length;Kp++){var Eo=fr.feature(Kp),uo=mn.getId(Eo,Xd);ci.push({feature:Eo,id:uo,index:Kp,sourceLayerIndex:Sr})}for(const Kp of rn[Xd]){var Ro=Kp[0];Ro.source!==this.source&&o.warnOnce(`layer.source = ${Ro.source} does not equal this.source = `+this.source),Ro.minzoom&&this.zoom<Math.floor(Ro.minzoom)||Ro.maxzoom&&this.zoom>=Ro.maxzoom||"none"!==Ro.visibility&&(I(Kp,this.zoom,Ue),(Qt[Ro.id]=Ro.createBucket({index:mn.bucketLayerIDs.length,layers:Kp,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Sr,sourceID:this.source})).populate(ci,zt,this.tileID.canonical),mn.bucketLayerIDs.push(Kp.map(iP=>iP.id)))}}}var Is=o.mapObject(zt.glyphDependencies,Xd=>Object.keys(Xd).map(Number));this.inFlightDependencies.forEach(Xd=>Xd?.abort()),this.inFlightDependencies=[];let As=Promise.resolve({});Object.keys(Is).length&&(Da=new AbortController,this.inFlightDependencies.push(Da),As=Tt.sendAsync({type:"GG",data:{stacks:Is,source:this.source,tileID:this.tileID,type:"glyphs"}},Da)),Is=Object.keys(zt.iconDependencies);let zs=Promise.resolve({});var Da;Is.length&&(Da=new AbortController,this.inFlightDependencies.push(Da),zs=Tt.sendAsync({type:"GI",data:{icons:Is,source:this.source,tileID:this.tileID,type:"icons"}},Da)),Is=Object.keys(zt.patternDependencies);let Ya=Promise.resolve({});Is.length&&(Da=new AbortController,this.inFlightDependencies.push(Da),Ya=Tt.sendAsync({type:"GI",data:{icons:Is,source:this.source,tileID:this.tileID,type:"patterns"}},Da));var[Io,Mo,Is]=yield Promise.all([As,zs,Ya]),Nu=new f(Io),Md=new o.ImageAtlas(Mo,Is);for(const Xd in Qt){var qp=Qt[Xd];qp instanceof o.SymbolBucket?(I(qp.layers,this.zoom,Ue),o.performSymbolLayout({bucket:qp,glyphMap:Io,glyphPositions:Nu.positions,imageMap:Mo,imagePositions:Md.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qp.hasPattern&&(qp instanceof o.LineBucket||qp instanceof o.FillBucket||qp instanceof o.FillExtrusionBucket)&&(I(qp.layers,this.zoom,Ue),qp.addFeatures(zt,this.tileID.canonical,Md.patternPositions))}return this.status="done",{buckets:Object.values(Qt).filter(Xd=>!Xd.isEmpty()),featureIndex:mn,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nu.image,imageAtlas:Md,glyphMap:this.returnDependencies?Io:null,iconMap:this.returnDependencies?Mo:null,glyphPositions:this.returnDependencies?Nu.positions:null}})}}function I(rt,xe,je){var Ue=new o.EvaluationParameters(xe);for(const Tt of rt)Tt.recalculate(Ue,je)}class D{constructor(xe,je,Ue){this.actor=xe,this.layerIndex=je,this.availableImages=Ue,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(xe,je){return o.__awaiter(this,void 0,void 0,function*(){var Ue=yield o.getArrayBuffer(xe.request,je);try{return{vectorTile:new o.vectorTile.VectorTile(new o.Protobuf(Ue.data)),rawData:Ue.data,cacheControl:Ue.cacheControl,expires:Ue.expires}}catch(Tt){Ue=new Uint8Array(Ue.data);let Jt=`Unable to parse the tile at ${xe.request.url}, `;throw Jt+=(Ue=31===Ue[0]&&139===Ue[1])?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: "+Tt.messge,new Error(Jt)}})}loadTile(xe){return o.__awaiter(this,void 0,void 0,function*(){var je=xe.uid,Ue=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new o.RequestPerformance(xe.request),Tt=new v(xe),Jt=(this.loading[je]=Tt,new AbortController);Tt.abort=Jt;try{var mn=yield this.loadVectorTile(xe,Jt);if(delete this.loading[je],!mn)return null;var Qt,zt=mn.rawData,rn={},fr=(mn.expires&&(rn.expires=mn.expires),mn.cacheControl&&(rn.cacheControl=mn.cacheControl),{}),Sr=(Ue&&(Qt=Ue.finish())&&(fr.resourceTiming=JSON.parse(JSON.stringify(Qt))),Tt.vectorTile=mn.vectorTile,Tt.parse(mn.vectorTile,this.layerIndex,this.availableImages,this.actor));this.loaded[je]=Tt,this.fetching[je]={rawTileData:zt,cacheControl:rn,resourceTiming:fr};try{var ci=yield Sr;return o.extend({rawTileData:zt.slice(0)},ci,rn,fr)}finally{delete this.fetching[je]}}catch(Eo){throw delete this.loading[je],Tt.status="done",this.loaded[je]=Tt,Eo}})}reloadTile(xe){return o.__awaiter(this,void 0,void 0,function*(){var je=xe.uid;if(!this.loaded||!this.loaded[je])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");var Ue=this.loaded[je];if(Ue.showCollisionBoxes=xe.showCollisionBoxes,"parsing"===Ue.status){var Tt,Jt,mn,Qt=yield Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor);let zt;return zt=this.fetching[je]?(({rawTileData:Tt,cacheControl:Jt,resourceTiming:mn}=this.fetching[je]),delete this.fetching[je],o.extend({rawTileData:Tt.slice(0)},Qt,Jt,mn)):Qt}if("done"===Ue.status&&Ue.vectorTile)return Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(xe){return o.__awaiter(this,void 0,void 0,function*(){var je=this.loading,Ue=xe.uid;je&&je[Ue]&&je[Ue].abort&&(je[Ue].abort.abort(),delete je[Ue])})}removeTile(xe){return o.__awaiter(this,void 0,void 0,function*(){this.loaded&&this.loaded[xe.uid]&&delete this.loaded[xe.uid]})}}class k{constructor(){this.loaded={}}loadTile(xe){return o.__awaiter(this,void 0,void 0,function*(){var{uid:je,encoding:Ue,rawImageData:Tt,redFactor:Jt,greenFactor:mn,blueFactor:Qt,baseShift:zt}=xe,rn=Tt.width+2,fr=Tt.height+2;return rn=o.isImageBitmap(Tt)?new o.RGBAImage({width:rn,height:fr},yield o.getImageData(Tt,-1,-1,rn,fr)):Tt,fr=new o.DEMData(je,rn,Ue,Jt,mn,Qt,zt),this.loaded=this.loaded||{},this.loaded[je]=fr})}removeTile(Ue){var je=this.loaded;Ue=Ue.uid,je&&je[Ue]&&delete je[Ue]}}function X(rt,xe){if(0!==rt.length){fe(rt[0],xe);for(var je=1;je<rt.length;je++)fe(rt[je],!xe)}}function fe(rt,xe){for(var je=0,Ue=0,Tt=0,Jt=rt.length,mn=Jt-1;Tt<Jt;mn=Tt++){var Qt=(rt[Tt][0]-rt[mn][0])*(rt[mn][1]+rt[Tt][1]),zt=je+Qt;Ue+=Math.abs(je)>=Math.abs(Qt)?je-zt+Qt:Qt-zt+je,je=zt}0<=je+Ue!=!!xe&&rt.reverse()}var Se=o.getDefaultExportFromCjs(function rt(xe,je){var Ue,Tt=xe&&xe.type;if("FeatureCollection"===Tt)for(Ue=0;Ue<xe.features.length;Ue++)rt(xe.features[Ue],je);else if("GeometryCollection"===Tt)for(Ue=0;Ue<xe.geometries.length;Ue++)rt(xe.geometries[Ue],je);else if("Feature"===Tt)rt(xe.geometry,je);else if("Polygon"===Tt)X(xe.coordinates,je);else if("MultiPolygon"===Tt)for(Ue=0;Ue<xe.coordinates.length;Ue++)X(xe.coordinates[Ue],je);return xe});const Ve=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;let Je=class{constructor(rt){this._feature=rt,this.extent=o.EXTENT,this.type=rt.type,this.properties=rt.tags,"id"in rt&&!isNaN(rt.id)&&(this.id=parseInt(rt.id,10))}loadGeometry(){if(1===this._feature.type){var rt=[];for(const Ue of this._feature.geometry)rt.push([new o.Point(Ue[0],Ue[1])]);return rt}var xe=[];for(const Ue of this._feature.geometry){var je=[];for(const Tt of Ue)je.push(new o.Point(Tt[0],Tt[1]));xe.push(je)}return xe}toGeoJSON(rt,xe,je){return Ve.call(this,rt,xe,je)}},lt=class{constructor(rt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=rt.length,this._features=rt}feature(rt){return new Je(this._features[rt])}};var mt={exports:{}},_n=o.pointGeometry,Yn=o.vectorTile.VectorTileFeature,sr=ri;function ri(rt,xe){this.options=xe||{},this.features=rt,this.length=rt.length}function tn(rt,xe){this.id="number"==typeof rt.id?rt.id:void 0,this.type=rt.type,this.rawGeometry=1===rt.type?[rt.geometry]:rt.geometry,this.properties=rt.tags,this.extent=xe||4096}ri.prototype.feature=function(rt){return new tn(this.features[rt],this.options.extent)},tn.prototype.loadGeometry=function(){var rt=this.rawGeometry;this.geometry=[];for(var xe=0;xe<rt.length;xe++){for(var je=rt[xe],Ue=[],Tt=0;Tt<je.length;Tt++)Ue.push(new _n(je[Tt][0],je[Tt][1]));this.geometry.push(Ue)}return this.geometry},tn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var rt=this.geometry,xe=1/0,je=-1/0,Ue=1/0,Tt=-1/0,Jt=0;Jt<rt.length;Jt++)for(var mn=rt[Jt],Qt=0;Qt<mn.length;Qt++){var zt=mn[Qt];xe=Math.min(xe,zt.x),je=Math.max(je,zt.x),Ue=Math.min(Ue,zt.y),Tt=Math.max(Tt,zt.y)}return[xe,Ue,je,Tt]},tn.prototype.toGeoJSON=Yn.prototype.toGeoJSON;var zn=o.pbf,Zn=sr;function Er(rt){var xe,je=new zn,Ue=rt,Tt=je;for(xe in Ue.layers)Tt.writeMessage(3,yi,Ue.layers[xe]);return je.finish()}function yi(rt,xe){xe.writeVarintField(15,rt.version||1),xe.writeStringField(1,rt.name||""),xe.writeVarintField(5,rt.extent||4096);for(var je={keys:[],values:[],keycache:{},valuecache:{}},Ue=0;Ue<rt.length;Ue++)je.feature=rt.feature(Ue),xe.writeMessage(2,Lt,je);var Tt=je.keys;for(Ue=0;Ue<Tt.length;Ue++)xe.writeStringField(3,Tt[Ue]);var Jt=je.values;for(Ue=0;Ue<Jt.length;Ue++)xe.writeMessage(4,Bi,Jt[Ue])}function Lt(rt,xe){var je=rt.feature;void 0!==je.id&&xe.writeVarintField(1,je.id),xe.writeMessage(2,Hn,rt),xe.writeVarintField(3,je.type),xe.writeMessage(4,si,je)}function Hn(rt,xe){var je,Ue=rt.feature,Tt=rt.keys,Jt=rt.values,mn=rt.keycache,Qt=rt.valuecache;for(je in Ue.properties){var zt,rn=Ue.properties[je],fr=mn[je];null!==rn&&(void 0===fr&&(Tt.push(je),mn[je]=fr=Tt.length-1),xe.writeVarint(fr),void 0===(zt=Qt[fr=(fr=typeof rn)+":"+(rn="string"!=fr&&"boolean"!=fr&&"number"!=fr?JSON.stringify(rn):rn)])&&(Jt.push(rn),Qt[fr]=zt=Jt.length-1),xe.writeVarint(zt))}}function hn(rt,xe){return(xe<<3)+(7&rt)}function vr(rt){return rt<<1^rt>>31}function si(rt,xe){for(var je=rt.loadGeometry(),Ue=rt.type,Tt=0,Jt=0,mn=je.length,Qt=0;Qt<mn;Qt++){for(var zt=je[Qt],rn=1,fr=(1===Ue&&(rn=zt.length),xe.writeVarint(hn(1,rn)),3===Ue?zt.length-1:zt.length),Sr=0;Sr<fr;Sr++){1===Sr&&1!==Ue&&xe.writeVarint(hn(2,fr-1));var ci=zt[Sr].x-Tt,Eo=zt[Sr].y-Jt;xe.writeVarint(vr(ci)),xe.writeVarint(vr(Eo)),Tt+=ci,Jt+=Eo}3===Ue&&xe.writeVarint(15)}}function Bi(rt,xe){var je=typeof rt;"string"==je?xe.writeStringField(1,rt):"boolean"==je?xe.writeBooleanField(7,rt):"number"==je&&(rt%1!=0?xe.writeDoubleField(3,rt):rt<0?xe.writeSVarintField(6,rt):xe.writeVarintField(5,rt))}mt.exports=Er,mt.exports.fromVectorTileJs=Er,mt.exports.fromGeojsonVt=function(rt,xe){xe=xe||{};var je,Ue={};for(je in rt)Ue[je]=new Zn(rt[je].features,xe),Ue[je].name=je,Ue[je].version=xe.version,Ue[je].extent=xe.extent;return Er({layers:Ue})},mt.exports.GeoJSONWrapper=Zn;var Un,pi=o.getDefaultExportFromCjs(mt.exports);const Bo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:rt=>rt},Li=Math.fround||(Un=new Float32Array(1),rt=>(Un[0]=+rt,Un[0])),Qi=3,Bn=5,Qs=6;class Zi{constructor(xe){this.options=Object.assign(Object.create(Bo),xe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(xe){var{log:je,minZoom:Ue,maxZoom:Tt}=this.options,Jt=(je&&console.time("total time"),`prepare ${xe.length} points`),mn=(je&&console.time(Jt),this.points=xe,[]);for(let Sr=0;Sr<xe.length;Sr++){var Qt,zt=xe[Sr];zt.geometry&&([zt,Qt]=zt.geometry.coordinates,zt=Li(Vi(zt)),Qt=Li(Sn(Qt)),mn.push(zt,Qt,1/0,Sr,-1,1),this.options.reduce)&&mn.push(0)}let rn=this.trees[Tt+1]=this._createTree(mn);je&&console.timeEnd(Jt);for(let Sr=Tt;Sr>=Ue;Sr--){var fr=+Date.now();rn=this.trees[Sr]=this._createTree(this._cluster(rn,Sr)),je&&console.log("z%d: %d clusters in %dms",Sr,rn.numItems,+Date.now()-fr)}return je&&console.timeEnd("total time"),this}getClusters(Qt,je){let Ue=((Qt[0]+180)%360+360)%360-180;var Tt=Math.max(-90,Math.min(90,Qt[1]));let Jt=180===Qt[2]?180:((Qt[2]+180)%360+360)%360-180;var mn=Math.max(-90,Math.min(90,Qt[3]));if(360<=Qt[2]-Qt[0])Ue=-180,Jt=180;else if(Ue>Jt)return Qt=this.getClusters([Ue,Tt,180,mn],je),zt=this.getClusters([-180,Tt,Jt,mn],je),Qt.concat(zt);var zt=(Qt=this.trees[this._limitZoom(je)]).range(Vi(Ue),Sn(mn),Vi(Jt),Sn(Tt)),rn=Qt.data,fr=[];for(const ci of zt){var Sr=this.stride*ci;fr.push(1<rn[Sr+Bn]?Na(rn,Sr,this.clusterProps):this.points[rn[Sr+Qi]])}return fr}getChildren(xe){var Qt=this._getOriginId(xe),Jt=this._getOriginZoom(xe),je="No cluster with the specified id.",Ue=this.trees[Jt];if(!Ue)throw new Error(je);var Tt=Ue.data;if(Qt*this.stride>=Tt.length)throw new Error(je);Jt=this.options.radius/(this.options.extent*Math.pow(2,Jt-1));var mn=Tt[Qt*this.stride],zt=(Qt=Tt[Qt*this.stride+1],[]);for(const fr of Ue.within(mn,Qt,Jt)){var rn=fr*this.stride;Tt[4+rn]===xe&&zt.push(1<Tt[rn+Bn]?Na(Tt,rn,this.clusterProps):this.points[Tt[rn+Qi]])}if(0===zt.length)throw new Error(je);return zt}getLeaves(xe,je,Ue){var Tt=[];return this._appendLeaves(Tt,xe,je=je||10,Ue=Ue||0,0),Tt}getTile(Jt,je,Ue){var mn,Qt,Tt=this.trees[this._limitZoom(Jt)],{extent:Qt,radius:mn}=(Jt=Math.pow(2,Jt),this.options),zt=(Ue+1+(mn/=Qt))/Jt,rn={features:[]};return this._addTileFeatures(Tt.range((je-mn)/Jt,Qt=(Ue-mn)/Jt,(je+1+mn)/Jt,zt),Tt.data,je,Ue,Jt,rn),0===je&&this._addTileFeatures(Tt.range(1-mn/Jt,Qt,1,zt),Tt.data,Jt,Ue,Jt,rn),je===Jt-1&&this._addTileFeatures(Tt.range(0,Qt,mn/Jt,zt),Tt.data,-1,Ue,Jt,rn),rn.features.length?rn:null}getClusterExpansionZoom(xe){let je=this._getOriginZoom(xe)-1;for(;je<=this.options.maxZoom;){var Ue=this.getChildren(xe);if(je++,1!==Ue.length)break;xe=Ue[0].properties.cluster_id}return je}_appendLeaves(xe,je,Ue,Tt,Jt){for(const Qt of this.getChildren(je)){var mn=Qt.properties;if(mn&&mn.cluster?Jt+mn.point_count<=Tt?Jt+=mn.point_count:Jt=this._appendLeaves(xe,mn.cluster_id,Ue,Tt,Jt):Jt<Tt?Jt++:xe.push(Qt),xe.length===Ue)break}return Jt}_createTree(xe){var je=new o.KDBush(xe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ue=0;Ue<xe.length;Ue+=this.stride)je.add(xe[Ue],xe[Ue+1]);return je.finish(),je.data=xe,je}_addTileFeatures(xe,je,Ue,Tt,Jt,mn){for(const Sr of xe){var Qt,zt=Sr*this.stride,rn=1<je[zt+Bn];let ci,Eo,uo;uo=rn?(ci=za(je,zt,this.clusterProps),Eo=je[zt],je[1+zt]):(fr=this.points[je[zt+Qi]],[fr,Qt]=(ci=fr.properties,fr.geometry.coordinates),Eo=Vi(fr),Sn(Qt));var fr={type:1,geometry:[[Math.round(this.options.extent*(Eo*Jt-Ue)),Math.round(this.options.extent*(uo*Jt-Tt))]],tags:ci};let Ro;void 0!==(Ro=rn||this.options.generateId?je[zt+Qi]:this.points[je[zt+Qi]].id)&&(fr.id=Ro),mn.features.push(fr)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,je){var{radius:Ue,extent:Tt,reduce:Jt,minPoints:mn}=this.options,Qt=Ue/(Tt*Math.pow(2,je)),zt=xe.data,rn=[],fr=this.stride;for(let Io=0;Io<zt.length;Io+=fr)if(!(zt[Io+2]<=je)){zt[Io+2]=je;var Sr=zt[Io],ci=zt[Io+1],Eo=xe.within(zt[Io],zt[Io+1],Qt),uo=zt[Io+Bn];let Mo=uo;for(const Is of Eo){var Ro=Is*fr;zt[2+Ro]>je&&(Mo+=zt[Ro+Bn])}if(Mo>uo&&Mo>=mn){let Md,Is=Sr*uo,Nu=ci*uo,qp=-1;var As=(Io/fr<<5)+(je+1)+this.points.length;for(const Xd of Eo){var zs,Da=Xd*fr;zt[2+Da]<=je||(zt[2+Da]=je,Is+=zt[Da]*(zs=zt[Da+Bn]),Nu+=zt[1+Da]*zs,zt[4+Da]=As,Jt&&(Md||(Md=this._map(zt,Io,!0),qp=this.clusterProps.length,this.clusterProps.push(Md)),Jt(Md,this._map(zt,Da))))}zt[Io+4]=As,rn.push(Is/Mo,Nu/Mo,1/0,As,-1,Mo),Jt&&rn.push(qp)}else{for(let Is=0;Is<fr;Is++)rn.push(zt[Io+Is]);if(1<Mo)for(const Is of Eo){var Ya=Is*fr;if(!(zt[2+Ya]<=je)){zt[2+Ya]=je;for(let Nu=0;Nu<fr;Nu++)rn.push(zt[Ya+Nu])}}}}return rn}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,je,Ue){var Tt;return 1<xe[je+Bn]?(Tt=this.clusterProps[xe[je+Qs]],Ue?Object.assign({},Tt):Tt):(xe=this.options.map(Tt=this.points[xe[je+Qi]].properties),Ue&&xe===Tt?Object.assign({},xe):xe)}}function Na(rt,xe,je){return{type:"Feature",id:rt[xe+Qi],properties:za(rt,xe,je),geometry:{type:"Point",coordinates:[360*(rt[xe]-.5),(Ue=rt[xe+1],Ue=(180-360*Ue)*Math.PI/180,360*Math.atan(Math.exp(Ue))/Math.PI-90)]}};var Ue}function za(rt,xe,mn){var Ue=rt[xe+Bn],Tt=1e4<=Ue?Math.round(Ue/1e3)+"k":1e3<=Ue?Math.round(Ue/100)/10+"k":Ue,Jt=rt[xe+Qs];return mn=-1===Jt?{}:Object.assign({},mn[Jt]),Object.assign(mn,{cluster:!0,cluster_id:rt[xe+Qi],point_count:Ue,point_count_abbreviated:Tt})}function Vi(rt){return rt/360+.5}function Sn(rt){return rt=Math.sin(rt*Math.PI/180),(rt=.5-.25*Math.log((1+rt)/(1-rt))/Math.PI)<0?0:1<rt?1:rt}function bi(rt,xe,je,Ue){for(var Tt,Jt=Ue,mn=je-xe>>1,Qt=je-xe,zt=rt[xe],rn=rt[xe+1],fr=rt[je],Sr=rt[je+1],ci=xe+3;ci<je;ci+=3){var Eo=(uo=rt[ci],Ro=rt[ci+1],Is=void 0,Io=void 0,Mo=void 0,Mo=(Ya=Sr)-(zs=rn),0==(Io=(Da=fr)-(As=zt))&&0==Mo||(1<(Is=((uo-As)*Io+(Ro-zs)*Mo)/(Io*Io+Mo*Mo))?(As=Da,zs=Ya):0<Is&&(As+=Io*Is,zs+=Mo*Is)),(Io=uo-As)*Io+(Mo=Ro-zs)*Mo);Jt<Eo?(Tt=ci,Jt=Eo):Eo===Jt&&(Eo=Math.abs(ci-mn))<Qt&&(Tt=ci,Qt=Eo)}var uo,Ro,As,zs,Da,Ya,Is,Io,Mo;Ue<Jt&&(3<Tt-xe&&bi(rt,xe,Tt,Ue),rt[Tt+2]=Jt,3<je-Tt)&&bi(rt,Tt,je,Ue)}function Si(Tt,Qt,je,Ue){var Jt=Tt={id:void 0===Tt?null:Tt,type:Qt,geometry:je,tags:Ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},mn=Jt.geometry;if("Point"===(Qt=Jt.type)||"MultiPoint"===Qt||"LineString"===Qt)Dn(Jt,mn);else if("Polygon"===Qt||"MultiLineString"===Qt)for(var zt=0;zt<mn.length;zt++)Dn(Jt,mn[zt]);else if("MultiPolygon"===Qt)for(zt=0;zt<mn.length;zt++)for(var rn=0;rn<mn[zt].length;rn++)Dn(Jt,mn[zt][rn]);return Tt}function Dn(rt,xe){for(var je=0;je<xe.length;je+=3)rt.minX=Math.min(rt.minX,xe[je]),rt.minY=Math.min(rt.minY,xe[je+1]),rt.maxX=Math.max(rt.maxX,xe[je]),rt.maxY=Math.max(rt.maxY,xe[je+1])}function er(rt,xe,je,Ue){if(xe.geometry){var Tt=xe.geometry.coordinates,Jt=xe.geometry.type,mn=Math.pow(je.tolerance/((1<<je.maxZoom)*je.extent),2),Qt=[],zt=xe.id;if(je.promoteId?zt=xe.properties[je.promoteId]:je.generateId&&(zt=Ue||0),"Point"===Jt)hi(Tt,Qt);else if("MultiPoint"===Jt)for(var rn=0;rn<Tt.length;rn++)hi(Tt[rn],Qt);else if("LineString"===Jt)to(Tt,Qt,mn,!1);else if("MultiLineString"===Jt){if(je.lineMetrics){for(rn=0;rn<Tt.length;rn++)to(Tt[rn],Qt=[],mn,!1),rt.push(Si(zt,"LineString",Qt,xe.properties));return}Gi(Tt,Qt,mn,!1)}else if("Polygon"===Jt)Gi(Tt,Qt,mn,!0);else{if("MultiPolygon"!==Jt){if("GeometryCollection"!==Jt)throw new Error("Input data is not a valid GeoJSON object.");for(rn=0;rn<xe.geometry.geometries.length;rn++)er(rt,{id:zt,geometry:xe.geometry.geometries[rn],properties:xe.properties},je,Ue);return}for(rn=0;rn<Tt.length;rn++){var fr=[];Gi(Tt[rn],fr,mn,!0),Qt.push(fr)}}rt.push(Si(zt,Jt,Qt,xe.properties))}}function hi(rt,xe){xe.push(Vo(rt[0])),xe.push(Ye(rt[1])),xe.push(0)}function to(rt,xe,je,Ue){for(var Tt,Jt,mn=0,Qt=0;Qt<rt.length;Qt++){var zt=Vo(rt[Qt][0]),rn=Ye(rt[Qt][1]);xe.push(zt),xe.push(rn),xe.push(0),0<Qt&&(mn+=Ue?(Tt*rn-zt*Jt)/2:Math.sqrt(Math.pow(zt-Tt,2)+Math.pow(rn-Jt,2))),Tt=zt,Jt=rn}var fr=xe.length-3;xe[2]=1,bi(xe,0,fr,je),xe[2+fr]=1,xe.size=Math.abs(mn),xe.start=0,xe.end=xe.size}function Gi(rt,xe,je,Ue){for(var Tt=0;Tt<rt.length;Tt++){var Jt=[];to(rt[Tt],Jt,je,Ue),xe.push(Jt)}}function Vo(rt){return rt/360+.5}function Ye(rt){return rt=Math.sin(rt*Math.PI/180),(rt=.5-.25*Math.log((1+rt)/(1-rt))/Math.PI)<0?0:1<rt?1:rt}function Be(rt,xe,je,Ue,Tt,Jt,mn,Qt){if(Ue/=xe,(je/=xe)<=Jt&&mn<Ue)return rt;if(mn<je||Ue<=Jt)return null;for(var zt=[],rn=0;rn<rt.length;rn++){var fr=rt[rn],Sr=fr.geometry,ci=fr.type,Eo=0===Tt?fr.minX:fr.minY,uo=0===Tt?fr.maxX:fr.maxY;if(je<=Eo&&uo<Ue)zt.push(fr);else if(!(uo<je||Ue<=Eo)){var Ro=[];if("Point"===ci||"MultiPoint"===ci){Is=Mo=zs=void 0;for(var As=Sr,zs=Ro,Da=je,Ya=Ue,Io=Tt,Mo=0;Mo<As.length;Mo+=3){var Is=As[Mo+Io];Da<=Is&&Is<=Ya&&(zs.push(As[Mo]),zs.push(As[Mo+1]),zs.push(As[Mo+2]))}}else if("LineString"===ci)Pe(Sr,Ro,je,Ue,Tt,!1,Qt.lineMetrics);else if("MultiLineString"===ci)gt(Sr,Ro,je,Ue,Tt,!1);else if("Polygon"===ci)gt(Sr,Ro,je,Ue,Tt,!0);else if("MultiPolygon"===ci)for(var Nu=0;Nu<Sr.length;Nu++){var Md=[];gt(Sr[Nu],Md,je,Ue,Tt,!0),Md.length&&Ro.push(Md)}if(Ro.length)if(Qt.lineMetrics&&"LineString"===ci)for(Nu=0;Nu<Ro.length;Nu++)zt.push(Si(fr.id,ci,Ro[Nu],fr.tags));else"LineString"!==ci&&"MultiLineString"!==ci||(1===Ro.length?(ci="LineString",Ro=Ro[0]):ci="MultiLineString"),"Point"!==ci&&"MultiPoint"!==ci||(ci=3===Ro.length?"Point":"MultiPoint"),zt.push(Si(fr.id,ci,Ro,fr.tags))}}return zt.length?zt:null}function Pe(rt,xe,je,Ue,Tt,Jt,mn){for(var Qt,zt,rn=$e(rt),fr=0===Tt?yn:Fn,Sr=rt.start,ci=0;ci<rt.length-3;ci+=3){var Ya=rt[ci],Io=rt[ci+1],Mo=rt[ci+2],Eo=rt[ci+3],uo=rt[ci+4],Ro=0===Tt?Ya:Io,As=0===Tt?Eo:uo,zs=!1;mn&&(Qt=Math.sqrt(Math.pow(Ya-Eo,2)+Math.pow(Io-uo,2))),Ro<je?je<As&&(zt=fr(rn,Ya,Io,Eo,uo,je),mn)&&(rn.start=Sr+Qt*zt):Ue<Ro?As<Ue&&(zt=fr(rn,Ya,Io,Eo,uo,Ue),mn)&&(rn.start=Sr+Qt*zt):kt(rn,Ya,Io,Mo),As<je&&je<=Ro&&(zt=fr(rn,Ya,Io,Eo,uo,je),zs=!0),Ue<As&&Ro<=Ue&&(zt=fr(rn,Ya,Io,Eo,uo,Ue),zs=!0),!Jt&&zs&&(mn&&(rn.end=Sr+Qt*zt),xe.push(rn),rn=$e(rt)),mn&&(Sr+=Qt)}var Da=rt.length-3;Ya=rt[Da],Io=rt[1+Da],Mo=rt[2+Da],je<=(Ro=0===Tt?Ya:Io)&&Ro<=Ue&&kt(rn,Ya,Io,Mo),Da=rn.length-3,Jt&&3<=Da&&(rn[Da]!==rn[0]||rn[1+Da]!==rn[1])&&kt(rn,rn[0],rn[1],rn[2]),rn.length&&xe.push(rn)}function $e(rt){var xe=[];return xe.size=rt.size,xe.start=rt.start,xe.end=rt.end,xe}function gt(rt,xe,je,Ue,Tt,Jt){for(var mn=0;mn<rt.length;mn++)Pe(rt[mn],xe,je,Ue,Tt,Jt,!1)}function kt(rt,xe,je,Ue){rt.push(xe),rt.push(je),rt.push(Ue)}function yn(rt,xe,je,Ue,Tt,Jt){return Ue=(Jt-xe)/(Ue-xe),rt.push(Jt),rt.push(je+(Tt-je)*Ue),rt.push(1),Ue}function Fn(rt,xe,je,Ue,Tt,Jt){return rt.push(xe+(Ue-xe)*(Tt=(Jt-je)/(Tt-je))),rt.push(Jt),rt.push(1),Tt}function St(rt,xe){for(var je=[],Ue=0;Ue<rt.length;Ue++){var Tt=rt[Ue],Jt=Tt.type;if("Point"===Jt||"MultiPoint"===Jt||"LineString"===Jt)mn=pn(Tt.geometry,xe);else if("MultiLineString"===Jt||"Polygon"===Jt)for(var mn=[],Qt=0;Qt<Tt.geometry.length;Qt++)mn.push(pn(Tt.geometry[Qt],xe));else if("MultiPolygon"===Jt)for(mn=[],Qt=0;Qt<Tt.geometry.length;Qt++){for(var zt=[],rn=0;rn<Tt.geometry[Qt].length;rn++)zt.push(pn(Tt.geometry[Qt][rn],xe));mn.push(zt)}je.push(Si(Tt.id,Jt,mn,Tt.tags))}return je}function pn(rt,xe){var je=[];je.size=rt.size,void 0!==rt.start&&(je.start=rt.start,je.end=rt.end);for(var Ue=0;Ue<rt.length;Ue+=3)je.push(rt[Ue]+xe,rt[Ue+1],rt[Ue+2]);return je}function Wt(rt,xe){if(!rt.transformed){for(var je,Ue=1<<rt.z,Tt=rt.x,Jt=rt.y,mn=0;mn<rt.features.length;mn++){var Qt=rt.features[mn],zt=Qt.geometry,rn=Qt.type;if(Qt.geometry=[],1===rn)for(je=0;je<zt.length;je+=2)Qt.geometry.push(Yr(zt[je],zt[je+1],xe,Ue,Tt,Jt));else for(je=0;je<zt.length;je++){for(var fr=[],Sr=0;Sr<zt[je].length;Sr+=2)fr.push(Yr(zt[je][Sr],zt[je][Sr+1],xe,Ue,Tt,Jt));Qt.geometry.push(fr)}}rt.transformed=!0}return rt}function Yr(rt,xe,je,Ue,Tt,Jt){return[Math.round(je*(rt*Ue-Tt)),Math.round(je*(xe*Ue-Jt))]}function Br(rt,xe,je,Ue,Tt){for(var Jt=xe===Tt.maxZoom?0:Tt.tolerance/((1<<xe)*Tt.extent),mn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:je,y:Ue,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Qt=0;Qt<rt.length;Qt++){mn.numFeatures++,Da=zs=As=Ro=uo=Eo=Ya=zt=void 0;var zt=mn,rn=rt[Qt],fr=Jt,Ya=Tt,Sr=rn.geometry,ci=rn.type,Eo=[];if("Point"===ci||"MultiPoint"===ci)for(var uo=0;uo<Sr.length;uo+=3)Eo.push(Sr[uo]),Eo.push(Sr[uo+1]),zt.numPoints++,zt.numSimplified++;else if("LineString"===ci)vi(Eo,Sr,zt,fr,!1,!1);else if("MultiLineString"===ci||"Polygon"===ci)for(uo=0;uo<Sr.length;uo++)vi(Eo,Sr[uo],zt,fr,"Polygon"===ci,0===uo);else if("MultiPolygon"===ci)for(var Ro=0;Ro<Sr.length;Ro++){var As=Sr[Ro];for(uo=0;uo<As.length;uo++)vi(Eo,As[uo],zt,fr,!0,0===uo)}if(Eo.length){var zs=rn.tags||null;if("LineString"===ci&&Ya.lineMetrics){for(var Da in zs={},rn.tags)zs[Da]=rn.tags[Da];zs.mapbox_clip_start=Sr.start/Sr.size,zs.mapbox_clip_end=Sr.end/Sr.size}Ya={geometry:Eo,type:"Polygon"===ci||"MultiPolygon"===ci?3:"LineString"===ci||"MultiLineString"===ci?2:1,tags:zs},null!==rn.id&&(Ya.id=rn.id),zt.features.push(Ya)}var Io=rt[Qt].minY,Mo=rt[Qt].maxX,Is=rt[Qt].maxY;(Ya=rt[Qt].minX)<mn.minX&&(mn.minX=Ya),Io<mn.minY&&(mn.minY=Io),mn.maxX<Mo&&(mn.maxX=Mo),mn.maxY<Is&&(mn.maxY=Is)}return mn}function vi(rt,xe,je,Ue,Tt,Jt){var mn=Ue*Ue;if(0<Ue&&xe.size<(Tt?mn:Ue))je.numPoints+=xe.length/3;else{for(var Qt=[],zt=0;zt<xe.length;zt+=3)(0===Ue||xe[zt+2]>mn)&&(je.numSimplified++,Qt.push(xe[zt]),Qt.push(xe[zt+1])),je.numPoints++;if(Tt){for(var rn=Qt,fr=(Tt=Jt,0),Sr=0,ci=rn.length,Eo=ci-2;Sr<ci;Eo=Sr,Sr+=2)fr+=(rn[Sr]-rn[Eo])*(rn[Sr+1]+rn[Eo+1]);if(0<fr===Tt)for(Sr=0,ci=rn.length;Sr<ci/2;Sr+=2){var uo=rn[Sr],Ro=rn[Sr+1];rn[Sr]=rn[ci-2-Sr],rn[Sr+1]=rn[ci-1-Sr],rn[ci-2-Sr]=uo,rn[ci-1-Sr]=Ro}}rt.push(Qt)}}function Mn(zt,xe){var Ue,Tt,Jt,mn,Qt,je=(xe=this.options=function(rn,fr){for(var Sr in fr)rn[Sr]=fr[Sr];return rn}(Object.create(this.options),xe)).debug;if(je&&console.time("preprocess data"),xe.maxZoom<0||24<xe.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");zt=function(rn,fr){var Sr=[];if("FeatureCollection"===rn.type)for(var ci=0;ci<rn.features.length;ci++)er(Sr,rn.features[ci],fr,ci);else er(Sr,"Feature"===rn.type?rn:{geometry:rn},fr);return Sr}(zt,xe),this.tiles={},this.tileCoords=[],je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),mn=Be(Jt=Ue=zt,1,-1-(Tt=xe.buffer/xe.extent),Tt,0,-1,2,xe),Qt=Be(Ue,1,1-Tt,2+Tt,0,-1,2,xe),(zt=Jt=(mn||Qt)&&(Jt=Be(Ue,1,-Tt,1+Tt,0,-1,2,xe)||[],mn&&(Jt=St(mn,1).concat(Jt)),Qt)?Jt.concat(St(Qt,-1)):Jt).length&&this.splitTile(zt,0,0,0),je&&(zt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function fi(rt,xe,je){return 32*((1<<rt)*je+xe)+rt}function Hr(rt,xe){return xe?rt.properties[xe]:rt.id}function fa(rt,xe){if(null==rt)return 1;if("Feature"===rt.type)return null!=Hr(rt,xe);if("FeatureCollection"===rt.type){var je=new Set;for(const Tt of rt.features){var Ue=Hr(Tt,xe);if(null==Ue||je.has(Ue))return;je.add(Ue)}return 1}}function Xs(rt,xe){var je=new Map;if(null!=rt)if("Feature"===rt.type)je.set(Hr(rt,xe),rt);else for(const Ue of rt.features)je.set(Hr(Ue,xe),Ue);return je}Mn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mn.prototype.splitTile=function(rt,xe,je,Ue,Tt,Jt,mn){for(var Qt=[rt,xe,je,Ue],zt=this.options,rn=zt.debug;Qt.length;){Ue=Qt.pop(),je=Qt.pop(),xe=Qt.pop(),rt=Qt.pop();var fr,Sr,ci,Eo,uo,Ro,As,zs,Da,Ya=1<<xe,Io=fi(xe,je,Ue),Mo=this.tiles[Io];if(Mo||(1<rn&&console.time("creation"),Mo=this.tiles[Io]=Br(rt,xe,je,Ue,zt),this.tileCoords.push({z:xe,x:je,y:Ue}),rn&&(1<rn&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,je,Ue,Mo.numFeatures,Mo.numPoints,Mo.numSimplified),console.timeEnd("creation")),this.stats[Io="z"+xe]=(this.stats[Io]||0)+1,this.total++)),Mo.source=rt,Tt){if(xe===zt.maxZoom||xe===Tt)continue;if(Io=1<<Tt-xe,je!==Math.floor(Jt/Io)||Ue!==Math.floor(mn/Io))continue}else if(xe===zt.indexMaxZoom||Mo.numPoints<=zt.indexMaxPoints)continue;Mo.source=null,0!==rt.length&&(1<rn&&console.time("clipping"),fr=.5-(Io=.5*zt.buffer/zt.extent),ci=1+Io,As=Eo=uo=Ro=null,zs=Be(rt,Ya,je-Io,je+(Sr=.5+Io),0,Mo.minX,Mo.maxX,zt),Da=Be(rt,Ya,je+fr,je+ci,0,Mo.minX,Mo.maxX,zt),rt=null,zs&&(As=Be(zs,Ya,Ue-Io,Ue+Sr,1,Mo.minY,Mo.maxY,zt),Eo=Be(zs,Ya,Ue+fr,Ue+ci,1,Mo.minY,Mo.maxY,zt),zs=null),Da&&(uo=Be(Da,Ya,Ue-Io,Ue+Sr,1,Mo.minY,Mo.maxY,zt),Ro=Be(Da,Ya,Ue+fr,Ue+ci,1,Mo.minY,Mo.maxY,zt),Da=null),1<rn&&console.timeEnd("clipping"),Qt.push(As||[],xe+1,2*je,2*Ue),Qt.push(Eo||[],xe+1,2*je,2*Ue+1),Qt.push(uo||[],xe+1,2*je+1,2*Ue),Qt.push(Ro||[],xe+1,2*je+1,2*Ue+1))}},Mn.prototype.getTile=function(rt,xe,je){var Ue=(Tt=this.options).extent,Tt=Tt.debug;if(rt<0||24<rt)return null;var Jt=fi(rt,xe=(xe%(Jt=1<<rt)+Jt)%Jt,je);if(this.tiles[Jt])return Wt(this.tiles[Jt],Ue);1<Tt&&console.log("drilling down to z%d-%d-%d",rt,xe,je);for(var mn,Qt=rt,zt=xe,rn=je;!mn&&0<Qt;)Qt--,zt=Math.floor(zt/2),rn=Math.floor(rn/2),mn=this.tiles[fi(Qt,zt,rn)];return mn&&mn.source&&(1<Tt&&console.log("found parent tile z%d-%d-%d",Qt,zt,rn),1<Tt&&console.time("drilling down"),this.splitTile(mn.source,Qt,zt,rn,rt,xe,je),1<Tt&&console.timeEnd("drilling down"),this.tiles[Jt])?Wt(this.tiles[Jt],Ue):null};class bl extends D{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(xe,je){return o.__awaiter(this,void 0,void 0,function*(){var Ue=xe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");if(!(Ue=this._geoJSONIndex.getTile(Ue.z,Ue.x,Ue.y)))return null;Ue=new lt(Ue.features);let Tt=pi(Ue);return{vectorTile:Ue,rawData:(Tt=0===Tt.byteOffset&&Tt.byteLength===Tt.buffer.byteLength?Tt:new Uint8Array(Tt)).buffer}})}loadData(xe){return o.__awaiter(this,void 0,void 0,function*(){null!=(je=this._pendingRequest)&&je.abort();var je=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new o.RequestPerformance(xe.request);this._pendingRequest=new AbortController;try{let mn=yield this.loadGeoJSON(xe,this._pendingRequest);if(delete this._pendingRequest,"object"!=typeof mn)throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`);if(Se(mn,!0),xe.filter){const Qt=o.createExpression(xe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Qt.result)throw new Error(Qt.value.map(zt=>zt.key+": "+zt.message).join(", "));var Ue=mn.features.filter(zt=>Qt.value.evaluate({zoom:0},zt));mn={type:"FeatureCollection",features:Ue}}this._geoJSONIndex=xe.cluster?new Zi(function Yc({superclusterOptions:rt,clusterProperties:xe}){if(xe&&rt){const Tt={},Jt={},mn={accumulated:null,zoom:0},Qt={properties:null},zt=Object.keys(xe);for(const rn of zt){var[Ue,je]=xe[rn],je=o.createExpression(je),Ue=o.createExpression("string"==typeof Ue?[Ue,["accumulated"],["get",rn]]:Ue);Tt[rn]=je.value,Jt[rn]=Ue.value}rt.map=rn=>{Qt.properties=rn;var fr={};for(const Sr of zt)fr[Sr]=Tt[Sr].evaluate(mn,Qt);return fr},rt.reduce=(rn,fr)=>{Qt.properties=fr;for(const Sr of zt)mn.accumulated=rn[Sr],rn[Sr]=Jt[Sr].evaluate(mn,Qt)}}return rt}(xe)).load(mn.features):function eo(rt,xe){return new Mn(rt,xe)}(mn,xe.geojsonVtOptions),this.loaded={};var Tt,Jt={};return je&&(Tt=je.finish())&&(Jt.resourceTiming={},Jt.resourceTiming[xe.source]=JSON.parse(JSON.stringify(Tt))),Jt}catch(mn){if(delete this._pendingRequest,o.isAbortError(mn))return{abandoned:!0};throw mn}})}reloadTile(xe){var je=this.loaded;return je&&je[xe.uid]?super.reloadTile(xe):this.loadTile(xe)}loadGeoJSON(xe,je){return o.__awaiter(this,void 0,void 0,function*(){var Ue,Tt=xe.promoteId;if(xe.request)return Ue=yield o.getJSON(xe.request,je),this._dataUpdateable=fa(Ue.data,Tt)?Xs(Ue.data,Tt):void 0,Ue.data;if("string"==typeof xe.data)try{var Jt=JSON.parse(xe.data);return this._dataUpdateable=fa(Jt,Tt)?Xs(Jt,Tt):void 0,Jt}catch{throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`)}if(!xe.dataDiff)throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`);if(this._dataUpdateable)return function Ki(rt,xe,je){if(xe.removeAll&&rt.clear(),xe.remove)for(const zt of xe.remove)rt.delete(zt);if(xe.add)for(const zt of xe.add){var Ue=Hr(zt,je);null!=Ue&&rt.set(Ue,zt)}if(xe.update)for(const zt of xe.update){let rn=rt.get(zt.id);if(null!=rn){var Tt=zt.newGeometry||zt.removeAllProperties,Jt=!zt.removeAllProperties&&(0<(null==(Jt=zt.removeProperties)?void 0:Jt.length)||0<(null==(Jt=zt.addOrUpdateProperties)?void 0:Jt.length));if((Tt||Jt)&&(rn=Object.assign({},rn),rt.set(zt.id,rn),Jt)&&(rn.properties=Object.assign({},rn.properties)),zt.newGeometry&&(rn.geometry=zt.newGeometry),zt.removeAllProperties)rn.properties={};else if(0<(null==(Tt=zt.removeProperties)?void 0:Tt.length))for(const fr of zt.removeProperties)Object.prototype.hasOwnProperty.call(rn.properties,fr)&&delete rn.properties[fr];if(0<(null==(Tt=zt.addOrUpdateProperties)?void 0:Tt.length))for(var{key:mn,value:Qt}of zt.addOrUpdateProperties)rn.properties[mn]=Qt}}}(this._dataUpdateable,xe.dataDiff,Tt),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())};throw new Error("Cannot update existing geojson data in "+xe.source)})}removeSource(xe){return o.__awaiter(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(xe){return this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId)}getClusterChildren(xe){return this._geoJSONIndex.getChildren(xe.clusterId)}getClusterLeaves(xe){return this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset)}}class Yo{constructor(xe){this.self=xe,this.actor=new o.Actor(xe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(je,Ue)=>{if(this.externalWorkerSourceTypes[je])throw new Error(`Worker source with name "${je}" already registered.`);this.externalWorkerSourceTypes[je]=Ue},this.self.addProtocol=o.addProtocol,this.self.removeProtocol=o.removeProtocol,this.self.registerRTLTextPlugin=je=>{if(o.rtlWorkerPlugin.isParsed())throw new Error("RTL text plugin already registered.");o.rtlWorkerPlugin.setMethods(je)},this.actor.registerMessageHandler("LDT",(je,Ue)=>this._getDEMWorkerSource(je,Ue.source).loadTile(Ue)),this.actor.registerMessageHandler("RDT",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){this._getDEMWorkerSource(je,Ue.source).removeTile(Ue)})),this.actor.registerMessageHandler("GCEZ",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){return this._getWorkerSource(je,Ue.type,Ue.source).getClusterExpansionZoom(Ue)})),this.actor.registerMessageHandler("GCC",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){return this._getWorkerSource(je,Ue.type,Ue.source).getClusterChildren(Ue)})),this.actor.registerMessageHandler("GCL",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){return this._getWorkerSource(je,Ue.type,Ue.source).getClusterLeaves(Ue)})),this.actor.registerMessageHandler("LD",(je,Ue)=>this._getWorkerSource(je,Ue.type,Ue.source).loadData(Ue)),this.actor.registerMessageHandler("LT",(je,Ue)=>this._getWorkerSource(je,Ue.type,Ue.source).loadTile(Ue)),this.actor.registerMessageHandler("RT",(je,Ue)=>this._getWorkerSource(je,Ue.type,Ue.source).reloadTile(Ue)),this.actor.registerMessageHandler("AT",(je,Ue)=>this._getWorkerSource(je,Ue.type,Ue.source).abortTile(Ue)),this.actor.registerMessageHandler("RMT",(je,Ue)=>this._getWorkerSource(je,Ue.type,Ue.source).removeTile(Ue)),this.actor.registerMessageHandler("RS",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){var Tt;this.workerSources[je]&&this.workerSources[je][Ue.type]&&this.workerSources[je][Ue.type][Ue.source]&&(Tt=this.workerSources[je][Ue.type][Ue.source],delete this.workerSources[je][Ue.type][Ue.source],void 0!==Tt.removeSource)&&Tt.removeSource(Ue)})),this.actor.registerMessageHandler("RM",je=>o.__awaiter(this,void 0,void 0,function*(){delete this.layerIndexes[je],delete this.availableImages[je],delete this.workerSources[je],delete this.demWorkerSources[je]})),this.actor.registerMessageHandler("SR",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){this.referrer=Ue})),this.actor.registerMessageHandler("SRPS",(je,Ue)=>this._syncRTLPluginState(je,Ue)),this.actor.registerMessageHandler("IS",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){this.self.importScripts(Ue)})),this.actor.registerMessageHandler("SI",(je,Ue)=>this._setImages(je,Ue)),this.actor.registerMessageHandler("UL",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){this._getLayerIndex(je).update(Ue.layers,Ue.removedIds)})),this.actor.registerMessageHandler("SL",(je,Ue)=>o.__awaiter(this,void 0,void 0,function*(){this._getLayerIndex(je).replace(Ue)}))}_setImages(xe,je){return o.__awaiter(this,void 0,void 0,function*(){this.availableImages[xe]=je;for(const Tt in this.workerSources[xe]){var Ue=this.workerSources[xe][Tt];for(const Jt in Ue)Ue[Jt].availableImages=je}})}_syncRTLPluginState(xe,je){return o.__awaiter(this,void 0,void 0,function*(){if(o.rtlWorkerPlugin.isParsed())return o.rtlWorkerPlugin.getState();if("loading"!==je.pluginStatus)return o.rtlWorkerPlugin.setState(je),je;var Ue=je.pluginURL,Tt=(this.self.importScripts(Ue),o.rtlWorkerPlugin.isParsed());if(Tt)return o.rtlWorkerPlugin.setState(Tt={pluginStatus:"loaded",pluginURL:Ue}),Tt;throw o.rtlWorkerPlugin.setState({pluginStatus:"error",pluginURL:""}),new Error("RTL Text Plugin failed to import scripts from "+Ue)})}_getAvailableImages(xe){return this.availableImages[xe]||[]}_getLayerIndex(xe){return this.layerIndexes[xe]||(this.layerIndexes[xe]=new s)}_getWorkerSource(xe,je,Ue){if(this.workerSources[xe]||(this.workerSources[xe]={}),this.workerSources[xe][je]||(this.workerSources[xe][je]={}),!this.workerSources[xe][je][Ue]){var Tt={sendAsync:(Jt,mn)=>(Jt.targetMapId=xe,this.actor.sendAsync(Jt,mn))};switch(je){case"vector":this.workerSources[xe][je][Ue]=new D(Tt,this._getLayerIndex(xe),this._getAvailableImages(xe));break;case"geojson":this.workerSources[xe][je][Ue]=new bl(Tt,this._getLayerIndex(xe),this._getAvailableImages(xe));break;default:this.workerSources[xe][je][Ue]=new this.externalWorkerSourceTypes[je](Tt,this._getLayerIndex(xe),this._getAvailableImages(xe))}}return this.workerSources[xe][je][Ue]}_getDEMWorkerSource(xe,je){return this.demWorkerSources[xe]||(this.demWorkerSources[xe]={}),this.demWorkerSources[xe][je]||(this.demWorkerSources[xe][je]=new k),this.demWorkerSources[xe][je]}}return o.isWorker(self)&&(self.worker=new Yo(self)),Yo}),i("index",0,function(o,s){var f,v="4.1.2";let I,D;const k={now:hc=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:x=>new Promise((c,m)=>{const E=requestAnimationFrame(c);x.signal.addEventListener("abort",()=>{cancelAnimationFrame(E),m(s.createAbortError())})}),getImageData(x,c=0){return this.getImageCanvasContext(x).getImageData(-c,-c,x.width+2*c,x.height+2*c)},getImageCanvasContext(x){var c=window.document.createElement("canvas"),m=c.getContext("2d",{willReadFrequently:!0});if(m)return c.width=x.width,c.height=x.height,m.drawImage(x,0,0,x.width,x.height),m;throw new Error("failed to create canvas 2d context")},resolveURL:x=>((I=I||document.createElement("a")).href=x,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(D=D??matchMedia("(prefers-reduced-motion: reduce)")).matches}};class X{static testProp(c){if(X.docStyle)for(let m=0;m<c.length;m++)if(c[m]in X.docStyle)return c[m];return c[0]}static create(c,m,E){return c=window.document.createElement(c),void 0!==m&&(c.className=m),E&&E.appendChild(c),c}static createNS(c,m){return window.document.createElementNS(c,m)}static disableDrag(){X.docStyle&&X.selectProp&&(X.userSelect=X.docStyle[X.selectProp],X.docStyle[X.selectProp]="none")}static enableDrag(){X.docStyle&&X.selectProp&&(X.docStyle[X.selectProp]=X.userSelect)}static setTransform(c,m){c.style[X.transformProp]=m}static addEventListener(c,m,E,O={}){c.addEventListener(m,E,"passive"in O?O:O.capture)}static removeEventListener(c,m,E,O={}){c.removeEventListener(m,E,"passive"in O?O:O.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",X.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",X.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",X.suppressClickInternal,!0)},0)}static getScale(c){var m=c.getBoundingClientRect();return{x:m.width/c.offsetWidth||1,y:m.height/c.offsetHeight||1,boundingClientRect:m}}static getPoint(c,m,E){var O=m.boundingClientRect;return new s.Point((E.clientX-O.left)/m.x-c.clientLeft,(E.clientY-O.top)/m.y-c.clientTop)}static mousePos(c,m){var E=X.getScale(c);return X.getPoint(c,E,m)}static touchPos(c,m){var E=[],O=X.getScale(c);for(let B=0;B<m.length;B++)E.push(X.getPoint(c,O,m[B]));return E}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}}X.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,X.selectProp=X.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),X.transformProp=X.testProp(["transform","WebkitTransform"]);const fe={supported:!1,testSupport:function(x){!Ve&&Je&&(lt?mt(x):Se=x)}};let Se,Je,Ve=!1,lt=!1;function mt(x){var c=x.createTexture();x.bindTexture(x.TEXTURE_2D,c);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,Je),x.isContextLost())return;fe.supported=!0}catch{}x.deleteTexture(c),Ve=!0}typeof document<"u"&&((Je=document.createElement("img")).onload=function(){Se&&mt(Se),Se=null,lt=!0},Je.onerror=function(){Ve=!0,Se=null},Je.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(x){let c,m,E,O;x.resetRequestQueue=()=>{c=[],m=0,E=0,O={}},x.addThrottleControl=ke=>{var Ge=E++;return O[Ge]=ke,Ge},x.removeThrottleControl=ke=>{delete O[ke],he()},x.getImage=(ke,Ge,Re=!0)=>new Promise((qe,ft)=>{fe.supported&&(ke.headers||(ke.headers={}),ke.headers.accept="image/webp,*/*"),s.extend(ke,{type:"image"}),c.push({abortController:Ge,requestParameters:ke,supportImageRefresh:Re,state:"queued",onError:Rt=>{ft(Rt)},onSuccess:Rt=>{qe(Rt)}}),he()});const B=ke=>"function"==typeof createImageBitmap?s.arrayBufferToImageBitmap(ke):s.arrayBufferToImage(ke),ae=ke=>s.__awaiter(this,void 0,void 0,function*(){ke.state="running";var{requestParameters:Ge,supportImageRefresh:Ct,onError:Re,onSuccess:qe,abortController:ft}=ke,Ct=(Ct=!1===Ct&&!s.isWorker(self)&&!s.getProtocol(Ge.url)&&(!Ge.headers||Object.keys(Ge.headers).reduce((Mt,on)=>Mt&&"accept"===on,!0)),m++,Ct?Ee(Ge,ft):s.makeRequest(Ge,ft));try{var Rt=yield Ct;delete ke.abortController,ke.state="completed",Rt.data instanceof HTMLImageElement||s.isImageBitmap(Rt.data)?qe(Rt):Rt.data&&qe({data:yield B(Rt.data),cacheControl:Rt.cacheControl,expires:Rt.expires})}catch(Mt){delete ke.abortController,Re(Mt)}finally{m--,he()}}),he=()=>{var ke=(()=>{for(const Re of Object.keys(O))if(O[Re]())return!0;return!1})()?s.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Re=m;Re<ke&&0<c.length;Re++){var Ge=c.shift();Ge.abortController.signal.aborted?Re--:ae(Ge)}},Ee=(ke,Ge)=>new Promise((Re,qe)=>{const ft=new Image;var Ct=ke.url,Rt=ke.credentials;Rt&&"include"===Rt?ft.crossOrigin="use-credentials":(Rt&&"same-origin"===Rt||!s.sameOrigin(Ct))&&(ft.crossOrigin="anonymous"),Ge.signal.addEventListener("abort",()=>{ft.src="",qe(s.createAbortError())}),ft.fetchPriority="high",ft.onload=()=>{ft.onerror=ft.onload=null,Re({data:ft})},ft.onerror=()=>{ft.onerror=ft.onload=null,Ge.signal.aborted||qe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ft.src=Ct})}(f=f||{}),f.resetRequestQueue();class _n{constructor(c){this._transformRequestFn=c}transformRequest(c,m){return this._transformRequestFn&&this._transformRequestFn(c,m)||{url:c}}normalizeSpriteURL(c,m,E){return(c=function sr(x){var c=x.match(Yn);if(c)return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]};throw new Error(`Unable to parse URL "${x}"`)}(c)).path+=""+m+E,function ri(x){var c=x.params.length?"?"+x.params.join("&"):"";return x.protocol+"://"+x.authority+x.path+c}(c)}setTransformRequest(c){this._transformRequestFn=c}}const Yn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function tn(x){var c=[];if("string"==typeof x)c.push({id:"default",url:x});else if(x&&0<x.length){var m,E,O=[];for({id:m,url:E}of x){var B=""+m+E;-1===O.indexOf(B)&&(O.push(B),c.push({id:m,url:E}))}}return c}class Zn{constructor(c,m,E,O){this.context=c,this.format=E,this.texture=c.gl.createTexture(),this.update(m,O)}update(c,m,E){var{width:O,height:B}=c,ae=!(this.size&&this.size[0]===O&&this.size[1]===B||E),he=this.context,Ee=he.gl;this.useMipmap=!(!m||!m.useMipmap),Ee.bindTexture(Ee.TEXTURE_2D,this.texture),he.pixelStoreUnpackFlipY.set(!1),he.pixelStoreUnpack.set(1),he.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ee.RGBA&&(!m||!1!==m.premultiply)),ae?(this.size=[O,B],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||s.isImageBitmap(c)?Ee.texImage2D(Ee.TEXTURE_2D,0,this.format,this.format,Ee.UNSIGNED_BYTE,c):Ee.texImage2D(Ee.TEXTURE_2D,0,this.format,O,B,0,this.format,Ee.UNSIGNED_BYTE,c.data)):(({x:he,y:m}=E||{x:0,y:0}),c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||s.isImageBitmap(c)?Ee.texSubImage2D(Ee.TEXTURE_2D,0,he,m,Ee.RGBA,Ee.UNSIGNED_BYTE,c):Ee.texSubImage2D(Ee.TEXTURE_2D,0,he,m,O,B,Ee.RGBA,Ee.UNSIGNED_BYTE,c.data)),this.useMipmap&&this.isSizePowerOfTwo()&&Ee.generateMipmap(Ee.TEXTURE_2D)}bind(c,m,E){var O;(O=(O=this.context).gl).bindTexture(O.TEXTURE_2D,this.texture),E!==O.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(E=O.LINEAR),c!==this.filter&&(O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,c),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,E||c),this.filter=c),m!==this.wrap&&(O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,m),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){this.context.gl.deleteTexture(this.texture),this.texture=null}}class Er extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c)){for(var{ids:m,promiseResolve:E}of this.requestors)E(this._getImagesForIds(m));this.requestors=[]}}getImage(E){var m;return(E=this.images[E])&&!E.data&&E.spriteData&&(E.data=new s.RGBAImage({width:(m=E.spriteData).width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),E.spriteData=null),E}addImage(c,m){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,m)&&(this.images[c]=m)}_validate(c,m){let E=!0;var O=m.data||m.spriteData;return this._validateStretch(m.stretchX,O&&O.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),E=!1),this._validateStretch(m.stretchY,O&&O.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),E=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),E=!1),E}_validateStretch(c,m){if(c){let E=0;for(const O of c){if(O[0]<E||O[1]<O[0]||m<O[1])return!1;E=O[1]}}return!0}_validateContent(c,m){var E,O;return!c||4===c.length&&(E=(O=m.spriteData)&&O.width||m.data.width,O=O&&O.height||m.data.height,!(c[0]<0||E<c[0]||c[1]<0||O<c[1]||c[2]<0||E<c[2]||c[3]<0||O<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,m,E=!0){var O=this.getImage(c);if(E&&(O.data.width!==m.data.width||O.data.height!==m.data.height))throw new Error(`size mismatch between old image (${O.data.width}x${O.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=O.version+1,this.images[c]=m,this.updatedImages[c]=!0}removeImage(c){var m=this.images[c];delete this.images[c],delete this.patterns[c],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise((m,E)=>{let O=!0;if(!this.isLoaded())for(const B of c)this.images[B]||(O=!1);this.isLoaded()||O?m(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:m})})}_getImagesForIds(c){var m={};for(const E of c){let O=this.getImage(E);O||(this.fire(new s.Event("styleimagemissing",{id:E})),O=this.getImage(E)),O?m[E]={data:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,contentMatch:O.contentMatch,hasRenderCallback:!(!O.userImage||!O.userImage.render)}:s.warnOnce(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){var{width:c,height:m}=this.atlasImage;return{width:c,height:m}}getPattern(c){var m=this.patterns[c],E=this.getImage(c);return E?(m&&m.position.version===E.version?m:(m?m.position.version=E.version:(m={w:E.data.width+2,h:E.data.height+2,x:0,y:0},E=new s.ImagePosition(m,E),this.patterns[c]={bin:m,position:E}),this._updatePatternAtlas(),this.patterns[c])).position:null}bind(c){var m=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Zn(c,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){var c=[];for(const Ee in this.patterns)c.push(this.patterns[Ee].bin);const{w:m,h:E}=s.potpack(c);var O=this.atlasImage;O.resize({width:m||1,height:E||1});for(const Ee in this.patterns){var B=(ae=this.patterns[Ee].bin).x+1,ae=ae.y+1,he=this.getImage(Ee).data;const ke=he.width,Ge=he.height;s.RGBAImage.copy(he,O,{x:0,y:0},{x:B,y:ae},{width:ke,height:Ge}),s.RGBAImage.copy(he,O,{x:0,y:Ge-1},{x:B,y:ae-1},{width:ke,height:1}),s.RGBAImage.copy(he,O,{x:0,y:0},{x:B,y:ae+Ge},{width:ke,height:1}),s.RGBAImage.copy(he,O,{x:ke-1,y:0},{x:B-1,y:ae},{width:1,height:Ge}),s.RGBAImage.copy(he,O,{x:0,y:0},{x:B+ke,y:ae},{width:1,height:Ge})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const E of c){var m;this.callbackDispatchedThisFrame[E]||(this.callbackDispatchedThisFrame[E]=!0,(m=this.getImage(E))||s.warnOnce(`Image with ID: "${E}" was not found`),s.renderStyleImage(m)&&this.updateImage(E,m))}}}const yi=1e20;function Lt(x,c,m,E,O,B,ae,he,Ee){for(let ke=c;ke<c+E;ke++)Hn(x,m*B+ke,B,O,ae,he,Ee);for(let ke=m;ke<m+O;ke++)Hn(x,ke*B+c,1,E,ae,he,Ee)}function Hn(x,c,m,E,O,B,ae){ae[B[0]=0]=-yi,ae[1]=yi,O[0]=x[c];for(let Re=1,qe=0,ft=0;Re<E;Re++){O[Re]=x[c+Re*m];var he=Re*Re;do{var Ee=B[qe];ft=(O[Re]-O[Ee]+he-Ee*Ee)/(Re-Ee)/2}while(ft<=ae[qe]&&-1<--qe);B[++qe]=Re,ae[qe]=ft,ae[qe+1]=yi}for(let Re=0,qe=0;Re<E;Re++){for(;ae[qe+1]<Re;)qe++;var ke=B[qe],Ge=Re-ke;x[c+Re*m]=O[ke]+Ge*Ge}}class hn{constructor(c,m){this.requestManager=c,this.localIdeographFontFamily=m,this.entries={}}setURL(c){this.url=c}getGlyphs(c){return s.__awaiter(this,void 0,void 0,function*(){var m=[];for(const he in c)for(const Ee of c[he])m.push(this._getAndCacheGlyphsPromise(he,Ee));var E,O,B,ae={};for({stack:E,id:O,glyph:B}of yield Promise.all(m))ae[E]||(ae[E]={}),ae[E][O]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};return ae})}_getAndCacheGlyphsPromise(c,m){return s.__awaiter(this,void 0,void 0,function*(){let E=this.entries[c];var O=(E=E||(this.entries[c]={glyphs:{},requests:{},ranges:{}})).glyphs[m];if(void 0!==O)return{stack:c,id:m,glyph:O};if(O=this._tinySDF(E,c,m))return E.glyphs[m]=O,{stack:c,id:m,glyph:O};var B=Math.floor(m/256);if(65535<256*B)throw new Error("glyphs > 65535 not supported");if(E.ranges[B])return{stack:c,id:m,glyph:O};if(!this.url)throw new Error("glyphsUrl is not set");E.requests[B]||(O=hn.loadGlyphRange(c,B,this.url,this.requestManager),E.requests[B]=O);var ae=yield E.requests[B];for(const he in ae)this._doesCharSupportLocalGlyph(+he)||(E.glyphs[+he]=ae[+he]);return E.ranges[B]=!0,{stack:c,id:m,glyph:ae[m]||null}})}_doesCharSupportLocalGlyph(c){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](c)||s.unicodeBlockLookup["Hangul Syllables"](c)||s.unicodeBlockLookup.Hiragana(c)||s.unicodeBlockLookup.Katakana(c))}_tinySDF(c,m,E){var O=this.localIdeographFontFamily;if(O&&this._doesCharSupportLocalGlyph(E)){let B=c.tinySDF;if(!B){let ae="400";/bold/i.test(m)?ae="900":/medium/i.test(m)?ae="500":/light/i.test(m)&&(ae="200"),B=c.tinySDF=new hn.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:O,fontWeight:ae})}return m=B.draw(String.fromCharCode(E)),{id:E,bitmap:new s.AlphaImage({width:m.width||60,height:m.height||60},m.data),metrics:{width:m.glyphWidth/2||24,height:m.glyphHeight/2||24,left:m.glyphLeft/2+.5||0,top:m.glyphTop/2-27.5||-8,advance:m.glyphAdvance/2||24,isDoubleResolution:!0}}}}}hn.loadGlyphRange=function(x,c,m,E){return s.__awaiter(this,void 0,void 0,function*(){var O=256*c,B=255+O,ae=E.transformRequest(m.replace("{fontstack}",x).replace("{range}",O+"-"+B),"Glyphs");if(!(ae=yield s.getArrayBuffer(ae,new AbortController))||!ae.data)throw new Error(`Could not load glyph range. range: ${c}, ${O}-`+B);var he={};for(const Ee of s.parseGlyphPbf(ae.data))he[Ee.id]=Ee;return he})},hn.TinySDF=class{constructor({fontSize:x=24,buffer:c=3,radius:m=8,cutoff:E=.25,fontFamily:O="sans-serif",fontWeight:B="normal",fontStyle:ae="normal"}={}){this.buffer=c,this.cutoff=E,this.radius=m,E=this.size=x+4*c,m=this._createCanvas(E),(c=this.ctx=m.getContext("2d",{willReadFrequently:!0})).font=ae+` ${B} ${x}px `+O,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(x){var c=document.createElement("canvas");return c.width=c.height=x,c}draw(x){var{width:c,actualBoundingBoxAscent:E,actualBoundingBoxDescent:m,actualBoundingBoxLeft:Ge,actualBoundingBoxRight:he}=this.ctx.measureText(x),E=Math.ceil(E),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(he-Ge))),B=Math.min(this.size-this.buffer,E+Math.ceil(m)),ae=O+2*this.buffer,he=B+2*this.buffer,Ee=Math.max(ae*he,0),ke=new Uint8ClampedArray(Ee),Ge={data:ke,width:ae,height:he,glyphWidth:O,glyphHeight:B,glyphTop:E,glyphLeft:0,glyphAdvance:c};if(0!==O&&0!==B){var{ctx:m,buffer:Re,gridInner:qe,gridOuter:ft}=this,Ct=(m.clearRect(Re,Re,O,B),m.fillText(x,Re,Re+E),m.getImageData(Re,Re,O,B));ft.fill(yi,0,Ee),qe.fill(0,0,Ee);for(let cn=0;cn<B;cn++)for(let Wn=0;Wn<O;Wn++){var Rt,Mt=Ct.data[4*(cn*O+Wn)+3]/255;0!=Mt&&(Rt=(cn+Re)*ae+Wn+Re,1==Mt?(ft[Rt]=0,qe[Rt]=yi):(ft[Rt]=0<(Mt=.5-Mt)?Mt*Mt:0,qe[Rt]=Mt<0?Mt*Mt:0))}Lt(ft,0,0,ae,he,ae,this.f,this.v,this.z),Lt(qe,Re,Re,O,B,ae,this.f,this.v,this.z);for(let cn=0;cn<Ee;cn++){var on=Math.sqrt(ft[cn])-Math.sqrt(qe[cn]);ke[cn]=Math.round(255-255*(on/this.radius+this.cutoff))}}return Ge}};class vr{constructor(){this.specification=s.v8Spec.light.position}possiblyEvaluate(c,m){return s.sphericalToCartesian(c.expression.evaluate(m))}interpolate(c,m,E){return{x:s.interpolate.number(c.x,m.x,E),y:s.interpolate.number(c.y,m.y,E),z:s.interpolate.number(c.z,m.z,E)}}}let Bi;class Un extends s.Evented{constructor(c){super(),Bi=Bi||new s.Properties({anchor:new s.DataConstantProperty(s.v8Spec.light.anchor),position:new vr,color:new s.DataConstantProperty(s.v8Spec.light.color),intensity:new s.DataConstantProperty(s.v8Spec.light.intensity)}),this._transitionable=new s.Transitionable(Bi),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,m={}){if(!this._validate(s.validateLight,c,m))for(const O in c){var E=c[O];O.endsWith("-transition")?this._transitionable.setTransition(O.slice(0,-11),E):this._transitionable.setValue(O,E)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,m,E){return(!E||!1!==E.validate)&&s.emitValidationErrors(this,c.call(s.validateStyle,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.v8Spec}))}}class pi{constructor(c,m){this.width=c,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,m){var E=c.join(",")+String(m);return this.dashEntry[E]||(this.dashEntry[E]=this.addDash(c,m)),this.dashEntry[E]}getDashRanges(c,m,E){var O=[];let he=!0,Ee=(O.push({left:B=c.length%2==1?-c[c.length-1]*E:0,right:ae=c[0]*E,isDash:he,zeroLength:0===c[0]}),c[0]);for(let Ge=1;Ge<c.length;Ge++){he=!he;var ke=c[Ge],B=Ee*E,ae=(Ee+=ke)*E;O.push({left:B,right:ae,isDash:he,zeroLength:0===ke})}return O}addRoundDash(c,m,E){var O=m/2;for(let Ge=-E;Ge<=E;Ge++){var ae=this.width*(this.nextRow+E+Ge);let Re=0,qe=c[Re];for(let ft=0;ft<this.width;ft++){1<ft/qe.right&&(qe=c[++Re]);var he=Math.abs(ft-qe.left),ke=Math.abs(ft-qe.right);let Ct;var Ee;he=Math.min(he,ke),ke=Ge/E*(1+O),Ct=qe.isDash?(Ee=O-Math.abs(ke),Math.sqrt(he*he+Ee*Ee)):O-Math.sqrt(he*he+ke*ke),this.data[ae+ft]=Math.max(0,Math.min(255,Ct+128))}}}addRegularDash(c){for(let Re=c.length-1;0<=Re;--Re){var m=c[Re],E=c[Re+1];m.zeroLength?c.splice(Re,1):E&&E.isDash===m.isDash&&(E.left=m.left,c.splice(Re,1))}var O=c[0],B=c[c.length-1],ae=(O.isDash===B.isDash&&(O.left=B.left-this.width,B.right=O.right+this.width),this.width*this.nextRow);let he=0,Ee=c[he];for(let Re=0;Re<this.width;Re++){1<Re/Ee.right&&(Ee=c[++he]);var ke=Math.abs(Re-Ee.left),Ge=Math.abs(Re-Ee.right);ke=Math.min(ke,Ge),Ge=Ee.isDash?ke:-ke,this.data[ae+Re]=Math.max(0,Math.min(255,Ge+128))}}addDash(c,m){var E,O,B=m?7:0,ae=2*B+1;if(this.nextRow+ae>this.height)return s.warnOnce("LineAtlas out of space"),null;let he=0;for(let Ee=0;Ee<c.length;Ee++)he+=c[Ee];return 0!==he&&(O=this.getDashRanges(c,this.width,E=this.width/he),m?this.addRoundDash(O,E,B):this.addRegularDash(O)),m={y:(this.nextRow+B+.5)/this.height,height:2*B/this.height,width:he},this.nextRow+=ae,this.dirty=!0,m}bind(c){c=c.gl,this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Li="maplibre_preloaded_worker_pool";class Qi{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<Qi.workerCount;)this.workers.push(new Worker(s.config.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],0===this.numActive()&&(this.workers.forEach(m=>{m.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Li]}numActive(){return Object.keys(this.active).length}}let Bn,Na;function Qs(){return Bn=Bn||new Qi}hc=Math.floor(k.hardwareConcurrency/2),Qi.workerCount=s.isSafari(globalThis)?Math.max(Math.min(hc,3),1):1;class Zi{constructor(c,m){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=m;var E=this.workerPool.acquire(m);for(let B=0;B<E.length;B++){var O;(O=new s.Actor(O=E[B],m)).name="Worker "+B,this.actors.push(O)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,m){var E=[];for(const O of this.actors)E.push(O.sendAsync({type:c,data:m}));return Promise.all(E)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach(m=>{m.remove()}),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,m){for(const E of this.actors)E.registerMessageHandler(c,m)}}function za(){return Na||(Na=new Zi(Qs(),s.GLOBAL_DISPATCHER_ID)).registerMessageHandler("GR",(x,c,m)=>s.makeRequest(c,m)),Na}function Vi(x,c,m,Re,O,B){var ae,he,Ee,ke=function(Ct,Rt,Mt){if(Ct)for(const cn of Ct){var on=Rt[cn];if(on&&on.source===Mt&&"fill-extrusion"===on.type)return!0}else for(const cn in Rt){var sn=Rt[cn];if(sn.source===Mt&&"fill-extrusion"===sn.type)return!0}return!1}(O&&O.layers,c,x.id),Ge=B.maxPitchScaleFactor(),qe=((Re=x.tilesIn(Re,Ge,ke)).sort(Si),[]);for(const Ct of Re)qe.push({wrappedTileID:Ct.tileID.wrapped().key,queryResults:Ct.tile.queryRenderedFeatures(c,m,x._state,Ct.queryGeometry,Ct.cameraQueryGeometry,Ct.scale,O,B,Ge,(ae=x.transform,he=Ct.tileID,Ee=s.create(),s.translate(Ee,Ee,[1,1,0]),s.scale(Ee,Ee,[.5*ae.width,.5*ae.height,1]),s.multiply(Ee,Ee,ae.calculatePosMatrix(he.toUnwrapped()))))});var ft=function(Ct){var Rt={},Mt={};for(const Cr of Ct){var on=Cr.queryResults,sn=Cr.wrappedTileID,cn=Mt[sn]=Mt[sn]||{};for(const ur in on){var Wn=on[ur],Qn=cn[ur]=cn[ur]||{},Kn=Rt[ur]=Rt[ur]||[];for(const $r of Wn)Qn[$r.featureIndex]||(Qn[$r.featureIndex]=!0,Kn.push($r))}}return Rt}(qe);for(const Ct in ft)ft[Ct].forEach(Mt=>{var on=x.getFeatureState((Mt=Mt.feature).layer["source-layer"],Mt.id);Mt.source=Mt.layer.source,Mt.layer["source-layer"]&&(Mt.sourceLayer=Mt.layer["source-layer"]),Mt.state=on});return ft}function Si(x,c){return(x=x.tileID).overscaledZ-(c=c.tileID).overscaledZ||x.canonical.y-c.canonical.y||x.wrap-c.wrap||x.canonical.x-c.canonical.x}function Dn(x,c,m){return s.__awaiter(this,void 0,void 0,function*(){let E=x;var O;return x.url?E=(O=yield s.getJSON(c.transformRequest(x.url,"Source"),m)).data:yield k.frameAsync(m),E?(O=s.pick(s.extend(E,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]),"vector_layers"in E&&E.vector_layers&&(O.vectorLayerIds=E.vector_layers.map(B=>B.id)),O):null})}class er{constructor(c,m){c&&(m?this.setSouthWest(c).setNorthEast(m):Array.isArray(c)&&(4===c.length?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof s.LngLat?new s.LngLat(c.lng,c.lat):s.LngLat.convert(c),this}setSouthWest(c){return this._sw=c instanceof s.LngLat?new s.LngLat(c.lng,c.lat):s.LngLat.convert(c),this}extend(c){var E=this._sw,O=this._ne;let B,ae;if(c instanceof s.LngLat)B=c,ae=c;else{if(!(c instanceof er))return Array.isArray(c)?4===c.length||c.every(Array.isArray)?this.extend(er.convert(c)):this.extend(s.LngLat.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(s.LngLat.convert(c)):this;if(B=c._sw,ae=c._ne,!B||!ae)return this}return E||O?(E.lng=Math.min(B.lng,E.lng),E.lat=Math.min(B.lat,E.lat),O.lng=Math.max(ae.lng,O.lng),O.lat=Math.max(ae.lat,O.lat)):(this._sw=new s.LngLat(B.lng,B.lat),this._ne=new s.LngLat(ae.lng,ae.lat)),this}getCenter(){return new s.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new s.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(m){var E,{lng:m,lat:E}=s.LngLat.convert(m);let O=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(O=this._sw.lng>=m&&m>=this._ne.lng),(E=this._sw.lat<=E&&E<=this._ne.lat)&&O}static convert(c){return c instanceof er?c:c&&new er(c)}static fromLngLat(c,E=0){var O=(E=360*E/40075017)/Math.cos(Math.PI/180*c.lat);return new er(new s.LngLat(c.lng-O,c.lat-E),new s.LngLat(c.lng+O,c.lat+E))}}class hi{constructor(c,m,E){this.bounds=er.convert(this.validateBounds(c)),this.minzoom=m||0,this.maxzoom=E||24}validateBounds(c){return Array.isArray(c)&&4===c.length?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){var m=Math.pow(2,c.z);const E=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),O=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),B=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),ae=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return c.x>=E&&c.x<B&&c.y>=O&&c.y<ae}}class to extends s.Evented{constructor(c,m,E,O){if(super(),this.id=c,this.dispatcher=E,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(O)}load(){return s.__awaiter(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{var c=yield Dn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),c&&(s.extend(this,c),c.bounds&&(this.tileBounds=new hi(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))}catch(m){this._tileJSONRequest=null,this.fire(new s.ErrorEvent(m))}})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(c){return s.__awaiter(this,void 0,void 0,function*(){var m=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);(m={request:this.map._requestManager.transformRequest(m,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId}).request.collectResourceTiming=this._collectResourceTiming;let E="RT";if(c.actor&&"expired"!==c.state){if("loading"===c.state)return new Promise((B,ae)=>{c.reloadPromise={resolve:B,reject:ae}})}else c.actor=this.dispatcher.getActor(),E="LT";c.abortController=new AbortController;try{var O=yield c.actor.sendAsync({type:E,data:m},c.abortController);delete c.abortController,c.aborted||this._afterTileLoadWorkerResponse(c,O)}catch(B){if(delete c.abortController,!c.aborted){if(B&&404!==B.status)throw B;this._afterTileLoadWorkerResponse(c,null)}}})}_afterTileLoadWorkerResponse(c,m){m&&m.resourceTiming&&(c.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&c.setExpiryData(m),c.loadVectorData(m,this.map.painter),c.reloadPromise&&(m=c.reloadPromise,c.reloadPromise=null,this.loadTile(c).then(m.resolve).catch(m.reject))}abortTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))})}unloadTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Gi extends s.Evented{constructor(c,m,E,O){super(),this.id=c,this.dispatcher=E,this.setEventedParent(O),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(){return s.__awaiter(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{var c=yield Dn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(s.extend(this,c),c.bounds&&(this.tileBounds=new hi(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))}catch(m){this._tileJSONRequest=null,this.fire(new s.ErrorEvent(m))}})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}serialize(){return s.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return s.__awaiter(this,void 0,void 0,function*(){var m=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{var E,O,B,ae=yield f.getImage(this.map._requestManager.transformRequest(m,"Tile"),c.abortController,this.map._refreshExpiredTiles);delete c.abortController,c.aborted?c.state="unloaded":ae&&ae.data&&(this.map._refreshExpiredTiles&&ae.cacheControl&&ae.expires&&c.setExpiryData({cacheControl:ae.cacheControl,expires:ae.expires}),O=(E=this.map.painter.context).gl,c.texture=this.map.painter.getTileTexture((B=ae.data).width),c.texture?c.texture.update(B,{useMipmap:!0}):(c.texture=new Zn(E,B,O.RGBA,{useMipmap:!0}),c.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),c.state="loaded")}catch(he){if(delete c.abortController,c.aborted)c.state="unloaded";else if(he)throw c.state="errored",he}})}abortTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)})}unloadTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)})}hasTransition(){return!1}}class Vo extends Gi{constructor(c,m,E,O){super(c,m,E,O),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(c){return s.__awaiter(this,void 0,void 0,function*(){var m=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);m=this.map._requestManager.transformRequest(m,"Tile"),c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{var E,O,B,ae,he=yield f.getImage(m,c.abortController,this.map._refreshExpiredTiles);delete c.abortController,c.aborted?c.state="unloaded":he&&he.data&&(E=he.data,this.map._refreshExpiredTiles&&he.cacheControl&&he.expires&&c.setExpiryData({cacheControl:he.cacheControl,expires:he.expires}),O=s.isImageBitmap(E)&&s.offscreenCanvasSupported()?E:yield this.readImageNow(E),B={type:this.type,uid:c.uid,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift},c.actor&&"expired"!==c.state||(c.actor=this.dispatcher.getActor(),ae=yield c.actor.sendAsync({type:"LDT",data:B}),c.dem=ae,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"))}catch(Ee){if(delete c.abortController,c.aborted)c.state="unloaded";else if(Ee)throw c.state="errored",Ee}})}readImageNow(c){return s.__awaiter(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.isOffscreenCanvasDistorted()){var m=c.width+2,E=c.height+2;try{return new s.RGBAImage({width:m,height:E},yield s.readImageUsingVideoFrame(c,-1,-1,m,E))}catch{}}return k.getImageData(c,1)})}_getNeighboringTiles(c){var m=c.canonical,E=Math.pow(2,m.z),O=(m.x-1+E)%E,B=0===m.x?c.wrap-1:c.wrap,ae=(m.x+1+E)%E,he=m.x+1===E?c.wrap+1:c.wrap,Ee={};return Ee[new s.OverscaledTileID(c.overscaledZ,B,m.z,O,m.y).key]={backfilled:!1},Ee[new s.OverscaledTileID(c.overscaledZ,he,m.z,ae,m.y).key]={backfilled:!1},0<m.y&&(Ee[new s.OverscaledTileID(c.overscaledZ,B,m.z,O,m.y-1).key]={backfilled:!1},Ee[new s.OverscaledTileID(c.overscaledZ,c.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},Ee[new s.OverscaledTileID(c.overscaledZ,he,m.z,ae,m.y-1).key]={backfilled:!1}),m.y+1<E&&(Ee[new s.OverscaledTileID(c.overscaledZ,B,m.z,O,m.y+1).key]={backfilled:!1},Ee[new s.OverscaledTileID(c.overscaledZ,c.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},Ee[new s.OverscaledTileID(c.overscaledZ,he,m.z,ae,m.y+1).key]={backfilled:!1}),Ee}unloadTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))})}}class Ye extends s.Evented{constructor(c,m,E,O){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=E.getActor(),this.setEventedParent(O),this._data=m.data,this._options=s.extend({},m),this._collectResourceTiming=m.collectResourceTiming,void 0!==m.maxzoom&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId,this.workerOptions=s.extend({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(void 0!==m.buffer?m.buffer:128)*(c=s.EXTENT/this.tileSize),tolerance:(void 0!==m.tolerance?m.tolerance:.375)*c,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:void 0!==m.clusterMaxZoom?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:s.EXTENT,radius:(m.clusterRadius||50)*c,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return s.__awaiter(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(c){this.map=c,this.load()}setData(c){return this._data=c,this._updateWorkerData(),this}updateData(c){return this._updateWorkerData(c),this}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c&&(void 0!==c.clusterRadius&&(this.workerOptions.superclusterOptions.radius=c.clusterRadius),void 0!==c.clusterMaxZoom)&&(this.workerOptions.superclusterOptions.maxZoom=c.clusterMaxZoom),this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,m,E){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:m,offset:E}})}_updateWorkerData(c){return s.__awaiter(this,void 0,void 0,function*(){var m=s.extend({type:this.type},this.workerOptions);c?m.dataDiff=c:"string"==typeof this._data?(m.request=this.map._requestManager.transformRequest(k.resolveURL(this._data),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"}));try{var E=yield this.actor.sendAsync({type:"LD",data:m});if(this._pendingLoads--,this._removed||E.abandoned)this.fire(new s.Event("dataabort",{dataType:"source"}));else{let B=null;E.resourceTiming&&E.resourceTiming[this.id]&&(B=E.resourceTiming[this.id].slice(0));var O={dataType:"source"};this._collectResourceTiming&&B&&0<B.length&&s.extend(O,{resourceTiming:B}),this.fire(new s.Event("data",Object.assign(Object.assign({},O),{sourceDataType:"metadata"}))),this.fire(new s.Event("data",Object.assign(Object.assign({},O),{sourceDataType:"content"})))}}catch(B){this._pendingLoads--,this.fire(this._removed?new s.Event("dataabort",{dataType:"source"}):new s.ErrorEvent(B))}})}loaded(){return 0===this._pendingLoads}loadTile(c){return s.__awaiter(this,void 0,void 0,function*(){var m=c.actor?"RT":"LT",E=(c.actor=this.actor,{type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId});c.abortController=new AbortController,E=yield this.actor.sendAsync({type:m,data:E},c.abortController),delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(E,this.map.painter,"RT"==m)})}abortTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0})}unloadTile(c){return s.__awaiter(this,void 0,void 0,function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Be=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pe extends s.Evented{constructor(c,m,E,O){super(),this.id=c,this.dispatcher=E,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(O),this.options=m}load(c){return s.__awaiter(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{var m=yield f.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,c&&(this.coordinates=c),this._finishLoading())}catch(E){this._request=null,this.fire(new s.ErrorEvent(E))}})}loaded(){return this._loaded}updateImage(c){return c.url&&(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally(()=>{this.texture=null})),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){return c=(this.coordinates=c).map(s.MercatorCoordinate.fromLngLat),this.tileID=function $e(ae){let c=1/0,m=1/0,E=-1/0,O=-1/0;for(const he of ae)c=Math.min(c,he.x),m=Math.min(m,he.y),E=Math.max(E,he.x),O=Math.max(O,he.y);ae=E-c;var B=O-m;return ae=Math.max(ae,B),B=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),ae=Math.pow(2,B),new s.CanonicalTileID(B,Math.floor((c+E)/2*ae),Math.floor((m+O)/2*ae))}(c),this.minzoom=this.maxzoom=this.tileID.z,c=c.map(m=>this.tileID.getTilePoint(m)._round()),this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(c[2].x,c[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0!==Object.keys(this.tiles).length&&this.image){var c=this.map.painter.context,m=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Be.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Zn(c,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let O=!1;for(const B in this.tiles){var E=this.tiles[B];"loaded"!==E.state&&(E.state="loaded",E.texture=this.texture,O=!0)}O&&this.fire(new s.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}}loadTile(c){return s.__awaiter(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c).buckets={}:c.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class gt extends Pe{constructor(c,m,E,O){super(c,m,E,O),this.roundZoom=!0,this.type="video",this.options=m}load(){return s.__awaiter(this,void 0,void 0,function*(){this._loaded=!1;var c=this.options;this.urls=[];for(const E of c.urls)this.urls.push(this.map._requestManager.transformRequest(E,"Source").url);try{var m=yield s.getVideo(this.urls);this._loaded=!0,m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())}catch(E){this.fire(new s.ErrorEvent(E))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){var m;this.video&&(c<(m=this.video.seekable).start(0)||c>m.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=c)}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var c=this.map.painter.context,m=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Be.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new Zn(c,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let O=!1;for(const B in this.tiles){var E=this.tiles[B];"loaded"!==E.state&&(E.state="loaded",E.texture=this.texture,O=!0)}O&&this.fire(new s.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class kt extends Pe{constructor(c,m,E,O){super(c,m,E,O),m.coordinates?Array.isArray(m.coordinates)&&4===m.coordinates.length&&!m.coordinates.some(B=>!Array.isArray(B)||2!==B.length||B.some(ae=>"number"!=typeof ae))||this.fire(new s.ErrorEvent(new s.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError("sources."+c,null,'missing required property "coordinates"'))),m.animate&&"boolean"!=typeof m.animate&&this.fire(new s.ErrorEvent(new s.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value'))),m.canvas?"string"==typeof m.canvas||m.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError("sources."+c,null,'missing required property "canvas"'))),this.options=m,this.animate=void 0===m.animate||m.animate}load(){return s.__awaiter(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var m=this.map.painter.context,E=m.gl;this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Be.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Zn(m,this.canvas,E.RGBA,{premultiply:!0});let B=!1;for(const ae in this.tiles){var O=this.tiles[ae];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture,B=!0)}B&&this.fire(new s.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const yn={},St=x=>{switch(x){case"geojson":return Ye;case"image":return Pe;case"raster":return Gi;case"raster-dem":return Vo;case"vector":return to;case"video":return gt;case"canvas":return kt}return yn[x]},Wt="RTLPluginLoaded";class Yr extends s.Evented{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=za()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch(m=>{throw this.status="error",m})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return s.__awaiter(this,arguments,void 0,function*(m,E=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=k.resolveURL(m),!this.url)throw new Error(`requested url ${m} is invalid`);if("unavailable"===this.status){if(!E)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()})}_requestImport(){return s.__awaiter(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.Event(Wt))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let Br=null;function vi(){return Br=Br||new Yr}class eo{constructor(c,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=c,this.uid=s.uniqueId(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(c){(c+=this.timeAdded)<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,m,E){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function pn(x,c){var m={};if(c)for(const E of x){const O=E.layerIds.map(B=>c.getLayer(B)).filter(Boolean);if(0!==O.length){E.layers=O,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(B=>O.filter(ae=>ae.id===B)[0]));for(const B of O)m[B.id]=E}}return m}(c.buckets,m.style),this.hasSymbolBuckets=!1;for(const he in this.buckets){var O=this.buckets[he];if(O instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!E)break;O.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const he in this.buckets){var B=this.buckets[he];if(B instanceof s.SymbolBucket&&B.hasRTLText){this.hasRTLText=!0,vi().lazyLoad();break}}this.queryPadding=0;for(const he in this.buckets){var ae=this.buckets[he];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(he).queryRadius(ae))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const O in this.buckets){var m=this.buckets[O];m.uploadPending()&&m.upload(c)}var E=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Zn(c,this.imageAtlas.image,E.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Zn(c,this.glyphAtlasImage,E.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,m,E,O,B,ae,he,Ee,ke,Ge){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:O,cameraQueryGeometry:B,scale:ae,tileSize:this.tileSize,pixelPosMatrix:Ge,transform:Ee,params:he,queryPadding:this.queryPadding*ke},c,m,E):{}}querySourceFeatures(c,m){var E=this.latestFeatureIndex;if(E&&E.rawTileData){var O=E.loadVTLayers(),B=m&&m.sourceLayer?m.sourceLayer:"",ae=O._geojsonTileLayer||O[B];if(ae){var he=s.createFilter(m&&m.filter),{z:Ee,x:ke,y:Ge}=this.tileID.canonical,Re={z:Ee,x:ke,y:Ge};for(let Ct=0;Ct<ae.length;Ct++){var qe=ae.feature(Ct);if(he.needGeometry){var ft=s.toEvaluationFeature(qe,!0);if(!he.filter(new s.EvaluationParameters(this.tileID.overscaledZ),ft,this.tileID.canonical))continue}else if(!he.filter(new s.EvaluationParameters(this.tileID.overscaledZ),qe))continue;ft=E.getId(qe,B),(qe=new s.GeoJSONFeature(qe,Ee,ke,Ge,ft)).tile=Re,c.push(qe)}}}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){var m=this.expirationTime;if(c.cacheControl?(E=s.parseCacheControl(c.cacheControl))["max-age"]&&(this.expirationTime=Date.now()+1e3*E["max-age"]):c.expires&&(this.expirationTime=new Date(c.expires).getTime()),this.expirationTime){var E=Date.now();let O=!1;this.expirationTime>E?O=!1:!m||this.expirationTime<m||!(c=this.expirationTime-m)?O=!0:this.expirationTime=E+Math.max(c,3e4),O?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(c,m){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(c).length){var E,O,B,ae=this.latestFeatureIndex.loadVTLayers();for(const he in this.buckets)m.style.hasLayer(he)&&(O=ae[B=(E=this.buckets[he]).layers[0].sourceLayer||"_geojsonTileLayer"],B=c[B],O)&&B&&0!==Object.keys(B).length&&(E.update(B,O,this.imageAtlas&&this.imageAtlas.patternPositions||{}),B=m&&m.style&&m.style.getLayer(he))&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=k.now()+c}setDependencies(c,m){var E={};for(const O of m)E[O]=!0;this.dependencies[c]=E}hasDependency(c,m){for(const O of c){var E=this.dependencies[O];if(E)for(const B of m)if(E[B])return!0}return!1}}class Mn{constructor(c,m){this.max=c,this.onRemove=m,this.reset()}reset(){for(const c in this.data)for(const m of this.data[c])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(c,m,E){var O=c.wrapped().key;void 0===this.data[O]&&(this.data[O]=[]);const B={value:m,timeout:void 0};return void 0!==E&&(B.timeout=setTimeout(()=>{this.remove(c,B)},E)),this.data[O].push(B),this.order.push(O),this.order.length>this.max&&(m=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(m),this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){var m=this.data[c].shift();return m.timeout&&clearTimeout(m.timeout),0===this.data[c].length&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),m.value}getByKey(c){return(c=this.data[c])?c[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,m){var E;return this.has(c)&&(c=c.wrapped().key,m=void 0===m?0:this.data[c].indexOf(m),E=this.data[c][m],this.data[c].splice(m,1),E.timeout&&clearTimeout(E.timeout),0===this.data[c].length&&delete this.data[c],this.onRemove(E.value),this.order.splice(this.order.indexOf(c),1)),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){var m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(c){var m=[];for(const E in this.data)for(const O of this.data[E])c(O.value)||m.push(O);for(const E of m)this.remove(E.value.tileID,E)}}class fi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,m,E){var O=String(m);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][O]=this.stateChanges[c][O]||{},s.extend(this.stateChanges[c][O],E),null===this.deletedStates[c]){this.deletedStates[c]={};for(const B in this.state[c])B!==O&&(this.deletedStates[c][B]=null)}else if(this.deletedStates[c]&&null===this.deletedStates[c][O]){this.deletedStates[c][O]={};for(const B in this.state[c][O])E[B]||(this.deletedStates[c][O][B]=null)}else for(const B in E)this.deletedStates[c]&&this.deletedStates[c][O]&&null===this.deletedStates[c][O][B]&&delete this.deletedStates[c][O][B]}removeFeatureState(c,m,E){if(null!==this.deletedStates[c]){var B=String(m);if(this.deletedStates[c]=this.deletedStates[c]||{},E&&void 0!==m)null!==this.deletedStates[c][B]&&(this.deletedStates[c][B]=this.deletedStates[c][B]||{},this.deletedStates[c][B][E]=null);else if(void 0!==m)if(this.stateChanges[c]&&this.stateChanges[c][B])for(E in this.deletedStates[c][B]={},this.stateChanges[c][B])this.deletedStates[c][B][E]=null;else this.deletedStates[c][B]=null;else this.deletedStates[c]=null}}getState(c,m){var E=String(m),O=this.state[c]||{},ae=s.extend({},O[E],(this.stateChanges[c]||{})[E]);if(null===this.deletedStates[c])return{};if(this.deletedStates[c]){if(null===(O=this.deletedStates[c][m]))return{};for(const he in O)delete ae[he]}return ae}initializeTileState(c,m){c.setFeatureState(this.state,m)}coalesceChanges(c,m){var E={};for(const ae in this.stateChanges){this.state[ae]=this.state[ae]||{};var O={};for(const he in this.stateChanges[ae])this.state[ae][he]||(this.state[ae][he]={}),s.extend(this.state[ae][he],this.stateChanges[ae][he]),O[he]=this.state[ae][he];E[ae]=O}for(const ae in this.deletedStates){this.state[ae]=this.state[ae]||{};var B={};if(null===this.deletedStates[ae])for(const he in this.state[ae])B[he]={},this.state[ae][he]={};else for(const he in this.deletedStates[ae]){if(null===this.deletedStates[ae][he])this.state[ae][he]={};else for(const Ee of Object.keys(this.deletedStates[ae][he]))delete this.state[ae][he][Ee];B[he]=this.state[ae][he]}E[ae]=E[ae]||{},s.extend(E[ae],B)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(E).length)for(const ae in c)c[ae].setFeatureState(E,m)}}class Hr extends s.Evented{constructor(c,m,E){super(),this.id=c,this.dispatcher=E,this.on("data",O=>{"source"===O.dataType&&"metadata"===O.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===O.dataType&&"content"===O.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((x,c,m,E)=>{if((c=new(St(c.type))(x,c,m,E)).id!==x)throw new Error(`Expected Source id to be ${x} instead of `+c.id);return c})(c,m,E,this),this._tiles={},this._cache=new Mn(0,O=>this._unloadTile(O)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new fi,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c)}loaded(){if(!this._sourceErrored){if(!this._sourceLoaded||!this._source.loaded())return!1;if(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain){if(!this._updated)return!1;for(const m in this._tiles){var c=this._tiles[m];if("loaded"!==c.state&&"errored"!==c.state)return!1}}}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){var c;this._paused&&(c=this._shouldReloadOnResume,this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform)&&this.update(this.transform,this.terrain)}_loadTile(c,m,E){return s.__awaiter(this,void 0,void 0,function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,m,E)}catch(O){c.state="errored",404!==O.status?this._source.fire(new s.ErrorEvent(O,{tile:c})):this.update(this.transform,this.terrain)}})}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new s.Event("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const E in this._tiles){var m=this._tiles[E];m.upload(c),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(fa).map(c=>c.key)}getRenderableIds(c){var m=[];for(const E in this._tiles)this._isIdRenderable(E,c)&&m.push(this._tiles[E]);return c?m.sort((B,ae)=>{ae=ae.tileID;var he=new s.Point((B=B.tileID).canonical.x,B.canonical.y)._rotate(this.transform.angle),Ee=new s.Point(ae.canonical.x,ae.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-ae.overscaledZ||Ee.y-he.y||Ee.x-he.x}).map(E=>E.tileID.key):m.map(E=>E.tileID).sort(fa).map(E=>E.key)}hasRenderableParent(c){return!!(c=this.findLoadedParent(c,0))&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(c,m){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(m||!this._tiles[c].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)"errored"!==this._tiles[c].state&&this._reloadTile(c,"reloading")}}_reloadTile(c,m){return s.__awaiter(this,void 0,void 0,function*(){var E=this._tiles[c];E&&("loading"!==E.state&&(E.state=m),yield this._loadTile(E,c,m))})}_tileLoaded(c,m,E){c.timeAdded=k.now(),"expired"===E&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(m,c),"raster-dem"===this.getSource().type&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new s.Event("data",{dataType:"source",tile:c,coord:c.tileID}))}_backfillDEM(c){var m=this.getRenderableIds();for(let B=0;B<m.length;B++){var E=m[B];c.neighboringTiles&&c.neighboringTiles[E]&&(O(c,E=this.getTileByID(E)),O(E,c))}function O(B,ae){B.needsHillshadePrepare=!0,B.needsTerrainPrepare=!0;let he=ae.tileID.canonical.x-B.tileID.canonical.x;var Ee=ae.tileID.canonical.y-B.tileID.canonical.y,ke=Math.pow(2,B.tileID.canonical.z),Ge=ae.tileID.key;0===he&&0==Ee||1<Math.abs(Ee)||(1<Math.abs(he)&&(1===Math.abs(he+ke)?he+=ke:1===Math.abs(he-ke)&&(he-=ke)),ae.dem&&B.dem&&(B.dem.backfillBorder(ae.dem,he,Ee),B.neighboringTiles)&&B.neighboringTiles[Ge]&&(B.neighboringTiles[Ge].backfilled=!0))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,m,E,O){for(const ae in this._tiles){let he=this._tiles[ae];if(!(O[ae]||!he.hasData()||he.tileID.overscaledZ<=m||he.tileID.overscaledZ>E)){let Ee=he.tileID;for(;he&&he.tileID.overscaledZ>m+1;){var B=he.tileID.scaledTo(he.tileID.overscaledZ-1);(he=this._tiles[B.key])&&he.hasData()&&(Ee=B)}let ke=Ee;for(;ke.overscaledZ>m;)if(c[(ke=ke.scaledTo(ke.overscaledZ-1)).key]){O[Ee.key]=Ee;break}}}}findLoadedParent(c,m){var E;if(c.key in this._loadedParentTiles)return(E=this._loadedParentTiles[c.key])&&E.tileID.overscaledZ>=m?E:null;for(let B=c.overscaledZ-1;B>=m;B--){var O=c.scaledTo(B);if(O=this._getLoadedTile(O))return O}}_getLoadedTile(c){var m=this._tiles[c.key];return m&&m.hasData()?m:this._cache.getByKey(c.wrapped().key)}updateCacheSize(O){var E=Math.ceil(O.width/this._source.tileSize)+1;O=Math.ceil(O.height/this._source.tileSize)+1,E=Math.floor(E*O*(null===this._maxTileCacheZoomLevels?s.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),O="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,E):E,this._cache.setMaxSize(O)}handleWrapJump(c){var E=Math.round((c-(void 0===this._prevLng?c:this._prevLng))/360);if(this._prevLng=c,E){var O={};for(const he in this._tiles){var B=this._tiles[he];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+E),O[B.tileID.key]=B}this._tiles=O;for(const he in this._timers)clearTimeout(this._timers[he]),delete this._timers[he];for(const he in this._tiles)this._setTileReloadTimer(he,this._tiles[he])}}update(c,m){if(this.transform=c,this.terrain=m,this._sourceLoaded&&!this._paused){let cn;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?cn=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(Qn=>new s.OverscaledTileID(Qn.canonical.z,Qn.wrap,Qn.canonical.z,Qn.canonical.x,Qn.canonical.y)):(cn=c.coveringTiles({tileSize:(this.usedForTerrain?this:this._source).tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m}),this._source.hasTile&&(cn=cn.filter(Qn=>this._source.hasTile(Qn)))):cn=[],c=c.coveringZoomLevel(this._source);var E=Math.max(c-Hr.maxOverzooming,this._source.minzoom),O=Math.max(c+Hr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){var B,ae={};for(const Qn of cn)Qn.canonical.z>this._source.minzoom&&(ae[(B=Qn.scaledTo(Qn.canonical.z-1)).key]=B,ae[(B=Qn.scaledTo(Math.max(this._source.minzoom,Math.min(Qn.canonical.z,5)))).key]=B);cn=cn.concat(Object.values(ae))}var he=0===cn.length&&!this._updated&&this._didEmitContent,Ee=(this._updated=!0,he&&this.fire(new s.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id})),this._updateRetainedTiles(cn,c));if(Xs(this._source.type)){var ke={},Ge={},Re=(he=Object.keys(Ee),k.now());for(const Kn of he){var qe=Ee[Kn],ft=this._tiles[Kn];!ft||0!==ft.fadeEndTime&&ft.fadeEndTime<=Re||((ft=this.findLoadedParent(qe,E))&&(this._addTile(ft.tileID),ke[ft.tileID.key]=ft.tileID),Ge[Kn]=qe)}this._retainLoadedChildren(Ge,c,O,Ee);for(const Kn in ke)Ee[Kn]||(this._coveredTiles[Kn]=!0,Ee[Kn]=ke[Kn]);if(m){var Ct={},Rt={};for(const Kn of cn)this._tiles[Kn.key].hasData()?Ct[Kn.key]=Kn:Rt[Kn.key]=Kn;for(const Kn in Rt){var Mt=Rt[Kn].children(this._source.maxzoom);this._tiles[Mt[0].key]&&this._tiles[Mt[1].key]&&this._tiles[Mt[2].key]&&this._tiles[Mt[3].key]&&(Ct[Mt[0].key]=Ee[Mt[0].key]=Mt[0],Ct[Mt[1].key]=Ee[Mt[1].key]=Mt[1],Ct[Mt[2].key]=Ee[Mt[2].key]=Mt[2],Ct[Mt[3].key]=Ee[Mt[3].key]=Mt[3],delete Rt[Kn])}for(const Kn in Rt){var on=this.findLoadedParent(Rt[Kn],this._source.minzoom);if(on){Ct[on.tileID.key]=Ee[on.tileID.key]=on.tileID;for(const Cr in Ct)Ct[Cr].isChildOf(on.tileID)&&delete Ct[Cr]}}for(const Kn in this._tiles)Ct[Kn]||(this._coveredTiles[Kn]=!0)}}for(const Qn in Ee)this._tiles[Qn].clearFadeHold();for(const Qn of s.keysDifference(this._tiles,Ee)){var sn=this._tiles[Qn];sn.hasSymbolBuckets&&!sn.holdingForFade()?sn.setHoldDuration(this.map._fadeDuration):sn.hasSymbolBuckets&&!sn.symbolFadeFinished()||this._removeTile(Qn)}this._updateLoadedParentTileCache()}}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)}_updateRetainedTiles(c,m){var E={},O={},B=Math.max(m-Hr.maxOverzooming,this._source.minzoom),ae=Math.max(m+Hr.maxUnderzooming,this._source.minzoom),he={};for(const ft of c){var Ee=this._addTile(ft);E[ft.key]=ft,Ee.hasData()||m<this._source.maxzoom&&(he[ft.key]=ft)}this._retainLoadedChildren(he,m,ae,E);for(const ft of c){let Ct=this._tiles[ft.key];if(!Ct.hasData()){if(m+1>this._source.maxzoom){var ke=ft.children(this._source.maxzoom)[0],Ge=this.getTile(ke);if(Ge&&Ge.hasData()){E[ke.key]=ke;continue}}else if(E[(Ge=ft.children(this._source.maxzoom))[0].key]&&E[Ge[1].key]&&E[Ge[2].key]&&E[Ge[3].key])continue;let Rt=Ct.wasRequested();for(let Mt=ft.overscaledZ-1;Mt>=B;--Mt){var Re=ft.scaledTo(Mt);if(O[Re.key])break;if(O[Re.key]=!0,Ct=!(Ct=this.getTile(Re))&&Rt?this._addTile(Re):Ct){var qe=Ct.hasData();if((Rt||qe)&&(E[Re.key]=Re),Rt=Ct.wasRequested(),qe)break}}}}return E}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const E in this._tiles){var c=[];let O,B=this._tiles[E].tileID;for(;0<B.overscaledZ;){if(B.key in this._loadedParentTiles){O=this._loadedParentTiles[B.key];break}c.push(B.key);var m=B.scaledTo(B.overscaledZ-1);if(O=this._getLoadedTile(m))break;B=m}for(const ae of c)this._loadedParentTiles[ae]=O}}_addTile(c){let m=this._tiles[c.key];var E;return m||((m=this._cache.getAndRemove(c))&&(this._setTileReloadTimer(c.key,m),m.tileID=c,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[c.key])&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,m)),(E=m)||(m=new eo(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(m,c.key,m.state)),m.uses++,this._tiles[c.key]=m,E)||this._source.fire(new s.Event("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(c,m){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]),(m=m.getExpiryTimeout())&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},m))}_removeTile(c){var m=this._tiles[c];m&&(m.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),0<m.uses||(m.hasData()&&"reloading"!==m.state?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(c);this._cache.reset()}tilesIn(c,m,E){var O=[];const B=this.transform;if(B){E=E?B.getCameraQueryGeometry(c):c;var ae=c.map(sn=>B.pointCoordinate(sn,this.terrain)),he=E.map(sn=>B.pointCoordinate(sn,this.terrain)),Ee=this.getIds();let Ct=1/0,Rt=1/0,Mt=-1/0,on=-1/0;for(const sn of he)Ct=Math.min(Ct,sn.x),Rt=Math.min(Rt,sn.y),Mt=Math.max(Mt,sn.x),on=Math.max(on,sn.y);for(let sn=0;sn<Ee.length;sn++){var ke=this._tiles[Ee[sn]];if(!ke.holdingForFade()){const cn=ke.tileID;var Ge=Math.pow(2,B.zoom-ke.tileID.overscaledZ),Re=m*ke.queryPadding*s.EXTENT/ke.tileSize/Ge,qe=[cn.getTilePoint(new s.MercatorCoordinate(Ct,Rt)),cn.getTilePoint(new s.MercatorCoordinate(Mt,on))];qe[0].x-Re<s.EXTENT&&qe[0].y-Re<s.EXTENT&&0<=qe[1].x+Re&&0<=qe[1].y+Re&&(qe=ae.map(Wn=>cn.getTilePoint(Wn)),Re=he.map(Wn=>cn.getTilePoint(Wn)),O.push({tile:ke,tileID:cn,queryGeometry:qe,cameraQueryGeometry:Re,scale:Ge}))}}}return O}getVisibleCoordinates(c){c=this.getRenderableIds(c).map(m=>this._tiles[m].tileID);for(const m of c)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Xs(this._source.type)){var c=k.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=c)return!0}return!1}setFeatureState(c,m,E){this._state.updateState(c=c||"_geojsonTileLayer",m,E)}removeFeatureState(c,m,E){this._state.removeFeatureState(c=c||"_geojsonTileLayer",m,E)}getFeatureState(c,m){return this._state.getState(c=c||"_geojsonTileLayer",m)}setDependencies(c,m,E){(c=this._tiles[c])&&c.setDependencies(m,E)}reloadTilesForDependencies(c,m){for(const E in this._tiles)this._tiles[E].hasDependency(c,m)&&this._reloadTile(E,"reloading");this._cache.filter(E=>!E.hasDependency(c,m))}}function fa(x,c){var m=Math.abs(2*x.wrap)-(x.wrap<0),E=Math.abs(2*c.wrap)-(c.wrap<0);return x.overscaledZ-c.overscaledZ||E-m||c.canonical.y-x.canonical.y||c.canonical.x-x.canonical.x}function Xs(x){return"raster"===x||"image"===x||"video"===x}Hr.maxOverzooming=10,Hr.maxUnderzooming=3;class Ki{constructor(c,m){this.reset(c,m)}reset(c,m){this.points=c||[],this._distances=[0];for(let E=1;E<this.points.length;E++)this._distances[E]=this._distances[E-1]+this.points[E].dist(this.points[E-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(B){if(1===this.points.length)return this.points[0];B=s.clamp(B,0,1);let m=1,E=this._distances[m];for(var O=B*this.paddedLength+this.padding;E<O&&m<this._distances.length;)E=this._distances[++m];var he,ae=E-(he=this._distances[B=m-1]);return this.points[B].mult(1-(he=0<ae?(O-he)/ae:0)).add(this.points[m].mult(he))}}function bl(x,c){return"always"===x||"never"!==x&&"never"!==c}class Yc{constructor(c,m,E){var O=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(c/E),this.yCellCount=Math.ceil(m/E);for(let ae=0;ae<this.xCellCount*this.yCellCount;ae++)O.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=m,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,m,E,O,B){this._forEachCell(m,E,O,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(m),this.bboxes.push(E),this.bboxes.push(O),this.bboxes.push(B)}insertCircle(c,m,E,O){this._forEachCell(m-O,E-O,m+O,E+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(m),this.circles.push(E),this.circles.push(O)}_insertBoxCell(c,m,E,O,B,ae){this.boxCells[B].push(ae)}_insertCircleCell(c,m,E,O,B,ae){this.circleCells[B].push(ae)}_query(c,m,E,O,B,ae,he){if(E<0||c>this.width||O<0||m>this.height)return[];var Ee=[];if(c<=0&&m<=0&&this.width<=E&&this.height<=O){if(B)return[{key:null,x1:c,y1:m,x2:E,y2:O}];for(let qe=0;qe<this.boxKeys.length;qe++)Ee.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(let qe=0;qe<this.circleKeys.length;qe++){var ke=this.circles[3*qe],Ge=this.circles[3*qe+1],Re=this.circles[3*qe+2];Ee.push({key:this.circleKeys[qe],x1:ke-Re,y1:Ge-Re,x2:ke+Re,y2:Ge+Re})}}else this._forEachCell(c,m,E,O,this._queryCell,Ee,{hitTest:B,overlapMode:ae,seenUids:{box:{},circle:{}}},he);return Ee}query(c,m,E,O){return this._query(c,m,E,O,!1,null)}hitTest(c,m,E,O,B,ae){return 0<this._query(c,m,E,O,!0,B,ae).length}hitTestCircle(c,m,E,O,B){var ae=c-E,he=c+E,Ee=m-E,ke=m+E;return!(he<0||ae>this.width||ke<0||Ee>this.height)&&(this._forEachCell(ae,Ee,he,ke,this._queryCellCircle,ae=[],{hitTest:!0,overlapMode:O,circle:{x:c,y:m,radius:E},seenUids:{box:{},circle:{}}},B),0<ae.length)}_queryCell(c,m,E,O,B,ae,qe,Ee){var{seenUids:ke,hitTest:Ge,overlapMode:Re}=qe;if(null!==(qe=this.boxCells[B])){var ft=this.bboxes;for(const Qn of qe)if(!ke.box[Qn]){ke.box[Qn]=!0;var Ct=4*Qn,Rt=this.boxKeys[Qn];if(c<=ft[2+Ct]&&m<=ft[3+Ct]&&E>=ft[0+Ct]&&O>=ft[1+Ct]&&(!Ee||Ee(Rt))&&(!Ge||!bl(Re,Rt.overlapMode))&&(ae.push({key:Rt,x1:ft[Ct],y1:ft[1+Ct],x2:ft[2+Ct],y2:ft[3+Ct]}),Ge))return!0}}if(null!==(qe=this.circleCells[B])){var Mt=this.circles;for(const Qn of qe)if(!ke.circle[Qn]){ke.circle[Qn]=!0;var sn=this.circleKeys[Qn];if(this._circleAndRectCollide(Mt[on=3*Qn],Mt[1+on],Mt[2+on],c,m,E,O)&&(!Ee||Ee(sn))&&(!Ge||!bl(Re,sn.overlapMode))){var on,cn=Mt[on],Wn=Mt[1+on];if(ae.push({key:sn,x1:cn-(on=Mt[2+on]),y1:Wn-on,x2:cn+on,y2:Wn+on}),Ge)return!0}}}return!1}_queryCellCircle(c,m,E,O,B,ae,qe,Ee){var{circle:ke,seenUids:Ge,overlapMode:Re}=qe;if(null!==(qe=this.boxCells[B])){var ft=this.bboxes;for(const cn of qe)if(!Ge.box[cn]){Ge.box[cn]=!0;var Ct=4*cn,Rt=this.boxKeys[cn];if(this._circleAndRectCollide(ke.x,ke.y,ke.radius,ft[0+Ct],ft[1+Ct],ft[2+Ct],ft[3+Ct])&&(!Ee||Ee(Rt))&&!bl(Re,Rt.overlapMode))return ae.push(!0),!0}}if(null!==(qe=this.circleCells[B])){var Mt=this.circles;for(const cn of qe)if(!Ge.circle[cn]){Ge.circle[cn]=!0;var on=3*cn,sn=this.circleKeys[cn];if(this._circlesCollide(Mt[on],Mt[1+on],Mt[2+on],ke.x,ke.y,ke.radius)&&(!Ee||Ee(sn))&&!bl(Re,sn.overlapMode))return ae.push(!0),!0}}}_forEachCell(c,m,E,O,B,ae,he,Ee){var ke=this._convertToXCellCoord(c),Ge=this._convertToYCellCoord(m),Re=this._convertToXCellCoord(E),qe=this._convertToYCellCoord(O);for(let Ct=ke;Ct<=Re;Ct++)for(let Rt=Ge;Rt<=qe;Rt++)if(B.call(this,c,m,E,O,this.xCellCount*Rt+Ct,ae,he,Ee))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,m,E,O,B,ae){return(O-=c)*O+(c=B-m)*c<(B=E+ae)*B}_circleAndRectCollide(c,m,E,O,B,ae,he){return!((ae=(ae-O)/2)+E<(c=Math.abs(c-(O+ae)))||(O=(he-B)/2)+E<(he=Math.abs(m-(B+O)))||!(c<=ae||he<=O||(m=c-ae)*m+(B=he-O)*B<=E*E))}}function Yo(x,c,m,E,O){var B=s.create();return c?(s.scale(B,B,[1/O,1/O,1]),m||s.rotateZ(B,B,E.angle)):s.multiply(B,E.labelPlaneMatrix,x),B}function rt(x,c,m,E,O){return c?(c=s.clone(x),s.scale(c,c,[O,O,1]),m||s.rotateZ(c,c,-E.angle),c):E.glCoordMatrix}function xe(x,c,m){let E;return m?(E=[x.x,x.y,m(x.x,x.y),1],s.transformMat4(E,E,c)):ci(E=[x.x,x.y,0,1],E,c),{point:new s.Point(E[0]/(m=E[3]),E[1]/m),signedDistanceFromCamera:m}}function je(x,c){return.5+x/c*.5}function Ue(x,Mt,m,E,O,B,ae,he,Ee,ke,Ge,Re,qe){var on=he.glyphStartIndex+he.numGlyphs,ft=he.lineStartIndex,Ct=he.lineStartIndex+he.lineLength,Rt=Mt.getoffsetX(he.glyphStartIndex);return Mt=Mt.getoffsetX(on-1),(on=rn(x*Rt,m,E,O,B,ae,he.segment,ft,Ct,Ee,ke,Ge,Re,qe))&&(Rt=rn(x*Mt,m,E,O,B,ae,he.segment,ft,Ct,Ee,ke,Ge,Re,qe))?{first:on,last:Rt}:null}function Tt(x,c,m,E){if(x===s.WritingMode.horizontal){var O=Math.abs(m.y-c.y);if(Math.abs(m.x-c.x)*E<O)return{useVertical:!0}}return(x===s.WritingMode.vertical?c.y<m.y:c.x>m.x)?{needsFlipping:!0}:null}function Jt(x,c,m,E,O,B,ae,he,Ee,ke,Ge,Re,qe,ft,Ct,Rt){var Mt=c/24,on=x.lineOffsetX*Mt,sn=x.lineOffsetY*Mt;let cn;if(1<x.numGlyphs){var Wn=x.glyphStartIndex+x.numGlyphs,Qn=x.lineStartIndex,Kn=x.lineStartIndex+x.lineLength;if(!(c=Ue(Mt,he,on,sn,m,Ge,Re,x,Ee,B,qe,Ct,Rt)))return{notEnoughRoom:!0};var Cr=xe(c.first.point,ae,Rt).point;if(ae=xe(c.last.point,ae,Rt).point,E&&!m&&(Cr=Tt(x.writingMode,Cr,ae,ft)))return Cr;cn=[c.first];for(let mi=x.glyphStartIndex+1;mi<Wn-1;mi++)cn.push(rn(Mt*he.getoffsetX(mi),on,sn,m,Ge,Re,x.segment,Qn,Kn,Ee,B,qe,Ct,Rt));cn.push(c.last)}else{if(E&&!m&&(ae=xe(Re,O,Rt).point,Cr=0<(E=xe(c=new s.Point(Ee.getx(Cr=x.lineStartIndex+x.segment+1),Ee.gety(Cr)),O,Rt)).signedDistanceFromCamera?E.point:mn(Re,c,ae,1,O,Rt),E=Tt(x.writingMode,ae,Cr,ft)))return E;if(!(c=rn(Mt*he.getoffsetX(x.glyphStartIndex),on,sn,m,Ge,Re,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,Ee,B,qe,Ct,Rt)))return{notEnoughRoom:!0};cn=[c]}for(const ur of cn)s.addDynamicAttributes(ke,ur.point,ur.angle);return{}}function mn(x,c,m,E,O,B){return x=xe(x.add(x.sub(c)._unit()),O,B).point,c=m.sub(x),m.add(c._mult(E/c.mag()))}function Qt(x,O){var m,E,{projectionCache:O,lineVertexArray:B,labelPlaneMatrix:ae,tileAnchorPoint:he,distanceFromAnchor:Ee,getElevation:ke,previousVertex:Ge,direction:Re,absOffsetX:qe}=O;return O.projections[x]||(0<(E=xe(m=new s.Point(B.getx(x),B.gety(x)),ae,ke)).signedDistanceFromCamera?(O.projections[x]=E.point,E.point):(O=x-Re,mn(0===Ee?he:new s.Point(B.getx(O),B.gety(O)),m,Ge,qe-Ee+1,ae,ke)))}function zt(x,c,m){return x._unit()._perp()._mult(c*m)}function rn(x,c,m,E,O,B,ae,he,Ee,ke,Ge,Re,qe,ft){let cn,Wn,Ct=0<(x=E?x-c:x+c)?1:-1,Rt=0,Mt=(E&&(Ct*=-1,Rt=Math.PI),Ct<0&&(Rt+=Math.PI),0<Ct?he+ae:he+ae+1),on=O,sn=O,Qn=0,Kn=0;var Cr=Math.abs(x),ur=[];let $r;for(;Qn+Kn<=Cr;){if((Mt+=Ct)<he||Mt>=Ee)return null;Qn+=Kn,sn=on,Wn=cn;var mi={projectionCache:Re,lineVertexArray:ke,labelPlaneMatrix:Ge,tileAnchorPoint:B,distanceFromAnchor:Qn,getElevation:ft,previousVertex:sn,direction:Ct,absOffsetX:Cr};if(on=Qt(Mt,mi),0===m)ur.push(sn),$r=on.sub(sn);else{let So;var Yi=on.sub(sn);So=0===Yi.mag()?zt(Qt(Mt+Ct,mi).sub(on),m,Ct):zt(Yi,m,Ct),Wn=Wn||sn.add(So),cn=function(wo,Xi,Zr,po,ta,zi,gs,Hc){var{projectionCache:cs,direction:Ms}=Hc;if(!cs.offsets[wo]){if(Xi=Zr.add(Xi),wo+Ms<po||ta<=wo+Ms)return cs.offsets[wo]=Xi;ta=zt((po=Qt(wo+Ms,Hc)).sub(Zr),gs,Ms),Hc=Zr.add(ta),gs=po.add(ta),cs.offsets[wo]=s.findLineIntersection(zi,Xi,Hc,gs)||Xi}return cs.offsets[wo]}(Mt,So,on,he,Ee,Wn,m,mi),ur.push(Wn),$r=cn.sub(Wn)}Kn=$r.mag()}return E=$r._mult(c=(Cr-Qn)/Kn)._add(Wn||sn),ae=Rt+Math.atan2(on.y-sn.y,on.x-sn.x),ur.push(E),{point:E,angle:qe?ae:0,path:ur}}const fr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Sr(x,c){for(let E=0;E<x;E++){var m=c.length;c.resize(m+4),c.float32.set(fr,3*m)}}function ci(x,O,m){var E=O[0];x[0]=m[0]*E+m[4]*(O=O[1])+m[12],x[1]=m[1]*E+m[5]*O+m[13],x[3]=m[3]*E+m[7]*O+m[15]}class Eo{constructor(c,m=new Yc(c.width+200,c.height+200,25),E=new Yc(c.width+200,c.height+200,25)){this.transform=c,this.grid=m,this.ignoredGrid=E,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+100,this.screenBottomBoundary=c.height+100,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(qe,m,ke,he,B,Ee){he=this.projectAndGetPerspectiveRatio(he,qe.anchorPointX,qe.anchorPointY,Ee);var Ge=qe.y1*(Ee=ke*he.perspectiveRatio)+he.point.y,Re=qe.x2*Ee+he.point.x;return!this.isInsideGrid(ke=qe.x1*Ee+he.point.x,Ge,Re,qe=qe.y2*Ee+he.point.y)||"always"!==m&&this.grid.hitTest(ke,Ge,Re,qe,m,B)||he.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ke,Ge,Re,qe],offscreen:this.isOffscreen(ke,Ge,Re,qe)}}placeCollisionCircles(c,m,E,Wn,cn,on,he,Ee,ke,sn,Re,qe,ft,Ct){var Rt=[],Mt=new s.Point(m.anchorX,m.anchorY);on=xe(Mt,on,Ct),on=je(this.transform.cameraToCenterDistance,on.signedDistanceFromCamera),sn=(sn?cn/on:cn*on)/s.ONE_EM,cn=xe(Mt,he,Ct).point;let Qn=!1,Kn=!1,Cr=!0;if(Wn=Ue(sn,Wn,m.lineOffsetX*sn,m.lineOffsetY*sn,!1,cn,Mt,m,E,he,{projections:{},offsets:{}},!1,Ct)){var ur=.5*qe*on+ft,$r=(sn=new s.Point(-100,-100),cn=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),new Ki),mi=Wn.first,Yi=Wn.last;let ya=[];for(let Os=mi.path.length-1;1<=Os;Os--)ya.push(mi.path[Os]);for(let Os=1;Os<Yi.path.length;Os++)ya.push(Yi.path[Os]);var So=2.5*ur;Ee&&(Mt=ya.map(Os=>xe(Os,Ee,Ct)),ya=Mt.some(Os=>Os.signedDistanceFromCamera<=0)?[]:Mt.map(Os=>Os.point));let Uc=[];if(0<ya.length){var wo=ya[0].clone(),Xi=ya[0].clone();for(let Os=1;Os<ya.length;Os++)wo.x=Math.min(wo.x,ya[Os].x),wo.y=Math.min(wo.y,ya[Os].y),Xi.x=Math.max(Xi.x,ya[Os].x),Xi.y=Math.max(Xi.y,ya[Os].y);Uc=wo.x>=sn.x&&Xi.x<=cn.x&&wo.y>=sn.y&&Xi.y<=cn.y?[ya]:Xi.x<sn.x||wo.x>cn.x||Xi.y<sn.y||wo.y>cn.y?[]:s.clipLine([ya],sn.x,sn.y,cn.x,cn.y)}for(const Os of Uc){$r.reset(Os,.25*ur);let Sc=0;Sc=$r.length<=.5*ur?1:Math.ceil($r.paddedLength/So)+1;for(let mh=0;mh<Sc;mh++){var po=mh/Math.max(Sc-1,1),Zr=(po=$r.lerp(po)).x+100,ta=(Rt.push(Zr,po=po.y+100,ur,0),Zr-ur),zi=po-ur,gs=Zr+ur,Hc=po+ur;if(Cr=Cr&&this.isOffscreen(ta,zi,gs,Hc),Kn=Kn||this.isInsideGrid(ta,zi,gs,Hc),"always"!==c&&this.grid.hitTestCircle(Zr,po,ur,c,Re)&&(Qn=!0,!ke))return{circles:[],offscreen:!1,collisionDetected:Qn}}}}return{circles:!ke&&Qn||!Kn||on<this.perspectiveRatioCutoff?[]:Rt,offscreen:Cr,collisionDetected:Qn}}queryRenderedSymbols(c){if(0===c.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var m=[];let E=1/0,O=1/0,B=-1/0,ae=-1/0;for(const qe of c){var he=new s.Point(qe.x+100,qe.y+100);E=Math.min(E,he.x),O=Math.min(O,he.y),B=Math.max(B,he.x),ae=Math.max(ae,he.y),m.push(he)}var Ee={},ke={};for(const qe of this.grid.query(E,O,B,ae).concat(this.ignoredGrid.query(E,O,B,ae))){var Ge,Re=qe.key;void 0===Ee[Re.bucketInstanceId]&&(Ee[Re.bucketInstanceId]={}),Ee[Re.bucketInstanceId][Re.featureIndex]||(Ge=[new s.Point(qe.x1,qe.y1),new s.Point(qe.x2,qe.y1),new s.Point(qe.x2,qe.y2),new s.Point(qe.x1,qe.y2)],s.polygonIntersectsPolygon(m,Ge)&&(Ee[Re.bucketInstanceId][Re.featureIndex]=!0,void 0===ke[Re.bucketInstanceId]&&(ke[Re.bucketInstanceId]=[]),ke[Re.bucketInstanceId].push(Re.featureIndex)))}return ke}insertCollisionBox(c,m,E,O,B,ae){(E?this.ignoredGrid:this.grid).insert({bucketInstanceId:O,featureIndex:B,collisionGroupID:ae,overlapMode:m},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,m,E,O,B,ae){var he=E?this.ignoredGrid:this.grid,Ee={bucketInstanceId:O,featureIndex:B,collisionGroupID:ae,overlapMode:m};for(let ke=0;ke<c.length;ke+=4)he.insertCircle(Ee,c[ke],c[ke+1],c[ke+2])}projectAndGetPerspectiveRatio(c,m,E,O){let B;return O?(B=[m,E,O(m,E),1],s.transformMat4(B,B,c)):ci(B=[m,E,0,1],B,c),{point:new s.Point((B[0]/B[3]+1)/2*this.transform.width+100,(-B[1]/B[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(c,m,E,O){return E<100||c>=this.screenRightBoundary||O<100||m>this.screenBottomBoundary}isInsideGrid(c,m,E,O){return 0<=E&&c<this.gridRightBoundary&&0<=O&&m<this.gridBottomBoundary}getViewportMatrix(){var c=s.identity([]);return s.translate(c,c,[-100,-100,0]),c}}function uo(x,c,m){return c*(s.EXTENT/(x.tileSize*Math.pow(2,m-x.tileID.overscaledZ)))}class Ro{constructor(c,m,E,O){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?m:-m))):O&&E?1:0,this.placed=E}isHidden(){return 0===this.opacity&&!this.placed}}class As{constructor(c,m,E,O,B){this.text=new Ro(c?c.text:null,m,E,B),this.icon=new Ro(c?c.icon:null,m,O,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zs{constructor(c,m,E){this.text=c,this.icon=m,this.skipFade=E}}class Da{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ya{constructor(c,m,E,O,B){this.bucketInstanceId=c,this.featureIndex=m,this.sourceLayerIndex=E,this.bucketIndex=O,this.tileID=B}}class Io{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const m=++this.maxGroupID;this.collisionGroups[c]={ID:m,predicate:E=>E.collisionGroupID===m}}return this.collisionGroups[c]}}function Mo(B,c,m,E,O){var{horizontalAlign:B,verticalAlign:ae}=s.getAnchorAlignment(B);return new s.Point(-(B-.5)*c+E[0]*O,-(ae-.5)*m+E[1]*O)}function Is(ae,qe,m,E,O,B){var{x1:ae,x2:he,y1:Ee,y2:ke,anchorPointX:Ge,anchorPointY:Re}=ae;return qe=new s.Point(qe,m),E&&qe._rotate(O?B:-B),{x1:ae+qe.x,y1:Ee+qe.y,x2:he+qe.x,y2:ke+qe.y,anchorPointX:Ge,anchorPointY:Re}}class Nu{constructor(c,m,E,O,B){this.transform=c.clone(),this.terrain=m,this.collisionIndex=new Eo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=E,this.retainedQueryData={},this.collisionGroups=new Io(O),this.collisionCircleArrays={},(this.prevPlacement=B)&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,m,E,O){var B=E.getBucket(m),ae=E.latestFeatureIndex;if(B&&ae&&m.id===B.layerIds[0]){m=E.collisionBoxArray;var he=B.layers[0].layout,Ee=Math.pow(2,this.transform.zoom-E.tileID.overscaledZ),ke=E.tileSize/s.EXTENT,Ge=this.transform.calculatePosMatrix(E.tileID.toUnwrapped()),Re="map"===he.get("text-pitch-alignment"),qe="map"===he.get("text-rotation-alignment"),ft=uo(E,1,this.transform.zoom),Ct=Yo(Ge,Re,qe,this.transform,ft);let Wn=null;Re&&(Re=rt(Ge,Re,qe,this.transform,ft),Wn=s.multiply([],this.transform.labelPlaneMatrix,Re)),this.retainedQueryData[B.bucketInstanceId]=new Ya(B.bucketInstanceId,ae,B.sourceLayerIndex,B.index,E.tileID);var Rt={bucket:B,layout:he,posMatrix:Ge,textLabelPlaneMatrix:Ct,labelToScreenMatrix:Wn,scale:Ee,textPixelRatio:ke,holdingForFade:E.holdingForFade(),collisionBoxArray:m,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(O)for(const Qn of B.sortKeyRanges){var{sortKey:Mt,symbolInstanceStart:on,symbolInstanceEnd:sn}=Qn;c.push({sortKey:Mt,symbolInstanceStart:on,symbolInstanceEnd:sn,parameters:Rt})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:Rt})}}attemptAnchorPlacement(sn,Wn,E,O,B,ae,he,Ee,ke,Ge,Re,qe,ft,Ct,Rt,Mt){var on=s.TextAnchorEnum[sn.textAnchor],cn=Mo(on,E,O,sn=[sn.textOffset0,sn.textOffset1],B);if(Wn=this.collisionIndex.placeCollisionBox(Is(Wn,cn.x,cn.y,ae,he,this.transform.angle),Re,Ee,ke,Ge.predicate,Mt),(!Rt||0!==this.collisionIndex.placeCollisionBox(Is(Rt,cn.x,cn.y,ae,he,this.transform.angle),Re,Ee,ke,Ge.predicate,Mt).box.length)&&0<Wn.box.length){let Qn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(Qn=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),0===qe.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:sn,width:E,height:O,anchor:on,textBoxScale:B,prevAnchor:Qn},this.markUsedJustification(ft,on,qe,Ct),ft.allowVerticalPlacement&&(this.markUsedOrientation(ft,Ct,qe),this.placedOrientations[qe.crossTileID]=Ct),{shift:cn,placedGlyphBoxes:Wn}}}placeLayerBucketPart(c,m,E){const{bucket:O,layout:B,posMatrix:ae,textLabelPlaneMatrix:he,labelToScreenMatrix:Ee,textPixelRatio:ke,holdingForFade:Ge,collisionBoxArray:Re,partiallyEvaluatedTextSize:qe,collisionGroup:ft}=c.parameters,Ct=B.get("text-optional"),Rt=B.get("icon-optional"),Mt=s.getOverlapMode(B,"text-overlap","text-allow-overlap"),on="always"===Mt,sn=s.getOverlapMode(B,"icon-overlap","icon-allow-overlap");var cn="always"===sn;const Wn="map"===B.get("text-rotation-alignment"),Qn="map"===B.get("text-pitch-alignment"),Kn="none"!==B.get("icon-text-fit");var Cr="viewport-y"===B.get("symbol-z-order");const ur=on&&(cn||!O.hasIconData()||Rt),$r=cn&&(on||!O.hasTextData()||Ct),mi=(!O.collisionArrays&&Re&&O.deserializeCollisionBoxes(Re),this.retainedQueryData[O.bucketInstanceId].tileID),Yi=this.terrain?(Zr,po)=>this.terrain.getElevation(mi,Zr,po):null;var So=(Zr,po)=>{if(!m[Zr.crossTileID])if(Ge)this.placements[Zr.crossTileID]=new zs(!1,!1,!1);else{let Ms=!1,ya=!1,Uc=!0,Os=null,Sc={box:null,offscreen:null},mh={box:null,offscreen:null},Od=null,qg=null,_h=0,Zl=0,gu=0;po.textFeatureIndex?_h=po.textFeatureIndex:Zr.useRuntimeCollisionCircles&&(_h=Zr.featureIndex),po.verticalTextFeatureIndex&&(Zl=po.verticalTextFeatureIndex);const Lm=po.textBox;if(Lm){var ta=al=>{let Sl=s.WritingMode.horizontal;return O.allowVerticalPlacement&&!al&&this.prevPlacement&&(al=this.prevPlacement.placedOrientations[Zr.crossTileID])&&(this.placedOrientations[Zr.crossTileID]=al,Sl=al,this.markUsedOrientation(O,Sl,Zr)),Sl},zi=(al,Sl)=>{if(O.allowVerticalPlacement&&0<Zr.numVerticalGlyphVertices&&po.verticalTextBox){for(const Fh of O.writingModes)if(Fh===s.WritingMode.vertical?(Sc=Sl(),mh=Sc):Sc=al(),Sc&&Sc.box&&Sc.box.length)break}else Sc=al()};const ol=Zr.textAnchorOffsetStartIndex,yh=Zr.textAnchorOffsetEndIndex;if(yh===ol){const al=(Sl,Fh)=>((Sl=this.collisionIndex.placeCollisionBox(Sl,Mt,ke,ae,ft.predicate,Yi))&&Sl.box&&Sl.box.length&&(this.markUsedOrientation(O,Fh,Zr),this.placedOrientations[Zr.crossTileID]=Fh),Sl);zi(()=>al(Lm,s.WritingMode.horizontal),()=>{var Sl=po.verticalTextBox;return O.allowVerticalPlacement&&0<Zr.numVerticalGlyphVertices&&Sl?al(Sl,s.WritingMode.vertical):{box:null,offscreen:null}}),ta(Sc&&Sc.box&&Sc.box.length)}else{let al=s.TextAnchorEnum[null==(gs=null==(gs=this.prevPlacement)?void 0:gs.variableOffsets[Zr.crossTileID])?void 0:gs.anchor];const Sl=(Jl,Pd,Tv)=>{var Fm=Jl.x2-Jl.x1,Qu=Jl.y2-Jl.y1,Hm=Zr.textBoxScale,Av=Kn&&"never"===sn?Pd:null;let Nl={box:[],offscreen:!1},Du="never"===Mt?1:2,Um="never";al&&Du++;for(let tE=0;tE<Du;tE++){for(let Iv=ol;Iv<yh;Iv++){var Bm=O.textAnchorOffsets.get(Iv);if((!al||Bm.textAnchor===al)&&(Bm=this.attemptAnchorPlacement(Bm,Jl,Fm,Qu,Hm,Wn,Qn,ke,ae,ft,Um,Zr,O,Tv,Av,Yi))&&(Nl=Bm.placedGlyphBoxes)&&Nl.box&&Nl.box.length)return Ms=!0,Os=Bm.shift,Nl}al?al=null:Um=Mt}return Nl};zi(()=>Sl(Lm,po.iconBox,s.WritingMode.horizontal),()=>{var Jl=po.verticalTextBox;return O.allowVerticalPlacement&&!(Sc&&Sc.box&&Sc.box.length)&&0<Zr.numVerticalGlyphVertices&&Jl?Sl(Jl,po.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),Sc&&(Ms=Sc.box,Uc=Sc.offscreen);var gs=ta(Sc&&Sc.box);!Ms&&this.prevPlacement&&(zi=this.prevPlacement.variableOffsets[Zr.crossTileID])&&(this.variableOffsets[Zr.crossTileID]=zi,this.markUsedJustification(O,zi.anchor,Zr,gs))}}Ms=(ta=Sc)&&ta.box&&0<ta.box.length,Uc=ta&&ta.offscreen,Zr.useRuntimeCollisionCircles&&(zi=O.text.placedSymbolArray.get(Zr.centerJustifiedTextSymbolIndex),gs=s.evaluateSizeForFeature(O.textSizeData,qe,zi),cs=B.get("text-padding"),(Od=this.collisionIndex.placeCollisionCircles(Mt,zi,O.lineVertexArray,O.glyphOffsetArray,gs,ae,he,Ee,E,Qn,ft.predicate,Hc=Zr.collisionCircleDiameter,cs,Yi)).circles.length&&Od.collisionDetected&&!E&&s.warnOnce("Collisions detected, but collision boxes are not shown"),Ms=on||0<Od.circles.length&&!Od.collisionDetected,Uc=Uc&&Od.offscreen),po.iconFeatureIndex&&(gu=po.iconFeatureIndex),po.iconBox&&(ya=0<(qg=(zi=ol=>(ol=Kn&&Os?Is(ol,Os.x,Os.y,Wn,Qn,this.transform.angle):ol,this.collisionIndex.placeCollisionBox(ol,sn,ke,ae,ft.predicate,Yi)))(mh&&mh.box&&mh.box.length&&po.verticalIconBox?po.verticalIconBox:po.iconBox)).box.length,Uc=Uc&&qg.offscreen);var Hc=Rt||0===Zr.numIconVertices;if((gs=Ct||0===Zr.numHorizontalGlyphVertices&&0===Zr.numVerticalGlyphVertices)||Hc?Hc?gs||(ya=ya&&Ms):Ms=ya&&Ms:ya=Ms=ya&&Ms,Ms&&ta&&ta.box&&this.collisionIndex.insertCollisionBox(ta.box,Mt,B.get("text-ignore-placement"),O.bucketInstanceId,mh&&mh.box&&Zl?Zl:_h,ft.ID),ya&&qg&&this.collisionIndex.insertCollisionBox(qg.box,sn,B.get("icon-ignore-placement"),O.bucketInstanceId,gu,ft.ID),Od&&(Ms&&this.collisionIndex.insertCollisionCircles(Od.circles,Mt,B.get("text-ignore-placement"),O.bucketInstanceId,_h,ft.ID),E)){var cs=O.bucketInstanceId;let ol=this.collisionCircleArrays[cs];void 0===ol&&(ol=this.collisionCircleArrays[cs]=new Da);for(let yh=0;yh<Od.circles.length;yh+=4)ol.circles.push(Od.circles[yh+0]),ol.circles.push(Od.circles[yh+1]),ol.circles.push(Od.circles[yh+2]),ol.circles.push(Od.collisionDetected?1:0)}if(0===Zr.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===O.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Zr.crossTileID]=new zs(Ms||ur,ya||$r,Uc||O.justReloaded),m[Zr.crossTileID]=!0}};if(Cr){if(0!==c.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");var wo=O.getSortedSymbolIndexes(this.transform.angle);for(let Zr=wo.length-1;0<=Zr;--Zr){var Xi=wo[Zr];So(O.symbolInstances.get(Xi),O.collisionArrays[Xi])}}else for(let Zr=c.symbolInstanceStart;Zr<c.symbolInstanceEnd;Zr++)So(O.symbolInstances.get(Zr),O.collisionArrays[Zr]);E&&O.bucketInstanceId in this.collisionCircleArrays&&(s.invert((cn=this.collisionCircleArrays[O.bucketInstanceId]).invProjMatrix,ae),cn.viewportMatrix=this.collisionIndex.getViewportMatrix()),O.justReloaded=!1}markUsedJustification(c,m,E,O){let ae;ae=O===s.WritingMode.vertical?E.verticalPlacedTextSymbolIndex:{left:E.leftJustifiedTextSymbolIndex,center:E.centerJustifiedTextSymbolIndex,right:E.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(m)];for(const he of[E.leftJustifiedTextSymbolIndex,E.centerJustifiedTextSymbolIndex,E.rightJustifiedTextSymbolIndex,E.verticalPlacedTextSymbolIndex])0<=he&&(c.text.placedSymbolArray.get(he).crossTileID=0<=ae&&he!==ae?0:E.crossTileID)}markUsedOrientation(c,B,E){var O=B===s.WritingMode.horizontal||B===s.WritingMode.horizontalOnly?B:0;B=B===s.WritingMode.vertical?B:0;for(const ae of[E.leftJustifiedTextSymbolIndex,E.centerJustifiedTextSymbolIndex,E.rightJustifiedTextSymbolIndex])c.text.placedSymbolArray.get(ae).placedOrientation=O;E.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(E.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;var m=this.prevPlacement;let E=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;var O=m?m.symbolFadeChange(c):1,B=m?m.opacities:{},ae=m?m.variableOffsets:{},he=m?m.placedOrientations:{};for(const qe in this.placements){var Ee=this.placements[qe],ke=B[qe];E=ke?(this.opacities[qe]=new As(ke,O,Ee.text,Ee.icon),E||Ee.text!==ke.text.placed||Ee.icon!==ke.icon.placed):(this.opacities[qe]=new As(null,O,Ee.text,Ee.icon,Ee.skipFade),E||Ee.text||Ee.icon)}for(const qe in B){var Ge,Re=B[qe];this.opacities[qe]||(Ge=new As(Re,O,!1,!1)).isHidden()||(this.opacities[qe]=Ge,E=E||Re.text.placed||Re.icon.placed)}for(const qe in ae)this.variableOffsets[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.variableOffsets[qe]=ae[qe]);for(const qe in he)this.placedOrientations[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.placedOrientations[qe]=he[qe]);if(m&&void 0===m.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");E?this.lastPlacementChangeTime=c:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:c)}updateLayerOpacities(c,m){var E={};for(const B of m){var O=B.getBucket(c);O&&B.latestFeatureIndex&&c.id===O.layerIds[0]&&this.updateBucketOpacities(O,E,B.collisionBoxArray)}}updateBucketOpacities(c,m,E){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();var O=c.layers[0],B=O.layout,ae=new As(null,0,!1,!1,!0),he=B.get("text-allow-overlap"),Ee=B.get("icon-allow-overlap"),ke=O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge="map"===B.get("text-rotation-alignment"),Re="map"===B.get("text-pitch-alignment"),qe="none"!==B.get("icon-text-fit"),ft=new As(null,0,he&&(Ee||!c.hasIconData()||B.get("icon-optional")),Ee&&(he||!c.hasTextData()||B.get("text-optional")),!0),Ct=(!c.collisionArrays&&E&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(E),(ur,$r,mi)=>{for(let Yi=0;Yi<$r/4;Yi++)ur.opacityVertexArray.emplaceBack(mi);ur.hasVisibleVertices=ur.hasVisibleVertices||mi!==T1});for(let ur=0;ur<c.symbolInstances.length;ur++){var Rt=c.symbolInstances.get(ur),{numHorizontalGlyphVertices:Mt,numVerticalGlyphVertices:on,crossTileID:sn}=Rt;let $r=this.opacities[sn];(cn=m[sn])?$r=ae:$r||($r=ft,this.opacities[sn]=$r),m[sn]=!0;var cn=0<Rt.numIconVertices,Wn=this.placedOrientations[Rt.crossTileID];const mi=Wn===s.WritingMode.vertical;var Qn=Wn===s.WritingMode.horizontal||Wn===s.WritingMode.horizontalOnly;if(0<Mt||0<on){var Cr=Fc($r.text),Mt=(Ct(c.text,Mt,Kn=mi?T1:Cr),Qn?T1:Cr);Ct(c.text,on,Mt);const So=$r.text.isHidden();var Kn;[Rt.rightJustifiedTextSymbolIndex,Rt.centerJustifiedTextSymbolIndex,Rt.leftJustifiedTextSymbolIndex].forEach(wo=>{0<=wo&&(c.text.placedSymbolArray.get(wo).hidden=So||mi?1:0)}),0<=Rt.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(Rt.verticalPlacedTextSymbolIndex).hidden=So||Qn?1:0),(Kn=this.variableOffsets[Rt.crossTileID])&&this.markUsedJustification(c,Kn.anchor,Rt,Wn),(Cr=this.placedOrientations[Rt.crossTileID])&&(this.markUsedJustification(c,"left",Rt,Cr),this.markUsedOrientation(c,Cr,Rt))}if(cn&&(on=Fc($r.icon),Mt=!(qe&&Rt.verticalPlacedIconSymbolIndex&&mi),0<=Rt.placedIconSymbolIndex&&(Ct(c.icon,Rt.numIconVertices,Kn=Mt?on:T1),c.icon.placedSymbolArray.get(Rt.placedIconSymbolIndex).hidden=$r.icon.isHidden()),0<=Rt.verticalPlacedIconSymbolIndex)&&(Ct(c.icon,Rt.numVerticalIconVertices,Wn=Mt?T1:on),c.icon.placedSymbolArray.get(Rt.verticalPlacedIconSymbolIndex).hidden=$r.icon.isHidden()),(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&(Cr=c.collisionArrays[ur])){let Yi=new s.Point(0,0);if(Cr.textBox||Cr.verticalTextBox){let So=!0;ke&&((cn=this.variableOffsets[sn])?(Yi=Mo(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textBoxScale),Ge&&Yi._rotate(Re?this.transform.angle:-this.transform.angle)):So=!1),Cr.textBox&&Md(c.textCollisionBox.collisionVertexArray,$r.text.placed,!So||mi,Yi.x,Yi.y),Cr.verticalTextBox&&Md(c.textCollisionBox.collisionVertexArray,$r.text.placed,!So||Qn,Yi.x,Yi.y)}Mt=!(Qn||!Cr.verticalIconBox),Cr.iconBox&&Md(c.iconCollisionBox.collisionVertexArray,$r.icon.placed,Mt,qe?Yi.x:0,qe?Yi.y:0),Cr.verticalIconBox&&Md(c.iconCollisionBox.collisionVertexArray,$r.icon.placed,!Mt,qe?Yi.x:0,qe?Yi.y:0)}}if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);c.bucketInstanceId in this.collisionCircleArrays&&(c.placementInvProjMatrix=(O=this.collisionCircleArrays[c.bucketInstanceId]).invProjMatrix,c.placementViewportMatrix=O.viewportMatrix,c.collisionCircleArray=O.circles,delete this.collisionCircleArrays[c.bucketInstanceId])}symbolFadeChange(c){return 0===this.fadeDuration?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,m){var E=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*E>c}setStale(){this.stale=!0}}function Md(x,c,m,E,O){x.emplaceBack(c?1:0,m?1:0,E||0,O||0),x.emplaceBack(c?1:0,m?1:0,E||0,O||0),x.emplaceBack(c?1:0,m?1:0,E||0,O||0),x.emplaceBack(c?1:0,m?1:0,E||0,O||0)}const qp=Math.pow(2,25),Xd=Math.pow(2,24),Kp=Math.pow(2,17),iP=Math.pow(2,16),jb=Math.pow(2,9),rF=Math.pow(2,8),wz=Math.pow(2,1);function Fc(x){var c;return 0!==x.opacity||x.placed?1===x.opacity&&x.placed?4294967295:(c=x.placed?1:0,(x=Math.floor(127*x.opacity))*qp+c*Xd+x*Kp+c*iP+x*jb+c*rF+x*wz+c):0}const T1=0;class ok{constructor(c){this._sortAcrossTiles="viewport-y"!==c.layout.get("symbol-z-order")&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,m,E,O,B){for(var ae=this._bucketParts;this._currentTileIndex<c.length;)if(m.getBucketParts(ae,O,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ae.sort((ke,Ge)=>ke.sortKey-Ge.sortKey));this._currentPartIndex<ae.length;)if(m.placeLayerBucketPart(ae[this._currentPartIndex],this._seenCrossTileIDs,E),this._currentPartIndex++,B())return!0;return!1}}class Cf{constructor(c,m,E,O,B,ae,he,Ee){this.placement=new Nu(c,m,ae,he,Ee),this._currentPlacementIndex=E.length-1,this._forceFullPlacement=O,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(c,m,E){const O=k.now();for(var B=()=>!this._forceFullPlacement&&2<k.now()-O;0<=this._currentPlacementIndex;){var ae=m[c[this._currentPlacementIndex]],he=this.placement.collisionIndex.transform.zoom;if("symbol"===ae.type&&(!ae.minzoom||ae.minzoom<=he)&&(!ae.maxzoom||ae.maxzoom>he)){if(this._inProgressLayer||(this._inProgressLayer=new ok(ae)),this._inProgressLayer.continuePlacement(E[ae.source],this.placement,this._showCollisionBoxes,ae,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const gh=512/s.EXTENT/2;class Tz{constructor(c,m,E){this.tileID=c,this.bucketInstanceId=E,this._symbolsByKey={};var O,B,ae=new Map;for(let Ct=0;Ct<m.length;Ct++){var he=m.get(Ct),Ee=he.key,ke=ae.get(Ee);ke?ke.push(he):ae.set(Ee,[he])}for([O,B]of ae){var Ge={positions:B.map(Ct=>({x:Math.floor(Ct.anchorX*gh),y:Math.floor(Ct.anchorY*gh)})),crossTileIDs:B.map(Ct=>Ct.crossTileID)};if(128<Ge.positions.length){var Re,qe,ft=new s.KDBush(Ge.positions.length,16,Uint16Array);for({x:Re,y:qe}of Ge.positions)ft.add(Re,qe);ft.finish(),delete Ge.positions,Ge.index=ft}this._symbolsByKey[O]=Ge}}getScaledCoordinates(ke,he){var{x:E,y:O,z:B}=this.tileID.canonical,{x:he,y:Ee,z:ae}=he.canonical,B=(ae-=B,gh/Math.pow(2,ae)),ae=(he*s.EXTENT+ke.anchorX)*B,Ee=(he=(Ee*s.EXTENT+ke.anchorY)*B,E*s.EXTENT*gh);return ke=O*s.EXTENT*gh,{x:Math.floor(ae-Ee),y:Math.floor(he-ke)}}findMatches(c,m,E){var O=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let Re=0;Re<c.length;Re++){var B=c.get(Re);if(!B.crossTileID){var ae=this._symbolsByKey[B.key];if(ae){var he=this.getScaledCoordinates(B,m);if(ae.index)for(const qe of ae.index.range(he.x-O,he.y-O,he.x+O,he.y+O).sort()){var Ee=ae.crossTileIDs[qe];if(!E[Ee]){E[Ee]=!0,B.crossTileID=Ee;break}}else if(ae.positions)for(let qe=0;qe<ae.positions.length;qe++){var ke=ae.positions[qe],Ge=ae.crossTileIDs[qe];if(Math.abs(ke.x-he.x)<=O&&Math.abs(ke.y-he.y)<=O&&!E[Ge]){E[Ge]=!0,B.crossTileID=Ge;break}}}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:c})=>c)}}class ng{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class rg{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){var m=Math.round((c-this.lng)/360);if(0!==m)for(const ae in this.indexes){var E=this.indexes[ae],O={};for(const he in E){var B=E[he];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+m),O[B.tileID.key]=B}this.indexes[ae]=O}this.lng=c}addBucket(c,m,E){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let ke=0;ke<m.symbolInstances.length;ke++)m.symbolInstances.get(ke).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});var O=this.usedCrossTileIDs[c.overscaledZ];for(const ke in this.indexes){var B=this.indexes[ke];if(Number(ke)>c.overscaledZ)for(const Ge in B){var ae=B[Ge];ae.tileID.isChildOf(c)&&ae.findMatches(m.symbolInstances,c,O)}else{var he=B[c.scaledTo(Number(ke)).key];he&&he.findMatches(m.symbolInstances,c,O)}}for(let ke=0;ke<m.symbolInstances.length;ke++){var Ee=m.symbolInstances.get(ke);Ee.crossTileID||(Ee.crossTileID=E.generate(),O[Ee.crossTileID]=!0)}return void 0===this.indexes[c.overscaledZ]&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Tz(c,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(c,m){for(const E of m.getCrossTileIDsLists())for(const O of E)delete this.usedCrossTileIDs[c][O]}removeStaleBuckets(c){let m=!1;for(const O in this.indexes){var E=this.indexes[O];for(const B in E)c[E[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(O,E[B]),delete E[B],m=!0)}return m}}class ak{constructor(){this.layerIndexes={},this.crossTileIDs=new ng,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,m,E){let O=this.layerIndexes[c.id],B=!1;var ae={};(O=void 0===O?this.layerIndexes[c.id]=new rg:O).handleWrapJump(E);for(const Ee of m){var he=Ee.getBucket(c);he&&c.id===he.layerIds[0]&&(he.bucketInstanceId||(he.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(Ee.tileID,he,this.crossTileIDs)&&(B=!0),ae[he.bucketInstanceId]=!0)}return!!O.removeStaleBuckets(ae)||B}pruneUnusedLayers(c){const m={};c.forEach(E=>{m[E]=!0});for(const E in this.layerIndexes)m[E]||delete this.layerIndexes[E]}}const A1=(x,c)=>s.emitValidationErrors(x,c&&c.filter(m=>"source.canvas"!==m.identifier)),ud=s.emptyStyle();class I1 extends s.Evented{constructor(c,m={}){super(),this._rtlPluginLoaded=()=>{for(const O in this.sourceCaches){var E=this.sourceCaches[O].getSource().type;"vector"!==E&&"geojson"!==E||this.sourceCaches[O].reload()}},this.map=c,this.dispatcher=new Zi(Qs(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",(E,O)=>this.getGlyphs(E,O)),this.dispatcher.registerMessageHandler("GI",(E,O)=>this.getImages(E,O)),this.imageManager=new Er,this.imageManager.setEventedParent(this),this.glyphManager=new hn(c._requestManager,m.localIdeographFontFamily),this.lineAtlas=new pi(256,512),this.crossTileSymbolIndex=new ak,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.getReferrer()),vi().on(Wt,this._rtlPluginLoaded),this.on("data",E=>{if("source"===E.dataType&&"metadata"===E.sourceDataType&&(E=this.sourceCaches[E.sourceId])){var O=E.getSource();if(O&&O.vectorLayerIds)for(const ae in this._layers){var B=this._layers[ae];B.source===O.id&&this._validateLayer(B)}}})}loadURL(c,m={},E){this.fire(new s.Event("dataloading",{dataType:"style"})),m.validate="boolean"!=typeof m.validate||m.validate,c=this.map._requestManager.transformRequest(c,"Style"),this._loadStyleRequest=new AbortController,s.getJSON(c,this._loadStyleRequest).then(O=>{this._loadStyleRequest=null,this._load(O.data,m,E)}).catch(O=>{this._loadStyleRequest=null,O&&this.fire(new s.ErrorEvent(O))})}loadJSON(c,m={},E){this.fire(new s.Event("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,m.validate=!1!==m.validate,this._load(c,m,E)}).catch(()=>{})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(ud,{validate:!1})}_load(c,m,E){var O=m.transformStyle?m.transformStyle(E,c):c;if(!m.validate||!A1(this,s.validateStyle(O))){this._loaded=!0;for(const B in(this.stylesheet=O).sources)this.addSource(B,O.sources[B],{validate:!1});O.sprite?this._loadSprite(O.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(O.glyphs),this._createLayers(),this.light=new Un(this.stylesheet.light),this.map.setTerrain(null!=(E=this.stylesheet.terrain)?E:null),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}}_createLayers(){var c=s.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("SL",c),this._order=c.map(E=>E.id),this._layers={},this._serializedLayers=null;for(const E of c){var m=s.createStyleLayer(E);m.setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=m}}_loadSprite(c,m=!1,E=void 0){let O;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function zn(x,c,m,E){return s.__awaiter(this,void 0,void 0,function*(){var O,B,ae=tn(x),he=1<m?"@2x":"",Ee={},ke={};for({id:O,url:B}of ae){var Ge=c.transformRequest(c.normalizeSpriteURL(B,he,".json"),"SpriteJSON");Ee[O]=s.getJSON(Ge,E),Ge=c.transformRequest(c.normalizeSpriteURL(B,he,".png"),"SpriteImage"),ke[O]=f.getImage(Ge,E)}return yield Promise.all([...Object.values(Ee),...Object.values(ke)]),function(Re,qe){return s.__awaiter(this,void 0,void 0,function*(){var ft={};for(const mi in Re){ft[mi]={};var Ct=k.getImageCanvasContext((yield qe[mi]).data),Rt=(yield Re[mi]).data;for(const Yi in Rt){var{width:Mt,height:on,x:sn,y:cn,sdf:Wn,pixelRatio:Qn,stretchX:Kn,stretchY:Cr,content:ur,contentMatch:$r}=Rt[Yi];ft[mi][Yi]={data:null,pixelRatio:Qn,sdf:Wn,stretchX:Kn,stretchY:Cr,content:ur,spriteData:{width:Mt,height:on,x:sn,y:cn,context:Ct},contentMatch:$r}}}return ft})}(Ee,ke)})}(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(B=>{if(this._spriteRequest=null,B)for(const he in B){this._spritesImagesIds[he]=[];for(const Ee of this._spritesImagesIds[he]?this._spritesImagesIds[he].filter(ke=>!(ke in B)):[])this.imageManager.removeImage(Ee),this._changedImages[Ee]=!0;for(const Ee in B[he]){var ae="default"===he?Ee:he+":"+Ee;this._spritesImagesIds[he].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,B[he][Ee],!1):this.imageManager.addImage(ae,B[he][Ee]),m&&(this._changedImages[ae]=!0)}}}).catch(B=>{this._spriteRequest=null,O=B,this.fire(new s.ErrorEvent(O))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.Event("data",{dataType:"style"})),E&&E(O)})}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}_validateLayer(c){var m,E=this.sourceCaches[c.source];E&&(m=c.sourceLayer)&&("geojson"===(E=E.getSource()).type||E.vectorLayerIds&&-1===E.vectorLayerIds.indexOf(m))&&this.fire(new s.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${E.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c){var m=this._serializedAllLayers();if(!c||0===c.length)return Object.values(m);var E=[];for(const O of c)m[O]&&E.push(m[O]);return E}_serializedAllLayers(){var c=this._serializedLayers;if(!c){c=this._serializedLayers={};for(const E of Object.keys(this._layers)){var m=this._layers[E];"custom"!==m.type&&(c[E]=m.serialize())}}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(this._loaded){var m=this._changed;if(this._changed){var E=Object.keys(this._updatedLayers),O=Object.keys(this._removedLayers);(E.length||O.length)&&this._updateWorkerLayers(E,O);for(const Ge in this._updatedSources){var B=this._updatedSources[Ge];if("reload"===B)this._reloadSource(Ge);else{if("clear"!==B)throw new Error("Invalid action "+B);this._clearSource(Ge)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const Ge in this._updatedPaintProps)this._layers[Ge].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}var ae={};for(const Ge in this.sourceCaches){var he=this.sourceCaches[Ge];ae[Ge]=he.used,he.used=!1}for(const Ge of this._order){var Ee=this._layers[Ge];Ee.recalculate(c,this._availableImages),!Ee.isHidden(c.zoom)&&Ee.source&&(this.sourceCaches[Ee.source].used=!0)}for(const Ge in ae){var ke=this.sourceCaches[Ge];ae[Ge]!==ke.used&&ke.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ge}))}this.light.recalculate(c),this.z=c.zoom,m&&this.fire(new s.Event("data",{dataType:"style"}))}}_updateTilesForChangedImages(){var c=Object.keys(this._changedImages);if(c.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,m){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,O={}){this._checkLoaded();var E=this.serialize();if(c=O.transformStyle?O.transformStyle(E,c):c,(O=null==(O=O.validate)||O)&&A1(this,s.validateStyle(c)))return!1;if((c=s.clone$1(c)).layers=s.derefLayers(c.layers),O=s.diffStyles(E,c),0<(E=this._getOperationsToPerform(O)).unimplemented.length)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(0===E.operations.length)return!1;for(const B of E.operations)B();return this.stylesheet=c,!(this._serializedLayers=null)}_getOperationsToPerform(c){var m=[],E=[];for(const O of c)switch(O.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":m.push(()=>this.addLayer.apply(this,O.args));break;case"removeLayer":m.push(()=>this.removeLayer.apply(this,O.args));break;case"setPaintProperty":m.push(()=>this.setPaintProperty.apply(this,O.args));break;case"setLayoutProperty":m.push(()=>this.setLayoutProperty.apply(this,O.args));break;case"setFilter":m.push(()=>this.setFilter.apply(this,O.args));break;case"addSource":m.push(()=>this.addSource.apply(this,O.args));break;case"removeSource":m.push(()=>this.removeSource.apply(this,O.args));break;case"setLayerZoomRange":m.push(()=>this.setLayerZoomRange.apply(this,O.args));break;case"setLight":m.push(()=>this.setLight.apply(this,O.args));break;case"setGeoJSONSourceData":m.push(()=>this.setGeoJSONSourceData.apply(this,O.args));break;case"setGlyphs":m.push(()=>this.setGlyphs.apply(this,O.args));break;case"setSprite":m.push(()=>this.setSprite.apply(this,O.args));break;case"setTerrain":m.push(()=>this.map.setTerrain.apply(this,O.args));break;case"setTransition":m.push(()=>{});break;default:E.push(O.command)}return{operations:m,unimplemented:E}}addImage(c,m){if(this.getImage(c))return this.fire(new s.ErrorEvent(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,m),this._afterImageUpdated(c)}updateImage(c,m){this.imageManager.updateImage(c,m)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new s.ErrorEvent(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,m,E={}){if(this._checkLoaded(),void 0!==this.sourceCaches[c])throw new Error(`Source "${c}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(!(0<=["vector","raster","geojson","video","image"].indexOf(m.type)&&this._validate(s.validateStyle.source,"sources."+c,m,null,E))){this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const B=this.sourceCaches[c]=new Hr(c,m,this.dispatcher);B.style=this,B.setEventedParent(this,()=>({isSourceLoaded:B.loaded(),source:B.serialize(),sourceId:c})),B.onAdd(this.map),this._changed=!0}}removeSource(c){if(this._checkLoaded(),void 0===this.sourceCaches[c])throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===c)return this.fire(new s.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${E}" is using it.`)));var m=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],m.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,m){if(this._checkLoaded(),void 0===this.sourceCaches[c])throw new Error("There is no source with this ID="+c);if("geojson"!==(c=this.sourceCaches[c].getSource()).type)throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(m),this._changed=!0}getSource(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()}addLayer(c,m,E={}){this._checkLoaded();var O=c.id;if(this.getLayer(O))this.fire(new s.ErrorEvent(new Error(`Layer "${O}" already exists on this map.`)));else{let B;if("custom"===c.type){if(A1(this,s.validateCustomStyleLayer(c)))return;B=s.createStyleLayer(c)}else{if("source"in c&&"object"==typeof c.source&&(this.addSource(O,c.source),c=s.clone$1(c),c=s.extend(c,{source:O})),this._validate(s.validateStyle.layer,"layers."+O,c,{arrayIndex:-1},E))return;B=s.createStyleLayer(c),this._validateLayer(B),B.setEventedParent(this,{layer:{id:O}})}E=m?this._order.indexOf(m):this._order.length,m&&-1===E?this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${O}" before non-existing layer "${m}".`))):(this._order.splice(E,0,O),this._layerOrderChanged=!0,this._layers[O]=B,this._removedLayers[O]&&B.source&&"custom"!==B.type&&(c=this._removedLayers[O],delete this._removedLayers[O],c.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())),this._updateLayer(B),B.onAdd&&B.onAdd(this.map))}}moveLayer(c,m){var E;this._checkLoaded(),this._changed=!0,this._layers[c]?c!==m&&(E=this._order.indexOf(c),this._order.splice(E,1),E=m?this._order.indexOf(m):this._order.length,m&&-1===E?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${c}" before non-existing layer "${m}".`))):(this._order.splice(E,0,c),this._layerOrderChanged=!0)):this.fire(new s.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)))}removeLayer(c){this._checkLoaded();var m,E=this._layers[c];E?(E.setEventedParent(null),m=this._order.indexOf(c),this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=E,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],E.onRemove&&E.onRemove(this.map)):this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${c}".`)))}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,m,E){this._checkLoaded();var O=this.getLayer(c);O?O.minzoom===m&&O.maxzoom===E||(null!=m&&(O.minzoom=m),null!=E&&(O.maxzoom=E),this._updateLayer(O)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,m,E={}){this._checkLoaded();var O=this.getLayer(c);O?s.deepEqual(O.filter,m)||(null==m?(O.filter=void 0,this._updateLayer(O)):this._validate(s.validateStyle.filter,`layers.${O.id}.filter`,m,null,E)||(O.filter=s.clone$1(m),this._updateLayer(O))):this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return s.clone$1(this.getLayer(c).filter)}setLayoutProperty(c,m,E,O={}){this._checkLoaded();var B=this.getLayer(c);B?s.deepEqual(B.getLayoutProperty(m),E)||(B.setLayoutProperty(m,E,O),this._updateLayer(B)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,m){var E=this.getLayer(c);if(E)return E.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,m,E,O={}){this._checkLoaded();var B=this.getLayer(c);B?s.deepEqual(B.getPaintProperty(m),E)||(B.setPaintProperty(m,E,O)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${c}".`)))}getPaintProperty(c,m){return this.getLayer(c).getPaintProperty(m)}setFeatureState(c,m){this._checkLoaded();var E=c.source,O=c.sourceLayer,B=this.sourceCaches[E];void 0===B?this.fire(new s.ErrorEvent(new Error(`The source '${E}' does not exist in the map's style.`))):"geojson"===(E=B.getSource().type)&&O?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==E||O?(void 0===c.id&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),B.setFeatureState(O,c.id,m)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,m){this._checkLoaded();var E,O=c.source,B=this.sourceCaches[O];void 0===B?this.fire(new s.ErrorEvent(new Error(`The source '${O}' does not exist in the map's style.`))):(E="vector"===(O=B.getSource().type)?c.sourceLayer:void 0,"vector"!==O||E?m&&"string"!=typeof c.id&&"number"!=typeof c.id?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):B.removeFeatureState(E,c.id,m):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))))}getFeatureState(c){this._checkLoaded();var m=c.source,E=c.sourceLayer,O=this.sourceCaches[m];if(void 0===O)this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));else{if("vector"!==O.getSource().type||E)return void 0===c.id&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),O.getFeatureState(E,c.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){var c,m,E,O;if(this._loaded)return c=s.mapObject(this.sourceCaches,B=>B.serialize()),m=this._serializeByIds(this._order),E=this.map.getTerrain()||void 0,s.filterObject({version:(O=this.stylesheet).version,name:O.name,metadata:O.metadata,light:O.light,center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,sprite:O.sprite,glyphs:O.glyphs,transition:O.transition,sources:c,layers:m,terrain:E},B=>void 0!==B)}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&"raster"!==this.sourceCaches[c.source].getSource().type&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){var m=Re=>"fill-extrusion"===this._layers[Re].type,E={},O=[];for(let Re=this._order.length-1;0<=Re;Re--){var B=this._order[Re];if(m(B)){E[B]=Re;for(const qe of c){var ae=qe[B];if(ae)for(const ft of ae)O.push(ft)}}}O.sort((Re,qe)=>qe.intersectionZ-Re.intersectionZ);var he=[];for(let Re=this._order.length-1;0<=Re;Re--){var Ee=this._order[Re];if(m(Ee))for(let qe=O.length-1;0<=qe;qe--){var ke=O[qe].feature;if(E[ke.layer.id]<Re)break;he.push(ke),O.pop()}else for(const qe of c){var Ge=qe[Ee];if(Ge)for(const ft of Ge)he.push(ft.feature)}}return he}queryRenderedFeatures(c,m,E){m&&m.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",m.filter,null,m);var O={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Ee of m.layers){var B=this._layers[Ee];if(!B)return this.fire(new s.ErrorEvent(new Error(`The layer '${Ee}' does not exist in the map's style and cannot be queried for features.`))),[];O[B.source]=!0}}var ae=[],he=(m.availableImages=this._availableImages,this._serializedAllLayers());for(const Ee in this.sourceCaches)m.layers&&!O[Ee]||ae.push(Vi(this.sourceCaches[Ee],this._layers,he,c,m,E));return this.placement&&ae.push(function Sn(x,c,m,E,O,B,ae){var he={},Ee=B.queryRenderedSymbols(E),ke=[];for(const ft of Object.keys(Ee).map(Number))ke.push(ae[ft]);ke.sort(Si);for(const ft of ke){var Ge=ft.featureIndex.lookupSymbolFeatures(Ee[ft.bucketInstanceId],c,ft.bucketIndex,ft.sourceLayerIndex,O.filter,O.layers,O.availableImages,x);for(const Ct in Ge){var Re=he[Ct]=he[Ct]||[],qe=Ge[Ct];qe.sort((Rt,Mt)=>{var on,sn=ft.featureSortOrder;return sn?(on=sn.indexOf(Rt.featureIndex),sn.indexOf(Mt.featureIndex)-on):Mt.featureIndex-Rt.featureIndex});for(const Rt of qe)Re.push(Rt)}}for(const ft in he)he[ft].forEach(Rt=>{var Mt=m[(Mt=x[ft]).source].getFeatureState((Rt=Rt.feature).layer["source-layer"],Rt.id);Rt.source=Rt.layer.source,Rt.layer["source-layer"]&&(Rt.sourceLayer=Rt.layer["source-layer"]),Rt.state=Mt});return he}(this._layers,he,this.sourceCaches,c,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ae)}querySourceFeatures(c,m){return m&&m.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",m.filter,null,m),(c=this.sourceCaches[c])?function bi(x,c){var m=x.getRenderableIds().map(he=>x.getTileByID(he)),E=[],O={};for(let he=0;he<m.length;he++){var B=m[he],ae=B.tileID.canonical.key;O[ae]||(O[ae]=!0,B.querySourceFeatures(E,c))}return E}(c,m):[]}getLight(){return this.light.getLight()}setLight(c,m={}){this._checkLoaded();var E,O=this.light.getLight();let B=!1;for(const ae in c)if(!s.deepEqual(c[ae],O[ae])){B=!0;break}B&&(E={now:k.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(c,m),this.light.updateTransitions(E))}_validate(c,m,E,O,B={}){return(!B||!1!==B.validate)&&A1(this,c.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:E,styleSpec:s.v8Spec},O)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),vi().off(Wt,this._rtlPluginLoaded);for(const E in this._layers)this._layers[E].setEventedParent(null);for(const E in this.sourceCaches){var m=this.sourceCaches[E];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.sourceCaches[c].clearTiles()}_reloadSource(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()}_updateSources(c){for(const m in this.sourceCaches)this.sourceCaches[m].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.sourceCaches)this._reloadSource(c)}_updatePlacement(c,m,E,O,B=!1){let ae=!1,he=!1;var Ee={};for(const Re of this._order){var ke=this._layers[Re];if("symbol"===ke.type){if(!Ee[ke.source]){const qe=this.sourceCaches[ke.source];Ee[ke.source]=qe.getRenderableIds(!0).map(ft=>qe.getTileByID(ft)).sort((ft,Ct)=>Ct.tileID.overscaledZ-ft.tileID.overscaledZ||(ft.tileID.isLessThan(Ct.tileID)?-1:1))}ke=this.crossTileSymbolIndex.addLayer(ke,Ee[ke.source],c.center.lng),ae=ae||ke}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||0===E)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.now(),c.zoom))&&(this.pauseablePlacement=new Cf(c,this.map.terrain,this._order,B,m,E,O,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.now()),he=!0),ae&&this.pauseablePlacement.placement.setStale()),he||ae)for(const Re of this._order){var Ge=this._layers[Re];"symbol"===Ge.type&&this.placement.updateLayerOpacities(Ge,Ee[Ge.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.now())}_releaseSymbolFadeTiles(){for(const c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,m){return s.__awaiter(this,void 0,void 0,function*(){var E=yield this.imageManager.getImages(m.icons),O=(this._updateTilesForChangedImages(),this.sourceCaches[m.source]);return O&&O.setDependencies(m.tileID.key,m.type,m.icons),E})}getGlyphs(c,m){return s.__awaiter(this,void 0,void 0,function*(){var E=yield this.glyphManager.getGlyphs(m.stacks),O=this.sourceCaches[m.source];return O&&O.setDependencies(m.tileID.key,m.type,[""]),E})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,m={}){this._checkLoaded(),c&&this._validate(s.validateStyle.glyphs,"glyphs",c,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}addSprite(c,m,E={},O){this._checkLoaded(),c=[{id:c,url:m}],m=[...tn(this.stylesheet.sprite),...c],this._validate(s.validateStyle.sprite,"sprite",m,null,E)||(this.stylesheet.sprite=m,this._loadSprite(c,!0,O))}removeSprite(c){this._checkLoaded();var m=tn(this.stylesheet.sprite);if(m.find(E=>E.id===c)){if(this._spritesImagesIds[c])for(const E of this._spritesImagesIds[c])this.imageManager.removeImage(E),this._changedImages[E]=!0;m.splice(m.findIndex(E=>E.id===c),1),this.stylesheet.sprite=0<m.length?m:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}else this.fire(new s.ErrorEvent(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return tn(this.stylesheet.sprite)}setSprite(c,m={},E){this._checkLoaded(),c&&this._validate(s.validateStyle.sprite,"sprite",c,null,m)||((this.stylesheet.sprite=c)?this._loadSprite(c,!0,E):(this._unloadSprite(),E&&E(null)))}}var X_=s.createLayout([{name:"a_pos",type:"Int16",components:2}]),hc="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Cv={prelude:fs("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:fs("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:fs("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:fs("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:fs("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:fs("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:fs("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:fs("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:fs("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:fs("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:fs("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:fs("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:fs("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:fs("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:fs("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:fs("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:fs("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:fs("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:fs("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:fs("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:fs("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:fs("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:fs("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:fs("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:fs("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:fs("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:fs("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",hc),terrainDepth:fs("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",hc),terrainCoords:fs("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",hc)};function fs(x,c){var m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,E=c.match(/attribute ([\w]+) ([\w]+)/g),O=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=(B=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g))?B.concat(O):O;const ae={};return{fragmentSource:x=x.replace(m,(he,Ee,ke,Ge,Re)=>(ae[Re]=!0,"define"===Ee?`\n#ifndef HAS_UNIFORM_u_${Re}\nvarying ${ke} ${Ge} ${Re};\n#else\nuniform ${ke} ${Ge} u_${Re};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${Re}\n    ${ke} ${Ge} ${Re} = u_${Re};\n#endif\n`)),vertexSource:c=c.replace(m,(he,Ee,ke,Ge,Re)=>{var qe="float"===Ge?"vec2":"vec4",ft=Re.match(/color/)?"color":qe;return ae[Re]?"define"===Ee?`\n#ifndef HAS_UNIFORM_u_${Re}\nuniform lowp float u_${Re}_t;\nattribute ${ke} ${qe} a_${Re};\nvarying ${ke} ${Ge} ${Re};\n#else\nuniform ${ke} ${Ge} u_${Re};\n#endif\n`:"vec4"==ft?`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${Re} = a_${Re};\n#else\n    ${ke} ${Ge} ${Re} = u_${Re};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${Re} = unpack_mix_${ft}(a_${Re}, u_${Re}_t);\n#else\n    ${ke} ${Ge} ${Re} = u_${Re};\n#endif\n`:"define"===Ee?`\n#ifndef HAS_UNIFORM_u_${Re}\nuniform lowp float u_${Re}_t;\nattribute ${ke} ${qe} a_${Re};\n#else\nuniform ${ke} ${Ge} u_${Re};\n#endif\n`:"vec4"==ft?`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${ke} ${Ge} ${Re} = a_${Re};\n#else\n    ${ke} ${Ge} ${Re} = u_${Re};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Re}\n    ${ke} ${Ge} ${Re} = unpack_mix_${ft}(a_${Re}, u_${Re}_t);\n#else\n    ${ke} ${Ge} ${Re} = u_${Re};\n#endif\n`}),staticAttributes:E,staticUniforms:B}}class iF{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,m,E,O,B,ae,he,Ee,ke){this.context=c;let Ge=this.boundPaintVertexBuffers.length!==O.length;for(let Re=0;!Ge&&Re<O.length;Re++)this.boundPaintVertexBuffers[Re]!==O[Re]&&(Ge=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==E||Ge||this.boundIndexBuffer!==B||this.boundVertexOffset!==ae||this.boundDynamicVertexBuffer!==he||this.boundDynamicVertexBuffer2!==Ee||this.boundDynamicVertexBuffer3!==ke?this.freshBind(m,E,O,B,ae,he,Ee,ke):(c.bindVertexArray.set(this.vao),he&&he.bind(),B&&B.dynamicDraw&&B.bind(),Ee&&Ee.bind(),ke&&ke.bind())}freshBind(c,m,E,O,B,ae,he,Ee){var ke=c.numAttributes,Ge=this.context,Re=Ge.gl;this.vao&&this.destroy(),this.vao=Ge.createVertexArray(),Ge.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=E,this.boundIndexBuffer=O,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=ae,this.boundDynamicVertexBuffer2=he,this.boundDynamicVertexBuffer3=Ee,m.enableAttributes(Re,c);for(const qe of E)qe.enableAttributes(Re,c);ae&&ae.enableAttributes(Re,c),he&&he.enableAttributes(Re,c),Ee&&Ee.enableAttributes(Re,c),m.bind(),m.setVertexAttribPointers(Re,c,B);for(const qe of E)qe.bind(),qe.setVertexAttribPointers(Re,c,B);ae&&(ae.bind(),ae.setVertexAttribPointers(Re,c,B)),O&&O.bind(),he&&(he.bind(),he.setVertexAttribPointers(Re,c,B)),Ee&&(Ee.bind(),Ee.setVertexAttribPointers(Re,c,B)),Ge.currentNumAttributes=ke}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function sk(x){var c,m=[];for(let E=0;E<x.length;E++)null!==x[E]&&(c=x[E].split(" "),m.push(c.pop()));return m}class oF{constructor(c,m,E,O,B,ae){var he=c.gl,ke=(this.program=he.createProgram(),sk(m.staticAttributes)),Ge=E?E.getBinderAttributes():[],Ee=ke.concat(Ge),Re=(ke=Cv.prelude.staticUniforms?sk(Cv.prelude.staticUniforms):[],Ge=m.staticUniforms?sk(m.staticUniforms):[],E?E.getBinderUniforms():[]),qe=[];for(const Mt of ke.concat(Ge).concat(Re))qe.indexOf(Mt)<0&&qe.push(Mt);if(ke=E?E.defines():[],B&&ke.push("#define OVERDRAW_INSPECTOR;"),ae&&ke.push("#define TERRAIN3D;"),Ge=ke.concat(Cv.prelude.fragmentSource,m.fragmentSource).join("\n"),Re=ke.concat(Cv.prelude.vertexSource,m.vertexSource).join("\n"),B=he.createShader(he.FRAGMENT_SHADER),he.isContextLost())this.failedToCreate=!0;else{if(he.shaderSource(B,Ge),he.compileShader(B),!he.getShaderParameter(B,he.COMPILE_STATUS))throw new Error("Could not compile fragment shader: "+he.getShaderInfoLog(B));if(he.attachShader(this.program,B),ae=he.createShader(he.VERTEX_SHADER),he.isContextLost())this.failedToCreate=!0;else{if(he.shaderSource(ae,Re),he.compileShader(ae),!he.getShaderParameter(ae,he.COMPILE_STATUS))throw new Error("Could not compile vertex shader: "+he.getShaderInfoLog(ae));he.attachShader(this.program,ae),this.attributes={};var ft={};this.numAttributes=Ee.length;for(let Mt=0;Mt<this.numAttributes;Mt++)Ee[Mt]&&(he.bindAttribLocation(this.program,Mt,Ee[Mt]),this.attributes[Ee[Mt]]=Mt);if(he.linkProgram(this.program),!he.getProgramParameter(this.program,he.LINK_STATUS))throw new Error("Program failed to link: "+he.getProgramInfoLog(this.program));he.deleteShader(ae),he.deleteShader(B);for(let Mt=0;Mt<qe.length;Mt++){var Ct,Rt=qe[Mt];Rt&&!ft[Rt]&&(Ct=he.getUniformLocation(this.program,Rt))&&(ft[Rt]=Ct)}this.fixedUniforms=O(c,ft),this.terrainUniforms=((x,c)=>({u_depth:new s.Uniform1i(x,c.u_depth),u_terrain:new s.Uniform1i(x,c.u_terrain),u_terrain_dim:new s.Uniform1f(x,c.u_terrain_dim),u_terrain_matrix:new s.UniformMatrix4f(x,c.u_terrain_matrix),u_terrain_unpack:new s.Uniform4f(x,c.u_terrain_unpack),u_terrain_exaggeration:new s.Uniform1f(x,c.u_terrain_exaggeration)}))(c,ft),this.binderUniforms=E?E.getUniforms(c,ft):[]}}}draw(c,m,E,O,B,ae,he,Ee,ke,Ge,Re,qe,ft,Ct,Rt,Mt,on,sn){var cn=c.gl;if(!this.failedToCreate){if(c.program.set(this.program),c.setDepthMode(E),c.setStencilMode(O),c.setColorMode(B),c.setCullFace(ae),Ee){c.activeTexture.set(cn.TEXTURE2),cn.bindTexture(cn.TEXTURE_2D,Ee.depthTexture),c.activeTexture.set(cn.TEXTURE3),cn.bindTexture(cn.TEXTURE_2D,Ee.texture);for(const Kn in this.terrainUniforms)this.terrainUniforms[Kn].set(Ee[Kn])}for(const Kn in this.fixedUniforms)this.fixedUniforms[Kn].set(he[Kn]);Rt&&Rt.setUniforms(c,this.binderUniforms,ft,{zoom:Ct});let Qn=0;switch(m){case cn.LINES:Qn=2;break;case cn.TRIANGLES:Qn=3;break;case cn.LINE_STRIP:Qn=1}for(const Kn of qe.get()){var Wn=Kn.vaos||(Kn.vaos={});(Wn[ke]||(Wn[ke]=new iF)).bind(c,this,Ge,Rt?Rt.getPaintVertexBuffers():[],Re,Kn.vertexOffset,Mt,on,sn),cn.drawElements(m,Kn.primitiveLength*Qn,cn.UNSIGNED_SHORT,Kn.primitiveOffset*Qn*2)}}}}function MT(x,B,m){var E=1/uo(m,1,B.transform.tileZoom),O=Math.pow(2,m.tileID.overscaledZ);return B=m.tileSize*Math.pow(2,B.transform.tileZoom)/O,{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[E,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[(O=B*(m.tileID.canonical.x+m.tileID.wrap*O))>>16,(B*=m.tileID.canonical.y)>>16],u_pixel_coord_lower:[65535&O,65535&B]}}const OT=(x,he,m,E)=>{var O=he.style.light,B=[(B=O.properties.get("position")).x,B.y,B.z],ae=s.create$1();return"viewport"===O.properties.get("anchor")&&s.fromRotation(ae,-he.transform.angle),s.transformMat3(B,B,ae),he=O.properties.get("color"),{u_matrix:x,u_lightpos:B,u_lightintensity:O.properties.get("intensity"),u_lightcolor:[he.r,he.g,he.b],u_vertical_gradient:+m,u_opacity:E}},Ev=(x,c,m,E,O,B,ae)=>s.extend(OT(x,c,m,E),MT(B,c,ae),{u_height_factor:-Math.pow(2,O.overscaledZ)/ae.tileSize/8}),oP=x=>({u_matrix:x}),PT=(x,c,m,E)=>s.extend(oP(x),MT(m,c,E)),Az=(x,c)=>({u_matrix:x,u_world:c}),ck=(x,c,m,E,O)=>s.extend(PT(x,c,m,E),{u_world:O}),aF=(x,c,B)=>{var E=uo(B,1,c.zoom),O=Math.pow(2,c.zoom-B.tileID.overscaledZ);return B=B.tileID.overscaleFactor(),{u_matrix:x,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:E,u_extrude_scale:[c.pixelsToGLUnits[0]/(E*O),c.pixelsToGLUnits[1]/(E*O)],u_overscale_factor:B}},Iz=(x,c,m)=>({u_matrix:x,u_inv_matrix:c,u_camera_to_center_distance:m.cameraToCenterDistance,u_viewport_size:[m.width,m.height]}),lk=(x,c,m=1)=>({u_matrix:x,u_color:c,u_overlay:0,u_overlay_scale:m}),aP=x=>({u_matrix:x}),cF=(x,c,m,E)=>{var O=m.paint.get("hillshade-shadow-color"),B=m.paint.get("hillshade-highlight-color"),ae=m.paint.get("hillshade-accent-color");let he=m.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===m.paint.get("hillshade-illumination-anchor")&&(he-=x.transform.angle);var Ee=!x.options.moving;return{u_matrix:E?E.posMatrix:x.transform.calculatePosMatrix(c.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:(E=c.tileID,x=Math.pow(2,E.canonical.z),E=E.canonical.y,[new s.MercatorCoordinate(0,E/x).toLngLat().lat,new s.MercatorCoordinate(0,(E+1)/x).toLngLat().lat]),u_light:[m.paint.get("hillshade-exaggeration"),he],u_shadow:O,u_highlight:B,u_accent:ae}},lF=(x,c)=>{var m=c.stride,E=s.create();return s.ortho(E,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(E,E,[0,-s.EXTENT,0]),{u_matrix:E,u_image:1,u_dimension:[m,m],u_zoom:x.overscaledZ,u_unpack:c.getUnpackVector()}},sP=(x,c,m,E)=>{var O=x.transform;return{u_matrix:dF(x,c,m,E),u_ratio:1/uo(c,1,O.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}};function uF(x,c){return 1/uo(x,1,c.tileZoom)}function dF(x,c,m,E){return x.translatePosMatrix((E||c.tileID).posMatrix,c,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const M1=(x,c,m,E,O)=>({u_matrix:x,u_tl_parent:c,u_scale_parent:m,u_buffer_scale:1,u_fade_t:E.mix,u_opacity:E.opacity*O.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:O.paint.get("raster-brightness-min"),u_brightness_high:O.paint.get("raster-brightness-max"),u_saturation_factor:0<(x=O.paint.get("raster-saturation"))?1-1/(1.001-x):-x,u_contrast_factor:0<(c=O.paint.get("raster-contrast"))?1/(1-c):1+c,u_spin_weights:(m=O.paint.get("raster-hue-rotate"),m*=Math.PI/180,E=Math.sin(m),[(2*(m=Math.cos(m))+1)/3,(-Math.sqrt(3)*E-m+1)/3,(Math.sqrt(3)*E-m+1)/3])}),RT=(x,c,m,E,O,B,ae,he,Ee,ke)=>{var Ge=O.transform;return{u_is_size_zoom_constant:+("constant"===x||"source"===x),u_is_size_feature_constant:+("constant"===x||"camera"===x),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:Ge.cameraToCenterDistance,u_pitch:Ge.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:Ge.width/Ge.height,u_fade_change:O.options.fadeDuration?O.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:ae,u_coord_matrix:he,u_is_text:+Ee,u_pitch_with_map:+E,u_texsize:ke,u_texture:0}},bf=(x,c,m,E,O,B,ae,he,Ee,ke,Ge)=>{var Re=O.transform;return s.extend(RT(x,c,m,E,O,B,ae,he,Ee,ke),{u_gamma_scale:E?Math.cos(Re._pitch)*Re.cameraToCenterDistance:1,u_device_pixel_ratio:O.pixelRatio,u_is_halo:+Ge})},Mz=(x,c,m,E,O,B,ae,he,Ee,ke)=>s.extend(bf(x,c,m,E,O,B,ae,he,!0,Ee,!0),{u_texsize_icon:ke,u_texture_icon:1}),cP=(x,c,m,E,O,B)=>s.extend(function(Re,he,Ee,ke){var Ge=Ee.imageManager.getPattern(Re.from.toString()),{width:qe,height:ft}=(Re=Ee.imageManager.getPattern(Re.to.toString()),Ee.imageManager.getPixelSize()),Ct=Math.pow(2,ke.tileID.overscaledZ),Rt=(Ct=(Rt=ke.tileSize*Math.pow(2,Ee.transform.tileZoom)/Ct)*(ke.tileID.canonical.x+ke.tileID.wrap*Ct),Rt*ke.tileID.canonical.y);return{u_image:0,u_pattern_tl_a:Ge.tl,u_pattern_br_a:Ge.br,u_pattern_tl_b:Re.tl,u_pattern_br_b:Re.br,u_texsize:[qe,ft],u_mix:he.t,u_pattern_size_a:Ge.displaySize,u_pattern_size_b:Re.displaySize,u_scale_a:he.fromScale,u_scale_b:he.toScale,u_tile_units_to_pixels:1/uo(ke,1,Ee.transform.tileZoom),u_pixel_coord_upper:[Ct>>16,Rt>>16],u_pixel_coord_lower:[65535&Ct,65535&Rt]}}(E,B,m,O),{u_matrix:x,u_opacity:c}),lP={fillExtrusion:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_lightpos:new s.Uniform3f(x,c.u_lightpos),u_lightintensity:new s.Uniform1f(x,c.u_lightintensity),u_lightcolor:new s.Uniform3f(x,c.u_lightcolor),u_vertical_gradient:new s.Uniform1f(x,c.u_vertical_gradient),u_opacity:new s.Uniform1f(x,c.u_opacity)}),fillExtrusionPattern:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_lightpos:new s.Uniform3f(x,c.u_lightpos),u_lightintensity:new s.Uniform1f(x,c.u_lightintensity),u_lightcolor:new s.Uniform3f(x,c.u_lightcolor),u_vertical_gradient:new s.Uniform1f(x,c.u_vertical_gradient),u_height_factor:new s.Uniform1f(x,c.u_height_factor),u_image:new s.Uniform1i(x,c.u_image),u_texsize:new s.Uniform2f(x,c.u_texsize),u_pixel_coord_upper:new s.Uniform2f(x,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(x,c.u_pixel_coord_lower),u_scale:new s.Uniform3f(x,c.u_scale),u_fade:new s.Uniform1f(x,c.u_fade),u_opacity:new s.Uniform1f(x,c.u_opacity)}),fill:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix)}),fillPattern:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_image:new s.Uniform1i(x,c.u_image),u_texsize:new s.Uniform2f(x,c.u_texsize),u_pixel_coord_upper:new s.Uniform2f(x,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(x,c.u_pixel_coord_lower),u_scale:new s.Uniform3f(x,c.u_scale),u_fade:new s.Uniform1f(x,c.u_fade)}),fillOutline:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_world:new s.Uniform2f(x,c.u_world)}),fillOutlinePattern:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_world:new s.Uniform2f(x,c.u_world),u_image:new s.Uniform1i(x,c.u_image),u_texsize:new s.Uniform2f(x,c.u_texsize),u_pixel_coord_upper:new s.Uniform2f(x,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(x,c.u_pixel_coord_lower),u_scale:new s.Uniform3f(x,c.u_scale),u_fade:new s.Uniform1f(x,c.u_fade)}),circle:(x,c)=>({u_camera_to_center_distance:new s.Uniform1f(x,c.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(x,c.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(x,c.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(x,c.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(x,c.u_matrix)}),collisionBox:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_camera_to_center_distance:new s.Uniform1f(x,c.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(x,c.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(x,c.u_extrude_scale),u_overscale_factor:new s.Uniform1f(x,c.u_overscale_factor)}),collisionCircle:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_inv_matrix:new s.UniformMatrix4f(x,c.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(x,c.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(x,c.u_viewport_size)}),debug:(x,c)=>({u_color:new s.UniformColor(x,c.u_color),u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_overlay:new s.Uniform1i(x,c.u_overlay),u_overlay_scale:new s.Uniform1f(x,c.u_overlay_scale)}),clippingMask:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix)}),heatmap:(x,c)=>({u_extrude_scale:new s.Uniform1f(x,c.u_extrude_scale),u_intensity:new s.Uniform1f(x,c.u_intensity),u_matrix:new s.UniformMatrix4f(x,c.u_matrix)}),heatmapTexture:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_world:new s.Uniform2f(x,c.u_world),u_image:new s.Uniform1i(x,c.u_image),u_color_ramp:new s.Uniform1i(x,c.u_color_ramp),u_opacity:new s.Uniform1f(x,c.u_opacity)}),hillshade:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_image:new s.Uniform1i(x,c.u_image),u_latrange:new s.Uniform2f(x,c.u_latrange),u_light:new s.Uniform2f(x,c.u_light),u_shadow:new s.UniformColor(x,c.u_shadow),u_highlight:new s.UniformColor(x,c.u_highlight),u_accent:new s.UniformColor(x,c.u_accent)}),hillshadePrepare:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_image:new s.Uniform1i(x,c.u_image),u_dimension:new s.Uniform2f(x,c.u_dimension),u_zoom:new s.Uniform1f(x,c.u_zoom),u_unpack:new s.Uniform4f(x,c.u_unpack)}),line:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_ratio:new s.Uniform1f(x,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(x,c.u_units_to_pixels)}),lineGradient:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_ratio:new s.Uniform1f(x,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(x,c.u_units_to_pixels),u_image:new s.Uniform1i(x,c.u_image),u_image_height:new s.Uniform1f(x,c.u_image_height)}),linePattern:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_texsize:new s.Uniform2f(x,c.u_texsize),u_ratio:new s.Uniform1f(x,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_image:new s.Uniform1i(x,c.u_image),u_units_to_pixels:new s.Uniform2f(x,c.u_units_to_pixels),u_scale:new s.Uniform3f(x,c.u_scale),u_fade:new s.Uniform1f(x,c.u_fade)}),lineSDF:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_ratio:new s.Uniform1f(x,c.u_ratio),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(x,c.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(x,c.u_patternscale_a),u_patternscale_b:new s.Uniform2f(x,c.u_patternscale_b),u_sdfgamma:new s.Uniform1f(x,c.u_sdfgamma),u_image:new s.Uniform1i(x,c.u_image),u_tex_y_a:new s.Uniform1f(x,c.u_tex_y_a),u_tex_y_b:new s.Uniform1f(x,c.u_tex_y_b),u_mix:new s.Uniform1f(x,c.u_mix)}),raster:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_tl_parent:new s.Uniform2f(x,c.u_tl_parent),u_scale_parent:new s.Uniform1f(x,c.u_scale_parent),u_buffer_scale:new s.Uniform1f(x,c.u_buffer_scale),u_fade_t:new s.Uniform1f(x,c.u_fade_t),u_opacity:new s.Uniform1f(x,c.u_opacity),u_image0:new s.Uniform1i(x,c.u_image0),u_image1:new s.Uniform1i(x,c.u_image1),u_brightness_low:new s.Uniform1f(x,c.u_brightness_low),u_brightness_high:new s.Uniform1f(x,c.u_brightness_high),u_saturation_factor:new s.Uniform1f(x,c.u_saturation_factor),u_contrast_factor:new s.Uniform1f(x,c.u_contrast_factor),u_spin_weights:new s.Uniform3f(x,c.u_spin_weights)}),symbolIcon:(x,c)=>({u_is_size_zoom_constant:new s.Uniform1i(x,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(x,c.u_is_size_feature_constant),u_size_t:new s.Uniform1f(x,c.u_size_t),u_size:new s.Uniform1f(x,c.u_size),u_camera_to_center_distance:new s.Uniform1f(x,c.u_camera_to_center_distance),u_pitch:new s.Uniform1f(x,c.u_pitch),u_rotate_symbol:new s.Uniform1i(x,c.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(x,c.u_aspect_ratio),u_fade_change:new s.Uniform1f(x,c.u_fade_change),u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(x,c.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(x,c.u_coord_matrix),u_is_text:new s.Uniform1i(x,c.u_is_text),u_pitch_with_map:new s.Uniform1i(x,c.u_pitch_with_map),u_texsize:new s.Uniform2f(x,c.u_texsize),u_texture:new s.Uniform1i(x,c.u_texture)}),symbolSDF:(x,c)=>({u_is_size_zoom_constant:new s.Uniform1i(x,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(x,c.u_is_size_feature_constant),u_size_t:new s.Uniform1f(x,c.u_size_t),u_size:new s.Uniform1f(x,c.u_size),u_camera_to_center_distance:new s.Uniform1f(x,c.u_camera_to_center_distance),u_pitch:new s.Uniform1f(x,c.u_pitch),u_rotate_symbol:new s.Uniform1i(x,c.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(x,c.u_aspect_ratio),u_fade_change:new s.Uniform1f(x,c.u_fade_change),u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(x,c.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(x,c.u_coord_matrix),u_is_text:new s.Uniform1i(x,c.u_is_text),u_pitch_with_map:new s.Uniform1i(x,c.u_pitch_with_map),u_texsize:new s.Uniform2f(x,c.u_texsize),u_texture:new s.Uniform1i(x,c.u_texture),u_gamma_scale:new s.Uniform1f(x,c.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(x,c.u_is_halo)}),symbolTextAndIcon:(x,c)=>({u_is_size_zoom_constant:new s.Uniform1i(x,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(x,c.u_is_size_feature_constant),u_size_t:new s.Uniform1f(x,c.u_size_t),u_size:new s.Uniform1f(x,c.u_size),u_camera_to_center_distance:new s.Uniform1f(x,c.u_camera_to_center_distance),u_pitch:new s.Uniform1f(x,c.u_pitch),u_rotate_symbol:new s.Uniform1i(x,c.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(x,c.u_aspect_ratio),u_fade_change:new s.Uniform1f(x,c.u_fade_change),u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(x,c.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(x,c.u_coord_matrix),u_is_text:new s.Uniform1i(x,c.u_is_text),u_pitch_with_map:new s.Uniform1i(x,c.u_pitch_with_map),u_texsize:new s.Uniform2f(x,c.u_texsize),u_texsize_icon:new s.Uniform2f(x,c.u_texsize_icon),u_texture:new s.Uniform1i(x,c.u_texture),u_texture_icon:new s.Uniform1i(x,c.u_texture_icon),u_gamma_scale:new s.Uniform1f(x,c.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(x,c.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(x,c.u_is_halo)}),background:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_opacity:new s.Uniform1f(x,c.u_opacity),u_color:new s.UniformColor(x,c.u_color)}),backgroundPattern:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_opacity:new s.Uniform1f(x,c.u_opacity),u_image:new s.Uniform1i(x,c.u_image),u_pattern_tl_a:new s.Uniform2f(x,c.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(x,c.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(x,c.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(x,c.u_pattern_br_b),u_texsize:new s.Uniform2f(x,c.u_texsize),u_mix:new s.Uniform1f(x,c.u_mix),u_pattern_size_a:new s.Uniform2f(x,c.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(x,c.u_pattern_size_b),u_scale_a:new s.Uniform1f(x,c.u_scale_a),u_scale_b:new s.Uniform1f(x,c.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(x,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(x,c.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(x,c.u_tile_units_to_pixels)}),terrain:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_texture:new s.Uniform1i(x,c.u_texture),u_ele_delta:new s.Uniform1f(x,c.u_ele_delta)}),terrainDepth:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_ele_delta:new s.Uniform1f(x,c.u_ele_delta)}),terrainCoords:(x,c)=>({u_matrix:new s.UniformMatrix4f(x,c.u_matrix),u_texture:new s.Uniform1i(x,c.u_texture),u_terrain_coords_id:new s.Uniform1f(x,c.u_terrain_coords_id),u_ele_delta:new s.Uniform1f(x,c.u_ele_delta)})};class xT{constructor(c,m,E){var O=(this.context=c).gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!E,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){var m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uP={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dP{constructor(c,m,E,O){this.length=m.length,this.attributes=E,this.itemSize=m.bytesPerElement,this.dynamicDraw=O,E=(this.context=c).gl,this.buffer=E.createBuffer(),c.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of `+this.length);var m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,m){for(let O=0;O<this.attributes.length;O++){var E;void 0!==(E=m.attributes[(E=this.attributes[O]).name])&&c.enableVertexAttribArray(E)}}setVertexAttribPointers(c,m,E){for(let ae=0;ae<this.attributes.length;ae++){var O=this.attributes[ae],B=m.attributes[O.name];void 0!==B&&c.vertexAttribPointer(B,O.components,c[uP[O.type]],!1,this.itemSize,O.offset+this.itemSize*(E||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const O1=new WeakMap;function hP(x){var c;return O1.has(x)?O1.get(x):(c=null==(c=x.getParameter(x.VERSION))?void 0:c.startsWith("WebGL 2.0"),O1.set(x,c),c)}class Ec{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oz extends Ec{getDefault(){return s.Color.transparent}set(c){var m=this.current;c.r===m.r&&c.g===m.g&&c.b===m.b&&c.a===m.a&&!this.dirty||(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class P1 extends Ec{getDefault(){return 1}set(c){c===this.current&&!this.dirty||(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class pP extends Ec{getDefault(){return 0}set(c){c===this.current&&!this.dirty||(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Ef extends Ec{getDefault(){return[!0,!0,!0,!0]}set(c){var m=this.current;c[0]===m[0]&&c[1]===m[1]&&c[2]===m[2]&&c[3]===m[3]&&!this.dirty||(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Sf extends Ec{getDefault(){return!0}set(c){c===this.current&&!this.dirty||(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class uk extends Ec{getDefault(){return 255}set(c){c===this.current&&!this.dirty||(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class NT extends Ec{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){var m=this.current;c.func===m.func&&c.ref===m.ref&&c.mask===m.mask&&!this.dirty||(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class fP extends Ec{getDefault(){var c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){var m=this.current;c[0]===m[0]&&c[1]===m[1]&&c[2]===m[2]&&!this.dirty||(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class hF extends Ec{getDefault(){return!1}set(c){var m;c===this.current&&!this.dirty||(m=this.gl,c?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=c,this.dirty=!1)}}class pF extends Ec{getDefault(){return[0,1]}set(c){var m=this.current;c[0]===m[0]&&c[1]===m[1]&&!this.dirty||(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class $b extends Ec{getDefault(){return!1}set(c){var m;c===this.current&&!this.dirty||(m=this.gl,c?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=c,this.dirty=!1)}}class DT extends Ec{getDefault(){return this.gl.LESS}set(c){c===this.current&&!this.dirty||(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class kT extends Ec{getDefault(){return!1}set(c){var m;c===this.current&&!this.dirty||(m=this.gl,c?m.enable(m.BLEND):m.disable(m.BLEND),this.current=c,this.dirty=!1)}}class Z_ extends Ec{getDefault(){var c=this.gl;return[c.ONE,c.ZERO]}set(c){var m=this.current;c[0]===m[0]&&c[1]===m[1]&&!this.dirty||(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class gP extends Ec{getDefault(){return s.Color.transparent}set(c){var m=this.current;c.r===m.r&&c.g===m.g&&c.b===m.b&&c.a===m.a&&!this.dirty||(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Vb extends Ec{getDefault(){return this.gl.FUNC_ADD}set(c){c===this.current&&!this.dirty||(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class fF extends Ec{getDefault(){return!1}set(c){var m;c===this.current&&!this.dirty||(m=this.gl,c?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=c,this.dirty=!1)}}class dk extends Ec{getDefault(){return this.gl.BACK}set(c){c===this.current&&!this.dirty||(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class R1 extends Ec{getDefault(){return this.gl.CCW}set(c){c===this.current&&!this.dirty||(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class hk extends Ec{getDefault(){return null}set(c){c===this.current&&!this.dirty||(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class Gb extends Ec{getDefault(){return this.gl.TEXTURE0}set(c){c===this.current&&!this.dirty||(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class qb extends Ec{getDefault(){var c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){var m=this.current;c[0]===m[0]&&c[1]===m[1]&&c[2]===m[2]&&c[3]===m[3]&&!this.dirty||(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class gF extends Ec{getDefault(){return null}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).bindFramebuffer(m.FRAMEBUFFER,c),this.current=c,this.dirty=!1)}}class pk extends Ec{getDefault(){return null}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).bindRenderbuffer(m.RENDERBUFFER,c),this.current=c,this.dirty=!1)}}class pc extends Ec{getDefault(){return null}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).bindTexture(m.TEXTURE_2D,c),this.current=c,this.dirty=!1)}}class mP extends Ec{getDefault(){return null}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).bindBuffer(m.ARRAY_BUFFER,c),this.current=c,this.dirty=!1)}}class Pz extends Ec{getDefault(){return null}set(c){var m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class mF extends Ec{getDefault(){return null}set(c){var m;c===this.current&&!this.dirty||(hP(m=this.gl)?m.bindVertexArray(c):null!=(m=m.getExtension("OES_vertex_array_object"))&&m.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class LT extends Ec{getDefault(){return 4}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).pixelStorei(m.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1)}}class Rz extends Ec{getDefault(){return!1}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1)}}class xz extends Ec{getDefault(){return!1}set(c){var m;c===this.current&&!this.dirty||((m=this.gl).pixelStorei(m.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1)}}class _P extends Ec{constructor(c,m){super(c),this.context=c,this.parent=m}getDefault(){return null}}class Nz extends _P{setDirty(){this.dirty=!0}set(c){var m;c===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(m=this.gl).framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,c,0),this.current=c,this.dirty=!1)}}class fk extends _P{set(c){var m;c===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(m=this.gl).framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,c),this.current=c,this.dirty=!1)}}class yP extends _P{set(c){var m;c===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(m=this.gl).framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,c),this.current=c,this.dirty=!1)}}class vP{constructor(c,m,E,O,B){if(this.context=c,this.width=m,this.height=E,E=this.framebuffer=(m=c.gl).createFramebuffer(),this.colorAttachment=new Nz(c,E),O)this.depthAttachment=new(B?yP:fk)(c,E);else if(B)throw new Error("Stencil cannot be set without depth");if(m.checkFramebufferStatus(m.FRAMEBUFFER)!==m.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){var c=this.context.gl,m=this.colorAttachment.get();m&&c.deleteTexture(m),this.depthAttachment&&(m=this.depthAttachment.get())&&c.deleteRenderbuffer(m),c.deleteFramebuffer(this.framebuffer)}}class hu{constructor(c,m,E){this.blendFunction=c,this.blendColor=m,this.mask=E}}hu.Replace=[1,0],hu.disabled=new hu(hu.Replace,s.Color.transparent,[!1,!1,!1,!1]),hu.unblended=new hu(hu.Replace,s.Color.transparent,[!0,!0,!0,!0]),hu.alphaBlended=new hu([1,771],s.Color.transparent,[!0,!0,!0,!0]);class CP{constructor(c){var m,E;this.gl=c,this.clearColor=new Oz(this),this.clearDepth=new P1(this),this.clearStencil=new pP(this),this.colorMask=new Ef(this),this.depthMask=new Sf(this),this.stencilMask=new uk(this),this.stencilFunc=new NT(this),this.stencilOp=new fP(this),this.stencilTest=new hF(this),this.depthRange=new pF(this),this.depthTest=new $b(this),this.depthFunc=new DT(this),this.blend=new kT(this),this.blendFunc=new Z_(this),this.blendColor=new gP(this),this.blendEquation=new Vb(this),this.cullFace=new fF(this),this.cullFaceSide=new dk(this),this.frontFace=new R1(this),this.program=new hk(this),this.activeTexture=new Gb(this),this.viewport=new qb(this),this.bindFramebuffer=new gF(this),this.bindRenderbuffer=new pk(this),this.bindTexture=new pc(this),this.bindVertexBuffer=new mP(this),this.bindElementBuffer=new Pz(this),this.bindVertexArray=new mF(this),this.pixelStoreUnpack=new LT(this),this.pixelStoreUnpackPremultiplyAlpha=new Rz(this),this.pixelStoreUnpackFlipY=new xz(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),hP(c)?(this.HALF_FLOAT=c.HALF_FLOAT,m=c.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=null!=(E=c.RGBA16F)?E:m?.RGBA16F_EXT,this.RGB16F=null!=(E=c.RGB16F)?E:m?.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")):(c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear"),E=c.getExtension("OES_texture_half_float"),this.HALF_FLOAT=E?.HALF_FLOAT_OES)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,m){return new xT(this,c,m)}createVertexBuffer(c,m,E){return new dP(this,c,m,E)}createRenderbuffer(c,m,E){var O=this.gl,B=O.createRenderbuffer();return this.bindRenderbuffer.set(B),O.renderbufferStorage(O.RENDERBUFFER,c,m,E),this.bindRenderbuffer.set(null),B}createFramebuffer(c,m,E,O){return new vP(this,c,m,E,O)}clear({color:c,depth:m,stencil:E}){var O=this.gl;let B=0;c&&(B|=O.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),void 0!==m&&(B|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),void 0!==E&&(B|=O.STENCIL_BUFFER_BIT,this.clearStencil.set(E),this.stencilMask.set(255)),O.clear(B)}setCullFace(c){!1===c.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){s.deepEqual(c.blendFunction,hu.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return hP(this.gl)?this.gl.createVertexArray():null==(c=this.gl.getExtension("OES_vertex_array_object"))?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var m;return hP(this.gl)?this.gl.deleteVertexArray(c):null==(m=this.gl.getExtension("OES_vertex_array_object"))?void 0:m.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}class js{constructor(c,m,E){this.func=c,this.mask=m,this.range=E}}js.ReadOnly=!1,js.ReadWrite=!0,js.disabled=new js(519,js.ReadOnly,[0,1]);class Xl{constructor(c,m,E,O,B,ae){this.test=c,this.ref=m,this.mask=E,this.fail=O,this.depthFail=B,this.pass=ae}}Xl.disabled=new Xl({func:519,mask:0},0,0,7680,7680,7680);class El{constructor(c,m,E){this.enable=c,this.mode=m,this.frontFace=E}}let bP;function _F(x,c,m,E,O,B,ae){var he=x.context,Ee=he.gl,ke=x.useProgram("collisionBox"),Ge=[];let Re=0,qe=0;for(let wo=0;wo<E.length;wo++){var ft=E[wo],Ct=c.getTile(ft),Rt=Ct.getBucket(m);if(Rt){let Xi=ft.posMatrix;0===O[0]&&0===O[1]||(Xi=x.translatePosMatrix(ft.posMatrix,Ct,O,B));var Mt,on,sn=ae?Rt.textCollisionBox:Rt.iconCollisionBox,cn=Rt.collisionCircleArray;0<cn.length&&(Mt=s.create(),on=Xi,s.mul(Mt,Rt.placementInvProjMatrix,x.transform.glCoordMatrix),s.mul(Mt,Mt,Rt.placementViewportMatrix),Ge.push({circleArray:cn,circleOffset:qe,transform:on,invTransform:Mt,coord:ft}),Re+=cn.length/4,qe=Re),sn&&ke.draw(he,Ee.LINES,js.disabled,Xl.disabled,x.colorModeForRenderPass(),El.disabled,aF(Xi,x.transform,Ct),x.style.map.terrain&&x.style.map.terrain.getTerrainData(ft),m.id,sn.layoutVertexBuffer,sn.indexBuffer,sn.segments,null,x.transform.zoom,null,null,sn.collisionVertexBuffer)}}if(ae&&Ge.length){var Wn=x.useProgram("collisionCircle"),Qn=new s.CollisionCircleLayoutArray;Qn.resize(4*Re),Qn._trim();let wo=0;for(const Xi of Ge)for(let Zr=0;Zr<Xi.circleArray.length/4;Zr++){var $r,Kn=Xi.circleArray[0+($r=4*Zr)],Cr=Xi.circleArray[1+$r],ur=Xi.circleArray[2+$r];Qn.emplace(wo++,Kn,Cr,ur,$r=Xi.circleArray[3+$r],0),Qn.emplace(wo++,Kn,Cr,ur,$r,1),Qn.emplace(wo++,Kn,Cr,ur,$r,2),Qn.emplace(wo++,Kn,Cr,ur,$r,3)}(!bP||bP.length<2*Re)&&(bP=function(Xi){var Zr=2*Xi,po=new s.QuadTriangleArray;po.resize(Zr),po._trim();for(let zi=0;zi<Zr;zi++){var ta=6*zi;po.uint16[0+ta]=4*zi+0,po.uint16[1+ta]=4*zi+1,po.uint16[2+ta]=4*zi+2,po.uint16[3+ta]=4*zi+2,po.uint16[4+ta]=4*zi+3,po.uint16[5+ta]=4*zi+0}return po}(Re));var mi=he.createIndexBuffer(bP,!0),Yi=he.createVertexBuffer(Qn,s.collisionCircleLayout.members,!0);for(const Xi of Ge){var So=Iz(Xi.transform,Xi.invTransform,x.transform);Wn.draw(he,Ee.TRIANGLES,js.disabled,Xl.disabled,x.colorModeForRenderPass(),El.disabled,So,x.style.map.terrain&&x.style.map.terrain.getTerrainData(Xi.coord),m.id,Yi,mi,s.SegmentVector.simpleSegment(0,2*Xi.circleOffset,Xi.circleArray.length,Xi.circleArray.length/2),null,x.transform.zoom,null,null,null)}Yi.destroy(),mi.destroy()}}El.disabled=new El(!1,1029,2305),El.backCCW=new El(!0,1029,2305);const gk=s.identity(new Float32Array(16));function EP(x,c,m,E,O,B,ae,he,Ee,ke,Ge,Re){var qe=x.context,ft=qe.gl,Ct=x.transform,Rt="map"===he,Mt="map"===Ee,on="viewport"!==he&&"point"!==m.layout.get("symbol-placement"),sn=Rt&&!Mt&&!on,cn=!m.layout.get("symbol-sort-key").isConstant();let Wn=!1;var Qn=x.depthModeForSublayer(0,js.ReadOnly),Kn=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Cr=[];for(const Du of E){var ur=c.getTile(Du),$r=ur.getBucket(m);if($r){var mi=O?$r.text:$r.icon;if(mi&&mi.segments.get().length&&mi.hasVisibleVertices){var ta=mi.programConfigurations.get(m.id),Yi=O||$r.sdfIcons,So=O?$r.textSizeData:$r.iconSizeData,po=Mt||0!==Ct.pitch,wo=x.useProgram((Xi=Yi,wo=O,$r.iconsInText&&wo?"symbolTextAndIcon":Xi?"symbolSDF":"symbolIcon"),ta),Xi=s.evaluateSizeForZoom(So,Ct.zoom),Zr=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Du);let Um,tE,Iv,GF,Bm=[0,0],$k=null;O?(tE=ur.glyphAtlasTexture,Iv=ft.LINEAR,Um=ur.glyphAtlasTexture.size,$r.iconsInText&&(Bm=ur.imageAtlasTexture.size,$k=ur.imageAtlasTexture,ta="composite"===So.kind||"camera"===So.kind,GF=po||x.options.rotating||x.options.zooming||ta?ft.LINEAR:ft.NEAREST)):(ta=1!==m.layout.get("icon-size").constantOr(0)||$r.iconsNeedLinear,tE=ur.imageAtlasTexture,Iv=Yi||x.options.rotating||x.options.zooming||ta||po?ft.LINEAR:ft.NEAREST,Um=ur.imageAtlasTexture.size),ta=uo(ur,1,x.transform.zoom),po=Yo(Du.posMatrix,Mt,Rt,x.transform,ta),ta=rt(Du.posMatrix,Mt,Rt,x.transform,ta);var zi=Kn&&$r.hasTextData();if(zi="none"!==m.layout.get("icon-text-fit")&&zi&&$r.hasIconData(),on){var gs=x.style.map.terrain?(zm,F1)=>x.style.map.terrain.getElevation(Du,zm,F1):null,Hc="map"===m.layout.get("text-rotation-alignment");{Uc=void 0,_h=void 0,ol=void 0,al=void 0,Qu=void 0,Jl=void 0,Pd=void 0,Fh=void 0,Tv=void 0,Fm=void 0;var cs=$r,Ms=Du.posMatrix,ya=x,Uc=O,Os=po,Sc=ta,mh=Mt,Od=ke,qg=Hc,_h=gs,Zl=Uc?cs.textSizeData:cs.iconSizeData,gu=s.evaluateSizeForZoom(Zl,ya.transform.zoom),Lm=[256/ya.width*2+1,256/ya.height*2+1],ol=(Uc?cs.text:cs.icon).dynamicLayoutVertexArray,yh=(ol.clear(),cs.lineVertexArray),al=(Uc?cs.text:cs.icon).placedSymbolArray,Sl=ya.transform.width/ya.transform.height;let zm=!1;for(let F1=0;F1<al.length;F1++){var Fh,Jl,Pd,Tv,Fm,Qu=al.get(F1);if(Qu.hidden||Qu.writingMode===s.WritingMode.vertical&&!zm)Sr(Qu.numGlyphs,ol);else{let Kg;zm=!1,_h?(Kg=[Qu.anchorX,Qu.anchorY,_h(Qu.anchorX,Qu.anchorY),1],s.transformMat4(Kg,Kg,Ms)):ci(Kg=[Qu.anchorX,Qu.anchorY,0,1],Kg,Ms),Fh=void 0,Fh=(Pd=Kg)[0]/Pd[3],Pd=Pd[1]/Pd[3],(!(Fh>=-(Jl=Lm)[0]&&Fh<=Jl[0]&&Pd>=-Jl[1]&&Pd<=Jl[1])||(Pd=je(ya.transform.cameraToCenterDistance,Fh=Kg[3]),Jl=s.evaluateSizeForFeature(Zl,gu,Qu),Fh=mh?Jl/Pd:Jl*Pd,Pd=xe(Jl=new s.Point(Qu.anchorX,Qu.anchorY),Os,_h).point,zm=(Fm=Jt(Qu,Fh,!(Tv={projections:{},offsets:{}}),Od,Ms,Os,Sc,cs.glyphOffsetArray,yh,ol,Pd,Jl,Tv,Sl,qg,_h)).useVertical,Fm.notEnoughRoom)||zm||Fm.needsFlipping&&Jt(Qu,Fh,!0,Od,Ms,Os,Sc,cs.glyphOffsetArray,yh,ol,Pd,Jl,Tv,Sl,qg,_h).notEnoughRoom)&&Sr(Qu.numGlyphs,ol)}}(Uc?cs.text:cs.icon).dynamicLayoutVertexBuffer.updateData(ol)}}let Vk;Hc=x.translatePosMatrix(Du.posMatrix,ur,B,ae),gs=on||O&&Kn||zi?gk:po,Uc=x.translatePosMatrix(ta,ur,B,ae,!0),zi=Yi&&0!==m.paint.get(O?"text-halo-width":"icon-halo-width").constantOr(1);var Hm={program:wo,buffers:mi,uniformValues:Vk=Yi?$r.iconsInText?Mz(So.kind,Xi,sn,Mt,x,Hc,gs,Uc,Um,Bm):bf(So.kind,Xi,sn,Mt,x,Hc,gs,Uc,O,Um,!0):RT(So.kind,Xi,sn,Mt,x,Hc,gs,Uc,O,Um),atlasTexture:tE,atlasTextureIcon:$k,atlasInterpolation:Iv,atlasInterpolationIcon:GF,isSDF:Yi,hasHalo:zi};if(cn&&$r.canOverlap){Wn=!0;for(const zm of mi.segments.get())Cr.push({segments:new s.SegmentVector([zm]),sortKey:zm.sortKey,state:Hm,terrainData:Zr})}else Cr.push({segments:mi.segments,sortKey:0,state:Hm,terrainData:Zr})}}}Wn&&Cr.sort((Du,Um)=>Du.sortKey-Um.sortKey);for(const Du of Cr){var Av,Nl=Du.state;qe.activeTexture.set(ft.TEXTURE0),Nl.atlasTexture.bind(Nl.atlasInterpolation,ft.CLAMP_TO_EDGE),Nl.atlasTextureIcon&&(qe.activeTexture.set(ft.TEXTURE1),Nl.atlasTextureIcon)&&Nl.atlasTextureIcon.bind(Nl.atlasInterpolationIcon,ft.CLAMP_TO_EDGE),Nl.isSDF&&(Av=Nl.uniformValues,Nl.hasHalo&&(Av.u_is_halo=1,yF(Nl.buffers,Du.segments,m,x,Nl.program,Qn,Ge,Re,Av,Du.terrainData)),Av.u_is_halo=0),yF(Nl.buffers,Du.segments,m,x,Nl.program,Qn,Ge,Re,Nl.uniformValues,Du.terrainData)}}function yF(x,c,m,E,O,B,ae,he,Ee,ke){var Ge=E.context;O.draw(Ge,Ge.gl.TRIANGLES,B,ae,he,El.disabled,Ee,ke,m.id,x.layoutVertexBuffer,x.indexBuffer,c,m.paint,E.transform.zoom,x.programConfigurations.get(m.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function _k(x,c,m,E,O){if(m&&E&&E.imageAtlas){let B=(E=E.imageAtlas.patternPositions)[m.to.toString()],ae=E[m.from.toString()];!B&&ae&&(B=ae),!ae&&B&&(ae=B),B&&ae||(B=E[m=O.getPaintProperty(c)],ae=E[m]),B&&ae&&x.setConstantPatternPositions(B,ae)}}function CF(x,c,m,E,O,B,ae){var he=x.context.gl,Ee="fill-pattern",ke=m.paint.get(Ee),Ge=ke&&ke.constantOr(1),Re=m.getCrossfadeParameters();let qe,ft,Ct,Rt,Mt;qe=ae?(ft=Ge&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he.LINES):(ft=Ge?"fillPattern":"fill",he.TRIANGLES);var on=ke.constantOr(null);for(const $r of E){var sn,cn,Wn,Qn,Kn,Cr,ur=c.getTile($r);Ge&&!ur.patternsLoaded()||(sn=ur.getBucket(m))&&(cn=sn.programConfigurations.get(m.id),Wn=x.useProgram(ft,cn),Qn=x.style.map.terrain&&x.style.map.terrain.getTerrainData($r),Ge&&(x.context.activeTexture.set(he.TEXTURE0),ur.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),cn.updatePaintBuffers(Re)),_k(cn,Ee,on,ur,m),Kn=((Qn?$r:null)||$r).posMatrix,Kn=x.translatePosMatrix(Kn,ur,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor")),Ct=ae?(Rt=sn.indexBuffer2,Mt=sn.segments2,Cr=[he.drawingBufferWidth,he.drawingBufferHeight],"fillOutlinePattern"===ft&&Ge?ck(Kn,x,Re,ur,Cr):Az(Kn,Cr)):(Rt=sn.indexBuffer,Mt=sn.segments,Ge?PT(Kn,x,Re,ur):oP(Kn)),Wn.draw(x.context,qe,O,x.stencilModeForClipping($r),B,El.disabled,Ct,Qn,m.id,sn.layoutVertexBuffer,Rt,Mt,m.paint,x.transform.zoom,cn))}}function pu(x,c,m,E,O,B,ae){var he=x.context,Ee=he.gl,ke="fill-extrusion-pattern",Ge=m.paint.get(ke),Re=Ge.constantOr(1),qe=m.getCrossfadeParameters(),ft=m.paint.get("fill-extrusion-opacity"),Ct=Ge.constantOr(null);for(const Kn of E){var Rt,Mt,on,sn,cn,Wn=c.getTile(Kn),Qn=Wn.getBucket(m);Qn&&(Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Kn),Mt=Qn.programConfigurations.get(m.id),on=x.useProgram(Re?"fillExtrusionPattern":"fillExtrusion",Mt),Re&&(x.context.activeTexture.set(Ee.TEXTURE0),Wn.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Mt.updatePaintBuffers(qe)),_k(Mt,ke,Ct,Wn,m),sn=x.translatePosMatrix(Kn.posMatrix,Wn,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),cn=m.paint.get("fill-extrusion-vertical-gradient"),Wn=Re?Ev(sn,x,cn,ft,Kn,qe,Wn):OT(sn,x,cn,ft),on.draw(he,he.gl.TRIANGLES,O,B,ae,El.backCCW,Wn,Rt,m.id,Qn.layoutVertexBuffer,Qn.indexBuffer,Qn.segments,m.paint,x.transform.zoom,Mt,x.style.map.terrain&&Qn.centroidVertexBuffer))}}const vk=new s.Color(1,0,0,1),EF=new s.Color(0,1,0,1),Kb=new s.Color(0,0,1,1),FT=new s.Color(1,0,1,1),Ck=new s.Color(0,1,1,1);function bk(x,c,m,E){HT(x,0,c+m/2,x.transform.width,m,E)}function Ek(x,c,m,E){HT(x,c-m/2,0,m,x.transform.height,E)}function HT(x,c,m,E,O,B){var ae=x.context,he=ae.gl;he.enable(he.SCISSOR_TEST),he.scissor(c*x.pixelRatio,m*x.pixelRatio,E*x.pixelRatio,O*x.pixelRatio),ae.clear({color:B}),he.disable(he.SCISSOR_TEST)}function Sk(x,c,m){var E=x.context,O=E.gl,B=x.colorModeForRenderPass(),ae=new js(O.LEQUAL,js.ReadWrite,x.depthRangeFor3D),he=x.useProgram("terrain"),Ee=c.getTerrainMesh();E.bindFramebuffer.set(null),E.viewport.set([0,0,x.width,x.height]);for(const Re of m){var Ge=x.renderToTexture.getTexture(Re),ke=c.getTerrainData(Re.tileID);Ge={u_matrix:(E.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,Ge.texture),Ge=x.transform.calculatePosMatrix(Re.tileID.toUnwrapped())),u_texture:0,u_ele_delta:c.getMeshFrameDelta(x.transform.zoom)},he.draw(E,O.TRIANGLES,ae,Xl.disabled,B,El.backCCW,Ge,ke,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}}class MF{constructor(c,m){this.context=new CP(c),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.identity(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Hr.maxUnderzooming+Hr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ak}resize(c,m,E){if(this.width=Math.floor(c*E),this.height=Math.floor(m*E),this.pixelRatio=E,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const O of this.style._order)this.style._layers[O].resize()}setup(){var c,m=this.context;((((((c=new s.PosArray).emplaceBack(0,0),c.emplaceBack(s.EXTENT,0),c.emplaceBack(0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=m.createVertexBuffer(c,X_.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2),c=new s.PosArray).emplaceBack(0,0),c.emplaceBack(s.EXTENT,0),c.emplaceBack(0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=m.createVertexBuffer(c,X_.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5),c=new s.RasterBoundsArray).emplaceBack(0,0,0,0),c.emplaceBack(s.EXTENT,0,s.EXTENT,0),c.emplaceBack(0,s.EXTENT,0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=m.createVertexBuffer(c,Be.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2),c=new s.PosArray).emplaceBack(0,0),c.emplaceBack(1,0),c.emplaceBack(0,1),c.emplaceBack(1,1),this.viewportBuffer=m.createVertexBuffer(c,X_.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2),c=new s.LineStripIndexArray).emplaceBack(0),c.emplaceBack(1),c.emplaceBack(3),c.emplaceBack(2),c.emplaceBack(0),this.tileBorderIndexBuffer=m.createIndexBuffer(c),c=new s.TriangleIndexArray).emplaceBack(0,1,2),c.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=m.createIndexBuffer(c),this.stencilClearMode=new Xl({func:(m=this.context.gl).ALWAYS,mask:0},0,255,m.ZERO,m.ZERO,m.ZERO)}clearStencil(){var c=this.context,m=c.gl,E=(this.nextStencilID=1,this.currentStencilSource=void 0,s.create());s.ortho(E,0,this.width,this.height,0,0,1),s.scale(E,E,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,m.TRIANGLES,js.disabled,this.stencilClearMode,hu.disabled,El.disabled,aP(E),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,m){if(this.currentStencilSource!==c.source&&c.isTileClipped()&&m&&m.length){this.currentStencilSource=c.source;var E=this.context,O=E.gl,B=(256<this.nextStencilID+m.length&&this.clearStencil(),E.setColorMode(hu.disabled),E.setDepthMode(js.disabled),this.useProgram("clippingMask"));this._tileClippingMaskIDs={};for(const Ee of m){var ae=this._tileClippingMaskIDs[Ee.key]=this.nextStencilID++,he=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Ee);B.draw(E,O.TRIANGLES,js.disabled,new Xl({func:O.ALWAYS,mask:0},ae,255,O.KEEP,O.KEEP,O.REPLACE),hu.disabled,El.disabled,aP(Ee.posMatrix),he,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}}stencilModeFor3D(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var c=this.nextStencilID++,m=this.context.gl;return new Xl({func:m.NOTEQUAL,mask:255},c,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(c){var m=this.context.gl;return new Xl({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(E){var m=this.context.gl,O=(E=E.sort((he,Ee)=>Ee.overscaledZ-he.overscaledZ))[E.length-1].overscaledZ,B=E[0].overscaledZ-O+1;if(1<B){this.currentStencilSource=void 0,256<this.nextStencilID+B&&this.clearStencil();var ae={};for(let he=0;he<B;he++)ae[he+O]=new Xl({func:m.GEQUAL,mask:255},he+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=B,[ae,E]}return[{[O]:Xl.disabled},E]}colorModeForRenderPass(){var c=this.context.gl;return this._showOverdrawInspector?new hu([c.CONSTANT_COLOR,c.ONE],new s.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?hu.unblended:hu.alphaBlended}depthModeForSublayer(c,m,E){return this.opaquePassEnabledForLayer()?new js(E||this.context.gl.LEQUAL,m,[c=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon,c]):js.disabled}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,m){this.style=c,this.options=m,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(k.now()),this.imageManager.beginFrame();var E=this.style._order,O=this.style.sourceCaches,B={},ae={},he={};for(const sn in O){var Ee=O[sn];Ee.used&&Ee.prepare(this.context),B[sn]=Ee.getVisibleCoordinates(),ae[sn]=B[sn].slice().reverse(),he[sn]=Ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let sn=0;sn<E.length;sn++)if(this.style._layers[E[sn]].is3D()){this.opaquePassCutoff=sn;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const sn of E){var Ge,Re=this.style._layers[sn];Re.hasOffscreenPass()&&!Re.isHidden(this.transform.zoom)&&(Ge=ae[Re.source],"custom"===Re.type||Ge.length)&&this.renderLayer(this,O[Re.source],Re,Ge)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;0<=this.currentLayer;this.currentLayer--){var qe=this.style._layers[E[this.currentLayer]],ft=O[qe.source],Ct=B[qe.source];this._renderTileClippingMasks(qe,Ct),this.renderLayer(this,ft,qe,Ct)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){var Rt,Mt=this.style._layers[E[this.currentLayer]],on=O[Mt.source];this.renderToTexture&&this.renderToTexture.renderLayer(Mt)||(Rt=("symbol"===Mt.type?he:ae)[Mt.source],this._renderTileClippingMasks(Mt,B[Mt.source]),this.renderLayer(this,on,Mt,Rt))}this.options.showTileBoundaries&&(m=function wF(x,c){let m=null;var E=(O=Object.values(x._layers).flatMap(ae=>ae.source&&!ae.isHidden(c)?[x.sourceCaches[ae.source]]:[])).filter(ae=>"vector"===ae.getSource().type),O=O.filter(ae=>"vector"!==ae.getSource().type);const B=ae=>{(!m||m.getSource().maxzoom<ae.getSource().maxzoom)&&(m=ae)};return E.forEach(ae=>B(ae)),m||O.forEach(ae=>B(ae)),m}(this.style,this.transform.zoom))&&function N1(x,c,m){for(let Rt=0;Rt<m.length;Rt++){E=void 0,Ct=void 0,O=void 0,B=void 0,Ee=void 0,ft=void 0;var E=x,Ct=c,O=m[Rt],B=E.context,ae=B.gl,he=O.posMatrix,Ee=E.useProgram("debug"),ke=js.disabled,Ge=Xl.disabled,Re=E.colorModeForRenderPass(),qe=E.style.map.terrain&&E.style.map.terrain.getTerrainData(O),ft=(B.activeTexture.set(ae.TEXTURE0),(ft=Ct.getTileByID(O.key).latestRawTileData)&&ft.byteLength||0);ft=Math.floor(ft/1024),Ct=Ct.getTile(O).tileSize,Ct=512/Math.min(Ct,512)*(O.overscaledZ/E.transform.zoom)*.5;let Mt=O.canonical.toString();O.overscaledZ!==O.canonical.z&&(Mt+=" => "+O.overscaledZ),function(on,sn){on.initDebugOverlayCanvas();var cn=on.debugOverlayCanvas,Wn=on.context.gl,Qn=on.debugOverlayCanvas.getContext("2d");Qn.clearRect(0,0,cn.width,cn.height),Qn.shadowColor="white",Qn.shadowBlur=2,Qn.lineWidth=1.5,Qn.strokeStyle="white",Qn.textBaseline="top",Qn.font="bold 36px Open Sans, sans-serif",Qn.fillText(sn,5,5),Qn.strokeText(sn,5,5),on.debugOverlayTexture.update(cn),on.debugOverlayTexture.bind(Wn.LINEAR,Wn.CLAMP_TO_EDGE)}(E,O=Mt+` ${ft}kB`),Ee.draw(B,ae.TRIANGLES,ke,Ge,hu.alphaBlended,El.disabled,lk(he,s.Color.transparent,Ct),null,"$debug",E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),Ee.draw(B,ae.LINE_STRIP,ke,Ge,Re,El.disabled,lk(he,s.Color.red),qe,"$debug",E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}}(this,m,m.getVisibleCoordinates()),this.options.showPadding&&function SF(x){var c,m,E;HT(c=x,(m=(bk(x,x.transform.height-((E=x.transform.padding).top||0),3,vk),bk(x,E.bottom||0,3,EF),Ek(x,E.left||0,3,Kb),Ek(x,x.transform.width-(E.right||0),3,FT),E=x.transform.centerPoint).x)-1,(x=x.transform.height-E.y)-10,2,20,E=Ck),HT(c,m-10,x-1,20,2,E)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(this.style&&this.style.map&&this.style.map.terrain){var m=this.terrainFacilitator.matrix,E=this.transform.projMatrix;let O=this.terrainFacilitator.dirty;(O=(O=O||(c?!s.exactEquals(m,E):!s.equals(m,E)))||0<this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length)&&(s.copy(m,E),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function AF(x,c){var m=x.context,E=m.gl,O=hu.unblended,B=new js(E.LEQUAL,js.ReadWrite,[0,1]),ae=c.getTerrainMesh(),he=c.sourceCache.getRenderableTiles(),Ee=x.useProgram("terrainDepth");m.bindFramebuffer.set(c.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),m.clear({color:s.Color.transparent,depth:1});for(const Re of he){var ke=c.getTerrainData(Re.tileID),Ge={u_matrix:x.transform.calculatePosMatrix(Re.tileID.toUnwrapped()),u_ele_delta:c.getMeshFrameDelta(x.transform.zoom)};Ee.draw(m,E.TRIANGLES,B,Xl.disabled,O,El.backCCW,Ge,ke,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function IF(x,c){var m=x.context,E=m.gl,O=hu.unblended,B=new js(E.LEQUAL,js.ReadWrite,[0,1]),ae=c.getTerrainMesh(),he=c.getCoordsTexture(),Ee=c.sourceCache.getRenderableTiles(),ke=x.useProgram("terrainCoords");m.bindFramebuffer.set(c.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),m.clear({color:s.Color.transparent,depth:1}),c.coordsIndex=[];for(const qe of Ee){var Ge=c.getTerrainData(qe.tileID),Re={u_matrix:(m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,he.texture),Re=x.transform.calculatePosMatrix(qe.tileID.toUnwrapped())),u_terrain_coords_id:(255-c.coordsIndex.length)/255,u_texture:0,u_ele_delta:c.getMeshFrameDelta(x.transform.zoom)};ke.draw(m,E.TRIANGLES,B,Xl.disabled,O,El.backCCW,Re,Ge,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments),c.coordsIndex.push(qe.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}}renderLayer(c,m,E,O){if(!E.isHidden(this.transform.zoom)&&("background"===E.type||"custom"===E.type||(O||[]).length))switch(this.id=E.id,E.type){case"symbol":!function Dz(x,c,m,E,O){if("translucent"===x.renderPass){var B=Xl.disabled,ae=x.colorModeForRenderPass();if(m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset")){var he=E,Ee=x,ke=m,Ge=c,Re=m.layout.get("text-rotation-alignment"),qe=m.layout.get("text-pitch-alignment"),ft=O,Ct=Ee.transform,Rt="map"===Re,Mt="map"===qe;for(const Cr of he){var on,sn,cn,Qn=Ge.getTile(Cr),Kn=Qn.getBucket(ke);Kn&&Kn.text&&Kn.text.segments.get().length&&(on=s.evaluateSizeForZoom(on=Kn.textSizeData,Ct.zoom),sn=uo(Qn,1,Ee.transform.zoom),sn=Yo(Cr.posMatrix,Mt,Rt,Ee.transform,sn),cn="none"!==ke.layout.get("icon-text-fit")&&Kn.hasIconData(),on)&&(Qn=Math.pow(2,Ct.zoom-Qn.tileID.overscaledZ),function(ur,$r,mi,Yi,So,wo,Xi,Zr,po,ta,zi){var gs=ur.text.placedSymbolArray,Hc=ur.text.dynamicLayoutVertexArray,cs=ur.icon.dynamicLayoutVertexArray,Ms={};Hc.clear();for(let al=0;al<gs.length;al++){var ya=gs.get(al),Uc=ur.allowVerticalPlacement&&!ya.placedOrientation;if(Uc=ya.hidden||!ya.crossTileID||Uc?null:Yi[ya.crossTileID]){var Os=new s.Point(ya.anchorX,ya.anchorY),Sc=xe(Os,mi?Xi:wo,zi),mh=je(So.cameraToCenterDistance,Sc.signedDistanceFromCamera);let Sl=s.evaluateSizeForFeature(ur.textSizeData,po,ya)*mh/s.ONE_EM;mi&&(Sl*=ur.tilePixelRatio/Zr);var{width:mh,height:Uc,anchor:_h,textOffset:Od,textBoxScale:qg}=Uc,_h=function(Nl,Du,Tv,Fm,Qu,Hm){var{horizontalAlign:Nl,verticalAlign:Av}=s.getAnchorAlignment(Nl);return new s.Point(((Nl=-(Nl-.5)*Du)/Qu+Fm[0])*Hm,((Du=-(Av-.5)*Tv)/Qu+Fm[1])*Hm)}(_h,mh,Uc,Od,qg,Sl),Zl=mi?xe(Os.add(_h),wo,zi).point:Sc.point.add($r?_h.rotate(-So.angle):_h),gu=ur.allowVerticalPlacement&&ya.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Jl=0;Jl<ya.numGlyphs;Jl++)s.addDynamicAttributes(Hc,Zl,gu);ta&&0<=ya.associatedIconIndex&&(Ms[ya.associatedIconIndex]={shiftedAnchor:Zl,angle:gu})}else Sr(ya.numGlyphs,Hc)}if(ta){cs.clear();var Lm=ur.icon.placedSymbolArray;for(let al=0;al<Lm.length;al++){var ol=Lm.get(al);if(ol.hidden)Sr(ol.numGlyphs,cs);else{var yh=Ms[al];if(yh)for(let Sl=0;Sl<ol.numGlyphs;Sl++)s.addDynamicAttributes(cs,yh.shiftedAnchor,yh.angle);else Sr(ol.numGlyphs,cs)}}ur.icon.dynamicLayoutVertexBuffer.updateData(cs)}ur.text.dynamicLayoutVertexBuffer.updateData(Hc)}(Kn,Rt,Mt,ft,Ct,sn,Cr.posMatrix,Qn,on,cn,Ee.style.map.terrain?(ur,$r)=>Ee.style.map.terrain.getElevation(Cr,ur,$r):null))}}0!==m.paint.get("icon-opacity").constantOr(1)&&EP(x,c,m,E,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),B,ae),0!==m.paint.get("text-opacity").constantOr(1)&&EP(x,c,m,E,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),B,ae),c.map.showCollisionBoxes&&(_F(x,c,m,E,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),_F(x,c,m,E,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))}}(c,m,E,O,this.style.placement.variableOffsets);break;case"circle":!function SP(x,c,m,E){if("translucent"===x.renderPass){var O=m.paint.get("circle-opacity"),B=m.paint.get("circle-stroke-width"),ae=m.paint.get("circle-stroke-opacity"),he=!m.layout.get("circle-sort-key").isConstant();if(0!==O.constantOr(1)||0!==B.constantOr(1)&&0!==ae.constantOr(1)){var Ee=x.context,ke=Ee.gl,Ge=x.depthModeForSublayer(0,js.ReadOnly),Re=Xl.disabled,qe=x.colorModeForRenderPass(),ft=[];for(let Xi=0;Xi<E.length;Xi++){var Ct=E[Xi],Rt=c.getTile(Ct),Mt=Rt.getBucket(m);if(Mt){var on=Mt.programConfigurations.get(m.id),sn=x.useProgram("circle",on),cn=Mt.layoutVertexBuffer,Wn=Mt.indexBuffer,Qn=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ct),Kn={programConfiguration:on,program:sn,layoutVertexBuffer:cn,indexBuffer:Wn,uniformValues:((Zr,po,ta,zi)=>{var gs,Hc=Zr.transform;let cs,Ms;return Ms="map"===zi.paint.get("circle-pitch-alignment")?(cs=!0,[gs=uo(ta,1,Hc.zoom),gs]):(cs=!1,Hc.pixelsToGLUnits),{u_camera_to_center_distance:Hc.cameraToCenterDistance,u_scale_with_map:+("map"===zi.paint.get("circle-pitch-scale")),u_matrix:Zr.translatePosMatrix(po.posMatrix,ta,zi.paint.get("circle-translate"),zi.paint.get("circle-translate-anchor")),u_pitch_with_map:+cs,u_device_pixel_ratio:Zr.pixelRatio,u_extrude_scale:Ms}})(x,Ct,Rt,m),terrainData:Qn};if(he)for(const Zr of Mt.segments.get())ft.push({segments:new s.SegmentVector([Zr]),sortKey:Zr.sortKey,state:Kn});else ft.push({segments:Mt.segments,sortKey:0,state:Kn})}}he&&ft.sort((Xi,Zr)=>Xi.sortKey-Zr.sortKey);for(const Xi of ft){var{programConfiguration:Cr,program:ur,layoutVertexBuffer:$r,indexBuffer:mi,uniformValues:Yi,terrainData:So}=Xi.state;ur.draw(Ee,ke.TRIANGLES,Ge,Re,qe,El.disabled,Yi,So,m.id,$r,mi,Xi.segments,m.paint,x.transform.zoom,Cr)}}}}(c,m,E,O);break;case"heatmap":!function mk(x,c,m,E){if(0!==m.paint.get("heatmap-opacity"))if("offscreen"===x.renderPass){var O=x.context,B=O.gl,ae=Xl.disabled,he=new hu([B.ONE,B.ONE],s.Color.transparent,[!0,!0,!0,!0]);{var ke=x,Ge=m;(Ee=O).activeTexture.set((Re=Ee.gl).TEXTURE1),Ee.viewport.set([0,0,ke.width/4,ke.height/4]);let cn=Ge.heatmapFbo;cn?(Re.bindTexture(Re.TEXTURE_2D,cn.colorAttachment.get()),Ee.bindFramebuffer.set(cn.framebuffer)):(sn=Re.createTexture(),Re.bindTexture(Re.TEXTURE_2D,sn),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_WRAP_S,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_WRAP_T,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_MIN_FILTER,Re.LINEAR),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_MAG_FILTER,Re.LINEAR),cn=Ge.heatmapFbo=Ee.createFramebuffer(ke.width/4,ke.height/4,!1,!1),Kn=sn,Cr=cn,ur=(mi=Ee).gl,$r=null!=($r=mi.HALF_FLOAT)?$r:ur.UNSIGNED_BYTE,mi=null!=(mi=mi.RGBA16F)?mi:ur.RGBA,ur.texImage2D(ur.TEXTURE_2D,0,mi,(Qn=ke).width/4,Qn.height/4,0,ur.RGBA,$r,null),Cr.colorAttachment.set(Kn))}O.clear({color:s.Color.transparent});for(let cn=0;cn<E.length;cn++){var qe,ft,Ct,Rt,Mt,on=E[cn];c.hasRenderableParent(on)||(ft=(qe=c.getTile(on)).getBucket(m))&&(Ct=ft.programConfigurations.get(m.id),(Rt=x.useProgram("heatmap",Ct)).draw(O,B.TRIANGLES,js.disabled,ae,he,El.disabled,(Rt=on.posMatrix,on=qe,qe=x.transform.zoom,Mt=m.paint.get("heatmap-intensity"),{u_matrix:Rt,u_extrude_scale:uo(on,1,qe),u_intensity:Mt}),null,m.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,m.paint,x.transform.zoom,Ct))}O.viewport.set([0,0,x.width,x.height])}else if("translucent"===x.renderPass){x.context.setColorMode(x.colorModeForRenderPass()),ke=(Ee=(Re=x).context).gl;var Re,Ee,sn=(Ge=m).heatmapFbo;if(sn){Ee.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,sn.colorAttachment.get()),Ee.activeTexture.set(ke.TEXTURE1);let Cr=Ge.colorRampTexture;(Cr=Cr||(Ge.colorRampTexture=new Zn(Ee,Ge.colorRamp,ke.RGBA))).bind(ke.LINEAR,ke.CLAMP_TO_EDGE),Re.useProgram("heatmapTexture").draw(Ee,ke.TRIANGLES,js.disabled,Xl.disabled,Re.colorModeForRenderPass(),El.disabled,((B,c,m,E)=>{var O=s.create();return{u_matrix:O,u_world:[(s.ortho(O,0,B.width,B.height,0,0,1),B=B.context.gl).drawingBufferWidth,B.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:c.paint.get("heatmap-opacity")}})(Re,Ge),null,Ge.id,Re.viewportBuffer,Re.quadTriangleIndexBuffer,Re.viewportSegments,Ge.paint,Re.transform.zoom)}}var mi,Qn,Kn,Cr,ur,$r}(c,m,E,O);break;case"line":!function vF(x,c,m,E){if("translucent"===x.renderPass){var O=m.paint.get("line-opacity"),B=m.paint.get("line-width");if(0!==O.constantOr(1)&&0!==B.constantOr(1)){var ae,he,Ee,ke,Ge,Re,qe,ft,Ct,Rt,Mt=x.depthModeForSublayer(0,js.ReadOnly),on=x.colorModeForRenderPass(),sn=m.paint.get("line-dasharray"),cn=m.paint.get("line-pattern"),Wn=cn.constantOr(1),Qn=m.paint.get("line-gradient"),Kn=m.getCrossfadeParameters(),Cr=Wn?"linePattern":sn?"lineSDF":Qn?"lineGradient":"line",ur=x.context,$r=ur.gl;let Hc=!0;for(const cs of E){var mi=c.getTile(cs);if(!Wn||mi.patternsLoaded()){var Yi=mi.getBucket(m);if(Yi){var So,wo,Xi=Yi.programConfigurations.get(m.id),po=x.context.program.get(),Zr=x.useProgram(Cr,Xi),ta=(po=Hc||Zr.program!==po,x.style.map.terrain&&x.style.map.terrain.getTerrainData(cs)),zi=((zi=cn.constantOr(null))&&mi.imageAtlas&&(So=(wo=mi.imageAtlas).patternPositions[zi.to.toString()],wo=wo.patternPositions[zi.from.toString()],So)&&wo&&Xi.setConstantPatternPositions(So,wo),ta?cs:null),gs=Wn?(wo=m,qe=Kn,ft=zi,Rt=Ct=void 0,Rt=uF(So=mi,Ct=(Re=x).transform),{u_matrix:dF(Re,So,wo,ft),u_texsize:So.imageAtlasTexture.size,u_ratio:1/uo(So,1,Ct.zoom),u_device_pixel_ratio:Re.pixelRatio,u_image:0,u_scale:[Rt,qe.fromScale,qe.toScale],u_fade:qe.t,u_units_to_pixels:[1/Ct.pixelsToGLUnits[0],1/Ct.pixelsToGLUnits[1]]}):sn?(Re=m,Rt=sn,qe=Kn,Ct=zi,Ge=ke=gs=ke=he=Ee=he=void 0,he=(ae=x).transform,Ee=ae.lineAtlas,he=uF(ft=mi,he),ke="round"===Re.layout.get("line-cap"),gs=Ee.getDash(Rt.from,ke),Rt=Ee.getDash(Rt.to,ke),ke=gs.width*qe.fromScale,Ge=Rt.width*qe.toScale,s.extend(sP(ae,ft,Re,Ct),{u_patternscale_a:[he/ke,-gs.height/2],u_patternscale_b:[he/Ge,-Rt.height/2],u_sdfgamma:Ee.width/(256*Math.min(ke,Ge)*ae.pixelRatio)/2,u_image:0,u_tex_y_a:gs.y,u_tex_y_b:Rt.y,u_mix:qe.t})):Qn?(Ge=Yi.lineClipsArray.length,s.extend(sP(he=x,Ee=mi,ke=m,ae=zi),{u_image:0,u_image_height:Ge})):sP(x,mi,m,zi);if(Wn)ur.activeTexture.set($r.TEXTURE0),mi.imageAtlasTexture.bind($r.LINEAR,$r.CLAMP_TO_EDGE),Xi.updatePaintBuffers(Kn);else if(sn&&(po||x.lineAtlas.dirty))ur.activeTexture.set($r.TEXTURE0),x.lineAtlas.bind(ur);else if(Qn){let Ms=(zi=Yi.gradients[m.id]).texture;if(m.gradientVersion!==zi.version){let ya=256;m.stepInterpolant&&(mi=c.getSource().maxzoom,po=cs.canonical.z===mi?Math.ceil(1<<x.transform.maxZoom-cs.canonical.z):1,ya=s.clamp(s.nextPowerOfTwo(1024*(mi=Yi.maxLineLength/s.EXTENT)*po),256,ur.maxTextureSize)),zi.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:ya,image:zi.gradient||void 0,clips:Yi.lineClipsArray}),zi.texture?zi.texture.update(zi.gradient):zi.texture=new Zn(ur,zi.gradient,$r.RGBA),zi.version=m.gradientVersion,Ms=zi.texture}ur.activeTexture.set($r.TEXTURE0),Ms.bind(m.stepInterpolant?$r.NEAREST:$r.LINEAR,$r.CLAMP_TO_EDGE)}Zr.draw(ur,$r.TRIANGLES,Mt,x.stencilModeForClipping(cs),on,El.disabled,gs,ta,m.id,Yi.layoutVertexBuffer,Yi.indexBuffer,Yi.segments,m.paint,x.transform.zoom,Xi,Yi.layoutVertexBuffer2),Hc=!1}}}}}}(c,m,E,O);break;case"fill":!function wP(x,c,m,E){var O,B,ae=m.paint.get("fill-color"),he=m.paint.get("fill-opacity");0!==he.constantOr(1)&&(O=x.colorModeForRenderPass(),B=m.paint.get("fill-pattern"),B=x.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===ae.constantOr(s.Color.transparent).a&&1===he.constantOr(0)?"opaque":"translucent",x.renderPass===B&&(ae=x.depthModeForSublayer(1,"opaque"===x.renderPass?js.ReadWrite:js.ReadOnly),CF(x,c,m,E,ae,O,!1)),"translucent"===x.renderPass)&&m.paint.get("fill-antialias")&&(he=x.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,js.ReadOnly),CF(x,c,m,E,he,O,!0))}(c,m,E,O);break;case"fill-extrusion":!function bF(x,c,m,E){var O,B=m.paint.get("fill-extrusion-opacity");0!==B&&"translucent"===x.renderPass&&(O=new js(x.context.gl.LEQUAL,js.ReadWrite,x.depthRangeFor3D),1!==B||m.paint.get("fill-extrusion-pattern").constantOr(1)?(pu(x,c,m,E,O,Xl.disabled,hu.disabled),pu(x,c,m,E,O,x.stencilModeFor3D(),x.colorModeForRenderPass())):(B=x.colorModeForRenderPass(),pu(x,c,m,E,O,Xl.disabled,B)))}(c,m,E,O);break;case"hillshade":!function x1(x,c,m,E){if("offscreen"===x.renderPass||"translucent"===x.renderPass){var O=x.context,B=x.depthModeForSublayer(0,js.ReadOnly),ae=x.colorModeForRenderPass(),[he,E]="translucent"===x.renderPass?x.stencilConfigForOverlap(E):[{},E];for(const Kn of E){var Ee=c.getTile(Kn);if(void 0!==Ee.needsHillshadePrepare&&Ee.needsHillshadePrepare&&"offscreen"===x.renderPass){Wn=cn=sn=on=Mt=Rt=Ct=ft=qe=Re=Ge=ke=void 0;var ke=x,Ge=Ee,Re=m,qe=B,ft=Xl.disabled,Ct=ae,Rt=ke.context,Mt=Rt.gl,on=Ge.dem;if(on&&on.data){var sn=on.dim,cn=on.stride,Wn=on.getPixels();Rt.activeTexture.set(Mt.TEXTURE1),Rt.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||ke.getTileTexture(cn),(Ge.demTexture?((cn=Ge.demTexture).update(Wn,{premultiply:!1}),cn):(Ge.demTexture=new Zn(Rt,Wn,Mt.RGBA,{premultiply:!1}),Ge.demTexture)).bind(Mt.NEAREST,Mt.CLAMP_TO_EDGE),Rt.activeTexture.set(Mt.TEXTURE0);let Cr=Ge.fbo;Cr||((cn=new Zn(Rt,{width:sn,height:sn,data:null},Mt.RGBA)).bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE),(Cr=Ge.fbo=Rt.createFramebuffer(sn,sn,!0,!1)).colorAttachment.set(cn.texture)),Rt.bindFramebuffer.set(Cr.framebuffer),Rt.viewport.set([0,0,sn,sn]),ke.useProgram("hillshadePrepare").draw(Rt,Mt.TRIANGLES,qe,ft,Ct,El.disabled,lF(Ge.tileID,on),null,Re.id,ke.rasterBoundsBuffer,ke.quadTriangleIndexBuffer,ke.rasterBoundsSegments),Ge.needsHillshadePrepare=!1}}else"translucent"===x.renderPass&&(cn=Kn,Rt=m,Mt=B,qe=he[Kn.overscaledZ],ft=ae,Ge=ke=Re=on=Ct=void 0,on=(Ct=(Wn=x).context).gl,Re=(sn=Ee).fbo)&&(ke=Wn.useProgram("hillshade"),Ge=Wn.style.map.terrain&&Wn.style.map.terrain.getTerrainData(cn),Ct.activeTexture.set(on.TEXTURE0),on.bindTexture(on.TEXTURE_2D,Re.colorAttachment.get()),ke.draw(Ct,on.TRIANGLES,Mt,qe,ft,El.disabled,cF(Wn,sn,Rt,Re=Ge?cn:null),Ge,Rt.id,Wn.rasterBoundsBuffer,Wn.quadTriangleIndexBuffer,Wn.rasterBoundsSegments))}O.viewport.set([0,0,x.width,x.height])}}(c,m,E,O);break;case"raster":!function ig(x,c,m,E){if("translucent"===x.renderPass&&0!==m.paint.get("raster-opacity")&&E.length){var O=x.context,B=O.gl,ae=c.getSource(),he=x.useProgram("raster"),Ee=x.colorModeForRenderPass(),[ke,E]=ae instanceof Pe?[{},E]:x.stencilConfigForOverlap(E),Ge=E[E.length-1].overscaledZ,Re=!x.options.moving;for(const sn of E){var qe=x.depthModeForSublayer(sn.overscaledZ-Ge,1===m.paint.get("raster-opacity")?js.ReadWrite:js.ReadOnly,B.LESS),Ct=((Mt=c.getTile(sn)).registerFadeDuration(m.paint.get("raster-fade-duration")),c.findLoadedParent(sn,0)),ft=(Qn=Mt,Kn=Ct,Cr=c,$r=x.transform,mi=x.style.map.terrain,Yi=void 0,ur=(ur=m).paint.get("raster-fade-duration"),!mi&&0<ur?(Yi=((mi=k.now())-Qn.timeAdded)/ur,mi=Kn?(mi-Kn.timeAdded)/ur:-1,ur=Cr.getSource(),Cr=$r.coveringZoomLevel({tileSize:ur.tileSize,roundZoom:ur.roundZoom}),ur=($r=!Kn||Math.abs(Kn.tileID.overscaledZ-Cr)>Math.abs(Qn.tileID.overscaledZ-Cr))&&Qn.refreshedUponExpiration?1:s.clamp($r?Yi:1-mi,0,1),Qn.refreshedUponExpiration&&1<=Yi&&(Qn.refreshedUponExpiration=!1),Kn?{opacity:1,mix:1-ur}:{opacity:ur,mix:0}):{opacity:1,mix:0});let cn,Wn;var Rt="nearest"===m.paint.get("raster-resampling")?B.NEAREST:B.LINEAR,Mt=(O.activeTexture.set(B.TEXTURE0),Mt.texture.bind(Rt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(B.TEXTURE1),Ct?(Ct.texture.bind(Rt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),cn=Math.pow(2,Ct.tileID.overscaledZ-Mt.tileID.overscaledZ),Wn=[Mt.tileID.canonical.x*cn%1,Mt.tileID.canonical.y*cn%1]):Mt.texture.bind(Rt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Rt=(Mt=(Ct=x.style.map.terrain&&x.style.map.terrain.getTerrainData(sn))?sn:null)?Mt.posMatrix:x.transform.calculatePosMatrix(sn.toUnwrapped(),Re),M1(Rt,Wn||[0,0],cn||1,ft,m));ae instanceof Pe?he.draw(O,B.TRIANGLES,qe,Xl.disabled,Ee,El.disabled,Mt,Ct,m.id,ae.boundsBuffer,x.quadTriangleIndexBuffer,ae.boundsSegments):he.draw(O,B.TRIANGLES,qe,ke[sn.overscaledZ],Ee,El.disabled,Mt,Ct,m.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}}var Qn,Kn,Cr,ur,$r,mi,Yi}(c,m,E,O);break;case"background":!function yk(x,c,m,E){var O=m.paint.get("background-color"),B=m.paint.get("background-opacity");if(0!==B){var ae=x.context,he=ae.gl,Ee=x.transform,ke=Ee.tileSize,Ge=m.paint.get("background-pattern");if(!x.isPatternMissing(Ge)){var Re=!Ge&&1===O.a&&1===B&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass===Re){var qe=Xl.disabled,ft=x.depthModeForSublayer(0,"opaque"==Re?js.ReadWrite:js.ReadOnly),Ct=x.colorModeForRenderPass(),Rt=x.useProgram(Ge?"backgroundPattern":"background"),Mt=(Re=E||Ee.coveringTiles({tileSize:ke,terrain:x.style.map.terrain}),Ge&&(ae.activeTexture.set(he.TEXTURE0),x.imageManager.bind(x.context)),m.getCrossfadeParameters());for(const Wn of Re){var on=E?Wn.posMatrix:x.transform.calculatePosMatrix(Wn.toUnwrapped()),sn=(on=Ge?cP(on,B,x,Ge,{tileID:Wn,tileSize:ke},Mt):{u_matrix:on,u_opacity:B,u_color:O},x.style.map.terrain&&x.style.map.terrain.getTerrainData(Wn));Rt.draw(ae,he.TRIANGLES,ft,qe,Ct,El.disabled,on,sn,m.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}}}}(c,0,E,O);break;case"custom":!function TF(x,c,B){var E,O=x.context;B=B.implementation,"offscreen"===x.renderPass?(E=B.prerender)&&(x.setCustomLayerDefaults(),O.setColorMode(x.colorModeForRenderPass()),E.call(B,O.gl,x.transform.customLayerMatrix()),O.setDirty(),x.setBaseState()):"translucent"===x.renderPass&&(x.setCustomLayerDefaults(),O.setColorMode(x.colorModeForRenderPass()),O.setStencilMode(Xl.disabled),E="3d"===B.renderingMode?new js(x.context.gl.LEQUAL,js.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,js.ReadOnly),O.setDepthMode(E),B.render(O.gl,x.transform.customLayerMatrix()),O.setDirty(),x.setBaseState(),O.bindFramebuffer.set(null))}(c,0,E)}}translatePosMatrix(c,m,E,O,B){var ae;return E[0]||E[1]?((O=B?"map"===O?this.transform.angle:0:"viewport"===O?-this.transform.angle:0)&&(ae=Math.sin(O),O=Math.cos(O),E=[E[0]*O-E[1]*ae,E[0]*ae+E[1]*O]),ae=[B?E[0]:uo(m,E[0],this.transform.zoom),B?E[1]:uo(m,E[1],this.transform.zoom),0],O=new Float32Array(16),s.translate(O,c,ae),O):c}saveTileTexture(c){var m=this._tileTextures[c.size[0]];m?m.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){return(c=this._tileTextures[c])&&0<c.length?c.pop():null}isPatternMissing(c){var m;return!(!c||c.from&&c.to&&(m=this.imageManager.getPattern(c.from.toString()),c=this.imageManager.getPattern(c.to.toString()),m)&&c)}useProgram(c,m){this.cache=this.cache||{};var E=c+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[E]||(this.cache[E]=new oF(this.context,Cv[c],m,lP[c],this._showOverdrawInspector,this.style.map.terrain)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){var c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Zn(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){var{drawingBufferWidth:c,drawingBufferHeight:m}=this.context.gl;return this.width!==c||this.height!==m}}class TP{constructor(c,m){this.points=c,this.planes=m}static fromInvProjectionMatrix(c,m,E){const O=Math.pow(2,E),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ae=>{var he=1/(ae=s.transformMat4([],ae,c))[3]/m*O;return s.mul$1(ae,ae,[he,he,1/ae[3],he])});return E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ae=>{var he=s.sub([],B[ae[0]],B[ae[1]]),Ee=s.sub([],B[ae[2]],B[ae[1]]);return he=s.normalize([],s.cross([],he,Ee)),Ee=-s.dot(he,B[ae[1]]),he.concat(Ee)}),new TP(B,E)}}class J_{constructor(c,m){this.min=c,this.max=m,this.center=s.scale$1([],s.add([],this.min,this.max),.5)}quadrant(c){var m=[c%2==0,c<2],E=s.clone$2(this.min),O=s.clone$2(this.max);for(let B=0;B<m.length;B++)E[B]=(m[B]?this.min:this.center)[B],O[B]=(m[B]?this.center:this.max)[B];return O[2]=this.max[2],new J_(E,O)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersects(c){var m=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let E=!0;for(let ae=0;ae<c.planes.length;ae++){var O=c.planes[ae];let he=0;for(let Ee=0;Ee<m.length;Ee++)0<=s.dot$1(O,m[Ee])&&he++;if(0===he)return 0;he!==m.length&&(E=!1)}if(E)return 2;for(let ae=0;ae<3;ae++){let he=Number.MAX_VALUE,Ee=-Number.MAX_VALUE;for(let ke=0;ke<c.points.length;ke++){var B=c.points[ke][ae]-this.min[ae];he=Math.min(he,B),Ee=Math.max(Ee,B)}if(Ee<0||he>this.max[ae]-this.min[ae])return 0}return 1}}class UT{constructor(c=0,m=0,E=0,O=0){if(isNaN(c)||c<0||isNaN(m)||m<0||isNaN(E)||E<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=m,this.left=E,this.right=O}interpolate(c,m,E){return null!=m.top&&null!=c.top&&(this.top=s.interpolate.number(c.top,m.top,E)),null!=m.bottom&&null!=c.bottom&&(this.bottom=s.interpolate.number(c.bottom,m.bottom,E)),null!=m.left&&null!=c.left&&(this.left=s.interpolate.number(c.left,m.left,E)),null!=m.right&&null!=c.right&&(this.right=s.interpolate.number(c.right,m.right,E)),this}getCenter(c,m){return c=s.clamp((this.left+c-this.right)/2,0,c),m=s.clamp((this.top+m-this.bottom)/2,0,m),new s.Point(c,m)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new UT(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Yp=85.051129;class og{constructor(c,m,E,O,B){this.tileSize=512,this._renderWorldCopies=void 0===B||!!B,this._minZoom=c||0,this._maxZoom=m||22,this._minPitch=E??0,this._maxPitch=O??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new UT,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){var c=new og(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.apply(this),c}apply(c){this.tileSize=c.tileSize,this.latRange=c.latRange,this.width=c.width,this.height=c.height,this._center=c._center,this._elevation=c._elevation,this.minElevationForCurrentTile=c.minElevationForCurrentTile,this.zoom=c.zoom,this.angle=c.angle,this._fov=c._fov,this._pitch=c._pitch,this._unmodified=c._unmodified,this._edgeInsets=c._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(c){void 0===c?c=!0:null===c&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(c){c=-s.wrap(c,-180,180)*Math.PI/180,this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=s.create$2(),s.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){c=s.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI,this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(c){c=Math.min(Math.max(c,this.minZoom),this.maxZoom),this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(c){c!==this._elevation&&(this._elevation=c,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,m,E){this._unmodified=!1,this._edgeInsets.interpolate(c,m,E),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){return c=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize)),Math.max(0,c)}getVisibleUnwrappedCoordinates(c){var m=[new s.UnwrappedTileID(0,c)];if(this._renderWorldCopies){var E=this.pointCoordinate(new s.Point(0,0)),O=this.pointCoordinate(new s.Point(this.width,0)),B=this.pointCoordinate(new s.Point(this.width,this.height)),ae=this.pointCoordinate(new s.Point(0,this.height)),he=Math.floor(Math.min(E.x,O.x,B.x,ae.x)),Ee=Math.floor(Math.max(E.x,O.x,B.x,ae.x));for(let ke=he-1;ke<=Ee+1;ke++)0!==ke&&m.push(new s.UnwrappedTileID(ke,c))}return m}coveringTiles(c){let m=this.coveringZoomLevel(c);var E=m;if(void 0!==c.minzoom&&m<c.minzoom)return[];void 0!==c.maxzoom&&m>c.maxzoom&&(m=c.maxzoom);var O=this.pointCoordinate(this.getCameraPoint()),B=s.MercatorCoordinate.fromLngLat(this.center);const ae=Math.pow(2,m);var he=[ae*O.x,ae*O.y,0],Ee=[ae*B.x,ae*B.y,0],ke=TP.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let Ge=c.minzoom||0;!c.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ge=m);var Re=c.terrain?2/Math.min(this.tileSize,c.tileSize)*this.tileSize:3,qe=So=>({aabb:new J_([So*ae,0,0],[(So+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:So,fullyVisible:!1}),ft=[],Ct=[],Rt=m,Mt=c.reparseOverscaled?E:m;if(this._renderWorldCopies)for(let So=1;So<=3;So++)ft.push(qe(-So)),ft.push(qe(So));for(ft.push(qe(0));0<ft.length;){var on=ft.pop(),sn=on.x,cn=on.y;let So=on.fullyVisible;if(!So){if(0===(Wn=on.aabb.intersects(ke)))continue;So=2===Wn}var Wn,Qn=on.aabb.distanceX(Wn=c.terrain?he:Ee),Kn=on.aabb.distanceY(Wn);if(Qn=Math.max(Math.abs(Qn),Math.abs(Kn)),Kn=Re+(1<<Rt-on.zoom)-2,on.zoom===Rt||Kn<Qn&&on.zoom>=Ge)Qn=he[0]-.5-(sn<<(Kn=Rt-on.zoom)),Kn=he[1]-.5-(cn<<Kn),Ct.push({tileID:new s.OverscaledTileID(on.zoom===Rt?Mt:on.zoom,on.wrap,on.zoom,sn,cn),distanceSq:s.sqrLen([Ee[0]-.5-sn,Ee[1]-.5-cn]),tileDistanceToCamera:Math.sqrt(Qn*Qn+Kn*Kn)});else for(let wo=0;wo<4;wo++){var Cr,ur,$r=(sn<<1)+wo%2,mi=(cn<<1)+(wo>>1),Yi=on.zoom+1;let Xi=on.aabb.quadrant(wo);c.terrain&&(ur=new s.OverscaledTileID(Yi,on.wrap,Yi,$r,mi),Cr=null!=(Cr=(ur=c.terrain.getMinMaxElevation(ur)).minElevation)?Cr:this.elevation,ur=null!=(ur=ur.maxElevation)?ur:this.elevation,Xi=new J_([Xi.min[0],Xi.min[1],Cr],[Xi.max[0],Xi.max[1],ur])),ft.push({aabb:Xi,zoom:Yi,x:$r,y:mi,wrap:on.wrap,fullyVisible:So})}}return Ct.sort((So,wo)=>So.distanceSq-wo.distanceSq).map(So=>So.tileID)}resize(c,m){this.width=c,this.height=m,this.pixelsToGLUnits=[2/c,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){var m=s.clamp(c.lat,-Yp,Yp);return new s.Point(s.mercatorXfromLng(c.lng)*this.worldSize,s.mercatorYfromLat(m)*this.worldSize)}unproject(c){return new s.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(B){var m=this.elevation,E=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,O=this.pointLocation(this.centerPoint,B);B=B.getElevationForLngLatZoom(O,this.tileZoom),this.elevation-B&&(E=E+m-B,m=Math.cos(this._pitch)*this.cameraToCenterDistance/E/s.mercatorZfromAltitude(1,O.lat)/this.tileSize,E=this.scaleZoom(m),this._elevation=B,this._center=O,this.zoom=E)}setLocationAtPoint(B,E){E=this.pointCoordinate(E);var O=this.pointCoordinate(this.centerPoint);B=this.locationCoordinate(B),B=new s.MercatorCoordinate(B.x-(E.x-O.x),B.y-(E.y-O.y)),this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(c,m){return m?this.coordinatePoint(this.locationCoordinate(c),m.getElevationForLngLatZoom(c,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(c))}pointLocation(c,m){return this.coordinateLocation(this.pointCoordinate(c,m))}locationCoordinate(c){return s.MercatorCoordinate.fromLngLat(c)}coordinateLocation(c){return c&&c.toLngLat()}pointCoordinate(O,E){if(E&&null!=(E=E.pointCoordinate(O)))return E;E=[O.x,O.y,0,1],O=[O.x,O.y,1,1];var Ge,B=(s.transformMat4(E,E,this.pixelMatrixInverse),s.transformMat4(O,O,this.pixelMatrixInverse),E[3]),ae=O[3],he=E[1]/B,Ee=O[1]/ae,ke=E[2]/B;return new s.MercatorCoordinate(s.interpolate.number(E[0]/B,O[0]/ae,Ge=ke==(Ge=O[2]/ae)?0:(0-ke)/(Ge-ke))/this.worldSize,s.interpolate.number(he,Ee,Ge)/this.worldSize)}coordinatePoint(c,m=0,E=this.pixelMatrix){return s.transformMat4(c=[c.x*this.worldSize,c.y*this.worldSize,m,1],c,E),new s.Point(c[0]/c[3],c[1]/c[3])}getBounds(){var c=Math.max(0,this.height/2-this.getHorizon());return(new er).extend(this.pointLocation(new s.Point(0,c))).extend(this.pointLocation(new s.Point(this.width,c))).extend(this.pointLocation(new s.Point(this.width,this.height))).extend(this.pointLocation(new s.Point(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new er([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-Yp,Yp])}calculatePosMatrix(c,m=!1){var E,O,B,ae=c.key,he=m?this._alignedPosMatrixCache:this._posMatrixCache;return he[ae]||(O=this.worldSize/this.zoomScale((E=c.canonical).z),c=E.x+Math.pow(2,E.z)*c.wrap,B=s.identity(new Float64Array(16)),s.translate(B,B,[c*O,E.y*O,0]),s.scale(B,B,[O/s.EXTENT,O/s.EXTENT,1]),s.multiply(B,m?this.alignedProjMatrix:this.projMatrix,B),he[ae]=new Float32Array(B)),he[ae]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(Ct,m){m=s.clamp(+m,this.minZoom,this.maxZoom),m={center:new s.LngLat(Ct.lng,Ct.lat),zoom:m};let E=this.lngRange;this._renderWorldCopies||null!==E||(E=[-(180-1e-10),180-1e-10]);var O=this.tileSize*this.zoomScale(m.zoom);let B=0,ae=O,he=0,Ee=O,ke=0,Ge=0;var{x:Re,y:qe}=this.size,{x:ft,y:Ct}=(this.latRange&&(B=s.mercatorYfromLat((ft=this.latRange)[1])*O,(ae=s.mercatorYfromLat(ft[0])*O)-B<qe)&&(ke=qe/(ae-B)),E&&(he=s.wrap(s.mercatorXfromLng(E[0])*O,0,O),(Ee=s.wrap(s.mercatorXfromLng(E[1])*O,0,O))<he&&(Ee+=O),Ee-he<Re)&&(Ge=Re/(Ee-he)),this.project.call({worldSize:O},Ct));let Rt,Mt;var on,sn=Math.max(Ge||0,ke||0);if(sn)on=new s.Point(Ge?(Ee+he)/2:ft,ke?(ae+B)/2:Ct),m.center=this.unproject.call({worldSize:O},on).wrap(),m.zoom+=this.scaleZoom(sn);else{if(this.latRange&&(Ct-(on=qe/2)<B&&(Mt=B+on),Ct+on>ae)&&(Mt=ae-on),E){sn=(he+Ee)/2;let cn=ft;qe=Re/2,(cn=this._renderWorldCopies?s.wrap(ft,sn-O/2,sn+O/2):cn)-qe<he&&(Rt=he+qe),cn+qe>Ee&&(Rt=Ee-qe)}void 0===Rt&&void 0===Mt||(on=new s.Point(Rt??ft,Mt??Ct),m.center=this.unproject.call({worldSize:O},on).wrap())}return m}_constrain(){var c,m,E;this.center&&this.width&&this.height&&!this._constraining&&(this._constraining=!0,c=this._unmodified,({center:m,zoom:E}=this.getConstrained(this.center,this.zoom)),this.center=m,this.zoom=E,this._unmodified=c,this._constraining=!1)}_calcMatrices(){if(this.height){var O=this._fov/2,B=this.centerOffset,ae=this.point.x,he=this.point.y;this.cameraToCenterDistance=.5/Math.tan(O)*this.height,this._pixelPerMeter=s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let Ee=s.identity(new Float64Array(16));s.scale(Ee,Ee,[this.width/2,-this.height/2,1]),s.translate(Ee,Ee,[1,-1,0]),this.labelPlaneMatrix=Ee,Ee=s.identity(new Float64Array(16)),s.scale(Ee,Ee,[1,-1,1]),s.translate(Ee,Ee,[-1,-1,0]),s.scale(Ee,Ee,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ee;var E=(O=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch))-(m=Math.min(this.elevation,this.minElevationForCurrentTile))*this._pixelPerMeter/Math.cos(this._pitch),m=m<0?E:O,c=(E=Math.PI/2+this._pitch,O=this._fov*(.5+B.y/this.height),O=Math.sin(O)*m/Math.sin(s.clamp(Math.PI-E-O,.01,Math.PI-.01)),this.getHorizon());if(c=2*Math.atan(c/this.cameraToCenterDistance)*(.5+B.y/(2*c)),E=Math.sin(c)*m/Math.sin(s.clamp(Math.PI-E-c,.01,Math.PI-.01)),c=Math.min(O,E),O=1.01*(Math.cos(Math.PI/2-this._pitch)*c+m),E=this.height/50,Ee=new Float64Array(16),s.perspective(Ee,this._fov,this.width/this.height,E,O),Ee[8]=2*-B.x/this.width,Ee[9]=2*B.y/this.height,s.scale(Ee,Ee,[1,-1,1]),s.translate(Ee,Ee,[0,0,-this.cameraToCenterDistance]),s.rotateX(Ee,Ee,this._pitch),s.rotateZ(Ee,Ee,this.angle),s.translate(Ee,Ee,[-ae,-he,0]),this.mercatorMatrix=s.scale([],Ee,[this.worldSize,this.worldSize,this.worldSize]),s.scale(Ee,Ee,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,Ee),s.translate(Ee,Ee,[0,0,-this.elevation]),this.projMatrix=Ee,this.invProjMatrix=s.invert([],Ee),this.pixelMatrix3D=s.multiply(new Float64Array(16),this.labelPlaneMatrix,Ee),c=this.width%2/2,m=this.height%2/2,E=Math.cos(this.angle),O=Math.sin(this.angle),B=ae-Math.round(ae)+E*c+O*m,ae=he-Math.round(he)+E*m+O*c,he=new Float64Array(Ee),s.translate(he,he,[.5<B?B-1:B,.5<ae?ae-1:ae,0]),this.alignedProjMatrix=he,!(Ee=s.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ee,this._posMatrixCache={},this._alignedPosMatrixCache={}}}maxPitchScaleFactor(){var c;return this.pixelMatrixInverse?(c=[(c=this.pointCoordinate(new s.Point(0,0))).x*this.worldSize,c.y*this.worldSize,0,1],s.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance):1}getCameraPoint(){var c=this._pitch;return c=Math.tan(c)*(this.cameraToCenterDistance||1),this.centerPoint.add(new s.Point(0,c))}getCameraQueryGeometry(c){var m=this.getCameraPoint();if(1===c.length)return[c[0],m];{let E=m.x,O=m.y,B=m.x,ae=m.y;for(const he of c)E=Math.min(E,he.x),O=Math.min(O,he.y),B=Math.max(B,he.x),ae=Math.max(ae,he.y);return[new s.Point(E,O),new s.Point(B,O),new s.Point(B,ae),new s.Point(E,ae),new s.Point(E,O)]}}lngLatToCameraDepth(c,m){return c=this.locationCoordinate(c),s.transformMat4(c=[c.x*this.worldSize,c.y*this.worldSize,m,1],c,this.projMatrix),c[2]/c[3]}}function wk(x,c){let O,B,m=!1,E=null;const ae=()=>{E=null,m&&(x.apply(O,B),E=setTimeout(ae,c),m=!1)};return(...he)=>(m=!0,O=this,B=he,E||ae(),E)}class Vg{constructor(c){this._getCurrentHash=()=>{var m=window.location.hash.replace("#","");if(this._hashName){let E;return m.split("&").map(O=>O.split("=")).forEach(O=>{O[0]===this._hashName&&(E=O)}),(E&&E[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{var m,E=this._getCurrentHash();return 3<=E.length&&!E.some(O=>isNaN(O))&&(m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(E[3]||0):this._map.getBearing(),this._map.jumpTo({center:[+E[2],+E[1]],zoom:+E[0],bearing:m,pitch:+(E[4]||0)}),!0)},this._updateHashUnthrottled=()=>{var m=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,m)}catch{}},this._updateHash=wk(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(c){var O=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,B=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=(B=Math.pow(10,B),Math.round(O.lng*B)/B),ae=(O=Math.round(O.lat*B)/B,B=this._map.getBearing(),this._map.getPitch());let he="";if(he+=c?`/${E}/${O}/`+m:m+`/${O}/`+E,(B||ae)&&(he+="/"+Math.round(10*B)/10),ae&&(he+="/"+Math.round(ae)),this._hashName){const Ee=this._hashName;let ke=!1;return c=window.location.hash.slice(1).split("&").map(Ge=>{var Re=Ge.split("=")[0];return Re===Ee?(ke=!0,Re+"="+he):Ge}).filter(Ge=>Ge),ke||c.push(Ee+"="+he),"#"+c.join("&")}return"#"+he}}hc={linearity:.3,easing:s.bezier(0,0,.3,1)};const Sv=s.extend({deceleration:2500,maxSpeed:1400},hc),kz=s.extend({deceleration:20,maxSpeed:1400},hc),Lz=s.extend({deceleration:1e3,maxSpeed:360},hc),OF=s.extend({deceleration:1e3,maxSpeed:90},hc);class BT{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.now(),settings:c})}_drainInertiaBuffer(){for(var c=this._inertiaBuffer,m=k.now();0<c.length&&160<m-c[0].time;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var m,E={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for({settings:m}of this._inertiaBuffer)E.zoom+=m.zoomDelta||0,E.bearing+=m.bearingDelta||0,E.pitch+=m.pitchDelta||0,m.panDelta&&E.pan._add(m.panDelta),m.around&&(E.around=m.around),m.pinchAround&&(E.pinchAround=m.pinchAround);var O=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,B={};return E.pan.mag()&&(c=Fi(E.pan.mag(),O,s.extend({},Sv,c||{})),B.offset=E.pan.mult(c.amount/E.pan.mag()),B.center=this._map.transform.center,Gg(B,c)),E.zoom&&(c=Fi(E.zoom,O,kz),B.zoom=this._map.transform.zoom+c.amount,Gg(B,c)),E.bearing&&(c=Fi(E.bearing,O,Lz),B.bearing=this._map.transform.bearing+s.clamp(c.amount,-179,179),Gg(B,c)),E.pitch&&(c=Fi(E.pitch,O,OF),B.pitch=this._map.transform.pitch+c.amount,Gg(B,c)),(B.zoom||B.bearing)&&(B.around=(O=void 0===E.pinchAround?E.around:E.pinchAround)?this._map.unproject(O):this._map.getCenter()),this.clear(),s.extend(B,{noMoveStart:!0})}}}function Gg(x,c){(!x.duration||x.duration<c.duration)&&(x.duration=c.duration,x.easing=c.easing)}function Fi(ae,he,m){var{maxSpeed:E,linearity:O,deceleration:B}=m;return ae=s.clamp(ae*O/(he/1e3),-E,E),he=Math.abs(ae)/(B*O),{easing:m.easing,duration:1e3*he,amount:ae*(he/2)}}class Wp extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,E,O={}){var B=X.mousePos(m.getCanvas(),E),ae=m.unproject(B);super(c,s.extend({point:B,lngLat:ae,originalEvent:E},O)),this._defaultPrevented=!1,this.target=m}}class ey extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,E){var O="touchend"===c?E.changedTouches:E.touches,B=(O=X.touchPos(m.getCanvasContainer(),O)).map(he=>m.unproject(he)),ae=O.reduce((he,Ee,ke,Ge)=>he.add(Ee.div(Ge.length)),new s.Point(0,0));super(c,{points:O,point:ae,lngLats:B,lngLat:m.unproject(ae),originalEvent:E}),this._defaultPrevented=!1}}class Yb extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,E){super(c,{originalEvent:E}),this._defaultPrevented=!1}}class PF{constructor(c,m){this._map=c,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new Yb(c.type,this._map,c))}mousedown(c,m){return this._mousedownPos=m,this._firePreventable(new Wp(c.type,this._map,c))}mouseup(c){this._map.fire(new Wp(c.type,this._map,c))}click(c,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Wp(c.type,this._map,c))}dblclick(c){return this._firePreventable(new Wp(c.type,this._map,c))}mouseover(c){this._map.fire(new Wp(c.type,this._map,c))}mouseout(c){this._map.fire(new Wp(c.type,this._map,c))}touchstart(c){return this._firePreventable(new ey(c.type,this._map,c))}touchmove(c){this._map.fire(new ey(c.type,this._map,c))}touchend(c){this._map.fire(new ey(c.type,this._map,c))}touchcancel(c){this._map.fire(new ey(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wi{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new Wp(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wp("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new Wp(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class D1{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.pointLocation(s.Point.convert(c),this._map.terrain)}}class RF{constructor(c,m){this._map=c,this._tr=new D1(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,m){this.isEnabled()&&c.shiftKey&&0===c.button&&(X.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(c,m){var E,O,B;!this._active||this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance||(B=this._startPos,this._lastPos=m,this._box||(this._box=X.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c)),c=Math.min(B.x,m.x),E=Math.max(B.x,m.x),O=Math.min(B.y,m.y),B=Math.max(B.y,m.y),X.setTransform(this._box,`translate(${c}px,${O}px)`),this._box.style.width=E-c+"px",this._box.style.height=B-O+"px")}mouseupWindow(c,m){if(this._active&&0===c.button){const E=this._startPos,O=m;if(this.reset(),X.suppressClick(),E.x!==O.x||E.y!==O.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:B=>B.fitScreenCoordinates(E,O,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&27===c.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(X.remove(this._box),this._box=null),X.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,m){return this._map.fire(new s.Event(c,{originalEvent:m}))}}function zT(x,c){if(x.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points `+c.length);var m={};for(let E=0;E<x.length;E++)m[x[E].identifier]=c[E];return m}class NF{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,m,E){(this.centroid||E.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=c.timeStamp),E.length===this.numTouches&&(this.centroid=function xF(x){var c=new s.Point(0,0);for(const m of x)c._add(m);return c.div(x.length)}(m),this.touches=zT(E,m)))}touchmove(c,m,E){if(!this.aborted&&this.centroid){var O=zT(E,m);for(const he in this.touches){var ae=O[he];(!ae||30<ae.dist(this.touches[he]))&&(this.aborted=!0)}}}touchend(c,m,E){if((!this.centroid||500<c.timeStamp-this.startTime)&&(this.aborted=!0),0===E.length&&(c=!this.aborted&&this.centroid,this.reset(),c))return c}}class Tk{constructor(c){this.singleTap=new NF(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,m,E){this.singleTap.touchstart(c,m,E)}touchmove(c,m,E){this.singleTap.touchmove(c,m,E)}touchend(c,m,E){if(m=this.singleTap.touchend(c,m,E)){E=c.timeStamp-this.lastTime<500;var O=!this.lastTap||this.lastTap.dist(m)<30;if(E&&O||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class k1{constructor(c){this._tr=new D1(c),this._zoomIn=new Tk({numTouches:1,numTaps:2}),this._zoomOut=new Tk({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,m,E){this._zoomIn.touchstart(c,m,E),this._zoomOut.touchstart(c,m,E)}touchmove(c,m,E){this._zoomIn.touchmove(c,m,E),this._zoomOut.touchmove(c,m,E)}touchend(c,m,E){const O=this._zoomIn.touchend(c,m,E),B=this._zoomOut.touchend(c,m,E),ae=this._tr;return O?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:he=>he.easeTo({duration:300,zoom:ae.zoom+1,around:ae.unproject(O)},{originalEvent:c})}):B?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:he=>he.easeTo({duration:300,zoom:ae.zoom-1,around:ae.unproject(B)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class il{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){if((c=this._moveFunction(...c)).bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(c,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=m.length?m[0]:m,this._activateOnStart)&&this._lastPoint&&(this._active=!0)}dragMove(c,m){if(this.isEnabled()){var E=this._lastPoint;if(E)if(c.preventDefault(),this._moveStateManager.isValidMoveEvent(c)){if(m=m.length?m[0]:m,this._moved||!(m.dist(E)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(E,m)}else this.reset(c)}}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&X.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const AP={0:1,2:2};class IP{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){c=X.mouseButton(c),this._eventButton=c}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!function Ak(x,c){return c=AP[c],void 0===x.buttons||(x.buttons&c)!==c}(c,this._eventButton)}isValidEndEvent(c){return X.mouseButton(c)===this._eventButton}}class Ik{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return 1===c.targetTouches.length}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}const MP=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=function(c){c.preventDefault()}},ag=({enable:x,clickTolerance:c,bearingDegreesPerPixelMoved:m=.8})=>{var E=new IP({checkCorrectEvent:O=>0===X.mouseButton(O)&&O.ctrlKey||2===X.mouseButton(O)});return new il({clickTolerance:c,move:(O,B)=>({bearingDelta:(B.x-O.x)*m}),moveStateManager:E,enable:x,assignEvents:MP})},jT=({enable:x,clickTolerance:c,pitchDegreesPerPixelMoved:m=-.5})=>{var E=new IP({checkCorrectEvent:O=>0===X.mouseButton(O)&&O.ctrlKey||2===X.mouseButton(O)});return new il({clickTolerance:c,move:(O,B)=>({pitchDelta:(B.y-O.y)*m}),moveStateManager:E,enable:x,assignEvents:MP})};class ho{constructor(c,m){this._clickTolerance=c.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(c,m,E){return this._calculateTransform(c,m,E)}touchmove(c,m,E){if(this._active&&!(E.length<this.minTouchs()))return c.preventDefault(),this._calculateTransform(c,m,E)}touchend(c,m,E){this._calculateTransform(c,m,E),this._active&&E.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,m,E){0<E.length&&(this._active=!0);var O=zT(E,m),B=new s.Point(0,0),ae=new s.Point(0,0);let he=0;for(const Ge in O){var Ee=O[Ge],ke=this._touches[Ge];ke&&(B._add(Ee),ae._add(Ee.sub(ke)),he++,O[Ge]=Ee)}if(this._touches=O,!(he<this.minTouchs())&&ae.mag()&&(E=ae.div(he),this._sum._add(E),!(this._sum.mag()<this._clickTolerance)))return{around:B.div(he),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,m,E){this._firstTwoTouches||E.length<2||(this._firstTwoTouches=[E[0].identifier,E[1].identifier],this._start([m[0],m[1]]))}touchmove(c,m,E){if(this._firstTwoTouches){c.preventDefault();var[B,O]=this._firstTwoTouches,B=L1(E,m,B);if(E=L1(E,m,O),B&&E)return m=this._aroundCenter?null:B.add(E).div(2),this._move([B,E],m,c)}}touchend(c,m,E){var O,B;this._firstTwoTouches&&([B,O]=this._firstTwoTouches,B=L1(E,m,B),E=L1(E,m,O),B&&E||(this._active&&X.suppressClick(),this.reset()))}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&"center"===c.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function L1(x,c,m){for(let E=0;E<x.length;E++)if(x[E].identifier===m)return c[E]}function OP(x,c){return Math.log(x/c)/Math.LN2}class PP extends xo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,m){var E=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(OP(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:OP(this._distance,E),pinchAround:m}}}function up(x,c){return 180*x.angleWith(c)/Math.PI}class $T extends xo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,m,E){var O=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:up(this._vector,O),pinchAround:m}}_isBelowThreshold(E){this._minDiameter=Math.min(this._minDiameter,E.mag());var m=25/(Math.PI*this._minDiameter)*360;return E=up(E,this._startVector),Math.abs(E)<m}}function sg(x){return Math.abs(x.y)>Math.abs(x.x)}class DF extends xo{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,m,E){super.touchstart(c,m,E),this._currentTouchCount=E.length}_start(c){sg((this._lastPoints=c)[0].sub(c[1]))&&(this._valid=!1)}_move(c,m,E){if(!(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)){var O=c[0].sub(this._lastPoints[0]),B=c[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(O,B,E.timeStamp),this._valid)return this._lastPoints=c,this._active=!0,{pitchDelta:(O.y+B.y)/2*-.5}}}gestureBeginsVertically(c,m,E){var O,B;return void 0!==this._valid?this._valid:(B=2<=c.mag(),O=2<=m.mag(),B||O?B&&O?(B=0<c.y==0<m.y,sg(c)&&sg(m)&&B):(void 0===this._firstMove&&(this._firstMove=E),E-this._firstMove<100&&void 0):void 0)}}const VT={panStep:100,bearingStep:15,pitchStep:10};class fu{constructor(c){this._tr=new D1(c),this._panStep=(c=VT).panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){let m=0,E=0,O=0,B=0,ae=0;switch(c.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:c.shiftKey?E=-1:(c.preventDefault(),B=-1);break;case 39:c.shiftKey?E=1:(c.preventDefault(),B=1);break;case 38:c.shiftKey?O=1:(c.preventDefault(),ae=-1);break;case 40:c.shiftKey?O=-1:(c.preventDefault(),ae=1);break;default:return}return this._rotationDisabled&&(E=0,O=0),{cameraAnimation:he=>{var Ee=this._tr;he.easeTo({duration:300,easeId:"keyboardHandler",easing:Wu,zoom:m?Math.round(Ee.zoom)+m*(c.shiftKey?2:1):Ee.zoom,bearing:Ee.bearing+E*this._bearingStep,pitch:Ee.pitch+O*this._pitchStep,offset:[-B*this._panStep,-ae*this._panStep],center:Ee.center},{originalEvent:c})}}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wu(x){return x*(2-x)}const Mk=4.000244140625;class Wb{constructor(c,m){this._onTimeout=E=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(E)},this._map=c,this._tr=new D1(c),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&"center"===c.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(c){if(this.isEnabled()&&(!this._map.cooperativeGestures.isEnabled()||c[this._map.cooperativeGestures._bypassKey])){let O=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;var m=k.now(),E=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,0!==O&&O%Mk==0?this._type="wheel":0!==O&&Math.abs(O)<4?this._type="trackpad":400<E?(this._type=null,this._lastValue=O,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(E*O)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,O+=this._lastValue)),c.shiftKey&&O&&(O/=4),this._type&&(this._lastWheelEvent=c,this._delta-=O,this._active||this._start(c)),c.preventDefault()}}_start(c){var m;this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),c=X.mousePos(this._map.getCanvas(),c),this._around=c.y>(m=this._tr).transform.height/2-m.transform.getHorizon()?s.LngLat.convert(this._aroundCenter?m.center:m.unproject(c)):s.LngLat.convert(m.center),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame()))}renderFrame(){if(this._frameId&&(this._frameId=null,this.isActive())){var c=this._tr.transform;if(0!==this._delta){var E="wheel"===this._type&&Math.abs(this._delta)>Mk?this._wheelZoomRate:this._defaultZoomRate;let ke=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&0!==ke&&(ke=1/ke),E="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):c.scale,this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(E*ke))),"wheel"===this._type&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}E="number"==typeof this._targetZoom?this._targetZoom:c.zoom;var m,O=this._startZoom,B=this._easing;let he,ae=!1;return"wheel"===this._type&&O&&B?(m=B(B=Math.min((k.now()-this._lastWheelEventTime)/200,1)),he=s.interpolate.number(O,E,m),B<1?this._frameId||(this._frameId=!0):ae=!0):(he=E,ae=!0),this._active=!0,ae&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ae,zoomDelta:he-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}_smoothOutEasing(c){let m=s.defaultEasing;var E,O;return this._prevEase&&(O=this._prevEase,E=(k.now()-O.start)/O.duration,O=O.easing(.01+E)-O.easing(E),E=.27/Math.sqrt(O*O+1e-4)*.01,O=Math.sqrt(.0729-E*E),m=s.bezier(E,O,.25,1)),this._prevEase={start:k.now(),duration:c,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class GT{constructor(c,m){this._clickZoom=c,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ok{constructor(c){this._tr=new D1(c),this.reset()}reset(){this._active=!1}dblclick(c,m){return c.preventDefault(),{cameraAnimation:E=>{E.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pk{constructor(){this._tap=new Tk({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,m,E){var O,B,ae;this._swipePoint||(this._tapTime?(B=c.timeStamp-this._tapTime<500,ae=this._tapPoint.dist(O=m[0])<30,B&&ae?0<E.length&&(this._swipePoint=O,this._swipeTouch=E[0].identifier):this.reset()):this._tap.touchstart(c,m,E))}touchmove(c,m,E){var O,B;if(this._tapTime){if(this._swipePoint&&E[0].identifier===this._swipeTouch)return B=(O=m[0]).y-this._swipePoint.y,this._swipePoint=O,c.preventDefault(),this._active=!0,{zoomDelta:B/128}}else this._tap.touchmove(c,m,E)}touchend(c,m,E){this._tapTime?this._swipePoint&&0===E.length&&this.reset():(m=this._tap.touchend(c,m,E))&&(this._tapTime=c.timeStamp,this._tapPoint=m)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class RP{constructor(c,m,E){this._el=c,this._mousePan=m,this._touchPan=E}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Qb{constructor(c,m,E){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=m,this._mousePitch=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class xP{constructor(c,m,E,O){this._el=c,this._touchZoom=m,this._touchRotate=E,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class NP{constructor(c,m){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=c,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(!this._container){(c=this._map.getCanvasContainer()).classList.add("maplibregl-cooperative-gestures"),this._container=X.create("div","maplibregl-cooperative-gesture-screen",c);let E=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(E=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));var m,c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText");((m=document.createElement("div")).className="maplibregl-desktop-message",m.textContent=E,this._container.appendChild(m),m=document.createElement("div")).className="maplibregl-mobile-message",m.textContent=c,this._container.appendChild(m),this._container.setAttribute("aria-hidden","true")}}_destoryUI(){this._container&&(X.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(c){this._onCooperativeGesture(1===c.touches.length)}wheel(c){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!c[this._bypassKey])}_onCooperativeGesture(c){this._enabled&&c&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Xb=x=>x.zoom||x.drag||x.pitch||x.rotate;class Rk extends s.Event{}function qT(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class xk{constructor(ae,m){var E,O,B;for([E,O,B]of(this.handleWindowEvent=he=>{this.handleEvent(he,he.type+"Window")},this.handleEvent=(he,Ee)=>{if("blur"===he.type)this.stop(!0);else{this._updatingCamera=!0;var ke,Ge,Re,qe="renderFrame"===he.type?void 0:he,ft={needsRenderFrame:!1},Ct={},Rt={},Mt=he.touches,on=Mt?this._getMapTouches(Mt):void 0,sn=on?X.touchPos(this._map.getCanvas(),on):X.mousePos(this._map.getCanvas(),he);for({handlerName:ke,handler:Ge,allowed:Re}of this._handlers)if(Ge.isEnabled()){let Wn;this._blockedByActive(Rt,Re,ke)?Ge.reset():Ge[Ee||he.type]&&(Wn=Ge[Ee||he.type](he,sn,on),this.mergeHandlerResult(ft,Ct,Wn,ke,qe),Wn)&&Wn.needsRenderFrame&&this._triggerRenderFrame(),(Wn||Ge.isActive())&&(Rt[ke]=Ge)}var cn={};for(const Wn in this._previousActiveHandlers)Rt[Wn]||(cn[Wn]=qe);this._previousActiveHandlers=Rt,(Object.keys(cn).length||qT(ft))&&(this._changes.push([ft,Ct,cn]),this._triggerRenderFrame()),(Object.keys(Rt).length||qT(ft))&&this._map._stop(!0),this._updatingCamera=!1,(Mt=ft.cameraAnimation)&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Mt(this._map))}},this._map=ae,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new BT(ae),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m),this._listeners=[[ae=this._el,"touchstart",{passive:!0}],[ae,"touchmove",{passive:!1}],[ae,"touchend",void 0],[ae,"touchcancel",void 0],[ae,"mousedown",void 0],[ae,"mousemove",void 0],[ae,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[ae,"mouseover",void 0],[ae,"mouseout",void 0],[ae,"dblclick",void 0],[ae,"click",void 0],[ae,"keydown",{capture:!1}],[ae,"keyup",void 0],[ae,"wheel",{passive:!1}],[ae,"contextmenu",void 0],[window,"blur",void 0]],this._listeners))X.addEventListener(E,O,E===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(var[c,m,E]of this._listeners)X.removeEventListener(c,m,c===document?this.handleWindowEvent:this.handleEvent,E)}_addDefaultHandlers(c){var m=this._map,B=m.getCanvasContainer(),ae=(this._add("mapEvent",new PF(m,c)),m.boxZoom=new RF(m,c)),E=(this._add("boxZoom",ae),c.interactive&&c.boxZoom&&ae.enable(),ae=m.cooperativeGestures=new NP(m,c.cooperativeGestures),this._add("cooperativeGestures",ae),c.cooperativeGestures&&ae.enable(),ae=new k1(m),new Ok(m)),O=(m.doubleClickZoom=new GT(E,ae),this._add("tapZoom",ae),this._add("clickZoom",E),c.interactive&&c.doubleClickZoom&&m.doubleClickZoom.enable(),ae=new Pk,this._add("tapDragZoom",ae),E=m.touchPitch=new DF(m),this._add("touchPitch",E),c.interactive&&c.touchPitch&&m.touchPitch.enable(c.touchPitch),E=ag(c),jT(c));m.dragRotate=new Qb(c,E,O),this._add("mouseRotate",E,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]),c.interactive&&c.dragRotate&&m.dragRotate.enable(),E=(({enable:x,clickTolerance:c})=>{var m=new IP({checkCorrectEvent:E=>0===X.mouseButton(E)&&!E.ctrlKey});return new il({clickTolerance:c,move:(E,O)=>({around:O,panDelta:O.sub(E)}),activateOnStart:!0,moveStateManager:m,enable:x,assignEvents:MP})})(c),O=new ho(c,m),m.dragPan=new RP(B,E,O),this._add("mousePan",E),this._add("touchPan",O,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&m.dragPan.enable(c.dragPan),E=new $T,O=new PP,m.touchZoomRotate=new xP(B,O,E,ae),this._add("touchRotate",E,["touchPan","touchZoom"]),this._add("touchZoom",O,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&m.touchZoomRotate.enable(c.touchZoomRotate),B=m.scrollZoom=new Wb(m,()=>this._triggerRenderFrame()),this._add("scrollZoom",B,["mousePan"]),c.interactive&&c.scrollZoom&&m.scrollZoom.enable(c.scrollZoom),ae=m.keyboard=new fu(m),this._add("keyboard",ae),c.interactive&&c.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new wi(m))}_add(c,m,E){this._handlers.push({handlerName:c,handler:m,allowed:E}),this._handlersById[c]=m}stop(c){if(!this._updatingCamera){for(var{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(var{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Xb(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,m,E){for(const O in c)if(O!==E&&(!m||m.indexOf(O)<0))return!0;return!1}_getMapTouches(c){var m=[];for(const O of c)this._el.contains(O.target)&&m.push(O);return m}mergeHandlerResult(c,m,E,O,B){E&&(s.extend(c,E),c={handlerName:O,originalEvent:E.originalEvent||B},void 0!==E.zoomDelta&&(m.zoom=c),void 0!==E.panDelta&&(m.drag=c),void 0!==E.pitchDelta&&(m.pitch=c),void 0!==E.bearingDelta)&&(m.rotate=c)}_applyChanges(){var c,m,E,O={},B={},ae={};for([c,m,E]of this._changes)c.panDelta&&(O.panDelta=(O.panDelta||new s.Point(0,0))._add(c.panDelta)),c.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+c.zoomDelta),c.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+c.bearingDelta),c.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+c.pitchDelta),void 0!==c.around&&(O.around=c.around),void 0!==c.pinchAround&&(O.pinchAround=c.pinchAround),c.noInertia&&(O.noInertia=c.noInertia),s.extend(B,m),s.extend(ae,E);this._updateMapTransform(O,B,ae),this._changes=[]}_updateMapTransform(c,m,E){const O=this._map,B=O._getTransformForUpdate();var ae=O.terrain;if(!(qT(c)||ae&&this._terrainMovement))return this._fireEvents(m,E,!0);let{panDelta:he,zoomDelta:Ee,bearingDelta:ke,pitchDelta:Ge,around:Re,pinchAround:qe}=c;void 0!==qe&&(Re=qe),O._stop(!0),Re=Re||O.transform.centerPoint;var ft=B.pointLocation(he?Re.sub(he):Re);ke&&(B.bearing+=ke),Ge&&(B.pitch+=Ge),Ee&&(B.zoom+=Ee),ae?this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(he)):B.setLocationAtPoint(ft,Re):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(ft,Re),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(O.terrain)})):B.setLocationAtPoint(ft,Re),O._applyUpdatedTransform(B),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(m,E,!0)}_fireEvents(c,m,E){var O=Xb(this._eventsInProgress),B=Xb(c),ae={};for(const Ct in c)this._eventsInProgress[Ct]||(ae[Ct+"start"]=c[Ct].originalEvent),this._eventsInProgress[Ct]=c[Ct];!O&&B&&this._fireEvent("movestart",B.originalEvent);for(const Ct in ae)this._fireEvent(Ct,ae[Ct]);B&&this._fireEvent("move",B.originalEvent);for(const Ct in c)this._fireEvent(Ct,c[Ct].originalEvent);var ke={};let Ge;for(const Ct in this._eventsInProgress){var{handlerName:Re,originalEvent:qe}=this._eventsInProgress[Ct];this._handlersById[Re].isActive()||(delete this._eventsInProgress[Ct],Ge=m[Re]||qe,ke[Ct+"end"]=Ge)}for(const Ct in ke)this._fireEvent(Ct,ke[Ct]);var ft=Xb(this._eventsInProgress);E&&(O||B)&&!ft&&(this._updatingCamera=!0,E=Ct=>0!==Ct&&-this._bearingSnap<Ct&&Ct<this._bearingSnap,!(O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions))||!O.essential&&k.prefersReducedMotion?(this._map.fire(new s.Event("moveend",{originalEvent:Ge})),E(this._map.getBearing())&&this._map.resetNorth()):(E(O.bearing||this._map.getBearing())&&(O.bearing=0),O.freezeElevation=!0,this._map.easeTo(O,{originalEvent:Ge})),this._updatingCamera=!1)}_fireEvent(c,m){this._map.fire(new s.Event(c,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{delete this._frameId,this.handleEvent(new Rk("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Nk extends s.Evented{constructor(c,m){super(),this._renderFrameCallback=()=>{var E=Math.min((k.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(E)),E<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=m.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,m){return this.jumpTo({center:c},m)}panBy(c,m,E){return c=s.Point.convert(c).mult(-1),this.panTo(this.transform.center,s.extend({offset:c},m),E)}panTo(c,m,E){return this.easeTo(s.extend({center:c},m),E)}getZoom(){return this.transform.zoom}setZoom(c,m){return this.jumpTo({zoom:c},m),this}zoomTo(c,m,E){return this.easeTo(s.extend({zoom:c},m),E)}zoomIn(c,m){return this.zoomTo(this.getZoom()+1,c,m),this}zoomOut(c,m){return this.zoomTo(this.getZoom()-1,c,m),this}getBearing(){return this.transform.bearing}setBearing(c,m){return this.jumpTo({bearing:c},m),this}getPadding(){return this.transform.padding}setPadding(c,m){return this.jumpTo({padding:c},m),this}rotateTo(c,m,E){return this.easeTo(s.extend({bearing:c},m),E)}resetNorth(c,m){return this.rotateTo(0,s.extend({duration:1e3},c),m),this}resetNorthPitch(c,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},c),m),this}snapToNorth(c,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,m):this}getPitch(){return this.transform.pitch}setPitch(c,m){return this.jumpTo({pitch:c},m),this}cameraForBounds(c,m){c=er.convert(c);var E=m&&m.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),E,m)}_cameraForBoxAndBearing(qe,he,E,O){var B=("number"==typeof(O=s.extend({padding:ae={top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},O)).padding&&(O.padding={top:B=O.padding,bottom:B,right:B,left:B}),O.padding=s.extend(ae,O.padding),this.transform),ae=B.padding,Re=(qe=new er(qe,he),he=B.project(qe.getNorthWest()),B.project(qe.getNorthEast())),Ee=B.project(qe.getSouthEast()),ke=(qe=B.project(qe.getSouthWest()),s.degreesToRadians(-E)),Ge=he.rotate(ke),ft=(Re=Re.rotate(ke),Ee.rotate(ke));if(qe=qe.rotate(ke),ke=new s.Point(Math.max(Ge.x,Re.x,qe.x,ft.x),Math.max(Ge.y,Re.y,qe.y,ft.y)),Ge=new s.Point(Math.min(Ge.x,Re.x,qe.x,ft.x),Math.min(Ge.y,Re.y,qe.y,ft.y)),Re=ke.sub(Ge),qe=(B.width-(ae.left+ae.right+O.padding.left+O.padding.right))/Re.x,!((ft=(B.height-(ae.top+ae.bottom+O.padding.top+O.padding.bottom))/Re.y)<0||qe<0))return ke=Math.min(B.scaleZoom(B.scale*Math.min(qe,ft)),O.maxZoom),Ge=s.Point.convert(O.offset),qe=new s.Point(ae=(O.padding.left-O.padding.right)/2,Re=(O.padding.top-O.padding.bottom)/2).rotate(s.degreesToRadians(E)),ft=Ge.add(qe).mult(B.scale/B.zoomScale(ke)),{center:B.unproject(he.add(Ee).div(2).sub(ft)),zoom:ke,bearing:E};s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}fitBounds(c,m,E){return this._fitInternal(this.cameraForBounds(c,m),m,E)}fitScreenCoordinates(c,m,E,O,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.Point.convert(c)),this.transform.pointLocation(s.Point.convert(m)),E,O),O,B)}_fitInternal(c,m,E){return c?(delete(m=s.extend(c,m)).padding,m.linear?this.easeTo(m,E):this.flyTo(m,E)):this}jumpTo(c,m){this.stop();var E=this._getTransformForUpdate();let O=!1,B=!1,ae=!1;return"zoom"in c&&E.zoom!==+c.zoom&&(O=!0,E.zoom=+c.zoom),void 0!==c.center&&(E.center=s.LngLat.convert(c.center)),"bearing"in c&&E.bearing!==+c.bearing&&(B=!0,E.bearing=+c.bearing),"pitch"in c&&E.pitch!==+c.pitch&&(ae=!0,E.pitch=+c.pitch),null==c.padding||E.isPaddingEqual(c.padding)||(E.padding=c.padding),this._applyUpdatedTransform(E),this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),O&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),B&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),ae&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m))}calculateCameraOptionsFromTo(ae,B,Ge,Re=0){ae=s.MercatorCoordinate.fromLngLat(ae,B),Ge=(B=s.MercatorCoordinate.fromLngLat(Ge,Re)).x-ae.x,Re=B.y-ae.y,ae=B.z-ae.z;var he=Math.hypot(Ge,Re,ae);if(0===he)throw new Error("Can't calculate camera options with same From and To");var Ee=Math.hypot(Ge,Re),ke=this.transform.scaleZoom(this.transform.cameraToCenterDistance/he/this.transform.tileSize);return Ge=180*Math.atan2(Ge,-Re)/Math.PI,Re=180*Math.acos(Ee/he)/Math.PI,Re=ae<0?90-Re:90+Re,{center:B.toLngLat(),zoom:ke,pitch:Re,bearing:Ge}}easeTo(c,m){this._stop(!1,c.easeId),(!1===(c=s.extend({offset:[0,0],duration:500,easing:s.defaultEasing},c)).animate||!c.essential&&k.prefersReducedMotion)&&(c.duration=0);const E=this._getTransformForUpdate(),O=this.getZoom(),B=this.getBearing(),ae=this.getPitch(),he=this.getPadding(),Ee="bearing"in c?this._normalizeBearing(c.bearing,B):B,ke="pitch"in c?+c.pitch:ae,Ge=("padding"in c?c:E).padding,Re=s.Point.convert(c.offset);let qe=E.centerPoint.add(Re);var ft=E.pointLocation(qe);const{center:Ct,zoom:Rt}=E.getConstrained(s.LngLat.convert(c.center||ft),null!=(Qn=c.zoom)?Qn:O),Mt=(this._normalizeCenter(Ct),E.project(ft)),on=E.project(Ct).sub(Mt),sn=E.zoomScale(Rt-O);let cn,Wn;c.around&&(cn=s.LngLat.convert(c.around),Wn=E.locationPoint(cn));var Qn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Rt!==O,this._rotating=this._rotating||B!==Ee,this._pitching=this._pitching||ke!==ae,this._padding=!E.isPaddingEqual(Ge),this._easeId=c.easeId,this._prepareEase(m,c.noMoveStart,Qn),this.terrain&&this._prepareElevation(Ct),this._ease(Kn=>{var Cr,ur;this._zooming&&(E.zoom=s.interpolate.number(O,Rt,Kn)),this._rotating&&(E.bearing=s.interpolate.number(B,Ee,Kn)),this._pitching&&(E.pitch=s.interpolate.number(ae,ke,Kn)),this._padding&&(E.interpolatePadding(he,Ge,Kn),qe=E.centerPoint.add(Re)),this.terrain&&!c.freezeElevation&&this._updateElevation(Kn),cn?E.setLocationAtPoint(cn,Wn):(Cr=E.zoomScale(E.zoom-O),ur=Rt>O?Math.min(2,sn):Math.max(.5,sn),ur=Math.pow(ur,1-Kn),Kn=E.unproject(Mt.add(on.mult(Kn*ur)).mult(Cr)),E.setLocationAtPoint(E.renderWorldCopies?Kn.wrap():Kn,qe)),this._applyUpdatedTransform(E),this._fireMoveEvents(m)},Kn=>{this.terrain&&this._finalizeElevation(),this._afterEase(m,Kn)},c),this}_prepareEase(c,m,E={}){this._moving=!0,m||E.moving||this.fire(new s.Event("movestart",c)),this._zooming&&!E.zooming&&this.fire(new s.Event("zoomstart",c)),this._rotating&&!E.rotating&&this.fire(new s.Event("rotatestart",c)),this._pitching&&!E.pitching&&this.fire(new s.Event("pitchstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);var m,E,O=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);c<1&&O!==this._elevationTarget&&(E=(O-((m=this._elevationTarget-this._elevationStart)*c+this._elevationStart))/(1-c),this._elevationStart+=c*(m-E),this._elevationTarget=O),this.transform.elevation=s.interpolate.number(this._elevationStart,this._elevationTarget,c)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(c){var m,E,O,B,ae;this.transformCameraUpdate&&(c=c.clone(),({center:m,zoom:E,pitch:O,bearing:B,elevation:ae}=this.transformCameraUpdate(c)),m&&(c.center=m),void 0!==E&&(c.zoom=E),void 0!==O&&(c.pitch=O),void 0!==B&&(c.bearing=B),void 0!==ae&&(c.elevation=ae),this.transform.apply(c))}_fireMoveEvents(c){this.fire(new s.Event("move",c)),this._zooming&&this.fire(new s.Event("zoom",c)),this._rotating&&this.fire(new s.Event("rotate",c)),this._pitching&&this.fire(new s.Event("pitch",c))}_afterEase(c,m){var E,O;this._easeId&&m&&this._easeId===m||(delete this._easeId,this.fire(new s.Event("freezeElevation",{freeze:!1})),m=this._zooming,E=this._rotating,O=this._pitching,this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new s.Event("zoomend",c)),E&&this.fire(new s.Event("rotateend",c)),O&&this.fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)))}flyTo(c,m){if(!c.essential&&k.prefersReducedMotion)return ft=s.pick(c,["center","zoom","bearing","pitch","around"]),this.jumpTo(ft,m);this.stop(),c=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.defaultEasing},c);const E=this._getTransformForUpdate(),O=this.getZoom(),B=this.getBearing(),ae=this.getPitch(),he=this.getPadding(),Ee="bearing"in c?this._normalizeBearing(c.bearing,B):B,ke="pitch"in c?+c.pitch:ae,Ge=("padding"in c?c:E).padding,Re=s.Point.convert(c.offset);let qe=E.centerPoint.add(Re);var ft=E.pointLocation(qe);const{center:Ct,zoom:Rt}=E.getConstrained(s.LngLat.convert(c.center||ft),null!=(Mt=c.zoom)?Mt:O);this._normalizeCenter(Ct);var Mt=E.zoomScale(Rt-O);const on=E.project(ft),sn=E.project(Ct).sub(on);let cn=c.curve;const Wn=Math.max(E.width,E.height),Qn=Wn/Mt,Kn=sn.mag(),Cr=("minZoom"in c&&(ft=s.clamp(Math.min(c.minZoom,O,Rt),E.minZoom,E.maxZoom),Mt=Wn/E.zoomScale(ft-O),cn=Math.sqrt(Mt/Kn*2)),cn*cn);function ur(Zr){return Zr=(Qn*Qn-Wn*Wn+(Zr?-1:1)*Cr*Cr*Kn*Kn)/(2*(Zr?Qn:Wn)*Cr*Kn),Math.log(Math.sqrt(Zr*Zr+1)-Zr)}function $r(Zr){return(Math.exp(Zr)-Math.exp(-Zr))/2}function mi(Zr){return(Math.exp(Zr)+Math.exp(-Zr))/2}const Yi=ur(!1);let So=function(Zr){return mi(Yi)/mi(Yi+cn*Zr)},wo=function(Zr){return Wn*((mi(Yi)*($r(Zr=Yi+cn*Zr)/mi(Zr))-$r(Yi))/Cr)/Kn},Xi=(ur(!0)-Yi)/cn;if(Math.abs(Kn)<1e-6||!isFinite(Xi)){if(Math.abs(Wn-Qn)<1e-6)return this.easeTo(c,m);const Zr=Qn<Wn?-1:1;Xi=Math.abs(Math.log(Qn/Wn))/cn,wo=function(){return 0},So=function(po){return Math.exp(Zr*cn*po)}}return c.duration="duration"in c?+c.duration:1e3*Xi/(ft="screenSpeed"in c?+c.screenSpeed/cn:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=B!==Ee,this._pitching=ke!==ae,this._padding=!E.isPaddingEqual(Ge),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Ct),this._ease(zi=>{var po=zi*Xi,ta=1/So(po);E.zoom=1===zi?Rt:O+E.scaleZoom(ta),this._rotating&&(E.bearing=s.interpolate.number(B,Ee,zi)),this._pitching&&(E.pitch=s.interpolate.number(ae,ke,zi)),this._padding&&(E.interpolatePadding(he,Ge,zi),qe=E.centerPoint.add(Re)),this.terrain&&!c.freezeElevation&&this._updateElevation(zi),zi=1===zi?Ct:E.unproject(on.add(sn.mult(wo(po))).mult(ta)),E.setLocationAtPoint(E.renderWorldCopies?zi.wrap():zi,qe),this._applyUpdatedTransform(E),this._fireMoveEvents(m)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(m)},c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,m){var E;return this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd&&(E=this._onEaseEnd,delete this._onEaseEnd,E.call(this,m)),c||(E=this.handlers)&&E.stop(!1),this}_ease(c,m,E){!1===E.animate||0===E.duration?(c(1),m()):(this._easeStart=k.now(),this._easeOptions=E,this._onEaseFrame=c,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,m){c=s.wrap(c,-180,180);var E=Math.abs(c-m);return Math.abs(c-360-m)<E&&(c-=360),Math.abs(c+360-m)<E&&(c+=360),c}_normalizeCenter(c){var m=this.transform;m.renderWorldCopies&&!m.lngRange&&(c.lng+=180<(m=c.lng-m.center.lng)?-360:m<-180?360:0)}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLatZoom(s.LngLat.convert(c),this.transform.tileZoom)-this.transform.elevation:null}}const DP={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class KT{constructor(c=DP){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||"metadata"!==m.sourceDataType&&"visibility"!==m.sourceDataType&&"style"!==m.dataType&&"terrain"!==m.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=X.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=X.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=X.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){X.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,m){m=this._map._getUIString("AttributionControl."+m),c.title=m,c.setAttribute("aria-label",m)}_updateAttributions(){if(this._map.style){let O=[];this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(B=>"string"!=typeof B?"":B)):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet&&(this.styleOwner=(E=this._map.style.stylesheet).owner,this.styleId=E.id);var c=this._map.style.sourceCaches;for(const B in c){var m=c[B];(m.used||m.usedForTerrain)&&(m=m.getSource()).attribution&&O.indexOf(m.attribution)<0&&O.push(m.attribution)}(O=O.filter(B=>String(B).trim())).sort((B,ae)=>B.length-ae.length);var E=(O=O.filter((B,ae)=>{for(let he=ae+1;he<O.length;he++)if(0<=O[he].indexOf(B))return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,O.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}}class kP{constructor(c={}){this._updateCompact=()=>{var m=this._container.children;m.length&&(m=m[0],this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact"))},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){return this._map=c,this._compact=this.options&&this.options.compact,this._container=X.create("div","maplibregl-ctrl"),(c=X.create("a","maplibregl-ctrl-logo")).target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){X.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Dk{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){var m=++this._id;return this._queue.push({callback:c,id:m,cancelled:!1}),m}remove(c){var m=this._currentlyRunning;for(const E of m?this._queue.concat(m):this._queue)if(E.id===c)return void(E.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");var m=this._currentlyRunning=this._queue;this._queue=[];for(const E of m)if(!E.cancelled&&(E.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var LP=s.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class kk extends s.Evented{constructor(c){super(),this.sourceCache=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,c.usedForTerrain=!0,c.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(c,m){this.sourceCache.update(c,m),this._renderableTilesKeys=[];var E={};for(const O of c.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m}))E[O.key]=!0,this._renderableTilesKeys.push(O.key),this._tiles[O.key]||(O.posMatrix=new Float64Array(16),s.ortho(O.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),this._tiles[O.key]=new eo(O,this.tileSize));for(const O in this._tiles)E[O]||delete this._tiles[O]}freeRtt(c){for(const E in this._tiles){var m=this._tiles[E];(!c||m.tileID.equals(c)||m.tileID.isChildOf(c)||c.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(c=>this.getTileByID(c))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c){var m={};for(const ke of this._renderableTilesKeys){var E,O,B,ae,he,Ee=this._tiles[ke].tileID;Ee.canonical.equals(c.canonical)?((E=c.clone()).posMatrix=new Float64Array(16),s.ortho(E.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),m[ke]=E):Ee.canonical.isChildOf(c.canonical)?((E=c.clone()).posMatrix=new Float64Array(16),O=Ee.canonical.x-(Ee.canonical.x>>(ae=Ee.canonical.z-c.canonical.z)<<ae),B=Ee.canonical.y-(Ee.canonical.y>>ae<<ae),s.ortho(E.posMatrix,0,ae=s.EXTENT>>ae,0,ae,0,1),s.translate(E.posMatrix,E.posMatrix,[-O*ae,-B*ae,0]),m[ke]=E):c.canonical.isChildOf(Ee.canonical)&&((O=c.clone()).posMatrix=new Float64Array(16),ae=c.canonical.x-(c.canonical.x>>(B=c.canonical.z-Ee.canonical.z)<<B),Ee=c.canonical.y-(c.canonical.y>>B<<B),he=s.EXTENT>>B,s.ortho(O.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),s.translate(O.posMatrix,O.posMatrix,[ae*he,Ee*he,0]),s.scale(O.posMatrix,O.posMatrix,[1/2**B,1/2**B,0]),m[ke]=O)}return m}getSourceTile(c,m){var E=this.sourceCache._source;let O=c.overscaledZ-this.deltaZoom;if((O=O>E.maxzoom?E.maxzoom:O)<E.minzoom)return null;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(O).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[c.key]);if((!B||!B.dem)&&m)for(;O>=E.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(c.scaledTo(O--).key);return B}tilesAfterTime(c=Date.now()){return Object.values(this._tiles).filter(m=>m.timeAdded>=c)}}class Lk{constructor(c,m,E){this.painter=c,this.sourceCache=new kk(m),this.options=E,this.exaggeration="number"==typeof E.exaggeration?E.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,m,E,O=s.EXTENT){var B;return 0<=m&&m<O&&0<=E&&E<O&&(B=null==(B=(c=this.getTerrainData(c)).tile)?void 0:B.dem)?(E=[(m=s.transformMat4$1([],[m/O*s.EXTENT,E/O*s.EXTENT],c.u_terrain_matrix))[0]*B.dim,m[1]*B.dim],O=Math.floor(E[0]),c=Math.floor(E[1]),m=E[0]-O,E=E[1]-c,B.get(O,c)*(1-m)*(1-E)+B.get(O+1,c)*m*(1-E)+B.get(O,c+1)*(1-m)*E+B.get(O+1,c+1)*m*E):0}getElevationForLngLatZoom(E,O){var{tileID:E,mercatorX:O,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(E,O);return this.getElevation(E,O%s.EXTENT,B%s.EXTENT,s.EXTENT)}getElevation(c,m,E,O=s.EXTENT){return this.getDEMElevation(c,m,E,O)*this.exaggeration}getTerrainData(c){this._emptyDemTexture||(E=this.painter.context,m=new s.RGBAImage({width:1,height:1},new Uint8Array(4)),this._emptyDepthTexture=new Zn(E,m,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Zn(E,new s.RGBAImage({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.identity([]));var m=this.sourceCache.getSourceTile(c,!0),E=(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)&&(E=this.painter.context,m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new Zn(E,m.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),m.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1),m&&m+m.tileID.key+c.key);if(E&&!this._demMatrixCache[E]){var O=this.sourceCache.sourceCache._source.maxzoom;let he=c.canonical.z-m.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=O?he=c.canonical.z-O:s.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom")),O=c.canonical.x-(c.canonical.x>>he<<he);var B=c.canonical.y-(c.canonical.y>>he<<he),ae=s.fromScaling(new Float64Array(16),[1/(s.EXTENT<<he),1/(s.EXTENT<<he),0]);s.translate(ae,ae,[O*s.EXTENT,B*s.EXTENT,0]),this._demMatrixCache[c.key]={matrix:ae,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:E?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(c){var m=this.painter,E=m.width/devicePixelRatio,O=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===E&&this._fbo.height===O||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Zn(m.context,{width:E,height:O,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Zn(m.context,{width:E,height:O,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(E,O,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,E,O))),this._fbo.colorAttachment.set(("coords"===c?this._fboCoordsTexture:this._fboDepthTexture).texture),this._fbo}getCoordsTexture(){var c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;var m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let O=0,B=0;O<this._coordsTextureSize;O++)for(let ae=0;ae<this._coordsTextureSize;ae++,B+=4)m[B+0]=255&ae,m[B+1]=255&O,m[B+2]=ae>>8<<4|O>>8,m[B+3]=0;var E=new s.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer));return(E=new Zn(c,E,c.gl.RGBA,{premultiply:!1})).bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=E}pointCoordinate(ae){this.painter.maybeDrawDepthAndCoords(!0);var m=new Uint8Array(4),E=this.painter.context,he=E.gl,O=Math.round(ae.x*this.painter.pixelRatio/devicePixelRatio),B=(ae=Math.round(ae.y*this.painter.pixelRatio/devicePixelRatio),Math.round(this.painter.height/devicePixelRatio));return E.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),he.readPixels(O,B-ae-1,1,1,he.RGBA,he.UNSIGNED_BYTE,m),E.bindFramebuffer.set(null),O=m[0]+(m[2]>>4<<8),B=m[1]+((15&m[2])<<8),(he=(ae=this.coordsIndex[255-m[3]])&&this.sourceCache.getTileByID(ae))?new s.MercatorCoordinate((he.tileID.canonical.x*(E=this._coordsTextureSize)+O)/(m=(1<<he.tileID.canonical.z)*E)+he.tileID.wrap,(he.tileID.canonical.y*E+B)/m,this.getElevation(he.tileID,O,B,E)):null}depthAtPoint(B){var m=new Uint8Array(4),E=this.painter.context,O=E.gl;return E.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),O.readPixels(B.x,this.painter.height/devicePixelRatio-B.y-1,1,1,O.RGBA,O.UNSIGNED_BYTE,m),E.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(){if(!this._mesh){var c=this.painter.context,m=new s.Pos3dArray,E=new s.TriangleIndexArray,O=this.meshSize,B=s.EXTENT/O,ae=O*O;for(let Re=0;Re<=O;Re++)for(let qe=0;qe<=O;qe++)m.emplaceBack(qe*B,Re*B,0);for(let Re=0;Re<ae;Re+=O+1)for(let qe=0;qe<O;qe++)E.emplaceBack(qe+Re,O+qe+Re+1,O+qe+Re+2),E.emplaceBack(qe+Re,O+qe+Re+2,qe+Re+1);var he=m.length,Ee=he+2*(O+1);for(const Re of[0,1])for(let qe=0;qe<=O;qe++)for(const ft of[0,1])m.emplaceBack(qe*B,Re*s.EXTENT,ft);for(let Re=0;Re<2*O;Re+=2)E.emplaceBack(Ee+Re,Ee+Re+1,Ee+Re+3),E.emplaceBack(Ee+Re,Ee+Re+3,Ee+Re+2),E.emplaceBack(he+Re,he+Re+3,he+Re+1),E.emplaceBack(he+Re,he+Re+2,he+Re+3);var ke=m.length,Ge=ke+2*(O+1);for(const Re of[0,1])for(let qe=0;qe<=O;qe++)for(const ft of[0,1])m.emplaceBack(Re*s.EXTENT,qe*B,ft);for(let Re=0;Re<2*O;Re+=2)E.emplaceBack(ke+Re,ke+Re+1,ke+Re+3),E.emplaceBack(ke+Re,ke+Re+3,ke+Re+2),E.emplaceBack(Ge+Re,Ge+Re+3,Ge+Re+1),E.emplaceBack(Ge+Re,Ge+Re+2,Ge+Re+3);this._mesh={indexBuffer:c.createIndexBuffer(E),vertexBuffer:c.createVertexBuffer(m,LP.members),segments:s.SegmentVector.simpleSegment(0,0,m.length,E.length)}}return this._mesh}getMeshFrameDelta(c){return 2*Math.PI*s.earthRadius/Math.pow(2,c)/5}getMinTileElevationForLngLatZoom(c,m){return c=this._getOverscaledTileIDFromLngLatZoom(c,m).tileID,null!=(m=this.getMinMaxElevation(c).minElevation)?m:0}getMinMaxElevation(m){var E={minElevation:null,maxElevation:null};return(m=this.getTerrainData(m).tile)&&m.dem&&(E.minElevation=m.dem.min*this.exaggeration,E.maxElevation=m.dem.max*this.exaggeration),E}_getOverscaledTileIDFromLngLatZoom(O,m){var E=(O=s.MercatorCoordinate.fromLngLat(O.wrap())).x*(B=(1<<m)*s.EXTENT),B=(O=O.y*B,Math.floor(E/s.EXTENT)),ae=Math.floor(O/s.EXTENT);return{tileID:new s.OverscaledTileID(m,0,m,B,ae),mercatorX:E,mercatorY:O}}}class Fk{constructor(c,m,E){this._context=c,this._size=m,this._tileSize=E,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){var m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),E=new Zn(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return E.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(E.texture),{id:c,fbo:m,texture:E,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(m=>c.id!==m),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");var c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(c=>!c.inUse)}}const wv={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Hk{constructor(c,m){this.painter=c,this.terrain=m,this.pool=new Fk(c.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=c._order.filter(he=>!c._layers[he].isHidden(m)),this._coordsDescendingInv={};for(const he in c.sourceCaches){this._coordsDescendingInv[he]={};for(const Ee of c.sourceCaches[he].getVisibleCoordinates()){var E=this.terrain.sourceCache.getTerrainCoords(Ee);for(const ke in E)this._coordsDescendingInv[he][ke]||(this._coordsDescendingInv[he][ke]=[]),this._coordsDescendingInv[he][ke].push(E[ke])}}this._coordsDescendingInvStr={};for(const he of c._order){var O=c._layers[he],B=O.source;if(wv[O.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const Ee in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][Ee]=this._coordsDescendingInv[B][Ee].map(ke=>ke.key).sort().join()}}for(const he of this._renderableTiles)for(const Ee in this._coordsDescendingInvStr){var ae=this._coordsDescendingInvStr[Ee][he.tileID.key];ae&&ae!==he.rttCoords[Ee]&&(he.rtt=[])}}renderLayer(c){if(!c.isHidden(this.painter.transform.zoom)){var m=c.type,E=this.painter,O=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(wv[m]&&(this._prevType&&wv[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(c.id),!O))return!0;if(wv[this._prevType]||wv[m]&&O){this._prevType=m;var B=this._stacks.length-1,ae=this._stacks[B]||[];for(const Ge of this._renderableTiles){if(this.pool.isFull()&&(Sk(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Ge),Ge.rtt[B]){var he=this.pool.getObjectForId(Ge.rtt[B].id);if(he.stamp===Ge.rtt[B].stamp){this.pool.useObject(he);continue}}var Ee=this.pool.getOrCreateFreeObject();this.pool.useObject(Ee),this.pool.stampObject(Ee),Ge.rtt[B]={id:Ee.id,stamp:Ee.stamp},E.context.bindFramebuffer.set(Ee.fbo.framebuffer),E.context.clear({color:s.Color.transparent,stencil:0}),E.currentStencilSource=void 0;for(let Re=0;Re<ae.length;Re++){const qe=E.style._layers[ae[Re]];var ke=qe.source?this._coordsDescendingInv[qe.source][Ge.tileID.key]:[Ge.tileID];E.context.viewport.set([0,0,Ee.fbo.width,Ee.fbo.height]),E._renderTileClippingMasks(qe,ke),E.renderLayer(E,E.style.sourceCaches[qe.source],qe,ke),qe.source&&(Ge.rttCoords[qe.source]=this._coordsDescendingInvStr[qe.source][Ge.tileID.key])}}return Sk(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),wv[m]}}return!1}}const kF={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},LF=v,FF={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:DP,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]};hc=class extends Nk{constructor(x){if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),null!=(x=s.extend({},FF,x)).minZoom&&null!=x.maxZoom&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=x.minPitch&&null!=x.maxPitch&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=x.minPitch&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=x.maxPitch&&85<x.maxPitch)throw new Error("maxPitch must be less than or equal to 85");if(super(new og(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),{bearingSnap:x.bearingSnap}),this._contextLost=m=>{m.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.Event("webglcontextlost",{originalEvent:m}))},this._contextRestored=m=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:m}))},this._onMapScroll=m=>{if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new Dk,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},kF,x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this._imageQueueHandle=f.addThrottleControl(()=>this.isMoving()),this._requestManager=new _n(x.transformRequest),"string"==typeof x.container){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let m=!1;const E=wk(O=>{this._trackResize&&!this._removed&&this.resize(O)._update()},50);this._resizeObserver=new ResizeObserver(O=>{m?E(O):m=!0}),this._resizeObserver.observe(this._container)}this.handlers=new xk(this,x),this._hash=x.hash&&new Vg("string"==typeof x.hash&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,s.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new KT("boolean"==typeof x.attributionControl?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new kP,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",m=>{this._update("style"===m.dataType),this.fire(new s.Event(m.dataType+"data",m))}),this.on("dataloading",m=>{this.fire(new s.Event(m.dataType+"dataloading",m))}),this.on("dataabort",m=>{this.fire(new s.Event("sourcedataabort",m))})}_getMapId(){return this._mapId}addControl(x,c){var m;return void 0===c&&(c=x.getDefaultPosition?x.getDefaultPosition():"top-right"),x&&x.onAdd?(m=x.onAdd(this),this._controls.push(x),x=this._controlPositions[c],-1!==c.indexOf("bottom")?x.insertBefore(m,x.firstChild):x.appendChild(m),this):this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")))}removeControl(x){var c;return x&&x.onRemove?(-1<(c=this._controls.indexOf(x))&&this._controls.splice(c,1),x.onRemove(this),this):this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")))}hasControl(x){return-1<this._controls.indexOf(x)}calculateCameraOptionsFromTo(x,c,m,E){return null==E&&this.terrain&&(E=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(x,c,m,E)}resize(x){var m,c=(m=this._containerDimensions())[0];const E=this._getClampedPixelRatio(c,m=m[1]);if(this._resizeCanvas(c,m,E),this.painter.resize(c,m,E),this.painter.overLimit()){var O=this.painter.context.gl;this._maxCanvasSize=[O.drawingBufferWidth,O.drawingBufferHeight];const B=this._getClampedPixelRatio(c,m);this._resizeCanvas(c,m,B),this.painter.resize(c,m,B)}return this.transform.resize(c,m),null!=(O=this._requestedCameraState)&&O.resize(c,m),(O=!this._moving)&&(this.stop(),this.fire(new s.Event("movestart",x)).fire(new s.Event("move",x))),this.fire(new s.Event("resize",x)),O&&this.fire(new s.Event("moveend",x)),this}_getClampedPixelRatio(B,ae){var{0:m,1:E}=this._maxCanvasSize,O=this.getPixelRatio();return B*=O,ae*=O,Math.min(m<B?m/B:1,E<ae?E/ae:1)*O}getPixelRatio(){var x;return null!=(x=this._overridePixelRatio)?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(er.convert(x)),this._update()}setMinZoom(x){if(-2<=(x=x??-2)&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=x&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if(85<(x=x??60))throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this._update()}project(x){return this.transform.locationPoint(s.LngLat.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.pointLocation(s.Point.convert(x),this.terrain)}isMoving(){var x;return this._moving||(null==(x=this.handlers)?void 0:x.isMoving())}isZooming(){var x;return this._zooming||(null==(x=this.handlers)?void 0:x.isZooming())}isRotating(){var x;return this._rotating||(null==(x=this.handlers)?void 0:x.isRotating())}_createDelegatedListener(x,c,m){if("mouseenter"===x||"mouseover"===x){let E=!1;return{layer:c,listener:m,delegates:{mousemove:O=>{var B=this.getLayer(c)?this.queryRenderedFeatures(O.point,{layers:[c]}):[];B.length?E||(E=!0,m.call(this,new Wp(x,this,O.originalEvent,{features:B}))):E=!1},mouseout:()=>{E=!1}}}}if("mouseleave"!==x&&"mouseout"!==x)return{layer:c,listener:m,delegates:{[x]:E=>{var O=this.getLayer(c)?this.queryRenderedFeatures(E.point,{layers:[c]}):[];O.length&&(E.features=O,m.call(this,E),delete E.features)}}};{let E=!1;return{layer:c,listener:m,delegates:{mousemove:O=>{(this.getLayer(c)?this.queryRenderedFeatures(O.point,{layers:[c]}):[]).length?E=!0:E&&(E=!1,m.call(this,new Wp(x,this,O.originalEvent)))},mouseout:O=>{E&&(E=!1,m.call(this,new Wp(x,this,O.originalEvent)))}}}}}on(x,c,m){if(void 0===m)return super.on(x,c);var E=this._createDelegatedListener(x,c,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(E);for(const O in E.delegates)this.on(O,E.delegates[O]);return this}once(x,c,m){if(void 0===m)return super.once(x,c);var E=this._createDelegatedListener(x,c,m);for(const O in E.delegates)this.once(O,E.delegates[O]);return this}off(x,c,m){return void 0===m?super.off(x,c):(this._delegatedListeners&&this._delegatedListeners[x]&&(E=>{var O=this._delegatedListeners[x];for(let ae=0;ae<O.length;ae++){var B=O[ae];if(B.layer===c&&B.listener===m){for(const he in B.delegates)this.off(he,B.delegates[he]);return O.splice(ae,1),this}}})(),this)}queryRenderedFeatures(x,c){if(!this.style)return[];let m;var E=x instanceof s.Point||Array.isArray(x),O=E?x:[[0,0],[this.transform.width,this.transform.height]];return c=c||(E?{}:x)||{},m=O instanceof s.Point||"number"==typeof O[0]?[s.Point.convert(O)]:(E=s.Point.convert(O[0]),x=s.Point.convert(O[1]),[E,new s.Point(x.x,E.y),x,new s.Point(E.x,x.y),E]),this.style.queryRenderedFeatures(m,c,this.transform)}querySourceFeatures(x,c){return this.style.querySourceFeatures(x,c)}setStyle(x,c){return!1!==(c=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(x,c))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){var c=this._locale[x];if(null==c)throw new Error(`Missing UI string '${x}'`);return c}_updateStyle(x,c){var m;if(!c.transformStyle||!this.style||this.style._loaded)return m=this.style&&c.transformStyle?this.style.serialize():void 0,this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new I1(this,c||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof x?this.style.loadURL(x,c,m):this.style.loadJSON(x,c,m)):delete this.style,this;this.style.once("style.load",()=>this._updateStyle(x,c))}_lazyInitEmptyStyle(){this.style||(this.style=new I1(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,c){var m;"string"==typeof x?(m=this._requestManager.transformRequest(x,"Style"),s.getJSON(m,new AbortController).then(E=>{this._updateDiff(E.data,c)}).catch(E=>{E&&this.fire(new s.ErrorEvent(E))})):"object"==typeof x&&this._updateDiff(x,c)}_updateDiff(x,c){try{this.style.setState(x,c)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(x,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(x,c){return this._lazyInitEmptyStyle(),this.style.addSource(x,c),this._update(!0)}isSourceLoaded(x){var c=this.style&&this.style.sourceCaches[x];if(void 0!==c)return c.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){var c=this.style.sourceCaches[x.source];if(!c)throw new Error("cannot load terrain, because there exists no source with ID: "+x.source);null===this.terrain&&c.reload();for(const E in this.style._layers){var m=this.style._layers[E];"hillshade"===m.type&&m.source===x.source&&s.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Lk(this.painter,c,x),this.painter.renderToTexture=new Hk(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=E=>{"style"===E.dataType?this.terrain.sourceCache.freeRtt():"source"===E.dataType&&E.tile&&(E.sourceId!==x.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(E.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.Event("terrain",{terrain:x})),this}getTerrain(){var x;return null!=(x=null==(x=this.terrain)?void 0:x.options)?x:null}areTilesLoaded(){var x=this.style&&this.style.sourceCaches;for(const E in x){var c=x[E]._tiles;for(const O in c){var m=c[O];if("loaded"!==m.state&&"errored"!==m.state)return!1}}return!0}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,c,he={}){var E,O,B,ae,{pixelRatio:he=1,sdf:Ee=!1,stretchX:ke,stretchY:Ge,content:Re,contentMatch:qe}=he;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||s.isImageBitmap(c)))return void 0===c.width||void 0===c.height?this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):(({width:E,height:O,data:B}=c),ae=c,this.style.addImage(x,{data:new s.RGBAImage({width:E,height:O},new Uint8Array(B)),pixelRatio:he,stretchX:ke,stretchY:Ge,content:Re,contentMatch:qe,sdf:Ee,version:0,userImage:ae}),ae.onAdd&&ae.onAdd(this,x),this);({width:E,height:O,data:B}=k.getImageData(c)),this.style.addImage(x,{data:new s.RGBAImage({width:E,height:O},B),pixelRatio:he,stretchX:ke,stretchY:Ge,content:Re,contentMatch:qe,sdf:Ee,version:0})}updateImage(x,c){var m,E,O,B=this.style.getImage(x);return B?(({width:O,height:m,data:E}=c instanceof HTMLImageElement||s.isImageBitmap(c)?k.getImageData(c):c),void 0===O||void 0===m?this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):O!==B.data.width||m!==B.data.height?this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(O=!(c instanceof HTMLImageElement||s.isImageBitmap(c)),B.data.replace(E,O),this.style.updateImage(x,B),this)):this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x){return f.getImage(this._requestManager.transformRequest(x,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(x,c){return this._lazyInitEmptyStyle(),this.style.addLayer(x,c),this._update(!0)}moveLayer(x,c){return this.style.moveLayer(x,c),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,c,m){return this.style.setLayerZoomRange(x,c,m),this._update(!0)}setFilter(x,c,m={}){return this.style.setFilter(x,c,m),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,c,m,E={}){return this.style.setPaintProperty(x,c,m,E),this._update(!0)}getPaintProperty(x,c){return this.style.getPaintProperty(x,c)}setLayoutProperty(x,c,m,E={}){return this.style.setLayoutProperty(x,c,m,E),this._update(!0)}getLayoutProperty(x,c){return this.style.getLayoutProperty(x,c)}setGlyphs(x,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,c,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,c,m,E=>{E||this._update(!0)}),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,c,m=>{m||this._update(!0)}),this}setLight(x,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,c),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(x,c){return this.style.setFeatureState(x,c),this._update()}removeFeatureState(x,c){return this.style.removeFeatureState(x,c),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,c=0;return this._container&&(x=this._container.clientWidth||400,c=this._container.clientHeight||300),[x,c]}_setupContainer(){var x=this._container,c=(x.classList.add("maplibregl-map"),this._canvasContainer=X.create("div","maplibregl-canvas-container",x)),m=(this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=X.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),c=this._containerDimensions(),this._getClampedPixelRatio(c[0],c[1]));this._resizeCanvas(c[0],c[1],m);const E=this._controlContainer=X.create("div","maplibregl-control-container",x),O=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{O[B]=X.create("div",`maplibregl-ctrl-${B} `,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,c,m){this._canvas.width=Math.floor(m*x),this._canvas.height=Math.floor(m*c),this._canvas.style.width=x+"px",this._canvas.style.height=c+"px"}_setupPainter(){const x={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let c=null;this._canvas.addEventListener("webglcontextcreationerror",O=>{c={requestedAttributes:x},O&&(c.statusMessage=O.statusMessage,c.type=O.type)},{once:!0});var m,E=this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x);if(!E)throw m="Failed to initialize WebGL",c?(c.message=m,new Error(JSON.stringify(c))):new Error(m);this.painter=new MF(E,this.transform),fe.testSupport(E)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded&&(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint()),this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){var c=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),!this._removed){let E=!1;this.style&&this._styleDirty&&(this._styleDirty=!1,x=this.transform.zoom,m=k.now(),this.style.zoomHistory.update(x,m),1===(m=(x=new s.EvaluationParameters(x,{now:m,fadeDuration:c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()})).crossFadingFactor())&&m===this._crossFadingFactor||(E=!0,this._crossFadingFactor=m),this.style.update(x)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,c,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:c,showPadding:this.showPadding}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();var m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),f.removeThrottleControl(this._imageQueueHandle),null!=(x=this._resizeObserver)&&x.disconnect();var x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),X.remove(this._canvasContainer),X.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(x=>{s.PerformanceUtils.frame(x),this._frameRequest=null,this._render(x)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&((this._showCollisionBoxes=x)?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return LF}getCameraTargetElevation(){return this.transform.elevation}};const Uk=x=>{x.touchstart=x.dragStart,x.touchmoveWindow=x.dragMove,x.touchend=x.dragEnd},BF={showCompass:!0,showZoom:!0,visualizePitch:!1};class zF{constructor(c,m,E=!1){this.mousedown=ae=>{this.startMouse(s.extend({},ae,{ctrlKey:!0,preventDefault:()=>ae.preventDefault()}),X.mousePos(this.element,ae)),X.addEventListener(window,"mousemove",this.mousemove),X.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=ae=>{this.moveMouse(ae,X.mousePos(this.element,ae))},this.mouseup=ae=>{this.mouseRotate.dragEnd(ae),this.mousePitch&&this.mousePitch.dragEnd(ae),this.offTemp()},this.touchstart=ae=>{1!==ae.targetTouches.length?this.reset():(this._startPos=this._lastPos=X.touchPos(this.element,ae.targetTouches)[0],this.startTouch(ae,this._startPos),X.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),X.addEventListener(window,"touchend",this.touchend))},this.touchmove=ae=>{1!==ae.targetTouches.length?this.reset():(this._lastPos=X.touchPos(this.element,ae.targetTouches)[0],this.moveTouch(ae,this._lastPos))},this.touchend=ae=>{0===ae.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;var O=c.dragRotate._mouseRotate.getClickTolerance(),B=c.dragRotate._mousePitch.getClickTolerance();this.element=m,this.mouseRotate=ag({clickTolerance:O,enable:!0}),this.touchRotate=(({enable:x,clickTolerance:c,bearingDegreesPerPixelMoved:m=.8})=>{var E=new Ik;return new il({clickTolerance:c,move:(O,B)=>({bearingDelta:(B.x-O.x)*m}),moveStateManager:E,enable:x,assignEvents:Uk})})({clickTolerance:O,enable:!0}),this.map=c,E&&(this.mousePitch=jT({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:x,clickTolerance:c,pitchDegreesPerPixelMoved:m=-.5})=>{var E=new Ik;return new il({clickTolerance:c,move:(O,B)=>({pitchDelta:(B.y-O.y)*m}),moveStateManager:E,enable:x,assignEvents:Uk})})({clickTolerance:B,enable:!0})),X.addEventListener(m,"mousedown",this.mousedown),X.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),X.addEventListener(m,"touchcancel",this.reset)}startMouse(c,m){this.mouseRotate.dragStart(c,m),this.mousePitch&&this.mousePitch.dragStart(c,m),X.disableDrag()}startTouch(c,m){this.touchRotate.dragStart(c,m),this.touchPitch&&this.touchPitch.dragStart(c,m),X.disableDrag()}moveMouse(c,m){var E=this.map,O=(this.mouseRotate.dragMove(c,m)||{}).bearingDelta;O&&E.setBearing(E.getBearing()+O),this.mousePitch&&(O=(this.mousePitch.dragMove(c,m)||{}).pitchDelta)&&E.setPitch(E.getPitch()+O)}moveTouch(c,m){var E=this.map,O=(this.touchRotate.dragMove(c,m)||{}).bearingDelta;O&&E.setBearing(E.getBearing()+O),this.touchPitch&&(O=(this.touchPitch.dragMove(c,m)||{}).pitchDelta)&&E.setPitch(E.getPitch()+O)}off(){var c=this.element;X.removeEventListener(c,"mousedown",this.mousedown),X.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),X.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),X.removeEventListener(window,"touchend",this.touchend),X.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){X.enableDrag(),X.removeEventListener(window,"mousemove",this.mousemove),X.removeEventListener(window,"mouseup",this.mouseup),X.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),X.removeEventListener(window,"touchend",this.touchend)}}let Zb;function Bk(x,c,m){var E,O,B,ae=new s.LngLat(x.lng,x.lat);for(x=new s.LngLat(x.lng,x.lat),c&&(E=new s.LngLat(x.lng-360,x.lat),O=new s.LngLat(x.lng+360,x.lat),B=m.locationPoint(x).distSqr(c),m.locationPoint(E).distSqr(c)<B?x=E:m.locationPoint(O).distSqr(c)<B&&(x=O));180<Math.abs(x.lng-m.center.lng);){var he=m.locationPoint(x);if(0<=he.x&&0<=he.y&&he.x<=m.width&&he.y<=m.height)break;x.lng>m.center.lng?x.lng-=360:x.lng+=360}return x.lng!==ae.lng&&m.locationPoint(x).y>m.height/2-m.getHorizon()?x:ae}const FP={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zk(x,c,m){var E=x.classList;for(const O in FP)E.remove(`maplibregl-${m}-anchor-`+O);E.add(`maplibregl-${m}-anchor-`+c)}class jk extends s.Evented{constructor(c){if(super(),this._onKeyPress=Ct=>{var ft=Ct.code;Ct=Ct.charCode||Ct.keyCode,"Space"!==ft&&"Enter"!==ft&&32!==Ct&&13!==Ct||this.togglePopup()},this._onMapClick=ft=>{ft=ft.originalEvent.target;var Ct=this._element;this._popup&&(ft===Ct||Ct.contains(ft))&&this.togglePopup()},this._update=qe=>{if(this._map){var ft=this._map.loaded()&&!this._map.isMoving();"terrain"!==qe?.type&&("render"!==qe?.type||ft)||this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Bk(this._lngLat,this._flatPos,this._map.transform):null==(ft=this._lngLat)?void 0:ft.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let Ct="",Rt=("viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?Ct=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(Ct=`rotateZ(${this._rotation-this._map.getBearing()}deg)`),"");"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?Rt="rotateX(0deg)":"map"===this._pitchAlignment&&(Rt=`rotateX(${this._map.getPitch()}deg)`),qe&&"moveend"!==qe.type||(this._pos=this._pos.round()),X.setTransform(this._element,`${FP[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${Rt} `+Ct),k.frameAsync(new AbortController).then(()=>{this._updateOpacity(qe&&"moveend"===qe.type)}).catch(()=>{})}},this._onMove=qe=>{var ft;this._isDragging||(ft=this._clickTolerance||this._map._clickTolerance,this._isDragging=qe.point.dist(this._pointerdownPos)>=ft),this._isDragging&&(this._pos=qe.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new s.Event("dragend")),this._state="inactive"},this._addDragHandler=qe=>{this._element.contains(qe.originalEvent.target)&&(qe.preventDefault(),this._positionDelta=qe.point.sub(this._pos).add(this._offset),this._pointerdownPos=qe.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&"auto"!==c.pitchAlignment?c.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(c?.opacity,c?.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=s.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=X.create("div"),this._element.setAttribute("aria-label","Map marker");var E,m=X.createNS("http://www.w3.org/2000/svg","svg"),O=(((m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41"),E=X.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd"),E=X.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"fill-rule","nonzero"),X.createNS("http://www.w3.org/2000/svg","g")),ae=(O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000"),[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}]);for(const qe of ae){var B=X.createNS("http://www.w3.org/2000/svg","ellipse");B.setAttributeNS(null,"opacity","0.04"),B.setAttributeNS(null,"cx","10.5"),B.setAttributeNS(null,"cy","5.80029008"),B.setAttributeNS(null,"rx",qe.rx),B.setAttributeNS(null,"ry",qe.ry),O.appendChild(B)}var he,Ee,ke=((((((ae=X.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"fill",this._color),he=X.createNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(he),he=X.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"fill","#000000"),Ee=X.createNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),he.appendChild(Ee),Ee=X.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ee.setAttributeNS(null,"fill","#FFFFFF"),X.createNS("http://www.w3.org/2000/svg","g")),Ge=(ke.setAttributeNS(null,"transform","translate(8.0, 8.0)"),X.createNS("http://www.w3.org/2000/svg","circle")),Re=(Ge.setAttributeNS(null,"fill","#000000"),Ge.setAttributeNS(null,"opacity","0.25"),Ge.setAttributeNS(null,"cx","5.5"),Ge.setAttributeNS(null,"cy","5.5"),Ge.setAttributeNS(null,"r","5.4999962"),X.createNS("http://www.w3.org/2000/svg","circle"));Re.setAttributeNS(null,"fill","#FFFFFF"),Re.setAttributeNS(null,"cx","5.5"),Re.setAttributeNS(null,"cy","5.5"),Re.setAttributeNS(null,"r","5.4999962"),ke.appendChild(Ge),ke.appendChild(Re),E.appendChild(O),E.appendChild(ae),E.appendChild(he),E.appendChild(Ee),E.appendChild(ke),m.appendChild(E),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=s.Point.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",qe=>{qe.preventDefault()}),this._element.addEventListener("mousedown",qe=>{qe.preventDefault()}),zk(this._element,this._anchor,"marker"),c&&c.className)for(const qe of c.className.split(" "))this._element.classList.add(qe);this._popup=null}addTo(c){return this.remove(),(this._map=c).getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),X.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=s.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){var m;return this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c&&("offset"in c.options||(m=Math.abs(13.5)/Math.SQRT2,c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset),this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)),this}getPopup(){return this._popup}togglePopup(){var c=this._popup;return this._element.style.opacity!==this._opacityWhenCovered&&c&&(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map))),this}_updateOpacity(c=!1){if(null!=(E=this._map)&&E.terrain){if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}var m,E=this._map,O=(c=E.terrain.depthAtPoint(this._pos),E.terrain.getElevationForLngLatZoom(this._lngLat,E.transform.tileZoom));E.transform.lngLatToCameraDepth(this._lngLat,O)-c<.006?this._element.style.opacity=this._opacity:(c=-this._offset.y/E.transform._pixelPerMeter,c=Math.sin(E.getPitch()*Math.PI/180)*c,m=E.terrain.depthAtPoint(new s.Point(this._pos.x,this._pos.y-this._offset.y)),E=.006<E.transform.lngLatToCameraDepth(this._lngLat,O+c)-m,null!=(O=this._popup)&&O.isOpen()&&E&&this._popup.remove(),this._element.style.opacity=E?this._opacityWhenCovered:this._opacity)}else this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity)}getOffset(){return this._offset}setOffset(c){return this._offset=s.Point.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&"auto"!==c?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,m){return void 0===c&&void 0===m&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==c&&(this._opacity=c),void 0!==m&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const Hz={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let HP=0,UP=!1;const Jb={maxWidth:100,unit:"metric"};function $F(x,c,m){var E=m&&m.maxWidth||100,B=x.unproject([0,O=x._container.clientHeight/2]),O=x.unproject([E,O]);B=B.distanceTo(O),m&&"imperial"===m.unit?5280<(O=3.2808*B)?YT(c,E,O/5280,x._getUIString("ScaleControl.Miles")):YT(c,E,O,x._getUIString("ScaleControl.Feet")):m&&"nautical"===m.unit?YT(c,E,B/1852,x._getUIString("ScaleControl.NauticalMiles")):1e3<=B?YT(c,E,B/1e3,x._getUIString("ScaleControl.Kilometers")):YT(c,E,B,x._getUIString("ScaleControl.Meters"))}function YT(x,c,m,E){var B,he,Ee,ae,O=(B=m,(ae=Math.pow(10,(""+Math.floor(B)).length-1))*(B=10<=(B/=ae)?10:5<=B?5:3<=B?3:2<=B?2:1<=B?1:(he=B,Ee=Math.pow(10,Math.ceil(-Math.log(he)/Math.LN10)),Math.round(he*Ee)/Ee)));x.style.width=c*(O/m)+"px",x.innerHTML=O+"&nbsp;"+E}const VF={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},zz=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function BP(x){var c;return x?"number"==typeof x?(c=Math.round(Math.abs(x)/Math.SQRT2),{center:new s.Point(0,0),top:new s.Point(0,x),"top-left":new s.Point(c,c),"top-right":new s.Point(-c,c),bottom:new s.Point(0,-x),"bottom-left":new s.Point(c,-c),"bottom-right":new s.Point(-c,-c),left:new s.Point(x,0),right:new s.Point(-x,0)}):x instanceof s.Point||Array.isArray(x)?{center:c=s.Point.convert(x),top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}:{center:s.Point.convert(x.center||[0,0]),top:s.Point.convert(x.top||[0,0]),"top-left":s.Point.convert(x["top-left"]||[0,0]),"top-right":s.Point.convert(x["top-right"]||[0,0]),bottom:s.Point.convert(x.bottom||[0,0]),"bottom-left":s.Point.convert(x["bottom-left"]||[0,0]),"bottom-right":s.Point.convert(x["bottom-right"]||[0,0]),left:s.Point.convert(x.left||[0,0]),right:s.Point.convert(x.right||[0,0])}:BP(new s.Point(0,0))}const jz=v;o.AJAXError=s.AJAXError,o.Evented=s.Evented,o.LngLat=s.LngLat,o.MercatorCoordinate=s.MercatorCoordinate,o.Point=s.Point,o.addProtocol=s.addProtocol,o.config=s.config,o.removeProtocol=s.removeProtocol,o.AttributionControl=KT,o.BoxZoomHandler=RF,o.CanvasSource=kt,o.CooperativeGesturesHandler=NP,o.DoubleClickZoomHandler=GT,o.DragPanHandler=RP,o.DragRotateHandler=Qb,o.EdgeInsets=UT,o.FullscreenControl=class Bz extends s.Evented{constructor(c={}){super(),this._onFullscreenChange=()=>{var m;let E=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null!=(m=E?.shadowRoot)&&m.fullscreenElement;)E=E.shadowRoot.fullscreenElement;E===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,c&&c.container&&(c.container instanceof HTMLElement?this._container=c.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(c){return this._map=c,this._container||(this._container=this._map.getContainer()),this._controlContainer=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){X.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){var c=this._fullscreenButton=X.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);X.create("span","maplibregl-ctrl-icon",c).setAttribute("aria-hidden","true"),c.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){var c=this._getTitle();this._fullscreenButton.setAttribute("aria-label",c),this._fullscreenButton.title=c}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.Event("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.Event("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Ye,o.GeolocateControl=class Uz extends s.Evented{constructor(c){super(),this._onSuccess=m=>{if(this._map){if(this._isOutOfMapMaxBounds(m))this._setErrorState(),this.fire(new s.Event("outofmaxbounds",m)),this._updateMarker();else{if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState "+this._watchState)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(m),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.Event("geolocate",m))}this._finish()}},this._updateCamera=E=>{var B=new s.LngLat(E.coords.longitude,E.coords.latitude),O=(E=E.coords.accuracy,this._map.getBearing());O=s.extend({bearing:O},this.options.fitBoundsOptions),B=er.fromLngLat(B,E),this._map.fitBounds(B,O,{geolocateSource:!0})},this._updateMarker=m=>{var E;m?(E=new s.LngLat(m.coords.longitude,m.coords.latitude),this._accuracyCircleMarker.setLngLat(E).addTo(this._map),this._userLocationDotMarker.setLngLat(E).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()):(this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove())},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=m=>{if(this._map){if(this.options.trackUserLocation)if(1===m.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var E=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===m.code&&UP)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.Event("error",m)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=m=>{this._map&&(this._container.addEventListener("contextmenu",E=>E.preventDefault()),this._geolocateButton=X.create("button","maplibregl-ctrl-geolocate",this._container),X.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),!(this._geolocateButton.type="button")===m?(s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),m=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)):(m=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=X.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new jk({element:this._dotElement}),this._circleElement=X.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jk({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation)&&this._map.on("movestart",E=>{E.geolocateSource||"ACTIVE_LOCK"!==this._watchState||E.originalEvent&&"resize"===E.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})},this.options=s.extend({},Hz,c)}onAdd(c){return this._map=c,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function jF(){return s.__awaiter(this,arguments,void 0,function*(x=!1){if(void 0===Zb||x){if(void 0===window.navigator.permissions)return Zb=!!window.navigator.geolocation;try{var c=yield window.navigator.permissions.query({name:"geolocation"});Zb="denied"!==c.state}catch{Zb=!!window.navigator.geolocation}}return Zb})}().then(m=>this._setupUI(m)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),X.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,HP=0,UP=!1}_isOutOfMapMaxBounds(E){var m=this._map.getMaxBounds();return E=E.coords,m&&(E.longitude<m.getWest()||E.longitude>m.getEast()||E.latitude<m.getSouth()||E.latitude>m.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState "+this._watchState)}}_updateCircleRadius(){var m=(c=this._map.getBounds()).getSouthEast(),c=c.getNorthEast();m=m.distanceTo(c),c=this._map._container.clientHeight,m=Math.ceil(this._accuracy/(m/c)*2),this._circleElement.style.width=m+"px",this._circleElement.style.height=m+"px"}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":HP--,UP=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"));break;default:throw new Error("Unexpected watchState "+this._watchState)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState "+this._watchState)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let c;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),HP++,UP=1<HP?(c={maximumAge:6e5,timeout:0},!0):(c=this.options.positionOptions,!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,c)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=Vg,o.ImageSource=Pe,o.KeyboardHandler=fu,o.LngLatBounds=er,o.LogoControl=kP,o.Map=hc,o.MapMouseEvent=Wp,o.MapTouchEvent=ey,o.MapWheelEvent=Yb,o.Marker=jk,o.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{var c=(m=this._map.getZoom())===this._map.getMaxZoom(),m=m===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{var c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=c},this._setButtonTitle=(c,m)=>{m=this._map._getUIString("NavigationControl."+m),c.title=m,c.setAttribute("aria-label",m)},this.options=s.extend({},BF,x),this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",c=>this._map.zoomIn({},{originalEvent:c})),X.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",c=>this._map.zoomOut({},{originalEvent:c})),X.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})}),this._compassIcon=X.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zF(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){X.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,c){return(x=X.create("button",x,this._container)).type="button",x.addEventListener("click",c),x}},o.Popup=class eE extends s.Evented{constructor(c){super(),this.remove=()=>(this._content&&X.remove(this._content),this._container&&(X.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.Event("close"))),this),this._onMouseUp=m=>{this._update(m.point)},this._onMouseMove=m=>{this._update(m.point)},this._onDrag=m=>{this._update(m.point)},this._update=m=>{var E=this._lngLat||this._trackPointer;if(this._map&&E&&this._content){if(!this._container){if(this._container=X.create("div","maplibregl-popup",this._map.getContainer()),this._tip=X.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const ae of this.options.className.split(" "))this._container.classList.add(ae);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Bk(this._lngLat,this._flatPos,this._map.transform):null==(E=this._lngLat)?void 0:E.wrap(),!this._trackPointer||m){E=this._flatPos=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat),this._map.terrain&&(this._flatPos=this._trackPointer&&m?m:this._map.transform.locationPoint(this._lngLat));let ae=this.options.anchor;if(m=BP(this.options.offset),!ae){var O=this._container.offsetWidth,B=this._container.offsetHeight;let Ee;Ee=E.y+m.bottom.y<B?["top"]:E.y>this._map.transform.height-B?["bottom"]:[],E.x<O/2?Ee.push("left"):E.x>this._map.transform.width-O/2&&Ee.push("right"),ae=0===Ee.length?"bottom":Ee.join("-")}let he=E.add(m[ae]);this.options.subpixelPositioning||(he=he.round()),X.setTransform(this._container,`${FP[ae]} translate(${he.x}px,${he.y}px)`),zk(this._container,ae,"popup")}}},this._onClose=()=>{this.remove()},this.options=s.extend(Object.create(VF),c)}addTo(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=s.LngLat.convert(c),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(c){return this.setDOMContent(document.createTextNode(c))}setHTML(c){var m,E=document.createDocumentFragment(),O=document.createElement("body");for(O.innerHTML=c;m=O.firstChild;)E.appendChild(m);return this.setDOMContent(E)}getMaxWidth(){var c;return null==(c=this._container)?void 0:c.style.maxWidth}setMaxWidth(c){return this.options.maxWidth=c,this._update(),this}setDOMContent(c){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=X.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(c),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(c){this._container&&this._container.classList.add(c)}removeClassName(c){this._container&&this._container.classList.remove(c)}setOffset(c){return this.options.offset=c,this._update(),this}toggleClassName(c){if(this._container)return this._container.classList.toggle(c)}setSubpixelPositioning(c){this.options.subpixelPositioning=c}_createCloseButton(){this.options.closeButton&&(this._closeButton=X.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){var c;this.options.focusAfterOpen&&this._container&&(c=this._container.querySelector(zz))&&c.focus()}},o.RasterDEMTileSource=Vo,o.RasterTileSource=Gi,o.ScaleControl=class{constructor(x){this._onMove=()=>{$F(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,$F(this._map,this._container,this.options)},this.options=s.extend({},Jb,x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){X.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=Wb,o.Style=I1,o.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=x}onAdd(x){return this._map=x,this._container=X.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=X.create("button","maplibregl-ctrl-terrain",this._container),X.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){X.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=DF,o.TwoFingersTouchRotateHandler=$T,o.TwoFingersTouchZoomHandler=PP,o.TwoFingersTouchZoomRotateHandler=xP,o.VectorTileSource=to,o.VideoSource=gt,o.addSourceType=(x,c)=>s.__awaiter(void 0,void 0,void 0,function*(){if(St(x))throw new Error(`A source type called "${x}" already exists.`);yn[x]=c}),o.clearPrewarmedResources=function(){var x=Bn;x&&(x.isPreloaded()&&1===x.numActive()?(x.release(Li),Bn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return vi().getRTLTextPluginStatus()},o.getVersion=function(){return jz},o.getWorkerCount=function(){return Qi.workerCount},o.getWorkerUrl=function(){return s.config.WORKER_URL},o.importScriptInWorkers=function(x){return za().broadcast("IS",x)},o.prewarm=function(){Qs().acquire(Li)},o.setMaxParallelImageRequests=function(x){s.config.MAX_PARALLEL_IMAGE_REQUESTS=x},o.setRTLTextPlugin=function(x,c){return vi().setRTLTextPlugin(x,c)},o.setWorkerCount=function(x){Qi.workerCount=x},o.setWorkerUrl=function(x){s.config.WORKER_URL=x}}),t}(),N.exports)),K={exports:{}},U=function V(n){var t,e;return n.__esModule?n:("function"==typeof(t=n.default)?(e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)}).prototype=t.prototype:e={},Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),e)}(Object.freeze({__proto__:null,default:{}})),_e=(function(n){for(var t,e,i=0,o=[],s=0;s<256;s++)o[s]=(s+256).toString(16).substr(1);function f(){I=16,(!t||v.BUFFER_SIZE<i+I)&&(i=0,t=v.randomBytes(v.BUFFER_SIZE));var I=t.slice(i,i+=I);return I[6]=15&I[6]|64,I[8]=63&I[8]|128,I}function v(){var I=f();return o[I[0]]+o[I[1]]+o[I[2]]+o[I[3]]+"-"+o[I[4]]+o[I[5]]+"-"+o[I[6]]+o[I[7]]+"-"+o[I[8]]+o[I[9]]+"-"+o[I[10]]+o[I[11]]+o[I[12]]+o[I[13]]+o[I[14]]+o[I[15]]}v.BUFFER_SIZE=4096,v.bin=f,v.clearBuffer=function(){t=null,i=0},v.test=function(I){return"string"==typeof I&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(I)},typeof crypto<"u"?e=crypto:typeof window<"u"&&void 0!==window.msCrypto&&(e=window.msCrypto),e=e||U,n.exports=v,v.randomBytes=function(){if(e){if(e.randomBytes)return e.randomBytes;if(e.getRandomValues)return"function"!=typeof Uint8Array.prototype.slice?function(I){return I=new Uint8Array(I),e.getRandomValues(I),Array.from(I)}:function(I){return I=new Uint8Array(I),e.getRandomValues(I),I}}return function(I){for(var D=[],k=0;k<I;k++)D.push(Math.floor(256*Math.random()));return D}}()}(K),K.exports),Ae=T(_e),Ne={domain:"atlas.microsoft.com",staticAssetsDomain:"atlas.microsoft.com",stylePath:"styling",styleDefinitionsVersion:"2023-01-01",appInsightsKey:"e96cb745-c6f5-409c-a775-c4313e468c1d",aadInstance:"https://login.microsoftonline.com/"},tt=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_t=function(){function n(){}return n.prototype.merge=function(){for(var t,e,i,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];try{for(var f=tt(o),v=f.next();!v.done;v=f.next()){var I=v.value;if(I)for(var D in I)I.hasOwnProperty(D)&&this.hasOwnProperty(D)&&(void 0!==I[D]&&null!=I[D]?this[D]instanceof n?this[D].merge(I[D]):this[D]=I[D]:(i=i||new(Object.getPrototypeOf(this).constructor),this[D]=i[D]))}}catch(k){t={error:k}}finally{try{v&&!v.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}return this},n}(),Bt=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yt=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},Pt=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.domain=void 0,e.headers={},e.path="",e.protocol="https",e.queryParams={},e.subdomain="",e}return Bt(t,n),t}(_t),vt=function(){function n(t){this.options=(new Pt).merge(t)}return n.prototype.get=function(){return fetch(this.toString(),{method:"GET",mode:"cors",headers:new Headers(this.options.headers)}).then(function(t){if(t.ok)return t.json();throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText))})},n.prototype.toString=function(){var t=Object.entries(this.options.queryParams).map(function(f){var s=(f=yt(f,2))[0];return f=f[1],"".concat(s,"=").concat(f)}).join("&"),e=[],i=this.options.path||"";return n.protoRegEx.test(i)?e.push(i):(this.options.domain&&(n.protoRegEx.test(this.options.domain)||(e.push("".concat(this.options.protocol,"://")),e.push(this.options.subdomain?"".concat(this.options.subdomain,"."):"")),e.push(this.options.domain)),e.push(this.options.path?"/".concat(i):"")),e.push(t?"?".concat(t):""),e.join("")},n.protoRegEx=new RegExp(/^(((file|http|https):\/\/)|blob:)/i),n}(),Gt=function(){function n(){}return n.parse=function(t){var e=(t=t.toLowerCase()).lastIndexOf("-");return-1!==e?{code:t,language:t.substring(0,e),region:t.substring(e+1)}:{code:t,language:t}},n}(),Ht={localizationsPath:"locs/mapcontrol/2019-3-12",sensitiveUserRegions:["il","kr","pk","in","cn","ar","bh","eg","jo","sa","kw","om","qa","ma","ae"],locales:{defaultLanguage:{defaultRegion:{code:"NGT",strings:"en/resource.json"},latn:{code:"NGT-Latn",strings:"en/resource.json"}},ar:{defaultRegion:{code:"ar",strings:"ar-sa/resource.json"}},bg:{defaultRegion:{code:"bg-BG",strings:"bg-bg/resource.json"}},cs:{defaultRegion:{code:"cs-CZ",strings:"cs-cz/resource.json"}},da:{defaultRegion:{code:"da-DK",strings:"da-dk/resource.json"}},de:{defaultRegion:{code:"de-DE",strings:"de-de/resource.json"}},el:{defaultRegion:{code:"el-GR",strings:"el-gr/resource.json"}},en:{defaultRegion:{code:"en",strings:"en/resource.json"},us:{code:"en-US",strings:"en/resource.json"},au:{code:"en-AU",strings:"en/resource.json"},gb:{code:"en-GB",strings:"en/resource.json"},nz:{code:"en-NZ",strings:"en/resource.json"}},es:{defaultRegion:{code:"es-ES",strings:"es-es/resource.json"},mx:{code:"es-MX",strings:"es-mx/resource.json"}},fi:{defaultRegion:{code:"fi-FI",strings:"fi-fi/resource.json"}},fr:{defaultRegion:{code:"fr-FR",strings:"fr-fr/resource.json"}},hu:{defaultRegion:{code:"hu-HU",strings:"hu-hu/resource.json"}},id:{defaultRegion:{code:"id-ID",strings:"id-id/resource.json"}},it:{defaultRegion:{code:"it-IT",strings:"it-it/resource.json"}},ko:{defaultRegion:{code:"ko-KR",strings:"ko-kr/resource.json"}},lt:{defaultRegion:{code:"lt-LT",strings:"lt-lt/resource.json"}},ms:{defaultRegion:{code:"ms-MY",strings:"ms-my/resource.json"}},nb:{defaultRegion:{code:"nb-NO",strings:"nb-no/resource.json"}},nl:{defaultRegion:{code:"nl-NL",strings:"nl-nl/resource.json"}},pl:{defaultRegion:{code:"pl-PL",strings:"pl-pl/resource.json"}},pt:{defaultRegion:{code:"pt-PT",strings:"pt-pt/resource.json"},br:{code:"pt-BR",strings:"pt-br/resource.json"}},ru:{defaultRegion:{code:"ru-RU",strings:"ru-ru/resource.json"}},sk:{defaultRegion:{code:"sk-SK",strings:"sk-sk/resource.json"}},sl:{defaultRegion:{code:"sl-SL",strings:"sl-sl/resource.json"}},sv:{defaultRegion:{code:"sv-SE",strings:"sv-se/resource.json"}},th:{defaultRegion:{code:"th-TH",strings:"th-th/resource.json"}},tr:{defaultRegion:{code:"tr-TR",strings:"tr-tr/resource.json"}},zh:{defaultRegion:{code:"zh",strings:"en/resource.json"}},"zh-hans":{defaultRegion:{code:"zh-Hans",strings:"zh-cn/resource.json"},cn:{code:"zh-Hans-CN",strings:"zh-cn/resource.json"}},"zh-hant":{defaultRegion:{code:"zh-Hant",strings:"en/resource.json"},tw:{code:"zh-Hant-TW",strings:"zh-tw/resource.json"}}}},jt=function(){this.Unknown="Unknown",this.Accident="Accident",this.Fog="Fog",this.Danger="Danger",this.Rain="Rain",this.Ice="Ice",this.Jam="Jam",this.LaneClosed="Lane Closed",this.RoadClosed="Road Closed",this.RoadWorks="Road Works",this.Wind="Wind",this.Flood="Flood",this.Detour="Detour"},Yt=function(){function n(){}return n.getCode=function(t){var e=Gt.parse(t);return-1===Ht.sensitiveUserRegions.indexOf(e.region)?this.getLocaleData(e).code:t},n.getStrings=function(t){return t=this.getLocaleData(t),Ht.locales.defaultLanguage.defaultRegion.code===t.code?new Promise(function(e){e(new jt)}):new vt({domain:Ne.staticAssetsDomain,path:"".concat(Ht.localizationsPath,"/").concat(t.strings)}).get().then(function(e){return e},function(){return new jt})},n.getLocaleData=function(t){if("string"==typeof t&&(t=Gt.parse(t)),Ht.locales[t.code])return Ht.locales[t.code].defaultRegion;var e;if(Ht.locales[t.language])e=Ht.locales[t.language];else{if(-1!==t.language.indexOf("-"))return this.getLocaleData(t.language);e=Ht.locales.defaultLanguage}return t.region&&e[t.region]?e[t.region]:e.defaultRegion},n}(),On=function(){function n(){}return n.getEdgeOrIEVersion=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");return 0<e?parseInt(t.substring(e+5,t.indexOf(".",e)),10):0<t.indexOf("Trident/")?(e=t.indexOf("rv:"),parseInt(t.substring(e+3,t.indexOf(".",e)),10)):0<(e=t.indexOf("Edge/"))?parseInt(t.substring(e+5,t.indexOf(".",e)),10):-1},n.isEdgeOrIE=function(){return-1!==this.getEdgeOrIEVersion()},n.isIE=function(){var t=this.getEdgeOrIEVersion();return-1!==t&&t<=11},n}(),In="3.3.0",Rn=function(){function n(){}return n.getFullVersion=function(){return In},n.getEndpointVersion=function(){var t=In.indexOf(".");return-1===(t=In.indexOf(".",t+1))?In:In.substring(0,t)},n}(),Nr=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wr=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},Gr=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},Tn=((n=Y=Y||{}).subscriptionKey="subscriptionKey",n.aad="aad",n.anonymous="anonymous",n.sas="sas",function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.authType=void 0,e.subscriptionKey=void 0,e.clientId=void 0,e.aadAppId=void 0,e.aadTenant=void 0,e.aadInstance=void 0,e.getToken=void 0,e.sasToken=void 0,e.authContext=void 0,e}return Nr(t,n),t.prototype.setSubscriptionKey=function(e){this.authType=Y.subscriptionKey,this.subscriptionKey=e},t.prototype.setAadProperties=function(e,i,o,s,f){this.authType=Y.aad,this.authContext=f||this.authContext,this.aadInstance=s||this.aadInstance,this.clientId=e,this.aadAppId=i,this.aadTenant=o},t.prototype.setTokenCallbackFunction=function(e){this.authType=Y.anonymous,this.getToken=e},t.prototype.setSasCallbackFunction=function(e){this.authType=Y.sas,this.getToken=e},t.prototype.merge=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=n.prototype.merge.apply(this,Gr([],wr(e),!1));return o.authType===Y.subscriptionKey?o.authContext=o.aadAppId=o.getToken=void 0:o.authType===Y.aad?o.subscriptionKey=o.getToken=void 0:o.authType===Y.anonymous?o.subscriptionKey=o.authContext=o.aadAppId=void 0:o.authType===Y.sas&&(o.authContext=o.subscriptionKey=o.aadAppId=void 0),o},t}(_t)),Nn=br;function br(n){return!function bt(n){return function qt(){return typeof window<"u"&&typeof document<"u"}()?function fn(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}()?function Ut(){return Function.prototype&&Function.prototype.bind}()?function bn(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}()?function Pn(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}()?function gr(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var n,t,e=new Blob([""],{type:"text/javascript"});e=URL.createObjectURL(e);try{t=new Worker(e),n=!0}catch{n=!1}return t&&t.terminate(),URL.revokeObjectURL(e),n}()?function ui(){return"Uint8ClampedArray"in window}()?function Oi(){return ArrayBuffer.isView}()?function Dr(){var n=document.createElement("canvas"),t=(n.width=n.height=1,n.getContext("2d"));return!!t&&(t=t.getImageData(0,0,1,1))&&t.width===n.width}()?function ra(n){return void 0===ei[n]&&(ei[n]=function No(e){var t;if(!(e=function Hi(n){var t=document.createElement("canvas"),e=Object.create(br.webGLContextAttributes);return e.failIfMajorPerformanceCaveat=n,t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}(e)))return!1;try{t=e.createShader(e.VERTEX_SHADER)}catch{return!1}return!(!t||e.isContextLost())&&(e.shaderSource(t,"void main() {}"),e.compileShader(t),!0===e.getShaderParameter(t,e.COMPILE_STATUS))}(n)),ei[n]}(n&&n.failIfMajorPerformanceCaveat)?function fo(){return!document.documentMode}()?void 0:"insufficient ECMAScript 6 support":"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}(n)}var hr,ei={};br.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var jr="NGT",Do=Ae(),_i=Ne.domain,xs=Ne.staticAssetsDomain,tc=Ne.stylePath,gc=Ne.styleDefinitionsVersion,Vs="2.0",Fo=new Tn,Ta=!1,kr=!1,Ei=!1,dr=!1,Gs=!1,va=!1,$a=!1,ca=!1,Xo=!1;function ua(){return Object.assign({},Fo)}function Ho(){return xs}function Aa(){return _i}function oo(){return tc}function so(){return gc}function Ci(){return Vs}function Oc(){return M.getWorkerCount()}function Ns(){return M.getMaxParallelImageRequests()}function Ds(){return jr}function ns(){return Do}function ba(){return Fo.authType===Y.subscriptionKey?Fo.subscriptionKey:void 0}function _s(){return hr}function Kt(){return hr}function en(){return Rn.getFullVersion()}function Qe(n){return!On.isIE()&&Nn({failIfMajorPerformanceCaveat:n})&&null!==document.createElement("canvas").getContext("webgl2")}function Et(n){Fo=(new Tn).merge(Fo,n),Xo=!0}function wn(n){_i=n,kr=!0}function $n(n){tc=n,Ei=!0}function Ti(n){gc=n,dr=!0}function ji(n){Vs=n}function xn(n){0<n&&(M.setWorkerCount(n),Gs=!0)}function ia(n){0<n&&(M.setMaxParallelImageRequests(n),va=!0)}function oa(n){jr=Yt.getCode(n),$a=!0}function ys(n){Do=n,ca=!0}function jc(n){Fo.setSubscriptionKey(n),Xo=!0}function Tl(n){hr=n,Ta=!0}function qs(n){hr=n,Ta=!0}function Wo(n,t,e){!e&&hl[n.toLowerCase()]||(hl[n.toLowerCase()]=t)}function eu(n,t){if(t=Math.abs(t||1),"string"==typeof n&&hl[n.toLowerCase()]){for(var e=hl[n.toLowerCase()],i=/calc\(([0-9.]+)[px]*\s*\*\s*\{scale\}\)/gi,o=e,s=i.exec(e);s;)o=o.replace(s[0],parseFloat(s[1])*t+""),s=i.exec(e);return o.replace("{scale}",t+"")}throw new Error("Invalid templateName.")}function vs(){return Object.keys(hl)}function Va(){M.prewarm()}function Pc(){M.clearPrewarmedResources()}function rs(){return Xo}function ks(){return kr}function Ia(){return Ei}function Al(){return dr}function cl(){return Gs}function ll(){return va}function ul(){return $a}function Cs(){return ca}function Il(){return Ta}function jl(){return Ne.domain}function Dl(){return Aa()}function dl(){var n=new vt({domain:Ne.staticAssetsDomain,path:"sdk/javascript/mapcontrol/".concat(Rn.getEndpointVersion(),"/mapbox-gl-rtl-text.min.js")});M.setRTLTextPlugin(n.toString(),!0).catch(function(t){t&&console.warn(t)})}var Zo,Ga,hl={marker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 26 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><text x="12.5" y="17.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:2"/><text x="12.5" y="18.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-circle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><circle cx="12.5" cy="12.5" r="9" fill="{secondaryColor}"/><text x="12" y="17.5" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(24 * {scale})" height="calc(28 * {scale})" viewBox="0 0 24 28"><path d="m11.988 16.615a5.15 5.15 0 0 1-2.268-.525 4.909 4.909 0 0 1-2.805-4.442 5.019 5.019 0 0 1 5.072-4.936h.012a5.03 5.03 0 0 1 5.085 4.961 4.907 4.907 0 0 1-.549 2.224 5.114 5.114 0 0 1-4.548 2.718zm0-8.06a3.173 3.173 0 0 0-3.226 3.099 3.081 3.081 0 0 0 1.77 2.782 3.299 3.299 0 0 0 4.365-1.386 3.049 3.049 0 0 0 .342-1.381 3.184 3.184 0 0 0-3.239-3.114h-.012z" fill="{secondaryColor}"/><path d="m11.999.922a10.908 10.908 0 0 0-11.076 10.732 10.639 10.639 0 0 0 4.418 8.598l6.658 6.464 6.658-6.463a10.537 10.537 0 0 0 2.198-15.041 11.182 11.182 0 0 0-8.856-4.289zm1.873 14.341a4.221 4.221 0 0 1-5.589-1.789 3.945 3.945 0 0 1-.445-1.8 4.164 4.164 0 0 1 8.323-.037 4.028 4.028 0 0 1-2.289 3.626Z" fill="{color}"/><path d="m11.999 28-7.256-7.044a11.611 11.611 0 0 1-4.743-9.303 11.844 11.844 0 0 1 11.988-11.652.102 .102 0 0 1 .02 0 12.164 12.164 0 0 1 9.577 4.647 11.357 11.357 0 0 1 2.299 8.614 11.521 11.521 0 0 1-4.63 7.695zm-.01-26.157a9.997 9.997 0 0 0-10.143 9.812 9.769 9.769 0 0 0 4.04 7.853l.099.083 6.014 5.838 6.113-5.922a9.7 9.7 0 0 0 3.945-6.505 9.533 9.533 0 0 0-1.933-7.229 10.305 10.305 0 0 0-8.116-3.931h-.021zm.021 14.772a5.11 5.11 0 0 1-4.547-2.718 4.868 4.868 0 0 1 .932-5.743 5.118 5.118 0 0 1 3.58-1.46h.024a5.031 5.031 0 0 1 5.084 4.938 4.92 4.92 0 0 1-2.805 4.457h0a5.152 5.152 0 0 1-2.269.525zm-.011-8.079h-.015a3.277 3.277 0 0 0-2.295.933 3.029 3.029 0 0 0-.587 3.58 3.297 3.297 0 0 0 4.364 1.386h0a3.092 3.092 0 0 0 1.772-2.795 3.185 3.185 0 0 0-3.239-3.105z" fill="{secondaryColor}"/><text x="12" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"pin-round":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25 * {scale})" height="calc(25 * {scale})" viewBox="0 0 25 25"><g transform="translate(0 1)"><circle cx="12.25" cy="11.5833" r="11" fill="{color}"/><path d="m12.25 23.583a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-22a10 10 0 1 0 10 10 10 10 0 0 0-10-10z" fill="{secondaryColor}"/><circle cx="12.25" cy="11.5833" r="4.2386" fill="{secondaryColor}"/></g><text x="12.5" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-flat":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(42.8 * {scale})"  viewBox="0 0 1600 2570"><g fill="{color}"><path d="M691 2419c-409-575-641-1086-683-1504-10-106-10-136 5-224 31-188 105-330 241-458 129-124 270-190 453-214 69-9 113-10 182-1 373 46 655 326 703 698 40 308-120 801-424 1309-134 224-348 535-369 535-4 0-53-63-108-141z"/></g><g fill="rgba(0,0,0,0.15)" style="transform:scale(-1,1);transform-origin:center"><path d="M691 2419c-407-571-639-1083-682-1498-14-139-3-249 37-371 69-208 254-402 459-481 68-27 217-59 271-59h24v160 180 940 635c0 349-2 635-5 635-2 0-49-63-104-141z"/></g><circle cx="800" cy="800" r="600" fill="{secondaryColor}"/><text x="800" y="1100" style="font-size:800px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-arrow":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25.47 * {scale})" height="calc(35.18 * {scale})" viewBox="0 0 4330 5980"><g fill="{color}"><path d="m2080 5969c-49-20-93-63-115-113-25-55-1928-5486-1953-5573-40-138 67-282 210-283 36 0 246 73 987 345 518 190 947 345 955 345 8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29-33 0-71-5-85-10z"/></g><g fill="{secondaryColor}"><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z"/><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z" style="transform:scale(-1,1);transform-origin:center"/></g><g fill="rgba(0,0,0,0.2)" ><path d="m2165 685c8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29z"/></g><text x="2165" y="3300" style="font-size:2500px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-ball-pin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15.67 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 235 452"><g transform="translate(-135 10)"><path fill="{secondaryColor}" d="m256 442 0 0c-13 0-18-11-18-24l-6-323c0-13 11-24 24-24h0c13 0 24 11 24 24l-6 323c0 13-5 24-18 24z"/><circle style="fill:{color};stroke-width:10;stroke:{secondaryColor}" cx="256" cy="112" r="111"/><ellipse transform="matrix(0.834 0.5518 -0.5518 0.834 65.7916 -97.18)" fill="rgba(255,255,255,0.3)" cx="194.399" cy="60.749" rx="19.076" ry="32.428"/></g><text x="117.5" y="160" style="font-size:160px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.67 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2000 2420"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M845 2152c-22-37-58-95-80-129-22-35-62-99-90-143l-50-80-312 0-313 0 0-900 0-900 900 0 900 0 0 900 0 900-313 0-313 0-34 58c-19 31-38 59-42 60-5 2-8 8-8 12 0 9-69 123-88 145-5 6-11 15-13 21-16 39-77 123-89 124-8 0-33-31-55-68z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(38.8 * {scale})" viewBox="0 0 2500 2910"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m866 2652c-17-31-37-68-46-82-9-14-32-54-51-90-19-36-50-92-70-125l-36-60-332-3-331-2 0-905 0-905 660 0 660 0 0-38c0-71 50-196 102-258 71-85 189-164 244-164 12 0 26-4 29-10 8-13 222-13 230 0 3 6 17 10 30 10 25 0 117 45 154 76 130 107 191 232 191 392 0 155-63 284-190 386-36 29-129 76-150 76-11 0-22 5-25 10-3 6-31 10-61 10l-54 0 0 660 0 660-332 2-332 3-29 50c-17 28-48 84-70 125-22 41-47 86-56 100-9 14-30 51-46 83-17 32-36 57-45 57-8 0-28-25-44-58z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.8 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2010 2410"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M856 2155c-20-30-36-59-36-65 0-5-4-10-10-10-5 0-10-5-10-11 0-5-18-37-40-69-22-32-40-64-40-69 0-6-4-11-10-11-5 0-10-5-10-10 0-6-15-33-32-60l-33-50-127 0c-74 0-129-4-133-10-3-5-17-10-30-10-25 0-116-45-155-76-87-69-142-151-178-265-15-46-17-1075-2-1084 5-3 10-17 10-30 0-13 5-27 10-30 6-3 10-13 10-22 0-22 83-135 122-168 57-46 62-50 112-75l50-25 585 0 586 0 63 34c84 46 169 133 212 218l35 68 0 565 0 565-28 59c-32 69-100 157-139 180-15 9-33 22-40 29-23 22-99 57-123 57-13 0-27 5-30 10-4 6-60 10-135 10l-128 0-128 205c-84 136-133 205-144 205-10 0-33-24-54-55z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(32.13 * {scale})" viewBox="0 0 2500 2900"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m874 2669c-9-18-26-49-37-68-11-20-30-55-43-78-13-24-36-64-51-90-14-27-38-69-52-95l-26-48-142 0c-84 0-144-4-148-10-3-5-17-10-30-10-25 0-118-46-154-76-91-76-136-142-175-254-13-38-16-119-16-554 0-358 3-520 12-545 40-125 106-219 195-278 127-84 116-83 646-83l467 0 0-42c0-46 11-87 45-163 54-121 169-220 306-264 46-14 232-14 278 0 165 53 284 175 340 350 19 61 14 204-10 273-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-3 6-28 10-56 10l-49 0 0 462c0 446-1 464-21 522-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-4 6-65 10-149 10-138 0-143 1-154 23-12 23-62 114-112 202-16 28-44 79-63 115-42 77-67 88-93 39z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(23.5 * {scale})" height="calc(40 * {scale})" viewBox="34 28 198 308"><path style="stroke:{secondaryColor};stroke-width:15;stroke-linecap:round;" d="M42 327l0 -291"/><path style="fill:{color};stroke:{secondaryColor};stroke-width:10;stroke-linejoin:round;" d="M49 50c70 30 104 28 178 2-21 42-21 74 0 116-72 25-101 25-178 0l0-118z"/><text x="130" y="165" style="font-size:100px;fill:#fff;text-anchor:middle">{text}</text></svg>',"flag-triangle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(35.33 * {scale})" viewBox="0 0 40.5 53"><g transform="translate(-31 -20)"><path fill="{secondaryColor}" d="M34.7,73.3V48.4l34.6-10.1c0.7-0.2,1.2-0.8,1.2-1.5s-0.4-1.4-1-1.7L33.7,20.5c-0.5-0.2-1.1-0.2-1.6,0.2 c-0.5,0.3-0.7,0.8-0.7,1.4v51.2H34.7z"/><polygon points="34.7,24.5 66,36.5 34.7,45 34.7,10" fill="{color}"/></g><text x="11" y="21" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(34 * {scale})" height="calc(34 * {scale})" viewBox="0 0 34 34"><g transform="translate(2 2)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17" y="22" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(38 * {scale})" height="calc(38 * {scale})" viewBox="0 0 38 38"><g transform="translate(4 4)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19" y="24" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(36 * {scale})" height="calc(36 * {scale})" viewBox="0 0 36 36"><g transform="translate(2 2)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="30" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><g transform="translate(4 4)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="32" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',hexagon:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(35 * {scale})" height="calc(40 * {scale})" viewBox="0 0 35 40"><g transform="translate(2 2)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="25" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(39 * {scale})" height="calc(44 * {scale})" viewBox="0 0 39 44"><g transform="translate(4 4)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="27" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1100 1100"><g transform="translate(50 50)"><path style="stroke:{secondaryColor};stroke-width:50;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="550" y="700" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1200 1200"><g transform="translate(100 100)"><path style="stroke:{secondaryColor};stroke-width:100;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="600" y="750" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="12,0 0,24 12,17 24,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="17" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-left":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="24,12 0,0 7,12 0,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="16.5" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(12.16 * {scale})" height="calc(30.1 * {scale})" viewBox="0 0 902 364"><g fill="{color}" transform="matrix(0,2.4,-2.4,0,897,-930)"><polygon points="902,222 233,222 233,364 0,182 233,0 233,141 902,141 902,222"/></g><text x="450" y="700" style="font-size:900px;fill:#000;text-anchor:middle">{text}</text></svg>',"arrow-up-thin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 12 25"><g transform="translate(-136.91823 -751.91998)"><path fill="{color}" d="m148.271 760.71c-1.641-.547-3.186-1.47-4.633-2.769l0 18.07-1.675 0 0-18.07c-1.447 1.299-2.986 2.222-4.616 2.769l0-1.231c2.325-1.596 4.006-3.812 5.043-6.65l.838 0c1.037 2.838 2.718 5.055 5.043 6.65l0 1.231z"/></g><text x="6" y="20" style="font-size:10px;fill:#000;text-anchor:middle">{text}</text></svg>',car:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(21.93 * {scale})" height="calc(40.9 * {scale})" viewBox="0 0 6580 12270"><g transform="translate(0 12270) rotate(-90)"><path fill="{secondaryColor}" d="M7045 6566c-42-13-105-44-105-51 0-2 23-105 50-228 28-123 50-230 50-236 0-8-241-11-907-11-855 0-1145 6-1513 30-85 6-189 13-230 15-41 3-133 10-205 15-286 21-430 32-705 50-953 63-1459 18-2335-205-304-77-746-209-799-238-131-72-221-408-285-1062-34-345-42-532-48-1130-16-1557 108-2532 336-2649 32-17 469-149 676-205 409-110 819-191 1205-238 116-14 224-18 540-18 395 1 494 5 1140 50 1124 79 1224 82 2496 78l641-3-53-237c-29-131-52-238-51-239 1-1 31-14 66-29 56-23 76-26 142-23 67 3 83 7 120 33 23 17 50 41 61 55 10 14 51 117 91 230l73 205 674 3 675 2 90-39c98-43 198-72 315-93 122-21 829-18 990 5 321 45 626 143 849 270 293 168 516 378 704 662 266 402 416 893 467 1527 15 174 8 882-9 998-6 41-18 127-27 190-69 502-253 969-523 1325-79 105-262 284-381 374-189 142-355 229-574 300-336 110-526 139-952 148-457 9-685-23-887-124l-47-24-678-6-678-6-64 179c-79 224-92 253-121 284-67 70-177 97-274 66zm-2752-5073c-23-2-64-2-90 0-26 2-7 3 42 3 50 0 71-1 48-3zm395 0c-21-2-55-2-75 0-21 2-4 4 37 4 41 0 58-2 38-4z"/><path fill="{color}" d="M7043 6498c-13-6-23-19-23-28 0-9 23-117 50-240 28-123 50-230 50-237 0-22-2126-13-2465 10-132 10-400 28-595 42-661 47-824 55-1160 62-435 7-656-8-1040-73-415-70-865-183-1447-365-168-53-272-556-325-1569-16-319-16-1311 0-1630 45-872 129-1366 257-1518 22-26 51-39 172-77 557-177 1122-310 1563-369 271-36 351-40 690-40 361 1 463 6 1165 54 1122 78 1288 83 2337 79 460-2 840-7 843-11 4-4-17-117-47-252l-55-245 39-16c76-30 180-8 224 47 10 13 54 124 98 246l79 222 709 0 709 0 47-24c74-37 219-83 322-101 122-22 606-32 802-16 374 29 658 102 933 238 124 62 271 155 361 230l61 51 6 100c19 278 103 497 247 643 88 89 173 136 278 152l70 11 41 131c116 369 159 673 168 1170 10 584-38 984-167 1397l-40 126-70 12c-193 33-348 175-441 405-56 139-89 302-89 445 0 43-3 47-58 91-290 235-644 384-1068 450-191 29-796 39-974 16-135-18-263-54-368-102l-75-35-701 0-701 0-79 223c-82 232-102 267-163 293-38 16-138 17-170 2zm-2023-820c332-15 1155-12 1835 6 308 8 563 12 566 8 4-4 10-21 13-38 7-30 6-31-92-77-518-244-1197-396-2112-474-295-25-1282-25-1579 0-231 20-473 46-479 51-6 7 49 110 93 171 160 226 416 335 855 365 142 10 539 5 900-12zm3304-263c525-111 899-887 934-1935 19-557-37-1023-172-1435-186-563-521-900-896-899-81 0-158 14-525 92-426 91-431 92-540 146-195 96-287 207-306 368-12 104-11 2985 1 3078 22 170 135 291 365 389 49 21 191 55 480 115 226 47 419 87 430 89 45 10 164 6 229-8zm-5570-485c112-43 197-156 216-291 12-83 13-2623 1-2706-23-158-125-273-270-304-44-9-100-1-542 75-272 47-514 91-539 98-266 68-487 424-594 958-56 280-70 548-40 800 56 484 207 878 414 1081 115 114 122 116 702 218 277 49 524 90 550 90 26 1 72-8 102-19zm2111-3440c1023-44 1884-213 2462-486l113-53-7-33c-3-18-8-35-10-37-2-3-236 1-521 7-993 24-1271 26-1708 11-541-18-1128-18-1249-1-377 56-588 181-734 437-32 55-41 79-32 84 12 8 246 32 491 51 356 28 815 36 1195 20z"/></g><text x="3250" y="8250" style="font-size:3000px;fill:#fff;text-anchor:middle">{text}</text></svg>',checker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 16 16"><pattern id="p" x="0" y="0" width="16" height="16" patternUnits="userSpaceOnUse"><rect fill="{color}" x="0" width="8" height="8" y="0"/><rect fill="{color}" x="8" width="8" height="8" y="8"/></pattern><rect x="0" y="0" width="16" height="16" fill="{secondaryColor}"/><rect x="0" y="0" width="16" height="16" fill="url(#p)"/></svg>',"checker-rotated":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 60 60"><rect width="60" height="60" fill="{secondaryColor}"/><rect width="42.42" height="42.42" transform="translate(30 0) rotate(45)" fill="{color}"/></svg>',"zig-zag":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 120 60 120 90 90 120 60 120 0 120 0 60 60 0 0 0 60 30 90 60 120 120 120"/></svg>',"zig-zag-vertical":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0"/></svg>',"circles-spaced":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="2" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',circles:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(7 * {scale})" height="calc(7 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="6" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',"diagonal-lines-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-lines-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-stripes-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"diagonal-stripes-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(14 * {scale})" height="calc(14 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(45 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}" transform="rotate(-45 3 3)"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-stripes":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"x-fill":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="45.3" height="45.3" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z"/></g></svg>',dots:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(13 * {scale})" height="calc(13 * {scale})" viewBox="0 0 20 20"><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><g fill="{color}"><circle cx="3" cy="3" r="3"/><circle cx="13" cy="13" r="3"/></g></svg>'},At=function(n){var t=document.createElement("span");return t.innerText=n,t.classList.add("tooltiptext"),-1!=navigator.userAgent.indexOf("Edg")?t.classList.add("edge"):-1!=navigator.userAgent.indexOf("Chrome")?t.classList.add("chrome"):-1!=navigator.userAgent.indexOf("Safari")?t.classList.add("safari"):-1!=navigator.userAgent.indexOf("Firefox")&&t.classList.add("firefox"),-1!=navigator.userAgent.indexOf("Windows")?t.classList.add("win"):-1!=navigator.userAgent.indexOf("Macintosh")&&t.classList.add("mac"),t},ut=function(n,t,e){function i(o){var s=t.getBoundingClientRect(),v=n.getBoundingClientRect(),f=s.x+v.width>window.innerWidth?window.innerWidth-v.width:s.x;v=s.y+s.height+v.height+4>window.innerHeight?s.y-v.height-4:s.y+s.height+4,e&&t.parentElement&&(s=t.parentElement?t.parentElement.getBoundingClientRect():null,n.style.position="absolute",f-=s.x,v-=s.y),n.style.transform="translate(".concat(f,"px, ").concat(v,"px)"),n.style.display="block"}void 0===e&&(e=!1),t.addEventListener("mouseover",i),t.addEventListener("focusin",i),t.addEventListener("keydown",function(o){"Escape"!==o.key&&"Esc"!==o.key||"block"!==n.style.display||(o.stopPropagation(),n.style.display="none")})},vn=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jn=(function(n){n.TopLeft="top-left",n.TopRight="top-right",n.BottomLeft="bottom-left",n.BottomRight="bottom-right",n.NonFixed="non-fixed"}(Zo=Zo||{}),function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.position=Zo.NonFixed,e}return vn(t,n),t}(_t)),mr=function(){function n(t){var e;t&&(e=void 0,3<=(e="string"==typeof t?this.getRBGA(t):t).length)&&(this.r=e[0],this.g=e[1],this.b=e[2],3<e.length)&&(this.a=e[3])}return n.prototype.getLuminosity=function(){for(var t=[this.r,this.g,this.b],e=[],i=0;i<t.length;i++){var o=t[i]/255;e[i]=o<=.03928?o/12.92:Math.pow((.055+o)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},n.prototype.getRBGA=function(i){var e=document.createElement("canvas").getContext("2d");return[(e.globalAlpha=1,e.fillStyle=i,e.fillRect(0,0,1,1),i=e.getImageData(0,0,1,1).data)[0],i[1],i[2],i[3]]},n}(),pr=(function(n){n.light="light",n.dark="dark",n.auto="auto"}(Ga=Ga||{}),Map),Ai=function(){function n(){this.listeners=new pr}return n.prototype._addEventListener=function(t,e,i){this.listeners.has(t)||this.listeners.set(t,new pr),this.listeners.get(t).set(e,i)},n.prototype._removeEventListener=function(t,e){this.listeners.has(t)&&this.listeners.get(t).delete(e)},n.prototype._invokeEvent=function(t,e){var i=this;this.listeners.has(t)&&this.listeners.get(t).forEach(function(o,s){o&&i._removeEventListener(t,s);try{s(e)}catch(f){console.error(f)}})},n}(),Ii=Object.freeze({__proto__:null,EventEmitter:Ai}),co=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ko=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e._onStyleChange=function(){e._map.getStyle().style.toLowerCase().startsWith("blank")?e._observer||(e._onBackgroundChange(),e._observer=new MutationObserver(e._onBackgroundChange),e._observer.observe(e._map.getMapContainer(),{attributes:!0,attributeFilter:["style"]})):(e._observer&&(e._observer.disconnect(),delete e._observer),e._map.styles.getThemeAsync(e._map.getStyle()).then(function(i){e._setTheme(i)}))},e._onBackgroundChange=function(){var i=new mr(e._map.getMapContainer().style.backgroundColor).getLuminosity();i=isNaN(i)||.5<i?Ga.light:Ga.dark,e._setTheme(i)},e}return co(t,n),t.prototype.onRemove=function(){this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.events.remove("stylechanged",this._onStyleChange),delete this._map),this._observer&&(this._observer.disconnect(),delete this._observer),delete this._theme},t.prototype.buildContainer=function(e,i,o,s){return this._map=e,this._container=document.createElement(s||"div"),this._container.classList.add("azure-maps-control-container"),"string"==typeof o&&this._container.setAttribute("aria-label",o),i.toLowerCase()===Ga.auto?this._map&&this._map.events.add("stylechanged",this._onStyleChange):this._container.classList.add(i),this._container},t.prototype._setTheme=function(e){this._theme!==e&&(this._container.classList.remove(this._theme),this._container.classList.add(e),this._theme=e)},t.activateClickDelay=100,t}(Ai),jo=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),An=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.rotationDegreesDelta=15,e.style=Ga.light,e.inverted=!1,e}return jo(t,n),t}(_t),is=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ao=function(n){function t(e){var i=n.call(this)||this;return i.hasMouse=!1,i.hasFocus=!1,i.options=(new An).merge(e),i}return is(t,n),t.prototype.onAdd=function(e,i){function o(k){k?(f.classList.add("in-use"),I.setAttribute("aria-hidden","false"),I.classList.remove("hidden-accessible-element")):(f.classList.remove("in-use"),I.setAttribute("aria-hidden","true"),I.classList.add("hidden-accessible-element"))}var s=this,f=this.buildContainer(e,this.options.style,"Rotation Control"),v=this.constructRotationButton(e),I=this.constructRotationGrid(e,i),D=At("Reset to Default Rotation");return f.addEventListener("mouseover",function(k){s.lastActiveTime=s.lastActiveTime||k.timeStamp,s.hasMouse=!0,o(!0)}),f.addEventListener("focusin",function(k){s.lastActiveTime=s.lastActiveTime||k.timeStamp,s.hasFocus=!0,o(!0)}),f.addEventListener("mouseleave",function(){s.hasMouse=!1,s.hasFocus||(delete s.lastActiveTime,o(!1))}),f.addEventListener("focusout",function(k){k.relatedTarget instanceof Node&&f.contains(k.relatedTarget)||(s.hasFocus=!1,s.hasMouse)||(delete s.lastActiveTime,o(!1))}),I.addEventListener("keydown",function(k){"Escape"!==k.key&&"Esc"!==k.key||(k.stopPropagation(),v.focus(),o(!1))}),v.addEventListener("keydown",function(k){"Escape"!==k.key&&"Esc"!==k.key||null==f||!f.classList.contains("in-use")||"none"!==D?.style.display||(k.stopPropagation(),o(!1))}),i&&t.InvertOrderPositions.includes(i.position)?(f.appendChild(I),f.appendChild(v),f.appendChild(D),ut(D,v)):(f.appendChild(v),f.appendChild(D),ut(D,v),f.appendChild(I)),f},t.prototype.constructRotationGrid=function(f,i){var o=document.createElement("div"),s=(o.classList.add("sub-container"),o.classList.add("hidden-accessible-element"),o.setAttribute("aria-hidden","true"),this.constructRightRotationButton(f)),v=(f=this.constructLeftRotationButton(f),At("Rotate Left")),I=At("Rotate Right");return i&&t.InvertOrderPositions.includes(i.position)?(o.appendChild(s),o.appendChild(I),ut(I,s),o.appendChild(f),o.appendChild(v),ut(v,f)):(o.appendChild(f),o.appendChild(v),ut(v,f),o.appendChild(s),o.appendChild(I),ut(I,s)),o},t.prototype.constructRotationButton=function(e){var i=this,o=document.createElement("button"),s=(o.classList.add("azure-maps-control-button"),o.classList.add("rotation"),o.setAttribute("aria-label","Reset to Default Rotation"),o.setAttribute("alt","Reset to Default Rotation"),o.setAttribute("type","button"),document.createElement("div"));return o.appendChild(s),o.addEventListener("click",function(f){f.timeStamp-i.lastActiveTime>ko.activateClickDelay&&e.setCamera({bearing:t.DefaultRotation},!0)}),e.events.add("rotate",function(f){s.style.transform="rotate(".concat(-f.map.getCamera().bearing,"deg)")}),o},t.prototype.constructRightRotationButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("rotation-right"),o.setAttribute("aria-label","Rotate Right"),o.setAttribute("alt","Rotate Right"),o.setAttribute("type","button"),o.addEventListener("click",function(){e.setCamera({bearing:e.getCamera().bearing-(i.options.inverted?-1:1)*i.options.rotationDegreesDelta,duration:t.RotationDuration,type:"ease"},!0)}),o},t.prototype.constructLeftRotationButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("rotation-left"),o.setAttribute("aria-label","Rotate Left"),o.setAttribute("alt","Rotate Left"),o.setAttribute("type","button"),o.addEventListener("click",function(){e.setCamera({bearing:e.getCamera().bearing+(i.options.inverted?-1:1)*i.options.rotationDegreesDelta,duration:t.RotationDuration,type:"ease"},!0)}),o},t.DefaultRotation=0,t.RotationDuration=100,t.InvertOrderPositions=[Zo.BottomRight,Zo.TopRight],t}(ko),Jo=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),la=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.pitchDegreesDelta=10,e.style=Ga.light,e.inverted=!1,e}return Jo(t,n),t}(_t),$s=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wc=function(n){function t(e){var i=n.call(this)||this;return i.container=null,i.map=null,i.pitchButton=null,i.pitchIncrementButton=null,i.pitchDecrementButton=null,i.hasMouse=!1,i.hasFocus=!1,i.pitchChanged=function(o){return i.updatePitchButtonsState()},i.updatePitchButtonsState=function(){var o=i.map.getCamera().pitch<=0,s=60<=i.map.getCamera().pitch;i.hasFocus&&i.pitchButton&&(o||s)&&i.pitchButton.focus(),i.options.inverted?(i.pitchIncrementButton&&i.pitchIncrementButton.disabled!=o&&(i.pitchIncrementButton.disabled=o),i.pitchDecrementButton&&i.pitchDecrementButton.disabled!=s&&(i.pitchDecrementButton.disabled=s)):(i.pitchIncrementButton&&i.pitchIncrementButton.disabled!=s&&(i.pitchIncrementButton.disabled=s),i.pitchDecrementButton&&i.pitchDecrementButton.disabled!=o&&(i.pitchDecrementButton.disabled=o))},i.options=(new la).merge(e),i}return $s(t,n),t.prototype.onAdd=function(e,i){function o(k){k?(f.classList.add("in-use"),I.setAttribute("aria-hidden","false"),I.classList.remove("hidden-accessible-element")):(f.classList.remove("in-use"),I.setAttribute("aria-hidden","true"),I.classList.add("hidden-accessible-element"))}var s=this,f=this.buildContainer(e,this.options.style,"Pitch Control"),v=this.constructPitchButton(e),I=this.constructPitchGrid(e,i),D=At("Reset to Default Pitch");return f.addEventListener("mouseover",function(k){s.lastActiveTime=s.lastActiveTime||k.timeStamp,s.hasMouse=!0,o(!0)}),f.addEventListener("focusin",function(k){s.lastActiveTime=s.lastActiveTime||k.timeStamp,s.hasFocus=!0,o(!0)}),f.addEventListener("mouseleave",function(){s.hasMouse=!1,s.hasFocus||(delete s.lastActiveTime,o(!1))}),f.addEventListener("focusout",function(k){k.relatedTarget instanceof Node&&f.contains(k.relatedTarget)||(s.hasFocus=!1,s.hasMouse)||(delete s.lastActiveTime,o(!1))}),I.addEventListener("keydown",function(k){"Escape"!==k.key&&"Esc"!==k.key||(k.stopPropagation(),v.focus(),o(!1))}),v.addEventListener("keydown",function(k){"Escape"!==k.key&&"Esc"!==k.key||null==f||!f.classList.contains("in-use")||"none"!==D?.style.display||(k.stopPropagation(),o(!1))}),i&&t.INVERT_ORDER_POSITIONS.includes(i.position)?(f.appendChild(I),f.appendChild(v),f.appendChild(D),ut(D,f)):(f.appendChild(v),f.appendChild(D),ut(D,f),f.appendChild(I)),this.map=e,this.container=f,this.pitchButton=v,e.events.add("pitch",this.pitchChanged),this.updatePitchButtonsState(),f},t.prototype.onRemove=function(){this.container&&(this.container.remove(),this.container=null,this.pitchButton=null,this.pitchIncrementButton=null,this.pitchDecrementButton=null),this.map&&(this.map.events.remove("pitch",this.pitchChanged),this.map=null)},t.prototype.constructPitchGrid=function(s,i){var o=document.createElement("div"),f=(o.classList.add("sub-container"),o.classList.add("hidden-accessible-element"),o.setAttribute("aria-hidden","true"),this.pitchIncrementButton=this.constructPitchIncrementButton(s),this.pitchDecrementButton=this.constructPitchDecrementButton(s),s=At("Increase Pitch"),At("Decrease Pitch"));return i&&t.INVERT_ORDER_POSITIONS.includes(i.position)?(o.appendChild(this.pitchDecrementButton),o.appendChild(f),ut(f,this.pitchDecrementButton),o.appendChild(this.pitchIncrementButton),o.appendChild(s),ut(s,this.pitchIncrementButton)):(o.appendChild(this.pitchIncrementButton),o.appendChild(s),ut(s,this.pitchIncrementButton),o.appendChild(this.pitchDecrementButton),o.appendChild(f),ut(f,this.pitchDecrementButton)),o},t.prototype.constructPitchButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("pitch"),o.setAttribute("aria-label","Reset to Default Pitch"),o.setAttribute("alt","Reset to Default Pitch"),o.setAttribute("type","button"),o.addEventListener("click",function(){event.timeStamp-i.lastActiveTime>ko.activateClickDelay&&e.setCamera({pitch:t.DEFAULT_PITCH},!0)}),o},t.prototype.constructPitchDecrementButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("pitch-down"),o.setAttribute("aria-label","Decrease Pitch"),o.setAttribute("alt","Decrease Pitch"),o.setAttribute("type","button"),o.addEventListener("click",function(){e.setCamera({pitch:e.getCamera().pitch-(i.options.inverted?-1:1)*i.options.pitchDegreesDelta,duration:t.PITCH_DURATION_MS,type:"ease"},!0)}),o},t.prototype.constructPitchIncrementButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("pitch-up"),o.setAttribute("aria-label","Increase Pitch"),o.setAttribute("alt","Increase Pitch"),o.setAttribute("type","button"),o.addEventListener("click",function(){e.setCamera({pitch:e.getCamera().pitch+(i.options.inverted?-1:1)*i.options.pitchDegreesDelta,duration:t.PITCH_DURATION_MS,type:"ease"},!0)}),o},t.PITCH_DURATION_MS=100,t.DEFAULT_PITCH=0,t.INVERT_ORDER_POSITIONS=[Zo.BottomRight,Zo.TopRight],t}(ko),oi=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ma=function(n){function t(e){var i=n.call(this)||this;return i.map=null,i.control=new M.ScaleControl({maxWidth:e?.maxWidth,unit:e?.unit}),i}return oi(t,n),t.prototype.onAdd=function(e,i){this.map=e,null!=(o=null==(o=this.map)?void 0:o._getMap())&&o.addControl(this.control);var o=this.buildContainer(e,Ga.auto,"Scale Bar");return o.appendChild(null==(e=this.control)?void 0:e._container),o},t.prototype.onRemove=function(){var e;n.prototype.onRemove.call(this),null!=(e=null==(e=this.map)?void 0:e._getMap())&&e.removeControl(this.control),this.map=null},t.prototype.setUnit=function(e){var i;null!=(i=this.control)&&i.setUnit(e)},t}(ko),ka=function os(n,t){return n===t||n!=n&&t!=t},mc=ka,tu=function Co(n,t){for(var e=n.length;e--;)if(mc(n[e][0],t))return e;return-1},Lu=tu,Ks=Array.prototype.splice,La=tu,Ld=tu,Zu=tu;function Go(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Go.prototype.clear=function Wc(){this.__data__=[],this.size=0},Go.prototype.delete=function Dd(e){var t=this.__data__;return!((e=Lu(t,e))<0||(e==t.length-1?t.pop():Ks.call(t,e,1),--this.size,0))},Go.prototype.get=function _c(e){var t=this.__data__;return(e=La(t,e))<0?void 0:t[e][1]},Go.prototype.has=function Fu(n){return-1<Ld(this.__data__,n)},Go.prototype.set=function Uu(n,t){var e=this.__data__,i=Zu(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this};var pd=Go,fp=pd,Tc="object"==typeof z&&z&&z.Object===Object&&z,$l="object"==typeof self&&self&&self.Object===Object&&self,Ol=Tc||$l||Function("return this")(),Vl=Ol.Symbol,vu=Object.prototype,rc=vu.hasOwnProperty,Gl=vu.toString,kl=Vl?Vl.toStringTag:void 0,oc=Object.prototype.toString,md=function Fd(n){var t=rc.call(n,kl),e=n[kl];try{var i=!(n[kl]=void 0)}catch{}var o=Gl.call(n);return i&&(t?n[kl]=e:delete n[kl]),o},rr=function Pl(n){return oc.call(n)},_r=Vl?Vl.toStringTag:void 0,or=function xi(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":(_r&&_r in Object(n)?md:rr)(n)},ma=function qo(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)},_d=or,yd=ma,gp=function qm(n){return!!yd(n)&&("[object Function]"==(n=_d(n))||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)},jh=Ol["__core-js_shared__"],ql=function(){var n=/[^.]+$/.exec(jh&&jh.keys&&jh.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Jp=Function.prototype.toString,bh=function ug(n){if(null!=n){try{return Jp.call(n)}catch{}try{return n+""}catch{}}return""},as=gp,Eh=function To(n){return!!ql&&ql in n},nu=ma,ef=bh,Hd=/^\[object .+?Constructor\]$/,Mf=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nh=function It(n,t){return n=function Cd(n,t){return n?.[t]}(n,t),function Zg(n){return!(!nu(n)||Eh(n))&&(as(n)?Mf:Hd).test(ef(n))}(n)?n:void 0},Wr=nh(Ol,"Map"),$c=nh(Object,"create"),pl=$c,go=$c,em=Object.prototype.hasOwnProperty,Sh=$c,_a=Object.prototype.hasOwnProperty,Zc=$c,fg=function Gh(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},ie=function yp(n){var t,e=this.__data__;return go?"__lodash_hash_undefined__"===(t=e[n])?void 0:t:em.call(e,n)?e[n]:void 0};function Te(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Te.prototype.clear=function hg(){this.__data__=pl?pl(null):{},this.size=0},Te.prototype.delete=fg,Te.prototype.get=ie,Te.prototype.has=function nm(n){var t=this.__data__;return Sh?void 0!==t[n]:_a.call(t,n)},Te.prototype.set=function sy(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Zc&&void 0===t?"__lodash_hash_undefined__":t,this};var gn=Te,qn=pd,zr=Wr;function qa(n,t){return n=n.__data__,function Xa(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}(t)?n["string"==typeof t?"string":"hash"]:n.map}var Bu=qa,Sd=qa,td=qa,rm=qa;function De(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}De.prototype.clear=function Fs(){this.size=0,this.__data__={hash:new gn,map:new(zr||qn),string:new gn}},De.prototype.delete=function ru(n){return n=Bu(this,n).delete(n),this.size-=n?1:0,n},De.prototype.get=function Iu(n){return Sd(this,n).get(n)},De.prototype.has=function wh(n){return td(this,n).has(n)},De.prototype.set=function st(n,t){var e=rm(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this};var at=De,nt=pd,ht=Wr,Xt=at,Nt=pd,Lr=function bs(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Ir=function _u(n){return this.__data__.get(n)},Qr=function Qc(n){return this.__data__.has(n)};function yr(n){n=this.__data__=new Nt(n),this.size=n.size}yr.prototype.clear=function Zd(){this.__data__=new fp,this.size=0},yr.prototype.delete=Lr,yr.prototype.get=Ir,yr.prototype.has=Qr,yr.prototype.set=function En(n,t){var e=this.__data__;if(e instanceof nt){var i=e.__data__;if(!ht||i.length<199)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new Xt(i)}return e.set(n,t),this.size=e.size,this};var di=yr,qr=nh,Fa=function(){try{var n=qr(Object,"defineProperty");return n({},"",{}),n}catch{}}(),ss=Fa,ds=ss,Vc=function Ss(n,t,e){"__proto__"==t&&ds?ds(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e},Gc=Vc,qc=ka,Ws=Object.prototype.hasOwnProperty,jd=function Ah(n,t,e){var i=n[t];Ws.call(n,t)&&qc(i,e)&&(void 0!==e||t in n)||Gc(n,t,e)},Ih=jd,ih=Vc,Kl=function of(n,t,e,i){for(var o=!e,s=(e=e||{},-1),f=t.length;++s<f;){var v=t[s],I=i?i(e[v],n[v],v,e,n):void 0;void 0===I&&(I=n[v]),(o?ih:Ih)(e,v,I)}return e},Vd=function Ym(n){return null!=n&&"object"==typeof n},im=or,Wm=Vd,mg=function vp(n){return Wm(n)&&"[object Arguments]"==im(n)},om=Vd,da=Object.prototype,Cu=da.hasOwnProperty,el=da.propertyIsEnumerable,q=mg(function(){return arguments}())?mg:function(n){return om(n)&&Cu.call(n,"callee")&&!el.call(n,"callee")},ue=q,le=Array.isArray,we={exports:{}},pt=function Ke(){return!1},an=(function(n,i){var e;n.exports=(i=(e=(e=(i=i&&!i.nodeType&&i)&&n&&!n.nodeType&&n)&&e.exports===i?Ol.Buffer:void 0)?e.isBuffer:void 0)||pt}(we,we.exports),we.exports),lr=/^(?:0|[1-9]\d*)$/,Oo=function ro(n,t){var e=typeof n;return!!(t=t??9007199254740991)&&("number"==e||"symbol"!=e&&lr.test(n))&&-1<n&&n%1==0&&n<t},Mu=function Kc(n){return"number"==typeof n&&-1<n&&n%1==0&&n<=9007199254740991},qh=or,Mh=Mu,Of=Vd,Ea={};Ea["[object Float32Array]"]=Ea["[object Float64Array]"]=Ea["[object Int8Array]"]=Ea["[object Int16Array]"]=Ea["[object Int32Array]"]=Ea["[object Uint8Array]"]=Ea["[object Uint8ClampedArray]"]=Ea["[object Uint16Array]"]=Ea["[object Uint32Array]"]=!0,Ea["[object Arguments]"]=Ea["[object Array]"]=Ea["[object ArrayBuffer]"]=Ea["[object Boolean]"]=Ea["[object DataView]"]=Ea["[object Date]"]=Ea["[object Error]"]=Ea["[object Function]"]=Ea["[object Map]"]=Ea["[object Number]"]=Ea["[object Object]"]=Ea["[object RegExp]"]=Ea["[object Set]"]=Ea["[object String]"]=Ea["[object WeakMap]"]=!1;var hE=function Zm(n){return function(t){return n(t)}},dy={exports:{}},hy=(function(n,o){var e=(o=o&&!o.nodeType&&o)&&n&&!n.nodeType&&n,i=e&&e.exports===o&&Tc.process;o=function(){try{return e&&e.require&&e.require("util").types||i&&i.binding&&i.binding("util")}catch{}}(),n.exports=o}(dy,dy.exports),dy.exports),pE=function G1(n){return Of(n)&&Mh(n.length)&&!!Ea[qh(n)]},am=hy&&hy.isTypedArray,Ic=am?hE(am):pE,Kr=function $d(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i},Ao=ue,Ou=le,Oh=an,Us=Oo,qd=Ic,Nc=Object.prototype.hasOwnProperty,Pu=function bu(n,t){var e,i=Ou(n),o=!i&&Ao(n),s=!i&&!o&&Oh(n),f=!i&&!o&&!s&&qd(n),v=i||o||s||f,I=v?Kr(n.length,String):[],D=I.length;for(e in n)!t&&!Nc.call(n,e)||v&&("length"==e||s&&("offset"==e||"parent"==e)||f&&("buffer"==e||"byteLength"==e||"byteOffset"==e)||Us(e,D))||I.push(e);return I},ea=Object.prototype,Fv=function py(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||ea)},Uo=function e_(n,t){return function(e){return n(t(e))}},vg=Uo(Object.keys,Object),sm=Fv,nA=vg,lm=Object.prototype.hasOwnProperty,fy=gp,Hv=Mu,t_=function Rf(n){return null!=n&&Hv(n.length)&&!fy(n)},Cg=Pu,Mc=function bp(n){if(!sm(n))return nA(n);var t,e=[];for(t in Object(n))lm.call(n,t)&&"constructor"!=t&&e.push(t);return e},um=t_,nd=function tl(n){return(um(n)?Cg:Mc)(n)},K1=Kl,bg=nd,i2=ma,gy=Fv,W1=Object.prototype.hasOwnProperty,a2=Pu,_E=function Q1(n){if(!i2(n))return function Uv(n){var t=[];if(null!=n)for(var e in Object(n))t.push(e);return t}(n);var t,e=gy(n),i=[];for(t in n)("constructor"!=t||!e&&W1.call(n,t))&&i.push(t);return i},s2=t_,Bv=function c2(n){return s2(n)?a2(n,!0):_E(n)},rA=Kl,l2=Bv,X1={exports:{}},yE=(function(n,e){var i,o=(i=(i=(e=e&&!e.nodeType&&e)&&n&&!n.nodeType&&n)&&i.exports===e?Ol.Buffer:void 0)?i.allocUnsafe:void 0;n.exports=function(s,f){return f?s.slice():(f=s.length,f=o?o(f):new s.constructor(f),s.copy(f),f)}}(X1,X1.exports),X1.exports),vE=function oA(n,t){var e=-1,i=n.length;for(t=t||Array(i);++e<i;)t[e]=n[e];return t},zv=function aA(){return[]},my=Object.prototype.propertyIsEnumerable,sA=Object.getOwnPropertySymbols,bE=sA?function(n){return null==n?[]:(n=Object(n),function c3(n,t){for(var e=-1,i=null==n?0:n.length,o=0,s=[];++e<i;){var f=n[e];t(f,e,n)&&(s[o++]=f)}return s}(sA(n),function(t){return my.call(n,t)}))}:zv,eC=bE,u2=Kl,EE=eC,SE=function cA(n,t){for(var e=-1,i=t.length,o=n.length;++e<i;)n[o+e]=t[e];return n},Sp=Uo(Object.getPrototypeOf,Object),wd=SE,lA=Sp,n_=eC,tC=Object.getOwnPropertySymbols?function(n){for(var t=[];n;)wd(t,n_(n)),n=lA(n);return t}:zv,h2=Kl,Tp=tC,dA=SE,_y=le;function nC(n,t,e){return t=t(n),_y(n)?t:dA(t,e(n))}var rC=nC,AE=eC,Nf=nd,$v=function aa(n){return rC(n,Nf,AE)},IE=nC,hA=tC,l3=Bv,o_=nh(Ol,"DataView"),yy=Wr,aC=nh(Ol,"Promise"),Gv=nh(Ol,"Set"),pA=nh(Ol,"WeakMap"),PE=or,a_=bh,sC="[object Map]",kf="[object Promise]",RE="[object Set]",Hl="[object WeakMap]",Lf="[object DataView]",ve=a_(o_),p=a_(yy),_=a_(aC),A=a_(Gv),Q=a_(pA),de=PE,be=de=o_&&de(new o_(new ArrayBuffer(1)))!=Lf||yy&&de(new yy)!=sC||aC&&de(aC.resolve())!=kf||Gv&&de(new Gv)!=RE||pA&&de(new pA)!=Hl?function(e){var t=PE(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?a_(e):"")switch(e){case ve:return Lf;case p:return sC;case _:return kf;case A:return RE;case Q:return Hl}return t}:de,wt=Object.prototype.hasOwnProperty,yo=Ol.Uint8Array,Za=yo,zu=function Ja(n){var t=new n.constructor(n.byteLength);return new Za(t).set(new Za(n)),t},Dc=zu,vy=/\w*$/,y2=Vl?Vl.prototype:void 0,v2=y2?y2.valueOf:void 0,f7=zu,NE=function fA(n,t){return t=t?f7(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.length)},gA=zu,C2=function Yh(n,t){return t=t?Dc(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength)},d3=function qv(n){var t=new n.constructor(n.source,vy.exec(n));return t.lastIndex=n.lastIndex,t},g7=NE,g3=ma,m3=Object.create,dm=function(){function n(){}return function(t){return g3(t)?m3?m3(t):(n.prototype=t,t=new n,n.prototype=void 0,t):{}}}(),yA=dm,w2=Sp,_3=Fv,CA=function vA(n){return"function"!=typeof n.constructor||_3(n)?{}:yA(w2(n))},E7=be,y3=Vd,b3=hy&&hy.isMap,S3=b3?hE(b3):function C3(n){return y3(n)&&"[object Map]"==E7(n)},uC=be,dC=Vd,FE=hy&&hy.isSet,w3=FE?hE(FE):function T7(n){return dC(n)&&"[object Set]"==uC(n)},A2=di,EA=function Mi(n,t){for(var e=-1,i=null==n?0:n.length;++e<i&&!1!==t(n[e],e,n););return n},T3=jd,P7=function Kh(n,t){return n&&K1(t,bg(t),n)},R7=function $i(n,t){return n&&rA(t,l2(t),n)},x7=yE,A3=vE,N7=function d2(n,t){return u2(n,EE(n),t)},I3=function TE(n,t){return h2(n,Tp(n),t)},D7=$v,k7=function p2(n){return IE(n,l3,hA)},L7=be,I2=function Dt(n){var t=n.length,e=new n.constructor(t);return t&&"string"==typeof n[0]&&wt.call(n,"index")&&(e.index=n.index,e.input=n.input),e},M3=function Pj(n,t,e){var i=n.constructor;switch(t){case"[object ArrayBuffer]":return gA(n);case"[object Boolean]":case"[object Date]":return new i(+n);case"[object DataView]":return C2(n,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return g7(n,e);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(n);case"[object RegExp]":return d3(n);case"[object Symbol]":return function xE(n){return v2?Object(v2.call(n)):{}}(n)}},ah=CA,F7=le,O3=an,xj=S3,P3=ma,Nj=w3,M2=nd,R3=Bv,c_="[object Arguments]",O2="[object Function]",HE="[object Object]",fl={};fl[c_]=fl["[object Array]"]=fl["[object ArrayBuffer]"]=fl["[object DataView]"]=fl["[object Boolean]"]=fl["[object Date]"]=fl["[object Float32Array]"]=fl["[object Float64Array]"]=fl["[object Int8Array]"]=fl["[object Int16Array]"]=fl["[object Int32Array]"]=fl["[object Map]"]=fl["[object Number]"]=fl[HE]=fl["[object RegExp]"]=fl["[object Set]"]=fl["[object String]"]=fl["[object Symbol]"]=fl["[object Uint8Array]"]=fl["[object Uint8ClampedArray]"]=fl["[object Uint16Array]"]=fl["[object Uint32Array]"]=!0,fl["[object Error]"]=fl[O2]=fl["[object WeakMap]"]=!1;var F3=function TA(n,t,e,i,o,s){var f,v=1&t,I=2&t,D=4&t;if(void 0===(f=e?o?e(n,i,o,s):e(n):f)){if(!P3(n))return n;if(i=F7(n)){if(f=I2(n),!v)return A3(n,f)}else{var k=L7(n),X=k==O2||"[object GeneratorFunction]"==k;if(O3(n))return x7(n,v);if(k==HE||k==c_||X&&!o){if(f=I||X?{}:ah(n),!v)return I?I3(n,R7(f,n)):N7(n,P7(f,n))}else{if(!fl[k])return o?n:{};f=M3(n,k,v)}}if(X=(s=s||new A2).get(n))return X;s.set(n,f),Nj(n)?n.forEach(function(Se){f.add(TA(Se,t,e,Se,n,s))}):xj(n)&&n.forEach(function(Se,Ve){f.set(Ve,TA(Se,t,e,Ve,n,s))});var fe=i?void 0:(D?I?k7:D7:I?R3:M2)(n);EA(fe||n,function(Se,Ve){fe&&(Se=n[Ve=Se]),T3(f,Ve,TA(Se,t,e,Ve,n,s))})}return f},H3=F3,Yl=T(function X7(n){return H3(n,5)}),U3=Vc,Z7=ka,pC=function AA(n,t,e){(void 0===e||Z7(n[t],e))&&(void 0!==e||t in n)||U3(n,t,e)},BE=function J7(n){return function(t,e,i){for(var o=-1,s=Object(t),f=i(t),v=f.length;v--;){var I=f[n?v:++o];if(!1===e(s[I],I,s))break}return t}}(),zE=BE,z3=t_,N2=Vd,r9=or,j3=Sp,D2=Vd,L2=Function.prototype.toString,IA=Object.prototype.hasOwnProperty,kj=L2.call(Object),sh=function Lj(n){return!(!D2(n)||"[object Object]"!=r9(n))&&(null===(n=j3(n))||"function"==typeof(n=IA.call(n,"constructor")&&n.constructor)&&n instanceof n&&L2.call(n)==kj)};function Yv(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var V3=Kl,o9=Bv,q3=pC,a9=yE,K3=NE,s9=vE,c9=CA,Y3=ue,W3=le,Q3=function t9(n){return N2(n)&&z3(n)},X3=an,Z3=gp,MA=ma,J3=sh,eL=Ic,F2=Yv,d9=di,h9=pC,H2=zE,Hj=function l9(n,t,e,i,o,s,f){var v,I,D,k=F2(n,e),X=F2(t,e),fe=f.get(X);fe||((t=void 0===(fe=s?s(k,X,e+"",n,t,f):void 0))&&(I=!(v=W3(X))&&X3(X),D=!v&&!I&&eL(X),fe=X,v||I||D?fe=W3(k)?k:Q3(k)?s9(k):I?a9(X,!(t=!1)):D?K3(X,!(t=!1)):[]:J3(X)||Y3(X)?Y3(fe=k)?fe=function G3(n){return V3(n,o9(n))}(k):MA(k)&&!Z3(k)||(fe=c9(X)):t=!1),t&&(f.set(X,fe),o(fe,X,i,s,f),f.delete(X))),q3(n,e,fe)},nL=ma,p9=Bv,f9=Yv,OA=function rL(n){return n},iL=Math.max,v9=function y9(n){return function(){return n}},U2=ss,b9=U2?function(n,t){return U2(n,"toString",{configurable:!0,enumerable:!1,value:v9(t),writable:!0})}:OA,B2=Date.now,VE=function z2(n){var t=0,e=0;return function(){var i=B2(),o=16-(i-e);if(e=i,0<o){if(++t>=800)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}(b9),fC=OA,V2=function oL(n,t,e){return t=iL(void 0===t?n.length-1:t,0),function(){for(var i=arguments,o=-1,s=iL(i.length-t,0),f=Array(s);++o<s;)f[o]=i[t+o];o=-1;for(var v=Array(t+1);++o<t;)v[o]=i[o];return v[t]=e(f),function _9(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}(n,this,v)}},xA=VE,Bj=ka,G2=t_,qE=Oo,cL=ma,T9=function g9(n,t,e,i,o){n!==t&&H2(t,function(s,f){var v;o=o||new d9,nL(s)?Hj(n,t,f,e,g9,i,o):(v=i?i(f9(n,f),s,f+"",n,t,o):void 0,h9(n,f,v=void 0===v?s:v))},p9)},dL=function uL(n){return function GE(n,t){return xA(V2(n,t,fC),n+"")}(function(t,e){var i=-1,o=e.length,f=1<o?e[o-1]:void 0,s=2<o?e[2]:void 0;for(f=3<n.length&&"function"==typeof f?(o--,f):void 0,s&&function lL(n,t,e){var i;return!!cL(e)&&!!("number"==(i=typeof t)?G2(e)&&qE(t,e.length):"string"==i&&t in e)&&Bj(e[t],n)}(e[0],e[1],s)&&(f=o<3?void 0:f,o=1),t=Object(t);++i<o;){var v=e[i];v&&n(t,v,i,f)}return t})}(function(n,t,e){T9(n,t,e)}),K2=T(dL),$j=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vj=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.layout="icons",e.mapStyles=["road","grayscale_light","grayscale_dark","night","road_shaded_relief"],e.style=Ga.light,e.autoSelectionMode=!0,e}return $j(t,n),t}(_t),KE=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),A9=window&&window.__awaiter||function(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})},DA=window&&window.__generator||function(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s=f&&k[f=0]?0:s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},YE=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},pL=function(n){function t(e){var i=n.call(this)||this;return i.styleOpsGrid=null,i.hasMouse=!1,i.hasFocus=!1,i.styleButtons=new pr,i.styleIcons=new pr,i.thumbnailCache={assumedConfiguration:void 0,response:new pr,blob:new pr},i.onStyleChange=function(){var o;i.options.autoSelectionMode&&(o=i.map.getStyle().style,i.setSelectedStyle(o))},i.onMapConfigurationChange=function(o){!i.styleOpsGrid||0<i.styleOpsGrid.children.length&&i.thumbnailCache.assumedConfiguration===o||(i.thumbnailCache.assumedConfiguration=o,Array.from(i.styleOpsGrid.children).forEach(function(s){return s.remove()}),i.styleButtons.clear(),i.populateOpsGridFromDefinitions(o))},i.mapToFriendlyStyleName=function(o,s){return s=s.configurations.find(function(f){return f.name===o}),s?.displayName||o},i.options=(new Vj).merge(Yl(e)),i}return KE(t,n),t.prototype.onAdd=function(D,i){function o(k){k?(f.classList.add(t.Css.inUse),v.setAttribute("aria-hidden","false"),v.classList.remove("hidden-accessible-element")):(f.classList.remove(t.Css.inUse),v.setAttribute("aria-hidden","true"),v.classList.add("hidden-accessible-element"))}var s=this,f=(this.map=D,this.buildContainer(D,this.options.style,"Map Style Control")),v=this.buildStyleOpsGrid(),I=(this.styleOpsGrid=v,this.buildCurrStyleBtn());return D=At("Select Style"),v.classList.add(i&&i.position||"top-right"),f.addEventListener("mouseover",function(){s.hasMouse=!0,o(!0)}),f.addEventListener("focusin",function(){s.hasFocus=!0,o(!0)}),f.addEventListener("mouseleave",function(){s.hasMouse=!1,s.hasFocus||o(!1)}),f.addEventListener("focusout",function(k){k.target===I&&Array.from(v.children).forEach(function(X){return X.removeAttribute("tabIndex")}),k.relatedTarget instanceof Node&&f.contains(k.relatedTarget)||(s.hasFocus=!1,s.hasMouse)||o(!1)}),v.addEventListener("keydown",function(k){27===k.keyCode&&(k.stopPropagation(),I.focus(),Array.from(v.children).forEach(function(X){return X.setAttribute("tabIndex","-1")}),f.classList.contains(t.Css.inUse))&&o(!1)}),I.addEventListener("click",function(k){f.classList.contains(t.Css.inUse)?o(!1):(o(!0),v.firstElementChild&&v.firstElementChild.focus())}),i&&t.InvertOrderPositions.includes(i.position)?(f.appendChild(v),f.appendChild(I),f.appendChild(D),ut(D,I)):(f.appendChild(I),f.appendChild(D),ut(D,I),f.appendChild(v)),f},t.prototype.onRemove=function(){n.prototype.onRemove.call(this),this.styleOpsGrid=null,this.styleButtons.clear(),this.thumbnailCache.response.clear(),this.thumbnailCache.blob.clear(),this.thumbnailCache.assumedConfiguration=void 0,this.map.events.remove("stylechanged",this.onStyleChange),this.map.events.remove("mapconfigurationchanged",this.onMapConfigurationChange)},t.prototype.setSelectedStyle=function(e){var i,o,s=this;this.styleIcons.has(e)&&(i=this.currStyleImage,o=this.styleIcons.get(e),i.src!==o&&(i.src=o),Object.entries(this.styleButtons).forEach(function(v){return(v=YE(v,2))[1].setAttribute("aria-current",v[0]===e?"true":"false")}),this.map.styles.definitions().then(function(f){f=s.mapToFriendlyStyleName(e,f),i.alt!==f&&(i.alt=f),i.parentElement.lastChild instanceof Text&&(i.parentElement.lastChild.textContent=f)}))},t.prototype.disableStyle=function(e){(e=this.styleButtons[e])&&e.setAttribute("disabled","true")},t.prototype.enableStyle=function(e){(e=this.styleButtons[e])&&e.removeAttribute("disabled")},t.prototype.buildSelectStyleBtn=function(e,D,o){var s=this,f=document.createElement("button"),v=this.mapToFriendlyStyleName(e,D),I=(f.setAttribute("aria-label",v),f.setAttribute("type","button"),new Image);return(o.then(function(k){var X;return s.thumbnailCache.blob.has(k.url)?s.thumbnailCache.blob.get(k.url):(X=k.clone().blob(),s.thumbnailCache.blob.set(k.url,X),X)}).then(function(k){k=URL.createObjectURL(k),I.src=k,e===s.map.getStyle().style&&(s.currStyleImage.src=k,s.currStyleImage.alt=v,s.currStyleImage.parentElement.lastChild.nodeType==Node.TEXT_NODE?s.currStyleImage.parentElement.lastChild.textContent=v:s.currStyleImage.parentElement.appendChild(document.createTextNode(v))),s.styleIcons.set(e,k)}),I.setAttribute("aria-hidden","true"),f.appendChild(I),"icons"===this.options.layout?f.classList.add(t.Css.button):(f.classList.add(t.Css.listButton),f.classList.add(t.Css.expanded),f.appendChild(document.createTextNode(v))),f.addEventListener("click",function(){s.hasMouse=!1,s.hasFocus=!1;var k=s.styleButtons[e];k&&!k.hasAttribute("disabled")&&(s._invokeEvent("styleselected",e),s.options.autoSelectionMode&&s.map.setStyle({style:e}),Object.entries(s.styleButtons).forEach(function(fe){return(fe=YE(fe,2))[1].setAttribute("aria-current",fe[0]===e?"true":"false")}))}),D=document.createElement("div")).classList.add("selected-icon"),f.appendChild(D),f},t.prototype.buildCurrStyleBtn=function(){var e=document.createElement("button"),i=(e.classList.add("icons"==this.options.layout?t.Css.button:t.Css.listButton),e.classList.add(t.Css.currentStyle),e.setAttribute("aria-label","Select Style"),e.setAttribute("tabindex","-1"),this.currStyleImage=new Image,e.appendChild(this.currStyleImage),document.createElement("div"));return i.classList.add("icon"),e.appendChild(i),e},t.prototype.buildStyleOpsGrid=function(){var e=this,i=document.createElement("div");return i.classList.add(t.Css.styleOptions),i.classList.add("icons"===this.options.layout?this.options.layout:t.Css.dropdown),i.setAttribute("aria-label","Style Options"),i.classList.add("hidden-accessible-element"),i.setAttribute("aria-hidden","true"),this.map.styles.definitions().then(function(o){return A9(e,void 0,void 0,function(){return DA(this,function(s){return this.onMapConfigurationChange(o),this.map.events.add("stylechanged",this.onStyleChange),[2]})})}),this.map.events.add("mapconfigurationchanged",this.onMapConfigurationChange),i},t.prototype.populateOpsGridFromDefinitions=function(e){var i,o,s=this;this.styleOpsGrid&&(i=e.configurations,(i=Array.isArray(this.options.mapStyles)?i.filter(function(f){return s.options.mapStyles.includes(f.name.split("_indoor")[0])}):i).forEach(function(f){var v,I={url:f.thumbnail},D=((f.thumbnail&&s.map.styles._transformStyleRequest(f.thumbnail,I),D=s.map.getServiceOptions()).transformRequest&&K2(I,D.transformRequest(I.url,"Thumbnail")),s.thumbnailCache.response.has(I.url)?v=Promise.resolve(s.thumbnailCache.response.get(I.url)):(v=fetch(I.url,{headers:I.headers}),s.thumbnailCache.response.set(I.url,v)),s.buildSelectStyleBtn(f.name,e,v));s.styleOpsGrid.appendChild(D),s.styleButtons[f.name]=D,"icons"===s.options.layout&&(I=At(s.mapToFriendlyStyleName(f.name,e)),s.styleOpsGrid.appendChild(I),ut(I,D))}),o=this.map.getStyle().style,Object.entries(this.styleButtons).forEach(function(v){return(v=YE(v,2))[1].setAttribute("aria-current",v[0]===o?"true":"false")}))},t.InvertOrderPositions=[Zo.TopRight,Zo.BottomRight],t.Css={button:"azure-maps-control-button",listButton:"azure-maps-control-list-button",expanded:"expanded",currentStyle:"curr-style",inUse:"in-use",styleOptions:"style-options",dropdown:"azure-maps-control-dropdown"},t}(ko),I9=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),WE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.flow="none",e.incidents=!1,e}return I9(t,n),t}(_t),Y2=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.isActive=!1,e.style=Ga.light,e}return Y2(t,n),t}(WE),Qv=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),W2=function(n){function t(e){var i,o=this;return(o=n.call(this)||this).hasMouse=!1,o.hasFocus=!1,o.options=(new WE).merge({flow:"relative",incidents:!0}),o.style=Ga.light,o.container=null,o.trafficButton=null,o.map=null,e&&(o.initIsActive=null!=(i=e.isActive)&&i,o.options.flow=e.flow||"relative",o.options.incidents=null==(i=e.incidents)||i,o.style=e.style||Ga.light),o}return Qv(t,n),Object.defineProperty(t.prototype,"isActive",{get:function(){var e;return!!this.map&&("none"!==(e=this.map.getTraffic()).flow||e.incidents)},set:function(e){this.map&&this.map.setTraffic({flow:e?this.options.flow:"none",incidents:!!e&&this.options.incidents})},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(i){(this.map=i).getTraffic(),void 0!==this.initIsActive&&(this.isActive=this.initIsActive),this.container=this.buildContainer(i,this.style,"Traffic Control"),this.container.style.flexDirection="column",i=this.constructTrafficButton(i);var o=(this.container.appendChild(i),At("Toggle Traffic Display"));return this.container.appendChild(o),ut(o,i),this.container},t.prototype.onRemove=function(){n.prototype.onRemove.call(this),this.map=null},t.prototype.getOptions=function(){return(new fL).merge({isActive:this.isActive,flow:this.options.flow,incidents:this.options.incidents,style:this.style})},t.prototype.updateButtonState=function(){this.trafficButton&&(this.isActive?(this.container.classList.add("in-use"),this.trafficButton.setAttribute("aria-description","Traffic is displayed")):(this.container.classList.remove("in-use"),this.trafficButton.removeAttribute("aria-description")),this.trafficButton.setAttribute("aria-pressed",this.isActive?"true":"false"))},t.prototype.constructTrafficButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("traffic"),o.setAttribute("aria-label","Toggle Traffic Display"),o.setAttribute("alt","Toggle Traffic Display"),o.setAttribute("type","button"),this.trafficButton=o,this.updateButtonState(),o.addEventListener("click",function(){i.isActive=!i.isActive}),o},t}(ko),QE=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Q2=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gL=function(n){function t(){var e=n.call(this)||this;return e.table=["Fast",["green","yellow","red","dark-red"],"Slow"],e.map=null,e.syncHiddenState=null,e}return QE(t,n),t.prototype.onAdd=function(o){this.map=o;var i=this.buildContainer(o,Ga.auto,"Traffic Legend");return o=this.buildTrafficLegendDiv(o),i.setAttribute("role","definition"),i.appendChild(o),i},t.prototype.onRemove=function(){n.prototype.onRemove.call(this),this.syncHiddenState&&(this.map.events.remove("styledata",this.syncHiddenState),this.syncHiddenState=null),this.map=null},t.prototype.buildTrafficLegendDiv=function(e){var i,o,s,f,v=document.createElement("div"),I=(v.classList.add("traffic-legend","hidden"),v.setAttribute("alt","Traffic Legend"),document.createElement("table")),D=document.createElement("tr"),k=document.createElement("td"),X=(k.setAttribute("alt","Traffic"),k.appendChild(document.createTextNode("Traffic")),At("Traffic")),fe=(k.classList.add("traffic-legend-title"),k.colSpan=6,D.appendChild(k),D.appendChild(X),ut(X,k),I.appendChild(D),document.createElement("tr"));try{for(var Se=Q2(this.table),Ve=Se.next();!Ve.done;Ve=Se.next()){var Je=Ve.value,lt=document.createElement("td");if("Fast"===Je||"Slow"===Je)lt.setAttribute("alt",Je),lt.appendChild(document.createTextNode(Je)),lt.classList.add("traffic-legend-text");else{lt.classList.add("traffic-legend-colors"),lt.setAttribute("aria-label","Traffic Legend"),lt.setAttribute("role","img");try{s=void 0;for(var mt=Q2(Je),_n=mt.next();!_n.done;_n=mt.next()){var Yn=_n.value,sr=document.createElement("div");sr.classList.add(Yn),lt.appendChild(sr)}}catch(tn){s={error:tn}}finally{try{_n&&!_n.done&&(f=mt.return)&&f.call(mt)}finally{if(s)throw s.error}}}fe.appendChild(lt);var ri=At(Je instanceof Array?"Traffic Legend":Je);fe.appendChild(ri),ut(ri,lt)}}catch(tn){i={error:tn}}finally{try{Ve&&!Ve.done&&(o=Se.return)&&o.call(Se)}finally{if(i)throw i.error}}return I.appendChild(fe),v.appendChild(I),this.syncHiddenState=function(tn){"style"===tn.dataType&&((tn=e.getTraffic()).flow&&"none"!==tn.flow?v.classList.remove("hidden"):v.classList.add("hidden"))},this.syncHiddenState({dataType:"style"}),e.events.add("styledata",this.syncHiddenState),v},t}(ko),Z2=at;function LA(n){var t=-1,e=null==n?0:n.length;for(this.__data__=new Z2;++t<e;)this.add(n[t])}LA.prototype.add=LA.prototype.push=function kA(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},LA.prototype.has=function yL(n){return this.__data__.has(n)};var Ul,cc,nl,gl,lc,bL=LA,Xv=function FA(n,t){for(var e=-1,i=null==n?0:n.length;++e<i;)if(t(n[e],e,n))return!0;return!1},P9=function CL(n,t){return n.has(t)},EL=function N9(n,t,e,i,o,s){var f=1&e,v=n.length;if(v!=(I=t.length)&&!(f&&v<I))return!1;var I=s.get(n),D=s.get(t);if(I&&D)return I==t&&D==n;var k=-1,X=!0,fe=2&e?new bL:void 0;for(s.set(n,t),s.set(t,n);++k<v;){var Se,Ve=n[k],Je=t[k];if(void 0!==(Se=i?f?i(Je,Ve,k,t,n,s):i(Ve,Je,k,n,t,s):Se)){if(Se)continue;X=!1;break}if(fe){if(!Xv(t,function(lt,mt){if(!P9(fe,mt)&&(Ve===lt||o(Ve,lt,e,i,s)))return fe.push(mt)})){X=!1;break}}else if(Ve!==Je&&!o(Ve,Je,e,i,s)){X=!1;break}}return s.delete(n),s.delete(t),X},wL=yo,D9=ka,k9=EL,TL=function u_(n){var t=-1,e=Array(n.size);return n.forEach(function(i,o){e[++t]=[o,i]}),e},L9=function SL(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e},UA=Vl?Vl.prototype:void 0,OL=UA?UA.valueOf:void 0,RL=$v,j9=Object.prototype.hasOwnProperty,BA=di,G9=EL,q9=function Qj(n,t,e,i,o,s,f){switch(e){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=t.byteLength||!s(new wL(n),new wL(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return D9(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var v=TL;case"[object Set]":if(v=v||L9,n.size!=t.size&&!(1&i))return!1;var I=f.get(n);return I?I==t:(i|=2,f.set(n,t),I=k9(v(n),v(t),i,o,s,f),f.delete(n),I);case"[object Symbol]":if(OL)return OL.call(n)==OL.call(t)}return!1},JE=be,eR=le,zA=an,K9=Ic,tR="[object Arguments]",nR="[object Array]",mC="[object Object]",iR=Object.prototype.hasOwnProperty,W9=function NL(n,t,e,i,o,s){var f=eR(n),k=eR(t),v=f?nR:JE(n),I=(k=k?nR:JE(t),(v=v==tR?mC:v)==mC),D=(k=k==tR?mC:k)==mC;if((k=v==k)&&zA(n)){if(!zA(t))return!1;I=!(f=!0)}return k&&!I?(s=s||new BA,f||K9(n)?G9(n,t,e,i,o,s):q9(n,t,v,e,i,o,s)):1&e||(f=I&&iR.call(n,"__wrapped__"),v=D&&iR.call(t,"__wrapped__"),!f&&!v)?k&&function $9(n,t,e,i,o,s){var f=1&e,v=RL(n),I=v.length;if(I!=RL(t).length&&!f)return!1;for(var D=I;D--;){var k=v[D];if(!(f?k in t:j9.call(t,k)))return!1}var X=s.get(n),fe=s.get(t);if(X&&fe)return X==t&&fe==n;for(var Se=!0,Ve=(s.set(n,t),s.set(t,n),f);++D<I;){var Je,lt=n[k=v[D]],mt=t[k];if(!(void 0===(Je=i?f?i(mt,lt,k,t,n,s):i(lt,mt,k,n,t,s):Je)?lt===mt||o(lt,mt,e,i,s):Je)){Se=!1;break}Ve=Ve||"constructor"==k}return Se&&!Ve&&(X=n.constructor)!=(fe=t.constructor)&&"constructor"in n&&"constructor"in t&&!("function"==typeof X&&X instanceof X&&"function"==typeof fe&&fe instanceof fe)&&(Se=!1),s.delete(n),s.delete(t),Se}(n,t,e,i,o,s=s||new BA):o(f?n.value():n,v?t.value():t,e,i,s=s||new BA)},oR=Vd,eS=function Q9(n,t,e,i,o){return n===t||(null==n||null==t||!oR(n)&&!oR(t)?n!=n&&t!=t:W9(n,t,e,i,Q9,o))},Qh=T(function X9(n,t){return eS(n,t)}),Ff=function(){function n(t,e,i,o){this.type="Feature",this.type=n.TYPE,this.properties=e||{},this.id=i,this.geometry=t,this.bbox=o}return n.TYPE="Feature",n}(),DL=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),id=function(n){function t(e,i){return n.call(this,e,i)||this}return DL(t,n),t.fromData=function(e){var i=NaN,o=NaN,s=new Set(["y"]),f=new Set(["x"]);return Object.keys(e).forEach(function(v){var I=v.toLowerCase();isNaN(i)&&s.has(I)&&"number"==typeof e[v]?i=e[v]:isNaN(o)&&f.has(I)&&"number"==typeof e[v]&&(o=e[v])}),isNaN(i)||isNaN(o)?null:new t(i,o)},t.getX=function(e){return 0<e.length?e[0]:NaN},t.getY=function(e){return 1<e.length?e[1]:NaN},t.getDestination=function(e,i,o){return new t(t.getX(e)+o*Math.cos((i+270)*Math.PI/180),t.getY(e)+o*Math.sin((i+270)*Math.PI/180))},t.getDistance=function(s,i){var o=t.getX(s)-t.getX(i);return s=t.getY(s)-t.getY(i),Math.sqrt(o*o+s*s)},t.getHeading=function(s,i){var o=t.getX(i)-t.getX(s);return s=t.getY(s)-t.getY(i),180*(2.5*Math.PI-Math.atan2(s,o))/Math.PI%360},t}(Array),Eg=function(){function n(t){this.type="Point",this.type=n.TYPE,this.coordinates=t}return n.TYPE="Point",n}(),tS=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},aR=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jA=6378137,Z9=Math.PI/180,J9=180/Math.PI,eH=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],$A=85.0511;function ch(n){return n*Z9}function Cy(n){return n*J9}function _C(n,t,e){return Math.min(Math.max(n,t),e)}function sR(o,t){var i=ch(t[1]-o[1]),e=ch(t[0]-o[0]);return i=Math.pow(Math.sin(i/2),2)+Math.cos(ch(o[1]))*Math.cos(ch(t[1]))*Math.pow(Math.sin(e/2),2),o=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),Math.round(jA*o*100)/100}function VA(n){if(n)switch(n.toLowerCase()){case"feet":case"foot":case"ft":return cc.feet;case"kilometers":case"kilometer":case"kilometres":case"kilometre":case"km":case"kms":return cc.kilometers;case"miles":case"mile":case"mi":return cc.miles;case"nauticalmiles":case"nauticalmile":case"nms":case"nm":return cc.nauticalMiles;case"yards":case"yard":case"yds":case"yrd":case"yrds":return cc.yards;default:return cc.meters}return cc.meters}function cR(n){if(n)switch(n.toLowerCase()){case"milespersecondsquared":case"milepersecondsquared":case"mi/s^2":case"mi/s2":return lc.milesPerSecondSquared;case"kilometerspersecondsquared":case"kilometrespersecondsquared":case"kilometerpersecondsquared":case"kilometrepersecondsquared":case"km/s^2":case"km/s2":return lc.kilometersPerSecondSquared;case"knotspersecond":case"knotpersecond":case"knts/s":case"kn/s":case"kt/s":return lc.knotsPerSecond;case"standardgravity":case"g":return lc.standardGravity;case"feetpersecondsquared":case"footpersecondsquared":case"ft/s^2":case"ft/s2":return lc.feetPerSecondSquared;case"yardspersecondsquared":case"yardpersecondsquared":case"yds/s^2":case"yds/s2":case"yd/s^2":case"yd/s2":return lc.yardsPerSecondSquared;case"milesperhoursecond":case"mileperhoursecond":case"milesperhourseconds":case"mileperhourseconds":case"mi/h/s":return lc.milesPerHourSecond;case"kilometersperhoursecond":case"kilometrespersoursecond":case"kilometerperhoursecond":case"kilometrepersoursecond":case"kilometersperhourssecond":case"kilometrespersourssecond":case"kilometerperhourssecond":case"kilometrepersourssecond":case"kmhs":case"km/h/s":return lc.kilometersPerHourSecond;default:return lc.metersPerSecondSquared}return lc.metersPerSecondSquared}function lR(n){if(n)switch(n){case"acres":case"ac":return Ul.acres;case"hectares":case"ha":return Ul.hectares;case"squareFeet":case"ft^2":case"ft2":return Ul.squareFeet;case"squareYards":case"squareYard":case"yds^2":case"yds2":case"yd^2":case"yd2":return Ul.squareYards;case"squareKilometers":case"squareKilometres":case"squareKilometer":case"squareKilometre":case"km^2":case"km2":return Ul.squareKilometers;case"squareMiles":case"squareMile":case"mi^2":case"mi2":return Ul.squareMiles;default:return Ul.squareMeters}return Ul.squareMeters}function uR(n){if(n)switch(n.toLowerCase()){case"feetpersecond":case"footsecond":case"ftps":case"ft/s":return gl.feetPerSecond;case"milesperhour":case"mileperhour":case"mph":case"mi/hr":case"mi/h":return gl.milesPerHour;case"knots":case"knot":case"knts":case"knt":case"kn":case"kt":return gl.knots;case"mach":case"m":return gl.mach;case"kilometersperhour":case"kilometresperhour":case"kmperhour":case"kmph":case"km/hr":case"km/h":return gl.kilometersPerHour;default:return gl.metersPerSecond}return gl.metersPerSecond}function GA(n){if(n)switch(n.toLowerCase()){case"milliseconds":case"ms":return nl.ms;case"minutes":case"minute":case"mins":case"min":return nl.minutes;case"hours":case"hour":case"hr":case"h":return nl.hours;case"days":case"day":case"d":return nl.days;default:return nl.seconds}return nl.seconds}function Jv(n){var t=0;if(n&&0<n.length){t=Math.abs(Ap(n[0]));for(var e=1,i=n.length;e<i;e++)t-=Math.abs(Ap(n[e]))}return t}function Ap(n){var t=0;if(3<=n.length){for(var e=void 0,i=void 0,o=0,s=n.length;o<s;o++)t+=(ch(n[o===s-2?(e=s-2,i=s-1,0):o===s-1?(e=s-1,i=0,1):(i=(e=o)+1,o+2)][0])-ch(n[e][0]))*Math.sin(ch(n[i][1]));t=t*jA*jA/2}return t}function Ip(n,t,e){return(n[0]-e[0])*(t[1]-e[1])-(n[1]-e[1])*(t[0]-e[0])}function kL(n,t,e){if(2<=e.length){for(var i,o,s,f=1/0,v=null,I=t0(e,22),D=0,k=I.length-1;D<k;D++)o=Zj(t,I[D],I[D+1]),(i=id.getDistance(t,o))<f&&(f=i,v=o);if(v)return s=CC([v],22)[0],new Ff(new Eg(s),{distance:cf(n,s)})}else if(1===e.length)return new Ff(new Eg(e[0]),{distance:cf(n,e[0])});return null}function Zj(n,t,e){var i,o;return t[0]===e[0]&&t[1]===e[1]||(n=((i=e[0]-t[0])*(o=n[0]-t[0])+(o=e[1]-t[1])*(n=n[1]-t[1]))/(i*i+o*o))<0?t:1<n?e:[t[0]+i*n,t[1]+o*n]}function Mp(n,t){var e;return!isNaN(n)&&"number"==typeof t&&0<=t&&(e=t<eH.length?eH[t]:Math.pow(10,t),n=Math.round(n*e)/e),n}function by(n,t,e,i){switch(VA(t)){case cc.meters:n/=1e3;break;case cc.feet:n/=3280.8399;break;case cc.miles:n/=.62137119;break;case cc.yards:n/=1093.6133;break;case cc.nauticalMiles:n/=.5399568}switch(VA(e)){case cc.meters:n*=1e3;break;case cc.feet:n*=3280.8399;break;case cc.miles:n*=.62137119;break;case cc.yards:n*=1093.6133;break;case cc.nauticalMiles:n*=.5399568}return"number"==typeof i&&0<=i&&(t=Math.pow(10,i),n=Math.round(n*t)/t),n}function e0(v,I,s,f){f=f||"meters",v=ju(v),f=yC(f);var o=ch(v[1]);return v=ch(v[0]),I=ch(I),s/=f,f=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(I)),v+=Math.atan2(Math.sin(I)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(f)),I=_C(od(Cy(f)),-85,85),[Eu(Cy(v)),I]}function cf(n,t,e){return n=sR(n=ju(n),t=ju(t)),"meters"===e?n:by(n,"meters",e||"meters")}function yC(n){return n=VA(n),by(jA,cc.meters,n)}function qA(n,t,e){for(var i=[],o=ch(n[1]),s=ch(n[0]),f=ch(t[1]),v=ch(t[0]),I=2*Math.asin(Math.sqrt(Math.pow(Math.sin((o-f)/2),2)+Math.cos(o)*Math.cos(f)*Math.pow(Math.sin((s-v)/2),2))),D=0;D<=e;D++){var fe=D/e,Se=Math.sin((1-fe)*I)/Math.sin(I),k=(fe=Math.sin(fe*I)/Math.sin(I),Se*Math.cos(o)*Math.cos(s)+fe*Math.cos(f)*Math.cos(v)),X=Se*Math.cos(o)*Math.sin(s)+fe*Math.cos(f)*Math.sin(v);Se=Se*Math.sin(o)+fe*Math.sin(f),fe=Math.atan2(Se,Math.sqrt(Math.pow(k,2)+Math.pow(X,2))),Se=Math.atan2(X,k),fe=_C(Cy(fe),-85,85),Se=Cy(Se),i.push([Se,fe])}return i}function nS(n){return(Array.isArray(n)?n:n.coordinates).reduce(function(t,e){var i=0<t.length?t[t.length-1]:null;return i&&180<Math.abs(e[0]-i[0])?t.push([i=i[0]<0?e[0]-360:e[0]+360,e[1]]):t.push(e),t},[])}function FL(n){for(var t,e,i,o,s,f=Array.isArray(n)?n:n.coordinates,v=[],I=[],D=0;D<f.length;D++)v.push(f[D]),D+1>=f.length||(t=(e=tS(f[D],2))[0],e=e[1],o=(s=tS(f[D+1],2))[0],s=s[1],180<Math.abs(o-t)&&(i=0<t?180:-180,o=Math.abs((0<t?o+360:o-360)-t),s=e+(s-e)*(Math.abs(i-t)/o),v.push([i,s]),I.push(v),v=[[-i,s]]));return I.push(v),I}function h_(n,t){var e,i;return n=ju(n),t=ju(t),n&&2<=n.length&&t&&2<=t.length?(i=ch(n[1]),e=ch(t[1]),t=ch(t[0]-n[0]),n=Math.sin(t)*Math.cos(e),i=Math.cos(i)*Math.sin(e)-Math.sin(i)*Math.cos(e)*Math.cos(t),(Cy(Math.atan2(n,i))+360)%360):NaN}function rS(n,t){var e,i=0;Array.isArray(n)?e=n:n.type&&"LineString"===n.type&&(e=n.coordinates);for(var o=0,s=e.length-1;o<s;o++)i+=sR(e[o],e[o+1]);return by(i,"meters",t||"meters")}function iS(n,t,e){e=e||"meters";var i,o=0;if(Array.isArray(n)?i=n:n.type&&"LineString"===n.type&&(i=n.coordinates),2<=i.length){for(var s,f,v=i.length,I=1;I<v;I++){if(t<=o+(f=cf(i[I-1],i[I],e)))return s=h_(i[I-1],i[I]),e0(i[I-1],s,t-o,e);o+=f}return o<=t?i[v-1]:i[0]}return null}function HL(n,t,e,i,o){i=i||"meters",o=o||0,n=ju(n);for(var s=[],f=360/e,v=0;v<=e;v++)s.push(e0(n,(v*f+o)%360,t,i));return s}function UL(n,t,e,i,o){return nS(HL(n,t,e,i,o))}function hR(n,t,e){e=void 0===e?.5:e;var i=cf(n=ju(n),t=ju(t),"kilometers");return e0(n,h_(n,t),i*e,"kilometers")}function od(n){return 90<n?180<(n=(n+90)%360)?90-(n-180):n-90:n<-90?(n=(n-90)%360)<-180?-90-(n+180):n+90:n}function Eu(n){return 180<n?(n+180)%360-180:n<-180?(n-180)%360+180:n}function KA(n,t,e){if(0===e)return Object.assign({},n);t=ju(t);for(var i,o,s=[],f=0,v=n.length;f<v;f++)i=cf(t,n[f]),o=h_(t,n[f]),s.push(e0(t,o+e,i));return s}function CC(n,t){for(var o=512*Math.pow(2,t),s=[],f=0,v=n.length;f<v;f++)s.push([360*(n[f][0]/o-.5),90-360*Math.atan(Math.exp(2*-(.5-n[f][1]/o)*Math.PI))/Math.PI]);return s}function t0(n,t){for(var e,i,o=512*Math.pow(2,t),s=[],f=0,v=n.length;f<v;f++)i=Math.sin(n[f][1]*Math.PI/180),e=(n[f][0]+180)/360,i=.5-Math.log((1+i)/(1-i))/(4*Math.PI),s.push([Math.round(e*o),Math.round(i*o)]);return s}function YA(n,t,e,i){switch(cR(t)){case lc.kilometersPerHourSecond:n/=3.6;break;case lc.milesPerHourSecond:n/=2.236936292054;break;case lc.knotsPerSecond:n/=1.943844492441;break;case lc.standardGravity:n/=.1019716212978;break;case lc.kilometersPerSecondSquared:n/=.001;break;case lc.milesPerSecondSquared:n/=.000621371192;break;case lc.feetPerSecondSquared:n/=3.280839895012;break;case lc.yardsPerSecondSquared:n/=1.093613298338}switch(cR(e)){case lc.kilometersPerHourSecond:n*=3.6;break;case lc.milesPerHourSecond:n*=2.236936292054;break;case lc.knotsPerSecond:n*=1.943844492441;break;case lc.standardGravity:n*=.1019716212978;break;case lc.kilometersPerSecondSquared:n*=.001;break;case lc.milesPerSecondSquared:n*=.000621371192;break;case lc.feetPerSecondSquared:n*=3.280839895012;break;case lc.yardsPerSecondSquared:n*=1.093613298338}return Mp(n,i)}function zL(n,t,e,i){switch(lR(t)){case Ul.acres:n*=4046.8564224;break;case Ul.hectares:n*=1e4;break;case Ul.squareFeet:n*=.09290304;break;case Ul.squareKilometers:n*=1e6;break;case Ul.squareMiles:n*=259e4;break;case Ul.squareYards:n*=.83612736}switch(lR(e)){case Ul.acres:n/=4046.8564224;break;case Ul.hectares:n/=1e4;break;case Ul.squareFeet:n/=.09290304;break;case Ul.squareKilometers:n/=1e6;break;case Ul.squareMiles:n/=259e4;break;case Ul.squareYards:n/=.83612736}return Mp(n,i)}function p_(n,t,e,i){switch(uR(t)){case gl.feetPerSecond:n*=1.09728;break;case gl.milesPerHour:n*=1.6093;break;case gl.knots:n*=1.852;break;case gl.metersPerSecond:n*=3.6;break;case gl.mach:n*=1234.8}switch(uR(e)){case gl.feetPerSecond:n/=1.09728;break;case gl.milesPerHour:n/=1.6093;break;case gl.knots:n/=1.852;break;case gl.metersPerSecond:n/=3.6;break;case gl.mach:n/=1234.8}return Mp(n,i)}function n0(n,t,e,i){switch(GA(t)){case nl.ms:n/=1e3;break;case nl.hours:n*=3600;break;case nl.minutes:n*=60;break;case nl.days:n*=86400}switch(GA(e)){case nl.ms:n*=1e3;break;case nl.hours:n/=3600;break;case nl.minutes:n/=60;break;case nl.days:n/=86400}return Mp(n,i)}function Ey(n,t,e,i,o,s,f,v){return t=by(t,o,cc.meters),o=n0(e,s,nl.seconds),YA(2*(t-p_(n,i,gl.metersPerSecond)*o)/(o*o),lc.metersPerSecondSquared,f,v)}function pR(n,t,e,i,o,s,f){return n=p_(n,i,gl.metersPerSecond),YA((p_(t,i,gl.metersPerSecond)-n)/n0(e,o,nl.seconds),lc.metersPerSecondSquared,s,f)}function QA(n,t,e,i){return n=aS(n),t=aS(t),null!=n&&null!=t?n0(t.getTime()-n.getTime(),nl.ms,e,i):NaN}function aS(n){if("[object Date]"===Object.prototype.toString.call(n))return n;if("string"==typeof n){var t=Date.parse(n);if(!isNaN(t))return new Date(t);if(0<=n.indexOf("Date("))return t=(t=0)<(n=n.replace("/Date(","").replace(")/","")).indexOf("+")?parseInt(n.substr(0,n.indexOf("+")),10):0<n.indexOf("-")?parseInt(n.substr(0,n.indexOf("-")),10):parseInt(n,10),new Date(t)}else if("number"==typeof n)return new Date(n);return null}function pm(n){var t=[],e=null,i=null;if(Array.isArray(n)&&0<n.length)if(Array.isArray(n[0])&&"number"==typeof n[0][0])t=n;else for(var o=n.length,s=0;s<o;s++)t=t.concat(pm(n[s]));else if(n.type)switch(n.type){case"Point":t=[n.coordinates];break;case"LineString":case"MultiPoint":t=n.coordinates;break;case"Polygon":case"MultiLineString":e=n.coordinates;break;case"MultiPolygon":i=n.coordinates;break;case"Feature":var f=n;t=Bl._isCircle(f)?Bl._getCirclePositions(f):pm(f.geometry);break;case"FeatureCollection":t=pm(n.features);break;case"GeometryCollection":t=pm(n.geometries)}else if(n instanceof Bl)return pm(n.toJson());if(e)for(o=e.length,s=0;s<o;s++)t=t.concat(e[s]);else if(i){var v=i.length;for(s=0;s<v;s++)for(var I=i[s].length,D=0;D<I;D++)t=t.concat(i[s][D])}return t}function ju(n){if(Array.isArray(n)&&"number"==typeof n[0])return n;if(n.type){if("Point"===n.type)return n.coordinates;if("Feature"===n.type&&"Point"===n.geometry.type)return n.geometry.coordinates}else if(n instanceof Bl&&"Point"===n.getType())return n.getCoordinates();return null}function XA(n,t,e){e=e||"meters";var i,o=0;if(Array.isArray(n)?i=n:n.type&&"LineString"===n.type&&(i=n.coordinates),2<=i.length){for(var s,f,v,I=i.length,D=1;D<I;D++){if(t<=o+(v=cf(i[D-1],i[D],e)))return s=h_(i[D-1],i[D]),f=e0(i[D-1],s,t-o,e),new Ff(new Eg(f),{heading:s});o+=v}return o<=t?new Ff(new Eg(i[I-1]),{heading:h_(i[I-2],i[I-1])}):new Ff(new Eg(i[0]),{heading:h_(i[0],i[1])})}return null}function cS(n,t,e,i){var Ve,o=ju(n),s=t0([o],22)[0],f=null,v=1/0;switch((t=t instanceof Bl?t.toJson():t).type){case"Feature":return cS(n,t.geometry,e);case"Point":Se=[[t.coordinates]];break;case"MultiPoint":for(var I,D=t.coordinates,k=0,X=D.length;k<X;k++)(I=cf(o,D[k]))<v&&(v=I,f=new Ff(new Eg(D[k]),{distance:I}));break;case"LineString":Se=[t.coordinates];break;case"Polygon":case"MultiLineString":Se=t.coordinates;break;case"MultiPolygon":var fe=t.coordinates;if(0<fe.length){var Se=fe[0];for(k=1,X=fe.length;k<X;k++)Se=Se.concat(fe[k])}}if(Se)for(k=0,X=Se.length;k<X;k++)(Ve=kL(o,s,Se[k]))&&Ve.properties.distance<v&&(v=Ve.properties.distance,f=Ve);return f&&(f.properties.distance=by(f.properties.distance,"meters",e,i)),f}(function(n){n.squareMeters="squareMeters",n.acres="acres",n.hectares="hectares",n.squareFeet="squareFeet",n.squareKilometers="squareKilometers",n.squareMiles="squareMiles",n.squareYards="squareYards"})(Ul=Ul||{}),function(n){n.meters="meters",n.kilometers="kilometers",n.feet="feet",n.miles="miles",n.nauticalMiles="nauticalMiles",n.yards="yards"}(cc=cc||{}),function(n){n.seconds="seconds",n.hours="hours",n.ms="ms",n.minutes="minutes",n.days="days"}(nl=nl||{}),function(n){n.metersPerSecond="metersPerSecond",n.kilometersPerHour="kilometersPerHour",n.feetPerSecond="feetPerSecond",n.milesPerHour="milesPerHour",n.knots="knots",n.mach="mach"}(gl=gl||{}),function(n){n.milesPerSecondSquared="milesPerSecondSquared",n.kilometersPerSecondSquared="kilometersPerSecondSquared",n.knotsPerSecond="knotsPerSecond",n.standardGravity="standardGravity",n.feetPerSecondSquared="feetPerSecondSquared",n.yardsPerSecondSquared="yardsPerSecondSquared",n.milesPerHourSecond="milesPerHourSecond",n.kilometersPerHourSecond="kilometersPerHourSecond",n.metersPerSecondSquared="metersPerSecondSquared"}(lc=lc||{});var fR=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ad=function(n){function t(e,i,o){return o?n.call(this,e,i,o)||this:n.call(this,e,i)||this}return fR(t,n),t.fromPosition=function(e){return 2===e.length?new t(e[0],e[1]):2<e.length?new t(e[0],e[1],e[2]):null},t.areEqual=function(e,i,o){var s,f;return void 0===o&&(o=6),!!(e&&2<=e.length&&i&&2<=i.length)&&(o=Math.pow(10,o),f=od(e[1]),s=od(i[1]),e=Eu(e[0]),i=Eu(i[0]),Math.round((f-s)*o)/o==0)&&(0==(f=Math.round((e-i)*o)/o)||360==f)},t.fromLatLng=function(e,i,o){var s,f,v,I,D,k,X=[];return"number"==typeof e?("number"==typeof i&&X.push(i),X.push(e),"number"==typeof o&&X.push(o)):Array.isArray(e)?2<=e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(3<=e.length&&"number"==typeof e[2]?X.push(e[1],e[0],e[2]):X.push(e[1],e[0])):"object"==typeof e&&(s=["lat","latitude","y"],f=["lng","longitude","lon","x"],v=["elv","elevation","alt","altitude","z"],k=D=I=NaN,Object.keys(e).forEach(function(fe,Se,Ve){var Je=fe.toLowerCase();isNaN(I)&&0<=s.indexOf(Je)&&"number"==typeof e[fe]?I=e[fe]:isNaN(D)&&0<=f.indexOf(Je)&&"number"==typeof e[fe]?D=e[fe]:isNaN(k)&&0<=v.indexOf(Je)&&"number"==typeof e[fe]&&(k=e[fe])}),isNaN(I)||isNaN(D)||(X.push(D,I),isNaN(k))||X.push(k)),2<=X.length?X:null},t.fromLatLngs=function(e){var i=[];if(Array.isArray(e))for(var o=0,s=e.length;o<s;o++){var f=t.fromLatLng(e[o]);f&&i.push(f)}return i},t._getDimensions=function(e){for(var i=0;Array.isArray(e);)e=e[0],i++;return"number"==typeof e&&i--,i},t}(Array),ZA=function(){function n(t,e){this.type="Polygon",this.type=n.TYPE,this.coordinates=1===ad._getDimensions(t)?[t]:t,this.bbox=e}return n.TYPE="Polygon",n}(),KL=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),YL=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bl=function(n){function t(e,i,o){var s,f,v=n.call(this)||this;return"Feature"===e.type?(f=Yl((s=e).geometry),o=s.properties?Yl(s.properties):{},i=null==s.id||""===s.id?Ae():s.id):(f=Yl(e),i=null==i||""===i?Ae():i,o=o?Yl(o):{}),o[t._shapeIdPropName]=i,v.data=new Ff(f,o,i),v._handleCircle(),v}return KL(t,n),t.prototype.addProperty=function(e,i){Qh(this.data.properties[e],i)||(this.data.properties[e]=Yl(i),"subType"!==e&&"radius"!==e||this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},t.prototype.getBounds=function(){var e,i,o,s,f,v=this.getCoordinates(),I=this.getType();if("Point"===I)f=this.circlePolygon?es.fromPositions((D=this.circlePolygon.geometry.coordinates)[0]):new es(D=v,D);else if("MultiPoint"===I||"LineString"===I){var D=v;f=es.fromPositions(D)}else if("Polygon"===I)f=es.fromPositions((D=v)[0]);else if("MultiLineString"===I){D=v;try{for(var k=YL(D),X=k.next();!X.done;X=k.next())f=es.merge(f,es.fromPositions(X.value))}catch(lt){e={error:lt}}finally{try{X&&!X.done&&(i=k.return)&&i.call(k)}finally{if(e)throw e.error}}}else if("MultiPolygon"===I){D=v;try{for(var Se=YL(D),Ve=Se.next();!Ve.done;Ve=Se.next())f=es.merge(f,es.fromPositions(Ve.value[0]))}catch(lt){o={error:lt}}finally{try{Ve&&!Ve.done&&(s=Se.return)&&s.call(Se)}finally{if(o)throw o.error}}}return f},t.prototype.getCoordinates=function(){return Yl(this.data.geometry.coordinates)},t.prototype.getCircleCoordinates=function(){return this.circlePolygon?Yl(this.circlePolygon.geometry.coordinates[0]):null},t.prototype.getId=function(){return this.data.id},t.prototype.getProperties=function(){return Yl(this.data.properties)},t.prototype.getType=function(){return this.data.geometry.type},t.prototype.isCircle=function(){return t._isCircle(this.data)},t.prototype.isRectangle=function(){return t._isRectangle(this.data)},t.prototype.setCoordinates=function(e){e="Polygon"===this.getType()&&1===ad._getDimensions(e)?[e]:e,Qh(this.data.geometry.coordinates,e)||(this.data.geometry.coordinates=Yl(e),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},t.prototype.setProperties=function(e){e[t._shapeIdPropName]=this.data.id,Qh(this.data.properties,e)||(this.data.properties=Yl(e),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},t.prototype.toJson=function(){return JSON.parse(JSON.stringify(this.data))},t.prototype._toJson=function(){return this.circlePolygon||this.data},t.prototype._setDataSource=function(e){void 0===e||null==e?delete this.dataSource:this.dataSource=e},t.prototype._handleCircle=function(){var e;this.isCircle()?(e=t._getCirclePositions(this.data),this.circlePolygon=new Ff(new ZA([e]),this.data.properties,this.data.id),this.data.properties.subType="Circle"):delete this.circlePolygon},t._isCircle=function(e){return e&&e.geometry&&"Point"===e.geometry.type&&e.geometry.coordinates&&e.properties&&"string"==typeof e.properties.subType&&"circle"===e.properties.subType.toLowerCase()&&"number"==typeof e.properties.radius},t._isRectangle=function(e){if("Polygon"===e.geometry.type&&e.geometry.coordinates&&"string"==typeof e.properties.subType&&"rectangle"===e.properties.subType.toLowerCase()&&1===(e=e.geometry.coordinates).length){if(5===(e=e[0]).length)return e[0][0]===e[4][0]&&e[0][1]===e[4][1];if(4===e.length)return!0}return!1},t._getCirclePositions=function(e){return UL(e.geometry.coordinates,e.properties.radius,72,"meters")},t._shapeIdPropName="_azureMapsShapeId",t}(Ai),nH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),WL=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},es=function(n){function t(e,i){var o,s=this;return e&&i?s=(o=e)[2]&&i[2]?n.call(this,o[0],o[1],o[2]||0,i[0],i[1],i[2]||0)||this:n.call(this,o[0],o[1],i[0],i[1])||this:e&&(o=e)&&(4===o.length?s=n.call(this,o[0],o[1],o[2],o[3])||this:6<=o.length&&(s=n.call(this,o[0],o[1],o[2],o[3],o[4],o[5])||this)),s}return nH(t,n),t.fromBoundingBox=function(f){var i=t.getWest(f),o=t.getSouth(f),s=t.getEast(f);return f=t.getNorth(f),new t([i,o,s,f])},t.fromDimensions=function(v,i,I){var s=v[0],f=(v=v[1],Math.min(Math.max(v+I/2,-85.5),85.5));return v=Math.min(Math.max(v-I/2,-85.5),85.5),I=Eu(s+i/2),new t([Eu(s-i/2),v,I,f])},t.fromEdges=function(e,i,o,s){return new t([e,i,o,s])},t.containsPosition=function(v,f){var s=t.getCenter(v),o=Math.abs(s[1]-f[1]);return 180<(s=Math.abs(s[0]-f[0]))&&(s=360-s),f=t.getHeight(v),v=t.getWidth(v),o<=f/2+1e-8&&s<=v/2+1e-8},t.containsBoundingBox=function(e,i){return!(!e||4!==e.length||!i||4!==i.length)&&t.getWest(e)<t.getWest(i)&&t.getWest(i)<t.getEast(e)&&t.getWest(e)<t.getEast(i)&&t.getEast(i)<t.getEast(e)&&t.getSouth(e)<t.getSouth(i)&&t.getSouth(i)<t.getNorth(e)&&t.getSouth(e)<t.getNorth(i)&&t.getNorth(i)<t.getNorth(e)},t.crossesAntimeridian=function(e){return Eu(t.getEast(e))-Eu(t.getWest(e))<0||t.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe(e)||t.isBoundingBoxWithLessThanSixElementsLargerThanGlobe(e)},t.getCenter=function(s){var i=((o=Eu(t.getEast(s)))<(i=Eu(t.getWest(s)))&&(o+=360),Eu((i+o)/2)),o=od(t.getSouth(s));return s=od(t.getNorth(s)),[i,od((o+s)/2)]},t.getHeight=function(e){return e=od(t.getNorth(e))-od(t.getSouth(e)),isNaN(e)?0:e},t.getWidth=function(e){return e=Eu(t.getEast(e))-Eu(t.getWest(e)),isNaN(e)?0:e<0?e+360:e},t.getSouthWest=function(o){var i=this.getSouth(o);return o=this.getWest(o),isNaN(i)||isNaN(o)?null:[o,i]},t.getNorthEast=function(o){var i=this.getNorth(o);return o=this.getEast(o),isNaN(i)||isNaN(o)?null:[o,i]},t.getNorthWest=function(o){var i=this.getNorth(o);return o=this.getWest(o),isNaN(i)||isNaN(o)?null:[o,i]},t.getSouthEast=function(o){var i=this.getSouth(o);return o=this.getEast(o),isNaN(i)||isNaN(o)?null:[o,i]},t.getSouth=function(e){return e&&4<=e.length?Number(e[1]):NaN},t.getWest=function(e){return e&&4<=e.length?Number(e[0]):NaN},t.getNorth=function(e){if(e){if(4===e.length)return Number(e[3]);if(6===e.length)return Number(e[4])}return NaN},t.getEast=function(e){if(e){if(4===e.length)return Number(e[2]);if(6===e.length)return Number(e[3])}return NaN},t.intersect=function(v,D){var s=t.getCenter(v),f=t.getCenter(D),o=Math.abs(s[1]-f[1]),I=(180<(s=Math.abs(s[0]-f[0]))&&(s=360-s),f=t.getHeight(v),v=t.getWidth(v),t.getHeight(D));return D=t.getWidth(D),o<=f/2+I/2&&s<=v/2+D/2},t.merge=function(e,i){var s=i&&4===i.length;if((o=e&&4===e.length)&&!s)return e;if(s&&!o)return i;if(!o&&!s)return null;var o=Math.max(od(t.getNorth(e)),od(t.getNorth(i))),f=(s=Math.min(od(t.getSouth(e)),od(t.getSouth(i))),[e,i]),v=[],I=0;for(I=0;I<f.length;I++){var D=f[I],k=Eu(t.getWest(D)),X=Eu(t.getEast(D));t.crossesAntimeridian(D)?(v.push([k,180]),v.push([-180,X])):v.push([k,X])}v.sort(function(Yn,sr){return Yn[0]===sr[0]?Yn[1]-sr[1]:Yn[0]-sr[0]});var fe=[],Se=v[0];for(I=1;I<v.length;){var Ve=v[I];Se[1]>=Ve[0]?Se[1]=Math.max(Se[1],Ve[1]):(fe.push(Se),Se=Ve),I++}fe.push(Se);var Je=fe.length,lt=fe[0][0]+360-fe[Je-1][1],mt=[fe[Je-1][1],fe[0][0]];for(I=1;I<Je;I++){var _n=fe[I][0]-fe[I-1][1];lt<_n&&(lt=_n,mt=[fe[I-1][1],fe[I][0]])}return new t([mt[1],s],[mt[0],o])},t.fromPositions=function(e){for(var i,o,s=NaN,f=NaN,v=NaN,I=NaN,D=e.length,k=new Array(D),X=0;D--;)(o=e[D])&&2<=o.length&&(i=od(o[1]),s=isNaN(s)?i:Math.max(s,i),f=isNaN(f)?i:Math.min(f,i),k[X++]=Eu(o[0]));if(X){k.length=X,k.sort(function(Je,lt){return Je-lt});var fe=k[0]+360-k[X-1],Se=0;for(D=1;D<X;D++){var Ve=k[D]-k[D-1];fe<Ve&&(fe=Ve,Se=D)}v=k[Se],I=k[(Se||X)-1]}return isNaN(v)||isNaN(f)||isNaN(I)||isNaN(s)?null:new t([v,f,I,s])},t.fromLatLngs=function(e){return t.fromPositions(ad.fromLatLngs(e))},t.fromData=function(e){var i,o,s=null;if(Array.isArray(e)&&0<e.length){try{for(var f=WL(e),v=f.next();!v.done;v=f.next()){var I;null!=(I=t.fromData(v.value))&&(s=null===s?I:t.merge(s,I))}}catch(_n){i={error:_n}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return s}if(e instanceof Bl)return e.getBounds();if(e&&e.type){var k=e;if(k.bbox&&4===k.bbox.length)return k.bbox;switch(k.type){case"FeatureCollection":return t.fromData(k.features);case"Feature":return Bl._isCircle(k)?t.fromPositions(Bl._getCirclePositions(k)):t.fromData(k.geometry);case"GeometryCollection":return t.fromData(k.geometries);case"Point":var X=k.coordinates;if(X&&2<=X.length)return[X[0],X[1],X[0],X[1]];break;case"LineString":case"MultiPoint":return t.fromPositions(k.coordinates);case"Polygon":case"MultiLineString":var fe=k.coordinates;if(fe&&0<fe.length){for(var Se=0,Ve=fe.length;Se<Ve;Se++)null!=(I=t.fromPositions(fe[Se]))&&(s=null===s?I:t.merge(s,I));if(null!=s)return s}break;case"MultiPolygon":var Je=k.coordinates;if(Je&&0<Je.length){for(Se=0,Ve=Je.length;Se<Ve;Se++)for(var lt=0,mt=Je[Se].length;lt<mt;lt++)null!=(I=t.fromPositions(Je[Se][lt]))&&(s=null===s?I:t.merge(s,I));return s}}}return null},t.splitOnAntimeridian=function(e){var i,o,s,f,v,I,D=[];return t.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe(e)?[[-180,e[1],e[2],180,e[4],e[5]]]:t.isBoundingBoxWithLessThanSixElementsLargerThanGlobe(e)?[[-180,e[1],180,e[3]]]:(t.crossesAntimeridian(e)?(i=void 0,o=Eu(t.getWest(e)),s=Eu(t.getEast(e)),f=od(t.getNorth(e)),v=od(t.getSouth(e)),I=6<=e.length?(i=[o,v,e[2],180,f,e[5]],[-180,v,e[2],s,f,e[5]]):(i=[o,v,180,f],[-180,v,s,f]),D.push(i,I)):D.push(e),D)},t.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe=function(e){return 6<=e.length&&360<e[3]-e[0]},t.isBoundingBoxWithLessThanSixElementsLargerThanGlobe=function(e){return e.length<6&&360<e[2]-e[0]},t}(Array),Qo=function(){function n(t,e){this.type="FeatureCollection",this.type=n.TYPE,this.features=t,this.bbox=e}return n.TYPE="FeatureCollection",n}(),QL=function(){function n(t){this.type="GeometryCollection",this.type=n.TYPE,this.geometries=t}return n.TYPE="GeometryCollection",n}(),XL=function(){function n(t,e){this.type="LineString",this.type=n.TYPE,this.coordinates=t,this.bbox=e}return n.TYPE="LineString",n}(),bC=function(){function n(t,e){this.type="MultiLineString",this.type=n.TYPE,this.coordinates=t,this.bbox=e}return n.TYPE="MultiLineString",n}(),ZL=function(){function n(t,e){this.type="MultiPoint",this.type=n.TYPE,this.coordinates=t,this.bbox=e}return n.TYPE="MultiPoint",n}(),JL=function(){function n(t,e){this.type="MultiPolygon",this.type=n.TYPE,this.coordinates=t,this.bbox=e}return n.TYPE="MultiPolygon",n}(),rH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),JA=function(n){function t(e,i,o){return n.call(this,e,i,o||0)||this}return rH(t,n),t.fromPosition=function(e){return 2<=e.length?new t((180+e[0])/360,t._latToMercatorY(e[1]),3<=e.length?t._altitudeToMercatorZ(e[2],e[1]):0):[0,0,0]},t.fromPositions=function(e){for(var i=[],o=0,s=e.length;o<s;o++)i.push(this.fromPosition(e[o]));return i},t.toFloat32Array=function(e){for(var i=new Float32Array(3*e.length),o=0,s=e.length;o<s;o++){var f=3*o,v=e[o];i[f]=(180+v[0])/360,i[1+f]=t._latToMercatorY(v[1]),i[2+f]=3<=v.length?t._altitudeToMercatorZ(v[2],v[1]):0}return i},t.toPosition=function(e){var i;return 2<=e.length?(i=360/Math.PI*Math.atan(Math.exp((180-360*e[1])*Math.PI/180))-90,new ad(360*e[0]-180,i,3<=e.length?t._mercatorZToAltitude(e[2],e[1]):0)):[0,0,0]},t.toPositions=function(e){for(var i=[],o=0,s=e.length;o<s;o++)i.push(this.toPosition(e[o]));return i},t.mercatorScale=function(e){return 1/Math.cos(e*Math.PI/180)},t.meterInMercatorUnits=function(e){return 1/t.earthCircumference*t.mercatorScale(t._latToMercatorY(e))},t._circumferenceAtLatitude=function(e){return t.earthCircumference*Math.cos(e*Math.PI/180)},t._altitudeToMercatorZ=function(e,i){return e/t._circumferenceAtLatitude(i)},t._mercatorZToAltitude=function(e,i){return e*t._circumferenceAtLatitude(t._latToMercatorY(i))},t._latToMercatorY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360},t.earthCircumference=2*Math.PI*yC(),t}(Array),Sy=Object.freeze({__proto__:null,BoundingBox:es,Feature:Ff,FeatureCollection:Qo,GeometryCollection:QL,LineString:XL,MercatorPoint:JA,MultiLineString:bC,MultiPoint:ZL,MultiPolygon:JL,Point:Eg,Polygon:ZA,Position:ad});function lS(n,t){return n*n+t*t}function uS(n,t){return lS(n[0]-t[0],n[1]-t[1])}function e4(n,s,e){var i,o=s[0],f=e[0]-o,v=e[1]-(s=s[1]);return 0==f&&0==v||(1<(i=((n[0]-o)*f+(n[1]-s)*v)/lS(f,v))?(o=e[0],s=e[1]):0<i&&(o+=f*i,s+=v*i)),lS(n[0]-o,n[1]-s)}function dS(n,t,e,i,o){for(var s,f=i,v=t+1;v<e;v++){var I=e4(n[v],n[t],n[e]);f<I&&(s=v,f=I)}i<f&&(1<s-t&&dS(n,t,s,i,o),o.push(n[s]),1<e-s)&&dS(n,s,e,i,o)}function mR(n,t){var e=n.length-1,i=[n[0]];return dS(n,0,e,t,i),i.push(n[e]),i}var NR,oH=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eI=function(){function n(t,e){this.M=n._calculateAffineTransform(t,e),this.inverseM=n._calculateAffineTransform(e,t)}return n.prototype.toTarget=function(t,e){return this.transformArray(t,this.M,e)},n.prototype.toSource=function(t,e){return this.transformArray(t,this.inverseM,e)},n.prototype.transformArray=function(t,e,i){var o,s;if(t&&Array.isArray(t)&&Array.isArray(t[0])){var f=[];try{for(var v=oH(t),I=v.next();!I.done;I=v.next())f.push(this.transform(I.value,e,i))}catch(k){o={error:k}}finally{try{I&&!I.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}return f}return null},n.prototype.transform=function(s,e,i){var o=s[0]*e[0][3]+s[1]*e[1][3]+e[2][3];return s=s[0]*e[0][4]+s[1]*e[1][4]+e[2][4],"number"==typeof i&&0<=i?[Mp(o,i),Mp(s,i)]:[Mp(o,6),Mp(s,6)]},n._calculateAffineTransform=function(t,e){if(t.length!==e.length||t.length<1)throw new Error("Error: source and target arrays must have the same length.");var i=Math.min(t[0].length,e[0].length),o=i+1;if(t.length<i)throw new Error("Erorr: At least "+i+" reference points required.");for(var s=[],f=[],v=0;v<o;v++){f[v]=[];for(var I=0;I<o;I++){I<i&&(s[I]=0);for(var D=f[v][I]=0;D<t.length;D++)I<i&&(s[I]+=v<i?t[D][v]*e[D][I]:e[D][I]),f[v][I]+=i<=v&&i<=I?1:i<=v?t[D][I]:i<=I?t[D][v]:t[D][v]*t[D][I]}f[v]=f[v].concat(s)}if(this._gaussJordanElimination(f))return f;throw new Error("Error: Singular matrix. Points are likely coplanar.")},n._gaussJordanElimination=function(t){for(var e,i=t.length,o=2*i-1,s=0;s<i;s++){for(var f=s,v=s+1;v<i;v++)Math.abs(t[v][s])>Math.abs(t[f][s])&&(f=v);if(e=t[f],t[f]=t[s],t[s]=e,Math.abs(t[s][s])<=1e-12)return!1;for(var I=s+1;I<i;I++)for(var D=t[I][s]/t[s][s],k=s;k<o;k++)t[I][k]-=t[s][k]*D}for(s=i-1;-1<s;s--){for(D=t[s][s],v=0;v<s;v++)for(var X=o-1;s-1<X;X--)t[v][X]-=t[s][X]*t[v][s]/D;t[s][s]/=D;for(var fe=i;fe<o;fe++)t[s][fe]/=D}return!0},n}(),yR=Object.freeze({__proto__:null,get AccelerationUnits(){return lc},AffineTransform:eI,get AreaUnits(){return Ul},get DistanceUnits(){return cc},get SpeedUnits(){return gl},get TimeUnits(){return nl},WEBMERCATOR_MAXLAT:$A,_precision:Mp,boundingBoxToPolygon:function Jj(o){var t=Eu(es.getWest(o)),e=Eu(es.getEast(o)),i=od(es.getNorth(o)),s=od(es.getSouth(o));return o=es.getCenter(o),new ZA([s=[[t,i],[t,s],[o[0],s],[e,s],[e,i],[o[0],i],[t,i]]])},convertAcceleration:YA,convertArea:zL,convertDistance:by,convertSpeed:p_,convertTimespan:n0,getAcceleration:Ey,getAccelerationFromFeatures:function jL(n,t,e,i,o,s,f){if("string"==typeof e&&"Feature"===n.type&&"Point"===n.geometry.type&&"Feature"===t.type&&"Point"===t.geometry.type&&(e=QA(n.properties[e],t.properties[e],nl.seconds),!isNaN(e))){var v=0;if(i&&"string"==typeof i){var I=n.properties[i];if(i=t.properties[i],"number"==typeof I&&(v=I,"number"==typeof i))return pR(I,i,e,o,nl.seconds,s,f)}return Ey(v,cf(n.geometry.coordinates,t.geometry.coordinates,cc.meters),e,o,cc.meters,nl.seconds,s,f)}return NaN},getAccelerationFromSpeeds:pR,getArea:function WA(n,t,e){if(n){var i=0;switch((n=n instanceof Bl?n.toJson():n).type){case"Feature":var o=n;if(o.geometry)return WA(o.geometry,t,e);break;case"Polygon":(o=n).coordinates&&(i=Jv(o.coordinates));break;case"MultiPolygon":var s=n;if(s.coordinates)for(var f=0,v=s.coordinates.length;f<v;f++)i+=Jv(s.coordinates[f])}return zL(i,Ul.squareMeters,t,e)}return 0},getCardinalSpline:function LL(n,t,e,i){if(!n||n.length<=2)return I;"number"!=typeof t&&(t=.5),("number"!=typeof e||e<=0)&&(e=15);var o,s,f,v=n.length,I=n.slice(0),D=(i?(ad.areEqual(I[0],I[v-1])&&(I.pop(),v--),I.unshift(n[v-1]),I.push(n[0]),I.push(n[1]),v++):(I.unshift(n[0]),I.push(n[v-1])),[]);D.push([1,0,0,0]);for(var k=1;k<e-1;k++)D.push([2*(f=(o=k/e)*(s=o*o))-3*s+1,-2*f+3*s,f-2*s+o,f-s]);D.push([0,1,0,0]);var X,fe,Se,Ve,Je,lt,mt=[];for(k=1;k<v;k++)for(X=t*(I[k+1][0]-I[k-1][0]),fe=t*(I[k+1][1]-I[k-1][1]),Se=t*(I[k+2][0]-I[k][0]),Ve=t*(I[k+2][1]-I[k][1]),o=0;o<e;o++)lt=(Je=D[o])[0]*I[k][0]+Je[1]*I[k+1][0]+Je[2]*X+Je[3]*Se,Je=_C(Je[0]*I[k][1]+Je[1]*I[k+1][1]+Je[2]*fe+Je[3]*Ve,-85,85),mt.push([lt,Je]);return mt},getClosestPointOnGeometry:cS,getConvexHull:function GL(n){var t,e,i=pm(n).map(function(k){return[Eu(k[0]),od(k[1])]}),o=(i.sort(function(k,X){return k[0]===X[0]?k[1]-X[1]:k[0]-X[0]}),[]);try{for(var s=aR(i),f=s.next();!f.done;f=s.next()){for(var v=f.value;2<=o.length&&Ip(o[o.length-2],o[o.length-1],v)<=0;)o.pop();o.push(v)}}catch(k){t={error:k}}finally{try{f&&!f.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}for(var I=[],D=i.length-1;0<=D;D--){for(;2<=I.length&&Ip(I[I.length-2],I[I.length-1],i[D])<=0;)I.pop();I.push(i[D])}return new ZA([o.concat(I)])},getDestination:e0,getDistanceTo:cf,getEarthRadius:yC,getGeodesicPath:function vC(n,t){(!t||t<=0)&&(t=15),Array.isArray(n)?e=n:n.type&&"LineString"===n.type&&(e=n.coordinates);for(var e,i=e.length-1,o=[],s=0;s<i;s++)o=o.concat(qA(e[s],e[s+1],t));return nS(o)},getGeodesicPaths:function dR(n,t){(!t||t<=0)&&(t=15),Array.isArray(n)?e=n:n.type&&"LineString"===n.type&&(e=n.coordinates);for(var e,i=e.length-1,o=[],s=[],f=0;f<i;f++)for(var v,I,D,k,X,fe=qA(e[f],e[f+1],t),Se=0;Se<fe.length;Se++)o.push(fe[Se]),Se+1>=fe.length||(v=(I=tS(fe[Se],2))[0],I=I[1],k=(X=tS(fe[Se+1],2))[0],X=X[1],180<Math.abs(k-v)&&(D=0<v?180:-180,k=Math.abs((0<v?k+360:k-360)-v),X=I+(X-I)*(Math.abs(D-v)/k),o.push([D,X]),s.push(o),o=[[-D,X]]));return s.push(o),s},getHeading:h_,getLengthOfPath:rS,getPathDenormalizedAtAntimerian:nS,getPathSplitByAntimeridian:FL,getPixelHeading:function oS(e,o){e=ju(e),o=ju(o),o=(e=tS(t0([e,o],21),2))[0];var i=(e=e[1])[0]-o[0];return o=o[1]-e[1],(2.5*Math.PI-Math.atan2(o,i))*J9%360},getPointWithHeadingAlongPath:XA,getPointsWithHeadingsAlongPath:function sS(n,t){if(t<=0)return[];for(var e=[],i=rS(n,cc.meters)/(t-1),o=0;o<t;o++){var s=XA(n,i*o,cc.meters);null!=s&&e.push(s)}return e},getPosition:ju,getPositionAlongPath:iS,getPositions:pm,getPositionsAlongPath:function qL(n,t){if(t<2)return[];for(var e=[],i=rS(n,cc.meters)/(t-1),o=0;o<t;o++){var s=iS(n,i*o,cc.meters);null!=s&&e.push(s)}return e},getRegularPolygonPath:UL,getRegularPolygonPaths:function BL(n,t,e,i,o){return FL(HL(n,t,e,i,o))},getSpeed:function tH(n,t,e,i,o,s){return n=ju(n),t=ju(t),n&&t?(e=n0(e,i,nl.seconds),p_(cf(n,t,cc.meters)/e,gl.metersPerSecond,o,s)):0},getSpeedFromFeatures:function $L(n,t,e,i,o){return"string"!=typeof e||"Feature"!==n.type||"Point"!==n.geometry.type||"Feature"!==t.type||"Point"!==t.geometry.type||(e=QA(n.properties[e],t.properties[e],nl.seconds),isNaN(e))?NaN:p_(cf(n.geometry.coordinates,t.geometry.coordinates,cc.meters)/e,gl.metersPerSecond,i,o)},getTimespan:QA,getTravelDistance:function VL(n,t,e,i,o,s,f,v){return t=n0(t,o,nl.seconds),o=(e=p_(e,s,gl.metersPerSecond))*t,"number"==typeof i&&(o+=.5*YA(i,f,lc.metersPerSecondSquared)*t*t),by(o,cc.meters,n,v)},interpolate:hR,mercatorPixelsToPositions:CC,mercatorPositionsToPixels:t0,normalizeLatitude:od,normalizeLongitude:Eu,parseTimestamp:aS,rotatePositions:KA,simplify:function iH(n,t){return function t4(n,t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),n.length<=2||(t*=t,n=mR(n=e?n:function gR(n,t){for(var e,i=n[0],o=[i],s=1,f=n.length;s<f;s++)uS(e=n[s],i)>t&&(o.push(e),i=e);return i!==e&&o.push(e),o}(n,t),t)),n}(n,t,!0)}}),aH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),sH=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.zoomDelta=1,e.style=Ga.light,e}return aH(t,n),t}(_t),cH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lH=function(n){function t(e){var i=n.call(this)||this;return i.container=null,i.zoomInButton=null,i.zoomOutButton=null,i.zoomChanged=function(o){return i.updateZoomButtonsState()},i.minZoomChanged=function(o){return i.updateZoomButtonsState()},i.maxZoomChanged=function(o){return i.updateZoomButtonsState()},i.options=(new sH).merge(e),i}return cH(t,n),t.prototype.onAdd=function(e){this.container=this.buildContainer(e,this.options.style,"Zoom Control"),this.container.style.flexDirection="column",this.zoomInButton=this.constructZoomInButton(e),this.zoomOutButton=this.constructZoomOutButton(e);var i=At("Zoom In"),o=At("Zoom Out");return this.container.appendChild(this.zoomInButton),this.container.appendChild(i),this.container.appendChild(this.zoomOutButton),this.container.appendChild(o),ut(i,this.zoomInButton),ut(o,this.zoomOutButton),e.events.add("zoom",this.zoomChanged),e.events.add("minzoomchanged",this.minZoomChanged),e.events.add("maxzoomchanged",this.maxZoomChanged),this.map=e,this.container},t.prototype.onRemove=function(){n.prototype.onRemove.call(this),this.map&&(this.map.events.remove("zoom",this.zoomChanged),this.map.events.remove("minzoomchanged",this.minZoomChanged),this.map.events.remove("maxzoomchanged",this.maxZoomChanged),this.map=null),this.container&&(this.container.remove(),this.container=null,this.zoomInButton=null,this.zoomOutButton=null)},t.prototype.updateZoomButtonsState=function(){var e=this.map.getCamera().zoom>=this.map._getMap().getMaxZoom(),i=es.getSouth(this.map.getCamera().bounds)<=-$A&&es.getNorth(this.map.getCamera().bounds)>=$A;i=this.map.getCamera().zoom<=this.map._getMap().getMinZoom()||i,this.zoomInButton&&this.zoomInButton.disabled!=e&&(this.zoomInButton.disabled=e,this.zoomInButton.setAttribute("aria-label",e?"Zoom In disabled":"Zoom In")),this.zoomOutButton&&this.zoomOutButton.disabled!=i&&(this.zoomOutButton.disabled=i,this.zoomOutButton.setAttribute("aria-label",e?"Zoom Out disabled":"Zoom Out"))},t.prototype.constructZoomInButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("zoom-in"),o.setAttribute("aria-label","Zoom In"),o.setAttribute("alt","Zoom In"),o.setAttribute("type","button"),o.addEventListener("click",function(){var s;e.setCamera({maxBounds:null==(s=e._getMap().getMaxBounds())?void 0:s.toArray().flat(),zoom:e.getCamera().zoom+i.options.zoomDelta,duration:t.ZOOM_DURATION_MS,type:"ease"},!0)}),o},t.prototype.constructZoomOutButton=function(e){var i=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("zoom-out"),o.setAttribute("aria-label","Zoom Out"),o.setAttribute("alt","Zoom Out"),o.setAttribute("type","button"),o.addEventListener("click",function(){var s;e.setCamera({maxBounds:null==(s=e._getMap().getMaxBounds())?void 0:s.toArray().flat(),zoom:e.getCamera().zoom-i.options.zoomDelta,duration:t.ZOOM_DURATION_MS,type:"ease"},!0)}),o},t.ZOOM_DURATION_MS=200,t}(ko),vR=Object.freeze({__proto__:null,CompassControl:ao,ControlBase:ko,PitchControl:wc,ScaleControl:Ma,StyleControl:pL,TrafficControl:W2,TrafficLegendControl:gL,ZoomControl:lH}),n4=F3,uc=T(function Op(n,t){return n4(n,5,t="function"==typeof t?t:void 0)}),t$=function(){function n(t){var e=this;this.attach=function(i){e.map!==i&&(e.map&&e.detachFromCurrentMap(),e.map=i,e.map.indicators._getCollectionDiv().appendChild(e.element),e.map.indicators.add(e))},this.remove=function(){e.detachFromCurrentMap(),e.element.remove()},this.getElement=function(){return e.element},this.detachFromCurrentMap=function(){e.map&&(e.map.indicators.remove(e),delete e.map)},this.element=document.createElement("div"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","option"),null!=t&&t.setSize&&this.element.setAttribute("aria-setsize",t.setSize.toString()),null!=t&&t.positionInSet&&this.element.setAttribute("aria-posinset",t.positionInSet.toString()),this.element.setAttribute("aria-label","data point"),this.element.classList.add(n.Css.hidden)}return n.Css={hidden:"hidden-accessible-element"},n}(),CR=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.buffer=128,e.maxZoom=18,e.cluster=!1,e.clusterRadius=50,e.clusterMaxZoom=void 0,e.clusterProperties=void 0,e.lineMetrics=!1,e.tolerance=.375,e.clusterMinPoints=2,e.generateId=!1,e.promoteId=void 0,e.filter=void 0,e}return CR(t,n),t}(_t),hH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zl=function(n){function t(e){var i=n.call(this)||this;return i.id=e||Ae(),i}return hH(t,n),t.prototype.getId=function(){return this.id},t.prototype._setMap=function(e,i){var o;void 0===i&&(i=!0),null==e||void 0===e?(o=this.map,delete this.map,i&&(this._invokeEvent("sourceremoved",this),o)&&o.events.invoke("sourceremoved",this)):(this.map=e,i&&(this._invokeEvent("sourceadded",this),this.map.events.invoke("sourceadded",this)))},t}(Ai),pH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hS=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lf=function(n){function t(e,i){return(e=n.call(this,e)||this).requestId=void 0,e.options=(new bR).merge(Yl(i)),e.shapes=[],e.shapesMap=new pr,e}return pH(t,n),t.prototype.add=function(e,i){this._addNoUpdate(e,i),this._updateSource()},t.prototype.clear=function(){this._clearNoUpdate(),this._updateSource()},t.prototype.dispose=function(){this.options=null,this.shapes=null,this.shapesMap=null,this.map=null},t.prototype.getClusterExpansionZoom=function(e){var i=this;return new Promise(function(o,s){var f;i.map?(f=i.map._getMap().getSource(i.getId()))&&"geojson"===f.type&&f.getClusterExpansionZoom(e).then(function(v){"number"==typeof v&&o(v)}).catch(function(v){v&&s(v)}):s("The DataSource hasn't been added to a map.")})},t.prototype.getClusterChildren=function(e){var i=this;return new Promise(function(o,s){var f;i.map?(f=i.map._getMap().getSource(i.getId()))&&"geojson"===f.type&&f.getClusterChildren(e).then(function(v){v&&o(i.map.sources._mapFeaturesToShapes(v,!1,i))}).catch(function(v){v&&s(v)}):s("The DataSource hasn't been added to a map.")})},t.prototype.getClusterLeaves=function(e,i,o){var s=this;return new Promise(function(f,v){var I;s.map?(I=s.map._getMap().getSource(s.getId()))&&"geojson"===I.type&&I.getClusterLeaves(e,i,o).then(function(D){D&&f(s.map.sources._mapFeaturesToShapes(D,!1,s))}).catch(function(D){D&&v(D)}):v("The DataSource hasn't been added to a map.")})},t.prototype.getOptions=function(){return Yl(this.options)},t.prototype.getShapes=function(){return Array.from(this.shapes)},t.prototype.importDataFromUrl=function(e){var i=this;return fetch(e,{method:"GET",mode:"cors"}).then(function(o){if(o.ok)return o.json();throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText))}).then(function(o){i.add(o)})},t.prototype.getShapeById=function(e){return this.shapes[this.shapesMap.get(e)]||null},t.prototype.remove=function(s){var i,o;s=Array.isArray(s)?s:[s];try{for(var f=hS(s),v=f.next();!v.done;v=f.next()){var I=v.value;"number"==typeof I?this._removeByIndex(I):this._removeById(I)}}catch(D){i={error:D}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}this._updateSource()},t.prototype.removeById=function(s){var i,o;s=Array.isArray(s)?s:[s];try{for(var f=hS(s),v=f.next();!v.done;v=f.next())this._removeById(v.value)}catch(D){i={error:D}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}this._updateSource()},t.prototype.setOptions=function(e){e=(new bR).merge(this.options,Yl(e)),Qh(this.options,e)||(this._invokeEvent("datasourceupdated",this),this.options=e,this.map&&this.map._rebuildStyle())},t.prototype.setShapes=function(e){this._clearNoUpdate(),this.add(e)},t.prototype.toJson=function(){return new Qo(this.shapes.map(function(e){return e.toJson()}))},t.prototype._toJson=function(){return new Qo(this.shapes.map(function(e){return e._toJson()}))},t.prototype._buildSource=function(){var e={type:"geojson",data:this._toJson(),maxzoom:this.options.maxZoom,cluster:this.options.cluster,clusterRadius:this.options.clusterRadius,tolerance:this.options.tolerance,lineMetrics:this.options.lineMetrics,clusterProperties:this.options.clusterProperties,buffer:this.options.buffer,clusterMinPoints:this.options.clusterMinPoints,generateId:this.options.generateId,promoteId:this.options.promoteId,filter:this.options.filter};return"number"==typeof this.options.clusterMaxZoom&&(e.clusterMaxZoom=this.options.clusterMaxZoom),e},t.prototype._isDeepEqual=function(e){var i;return this.constructor===e.constructor&&(i=this._buildSource(),e=e._buildSource(),i.type===e.type)&&i.maxzoom===e.maxzoom&&i.cluster===e.cluster&&i.clusterRadius===e.clusterRadius&&i.tolerance===e.tolerance&&i.lineMetrics===e.lineMetrics&&JSON.stringify(i.clusterProperties)===JSON.stringify(e.clusterProperties)&&i.buffer===e.buffer&&i.clusterMinPoints===e.clusterMinPoints&&i.generateId===e.generateId&&i.promoteId===e.promoteId&&i.filter===e.filter},t.prototype._addNoUpdate=function(e,i){var o;e instanceof Bl?(this._addToSources(e,i),o=[e]):Array.isArray(e)?(o=e.map(function(s){return s instanceof Bl?s:new Bl(s)}),this._addToSources(o,i)):"FeatureCollection"===e.type?(o=e.features.map(function(s){return new Bl(s)}),this._addToSources(o,i)):"GeometryCollection"===e.type?(o=e.geometries.map(function(s){return new Bl(s)}),this._addToSources(o,i)):(e=new Bl(e),this._addToSources(e,i),o=[e]),this._invokeEvent("dataadded",o)},t.prototype._clearNoUpdate=function(){var e=this.shapes;this.shapes=[],this.shapesMap=new pr,e&&0<e.length&&this._invokeEvent("dataremoved",e)},t.prototype._updateSource=function(){var e=this;void 0===this.requestId&&(this.requestId=requestAnimationFrame(function(){e._updateMboxSource(),e.requestId=void 0}))},t.prototype._addToSources=function(e,i){var o,s,f,v;if(e=Array.isArray(e)?e:[e],"number"!=typeof i)try{for(var I=hS(e),D=I.next();!D.done;D=I.next()){var k=D.value;this.shapes.push(k),this.shapesMap.set(k.getId(),this.shapes.length-1)}}catch(Ve){o={error:Ve}}finally{try{D&&!D.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}else for(var X=e.length-1;0<=X;X--)this.shapes.splice(i,0,e[X]),this._updateShapesMap(i);try{for(var fe=hS(e),Se=fe.next();!Se.done;Se=fe.next())(k=Se.value)._setDataSource(this)}catch(Ve){f={error:Ve}}finally{try{Se&&!Se.done&&(v=fe.return)&&v.call(fe)}finally{if(f)throw f.error}}},t.prototype._removeById=function(i){i=i instanceof Bl?i.getId():"string"==typeof i||"number"==typeof i?i:i.id;var o=this.shapes[this.shapesMap.get(i)];o&&(o._setDataSource(null),this.shapes.splice(this.shapesMap.get(i),1),this._updateShapesMap(this.shapesMap.get(i)),this.shapesMap.delete(i),this._invokeEvent("dataremoved",[o]))},t.prototype._removeByIndex=function(e){var i;if(e>=this.shapes.length)throw new Error("The specified remove index '".concat(e,"' ")+"is greater than the maximum possible index '".concat(this.shapes.length-1,"'"));this.shapesMap.delete((i=this.shapes[e]).getId()),i._setDataSource(null),this.shapes.splice(e,1),this._updateShapesMap(e),this._invokeEvent("dataremoved",[i])},t.prototype._updateShapesMap=function(e){for(var i=e;i<this.shapes.length;i++)this.shapesMap.set(this.shapes[i].getId(),i)},t.prototype._updateMboxSource=function(){var e;this.map&&this.map._getMap()&&(e=this.map._getMap().getSource(this.getId()))&&"geojson"===e.type&&e.setData(this._toJson())},t}(zl),fH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tI=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.bounds=void 0,e.minZoom=0,e.maxZoom=22,e.isTMS=!1,e.tiles=void 0,e.url=void 0,e}return fH(t,n),t}(_t),gH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),r4=function(n){function t(e,i){return(e=n.call(this,e)||this).options=(new tI).merge(Yl(i)),e}return gH(t,n),t.prototype.getOptions=function(){return Yl(this.options)},t.prototype.getShape=function(e,i){return this.map._getMap().querySourceFeatures(this.getId(),{sourceLayer:e,filter:i})},t.prototype._buildSource=function(){var e={type:"vector"};return this.options.bounds&&(e.bounds=this.options.bounds),this.options.tiles?(e.tiles=this.options.tiles,e.minzoom=this.options.minZoom,e.maxzoom=this.options.maxZoom):this.options.url&&(e.url=this.options.url),this.options.isTMS&&(e.scheme="tms"),e},t.prototype._isDeepEqual=function(e){var i,o;return this.constructor===e.constructor&&(i=this._buildSource(),o=e._buildSource(),i.type===o.type)&&i.url===o.url&&(void 0===i.tiles&&void 0===o.tiles||i.tiles&&o.tiles&&i.tiles.length===o.tiles.length&&i.tiles.every(function(s,f){return s===o.tiles[f]}))&&i.minzoom===o.minzoom&&i.maxzoom===o.maxzoom&&i.bounds===o.bounds&&i.attribution===o.attribution&&i.promoteId===o.promoteId&&i.scheme===o.scheme},t}(zl),mH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),i4=function(n){function t(e,i,o){return(e=n.call(this,e)||this).source=i,e}return mH(t,n),t.prototype._isDeepEqual=function(e){var i;return this.constructor===e.constructor&&(i=this.source).type===(e=e.source).type&&i.canvas===e.canvas&&JSON.stringify(i.coordinates)===JSON.stringify(e.coordinates)&&i.animate===e.animate},t.prototype._buildSource=function(){return this.source},t}(zl),_H=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sg=function(n){function t(e,i,o){return(e=n.call(this,e)||this).source=i,e}return _H(t,n),t.prototype._isDeepEqual=function(e){return this.constructor===e.constructor&&this.source.type===(e=e.source).type},t.prototype._buildSource=function(){return this.source},t}(zl),ER=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),SR=function(n){function t(e,i,o){return(e=n.call(this,e)||this).source=i,e}return ER(t,n),t.prototype._isDeepEqual=function(e){var i;return this.constructor===e.constructor&&(i=this.source).type===(e=e.source).type&&JSON.stringify(i.coordinates)===JSON.stringify(e.coordinates)&&i.url===e.url},t.prototype._buildSource=function(){return this.source},t}(zl),yH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wR=function(n){function t(e,i,o){return(e=n.call(this,e)||this).source=i,e}return yH(t,n),t.prototype._isDeepEqual=function(e){var i;return this.constructor===e.constructor&&(i=this.source).type===(e=e.source).type&&JSON.stringify(i.coordinates)===JSON.stringify(e.coordinates)&&i.urls===e.urls},t.prototype._buildSource=function(){return this.source},t}(zl),o4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nI=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.tileSize=512,e}return o4(t,n),t}(tI),TR=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),n$=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.encoding=void 0,e}return TR(t,n),t}(nI),a4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),AR=window&&window.__assign||function(){return(AR=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},s4=function(n){function t(e,i){return(e=n.call(this,e)||this).options=(new n$).merge(Yl(i)),e}return a4(t,n),t.prototype.getOptions=function(){return Yl(this.options)},t.prototype._buildSource=function(){return AR({type:"raster-dem",bounds:this.options.bounds,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,tileSize:this.options.tileSize,encoding:this.options.encoding},this.options.tiles?{tiles:this.options.tiles}:{url:this.options.url})},t.prototype._isDeepEqual=function(e){return this.constructor===e.constructor&&(e=e.getOptions(),this.options.url===e.url)&&this.options.tiles===e.tiles&&this.options.bounds===e.bounds&&this.options.minZoom===e.minZoom&&this.options.maxZoom===e.maxZoom&&this.options.tileSize===e.tileSize&&this.options.encoding===e.encoding},t}(zl),pS=Object.freeze({__proto__:null,CanvasSource:i4,DataSource:lf,ElevationTileSource:s4,ImageSource:SR,Source:zl,UnknownSource:Sg,VectorTileSource:r4,VideoSource:wR}),IR=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vc=function(n){function t(e){var i=n.call(this)||this;return i.id=e||Ae(),i}return IR(t,n),t.prototype.getId=function(){return this.id},t.prototype.getMap=function(){return this.map||null},t.prototype.onAdd=function(e){this.map=e,this._invokeEvent("layeradded",this),this.map.events.invoke("layeradded",this)},t.prototype.onRemove=function(){var e=this.map;delete this.map,this._invokeEvent("layerremoved",this),e&&e.events.invoke("layerremoved",this)},t._isMBoxEvent=function(e){return!this.LayerEvents.hasOwnProperty(e)},t.prototype._updateBaseProperties=function(e,i){this._updateFilter(e.filter,i.filter),this._updateZoomRange(e.minZoom,i.minZoom,e.maxZoom,i.maxZoom),this._updateLayoutProperty("visibility",e.visible,i.visible,e.visible?"visible":"none")},t.prototype._updateFilter=function(e,i){Qh(e,i)||this.map._getMap().setFilter(this.id,e)},t.prototype._updatePaintProperty=function(e,i,o,s){Qh(i,o)||this.map._getMap().setPaintProperty(this.id,e,s||i)},t.prototype._updateLayoutProperty=function(e,i,o,s){Qh(i,o)||this.map._getMap().setLayoutProperty(this.id,e,s||i)},t.prototype._updateZoomRange=function(e,i,o,s){e===i&&s===o||this.map._getMap().setLayerZoomRange(this.id,e,o)},t.LayerEvents={layeradded:void 0,layerremoved:void 0,focusin:void 0,focusout:void 0},t}(Ai),vH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wy=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.filter=void 0,e.minZoom=0,e.maxZoom=24,e.visible=!0,e}return vH(t,n),t._cloneCustomizer=function(e){if(e instanceof zl)return e},t}(_t),MR=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.color="#1A73AA",e.blur=0,e.opacity=1,e.strokeColor="#FFFFFF",e.strokeOpacity=1,e.strokeWidth=2,e.pitchAlignment="viewport",e.radius=8,e.createIndicators=!1,e.accessibilityIdKey=void 0,e}return MR(t,n),t}(wy),EC=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),c4=window&&window.__awaiter||function(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})},r0=window&&window.__generator||function(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s=f&&k[f=0]?0:s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},i0=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},rI=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},o0=function(n){function t(e,i,o){var s=n.call(this,i)||this;return s.accessibleIndicator=[],s._setAccessibleIndicator=function(){return c4(s,void 0,void 0,function(){var f,v,I,D,k,X,fe=this;return r0(this,function(Se){return this.accessibleIndicator.forEach(function(Ve){return Ve.remove()}),this.accessibleIndicator=[],f=this.map.layers.getRenderedShapes(this.map.getCamera().bounds,this),v=this.options.accessibilityIdKey||(this._getDataSource()?Bl._shapeIdPropName:void 0),I=function(Ve,Je){var lt=Ve[Je],mt=lt instanceof Bl?lt.toJson():lt,_n=new t$({positionInSet:Je+1,setSize:Ve.length}),Yn=_n.getElement(),sr=i0(fe.map.positionsToPixels([fe.getFirstCoordinate(mt.geometry.coordinates)]),1)[0];return Yn.addEventListener("focusin",function(ri){fe.accessibleIndicator.filter(function(tn){return tn!==_n}).forEach(function(tn){return tn.remove()}),0<=Je-1&&D(_n,I(Ve,Je-1)),Je+1<Ve.length&&X(I(Ve,Je+1)),2<=Je&&Je==Ve.length-1&&k(I(Ve,0)),0==Je&&2<=Ve.length&&X(I(Ve,Ve.length-1)),void 0!==v&&fe.map._getMap().setPaintProperty(fe.id,"circle-stroke-color",["case",["==",["get",v],mt.properties[v]],"#000000",fe.options.strokeColor]),fe._invokeEvent("focusin",ri={target:Yn,type:"focusin",map:fe.map,shape:lt,originalEvent:ri,pixel:sr})}),Yn.addEventListener("focusout",function(ri){void 0!==v&&fe.map._getMap().setPaintProperty(fe.id,"circle-stroke-color",["case",["==",["get",v],mt.properties[v]],fe.options.strokeColor,fe.options.strokeColor]),fe._invokeEvent("focusout",ri={target:Yn,type:"focusout",map:fe.map,shape:lt,originalEvent:ri,pixel:sr})}),fe.accessibleIndicator.push(_n),_n},D=function(Ve,Je){Je.attach(fe.map),Je=Je.getElement(),(Ve=Ve.getElement()).parentElement.insertBefore(Je,Ve)},k=function(Je){Je.attach(fe.map);var lt=(Je=Je.getElement()).parentElement;lt.insertBefore(Je,lt.firstElementChild)},X=function(Ve){Ve.attach(fe.map)},0<f.length&&X(I(f,0)),1<f.length&&X(I(f,f.length-1)),[2]})})},s.options=(new fS).merge(uc(o,fS._cloneCustomizer)),s.options.source=e||s.options.source,s}return EC(t,n),t.prototype.getOptions=function(){return uc(this.options,fS._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(e){if(e=(new fS).merge(this.options,uc(e,fS._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("circle-blur",e.blur,this.options.blur),this._updatePaintProperty("circle-color",e.color,this.options.color),this._updatePaintProperty("circle-opacity",e.opacity,this.options.opacity),this._updatePaintProperty("circle-radius",e.radius,this.options.radius),this._updatePaintProperty("circle-stroke-color",e.strokeColor,this.options.strokeColor),this._updatePaintProperty("circle-stroke-opacity",e.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("circle-stroke-width",e.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("circle-pitch-alignment",e.pitchAlignment,this.options.pitchAlignment)}this.options=e},t.prototype.onAdd=function(e){var i,o,s=this;n.prototype.onAdd.call(this,e),this.options.createIndicators&&(e.events.addOnce("idle",this._setAccessibleIndicator),e.events.add("moveend",this._setAccessibleIndicator),(i=this._getDataSource())?e.events.add("dataadded",i,function(){e.events.addOnce("idle",s._setAccessibleIndicator)}):(o="string"==typeof this.options.source?this.options.source:this.options.source.getId(),e.events.add("sourcedata",function(f){(null==(f=f.source)?void 0:f.getId())===o&&e._getMap().isSourceLoaded(o)&&(f=s._getSourceDataEventCacheKey())!==s.sourceDataEventCacheKey&&(s._setAccessibleIndicator(),s.sourceDataEventCacheKey=f)})))},t.prototype.onRemove=function(){var e;this.options.createIndicators&&(this.map.events.remove("idle",this._setAccessibleIndicator),this.map.events.remove("moveend",this._setAccessibleIndicator),(e=this._getDataSource())?this.map.events.remove("dataadded",e,this._setAccessibleIndicator):this.map.events.remove("sourcedata",this._setAccessibleIndicator)),n.prototype.onRemove.call(this)},t.prototype._getSourceDataEventCacheKey=function(){var e;if(this.map)return e=this.map.getServiceOptions().mapConfiguration,rI(rI([],i0(this.map.getCamera().bounds),!1),[this.map.getCamera().zoom,this.map.getCamera().pitch,this.map.getStyle().style,e instanceof Object?e.id:e],!1).join(",")},t.prototype._getDataSource=function(){var e="string"==typeof this.options.source?this.map.sources.getById(this.options.source):this.options.source;if(e instanceof lf)return e},t.prototype._buildLayers=function(){var e={id:this.id,type:"circle",source:this.options.source instanceof zl?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"circle-color":this.options.color,"circle-blur":this.options.blur,"circle-opacity":this.options.opacity,"circle-stroke-color":this.options.strokeColor,"circle-stroke-opacity":this.options.strokeOpacity,"circle-stroke-width":this.options.strokeWidth,"circle-pitch-alignment":this.options.pitchAlignment,"circle-radius":this.options.radius},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),this.options.sourceLayer&&(e["source-layer"]=this.options.sourceLayer),[e]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var e=new Set;return e.add(this.options.source instanceof zl?this.options.source.getId():this.options.source),e},t.prototype.getFirstCoordinate=function(e){return Array.isArray(e[0])?this.getFirstCoordinate(e[0]):e},t}(vc),l4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),SC=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.color=["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0, 255,0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],e.intensity=1,e.opacity=1,e.radius=30,e.weight=1,e}return l4(t,n),t._cloneCustomizer=function(e){if(e instanceof zl)return e},t}(wy),CH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bH=function(n){function t(e,i,o){return(i=n.call(this,i)||this).options=(new SC).merge(uc(o,SC._cloneCustomizer)),i.options.source=e||i.options.source,i}return CH(t,n),t.prototype.getOptions=function(){return uc(this.options,SC._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(e){if(e=(new SC).merge(this.options,uc(e,SC._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("heatmap-color",e.color,this.options.color),this._updatePaintProperty("heatmap-intensity",e.intensity,this.options.intensity),this._updatePaintProperty("heatmap-opacity",e.opacity,this.options.opacity),this._updatePaintProperty("heatmap-radius",e.radius,this.options.radius),this._updatePaintProperty("heatmap-weight",e.weight,this.options.weight)}this.options=e},t.prototype._buildLayers=function(){var e={id:this.id,type:"heatmap",source:this.options.source instanceof zl?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"heatmap-color":this.options.color,"heatmap-intensity":this.options.intensity,"heatmap-opacity":this.options.opacity,"heatmap-radius":this.options.radius,"heatmap-weight":this.options.weight},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),this.options.sourceLayer&&(e["source-layer"]=this.options.sourceLayer),[e]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var e=new Set;return e.add(this.options.source instanceof zl?this.options.source.getId():this.options.source),e},t}(vc),EH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),u4=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.contrast=0,e.fadeDuration=300,e.hueRotation=0,e.maxBrightness=1,e.minBrightness=0,e.opacity=1,e.saturation=0,e}return EH(t,n),t}(wy),SH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.url=void 0,e.coordinates=void 0,e}return SH(t,n),t._cloneCustomizer=function(e){if(e instanceof zl)return e},t}(u4),d4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mS=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return d4(t,n),t.prototype._getSourceIds=function(){var e=new Set;return e.add(this._getSourceId()),e},t.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e)},t}(vc),iI=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wH=function(n){function t(e,i){return(i=n.call(this,i)||this).isLoading=!1,i.options=(new gS).merge(uc(e,gS._cloneCustomizer)),i.img=new Image,i.reloadImage(),i}return iI(t,n),t.prototype.getOptions=function(){return uc(this.options,gS._cloneCustomizer)},t.prototype.setOptions=function(f){var i,o=(new gS).merge(this.options,uc(f,gS._cloneCustomizer)),s="string"==typeof f.url&&f.url!==this.getOptions().url;f=void 0!==f.coordinates&&f.coordinates!==this.getOptions().coordinates,this.map&&(this._updateBaseProperties(o,this.options),this._updatePaintProperty("raster-contrast",o.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",o.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",o.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",o.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",o.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",o.saturation,this.options.saturation),i=this.map._getMap().getSource(this._getSourceId()))&&i.updateImage(o),this.options=o,s?this.reloadImage():f&&this.updateTransform()},t.prototype.getPositions=function(e){return this.transform.then(function(i){return i.toTarget(e)})},t.prototype.getPixels=function(e){return this.transform.then(function(i){return i.toSource(e)})},t.getCoordinatesFromRefPoints=function(e,i,o,s){return new eI(o,s).toTarget([[0,0],[e,0],[e,i],[0,i]])},t.getCoordinatesFromEdges=function(e,i,o,s,f){return"number"!=typeof f&&(f=0),i=[Math.min(s,o),i,Math.max(s,o),e],s=es.getCenter(i),KA([es.getNorthWest(i),es.getNorthEast(i),es.getSouthEast(i),es.getSouthWest(i)],s,f)},t.prototype._buildLayers=function(){var e={id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-opacity":this.options.opacity,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-min":this.options.minBrightness,"raster-brightness-max":this.options.maxBrightness,"raster-saturation":this.options.saturation,"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),[e]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._buildSource=function(){return{type:"image",url:this.options.url,coordinates:this.options.coordinates}},t.prototype._getSourceId=function(){return"".concat(this.getId(),"-ImageSource")},t.prototype.reloadImage=function(){var e=this;this.options.url&&(this.transform=new Promise(function(i,o){e.img.onload=function(){i(new eI([[0,0],[e.img.width,0],[e.img.width,e.img.height],[0,e.img.height]],e.options.coordinates)),e.isLoading=!1},e.img.onerror=e.img.onabort=function(){o("Failed to load image")},e.isLoading=!0,e.img.src=e.options.url}))},t.prototype.updateTransform=function(){this.isLoading||(this.transform=Promise.resolve(new eI([[0,0],[this.img.width,0],[this.img.width,this.img.height],[0,this.img.height]],this.options.coordinates)))},t.prototype._getSourceWrapper=function(){var e=this._getSourceId(),i=this._buildSource();return new SR(e,i)},t}(mS),h4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_S=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.lineCap="round",e.lineJoin="round",e.blur=0,e.strokeColor="#1E90FF",e.strokeDashArray=void 0,e.strokeGradient=void 0,e.offset=0,e.strokeOpacity=1,e.translate=new id(0,0),e.translateAnchor="map",e.strokeWidth=2,e}return h4(t,n),t}(wy),p4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ty=window&&window.__assign||function(){return(Ty=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},OR=function(n){function t(e,i,o){return(i=n.call(this,i)||this).options=(new _S).merge(uc(o,_S._cloneCustomizer)),i.options.source=e||i.options.source,i}return p4(t,n),t.prototype.getOptions=function(){return uc(this.options,_S._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(e){if(e=(new _S).merge(this.options,uc(e,_S._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("line-blur",e.blur,this.options.blur),this._updateLayoutProperty("line-cap",e.lineCap,this.options.lineCap),this._updateLayoutProperty("line-join",e.lineJoin,this.options.lineJoin),this._updatePaintProperty("line-offset",e.offset,this.options.offset),this._updatePaintProperty("line-color",e.strokeColor,this.options.strokeColor),this._updatePaintProperty("line-dasharray",e.strokeDashArray,this.options.strokeDashArray),this._updatePaintProperty("line-gradient",e.strokeGradient,this.options.strokeGradient),this._updatePaintProperty("line-opacity",e.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("line-width",e.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("line-translate",e.translate,this.options.translate),this._updatePaintProperty("line-translate-anchor",e.translateAnchor,this.options.translateAnchor)}this.options=e},t.prototype._buildLayers=function(){return[Ty(Ty(Ty(Ty({id:this.id,type:"line"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof zl?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none","line-cap":this.options.lineCap,"line-join":this.options.lineJoin},paint:Ty(Ty(Ty({"line-blur":this.options.blur,"line-color":this.options.strokeColor},this.options.strokeDashArray?{"line-dasharray":this.options.strokeDashArray}:{}),this.options.strokeGradient?{"line-gradient":this.options.strokeGradient}:{}),{"line-offset":this.options.offset,"line-opacity":this.options.strokeOpacity,"line-translate":this.options.translate,"line-translate-anchor":this.options.translateAnchor,"line-width":this.options.strokeWidth})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var e=new Set;return e.add(this.options.source instanceof zl?this.options.source.getId():this.options.source),e},t}(vc),f4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),a0=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.base=0,e.fillColor="#1E90FF",e.height=0,e.fillOpacity=1,e.fillPattern=void 0,e.translate=new id(0,0),e.translateAnchor="map",e.verticalGradient=!0,e}return f4(t,n),t}(wy),g4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wg=window&&window.__assign||function(){return(wg=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},wC=function(n){function t(e,i,o){return(i=n.call(this,i)||this).options=(new a0).merge(uc(o,a0._cloneCustomizer)),i.options.source=e||i.options.source,i}return g4(t,n),t.prototype.getOptions=function(){return uc(this.options,a0._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(e){if(e=(new a0).merge(this.options,uc(e,a0._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("fill-extrusion-base",e.base,this.options.base),this._updatePaintProperty("fill-extrusion-color",e.fillColor,this.options.fillColor),this._updatePaintProperty("fill-extrusion-height",e.height,this.options.height),this._updatePaintProperty("fill-extrusion-opacity",e.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-extrusion-pattern",e.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-extrusion-translate",e.translate,this.options.translate),this._updatePaintProperty("fill-extrusion-translate-anchor",e.translateAnchor,this.options.translateAnchor),this._updatePaintProperty("fill-extrusion-vertical-gradient",e.verticalGradient,this.options.verticalGradient)}this.options=e},t.prototype._buildLayers=function(){return[wg(wg(wg(wg({id:this.id,type:"fill-extrusion"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof zl?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:wg(wg({"fill-extrusion-base":this.options.base,"fill-extrusion-height":this.options.height,"fill-extrusion-opacity":this.options.fillOpacity},this.options.fillPattern?{"fill-extrusion-pattern":this.options.fillPattern}:{"fill-extrusion-color":this.options.fillColor}),{"fill-extrusion-translate":this.options.translate,"fill-extrusion-translate-anchor":this.options.translateAnchor,"fill-extrusion-vertical-gradient":this.options.verticalGradient})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var e=new Set;return e.add(this.options.source instanceof zl?this.options.source.getId():this.options.source),e},t}(vc),yS=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.fillColor="#1E90FF",e.fillOpacity=.5,e.fillPattern=void 0,e.fillAntialias=!0,e}return yS(t,n),t}(wy),TH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),PR=function(n){function t(e,i,o){return(i=n.call(this,i)||this).options=(new vS).merge(uc(o,vS._cloneCustomizer)),i.options.source=e||i.options.source,i}return TH(t,n),t.prototype.getOptions=function(){return uc(this.options,vS._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(e){if(e=(new vS).merge(this.options,uc(e,vS._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("fill-color",e.fillColor,this.options.fillColor),this._updatePaintProperty("fill-opacity",e.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-pattern",e.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-antialias",e.fillAntialias,this.options.fillAntialias)}this.options=e},t.prototype._buildLayers=function(){var e={id:this.id,type:"fill",source:this.options.source instanceof zl?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"fill-opacity":this.options.fillOpacity,"fill-antialias":this.options.fillAntialias},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),this.options.sourceLayer&&(e["source-layer"]=this.options.sourceLayer),this.options.fillPattern?e.paint["fill-pattern"]=this.options.fillPattern:e.paint["fill-color"]=this.options.fillColor,[e]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var e=new Set;return e.add(this.options.source instanceof zl?this.options.source.getId():this.options.source),e},t}(vc),oI=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),RR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.allowOverlap=!1,e.anchor="bottom",e.ignorePlacement=!1,e.image="marker-blue",e.offset=new id(0,0),e.optional=!1,e.padding=2,e.pitchAlignment="auto",e.rotation=0,e.rotationAlignment="auto",e.size=1,e.opacity=1,e}return oI(t,n),t}(_t),AH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),r$=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.allowOverlap=!1,e.anchor="center",e.textField=void 0,e.font=["StandardFont-Regular"],e.ignorePlacement=!1,e.justify="center",e.offset=new id(0,0),e.optional=!1,e.padding=2,e.pitchAlignment="auto",e.radialOffset=void 0,e.rotation=0,e.rotationAlignment="auto",e.variableAnchor=void 0,e.size=16,e.color="#000000",e.haloBlur=0,e.haloColor="rgba(0,0,0,0)",e.haloWidth=0,e.opacity=1,e}return AH(t,n),t}(_t),i$=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),CS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.iconOptions=new RR,e.textOptions=new r$,e.placement="point",e.sortKey=void 0,e.zOrder="auto",e.lineSpacing=250,e}return i$(t,n),t}(wy),IH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),TC=window&&window.__assign||function(){return(TC=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},aI=function(n){function t(e,i,o){return(i=n.call(this,i)||this).options=(new CS).merge(uc(o,CS._cloneCustomizer)),i.options.source=e||i.options.source,i}return IH(t,n),t.prototype.getOptions=function(){return uc(this.options,CS._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(e){if(e=(new CS).merge(this.options,uc(e,CS._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);var i=this.options,o=e.iconOptions,s=i.iconOptions,f=e.textOptions,v=i.textOptions;this._updateBaseProperties(e,i),this._updateLayoutProperty("symbol-spacing",e.lineSpacing,i.lineSpacing),this._updateLayoutProperty("symbol-placement",e.placement,i.placement),this._updateLayoutProperty("symbol-sort-key",e.sortKey,i.sortKey),this._updateLayoutProperty("symbol-z-order",e.zOrder,i.zOrder),this._updateLayoutProperty("icon-allow-overlap",o.allowOverlap,s.allowOverlap),this._updateLayoutProperty("icon-anchor",o.anchor,s.anchor),this._updateLayoutProperty("icon-ignore-placement",o.ignorePlacement,s.ignorePlacement),this._updateLayoutProperty("icon-image",o.image,s.image),this._updateLayoutProperty("icon-offset",o.offset,s.offset),this._updatePaintProperty("icon-opacity",o.opacity,s.opacity),this._updateLayoutProperty("icon-optional",o.optional,s.optional),this._updateLayoutProperty("icon-padding",o.padding,s.padding),this._updateLayoutProperty("icon-pitch-alignment",o.pitchAlignment,s.pitchAlignment),this._updateLayoutProperty("icon-rotate",o.rotation,s.rotation),this._updateLayoutProperty("icon-rotation-alignment",o.rotationAlignment,s.rotationAlignment),this._updateLayoutProperty("icon-size",o.size,s.size),this._updateLayoutProperty("text-allow-overlap",f.allowOverlap,v.allowOverlap),this._updateLayoutProperty("text-anchor",f.anchor,v.anchor),this._updatePaintProperty("text-color",f.color,v.color),this._updateLayoutProperty("text-font",f.font,v.font),this._updateLayoutProperty("text-ignore-placement",f.ignorePlacement,v.ignorePlacement),this._updateLayoutProperty("text-justify",f.justify,v.justify),this._updatePaintProperty("text-halo-blur",f.haloBlur,v.haloBlur),this._updatePaintProperty("text-halo-color",f.haloColor,v.haloColor),this._updatePaintProperty("text-halo-width",f.haloWidth,v.haloWidth),this._updateLayoutProperty("text-offset",f.offset,v.offset),this._updatePaintProperty("text-opacity",f.opacity,v.opacity),this._updateLayoutProperty("text-optional",f.optional,v.optional),this._updateLayoutProperty("text-padding",f.padding,v.padding),this._updateLayoutProperty("text-pitch-alignment",f.pitchAlignment,v.pitchAlignment),this._updateLayoutProperty("text-radial-offset",f.radialOffset,v.radialOffset),this._updateLayoutProperty("text-rotate",f.rotation,v.rotation),this._updateLayoutProperty("text-rotation-alignment",f.rotationAlignment,v.rotationAlignment),this._updateLayoutProperty("text-size",f.size,v.size),this._updateLayoutProperty("text-variable-anchor",f.variableAnchor,v.variableAnchor),this._updateLayoutProperty("text-field",f.textField,v.textField)}this.options=e},t.prototype._buildLayers=function(){var e=TC(TC(TC(TC({id:this.id,type:"symbol"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof zl?this.options.source.getId():this.options.source,layout:TC(TC({visibility:this.options.visible?"visible":"none","symbol-placement":this.options.placement,"symbol-spacing":this.options.lineSpacing,"symbol-z-order":this.options.zOrder,"text-allow-overlap":this.options.textOptions.allowOverlap,"text-anchor":this.options.textOptions.anchor},this.options.textOptions.textField&&{"text-field":this.options.textOptions.textField}),{"text-font":this.options.textOptions.font,"text-ignore-placement":this.options.textOptions.ignorePlacement,"text-justify":this.options.textOptions.justify,"text-offset":this.options.textOptions.offset,"text-optional":this.options.textOptions.optional,"text-padding":this.options.textOptions.padding,"text-pitch-alignment":this.options.textOptions.pitchAlignment,"text-rotate":this.options.textOptions.rotation,"text-rotation-alignment":this.options.textOptions.rotationAlignment,"text-size":this.options.textOptions.size,"icon-allow-overlap":this.options.iconOptions.allowOverlap,"icon-anchor":this.options.iconOptions.anchor,"icon-ignore-placement":this.options.iconOptions.ignorePlacement,"icon-image":this.options.iconOptions.image,"icon-offset":this.options.iconOptions.offset,"icon-optional":this.options.iconOptions.optional,"icon-padding":this.options.iconOptions.padding,"icon-pitch-alignment":this.options.iconOptions.pitchAlignment,"icon-rotate":this.options.iconOptions.rotation,"icon-rotation-alignment":this.options.iconOptions.rotationAlignment,"icon-size":this.options.iconOptions.size}),paint:{"text-color":this.options.textOptions.color,"text-halo-blur":this.options.textOptions.haloBlur,"text-halo-color":this.options.textOptions.haloColor,"text-halo-width":this.options.textOptions.haloWidth,"text-opacity":this.options.textOptions.opacity,"icon-opacity":this.options.iconOptions.opacity}}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom});return void 0!==this.options.sortKey&&(e.layout["symbol-sort-key"]=this.options.sortKey),void 0!==this.options.textOptions.radialOffset&&(e.layout["text-radial-offset"]=this.options.textOptions.radialOffset),void 0!==this.options.textOptions.variableAnchor&&(e.layout["text-variable-anchor"]=this.options.textOptions.variableAnchor),[e]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var e=new Set;return e.add(this.options.source instanceof zl?this.options.source.getId():this.options.source),e},t}(vc),o$=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bS=window&&window.__assign||function(){return(bS=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},m4=function(n){function t(e,i,o){return(e=n.call(this,e)||this).source=e._modifySource(i,o),e}return o$(t,n),t.prototype._buildSource=function(){return this.source},t.prototype._isDeepEqual=function(e){var i,o,s,f;return this.constructor===e.constructor&&(e=(f=this.source).type===(i=e.source).type&&f.url===i.url&&(void 0===f.tiles&&void 0===i.tiles||f.tiles&&i.tiles&&f.tiles.length===i.tiles.length&&f.tiles.every(function(v,I){return v===i.tiles[I]}))&&f.minzoom===i.minzoom&&f.maxzoom===i.maxzoom&&f.bounds===i.bounds&&f.attribution===i.attribution,o="raster"!==f.type||"raster"===f.type&&f.type===i.type&&f.tileSize===i.tileSize&&f.scheme===i.scheme,s="raster-dem"!==f.type||"raster-dem"===f.type&&f.type===i.type&&f.tileSize===i.tileSize&&f.encoding===i.encoding,f="vector"!==f.type||"vector"===f.type&&f.type===i.type&&f.promoteId===i.promoteId&&f.scheme===i.scheme,e)&&o&&s&&f},t.prototype._modifySource=function(e,i){if("raster"!==e.type&&"raster-dem"!==e.type&&"vector"!==e.type||!e.tiles){if("raster"!==e.type&&"raster-dem"!==e.type&&"vector"!==e.type||!e.url)throw new Error("Source definition must define a TileJSON 'url' or a 'tiles' array.");e.url="string"==typeof e.url?e.url:new vt({domain:"{{azMapsDomain}}",path:e.url.path,queryParams:bS(bS({},i),e.url.queryParams)}).toString()}else{var o=e.tiles.map(function(s){return"string"==typeof s?s:new vt({domain:"{{azMapsDomain}}",path:s.path,queryParams:bS(bS({},i),s.queryParams)}).toString()});e.tiles=o}return e},t}(zl),MH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),s0=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.bounds=[-180,-85.0511,180,85.0511],e.minSourceZoom=0,e.maxSourceZoom=22,e.tileSize=512,e.isTMS=!1,e.subdomains=void 0,e.tileUrl=void 0,e}return MH(t,n),t}(u4),ES=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),AC=window&&window.__assign||function(){return(AC=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},sI=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SS=function(n){function t(e,i){return i=n.call(this,i)||this,e&&i.setOptions(e),i}return ES(t,n),t.prototype.getOptions=function(){return uc(this.options,s0._cloneCustomizer)},t.prototype.setOptions=function(e){if(e=(new s0).merge(this.options,uc(e,s0._cloneCustomizer)),this.map){if(!Qh(e.bounds,this.options.bounds)||e.isTMS!==this.options.isTMS||e.maxSourceZoom!==this.options.maxSourceZoom||e.minSourceZoom!==this.options.minSourceZoom||!Qh(e.subdomains,this.options.subdomains)||e.tileSize!==this.options.tileSize||e.tileUrl!==this.options.tileUrl)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("raster-contrast",e.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",e.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",e.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",e.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",e.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",e.saturation,this.options.saturation)}this.options=e},t.prototype._setOptionsNoUpdate=function(e){this.options=(new s0).merge(this.options,uc(e,s0._cloneCustomizer))},t.prototype._buildLayers=function(){return[AC(AC({id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-max":this.options.maxBrightness,"raster-brightness-min":this.options.minBrightness,"raster-opacity":this.options.opacity,"raster-saturation":this.options.saturation}},this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._buildSource=function(){var e,i;if(this.options.tileUrl){if(-1===this.options.tileUrl.indexOf("{"))return{type:"raster",url:this.options.tileUrl};if(-1!==this.options.tileUrl.indexOf("{subdomain}")){if(!(this.options.subdomains&&0<this.options.subdomains.length))throw new Error("The {subdomain} placeholder was included in the tileUrl but no subdomains were specified");var o=[];try{for(var s=sI(this.options.subdomains),f=s.next();!f.done;f=s.next())o.push(this.options.tileUrl.replace(/{subdomain}/g,f.value))}catch(I){e={error:I}}finally{try{f&&!f.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}i=o}else i=[this.options.tileUrl]}return AC({type:"raster",bounds:this.options.bounds,maxzoom:this.options.maxSourceZoom,minzoom:this.options.minSourceZoom,scheme:this.options.isTMS?"tms":"xyz",tileSize:this.options.tileSize},i&&{tiles:i})},t.prototype._getSourceId=function(){return"".concat(this.getId(),"-RasterSource")},t.prototype._getSourceWrapper=function(){var e=this._getSourceId(),i=this._buildSource();return new m4(e,{name:e,tiles:i.tiles,type:i.type,url:i.url})},t}(mS),wS=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IC=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.renderer=void 0,e}return wS(t,n),t}(wy),OH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),MC=function(n){function t(e,i){var o=n.call(this,e)||this;return o._onStyleChange=function(){var s,f;o.map._getMap().getLayer(o.id)||(s=o.map,f=null==(f=o.map.layers._getUserLayers().find(function(v){return v.layer.getId()==o.id}))?void 0:f.before,s.layers.remove(o),s.layers.add(o,f))},o.options=(new IC).merge(uc(i,IC._cloneCustomizer)),o.source=new lf,o}return OH(t,n),t.prototype.getOptions=function(){return uc(this.options,IC._cloneCustomizer)},t.prototype.setOptions=function(e){e=(new IC).merge(this.options,uc(e,IC._cloneCustomizer)),this.map&&this.map.triggerRepaint(),this.options=e},t.prototype.onAdd=function(e){var i,o;n.prototype.onAdd.call(this,e),this.map.events.add("stylechanged",this._onStyleChange),this.options.renderer&&this.glContext&&null!=(o=(i=this.options.renderer).onAdd)&&o.call(i,e,this.glContext)},t.prototype.onRemove=function(){var e,i;this.options.renderer&&this.glContext&&null!=(i=(e=this.options.renderer).onRemove)&&i.call(e,this.map,this.glContext),this.map.events.remove("stylechanged",this._onStyleChange),this.glContext=null,n.prototype.onRemove.call(this)},t.prototype._buildLayers=function(){var e=this;if(this.options.renderer)return[{id:this.id,type:"custom",renderingMode:this.options.renderer.renderingMode,onAdd:function(i,o){e.glContext=o},onRemove:function(i,o){},prerender:function(i,o){var s,f;e._shouldRender()&&null!=(f=(s=e.options.renderer).prerender)&&f.call(s,i,o)},render:function(i,o){e._shouldRender()&&e.options.renderer.render(i,o)}}];throw new Error("Cannot build the WebGL layer because renderer was not set.")},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){return(new Set).add(this.source.getId())},t.prototype._shouldRender=function(){var e;return!!this.map&&(e=this.map.getCamera().zoom,this.options.visible)&&this.options.minZoom<=e&&this.options.maxZoom>e},t}(vc),xR=Object.freeze({__proto__:null,BubbleLayer:o0,HeatMapLayer:bH,ImageLayer:wH,Layer:vc,LineLayer:OR,PolygonExtrusionLayer:wC,PolygonLayer:PR,SymbolLayer:aI,TileLayer:SS,WebGLLayer:MC}),TS=function(){function n(){}return n.convertHtmlString=function(t){var e;return"string"==typeof t?((e=document.createElement("div")).innerHTML=t,e):t},n.parseWithFilter=function(t,e,i,o){var s=this;if(void 0===e&&(e=function(I){return!0}),void 0===i&&(i=function(I){return I}),void 0===o&&(o=function(){return document.createElement("div")}),"string"==typeof t){if(0==(v=(new DOMParser).parseFromString(t,"text/html").body).children.length)return i(v.innerHTML);var f,v=1==v.children.length&&1==v.childNodes.length?v.children[0]:(f=o(),Array.from(v.childNodes).map(function(I){return f.append(I)}),f)}else v=t;return Array.from(v.children).forEach(function(I){return s.parseWithFilter(I,e,i)}),e(v)?i(v):(v.parentNode&&v.parentNode.removeChild(v),null)},n}(),_4=Vd,y4=sh,OC=T(function PH(n){return _4(n)&&1===n.nodeType&&!y4(n)}),RH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),AS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.anchor="none",e.draggable=!1,e.closeButton=!0,e.content=document.createElement("span"),e.fillColor="#FFFFFF",e.pixelOffset=new id(0,0),e.position=new ad(0,0),e.showPointer=!0,e}return RH(t,n),t._cloneCustomizer=function(e){if(OC(e))return e},t}(_t),xH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),c0=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},PC=function(n){function t(e){var i=n.call(this)||this;return i.attach=function(o){i.map!==o&&(i.map&&i.remove(),i.map=o,i.marker=i._createMarker(i.options),i.marker.addTo(i.map._getMap()),i.map.popups._getCollectionDiv().appendChild(i.containerDiv),i.map.popups.add(i))},i.open=function(o){if(!o&&!i.map)throw new Error("Must specify a map to open on or attach to a map in advance");i.attach(o||i.map),i.containerDiv.classList.remove(t.Css.hidden),i.map.events.add("move",i._onMove),i._onMove(),i._invokeEvent("open",{target:i,type:"open"})},i.close=function(){i.map&&i.map.events.remove("move",i._onMove),i.containerDiv.classList.add(t.Css.hidden),i._invokeEvent("close",{target:i,type:"close"})},i.remove=function(){i.map&&(i.marker.remove(),i.containerDiv.classList.remove(i.autoAnchor||i.options.anchor),i.map.events.remove("move",i._onMove),i.map.popups.remove(i),delete i.map,delete i.marker,delete i.autoAnchor)},i.isOpen=function(){return i.map&&!i.containerDiv.classList.contains(t.Css.hidden)},i._onMove=function(){var o=i._getAutoAnchor(i.map,i.options);o!==i.autoAnchor&&(i._replaceMarker(i.map,i.options,o),i.map.events.add("move",i._onMove))},i._onDown=function(o){i.map.popups._addDraggedPopup(i);var s=c0(i.map.positionsToPixels([i.options.position]),1)[0];"mousedown"===o.type?i.dragOffset=[s[0]-o.clientX,s[1]-o.clientY]:"touchstart"===o.type&&(i.dragOffset=[s[0]-o.touches[0].clientX,s[1]-o.touches[0].clientY])},i._onDragStart=function(o){o.preventDefault()},i.options=(new AS).merge(uc(e,AS._cloneCustomizer)),i.containerDiv=i._createContainerDiv(i.options),i.contentDiv=i._createContentDiv(i.options),i.containerDiv.appendChild(i.contentDiv),i.options.showPointer&&(i.arrowDiv=i._createArrowDiv(),i.containerDiv.appendChild(i.arrowDiv)),i.options.closeButton&&(i.closeBtn=i._createCloseButton(),i.contentDiv.appendChild(i.closeBtn),e=At("close"),i.contentDiv.appendChild(e),ut(e,i.closeBtn,!0)),i}return xH(t,n),t.prototype.setPopupOptions=function(e){this.setOptions(e)},t.prototype.setOptions=function(o){var i;(o=(new AS).merge(this.options,uc(o,AS._cloneCustomizer))).content!==this.options.content?(this.htmlContent.remove(),this.htmlContent=this._createHtmlContent(o),this.contentDiv.prepend(this.htmlContent)):o.draggable!==this.options.draggable&&this._setDraggable(this.htmlContent,o.draggable),o.closeButton&&!this.closeBtn?(this.closeBtn=this._createCloseButton(),this.contentDiv.appendChild(this.closeBtn),i=At("close"),this.contentDiv.appendChild(i),ut(i,this.closeBtn,!0)):!o.closeButton&&this.closeBtn&&(this.contentDiv.removeChild(this.closeBtn),delete this.closeBtn),o.showPointer&&!this.arrowDiv?(this.arrowDiv=this._createArrowDiv(),this.containerDiv.appendChild(this.arrowDiv)):!o.showPointer&&this.arrowDiv&&(this.containerDiv.removeChild(this.arrowDiv),delete this.arrowDiv),o.fillColor!==this.options.fillColor&&(this.containerDiv.style.borderColor=o.fillColor,this.contentDiv.style.backgroundColor=o.fillColor),this.marker&&(o.anchor!==this.options.anchor?"none"===this.options.anchor?(this.autoAnchor!==o.anchor&&this._replaceMarker(this.map,o),this.map.events.remove("move",this._onMove),delete this.autoAnchor):(this._replaceMarker(this.map,o),"none"===o.anchor&&this.map.events.add("move",this._onMove)):(Qh(o.position,this.options.position)||this.marker.setLngLat(o.position),Qh(o.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(o.pixelOffset))),this.options=o},t.prototype.getPopupOptions=function(){return this.getOptions()},t.prototype.getOptions=function(){return uc(this.options,AS._cloneCustomizer)},t.prototype.getPopupContainer=function(){return this.containerDiv},t.prototype._dragToPixel=function(e){this.dragging||(this.dragging=!0,this.contentDiv.style.pointerEvents="none",this._invokeEvent("dragstart",{type:"dragstart",target:this})),e=c0(this.map.pixelsToPositions([e=[e[0]+this.dragOffset[0],e[1]+this.dragOffset[1]]]),1)[0],this.options.position=e,this.marker.setLngLat(this.options.position),this._invokeEvent("drag",{type:"drag",target:this})},t.prototype._onUp=function(){this.dragging&&(this.contentDiv.style.pointerEvents="",this._invokeEvent("dragend",{type:"dragend",target:this}),"none"===this.options.anchor)&&this._onMove(),delete this.dragOffset,delete this.dragging},t.prototype._createContainerDiv=function(e){var i=this,o=document.createElement("div"),s=(o.classList.add(t.Css.container),o.classList.add(t.Css.hidden),o.style.borderColor=e.fillColor,o.setAttribute("role","dialog"),o.setAttribute("aria-label","Map Information Window"),!1);return o.addEventListener("keydown",function(f){"Tab"!==f.key&&"Escape"!==f.key&&"Esc"!==f.key||(s=!0)}),o.addEventListener("keyup",function(f){"Tab"!==f.key&&"Escape"!==f.key&&"Esc"!==f.key||(s=!1)}),o.addEventListener("focusin",function(f){i.map&&!i.isOpen()&&(i.open(i.map),f.target instanceof HTMLElement)&&f.target.focus()}),o.addEventListener("focusout",function(f){s&&f.relatedTarget instanceof Node&&!o.contains(f.relatedTarget)&&(s=!1,i.isOpen())&&i.close()}),o},t.prototype._createContentDiv=function(e){var i=document.createElement("div");return i.classList.add(t.Css.content),i.style.backgroundColor=e.fillColor,i.setAttribute("tabindex","0"),this.htmlContent=this._createHtmlContent(e),i.appendChild(this.htmlContent),i},t.prototype._createArrowDiv=function(){var e=document.createElement("div");return e.classList.add(t.Css.arrow),e},t.prototype._createCloseButton=function(){var e=document.createElement("button");return e.addEventListener("click",this.close),e.classList.add(t.Css.close),e.setAttribute("aria-label","close"),e.setAttribute("tabindex","0"),e.innerHTML="&times;",e},t.prototype._createHtmlContent=function(e){var i=TS.convertHtmlString(e.content);return e.draggable&&this._setDraggable(i,e.draggable),i},t.prototype._createMarker=function(e,s){var o=this.marker?this.marker.getLngLat():e.position;return("none"===e.anchor?(this.autoAnchor=s||"bottom",this.containerDiv.classList.add(this.autoAnchor),new M.Marker({anchor:this.autoAnchor,element:this.containerDiv,offset:e.pixelOffset})):(this.containerDiv.classList.add(e.anchor),new M.Marker({anchor:e.anchor,element:this.containerDiv,offset:e.pixelOffset}))).setLngLat(o)},t.prototype._getAutoAnchor=function(e,i){var o,s,f=this.containerDiv.offsetWidth,v=this.containerDiv.offsetHeight,I=[];return(s=this.marker?(o=(s=e._getMap().project(this.marker.getLngLat())).x,s.y):(s=c0(e.positionsToPixels([i.position]),1),o=(i=c0(s[0],2))[0],i[1]))<v?I.push("top"):s>e.getCanvas().offsetHeight-v&&I.push("bottom"),o<f/2?I.push("left"):o>e.getCanvas().offsetWidth-f/2&&I.push("right"),0<I.length?I.join("-"):"bottom"},t.prototype._replaceMarker=function(e,i,o){var s=this.containerDiv.nextElementSibling;this.marker.remove(),this.containerDiv.classList.remove(this.autoAnchor||this.options.anchor),this.marker=this._createMarker(i,o),this.marker.addTo(e._getMap()),e.popups._getCollectionDiv().insertBefore(this.containerDiv,s||null)},t.prototype._setDraggable=function(e,i){i?(e.addEventListener("mousedown",this._onDown),e.addEventListener("touchstart",this._onDown),e.addEventListener("dragstart",this._onDragStart)):(e.removeEventListener("mousedown",this._onDown),e.removeEventListener("touchstart",this._onDown),e.removeEventListener("dragstart",this._onDragStart))},t.Css={arrow:"popup-arrow",close:"popup-close",container:"popup-container",content:"popup-content-container",hidden:"hidden-accessible-element"},t}(Ai),v4=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),RC=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.anchor="bottom",e.color="#1A73AA",e.draggable=!1,e.htmlContent='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.5 36.5" id="marker_'.concat(Ae(),'" width="24.5" height="36.5" display="block"><path d="M12.25.25a12.2543,12.2543,0,0,0-12,12.4937c0,6.4436,6.4879,12.1093,11.059,22.5641.5493,1.2563,1.3327,1.2563,1.882,0C17.7621,24.8529,24.25,19.1857,24.25,12.7437A12.2543,12.2543,0,0,0,12.25.25Z"   fill="{color}" stroke="{secondaryColor}" stroke-width="0.5"/><text style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: white;" text-anchor="middle" x="12" y="18">{text}</text></svg>'),e.pixelOffset=new id(0,0),e.position=new ad(0,0),e.popup=void 0,e.secondaryColor="white",e.text=void 0,e.visible=!0,e}return v4(t,n),t._cloneCustomizer=function(e){if(e instanceof PC||OC(e))return e},t}(_t),NH=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IS=function(n){function t(e){var i=n.call(this)||this;return i._onDrag=function(){var o=i.marker.getLngLat().wrap();i.options.position=new ad(o.lng,o.lat),i._invokeEvent("drag",{type:"drag",target:i})},i._onDragStart=function(){i._invokeEvent("dragstart",{type:"dragstart",target:i})},i._onDragEnd=function(){i._invokeEvent("dragend",{type:"dragend",target:i})},i._bubbleElementEvent=function(o){i._invokeEvent(o.type,{type:o.type,target:i})},i._onEleDragStart=function(o){o.preventDefault()},i.options=(new RC).merge(uc(e,RC._cloneCustomizer)),i._buildMarker(i.options),i}return NH(t,n),t.prototype.getOptions=function(){return uc(this.options,RC._cloneCustomizer)},t.prototype.getElement=function(){return this.marker.getElement()},t.prototype.setOptions=function(e){e=(new RC).merge(this.options,uc(e,RC._cloneCustomizer)),Qh(e.htmlContent,this.options.htmlContent)&&e.anchor===this.options.anchor?("string"!=typeof e.htmlContent||e.color===this.options.color&&e.text===this.options.text&&e.secondaryColor===this.options.secondaryColor||(this.element.innerHTML=this._getSubbedHtmlString(e)||""),e.draggable!==this.options.draggable&&(this._setDraggable(e.draggable),this.marker.setDraggable(e.draggable)),Qh(e.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(e.pixelOffset),Qh(e.position,this.options.position)||this.marker.setLngLat(e.position),e.visible!==this.options.visible&&(e.visible?this.element.classList.remove(t.hiddenClass):this.element.classList.add(t.hiddenClass))):(this.marker.remove(),this._buildMarker(e),this.map&&(this.marker.addTo(this.map._getMap()),this._getCollectionContainer().appendChild(this.element))),this.options=e},t.prototype.togglePopup=function(){if(this.options.popup)if(this.options.popup.isOpen())this.options.popup.close();else{if(!this.map)throw new Error("The marker must be added to a map before calling togglePopup().");this.options.popup.setOptions({position:this.options.position}),this.options.popup.open(this.map)}},t.prototype._addToMap=function(e,i){this.map&&this.map!==e&&this._removeFromMap(),i&&(this.options.position=Yl(i),this.marker.setLngLat(this.options.position)),this.map!==e&&(this.map=e,this.marker.addTo(e._getMap()),this._getCollectionContainer().appendChild(this.element))},t.prototype._removeFromMap=function(){this.map&&(this.marker.remove(),delete this.map)},t.prototype._getId=function(){if(this.element)return("string"==typeof this.options.htmlContent?this.element.firstChild:this.element).id},t.prototype._buildMarker=function(e){var i;"string"==typeof e.htmlContent?(i=this._getSubbedHtmlString(e)||"",this.element=TS.convertHtmlString(i)):this.element=e.htmlContent,this.element.classList.add(t.containerClass),e.draggable&&this._setDraggable(!0),e.visible||this.element.classList.add(t.hiddenClass),this.marker=new M.Marker({element:this.element,offset:e.pixelOffset,draggable:e.draggable,anchor:e.anchor}).setLngLat(e.position),this.marker.on("drag",this._onDrag),this.marker.on("dragstart",this._onDragStart),this.marker.on("dragend",this._onDragEnd),this.element.addEventListener("click",this._bubbleElementEvent),this.element.addEventListener("dblclick",this._bubbleElementEvent),this.element.addEventListener("contextmenu",this._bubbleElementEvent),this.element.addEventListener("keydown",this._bubbleElementEvent),this.element.addEventListener("keypress",this._bubbleElementEvent),this.element.addEventListener("keyup",this._bubbleElementEvent),this.element.addEventListener("mousedown",this._bubbleElementEvent),this.element.addEventListener("mouseenter",this._bubbleElementEvent),this.element.addEventListener("mouseleave",this._bubbleElementEvent),this.element.addEventListener("mousemove",this._bubbleElementEvent),this.element.addEventListener("mouseout",this._bubbleElementEvent),this.element.addEventListener("mouseover",this._bubbleElementEvent),this.element.addEventListener("mouseup",this._bubbleElementEvent)},t.prototype._getSubbedHtmlString=function(e){return"string"==typeof e.htmlContent?e.htmlContent.replace(/{color}/gi,e.color||"").replace(/{secondaryColor}/gi,e.secondaryColor||"").replace(/{text}/gi,e.text||""):null},t.prototype._getCollectionContainer=function(){var e=this.map.getCanvasContainer().querySelector(".".concat(t.collectionContainerClass));return e||((e=document.createElement("div")).classList.add(t.collectionContainerClass),this.map.getCanvasContainer().appendChild(e)),e},t.prototype._setDraggable=function(e){e?this.element.addEventListener("dragstart",this._onEleDragStart):this.element.removeEventListener("dragstart",this._onEleDragStart)},t.collectionContainerClass="marker-collection-container",t.hiddenClass="hidden-accessible-element",t.containerClass="marker-container",t}(Ai),DR=function(){function n(){}return n.getHighContrastMode=function(){return matchMedia("(-ms-high-contrast: white-on-black)").matches?"dark":matchMedia("(-ms-high-contrast: black-on-white)").matches?"light":matchMedia("(-ms-high-contrast: active)").matches?"dark":matchMedia("(inverted-colors: inverted)").matches?"invert":null},n}(),lh=void 0,Pp=null,kR="",cI="function",MS="object",f_="prototype",LR="__proto__",g_="undefined",l0="constructor",lI="Symbol",C4="_polyfill",xC="length",Ay="name",sd="call",b4="toString",Tg=Object,uI=Tg[f_],dI=String,u0=dI[f_],E4=Math,S4=Array,OS=S4[f_],fm=OS.slice;function uf(n,t){try{return{v:n.apply(this,t)}}catch(e){return{e}}}function hI(n){return function(t){return typeof t===n}}function w4(n){var t="[object "+n+"]";return function(e){return!(!e||function DH(n){return uI.toString.call(n)}(e)!==t)}}function Wl(n){return typeof n===g_||n===g_}function Xr(n){return n===Pp||Wl(n)}function pI(n){return!!n||n!==lh}var ha=hI("string"),Sa=hI(cI);function cd(n){return!(!n&&Xr(n)||!n||typeof n!==MS)}var ts=S4.isArray,HR=w4("Date"),NC=hI("number"),T4=hI("boolean"),Iy=w4("Error");function PS(n){return!!(n&&n.then&&Sa(n.then))}function fI(n){return!(!n||function FR(n,t){return(n=uf(n)).e?t:n.v}(function(){return!(n&&0+n)},!n))}var UR=Tg.getOwnPropertyDescriptor;function Hf(n,t){return!!n&&uI.hasOwnProperty[sd](n,t)}var My=Tg.hasOwn||function FH(n,t){return Hf(n,t)||!!UR(n,t)};function hs(n,t,e){if(n&&cd(n))for(var i in n)if(My(n,i)&&-1===t[sd](e||n,i,n[i]))break}function A4(n,t,e,i){var o={};return hs(n,function(s,f){o[s]=t?f:s,o[f]=e?f:s}),i(o)}function Rp(n){throw new Error(n)}function df(n){throw new TypeError(n)}var BR=Tg.freeze,zR=Tg.assign,m_=Tg.keys;function xp(n){return BR&&hs(n,function(t,e){(ts(e)||cd(e))&&BR(e)}),Uf(n)}var DC,Uf=BR||function HH(n){return n},Oy=Tg.getPrototypeOf||function I4(n){return n[LR]||Pp},P4=function M4(n){return A4(n,0,0,xp)}({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Xh=dI,UH="__tsUtils$gblCfg";function R4(){var n;return(n=(n=(n=typeof globalThis!==g_?globalThis:n)||typeof self===g_?n:self)||typeof window===g_?n:window)||typeof global===g_?n:global}function kC(){var n;return DC||(n=uf(R4).v||{},DC=n[UH]=n[UH]||{}),DC}var $R="[object Error]";function io(n,t){var e=kR,i=uI[b4][sd](n);i===$R&&(n={stack:Xh(n.stack),message:Xh(n.message),name:Xh(n.name)});try{e=(e=JSON.stringify(n,Pp,t?"number"==typeof t?t:4:lh))&&e.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||Xh(n)}catch(o){e=" - "+io(o,t)}return i+": "+e}var d0=RS;function RS(n,t,e){var i=t&&t[n];return function(o){var s,f=o&&o[n]||i;if(f||e)return s=arguments,(f||e).apply(o,f?fm[sd](s,1):s);df('"'+Xh(n)+'" not defined for '+io(o))}}var Py=E4.max,xS=d0("slice",u0),Bf=d0("substring",u0),zf=RS("substr",u0,function BH(n,t,e){return Xr(n)&&df("'polyStrSubstr called with invalid "+io(n)),e<0?kR:((t=t||0)<0&&(t=Py(t+n[xC],0)),Wl(e)?xS(n,t):xS(n,t,t+e))});function GR(n,t){return Bf(n,0,t)}var LC,NS,__="_urid";function x4(n){var t={description:Xh(n),toString:function(){return lI+"("+n+")"}};return t[C4]=!0,t}function gI(n){var t,e,i=function FC(){var n;return LC||(n=kC(),LC=n.gblSym=n.gblSym||{k:{},s:{}}),LC}();return My(i.k,n)||(t=x4(n),e=m_(i.s).length,t[__]=function(){return e+"_"+t[b4]()},i.k[n]=t,i.s[t[__]()]=Xh(n)),i.k[n]}var au,DS={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"},y_=Tg.defineProperty;function kc(n,t,e){return y_(n,t,function zH(n){var t,e={};return e[DS.c]=!0,e[DS.e]=!0,n.l&&(e.get=function(){return n.l.v},t=UR(n.l,"v"))&&t.set&&(e.set=function(i){n.l.v=i}),hs(n,function(i,o){e[DS[i]]=Wl(o)?e[DS[i]]:o}),e}(e))}function Ry(){au=kC()}function kS(n){var t={};return au||Ry(),t.b=au.lzy,y_(t,"v",{configurable:!0,get:function(){var e=n();return au.lzy||y_(t,"v",{value:e}),t.b=au.lzy,e}}),t}function D4(n,t){return kS(function(){var e=uf(n);return e.e?t:e.v})}function qR(n){return y_({toJSON:function(){return n}},"v",{value:n})}var LS,KR="window";function v_(n,t){var e;return function(){return au||Ry(),(e=e&&!au.lzy?e:qR(uf(n,t).v)).v}}function mI(n){return kS(function(){return uf($u,[n]).v||lh})}function jf(n){return au||Ry(),(LS=LS&&!1!==n&&!au.lzy?LS:qR(uf(R4).v||Pp)).v}function $u(n,t){return(t=LS&&!1!==t?LS.v:jf(t))&&t[n]?t[n]:n===KR?Np():Pp}function YR(){return!!Kd()}var Kd=v_($u,["document"]);function FS(){return!!Np()}var Zh,WR,QR,Np=v_($u,[KR]),$f=v_($u,["navigator"]),F4=v_($u,["history"]),XR=v_(function(){return!!uf(function(){return process&&(process.versions||{}).node}).v}),_I=v_(function(){return!!uf(function(){return self&&self instanceof WorkerGlobalScope}).v});function HS(){Zh&&Zh.b||(Zh=mI(lI),WR=D4(function(){return Zh.v?Zh.v.for:lh},lh))}function ex(n,t){var e=P4[n];return au||Ry(),Zh&&!au.lzy||HS(),Zh.v?Zh.v[e||n]:t?lh:function N4(e){return NS=NS||{},(e=P4[e])?NS[e]=NS[e]||x4(lI+"."+e):undefined}(n)}function US(n,t){return au||Ry(),Zh&&!au.lzy||HS(),Zh.v?Zh.v(n):t?Pp:x4(n)}function tx(n){return au||Ry(),WR&&Zh&&!au.lzy||HS(),(WR.v||gI)(n)}function nx(n){return!!n&&Sa(n.next)}function xy(n,t,e){return n.apply(t,e)}function h0(n,t){return!Wl(t)&&n&&(ts(t)?xy(n.push,n,t):nx(t)||function H4(n){return!function kH(n){return n===Pp||!pI(n)}(n)&&Sa(n[ex(3)])}(t)?function rx(n,t,e){if(n&&(nx(n)||(n=n[(QR=QR||qR(ex(3))).v]?n[QR.v]():null),nx(n))){var i=void 0,o=void 0;try{for(var s=0;!(o=n.next()).done&&-1!==t[sd](e||n,o.value,s,n);)s++}catch(f){i={e:f},n.throw&&(o=null,n.throw(i))}finally{try{o&&!o.done&&n.return&&n.return(o)}finally{if(i)throw i.e}}}}(t,function(e){n.push(e)}):n.push(t)),n}function lo(n,t,e){if(n)for(var i=n[xC]>>>0,o=0;o<i&&(!(o in n)||-1!==t[sd](e||n,n[o],o,n));o++);}var uh=d0("indexOf",OS),BS=d0("map",OS);function yI(n,t,e){return(n&&n.slice||fm).apply(n,fm[sd](arguments,1))}var U4,vI,B4=d0("reduce",OS),C_=Tg.create||function Ph(n){var t;return n?((t=typeof n)!==MS&&t!==cI&&df("Prototype must be an Object or function: "+io(n)),e[f_]=n,new e):{};function e(){}};function CI(n,t){return(Tg.setPrototypeOf||function(e,i){(U4=U4||kS(function(){var o={};return o[LR]=[],o instanceof Array})).v?e[LR]=i:hs(i,function(o,s){return e[o]=s})})(n,t)}function z4(n,t){t&&(n[Ay]=t)}function ix(n,t,e){var i=e||Error,o=i[f_][Ay],s=Error.captureStackTrace;return function c$(n,t,e){function i(){this.constructor=t,uf(kc,[this,Ay,{v:n,c:!0,e:!1}])}return uf(kc,[t,Ay,{v:n,c:!0,e:!1}]),(t=CI(t,e))[f_]=e===Pp?C_(e):(i[f_]=e[f_],new i),t}(n,function(){var f=arguments;try{uf(z4,[i,n]);var v,I=xy(i,this,fm[sd](f))||this;return I!==this&&(v=Oy(this))!==Oy(I)&&CI(I,v),s&&s(I,this[l0]),t&&t(I,f),I}finally{uf(z4,[i,o])}},i)}function Ag(){return(Date.now||ox)()}function ox(){return(new Date).getTime()}var bI,EI,ax,jH=function $4(n){return function(t){return Xr(t)&&df("strTrim called ["+io(t)+"]"),t&&t.replace?t.replace(n,kR):t}}(/^\s+|(?=\s)\s+$/g),Vu=RS("trim",u0,jH);function Dp(n){if(!n||typeof n!==MS)return!1;var t=!1;if(n!==(ax=ax||!FS()||Np())){EI||(EI=(bI=Function[f_][b4])[sd](Tg));try{var e=Oy(n);t=(t=!e)||(e=Hf(e,l0)?e[l0]:e)&&typeof e===cI&&bI[sd](e)===EI}catch{}}return t}function $H(n){return n.value&&Q4(n),!0}var V4=[function Y4(n){var t,e=n.value;return!!ts(e)&&((t=n.result=[]).length=e.length,n.copyTo(t,e),!0)},Q4,function GH(n){return n.type===cI},function W4(n){var t=n.value;return!!HR(t)&&(n.result=new Date(t.getTime()),!0)}];function sx(n,t,e,s){var o=e.handler,f=(s=e.path?s?e.path.concat(s):e.path:[],{handler:e.handler,src:e.src,path:s}),v=typeof t,I=!1,D=!1,k=(t&&v===MS?I=Dp(t):D=t===Pp||function LH(n){return NR=NR||["string","number","boolean",g_,"symbol","bigint"],n!==MS&&-1!==NR.indexOf(n)}(v),{type:v,isPrim:D,isPlain:I,value:t,result:t,path:s,origin:e.src,copy:function(X,fe){return sx(n,X,fe?f:e,fe)},copyTo:function(X,fe){return q4(n,X,fe,f)}});return k.isPrim?o&&o[sd](e,k)?k.result:t:function G4(n,t,e,i){var o;return lo(n,function(s){if(s.k===t)return o=s,-1}),o||(n.push(o={k:t,v:t}),i(o)),o.v}(n,t,0,function(X){kc(k,"result",{g:function(){return X.v},s:function(Ve){X.v=Ve}});for(var fe=0,Se=o;!(Se||(fe<V4.length?V4[fe++]:$H))[sd](e,k);)Se=Pp})}function q4(n,t,e,i){if(!Xr(e))for(var o in e)t[o]=sx(n,e[o],i,o);return t}function Q4(n){var t,e=n.value;return!(!e||!n.isPlain||(t=n.result={},n.copyTo(t,e),0))}function cx(n,t){return lo(t,function(e){!function VH(n,t,e){q4([],n,t,{handler:e,src:t,path:[]})}(n,e)}),n}function HC(n,t,e,i,o,s,f){return cx(function K4(n,t){return sx([],n,{handler:t,src:n})}(n)||{},fm[sd](arguments))}var SI,KH=function VR(n){return function(t){return t[n]}}(xC);function b_(){return au||Ry(),(SI=!SI||!SI.b&&au.lzy?mI("performance"):SI).v}var lx=d0("split",u0);function p0(n,t,e){var i;n&&t&&(i=(t=lx(t,".")).pop(),lo(t,function(o){Xr(n[o])&&(n[o]={}),n=n[o]}),n[i]=e)}var UC=RS("endsWith",u0,function YH(n,t,e){return ha(n)||df("'"+io(n)+"' is not a string"),t=ha(t)?t:Xh(t),e=!Wl(e)&&e<n[xC]?e:n[xC],Bf(n,e-t[xC],e)===t}),kp=d0("indexOf",u0),wI="ref",TI="unref",ux="hasRef",WH="enabled";function X4(n,t,e){var i=ts(t),o=i?t.length:0,s=(0<o?t[0]:i?lh:t)||setTimeout,f=(1<o?t[1]:lh)||clearTimeout,v=e[0],I=(e[0]=function(){I.dn(),xy(v,lh,fm[sd](arguments))},function QH(n,t,e){var i,o=!0,s=n?t(Pp):Pp;function f(){return o=!1,s&&s[TI]&&s[TI](),i}function v(){s&&e(s),s=Pp}function I(){return s=t(s),o||f(),i}return(i={cancel:v,refresh:I})[ux]=function(){return s&&s[ux]?s[ux]():o},i[wI]=function(){return o=!0,s&&s[wI]&&s[wI](),i},i[TI]=f,{h:i=y_(i,WH,{get:function(){return!!s},set:function(D){!D&&s&&v(),D&&!s&&I()}}),dn:function(){s=Pp}}}(n,function(D){if(D){if(D.refresh)return D.refresh(),D;xy(f,lh,[D])}return xy(s,lh,e)},function(D){xy(f,lh,[D])}));return I.h}function Lp(n,t){return X4(!0,lh,fm[sd](arguments))}var dx,b0,f0="toLowerCase",AI="blkVal",Ua="length",zS="rdOnly",BC="notify",II="warnToConsole",jS="throwInternal",E_="setDf",Ny="watch",Gu="logger",g0="apply",ml="push",zC="splice",px="hdlr",jC="cancel",$C="initialize",S_="identifier",gm="isInitialized",MI="getPlugin",fx="pollInternalLogs",w_="name",Vf="time",Rh="processNext",gx="getProcessTelContext",$S="getNotifyMgr",m0="addNotificationListener",_0="removeNotificationListener",VC="enabled",mx="stopPollingInternalLogs",mm="unload",OI="onComplete",_x="version",VS="loggingLevelConsole",y0="createNew",T_="teardown",GC="messageId",Dy="message",Jh="isAsync",Gf="diagLog",su="_doTeardown",Ig="update",hf="getNext",xh="setNextPlugin",v0="protocol",yx="userAgent",_m="split",GS="nodeType",ky="replace",vx="logInternalMessage",A_="type",Cx="handler",Ql="status",bx="itemsReceived",J4="getResponseHeader",Su="getAllResponseHeaders",C0="isChildEvt",Mg="data",I_="getCtx",Fp="setCtx",qC="complete",KC="urlString",Ex="sendPOST",qS="headers",M_="timeout",PI="setRequestHeader",RI="traceId",Sx="spanId",O_="traceFlags",e8="function",Tx="object",YC="undefined",ym="prototype",xI=Object,t8=xI[ym],KS=(jf(),jf(),"hasOwnProperty"),ep=zR||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])t8[KS].call(t,o)&&(n[o]=t[o]);return n},Hp=function(n,t){return(Hp=xI.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,i){e.__proto__=i}:function(e,i){for(var o in i)i[KS](o)&&(e[o]=i[o])}))(n,t)};function P_(n,t){function e(){this.constructor=n}typeof t!==e8&&null!==t&&df("Class extends value "+String(t)+" is not a constructor or null"),Hp(n,t),n[ym]=null===t?C_(t):(e[ym]=t[ym],new e)}function n8(n,t){for(var e=0,i=t.length,o=n.length;e<i;e++,o++)n[o]=t[e];return n}var WC="constructor",vm="prototype",YS="function",NI="_dynInstFuncs",r8="_isDynProxy",QC="_dynClass",WS="_dynInstChk",S0=WS,w0="_dfOpts",Ax="_unknown_",kI="__proto__",R_="_dyn"+kI,LI="__dynProto$Gbl",QS="_dynInstProto",XS="useBaseInst",FI="setInstFuncs",HI=Object,ZS=HI.getPrototypeOf,i8=HI.getOwnPropertyNames,T0=jf(),UI=T0[LI]||(T0[LI]={o:((b0={})[FI]=!0,b0[XS]=!0,b0),n:1e3});function BI(n){return n&&(n===HI[vm]||n===Array[vm])}function Ix(n){return BI(n)||n===Function[vm]}function A0(n){if(n){if(ZS)return ZS(n);var t=n[kI]||n[vm]||(n[WC]?n[WC][vm]:null),e=n[R_]||t;Hf(n,R_)||(delete n[QS],e=n[R_]=n[QS]||n[R_],n[QS]=t)}return e}function JS(n,t){var e=[];if(i8)e=i8(n);else for(var i in n)"string"==typeof i&&Hf(n,i)&&e.push(i);if(e&&0<e.length)for(var o=0;o<e.length;o++)t(e[o])}function zI(n,t,e){return t!==WC&&typeof n[t]===YS&&(e||Hf(n,t))&&t!==kI&&t!==vm}function jI(n){df("DynamicProto: "+n)}function $I(n,t){for(var e=n.length-1;0<=e;e--)if(n[e]===t)return!0;return!1}function VI(n,t){return Hf(n,vm)?n.name||t||Ax:((n||{})[WC]||{}).name||t||Ax}function Rl(f,t,D,i){Hf(f,vm)||jI("theClass is an invalid class definition.");var o=f[vm],s=(function s8(n,t){if(ZS){for(var e=[],i=A0(t);i&&!Ix(i)&&!$I(e,i);){if(i===n)return!0;e.push(i),i=A0(i)}return!1}return!0}(o,t)||jI("["+VI(f)+"] not in hierarchy of ["+VI(t)+"]"),null),v=!!(Hf(o,QC)?s=o[QC]:(s="_dynCls$"+VI(f,"_")+"$"+UI.n,UI.n++,o[QC]=s),f=Rl[w0])[XS],I=(v&&i&&void 0!==i[XS]&&(v=!!i[XS]),function XH(n){var t=C_(null);return JS(n,function(e){!t[e]&&zI(n,e,!1)&&(t[e]=n[e])}),t}(t));D(t,function Mx(n,t,e,i){function o(I,D,k){var X,fe=D[k];return fe[r8]&&i&&!1!==(X=I[NI]||{})[S0]&&(fe=(X[D[QC]]||{})[k]||fe),function(){return fe.apply(I,arguments)}}for(var s=C_(null),f=(JS(e,function(I){s[I]=o(t,e,I)}),A0(n)),v=[];f&&!Ix(f)&&!$I(v,f);)JS(f,function(I){!s[I]&&zI(f,I,!ZS)&&(s[I]=o(t,f,I))}),v.push(f),f=A0(f);return s}(o,t,I,v)),function a8(n,t,e,i,o){var s,f;BI(n)||BI(s=e[NI]=e[NI]||C_(null))||(f=s[t]=s[t]||C_(null),!1!==s[S0]&&(s[S0]=!!o),BI(f))||JS(e,function(v){function I(){return(function Ox(n,t,e,i){var o=null;if(n&&Hf(e,QC)){var s=n[NI]||C_(null);if((o=(s[e[QC]]||C_(null))[t])||jI("Missing ["+t+"] "+YS),!o[WS]&&!1!==s[S0]){for(var f=!Hf(n,t),v=A0(n),I=[];f&&v&&!Ix(v)&&!$I(I,v);){var D=v[t];if(D){f=D===i;break}I.push(v),v=A0(v)}try{f&&(n[t]=o),o[WS]=1}catch{s[S0]=!1}}}return o}(this,k,D,I)||function o8(n,t,e){var i=t[n];return typeof(i=i===e?A0(t)[n]:i)!==YS&&jI("["+n+"] is not a "+YS),i}(k,D,I)).apply(this,arguments)}var D,k;zI(e,v,!1)&&e[v]!==i[v]&&(f[v]=e[v],delete e[v],Hf(n,v)&&(!n[v]||n[v][r8])||(n[v]=(D=n,k=v,I[r8]=1,I)))})}(o,s,t,I,!1!==(D=(D=!!ZS&&!!f[FI])&&i?!!i[FI]:D))}function I0(n,t){return Px(n,function(e){return t?t({value:e,rejected:!1}):e},function(e){return t?t({rejected:!0,reason:e}):e})}function Px(n,t,e,i){var o=n;return PS(n)?(t||e)&&(o=n.then(t,e)):t&&(o=t(n)),i&&function c8(n,t){var e=n;t&&(PS(n)?e=n.finally?n.finally(t):n.then(function(i){return t(),i},function(i){throw t(),i}):t())}(o,i),o}Rl[w0]=UI.o;var GI,qI,Rx=["pending","resolving","resolved","rejected"],xx="dispatchEvent",ew="Promise",Nx="unhandledRejection",u8=Nx.toLowerCase(),d8=10;function Dx(n){return Sa(n)?n.toString():io(n)}function x_(n,t,e){function i(mt,_n){return Se=!0,Ve&&Ve.cancel(),Ve=null,n(function(Yn,sr){fe.push(function(){try{var ri=2===k?mt:_n,tn=Wl(ri)?I:Sa(ri)?ri(I):ri;PS(tn)?tn.then(Yn,sr):(ri||3!==k?Yn:sr)(tn)}catch(zn){sr(zn)}}),X&&s()},D)}function o(){return Rx[k]}function s(){var mt;0<fe.length&&(mt=fe.slice(),fe=[],Se=!0,t(mt),Ve&&Ve.cancel(),Ve=null)}function f(mt,_n){return function(Yn){k===_n&&(2===mt&&PS(Yn)?(k=1,Yn.then(f(2,1),f(3,1))):(k=mt,X=!0,I=Yn,s(),Se||3!==mt||(Ve=Ve||Lp(v,d8))))}}function v(){Se||(XR()?process.emit(Nx,I,Je):function l8(n,t,e,s){var o=Kd();s=(GI=GI||D4(function(){var f;return!!(f=o&&o.createEvent?o.createEvent("Event"):f)&&f.initEvent},null)).v?o.createEvent("Event"):s?new Event(t):{},e&&e(s),GI.v&&s.initEvent(t,!1,!0),s&&n[xx]?n[xx](s):(e=n["on"+t])?e(s):(n=$u("console"))&&(n.error||n.log)(t,io(s))}(Np()||jf(),u8,function(mt){return kc(mt,"promise",{g:function(){return Je}}),mt.reason=I,mt},!!qI.v))}var I,D=yI(arguments,3),k=0,X=!1,fe=[],Se=!1,Ve=null,Je=(qI=qI||mI(ew+"RejectionEvent"),{then:i,catch:function(mt){return i(void 0,mt)},finally:function(mt){var _n=mt,Yn=mt;return Sa(mt)&&(_n=function(sr){return mt&&mt(),sr},Yn=function(sr){throw mt&&mt(),sr}),i(_n,Yn)}}),lt=(y_(Je,"state",{get:o}),function ZR(){return!!function JR(){return au||Ry(),Zh&&!au.lzy||HS(),Zh.v}()}()&&(Je[ex(11)]="IPromise"),Je.toString=function(){return"IPromise "+o()+(X?" - "+Dx(I):"")},Sa(e)||df(ew+": executor is not a function - "+Dx(e)),f(3,0));try{e.call(Je,f(2,0),lt)}catch(mt){lt(mt)}return Je}var h8,Lx,ZH=function(n){lo(n,function(t){try{t()}catch{}})};function Fx(n,t){return x_(Fx,function p8(n){var t=NC(n)?n:0;return function(e){Lp(function(){ZH(e)},t)}}(t),n,t)}function tw(n,t){var e=(h8=h8||mI(ew)).v;if(!e)return Fx(n);Sa(n)||df(ew+": executor is not a function - "+io(n));var i=0;return e=new e(function(o,s){n(function(f){i=2,o(f)},function(f){i=3,s(f)})}),y_(e,"state",{get:function(){return Rx[i]}}),e}function Og(n,t){return(Lx=Lx||kS(function(){return tw})).v.call(this,n,t)}var N_,f8=function kx(n){return function(t){var e=yI(arguments,1);return n(function(i,o){try{var s=[],f=1;lo(t,function(v,I){v&&(f++,Px(v,function(D){s[I]=D,0==--f&&i(s)},o))}),0==--f&&i(s)}catch(v){o(v)}},e)}}(Og),tp=void 0,Bs="",qf="channels",cu="core",Ly="createPerfMgr",Fy="disabled",Pg="extensionConfig",Rg="extensions",np="processTelemetry",D_="priority",k_="eventsSent",M0="eventsDiscarded",XC="eventsSendRequest",L_="perfEvent",nw="offlineEventsStored",rw="offlineBatchSent",iw="offlineBatchDrop",ZC="getPerfMgr",ow="domain",aw="path",KI="Not dynamic - ",Cm=[k_,M0,XC,L_],YI=null;function JH(n,t){return function(){var e=arguments,i=Hy(t);i&&(i=i.listener)&&i[n]&&i[n][g0](i,e)}}function Hy(n){var t=YI;return(t=t||!0===n.disableDbgExt?t:YI||function Hx(){var n=$u("Microsoft");return YI=n?n.ApplicationInsights:YI}())?t.ChromeDbgExt:null}var sw,u$="location",g8="JSON",eU="crypto",m8="msCrypto",qu="msie",WI="trident/",_8="XMLHttpRequest",zx=null,jx=null,nU=!1,JC=null,QI=null;function O0(n,t){var e,i=!1;if(n){try{(i=t in n)||(e=n[ym])&&(i=t in e)}catch{}if(!i)try{i=!Wl((new n)[t])}catch{}}return i}function bm(n){return n&&nU&&(n=$u("__mockLocation"))?n:typeof location===Tx&&location?location:$u(u$)}function eb(){return!!(typeof JSON===Tx&&JSON||null!==$u(g8))}function xg(){return eb()?JSON||$u(g8):null}function cw(){var n=$f();return!n||n[yx]===jx&&null!==zx||(n=((jx=n[yx])||Bs)[f0](),zx=dh(n,qu)||dh(n,WI)),zx}function XI(n){var t=((n=(n=void 0===n?null:n)?n:(t=$f()||{})?(t.userAgent||Bs)[f0]():Bs)||Bs)[f0]();return dh(t,qu)?(n=Kd()||{},Math.max(parseInt(t[_m](qu)[1]),n.documentMode||0)):dh(t,WI)&&(n=parseInt(t[_m](WI)[1]))?n+4:null}function P0(n){return QI=null!==QI&&!1!==n?QI:function k4(){return!!$f()}()&&!!$f().sendBeacon}function pf(n){var t=!1;try{t=!!$u("fetch");var e=$u("Request");t&&n&&e&&(t=O0(e,"keepalive"))}catch{}return t}function lw(){var n=!1;try{n=!!$u(_8)}catch{}return n}var Vx="warnToConsole",sU={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},cU=((sw={})[0]=null,sw[1]="errorToConsole",sw[2]=Vx,sw[3]="debugToConsole",sw);function ZI(n){return n?'"'+n[ky](/\"/g,Bs)+'"':Bs}function R0(n,t){var e,i=function rU(){return typeof console!==YC?console:$u("console")}();i&&(e="log",i[n]&&(e=n),Sa(i[e]))&&i[e](t)}var uw=function(){function n(t,e,i,o){void 0===i&&(i=!1),this[GC]=t,this[Dy]=(i?"AI: ":"AI (Internal): ")+t,i=Bs,eb()&&(i=xg().stringify(o)),t=(e?" message:"+ZI(e):Bs)+(o?" props:"+ZI(i):Bs),this[Dy]+=t}return n.dataType="MessageData",n}();function Uy(n,t){return(n||{})[Gu]||new JI(t)}var JI=function(){function n(t){this.identifier="DiagnosticLogger",this.queue=[];var e,i,o,s,f,v=0,I={};Rl(n,this,function(D){function k(fe,Se){var Ve,Je;o<=v||(Je=!0,I[Ve="AITR_"+Se[GC]]?Je=!1:I[Ve]=!0,Je&&(fe<=i&&(D.queue[ml](Se),v++,X(1===fe?"error":"warn",Se)),v===o)&&(Je=new uw(23,Ve="Internal events throttle limit per PageView reached for this app.",!1),D.queue[ml](Je),1===fe?D.errorToConsole(Ve):D[II](Ve)))}function X(fe,Se){var Ve=Hy(t||{});Ve&&Ve[Gf]&&Ve[Gf](fe,Se)}f=xu(Yf(t||{},sU,D).cfg,function(fe){e=(fe=fe.cfg)[VS],i=fe.loggingLevelTelemetry,o=fe.maxMessageLimit,s=fe.enableDebug}),D.consoleLoggingLevel=function(){return e},D[jS]=function(fe,Se,Ve,Je,lt){if(Se=new uw(Se,Ve,lt=void 0!==lt&&lt,Je),s)throw io(Se);Ve=cU[fe]||Vx,Wl(Se[Dy])?X("throw"+(1===fe?"Critical":"Warning"),Se):(lt?!I[Je=+Se[GC]]&&fe<=e&&(D[Ve](Se[Dy]),I[Je]=!0):fe<=e&&D[Ve](Se[Dy]),k(fe,Se))},D.debugToConsole=function(fe){R0("debug",fe),X("warning",fe)},D[II]=function(fe){R0("warn",fe),X("warning",fe)},D.errorToConsole=function(fe){R0("error",fe),X("error",fe)},D.resetInternalMessageCount=function(){v=0,I={}},D[vx]=k,D[mm]=function(fe){f&&f.rm(),f=null}})}return n.__ieDyn=1,n}();function Gx(n){return n||new JI}function Di(n,t,e,i,o,s){void 0===s&&(s=!1),Gx(n)[jS](t,e,i,o,s)}function By(n,t){Gx(n)[II](t)}var C8=/-([a-z])/g,b8=/([^\w\d_$])/g,E8=/^(\d+[\w\d_$])/,S8=Object.getPrototypeOf;function x0(n){return!Xr(n)}function dw(n){return n&&ha(n)?(n=(n=n[ky](C8,function(t,e){return e.toUpperCase()}))[ky](b8,"_"))[ky](E8,function(t,e){return"_"+e}):n}function dh(n,t){return!(!n||!t)&&-1!==kp(n,t)}function N0(n){return n&&n.toISOString()||""}function Cc(n){return Iy(n)?n[w_]:Bs}function _l(n,t,e,i,o){var s=e;return!n||(s=n[t])===e||o&&!o(s)||i&&!i(e)||(n[t]=s=e),s}function Nh(n,t,e){var i;return n?!(i=n[t])&&Xr(i)&&(i=Wl(e)?{}:e,n[t]=i):i=Wl(e)?{}:e,i}function w8(n,t){var e=null,i=null;return Sa(n)?e=n:i=n,function(){var o=arguments;if(i=e?e():i)return i[t][g0](i,o)}}function Kx(n,t,e,i,o){n&&t&&e&&(!1===o&&!Wl(n[t])||(n[t]=w8(e,i)))}function hw(n,t,e,i){return n&&t&&cd(n)&&ts(e)&&lo(e,function(o){ha(o)&&Kx(n,o,t,o,i)}),n}function Wx(n){return n&&zR?xI(zR({},n)):n}function Qx(n,t,e,i,o,s){var f=arguments,v=f[0]||{},I=f[Ua],D=!1,k=1;for(0<I&&T4(v)&&(D=v,v=f[k]||{},k++),cd(v)||(v={});k<I;k++){var X,fe,Se,Ve,Je=f[k],lt=ts(Je),mt=cd(Je);for(X in Je)(lt&&X in Je||mt&&My(Je,X))&&(fe=Je[X],Se=void 0,D&&fe&&((Se=ts(fe))||Dp(fe))&&(Ve=v[X],Se?ts(Ve)||(Ve=[]):Dp(Ve)||(Ve={}),fe=Qx(D,Ve,fe)),void 0!==fe)&&(v[X]=fe)}return v}function tM(n,i){return i=i&&i.featureOptIn&&i.featureOptIn[n],!(!n||!i)&&(3==(n=i.mode)||1==n)}function pw(n){try{return n.responseText}catch{}return null}function T8(n,t){return n?"XDomainRequest,Response:"+pw(n)||0:t}function fw(n,t){return n?"XMLHttpRequest,Status:"+n[Ql]+",Response:"+pw(n)||0:t}function Xx(n,t){return t&&(NC(t)?n=[t].concat(n):ts(t)&&(n=t.concat(n))),n}function Zx(n,t){try{if(n&&""!==n){var e=xg().parse(n);if(e&&e[bx]&&e[bx]>=e.itemsAccepted&&e.itemsReceived-e.itemsAccepted===e.errors[Ua])return e}}catch(i){Di(t,1,43,"Cannot parse the response. "+Cc(i),{response:n})}return null}var uU="withCredentials";function tb(n,t,e){return!n[e]&&t&&t[J4]&&(t=t[J4](e))&&(n[e]=Vu(t)),n}function eN(n,t){var e={};return n[Su]?e=function I8(n){var t={};return ha(n)&&lo(Vu(n)[_m](/[\r\n]+/),function(e){var i,o;e&&(-1!==(o=e.indexOf(": "))?(i=Vu(e.substring(0,o))[f0](),o=Vu(e.substring(o+1)),t[i]=o):t[Vu(e)]=1)}),t}(n[Su]()):t&&(e=tb(e,n,"time-delta-millis"),e=tb(e,n,"kill-duration"),e=tb(e,n,"kill-duration-seconds")),e}var gw=4294967296,kg=4294967295,nM=123456789,tN=987654321,M8=!1,rM=nM,iM=tN;function nb(n){var t=0,e=function y8(){return $u(eU)}()||function h$(){return $u(m8)}();return 0===(t=e&&e.getRandomValues?e.getRandomValues(new Uint32Array(1))[0]&kg:t)&&cw()&&(M8||function aM(){try{var n=2147483647&Ag();!function oM(n){n<0&&(n>>>=0),rM=nM+n&kg,iM=tN-n&kg,M8=!0}((Math.random()*gw^n)+n)}catch{}}(),t=function fU(n){var t=((iM=36969*(65535&iM)+(iM>>16)&kg)<<16)+(65535&(rM=18e3*(65535&rM)+(rM>>16)&kg))>>>0&kg;return n||(t>>>=0),t}()&kg),0===t&&(t=Math.floor(gw*Math.random()|0)),n||(t>>>=0),t}function rN(n){void 0===n&&(n=22);for(var t=nb()>>>0,e=0,i=Bs;i[Ua]<n;)e++,i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===e&&(t=(nb()<<2&4294967295|3&t)>>>0,e=0);return i}var iN="3.0.5",oN="."+rN(6),aN=0;function zy(n){return 1===n[GS]||9===n[GS]||!+n[GS]}function Kf(n,t){return dw(n+aN+++((t=void 0!==t&&t)?"."+iN:Bs)+oN)}function D0(n){var t={id:Kf("_aiData-"+(n||Bs)+"."+iN),accept:function(e){return zy(e)},get:function(e,i,o,s){var f=e[t.id];return f?f[dw(i)]:(s&&((f=function gU(n,t){var e=t[n.id];if(!e){e={};try{zy(t)&&kc(t,n.id,{e:!1,v:e})}catch{}}return e}(t,e))[dw(i)]=o),o)},kill:function(e,i){if(e&&e[i])try{delete e[i]}catch{}}};return t}function sM(n){return n&&cd(n)&&(n.isVal||n.fb||My(n,"v")||My(n,"mrg")||My(n,"ref")||n.set)}function cM(n,t,e){var i,o=e.dfVal||pI;if(t&&e.fb){var s=e.fb;ts(s)||(s=[s]);for(var f=0;f<s[Ua];f++){var v=s[f],I=t[v];if(o(I)?i=I:n&&(o(I=n.cfg[v])&&(i=I),n.set(n.cfg,Xh(v),I)),o(i))break}}return!o(i)&&o(e.v)?e.v:i}function sN(n,t,e){var i,o=e;return(o=e&&sM(e)?cM(n,t,e):o)&&(sM(o)&&(o=sN(n,t,o)),ts(o)?(i=[])[Ua]=o[Ua]:Dp(o)&&(i={}),i)&&(hs(o,function(s,f){f&&sM(f)&&(f=sN(n,t,f)),i[s]=f}),o=i),o}function lM(n,t,e,X){var o,s,f,v,I,D,k=sM(k=X)?(o=k.isVal,s=k.set,I=k[zS],fe=k[AI],f=k.mrg,!(v=k.ref)&&Wl(v)&&(v=!!f),cM(n,t,k)):X,fe=(fe&&n[AI](t,e),X=!0,t[e]);!fe&&Xr(fe)||(D=fe,X=!1,o&&D!==k&&!o(D)&&(D=k,X=!0),s&&(X=(D=s(D,k,t))===k)),X?D=k&&sN(n,t,k):(Dp(D)||ts(k))&&f&&k&&(Dp(k)||ts(k))&&hs(k,function(Se,Ve){lM(n,D,Se,Ve)}),n.set(t,e,D),v&&n.ref(t,e),I&&n[zS](t,e)}var F_=tx("[[ai_dynCfg_1]]"),O8=tx("[[ai_blkDynCfg_1]]"),rb=tx("[[ai_frcDynCfg_1]]");function P8(n){var t;return n&&(ts(n)?(t=[])[Ua]=n[Ua]:Dp(n)&&(t={}),t)?(hs(n,function(e,i){t[e]=P8(i)}),t):n}function k0(n,t,e){var i=!1;return!e||n[t.blkVal]||(i=e[rb])||e[O8]?i:Dp(e)||ts(e)}function R8(n){df("InvalidAccess:"+n)}var uM=["push","pop","shift","unshift","splice"],jy=function(n,t,e,i){n&&n[jS](3,108,"".concat(e," [").concat(t,"] failed - ")+io(i))};function mw(n,t){return(n=UR(n,t))&&n.get}function dM(n,t,e,i){var o;return t&&((o=mw(t,e))&&o[n.prop]?t[e]=i:function x8(n,t,e,i){var o={n:e,h:[],trk:function(I){I&&I.fn&&(-1===uh(o.h,I)&&o.h[ml](I),n.trk(I,o))},clr:function(I){-1!==(I=uh(o.h,I))&&o.h[zC](I,1)}},s=!0,f=!1;function v(){s&&(f=f||k0(v,n,i),i&&!i[F_]&&f&&(i=$y(n,i,e,"Converting")),s=!1);var I=n.act;return I&&o.trk(I),i}v[n.prop]={chng:function(){n.add(o)}},kc(t,o.n,{g:v,s:function(I){if(i!==I){v[n.ro]&&!n.upd&&R8("["+e+"] is read-only:"+io(t)),s&&(f=f||k0(v,n,i),s=!1);var D,k=f&&v[n.rf];if(f)if(k){hs(i,function(X){i[X]=I?I[X]:tp});try{hs(I,function(X,fe){dM(n,i,X,fe)}),I=i}catch(X){jy((n.hdlr||{})[Gu],e,"Assigning",X),f=!1}}else i&&i[F_]&&hs(i,function(fe){(fe=mw(i,fe))&&(fe=fe[n.prop])&&fe.chng()});I!==i&&(D=I&&k0(v,n,I),!k&&D&&(I=$y(n,I,e,"Converting")),i=I,f=D),n.add(o)}}})}(n,t,e,i)),t}function L0(n,t,e,i){if(t){var o=mw(t,e),f=i&&i[0],v=i&&i[1];if(i=i&&i[2],!o||!o[n.prop]){if(i)try{!function _U(n){if(n&&(Dp(n)||ts(n)))try{n[O8]=!0}catch{}}(t)}catch(D){jy((n.hdlr||{})[Gu],e,"Blocking",D)}try{dM(n,t,e,t[e]),o=mw(t,e)}catch(D){jy((n.hdlr||{})[Gu],e,"State",D)}}f&&(o[n.rf]=f),v&&(o[n.ro]=v),i&&(o[n.blkVal]=!0)}return t}function $y(n,t,e,i){try{hs(t,function(o,s){dM(n,t,o,s)}),t[F_]||(y_(t,F_,{get:function(){return n[px]}}),function Up(n,t,e){ts(t)&&lo(uM,function(i){var o=t[i];t[i]=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];var v=o[g0](this,s);return $y(n,t,e,"Patching"),v}})}(n,t,e))}catch(o){jy((n.hdlr||{})[Gu],e,i,o)}return t}var _w="[[ai_",yw="]]";function yU(n,t,e){var i,o,s=function mU(n){if(n){var t=n[F_]||n;if(t.cfg&&(t.cfg===n||t.cfg[F_]===t))return t}return null}(t);return s||(s=Kf("dyncfg",!0),(t={uid:null,cfg:e=t&&!1!==e?t:P8(t)})[Gu]=n,t[BC]=function(){i[BC]()},t.set=function(f,v,I){try{f=dM(i,f,v,I)}catch(D){jy(n,v,"Setting value",D)}return f[v]},t[E_]=function(f,v){return v&&hs(v,function(I,D){lM(o,f,I,D)}),f},t[Ny]=function(f){return function vw(n,t){var e={fn:t,rm:function(){e.fn=null,t=n=null}};return n.use(e,t),e}(i,f)},t.ref=function(f,v){return L0(i,f,v,((f={})[0]=!0,f))[v]},t[zS]=function(f,v){return L0(i,f,v,((f={})[1]=!0,f))[v]},t[AI]=function(f,v){return L0(i,f,v,((f={})[2]=!0,f))[v]},t._block=function(f,v){i.use(null,function(I){var D=i.upd;try{Wl(v)||(i.upd=v),f(I)}finally{i.upd=D}})},kc(o=t,"uid",{c:!1,e:!1,w:!1,v:s}),$y(i=function N8(n){var t,e=US(_w+"get"+n.uid+yw),i=US(_w+"ro"+n.uid+yw),o=US(_w+"rf"+n.uid+yw),s=US(_w+"blkVal"+n.uid+yw),f=US(_w+"dtl"+n.uid+yw),v=null,I=null;function D(X,fe){var Se=t.act;try{(t.act=X)&&X[f]&&(lo(X[f],function(Je){Je.clr(X)}),X[f]=[]),fe({cfg:n.cfg,set:n.set.bind(n),setDf:n[E_].bind(n),ref:n.ref.bind(n),rdOnly:n[zS].bind(n)})}catch(Je){var Ve=n[Gu];throw Ve&&Ve[jS](1,107,io(Je)),Je}finally{t.act=Se||null}}function k(){if(v){var X=v,fe=(v=null,I&&I[jC](),I=null,[]);if(lo(X,function(Se){if(Se&&(Se[f]&&(lo(Se[f],function(Ve){Ve.clr(Se)}),Se[f]=null),Se.fn))try{D(Se,Se.fn)}catch(Ve){fe[ml](Ve)}}),v)try{k()}catch(Se){fe[ml](Se)}0<fe[Ua]&&function wx(n,t){dx=dx||ix("AggregationError",function(i,o){1<o[Ua]&&(i.errors=o[1])});var e=n||"One or more errors occurred.";throw lo(t,function(i,o){e+="\n".concat(o," > ").concat(io(i))}),new dx(e,t||[])}("Watcher error(s): ",fe)}}return(e={prop:e,ro:i,rf:o})[AI]=s,e[px]=n,e.add=function(X){if(X&&0<X.h[Ua]){v=v||[],I=I||Lp(function(){I=null,k()},0);for(var fe=0;fe<X.h[Ua];fe++){var Se=X.h[fe];Se&&-1===uh(v,Se)&&v[ml](Se)}}},e[BC]=k,e.use=D,e.trk=function(X,fe){X&&(X=X[f]=X[f]||[],-1===uh(X,fe))&&X[ml](fe)},t=e}(o),e,"config","Creating"),o)}function Yf(n,t,e,i){return e=yU(e,n||{},i),t&&e[E_](e.cfg,t),e}function xu(n,t,e){var i=n[F_]||n;return(!i.cfg||i.cfg!==n&&i.cfg[F_]!==i?(function vU(n,t){n?(n[II](t),n[jS](2,108,t)):R8(t)}(e,KI+io(n)),Yf(n,null,e)):i)[Ny](t)}function F0(n,t){if(n&&n[mm])return n[mm](t)}function cN(n,t,e){var i;return e||(i=Og(function(o){e=o})),n&&0<KH(n)?I0(F0(n[0],t),function(){cN(yI(n,1),t,e)}):e(),i}var D8,H0,bU="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function f$(n,t,e){return!n&&Xr(n)?t:T4(n)?n:"true"===Xh(n)[f0]()}function U0(n){return{mrg:!0,v:n}}function EU(n,t){return{set:n,v:t}}function Cw(n,t,e){return{fb:e,isVal:n,v:t}}function wu(n,t){return{fb:t,set:f$,v:!!n}}var Sm,lN="toGMTString",ib="toUTCString",uN="cookie",dN="expires",k8="isCookieUseDisabled",hN="disableCookiesUsage",B0="_ckMgr",hM=null,pM=null,L8=null,F8={},Vy={},wU=((D8={cookieCfg:U0(((H0={})[ow]={fb:"cookieDomain",dfVal:x0},H0.path={fb:"cookiePath",dfVal:x0},H0.enabled=tp,H0.ignoreCookies=tp,H0.blockedCookies=tp,H0)),cookieDomain:tp,cookiePath:tp})[hN]=tp,D8);function fM(){Sm=Sm||kS(function(){return Kd()})}function gM(n){return!n||n.isEnabled()}function pN(n,t){return!!(t&&n&&ts(n.ignoreCookies))&&-1!==uh(n.ignoreCookies,t)}function mM(n,i){var e;return Xr(i=i[VC])&&(e=void 0,Wl(n[k8])||(e=!n[k8]),i=e=Wl(n[hN])?e:!n[hN]),i}function fN(n,t){var e,i;return n?i=n.getCookieMgr():t&&(i=(e=t.cookieCfg)&&e[B0]?e[B0]:ob(t)),i||function H8(n,t){var e=ob[B0]||Vy[B0];return e||(e=ob[B0]=ob(n,t),Vy[B0]=e),e}(t,(n||{})[Gu])}function ob(n,t){n=Yf(n||Vy,null,t).cfg,f=xu(n,function(fe){fe[E_](fe.cfg,wU),i=fe.ref(fe.cfg,"cookieCfg"),o=i[aw]||"/",s=i[ow],v=!1!==mM(n,i),I=i.getCookie||mN,D=i.setCookie||j8,k=i.delCookie||j8},t),(e={isEnabled:function(){var fe=!1!==mM(n,i)&&v&&gN(t),Se=Vy[B0];return fe&&Se&&X!==Se?gM(Se):fe},setEnabled:function(fe){v=!1!==fe,i[VC]=fe},set:function(fe,Se,Ve,Je,lt){var mt,_n,Yn,sr=!1;return gM(X)&&!function TU(n,t){return!!(t&&n&&ts(n.blockedCookies)&&-1!==uh(n.blockedCookies,t))||pN(n,t)}(i,fe)&&(mt={},_n=Vu(Se||Bs),-1!==(Yn=kp(_n,";"))&&(_n=Vu(GR(Se,Yn)),mt=U8(Bf(Se,Yn+1))),_l(mt,ow,Je||s,fI,Wl),Xr(Ve)||(Se=cw(),Wl(mt[dN])&&0<(Yn=Ag()+1e3*Ve)&&((Je=new Date).setTime(Yn),_l(mt,dN,B8(Je,Se?lN:ib)||B8(Je,Se?lN:ib)||Bs,fI)),Se)||_l(mt,"max-age",Bs+Ve,null,Wl),(Yn=bm())&&"https:"===Yn[v0]&&(_l(mt,"secure",null,null,Wl),pM=null===pM?!function $8(n){return!(!ha(n)||!dh(n,"CPU iPhone OS 12")&&!dh(n,"iPad; CPU OS 12")&&!(dh(n,"Macintosh; Intel Mac OS X 10_14")&&dh(n,"Version/")&&dh(n,"Safari"))&&(!dh(n,"Macintosh; Intel Mac OS X 10_14")||!UC(n,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!dh(n,"Chrome/5")&&!dh(n,"Chrome/6")&&(!dh(n,"UnrealEngine")||dh(n,"Chrome"))&&!dh(n,"UCBrowser/12")&&!dh(n,"UCBrowser/11"))}(($f()||{})[yx]):pM)&&_l(mt,"SameSite","None",null,Wl),_l(mt,aw,lt||o,null,Wl),D(fe,z8(_n,mt)),sr=!0),sr},get:function(fe){var Se=Bs;return gM(X)&&!pN(i,fe)?I(fe):Se},del:function(fe,Se){return!!gM(X)&&X.purge(fe,Se)},purge:function(fe,Se){var Ve,Je=!1;return gN(t)&&((Ve={})[aw]=Se||"/",Ve[dN]="Thu, 01 Jan 1970 00:00:01 GMT",Se=Ve,cw()||(Se["max-age"]="0"),k(fe,z8(Bs,Se)),Je=!0),Je}})[mm]=function(fe){f&&f.rm(),f=null};var e,i,o,s,f,v,I,D,k,X=e;return X[B0]=X}function gN(n){if(null===hM){hM=!1,Sm||fM();try{hM=void 0!==(Sm.v||{})[uN]}catch(e){Di(n,2,68,"Cannot access document.cookie - "+Cc(e),{exception:io(e)})}}return hM}function U8(n){var t={};return n&&n[Ua]&&lo(Vu(n)[_m](";"),function(e){var i;(e=Vu(e||Bs))&&(-1===(i=kp(e,"="))?t[e]=null:t[Vu(GR(e,i))]=Vu(Bf(e,i+1)))}),t}function B8(n,t){return Sa(n[t])?n[t]():null}function z8(n,t){var e=n||Bs;return hs(t,function(i,o){e+="; "+i+(Xr(o)?Bs:"="+o)}),e}function mN(n){var t,e=Bs;return Sm||fM(),Sm.v&&(L8!==(t=Sm.v[uN]||Bs)&&(F8=U8(t),L8=t),e=Vu(F8[n]||Bs)),e}function j8(n,t){Sm||fM(),Sm.v&&(Sm.v[uN]=n+"="+t)}var AU={perfEvtsSendAll:!1};function Gy(n,t,e,i){lo(n,function(o){if(o&&o[t])if(e)Lp(function(){return i(o)},0);else try{i(o)}catch{}})}var IU=function(){function n(t){this.listeners=[];var e,i=[],o=Yf(t,AU)[Ny](function(s){e=!!s.cfg.perfEvtsSendAll});Rl(n,this,function(s){kc(s,"listeners",{g:function(){return i}}),s[m0]=function(f){i[ml](f)},s[_0]=function(f){for(var v=uh(i,f);-1<v;)i[zC](v,1),v=uh(i,f)},s[k_]=function(f){Gy(i,k_,!0,function(v){v[k_](f)})},s[M0]=function(f,v){Gy(i,M0,!0,function(I){I[M0](f,v)})},s[XC]=function(f,v){Gy(i,XC,v,function(I){I[XC](f,v)})},s[L_]=function(f){!f||!e&&f[C0]()||Gy(i,L_,!1,function(v){f[Jh]?Lp(function(){return v[L_](f)},0):v[L_](f)})},s[nw]=function(f){f&&f[Ua]&&Gy(i,nw,!0,function(v){v[nw](f)})},s[rw]=function(f){f&&f[Mg]&&Gy(i,rw,!0,function(v){v[rw](f)})},s[iw]=function(f,v){var I;0<f&&(I=v||0,Gy(i,iw,!0,function(D){D[iw](f,I)}))},s[mm]=function(f){function v(){o&&o.rm(),o=null,i=[]}var I;if(Gy(i,"unload",!1,function(D){(D=D[mm](f))&&(I=I||[])[ml](D)}),I)return Og(function(D){return I0(f8(I),function(){v(),D()})});v()}})}return n.__ieDyn=1,n}(),ab="ctx",_N="ParentContextKey",bw="ChildrenContextKey",_M=function(){function n(t,e,i){var o,s=this;s.start=Ag(),s[w_]=t,s[Jh]=i,s[C0]=function(){return!1},Sa(e)&&kc(s,"payload",{g:function(){return!o&&Sa(e)&&(o=e(),e=null),o}}),s[I_]=function(f){return f?(f===n[_N]||f===n[bw]?s:s[ab]||{})[f]:null},s[Fp]=function(f,v){f&&(f===n[_N]?(s[f]||(s[C0]=function(){return!0}),s[f]=v):f===n[bw]?s[f]=v:(s[ab]=s[ab]||{})[f]=v)},s[qC]=function(){var f=0,v=s[I_](n[bw]);if(ts(v))for(var I=0;I<v[Ua];I++){var D=v[I];D&&(f+=D[Vf])}s[Vf]=Ag()-s.start,s.exTime=s[Vf]-f,s[qC]=function(){}}}return n.ParentContextKey="parent",n.ChildrenContextKey="childEvts",n}(),yN=function(){function n(t){this.ctx={},Rl(n,this,function(e){e.create=function(i,o,s){return new _M(i,o,s)},e.fire=function(i){i&&(i[qC](),t)&&Sa(t[L_])&&t[L_](i)},e[Fp]=function(i,o){i&&((e[ab]=e[ab]||{})[i]=o)},e[I_]=function(i){return(e[ab]||{})[i]}})}return n.__ieDyn=1,n}(),Ew="CoreUtils.doPerf";function Sw(n,t,e,i,o){if(n&&(n=n[ZC]?n[ZC]():n)){var s,f=void 0,v=n[I_](Ew);try{if(f=n.create(t(),i,o))return v&&f[Fp]&&(f[Fp](_M[_N],v),v[I_])&&v[Fp]&&((s=v[I_](_M[bw]))||v[Fp](_M[bw],s=[]),s[ml](f)),n[Fp](Ew,f),e(f)}catch(I){f&&f[Fp]&&f[Fp]("exception",I)}finally{f&&n.fire(f),n[Fp](Ew,v)}}return e()}function wm(){for(var n,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Bs,i=0;i<4;i++)e+=t[15&(n=nb())]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(3&nb())|0];return zf(e,0,8)+zf(e,9,4)+"4"+zf(e,13,3)+o+zf(e,16,3)+zf(e,19,12)}var vN="00000000000000000000000000000000",CN="0000000000000000";function z0(n,t,e){return!(!n||n[Ua]!==t||n===e||!n.match(/^[\da-f]*$/i))}function vM(n,t,e){return z0(n,t)?n:e}function CM(n,t,e,i){var o={};return o[_x]=z0(i,2,"ff")?i:"00",o[RI]=bM(n)?n:wm(),o[Sx]=EM(t)?t:GR(wm(),16),o.traceFlags=0<=e&&e<=255?e:1,o}function bM(n){return z0(n,32,vN)}function EM(n){return z0(n,16,CN)}function PU(n){var t,e;return n?(z0(t=function OU(n){for(var t=(n=isNaN(n)||n<0||255<n?1:n).toString(16);t[Ua]<2;)t="0"+t;return t}(n[O_]),2)||(t="01"),"".concat((e="00"!==(e=n[_x]||"00")&&"ff"!==e?"00":e).toLowerCase(),"-").concat(vM(n.traceId,32,vN).toLowerCase(),"-").concat(vM(n.spanId,16,CN).toLowerCase(),"-").concat(t.toLowerCase())):""}var q8=D0("plugin");function j0(n){return q8.get(n,"state",{},!0)}function bN(n,t){for(var e=[],i=null,o=n[hf]();o;){var s,f,v=o[MI]();v&&(i&&i[xh]&&v[np]&&i[xh](v),f=!!(s=j0(v))[gm],(f=v[gm]?v[gm]():f)||e[ml](v),i=v,o=o[hf]())}lo(e,function(I){var D=n[cu]();I[$C](n.getCfg(),D,t,n[hf]()),s=j0(I),I[cu]||s[cu]||(s[cu]=D),s[gm]=!0,delete s[T_]})}function SM(n){return n.sort(function(t,e){var i,o=0;return e?(i=e[np],t[np]?o=i?t[D_]-e[D_]:1:i&&(o=-1)):o=t?1:-1,o})}var wM,TM="TelemetryPluginChain",AM="_hasRun",IM="_getTelCtx",MM=0;function ww(n,t,e,i){var o=null,s=[],f=(t=t||Yf({},null,e[Gu]),null!==i&&(o=i?function EN(n,t,e){for(;n;){if(n[MI]()===e)return n;n=n[hf]()}return qy([e],t.config||{},t)}(n,e,i):n),{_next:function(){var D,I=o;return o=I?I[hf]():null,I||(D=s)&&0<D[Ua]&&(lo(D,function(k){try{k.func.call(k.self,k.args)}catch(X){Di(e[Gu],2,73,"Unexpected Exception during onComplete - "+io(X))}}),s=[]),I},ctx:{core:function(){return e},diagLog:function(){return Uy(e,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(I,D){var k=v(I,!0);return D&&hs(D,function(X,fe){var Se;!Xr(k[X])||!(Se=t.cfg[X])&&Xr(Se)||(k[X]=Se),lM(t,k,X,fe)}),t[E_](k,D)},getConfig:function(fe,D,k){void 0===k&&(k=!1),fe=v(fe,!1);var X,Se=t.cfg;return!fe||!fe[D]&&Xr(fe[D])?!Se[D]&&Xr(Se[D])||(X=Se[D]):X=fe[D],X||!Xr(X)?X:k},hasNext:function(){return!!o},getNext:function(){return o},setNext:function(I){o=I},iterate:function(I){for(;D=f._next();){var D=D[MI]();D&&I(D)}},onComplete:function(I,D){for(var k=[],X=2;X<arguments.length;X++)k[X-2]=arguments[X];I&&s[ml]({func:I,self:Wl(D)?f.ctx:D,args:k})}}});function v(I,D){var k,X=null,fe=t.cfg;return fe&&I&&(fe[Pg]=k=!(k=fe[Pg])&&D?{}:k,k=t.ref(fe,Pg))&&(k[I]=X=!(X=k[I])&&D?{}:X,X=t.ref(k,I)),X}return f}function ff(n,t,e,i){var o=Yf(t),s=ww(n,o,e,i),f=s.ctx;return f[Rh]=function(v){var I=s._next();return I&&I[np](v,f),!I},f[y0]=function(v,I){return ff((v=ts(v=void 0===v?null:v)?qy(v,o.cfg,e,I):v)||f[hf](),o.cfg,e,I)},f}function sb(n,t,e){var i=Yf(t.config),o=ww(n,i,t,e),s=o.ctx;return s[Rh]=function(f){var v=o._next();return v&&v[mm](s,f),!v},s[y0]=function(f,v){return sb((f=ts(f=void 0===f?null:f)?qy(f,i.cfg,t,v):f)||s[hf](),t,v)},s}function Tw(n,t,e){var i=Yf(t.config),o=ww(n,i,t,e).ctx;return o[Rh]=function(s){return o.iterate(function(f){Sa(f[Ig])&&f[Ig](o,s)})},o[y0]=function(s,f){return Tw((s=ts(s=void 0===s?null:s)?qy(s,i.cfg,t,f):s)||o[hf](),t,f)},o}function qy(n,t,e,i){var o,s=null,f=!i;return ts(n)&&0<n[Ua]&&(o=null,lo(n,function(v){(f=!f&&i===v||f)&&v&&Sa(v[np])&&(v=function K8(n,t,e){var i=null,o=Sa(n[np]),s=Sa(n[xh]),f=n?n[S_]+"-"+n[D_]+"-"+MM++:"Unknown-0-"+MM++,v={getPlugin:function(){return n},getNext:function(){return i},processTelemetry:function(D,k){var X;I(k=k||(n&&Sa(n[IM])&&(X=n[IM]()),X=X||ff(v,t,e)),function(X){var fe;return!(!n||!o||(fe=j0(n))[T_]||fe[Fy]||(s&&n[xh](i),n[np](D,X),0))},"processTelemetry",function(){return{item:D}},!D.sync)||k[Rh](D)},unload:function(D,k){I(D,function(){var X,fe,Se=!1;return n&&(X=j0(n),fe=n[cu]||X[cu],!n||fe&&fe!==D.core()||X[T_]||(X[cu]=null,X[T_]=!0,X[gm]=!1,n[T_]&&!0===n[T_](D,k)&&(Se=!0))),Se},"unload",function(){},k[Jh])||D[Rh](k)},update:function(D,k){I(D,function(){var X,fe,Se=!1;return n&&(X=j0(n),fe=n[cu]||X[cu],!n||fe&&fe!==D.core()||X[T_]||n[Ig]&&!0===n[Ig](D,k)&&(Se=!0)),Se},"update",function(){},!1)||D[Rh](k)},_id:f,_setNext:function(D){i=D}};function I(D,k,X,fe,Se){var Ve=!1,Je=n?n[S_]:TM,lt=(lt=D[AM])||(D[AM]={});return D.setNext(i),n&&Sw(D[cu](),function(){return Je+":"+X},function(){lt[f]=!0;try{var mt=i?i._id:Bs;mt&&(lt[mt]=!1),Ve=k(D)}catch(_n){(mt=!i||lt[i._id])&&(Ve=!0),i&&mt||Di(D[Gf](),1,73,"Plugin ["+Je+"] failed during "+X+" - "+io(_n)+", run flags: "+io(lt))}},fe,Se),Ve}return Uf(v)}(v,t,e),s=s||v,o&&o._setNext(v),o=v)})),i&&!s?qy([i],t,e):s}function SN(){var n=[];return{add:function(t){t&&n[ml](t)},run:function(t,e){lo(n,function(i){try{i(t,e)}catch(o){Di(t[Gf](),2,73,"Unexpected error calling unload handler - "+io(o))}}),n=[]}}}function wN(){var n=[];return{run:function(t){var e=n;n=[],lo(e,function(i){try{(i.rm||i.remove).call(i)}catch(o){Di(t,2,73,"Unloading:"+io(o))}})},add:function(t){t&&h0(n,t)}}}var Ky,H_="getPlugin",Y8=((wM={})[Pg]={isVal:x0,v:{}},wM),$0=function(){function n(){var t,e,i,o,s,f=this;function v(fe){return(fe=fe=void 0===fe?null:fe)||(fe=(e||ff(null,{},f[cu]))[y0](null,i&&i[H_]?i[H_]:i)),fe}function I(k,X,fe){Yf(k,Y8,Uy(X)),!fe&&X&&(fe=X[gx]()[hf]());var Se=i;i&&i[H_]&&(Se=i[H_]()),f[cu]=X,e=ff(fe,k,X,Se)}function D(){t=!1,f[cu]=null,i=e=null,s=wN(),o=SN()}D(),Rl(n,f,function(k){k[$C]=function(X,fe,Se,Ve){I(X,fe,Ve),t=!0},k[T_]=function(X,fe){var Se,Ve,Je,lt,mt=k[cu];if(mt&&(!X||mt===X[cu]()))return Ve=!1,Je=X||sb(null,mt,i&&i[H_]?i[H_]():i),lt=fe||((X={reason:0})[Jh]=!1,X),k[su]&&!0===k[su](Je,lt,_n)?Se=!0:_n(),Se;function _n(){Ve||(Ve=!0,o.run(Je,fe),s.run(Je[Gf]()),!0===Se&&Je[Rh](lt),D())}},k[Ig]=function(X,fe){var Se,Ve,Je,lt=k[cu];if(lt&&(!X||lt===X[cu]()))return Ve=!1,Je=X||Tw(null,lt,i&&i[H_]?i[H_]():i),k._doUpdate&&!0===k._doUpdate(Je,fe||{reason:0},mt)?Se=!0:mt(),Se;function mt(){Ve||(Ve=!0,I(Je.getCfg(),Je.core(),Je[hf]()))}},Kx(k,"_addUnloadCb",function(){return o},"add"),Kx(k,"_addHook",function(){return s},"add"),kc(k,"_unloadHooks",{g:function(){return s}})}),f[Gf]=function(k){return v(k)[Gf]()},f[gm]=function(){return t},f.setInitialized=function(k){t=k},f[xh]=function(k){i=k},f[Rh]=function(k,X){X?X[Rh](k):i&&Sa(i[np])&&i[np](k,null)},f._getTelCtx=v}return n.__ieDyn=1,n}(),Q8=function(n){function t(){var e,i,o=n.call(this)||this;function s(){e=0,i=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,s(),Rl(t,o,function(f,v){f.addTelemetryInitializer=function(I){return function OM(n,t,e){var i={id:t,fn:e};return h0(n,i),{remove:function(){lo(n,function(o,s){if(o.id===i.id)return n[zC](s,1),-1})}}}(i,e++,I)},f[np]=function(I,D){(function W8(n,t,e){for(var i=!1,o=n[Ua],s=0;s<o;++s){var f=n[s];if(f)try{if(!1===f.fn[g0](null,[t])){i=!0;break}}catch(v){Di(e,2,64,"Telemetry initializer failed: "+Cc(v),{exception:io(v)},!0)}}return!i})(i,I,(D||f)[Gf]())&&f[Rh](I,D)},f[su]=function(){s()}}),o}return P_(t,n),t.__ieDyn=1,t}($0),TN="Plugins must provide initialize method",AN="SDK is still unloading...",PM=xp(((Ky={cookieCfg:{}})[Rg]={rdOnly:!0,ref:!0,v:[]},Ky[qf]={rdOnly:!0,ref:!0,v:[]},Ky[Pg]={ref:!0,v:{}},Ky[Ly]=tp,Ky.loggingLevelConsole=0,Ky.diagnosticLogInterval=tp,Ky));function J8(n,t){return new yN(t)}function RM(n,t){var e=!1;return lo(t,function(i){if(i===n)return e=!0,-1}),e}function Aw(n,t,e,i){e&&hs(e,function(o,s){i&&Dp(s)&&Dp(t[o])&&Aw(n,t[o],s,i),i&&Dp(s)&&Dp(t[o])?Aw(n,t[o],s,i):n.set(t,o,s)})}function xM(n,t){var e=null,i=-1;return lo(n,function(o,s){if(o.w===t)return e=o,i=s,-1}),{i,l:e}}var ON=function(){function n(){var t,e,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,lt,mt,_n,Yn,sr,ri,tn,zn,Zn,Er,yi,Lt,Hn;Rl(n,this,function(hn){function vr(Sn){return yi&&yi[VC]||Hn||(Sn||i&&0<i.queue[Ua])&&(Lt||(Lt=!0,Vi(t[Ny](function(Si){var Dn=((Si=Si.cfg.diagnosticLogInterval)&&0<Si||(Si=1e4),!1);yi&&(Dn=yi[VC],yi[jC]()),(yi=function Z4(n,t){return X4(!1,lh,fm[sd](arguments))}(Bn,Si)).unref(),yi[VC]=Dn}))),yi[VC]=!0),yi}function si(){function Sn(Si){Si&&lo(Si,function(Dn){Dn[S_]&&Dn[_x]&&!bi[Dn.identifier]&&(Zn[ml](Dn[S_]+"="+Dn[_x]),bi[Dn.identifier]=Dn)})}var bi={};Zn=[],Sn(fe),X&&lo(X,function(Si){Sn(Si)}),Sn(k)}function Bi(){e=!1,(t=Yf({},PM,hn[Gu])).cfg[VS]=1,kc(hn,"config",{g:function(){return t.cfg},s:function(bi){hn.updateCfg(bi,!1)}}),kc(hn,"pluginVersionStringArr",{g:function(){return Zn||si(),Zn}}),kc(hn,"pluginVersionString",{g:function(){return Er||(Zn||si(),Er=Zn.join(";")),Er||Bs}}),kc(hn,"logger",{g:function(){return i||(i=new JI(t.cfg),t[Gu]=i),i},s:function(bi){t[Gu]=bi,i!==bi&&(F0(i,!1),i=bi)}}),hn[Gu]=new JI(t.cfg),zn=[];var Sn=hn.config[Rg]||[];Sn.splice(0,Sn[Ua]),h0(Sn,zn),Ve=new Q8,F0(s,!(o=[])),v=f=s=null,F0(I,!1),Se=!(k=[]),lt=Kf("AIBaseCore",!(Je=fe=X=D=I=null)),mt=SN(),ri=sr=null,_n=wN(),Zn=Er=null,Hn=!(tn=[])}function Un(){var Sn=ff(Li(),t.cfg,hn);return Sn[OI](vr),Sn}function pi(Sn){var bi=function e5(n,t,e){var i=[],o=[],s={};return lo(e,function(f){(Xr(f)||Xr(f[$C]))&&Rp(TN);var v=f[D_],I=f[S_];f&&v&&(Xr(s[v])?s[v]=I:By(n,"Two extensions have same priority #"+v+" - "+s[v]+", "+I)),(!v||v<t?i:o)[ml](f)}),(e={})[cu]=i,e[qf]=o,e}(hn[Gu],500,k),Si=(Zn=Er=D=null,fe=SM(h0(fe=(X||[])[0]||[],bi[qf])),bi=h0(SM(bi[cu]),fe),(zn=Uf(bi),Si=hn.config[Rg]||[]).splice(0,Si[Ua]),h0(Si,zn),Un());fe&&0<fe[Ua]&&bN(Si[y0](fe),bi),bN(Si,bi),Sn&&Zi(Sn)}function Bo(Sn){var Si=null,Dn=[];return lo(zn,function(er){if(er[S_]===Sn&&er!==Ve)return Si=er,-1;er.getChannel&&Dn[ml](er)}),!Si&&0<Dn[Ua]&&lo(Dn,function(er){if(!(Si=er.getChannel(Sn)))return-1}),Si?{plugin:Si,setEnabled:function(er){j0(Si)[Fy]=!er},isEnabled:function(){var er=j0(Si);return!er[T_]&&!er[Fy]},remove:function(er,hi){var to,Gi=[Si];(to={reason:1})[Jh]=er=void 0===er||er,Qi(Gi,to,function(Vo){Vo&&pi({reason:32,removed:Gi}),hi&&hi(Vo)})}}:null}function Li(){var Sn;return D||(Sn=(zn||[]).slice(),-1===uh(Sn,Ve)&&Sn[ml](Ve),D=qy(SM(Sn),t.cfg,hn)),D}function Qi(Sn,bi,Si){var Dn;Sn&&0<Sn[Ua]?((Dn=sb(qy(Sn,t.cfg,hn),hn))[OI](function(){var er=!1,hi=[],to=(lo(k,function(Gi,Vo){RM(Gi,Sn)?er=!0:hi[ml](Gi)}),k=hi,Zn=Er=null,[]);X&&(lo(X,function(Gi,Vo){var Ye=[];lo(Gi,function(Be){RM(Be,Sn)?er=!0:Ye[ml](Be)}),to[ml](Ye)}),X=to),Si&&Si(er),vr()}),Dn[Rh](bi)):Si(!1)}function Bn(){var Sn;i&&i.queue&&(Sn=i.queue.slice(0),i.queue[Ua]=0,lo(Sn,function(Dn){var Si;(Si={})[w_]=Je||"InternalMessageId: "+Dn[GC],Si.iKey=ri,Si[Vf]=N0(new Date),Si.baseType=uw.dataType,Si.baseData={message:Dn[Dy]},hn.track(Dn=Si)}))}function Qs(Sn,bi,Si,Dn){var er=1,hi=!1,to=null;function Gi(){er--,hi&&0===er&&(to&&to[jC](),to=null,bi&&bi(hi),bi=null)}return Dn=Dn||5e3,fe&&0<fe[Ua]&&Un()[y0](fe).iterate(function(Vo){var Ye;Vo.flush&&(er++,Ye=!1,Vo.flush(Sn,function(){Ye=!0,Gi()},Si)||Ye||(Sn&&null==to?to=Lp(function(){to=null,Gi()},Dn):Gi()))}),hi=!0,Gi(),!0}function Zi(Sn){var bi=Tw(Li(),hn);bi[OI](vr),hn._updateHook&&!0===hn._updateHook(bi,Sn)||bi[Rh](Sn)}function Na(Sn){var bi=hn[Gu];bi?(Di(bi,2,73,Sn),vr()):Rp(Sn)}function za(Sn){var bi=hn[$S]();bi&&bi[M0]([Sn],2)}function Vi(Sn){_n.add(Sn)}Bi(),hn._getDbgPlgTargets=function(){return[zn]},hn[gm]=function(){return e},hn[$C]=function(Sn,bi,Si,Dn){Se&&Rp(AN),hn[gm]()&&Rp("Core cannot be initialized more than once"),Sn=(t=Yf(Sn,PM,Si||hn[Gu],!1)).cfg,Vi(t[Ny](function(er){ri=er.cfg.instrumentationKey;var hi=er.ref(er.cfg,Pg);hs(hi,function(to){er.ref(hi,to)}),Xr(ri)&&Rp("Please provide instrumentation key")})),(s=Dn)||hn[$S](),Vi(t[Ny](function(er){var hi=er.cfg.disableDbgExt;!0===hi&&Yn&&(s[_0](Yn),Yn=null),s&&!Yn&&!0!==hi&&(Yn=function Ux(n){if(!N_){N_={};for(var t=0;t<Cm[Ua];t++)N_[Cm[t]]=JH(Cm[t],n)}return N_}(er.cfg),s[m0](Yn))})),Vi(t[Ny](function(er){var hi=er.cfg.enablePerfMgr;hi||(v=v&&null),hi&&Nh(er.cfg,Ly,J8)})),hn[Gu]=Si,Dn=Sn[Rg],(k=[])[ml].apply(k,n8(n8([],bi),Dn)),X=Sn[qf],pi(null),fe&&0!==fe[Ua]||Rp("No "+qf+" available"),X&&1<X[Ua]&&((Si=hn[MI]("TeeChannelController"))&&Si.plugin||Di(i,1,28,"TeeChannel required")),function MN(n,t,e){lo(t,function(i){var o=xu(n,i.w,e);delete i.w,i.rm=function(){o.rm()}})}(Sn,tn,i),e=!(tn=null),hn.releaseQueue(),hn[fx]()},hn.getChannels=function(){var Sn=[];return fe&&lo(fe,function(bi){Sn[ml](bi)}),Uf(Sn)},hn.track=function(Sn){Sw(hn[ZC](),function(){return"AppInsightsCore:track"},function(){null===Sn&&(za(Sn),Rp("Invalid telemetry item")),!Sn[w_]&&Xr(Sn[w_])&&(za(Sn),Rp("telemetry name required")),Sn.iKey=Sn.iKey||ri,Sn[Vf]=Sn[Vf]||N0(new Date),Sn.ver=Sn.ver||"4.0",!Se&&hn[gm]()?Un()[Rh](Sn):o[ml](Sn)},function(){return{item:Sn}},!Sn.sync)},hn[gx]=Un,hn[$S]=function(){return s||(s=new IU(t.cfg),hn._notificationManager=s),s},hn[m0]=function(Sn){hn[$S]()[m0](Sn)},hn[_0]=function(Sn){s&&s[_0](Sn)},hn.getCookieMgr=function(){return I=I||ob(t.cfg,hn[Gu])},hn.setCookieMgr=function(Sn){I!==Sn&&(F0(I,!1),I=Sn)},hn[ZC]=function(){return f||v||Vi(t[Ny](function(Sn){Sn.cfg.enablePerfMgr&&Sa(Sn=Sn.cfg[Ly])&&(v=Sn(hn,hn[$S]()))})),f||v||null},hn.setPerfMgr=function(Sn){f=Sn},hn.eventCnt=function(){return o[Ua]},hn.releaseQueue=function(){var Sn;e&&0<o[Ua]&&(Sn=o,o=[],lo(Sn,function(bi){Un()[Rh](bi)}))},hn[fx]=function(Sn){return Je=Sn||null,Hn=!1,yi&&yi[jC](),vr(!0)},hn[mx]=function(){Hn=!0,yi&&yi[jC](),Bn()},hw(hn,function(){return Ve},["addTelemetryInitializer"]),hn[mm]=function(Sn,bi,Si){void 0===Sn&&(Sn=!0),e||Rp("SDK is not initialized"),Se&&Rp(AN),(Dn={reason:50})[Jh]=Sn,Dn.flushComplete=!1;var Dn,er,hi=Dn,to=(Sn&&!bi&&(er=Og(function(Gi){bi=Gi})),sb(Li(),hn));return to[OI](function(){_n.run(hn[Gu]),cN([I,s,i],Sn,function(){Bi(),bi&&bi(hi)})},hn),Bn(),Qs(Sn,function(Gi){hi.flushComplete=Gi,Se=!0,mt.run(to,hi),hn[mx](),to[Rh](hi)},6,Si),er},hn[MI]=Bo,hn.addPlugin=function(Sn,bi,Si,Dn){var er,hi,to;function Gi(){k[ml](Sn),hi.added=[Sn],pi(hi),Dn&&Dn(!0)}Sn?(er=Bo(Sn[S_]))&&!bi?(Dn&&Dn(!1),Na("Plugin ["+Sn[S_]+"] is already loaded!")):(hi={reason:16},er?Qi(to=[er.plugin],{reason:2,isAsync:!!Si},function(Vo){Vo?(hi.removed=to,hi.reason|=32,Gi()):Dn&&Dn(!1)}):Gi()):(Dn&&Dn(!1),Na(TN))},hn.updateCfg=function(Sn,bi){var Si,Dn;void 0===bi&&(bi=!0),hn[gm]()&&(Si={reason:1,cfg:t.cfg,oldCfg:HC({},t.cfg),newConfig:HC({},Sn),merge:bi},(Sn=Si.newConfig)[Rg]=(Dn=t.cfg)[Rg],Sn[qf]=Dn[qf]),t._block(function(er){var hi=er.cfg;Aw(er,hi,Sn,bi),bi||hs(hi,function(to){My(Sn,to)||er.set(hi,to,tp)}),er[E_](hi,PM)},!0),t[BC](),Si&&Zi(Si)},hn.evtNamespace=function(){return lt},hn.flush=Qs,hn.getTraceCtx=function(Sn){return sr=sr||function RU(n){var t={};return{getName:function(){return t[w_]},setName:function(e){n&&n.setName(e),t[w_]=e},getTraceId:function(){return t[RI]},setTraceId:function(e){n&&n.setTraceId(e),bM(e)&&(t[RI]=e)},getSpanId:function(){return t[Sx]},setSpanId:function(e){n&&n.setSpanId(e),EM(e)&&(t[Sx]=e)},getTraceFlags:function(){return t[O_]},setTraceFlags:function(e){n&&n.setTraceFlags(e),t[O_]=e}}}()},hn.setTraceCtx=function(Sn){sr=Sn||null},hn.addUnloadHook=Vi,Kx(hn,"addUnloadCb",function(){return mt},"add"),hn.onCfgChange=function(Sn){var bi=e?xu(t.cfg,Sn,hn[Gu]):function IN(n,t){var e=xM(n,t).l;return e||n[ml](e={w:t,rm:function(){var i=xM(n,t);-1!==i.i&&n[zC](i.i,1)}}),e}(tn,Sn);return{rm:function(){bi.rm()}}},hn.getWParam=function(){return YR()||t.cfg.enableWParam?0:-1}})}return n.__ieDyn=1,n}(),NM="&NoResponseBody=true",DM="POST",t5=function(){function n(){var t,e,i,o,s,f,v,I,D,k,X,fe,Se,Ve=0;Rl(n,this,function(Je,lt){var mt=!0;function _n(Lt,Hn){Di(i,2,26,"Failed to send telemetry.",{message:Lt}),sr(Hn,400,{})}function Yn(Lt){_n("No endpoint url is provided for the batch",Lt)}function sr(Lt,Hn,hn,vr){try{Lt&&Lt(Hn,hn,vr)}catch{}}function ri(Lt,Hn){var hn,vr=$f();return(hn=Lt[KC])?(hn=Lt[KC]+(fe?NM:""),Lt=Lt[Mg],Lt=o?Lt:new Blob([Lt],{type:"text/plain;charset=UTF-8"}),vr.sendBeacon(hn,Lt)):(Yn(Hn),!0)}function tn(Lt,Hn,hn){var vr,si=Lt[Mg];try{si&&(ri(Lt,Hn)?sr(Hn,200,{},""):(vr=s&&s.beaconOnRetry)&&Sa(vr)?vr(Lt,Hn,ri):(v&&v[Ex](Lt,Hn,!0),Di(i,2,40,". Failed to send telemetry with Beacon API, retried with normal sender.")))}catch(Bi){o&&By(i,"Failed to send telemetry using sendBeacon API. Ex:"+io(Bi)),sr(Hn,o?0:400,{},"")}}function zn(Lt,Hn,hn){var vr,si,Bi,Un,pi=Lt[qS]||{},Bo=(!hn&&t&&(vr=Og(function(Qi,Bn){si=Qi,Bi=Bn})),o&&hn&&Lt.disableXhrSync&&(hn=!1),Lt[KC]);if(Bo)return(Un=function dU(n,t,e,i,o,s){function f(I,D,k){try{I[D]=k}catch{}}void 0===i&&(i=!1),void 0===o&&(o=!1);var v=new XMLHttpRequest;return i&&f(v,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i),e&&f(v,uU,e),v.open(n,t,!o),e&&f(v,uU,e),!o&&s&&f(v,"timeout",s),v}(DM,Bo,mt,!0,hn,Lt[M_]))[PI]("Content-type","application/json"),lo(m_(pi),function(Qi){Un[PI](Qi,pi[Qi])}),Un.onreadystatechange=function(){o||(Li(Un),4===Un.readyState&&si&&si(!0))},Un.onload=function(){o&&Li(Un)},Un.onerror=function(Qi){sr(Hn,o?Un[Ql]:400,eN(Un,o),o?"":fw(Un)),Bi&&Bi(Qi)},Un.ontimeout=function(){sr(Hn,o?Un[Ql]:500,eN(Un,o),o?"":fw(Un)),si&&si(!1)},Un.send(Lt[Mg]),vr;function Li(Qi){var Bn=s&&s.xhrOnComplete;Bn&&Sa(Bn)?Bn(Qi,Hn,Lt):(Bn=pw(Qi),sr(Hn,Qi[Ql],eN(Qi,o),Bn))}Yn(Hn),si&&si(!1)}function Zn(Lt,Hn,hn){var vr,si,Bi,Un=Lt[KC],Qi=Lt[Mg],pi=o?Qi:new Blob([Qi],{type:"application/json"}),Bo=new Headers,Li=Qi[Ua],Bn=(Qi=!1,!1),Qs=Lt[qS]||{},Zi=((pi={method:DM,body:pi})[bU]=!0,Lt.headers&&0<m_(Lt.headers)[Ua]&&(lo(m_(Qs),function(Vi){Bo.append(Vi,Qs[Vi])}),pi[qS]=Bo),mt&&o&&(pi.credentials="include"),hn&&(pi.keepalive=!0,Ve+=Li,o?2===Lt._sendReason&&(Qi=!0,fe)&&(Un+=NM):Qi=!0),new Request(Un,pi));try{Zi[bU]=!0}catch{}if(!hn&&t&&(vr=Og(function(Vi,Sn){si=Vi,Bi=Sn})),Un){try{I0(fetch(o?Un:Zi,o?pi:null),function(Vi){if(hn&&(Ve-=Li,Li=0),!Bn)if(Bn=!0,Vi.rejected)Na(Vi.reason&&Vi.reason[Dy]),Bi&&Bi(Vi.reason);else{var Sn=Vi.value;try{o||Sn.ok?o&&!Sn.body?(za(Sn,null,""),si&&si(!0)):I0(Sn.text(),function(bi){za(Sn,Lt,bi.value),si&&si(!0)}):(Na(Sn.statusText),si&&si(!1))}catch(bi){Na(io(bi)),Bi&&Bi(bi)}}})}catch(Vi){Bn||(Na(io(Vi)),Bi&&Bi(Vi))}return Qi&&!Bn&&(Bn=!0,sr(Hn,200,{}),si)&&si(!0),o&&!Bn&&0<Lt[M_]&&Se&&Se.set(function(){Bn||(Bn=!0,sr(Hn,500,{}),si&&si(!0))},Lt[M_]),vr}function Na(Vi){sr(Hn,o?0:400,{},o?"":Vi)}function za(Vi,Sn,bi){var Si=Vi[Ql],Dn=s.fetchOnComplete;Dn&&Sa(Dn)?Dn(Vi,Hn,bi||"",Sn):sr(Hn,Si,{},bi||"")}Yn(Hn),si&&si(!1)}function Er(Lt,Hn,hn){var Bi=Np(),vr=new XDomainRequest,si=Lt[Mg],Un=(vr.onload=function(){var pi=pw(vr),Bo=s&&s.xdrOnComplete;Bo&&Sa(Bo)?Bo(vr,Hn,Lt):sr(Hn,200,{},pi)},vr.onerror=function(){sr(Hn,400,{},o?"":T8(vr))},vr.ontimeout=function(){sr(Hn,500,{})},vr.onprogress=function(){},Bi=Bi&&Bi.location&&Bi.location[v0]||"",Lt[KC]);Un?o||0===Un.lastIndexOf(Bi,0)?(Bi=o?Un:Un[ky](/^(https?:)/,""),vr.open(DM,Bi),Lt[M_]&&(vr[M_]=Lt[M_]),vr.send(si),o&&hn?Se&&Se.set(function(){vr.send(si)},0):vr.send(si)):(Di(i,2,40,". "+(Un="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.")),_n(Un,Hn)):Yn(Hn)}function yi(){Ve=0,fe=X=k=D=I=t=e=!1,Se=v=f=s=o=i=null}yi(),Je[$C]=function(Lt,Hn){i=Hn,e&&Di(i,1,28,"Sender is already initialized"),Je.SetConfig(Lt),e=!0},Je._getDbgPlgTargets=function(){return[e,o,f,t]},Je.SetConfig=function(Lt){try{var Hn;return s=Lt.senderOnCompleteCallBack||{},t=!!Lt.enableSendPromise,I=!!Lt.disableXhr,D=!!Lt.disableBeacon,k=!!Lt.disableBeaconSync,Se=Lt.timeWrapper,fe=!!Lt.addNoResponse,X=!!Lt.disableFetchKeepAlive,v={sendPOST:zn},(o=!!Lt.isOneDs)||(mt=!1),(f=!!Lt.disableCredentials)&&(Hn=bm())&&Hn.protocol&&"file:"===Hn.protocol[f0]()&&(mt=!1),!0}catch{}return!1},Je.getSyncFetchPayload=function(){return Ve},Je.getSenderInst=function(Lt,Hn){if(Lt&&Lt[Ua]){for(var hn=Lt,vr=Hn,si=0,Bi=null,Un=0;null==Bi&&Un<hn[Ua];)si=hn[Un],I||1!==si?2!==si||!pf(vr)||vr&&X?3!==si||!P0()||(vr?k:D)||(Bi=tn):Bi=Zn:(JC=null===JC&&(JC=typeof XDomainRequest!==YC)&&lw()?JC&&!O0($u(_8),"withCredentials"):JC)?Bi=Er:lw()&&(Bi=zn),Un++;return Bi?((Lt={_transport:si,_isSync:vr})[Ex]=Bi,Lt):null}return null},Je.getFallbackInst=function(){return v},Je[su]=function(Lt,Hn){yi()}})}return n.__ieDyn=1,n}(),n5="on",r5="attachEvent",kM="addEventListener",Iw="detachEvent",LM="removeEventListener",Mw="events",Ow="visibilitychange",cb="pagehide",HM="beforeunload",UM=Kf("aiEvtPageHide"),RN=(Kf("aiEvtPageShow"),/\.[\.]+/g),xN=/[\.]+$/,i5=1,lb=D0("events"),o5=/^([^.]*)(?:\.(.+)|)/;function BM(n){return n&&n[ky]?n[ky](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Bs):n}function zM(o,i){var e;return i&&(e=Bs,ts(i)?(e=Bs,lo(i,function(s){(s=BM(s))&&("."!==s[0]&&(s="."+s),e+=s)})):e=BM(i),e)&&("."!==e[0]&&(e="."+e),o=(o||Bs)+e),i=o5.exec(o||Bs)||[],(o={})[A_]=i[1],o.ns=(i[2]||Bs).replace(RN,".").replace(xN,Bs)[_m](".").sort().join("."),o}function NN(n,t,e){return(n=lb.get(n,Mw,{},e=void 0===e||e))[t]||(n[t]=[])}function a5(n,t,e,i){n&&t&&t[A_]&&(n[LM]?n[LM](t[A_],e,i):n[Iw]&&n[Iw](n5+t[A_],e))}function jM(n,t,e,i){for(var o=t[Ua];o--;){var s=t[o];!s||e.ns&&e.ns!==s.evtName.ns||i&&!i(s)||(a5(n,s.evtName,s[Cx],s.capture),t[zC](o,1))}}function Tm(n,t){var e=t?zM("xx",e=ts(t)?[n].concat(t):[n,t]).ns[_m]("."):n;return e}function U_(n,t,e,i,o){void 0===o&&(o=!1);var s,f=!1;if(n)try{var v,I=zM(t,i);(f=function DN(n,t,e,i){var o=!1;return n&&t&&t[A_]&&e&&(n[kM]?(n[kM](t[A_],e,i),o=!0):n[r5]&&(n[r5](n5+t[A_],e),o=!0)),o}(n,I,e,o))&&lb.accept(n)&&((s={guid:i5++,evtName:I})[Cx]=e,s.capture=o,v=s,NN(n,I.type)[ml](v))}catch{}return f}function ub(n,t,e,i,o){if(void 0===o&&(o=!1),n)try{var s=zM(t,i),f=!1;(function s5(n,t,e){var i;t[A_]?jM(n,NN(n,t[A_]),t,e):(hs(i=lb.get(n,Mw,{}),function(o,s){jM(n,s,t,e)}),0===m_(i)[Ua]&&lb.kill(n,Mw))})(n,s,function(v){return!((!s.ns||e)&&v[Cx]!==e)&&(f=!0)}),f||a5(n,s,e,o)}catch{}}function Pw(n,t,e,i){var o=!1;return t&&n&&0<n[Ua]&&lo(n,function(s){!s||e&&-1!==uh(e,s)||(o=function kN(n,t,e){var o,i=!1;return(o=Np())&&(i=U_(o,n,t,e),i=U_(o.body,n,t,e)||i),(o=Kd())&&U_(o,n,t,e)||i}(s,t,i)||o)}),o}function $M(n,t,e){n&&ts(n)&&lo(n,function(i){i&&function xU(n,t,e){var i;(i=Np())&&(ub(i,n,t,e),ub(i.body,n,t,e)),(i=Kd())&&ub(i,n,t,e)}(i,t,e)})}function db(n,t,e){var i=Tm(UM,e),o=Pw([cb],n,t,i);return!(o=t&&-1!==uh(t,Ow)?o:Pw([Ow],function(s){var f=Kd();n&&f&&"hidden"===f.visibilityState&&n(s)},t,i)||o)&&t?db(n,null,e):o}var Rw="_aiHooks",d5=["req","rsp","hkErr","fnErr"];function VM(n,t){if(n)for(var e=0;e<n[Ua]&&!t(n[e],e);e++);}function xw(n,t,e,i,o){0<=o&&o<=2&&VM(n,function(v,f){var I=(v=v.cbks)[d5[o]];if(I){t.ctx=function(){return i[f]=i[f]||{}};try{I[g0](t.inst,e)}catch(k){I=t.err;try{var D=v[d5[2]];D&&(t.err=k,D[g0](t.inst,e))}catch{}finally{t.err=I}}}})}function GM(n,t,e,i){var o=null;return n&&(Hf(n,t)?o=n:e&&(o=GM(S8(n),t,i,!1))),o}function LN(s,t,e,i){var o=e&&e[Rw];return o||((e=function h5(n){return function(){var t=arguments,e=n.h,i=((o={})[w_]=n.n,o.inst=this,o.ctx=null,o.set=function(I,D){(t=f([],t))[I]=D,s=f([i],t)},o),o=[],s=f([i],t);function f(I,D){return VM(D,function(k){I[ml](k)}),I}i.evt=$u("event"),xw(e,i,s,o,0);var v=n.f;if(v)try{i.rslt=v[g0](this,t)}catch(I){throw i.err=I,xw(e,i,s,o,3),I}return xw(e,i,s,o,1),i.rslt}}(o={i:0,n:t,f:e,h:[]}))[Rw]=o,s[t]=e),s={id:o.i,cbks:i,rm:function(){var f=this.id;VM(o.h,function(v,I){if(v.id===f)return o.h[zC](I,1),1})}},o.i++,o.h[ml](s),s}function qM(n,t,e,i,o){return void 0===i&&(i=!0),n&&t&&e&&(n=GM(n,t,i,o))&&typeof(i=n[t])===e8?LN(n,t,i,e):null}function Nw(n,t,e,i,o){return n&&t&&e&&(i=GM(n,t,i,o)||n)?LN(i,t,i[t],e):null}var Dw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",FN="sampleRate",KM="ProcessLegacy",HN="http.method",V0="https://dc.services.visualstudio.com",hb="/v2/track",Lg="not_specified",YM="iKey",rl=function O4(n){return function jR(n){var t={};return hs(n,function(e,i){t[e]=i[1],t[i[0]]=i[1]}),xp(t)}(n)}({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),G0="split",Ba="length",kw="toLowerCase",pb="ingestionendpoint",Lw="toString",Fw="push",WM="removeItem",Qf="name",B_="message",q0="count",K0="preTriggerDate",QM="disabled",XM="interval",UN="daysOfMonth",hh="date",Yy="getUTCDate",ZM="stringify",BN="pathname",f5="correlationHeaderExcludePatterns",Hw="exceptions",rp="parsedStack",Am="properties",Fg="measurements",Y0="sizeInBytes",Im="typeName",fb="severityLevel",JM="problemGroup",eO="isManual",tO="CreateFromInterface",W0="assembly",Q0="fileName",X0="hasFullStack",gb="level",mb="method",_b="line",nO="duration",rO="receivedResponse";function Wy(n,t,e){var i=t[Ba],o=function DU(n,t){var e;return t&&150<(t=Vu(Xh(t)))[Ba]&&(e=Bf(t,0,150),Di(n,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),e||t}(n,t);if(o[Ba]!==i){for(var s=0,f=o;void 0!==e[f];)s++,f=Bf(o,0,147)+LU(s);o=f}return o}function Ku(n,t,e){var i;return void 0===e&&(e=1024),t&&(e=e||1024,(t=Vu(Xh(t)))[Ba]>e)&&(i=Bf(t,0,e),Di(n,2,61,"string value is too long. It has been truncated to "+e+" characters.",{value:t},!0)),i||t}function yb(n,t){return jN(n,t,2048,66)}function zN(n,t){var e;return t&&32768<t[Ba]&&(e=Bf(t,0,32768),Di(n,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),e||t}function Z0(n,t){var e;return t&&(e={},hs(t,function(i,o){if(cd(o)&&eb())try{o=xg()[ZM](o)}catch(s){Di(n,2,49,"custom property is not valid",{exception:s},!0)}o=Ku(n,o,8192),i=Wy(n,i,e),e[i]=o}),t=e),t}function z_(n,t){var e;return t&&(e={},hs(t,function(i,o){i=Wy(n,i,e),e[i]=o}),t=e),t}function jN(n,t,e,i){var o;return t&&(t=Vu(Xh(t)))[Ba]>e&&(o=Bf(t,0,e),Di(n,2,i,"input is too long, it has been truncated to "+e+" characters.",{data:t},!0)),o||t}function LU(n){return zf(n="00"+n,n[Ba]-3)}var $N=Kd()||{},VN=0,FU=[null,null,null,null,null];function GN(n){var t=VN,e=FU,i=e[t];return $N.createElement?e[t]||(i=e[t]=$N.createElement("a")):i={host:_5(n,!0)},i.href=n,++t>=e[Ba]&&(t=0),VN=t,i}function _5(n,t){return(n=qN(n,t)||"")&&null!=(t=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i))&&3<t[Ba]&&ha(t[2])&&0<t[2][Ba]?t[2]+(t[3]||""):n}function qN(n,t){var e=null;return n&&null!=(n=n.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i))&&2<n[Ba]&&ha(n[2])&&0<n[2][Ba]&&(e=n[2]||"",t)&&2<n[Ba]&&(t=(n[1]||"")[kw](),n=n[3]||"",e+=n="http"===t&&":80"===n||"https"===t&&":443"===n?"":n),e}var y5=[V0+hb,"https://breeze.aimon.applicationinsights.io"+hb,"https://dc-int.services.visualstudio.com"+hb];function KN(n){return-1!==uh(y5,n[kw]())}function C5(n,t,f){if(!t||n&&n.disableCorrelationHeaders)return!1;if(n&&n[f5])for(var i=0;i<n.correlationHeaderExcludePatterns[Ba];i++)if(n[f5][i].test(t))return!1;var s,o=GN(t).host[kw]();if(!o||-1===kp(o,":443")&&-1===kp(o,":80")||(o=(qN(t,!0)||"")[kw]()),(!n||!n.enableCorsCorrelation)&&o&&o!==f)return!1;if((f=n&&n.correlationHeaderDomains)&&(lo(f,function(I){I=new RegExp(I.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")),s=s||I.test(o)}),!s))return!1;var v=n&&n.correlationHeaderExcludedDomains;if(!v||0===v[Ba])return!0;for(i=0;i<v[Ba];i++)if(new RegExp(v[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&0<o[Ba]}function YN(n){if(n&&(n=function b5(n,t){if(n)for(var e=n[G0](","),i=0;i<e[Ba];++i){var o=e[i][G0]("=");if(2===o[Ba]&&o[0]===t)return o[1]}}(n,rl[1]))&&"cid-v1:"!==n)return n}function iO(){var n=b_();return n&&n.now&&n.timing&&0<(n=n.now()+n.timing.navigationStart)?n:Ag()}function Bp(n,t){return 0===n||0===t||Xr(n)||Xr(t)?null:t-n}function WN(n,t){var e=n||{};return{getName:function(){return e[Qf]},setName:function(i){t&&t.setName(i),e[Qf]=i},getTraceId:function(){return e.traceID},setTraceId:function(i){t&&t.setTraceId(i),bM(i)&&(e.traceID=i)},getSpanId:function(){return e.parentID},setSpanId:function(i){t&&t.setSpanId(i),EM(i)&&(e.parentID=i)},getTraceFlags:function(){return e.traceFlags},setTraceFlags:function(i){t&&t.setTraceFlags(i),e.traceFlags=i}}}var Uw=function s$(n){return A4(n,1,0,xp)}({LocalStorage:0,SessionStorage:1}),Qy=void 0,Xy=void 0,S5="";function oO(){return J0()?aO(Uw.LocalStorage):null}function aO(n){try{if(Xr(jf()))return null;var t=(new Date)[Lw](),e=$u(n===Uw.LocalStorage?"localStorage":"sessionStorage"),i=S5+t,o=(e.setItem(i,t),e.getItem(i)!==t);if(e[WM](i),!o)return e}catch{}return null}function w5(){return zw()?aO(Uw.SessionStorage):null}function T5(){Xy=Qy=!1}function QN(n){S5=n||""}function Bw(){Qy=J0(!0),Xy=zw(!0)}function J0(n){return Qy=n||void 0===Qy?!!aO(Uw.LocalStorage):Qy}function A5(n,t){var e=oO();if(null!==e)try{return e.getItem(t)}catch(i){Qy=!1,Di(n,2,1,"Browser failed read of local storage. "+Cc(i),{exception:io(i)})}return null}function I5(n,t,e){var i=oO();if(null!==i)try{return i.setItem(t,e),!0}catch(o){Qy=!1,Di(n,2,3,"Browser failed write to local storage. "+Cc(o),{exception:io(o)})}return!1}function zw(n){return Xy=n||void 0===Xy?!!aO(Uw.SessionStorage):Xy}function XN(n,t){var e=w5();if(null!==e)try{return e.getItem(t)}catch(i){Xy=!1,Di(n,2,2,"Browser failed read of session storage. "+Cc(i),{exception:io(i)})}return null}function M5(n,t,e){var i=w5();if(null!==i)try{return i.setItem(t,e),!0}catch(o){Xy=!1,Di(n,2,4,"Browser failed write to session storage. "+Cc(o),{exception:io(o)})}return!1}var zU=function(n,t){var e,i,o,s,f,v,I,D=this,k=!1,X=!1;function fe(zn,Zn,Er,yi){if(k){if(!function(Bo){try{var Li=Se(Bo);return function nN(n){return 0<n?Math.floor(nb()/kg*(n+1))>>>0:0}(1e6)<=Li.limit.samplingRate}catch{}return!1}(zn))return;var Lt=Se(zn),Hn=sr(zn),hn=Je(Lt,e,Hn),vr=!1,si=0,Bi=ri(zn);try{hn&&!Bi?(si=Math.min(Lt.limit.maxSendNumber,Hn[q0]+1),vr=!(Hn[q0]=0),f[zn]=!0,Hn[K0]=new Date):(f[zn]=hn,Hn[q0]+=1);var Un=lt(zn);_n(i,Un,Hn);for(var pi=0;pi<si;pi++)Di(i,Er||1,zn,Zn)}catch{}return{isThrottled:vr,throttleNum:si}}return yi&&tn(zn)[Fw]({msgID:zn,message:Zn,severity:Er}),null}function Se(zn){return o[zn]||o[109]}function Ve(zn,Zn){var Er,yi,si,Bi,Un;try{var Lt=Zn||{},Hn={},hn=(Hn[QM]=!!Lt[QM],Lt[XM]||{}),vr=(X=(null===hn?void 0:hn.daysOfMonth)&&0<(null===hn?void 0:hn.daysOfMonth[Ba]),Hn[XM]=(Bi=null==(si=(si=hn)||{})?void 0:si.monthInterval,Un=si?.dayInterval,Xr(Bi)&&Xr(Un)&&(si.monthInterval=3,X||(si[UN]=[28],X=!0)),{monthInterval:si?.monthInterval,dayInterval:si?.dayInterval,daysOfMonth:si?.daysOfMonth}),{samplingRate:(null==(Er=Lt.limit)?void 0:Er.samplingRate)||100,maxSendNumber:(null==(yi=Lt.limit)?void 0:yi.maxSendNumber)||1});Hn.limit=vr,o[zn]=Hn}catch{}}function Je(zn,Zn,Er){var yi,Lt;return!(!zn||zn[QM]||!Zn||!x0(Er))&&(Zn=mt(),Er=Er[hh],yi=1,null!=(zn=zn[XM])&&zn.monthInterval&&(Lt=12*(Zn.getUTCFullYear()-Er.getUTCFullYear())+Zn.getUTCMonth()-Er.getUTCMonth(),yi=Yn(zn.monthInterval,0,Lt)),Lt=1,X?Lt=uh(zn[UN],Zn[Yy]()):null!=zn&&zn.dayInterval&&(Zn=Math.floor((Zn.getTime()-Er.getTime())/864e5),Lt=Yn(zn.dayInterval,0,Zn)),0<=yi)&&0<=Lt}function lt(zn,Zn){return Zn=x0(Zn)?Zn:"",zn?"appInsightsThrottle"+Zn+"-"+zn:null}function mt(zn){try{if(!zn)return new Date;var Zn=new Date(zn);if(!isNaN(Zn.getDate()))return Zn}catch{}return null}function _n(zn,Zn,Er){try{return I5(zn,Zn,Vu(JSON[ZM](Er)))}catch{}}function Yn(zn,Zn,Er){return zn<=0?1:Zn<=Er&&(Er-Zn)%zn==0?Math.floor((Er-Zn)/zn)+1:-1}function sr(zn){try{var Zn,Er=s[zn];return Er||(Zn=lt(zn,v),Er=function(yi,Lt,Hn){try{var hn,vr={date:mt(),count:0};return yi?{date:mt((hn=JSON.parse(yi))[hh])||vr[hh],count:hn[q0]||vr[q0],preTriggerDate:hn.preTriggerDate?mt(hn[K0]):void 0}:(_n(Lt,Hn,vr),vr)}catch{}return null}(A5(i,Zn),i,Zn),s[zn]=Er),s[zn]}catch{}return null}function ri(zn){var Zn,Er=f[zn];return Xr(Er)&&(Er=!1,(Zn=sr(zn))&&(Er=function(yi){try{var Lt;if(yi)return Lt=new Date,yi.getUTCFullYear()===Lt.getUTCFullYear()&&yi.getUTCMonth()===Lt.getUTCMonth()&&yi[Yy]()===Lt[Yy]()}catch{}return!1}(Zn[K0])),f[zn]=Er),f[zn]}function tn(zn){return Xr((I=I||{})[zn])&&(I[zn]=[]),I[zn]}i=Uy(n),f={},s={},I={},o={},Ve(109),v=x0(t)?t:"",n.addUnloadHook(xu(n.config,function(zn){zn=zn.cfg,e=J0(),hs(zn.throttleMgrCfg||{},function(Zn,Er){Ve(parseInt(Zn),Er)})})),D._getDbgPlgTargets=function(){return[I]},D.getConfig=function(){return o},D.canThrottle=function(zn){var Zn=sr(zn);return Je(Se(zn),e,Zn)},D.isTriggered=ri,D.isReady=function(){return k},D.flush=function(zn){try{var Zn,Er=tn(zn);if(Er&&0<Er[Ba])return Zn=Er.slice(0),I[zn]=[],lo(Zn,function(yi){fe(yi.msgID,yi[B_],yi.severity,!1)}),!0}catch{}return!1},D.flushAll=function(){try{var zn;if(I)return zn=!0,hs(I,function(Zn){Zn=D.flush(parseInt(Zn)),zn=zn&&Zn}),zn}catch{}return!1},D.onReadyState=function(zn,Zn){return void 0===Zn&&(Zn=!0),(k=!!Xr(zn)||zn)&&Zn?D.flushAll():null},D.sendMessage=function(zn,Zn,Er){return fe(zn,Zn,Er,!0)}},GU=function(n,t,e){var i=this;this.ver=1,this.sampleRate=100,this.tags={},this[Qf]=Ku(n,e)||Lg,this.data=t,this.time=N0(new Date),this.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===i.sampleRate?4:1},tags:1,data:1}},Zy=function(){function n(t,e,i,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0},this.ver=2,this[Qf]=Ku(t,e)||Lg,this[Am]=Z0(t,i),this[Fg]=z_(t,o)}return n.envelopeType="Microsoft.ApplicationInsights.{0}.Event",n.dataType="EventData",n}(),vb="error",zp="stack",ZN="stackDetails",P5="errorSrc",JN="message",R5="description";function sO(n,t){var e=n;return e&&!ha(e)&&(JSON&&JSON[ZM]?(e=JSON[ZM](n),!t||e&&"{}"!==e||(e=Sa(n[Lw])?n[Lw]():""+n)):e=n+" - (Missing JSON.stringify)"),e||""}function cO(n,t){var e=n;return n&&((e=e&&!ha(e)&&(n[JN]||n[R5])||e)&&!ha(e)&&(e=sO(e,!0)),n.filename)&&(e=e+" @"+(n.filename||"")+":"+(n.lineno||"?")+":"+(n.colno||"?")),(e=t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===kp(e||"",t)?t+": "+e:e)||""}function eD(n){return n&&n.src&&ha(n.src)&&n.obj&&ts(n.obj)}function e1(t){var e=(t=ha(t=t||"")?t:ha(t[zp])?t[zp]:""+t)[G0]("\n");return{src:t,obj:e}}function WU(n){var t,e=null;if(n)try{n[zp]?e=e1(n[zp]):n[vb]&&n[vb][zp]?e=e1(n[vb][zp]):n.exception&&n.exception[zp]?e=e1(n.exception[zp]):eD(n)?e=n:eD(n[ZN])?e=n[ZN]:Np()&&Np().opera&&n[JN]?e=function x5(n){for(var t=[],e=n[G0]("\n"),i=0;i<e[Ba];i++){var o=e[i];e[i+1]&&(o+="@"+e[i+1],i++),t[Fw](o)}return{src:n,obj:t}}(n[B_]):n.reason&&n.reason[zp]?e=e1(n.reason[zp]):ha(n)?e=e1(n):(t=n[JN]||n[R5]||"",ha(n[P5])&&(t&&(t+="\n"),t+=" from "+n[P5]),t&&(e=e1(t)))}catch(i){e=e1(i)}return e||{src:"",obj:null}}function jw(n){var t="";if(n&&!(t=n.typeName||n[Qf]||""))try{var e=/function (.{1,200})\(/.exec(n.constructor[Lw]());t=e&&1<e[Ba]?e[1]:""}catch{}return t}function tD(n){if(n)try{var t,e;if(!ha(n))return t=jw(n),(e=sO(n,!1))&&"{}"!==e||(n[vb]&&(t=jw(n=n[vb])),e=sO(n,!0)),0!==kp(e,t)&&"String"!==t?t+":"+e:e}catch{}return""+(n||"")}var gf=function(){function n(t,e,i,o,s,f){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var v=this;v.ver=2,function YU(n){try{if(cd(n))return"ver"in n&&"exceptions"in n&&"properties"in n}catch{}return!1}(e)?(v[Hw]=e[Hw]||[],v[Am]=e[Am],v[Fg]=e[Fg],e[fb]&&(v[fb]=e[fb]),e.id&&(v.id=e.id,e[Am].id=e.id),e[JM]&&(v[JM]=e[JM]),Xr(e[eO])||(v[eO]=e[eO])):(i=i||{},f&&(i.id=f),v[Hw]=[new nD(t,e,i)],v[Am]=Z0(t,i),v[Fg]=z_(t,o),s&&(v[fb]=s),f&&(v.id=f))}return n.CreateAutoException=function(t,e,i,o,s,f,v,I){var D=jw(s||f||t),k={};return k[B_]=cO(t,D),k.url=e,k.lineNumber=i,k.columnNumber=o,k.error=tD(s||f||t),k.evt=tD(f||t),k[Im]=D,k.stackDetails=WU(v||s||f),k.errorSrc=I,k},n.CreateFromInterface=function(t,e,i,o){var s=e[Hw]&&BS(e[Hw],function(f){return nD[tO](t,f)});return new n(t,ep(ep({},e),{exceptions:s}),i,o)},n.prototype.toInterface=function(){var t=this.properties,e=this.measurements,i=this.severityLevel,o=this.problemGroup,s=this.id,f=this.isManual,v=(v=this.exceptions)instanceof Array&&BS(v,function(D){return D.toInterface()})||void 0,I={ver:"4.0"};return I[Hw]=v,I.severityLevel=i,I.properties=t,I.measurements=e,I.problemGroup=o,I.id=s,I.isManual=f,I},n.CreateSimpleException=function(t,e,i,o,s,f){var v;return{exceptions:[((v={})[X0]=!0,v.message=t,v.stack=s,v.typeName=e,v)]}},n.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",n.dataType="ExceptionData",n.formatError=tD,n}(),nD=function(){function n(t,e,i){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var o,s,f=this;!function KU(n){try{if(cd(n))return"hasFullStack"in n&&"typeName"in n}catch{}return!1}(e)?(s=(o=e)&&o.evt,Iy(o)||(o=o[vb]||s||o),f[Im]=Ku(t,jw(o))||Lg,f[B_]=zN(t,cO(e||o,f[Im]))||Lg,s=e[ZN]||WU(e),f[rp]=function N5(n){if((n=n.obj)&&0<n[Ba]){var t=[],e=0,i=0;if(lo(n,function(k){k=k[Lw](),$w.regex.test(k)&&(k=new $w(k,e++),i+=k[Y0],t[Fw](k))}),32768<i)for(var o=0,s=t[Ba]-1,f=0,v=o,I=s;o<s;){if(32768<(f+=t[o][Y0]+t[s][Y0])){t.splice(v,I-v+1);break}v=o,I=s,o++,s--}}return t}(s),ts(f[rp])&&BS(f[rp],function(v){v[W0]=Ku(t,v[W0]),v[Q0]=Ku(t,v[Q0])}),f[zp]=function kU(n,t){var e,i;return t&&32768<(i=""+t)[Ba]&&(e=Bf(i,0,32768),Di(n,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0)),e||t}(t,function QU(n){var t="";return n&&(n.obj?lo(n.obj,function(e){t+=e+"\n"}):t=n.src||""),t}(s)),f.hasFullStack=ts(f.parsedStack)&&0<f.parsedStack[Ba],i&&(i[Im]=i[Im]||f[Im])):(f[Im]=e[Im],f[B_]=e[B_],f[zp]=e[zp],f[rp]=e[rp]||[],f[X0]=e[X0])}return n.prototype.toInterface=function(){var t,e=this[rp]instanceof Array&&BS(this[rp],function(i){return i.toInterface()});return(t={id:this.id,outerId:this.outerId,typeName:this[Im],message:this[B_],hasFullStack:this[X0],stack:this[zp]})[rp]=e||void 0,t},n.CreateFromInterface=function(t,e){var i=e[rp]instanceof Array&&BS(e[rp],function(o){return $w[tO](o)})||e[rp];return new n(t,ep(ep({},e),{parsedStack:i}))},n}(),$w=function(){function n(t,e){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var i,o=this;o[Y0]=0,"string"==typeof t?(i=t,o[gb]=e,o[mb]="<no_method>",o[W0]=Vu(i),o[Q0]="",o[_b]=0,(e=i.match(n.regex))&&5<=e[Ba]&&(o[mb]=Vu(e[2])||o[mb],o[Q0]=Vu(e[4]),o[_b]=parseInt(e[5])||0)):(o[gb]=t[gb],o[mb]=t[mb],o[W0]=t[W0],o[Q0]=t[Q0],o[_b]=t[_b],o[Y0]=0),o.sizeInBytes+=o.method[Ba],o.sizeInBytes+=o.fileName[Ba],o.sizeInBytes+=o.assembly[Ba],o[Y0]+=n.baseSize,o.sizeInBytes+=o.level.toString()[Ba],o.sizeInBytes+=o.line.toString()[Ba]}return n.CreateFromInterface=function(t){return new n(t,null)},n.prototype.toInterface=function(){return{level:this[gb],method:this[mb],assembly:this[W0],fileName:this[Q0],line:this[_b]}},n.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,n.baseSize=58,n}(),rD=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},Jy=function(){function n(t,e,i,o,s,f,v,I,D){this.aiDataContract={ver:1,metrics:1,properties:0},this.ver=2;var k=new rD;k[q0]=0<o?o:void 0,k.max=isNaN(f)||null===f?void 0:f,k.min=isNaN(s)||null===s?void 0:s,k[Qf]=Ku(t,e)||Lg,k.value=i,k.stdDev=isNaN(v)||null===v?void 0:v,this.metrics=[k],this[Am]=Z0(t,I),this[Fg]=z_(t,D)}return n.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",n.dataType="MetricData",n}(),Cb="";function Mm(s){(isNaN(s)||s<0)&&(s=0),s=Math.round(s);var t=Cb+s%1e3,e=Cb+Math.floor(s/1e3)%60,i=Cb+Math.floor(s/6e4)%60,o=Cb+Math.floor(s/36e5)%24;return(0<(s=Math.floor(s/864e5))?s+".":Cb)+(o[Ba]<2?"0"+o:o)+":"+(i[Ba]<2?"0"+i:i)+":"+(e[Ba]<2?"0"+e:e)+"."+(1===t[Ba]?"00"+t:2===t[Ba]?"0"+t:t)}var t1=function(){function n(t,e,i,o,s,f,v){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},this.ver=2,this.id=function g5(n,t){return t&&jN(n,t,128,69)[Lw]()}(t,v),this.url=yb(t,i),this[Qf]=Ku(t,e)||Lg,isNaN(o)||(this[nO]=Mm(o)),this[Am]=Z0(t,s),this[Fg]=z_(t,f)}return n.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",n.dataType="PageviewData",n}(),ev=function(){function n(t,Ve,i,o,s,f,v,I,D,k,X,fe){void 0===D&&(D="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Se=this;Se.ver=2,Se.id=Ve,Se[nO]=Mm(s),Se.success=f,Se.resultCode=v+"",Se.type=Ku(t,D),Ve=function E5(n,t,e,i){var o,s,f,v=i,I=i;return v=t&&0<t[Ba]?(f=(o=GN(t)).host,v||(null!=o[BN]?("/"!==(s=0===o.pathname[Ba]?"/":o[BN]).charAt(0)&&(s="/"+s),I=o[BN],Ku(n,e?e+" "+s:s)):Ku(n,t))):f=i,{target:f,name:v,data:I}}(t,i,I,o),Se.data=yb(t,o)||Ve.data,Se.target=Ku(t,Ve.target),k&&(Se.target="".concat(Se.target," | ").concat(k)),Se[Qf]=Ku(t,Ve[Qf]),Se[Am]=Z0(t,X),Se[Fg]=z_(t,fe)}return n.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",n.dataType="RemoteDependencyData",n}(),n1=function(){function n(t,e,i,o,s){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},this.ver=2,this[B_]=zN(t,e=e||Lg),this[Am]=Z0(t,o),this[Fg]=z_(t,s),i&&(this[fb]=i)}return n.envelopeType="Microsoft.ApplicationInsights.{0}.Message",n.dataType="MessageData",n}(),bb=function(){function n(t,e,i,o,s,f,v){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var I=this;I.ver=2,I.url=yb(t,i),I[Qf]=Ku(t,e)||Lg,I[Am]=Z0(t,s),I[Fg]=z_(t,f),v&&(I.domProcessing=v.domProcessing,I[nO]=v[nO],I.networkConnect=v.networkConnect,I.perfTotal=v.perfTotal,I[rO]=v[rO],I.sentRequest=v.sentRequest)}return n.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",n.dataType="PageviewPerformanceData",n}(),r1=function(n,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=n,this.baseData=t};function tv(n){var t="ai."+n+".";return function(e){return t+e}}var Eb=tv("application"),yl=tv("device"),i1=tv("location"),j_=tv("operation"),Vw=tv("session"),$_=tv("user"),nv=tv("cloud"),Gw=tv("internal"),iD=function(n){function t(){return n.call(this)||this}return P_(t,n),t}(function Yx(n){return function(){var t=this;n&&hs(n,function(e,i){t[e]=i})}}({applicationVersion:Eb("ver"),applicationBuild:Eb("build"),applicationTypeId:Eb("typeId"),applicationId:Eb("applicationId"),applicationLayer:Eb("layer"),deviceId:yl("id"),deviceIp:yl("ip"),deviceLanguage:yl("language"),deviceLocale:yl("locale"),deviceModel:yl("model"),deviceFriendlyName:yl("friendlyName"),deviceNetwork:yl("network"),deviceNetworkName:yl("networkName"),deviceOEMName:yl("oemName"),deviceOS:yl("os"),deviceOSVersion:yl("osVersion"),deviceRoleInstance:yl("roleInstance"),deviceRoleName:yl("roleName"),deviceScreenResolution:yl("screenResolution"),deviceType:yl("type"),deviceMachineName:yl("machineName"),deviceVMName:yl("vmName"),deviceBrowser:yl("browser"),deviceBrowserVersion:yl("browserVersion"),locationIp:i1("ip"),locationCountry:i1("country"),locationProvince:i1("province"),locationCity:i1("city"),operationId:j_("id"),operationName:j_("name"),operationParentId:j_("parentId"),operationRootId:j_("rootId"),operationSyntheticSource:j_("syntheticSource"),operationCorrelationVector:j_("correlationVector"),sessionId:Vw("id"),sessionIsFirst:Vw("isFirst"),sessionIsNew:Vw("isNew"),userAccountAcquisitionDate:$_("accountAcquisitionDate"),userAccountId:$_("accountId"),userAgent:$_("userAgent"),userId:$_("id"),userStoreRegion:$_("storeRegion"),userAuthUserId:$_("authUserId"),userAnonymousUserAcquisitionDate:$_("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:$_("authUserAcquisitionDate"),cloudName:nv("name"),cloudRole:nv("role"),cloudRoleVer:nv("roleVer"),cloudRoleInstance:nv("roleInstance"),cloudEnvironment:nv("environment"),cloudLocation:nv("location"),cloudDeploymentUnit:nv("deploymentUnit"),internalNodeName:Gw("nodeName"),internalSdkVersion:Gw("sdkVersion"),internalAgentVersion:Gw("agentVersion"),internalSnippet:Gw("snippet"),internalSdkSrc:Gw("sdkSrc")}));function rv(n,t,e,v,o,s){e=Ku(v,e)||Lg,(Xr(n)||Xr(t)||Xr(e))&&Rp("Input doesn't contain all required fields"),v="";var f,I=(n[YM]&&(v=n[YM],delete n[YM]),(f={})[Qf]=e,f.time=N0(new Date),f.iKey=v,f.ext=s||{},f.tags=[],f.data={},f.baseType=t,f.baseData=n,f);return Xr(o)||hs(o,function(D,k){I.data[D]=k}),I}var xl=new iD;function qw(n){var t,e=null;return Sa(Event)?e=new Event(n):(t=Kd())&&t.createEvent&&(e=t.createEvent("Event")).initEvent(n,!0,!0),e}function oD(n,t){ub(n,null,null,t)}var dO="AppInsightsPropertiesPlugin",hO="AppInsightsChannelPlugin",D5="ApplicationInsightsAnalytics",Kw="toString",Yw="isStorageUseDisabled",o1="_addHook",Dh="core",mf="dataType",a1="envelopeType",_f="diagLog",V_="track",pO="trackPageView",aD="trackPreviousPageVisit",s1="sendPageViewInternal",c1="startTime",sD="properties",Hg="duration",k5="sendPageViewPerformanceInternal",cD="populatePageViewPerformanceEvent",Ww="href",fO="sendExceptionInternal",Sb="exception",wb="error",lD="_onerror",Qw="errorSrc",Om="lineNumber",Xw="columnNumber",uD="message",gO="CreateAutoException",Zw="addTelemetryInitializer",Jw="autoTrackPageVisitTime",F5="isBrowserLinkTrackingEnabled",eT="length",dD="enableAutoRouteTracking",H5="enableUnhandledPromiseRejectionTracking",U5="autoUnhandledPromiseInstrumented",B5="getEntriesByType",z5="isPerformanceTimingSupported",j5="getPerformanceTiming",mO="navigationStart",hD="shouldCollectDuration",pD="isPerformanceTimingDataReady",l1="responseStart",_O="loadEventEnd",yO="responseEnd",vO="connectEnd",XU="pageVisitStartTime",ZU=function(){function n(t,e,i,o){Rl(n,this,function(s){var f,v=null,I=[],D=!1,k=!1;function X(Se){i&&i.flush(Se,function(){})}i&&(f=i.logger),s[pO]=function(Se,Ve){var Je,lt,mt,_n,Yn,sr,ri=Se.name,tn=(!Xr(ri)&&"string"==typeof ri||(lt=Kd(),ri=Se.name=lt&&lt.title||""),Se.uri);!Xr(tn)&&"string"==typeof tn||(lt=bm(),tn=Se.uri=lt&&lt[Ww]||""),k||((Je=(lt=b_())&&lt[B5]&&lt[B5]("navigation"))&&Je[0]&&!Wl(lt.timeOrigin)?(Je=Je[0].loadEventStart,Se[c1]=new Date(lt.timeOrigin+Je)):(lt=(Ve||Se[sD]||{})[Hg]||0,Se[c1]=new Date((new Date).getTime()-lt)),k=!0),o[z5]()?(mt=!1,0<(Yn=o[j5]()[mO])&&(_n=Bp(Yn,+new Date),o[hD](_n)||(_n=void 0)),Xr(Ve)||Xr(Ve[Hg])||(sr=Ve[Hg]),!e&&isNaN(sr)||(isNaN(sr)&&((Ve=Ve||{})[Hg]=_n),t[s1](Se,Ve),X(!0),mt=!0),Ve=Ve||{},function fe(Se){I.push(Se),function Ve(){v=v||Lp(function(){v=null;var Je=I.slice(0),lt=!1;I=[],lo(Je,function(mt){mt()?lt=!0:I.push(mt)}),0<I[eT]&&Ve(),lt&&X(!0)},100)}()}(function(){var zn,Zn=!1;try{o[pD]()?(Zn=!0,o[cD](zn={name:ri,uri:tn}),zn.isValid||mt?(mt||(Ve[Hg]=zn.durationMs,t[s1](Se,Ve)),D||(t[k5](zn,Ve),D=!0)):(Ve[Hg]=_n,t[s1](Se,Ve))):0<Yn&&6e4<Bp(Yn,+new Date)&&(Zn=!0,mt||(Ve[Hg]=6e4,t[s1](Se,Ve)))}catch(Er){Di(f,1,38,"trackPageView failed on page load calculation: "+Cc(Er),{exception:io(Er)})}return Zn})):(t[s1](Se,Ve),X(!0),_I()||Di(f,2,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info."))},s.teardown=function(Se,Ve){var Je;v&&(v.cancel(),v=null,Je=I.slice(0),I=[],lo(Je,function(lt){lt()}))}})}return n.__ieDyn=1,n}(),CO=["googlebot","adsbot-google","apis-google","mediapartners-google"];function Tb(){var n=b_();return n&&!!n.timing}function tB(){var n;return(n=(n=b_())?n.timing:0)&&0<n.domainLookupStart&&0<n[mO]&&0<n[l1]&&0<n.requestStart&&0<n[_O]&&0<n[yO]&&0<n[vO]&&0<n.domLoading}function fD(){return Tb()?b_().timing:null}function V5(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=($f()||{}).userAgent,i=!1;if(e)for(var o=0;o<CO[eT];o++)i=i||-1!==kp(e.toLowerCase(),CO[o]);if(i)return!1;for(o=0;o<n[eT];o++)if(n[o]<0||36e5<=n[o])return!1;return!0}var ip,gD=function(){function n(t){var e=Uy(t);Rl(n,this,function(i){i[cD]=function(o){o.isValid=!1;var s=function u1(){return function eB(){var n=b_();return n&&n.getEntriesByType&&0<n.getEntriesByType("navigation")[eT]}()?b_()[B5]("navigation")[0]:null}(),f=fD(),v=0,I=0,D=0,k=0,X=0;(s||f)&&(X=s?(v=s[Hg],I=0===s[c1]?s[vO]:Bp(s[c1],s[vO]),D=Bp(s.requestStart,s[l1]),k=Bp(s[l1],s[yO]),Bp(s.responseEnd,s[_O])):(v=Bp(f[mO],f[_O]),I=Bp(f[mO],f[vO]),D=Bp(f.requestStart,f[l1]),k=Bp(f[l1],f[yO]),Bp(f.responseEnd,f[_O])),0===v?Di(e,2,10,"error calculating page view performance.",{total:v,network:I,request:D,response:k,dom:X}):i[hD](v,I,D,k,X)?v<Math.floor(I)+Math.floor(D)+Math.floor(k)+Math.floor(X)?Di(e,2,8,"client performance math error.",{total:v,network:I,request:D,response:k,dom:X}):(o.durationMs=v,o.perfTotal=o[Hg]=Mm(v),o.networkConnect=Mm(I),o.sentRequest=Mm(D),o.receivedResponse=Mm(k),o.domProcessing=Mm(X),o.isValid=!0):Di(e,2,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:v,network:I,request:D,response:k,dom:X}))},i[j5]=fD,i[z5]=Tb,i[pD]=tB,i[hD]=V5})}return n.__ieDyn=1,n}(),nB=function(){function n(t,e){var i="prevPageVisitData";Rl(n,this,function(o){o[aD]=function(s,f){try{var v=function(I,D){var k=null;try{var X;k=function(){var fe=null;try{var Se,Ve;zw()&&(Se=Ag(),Ve=XN(t,i))&&eb()&&((fe=xg().parse(Ve)).pageVisitTime=Se-fe[XU],function BU(n,t){var e=w5();if(null!==e)try{return e[WM](t),!0}catch(i){Xy=!1,Di(n,2,6,"Browser failed removal of session storage item. "+Cc(i),{exception:io(i)})}}(t,i))}catch(Je){By(t,"Stop page visit timer failed: "+io(Je)),fe=null}return fe}(),zw()&&(null!=XN(t,i)&&Rp("Cannot call startPageVisit consecutively without first calling stopPageVisit"),X=xg().stringify(new mD(I,D)),M5(t,i,X))}catch(fe){By(t,"Call to restart failed: "+io(fe)),k=null}return k}(s,f);v&&e(v.pageName,v.pageUrl,v.pageVisitTime)}catch(I){By(t,"Auto track page visit time failed, metric will not be collected: "+io(I))}},kc(o,"_logger",{g:function(){return t}}),kc(o,"pageVisitTimeTrackingHandler",{g:function(){return e}})})}return n.__ieDyn=1,n}(),mD=function(n,t){this[XU]=Ag(),this.pageName=n,this.pageUrl=t},bO=function(n,t){var e=this,i={};e.start=function(o){void 0!==i[o]&&Di(n,2,62,"start was called more than once for this event without calling stop.",{name:o,key:o},!0),i[o]=+new Date},e.stop=function(o,s,f,v){var I=i[o];isNaN(I)?Di(n,2,63,"stop was called without a corresponding start.",{name:o,key:o},!0):(I=Bp(I,+new Date),e.action(o,s,I,f,v)),delete i[o],i[o]=void 0}};function EO(n,t){n&&n.dispatchEvent&&t&&n.dispatchEvent(t)}var G5=xp(((ip={sessionRenewalMs:EU(q5,18e5),sessionExpirationMs:EU(q5,864e5),disableExceptionTracking:wu()})[Jw]=wu(),ip.overridePageViewDuration=wu(),ip[H5]=wu(),ip[U5]=!1,ip.samplingPercentage=Cw(function K5(n){return!isNaN(n)&&0<n&&n<=100},100),ip[Yw]=wu(),ip[F5]=wu(),ip[dD]=wu(),ip.namePrefix=function SU(n){return{isVal:ha,v:Xh(n||Bs)}}(),ip.enableDebug=wu(),ip.disableFlushOnBeforeUnload=wu(),ip.disableFlushOnUnload=wu(!1,"disableFlushOnBeforeUnload"),ip));function q5(n,t){return+(n=(n=n||t)<6e4?6e4:n)}function iB(n){Wl(n[Yw])||(n[Yw]?T5:Bw)()}var oB=function(n){function t(){var e,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,lt,mt,_n,Yn,sr,ri=n.call(this)||this;return ri.identifier=D5,ri.priority=180,ri.autoRoutePVDelay=500,Rl(t,ri,function(tn,zn){var Zn=zn[o1];function Er(Lt,Hn,hn,vr,si){tn[_f]().throwInternal(Lt,Hn,hn,vr,si)}function yi(){v=f=s=o=i=e=null;var Lt=bm(!(mt=Je=Ve=Se=fe=X=k=D=I=!1));_n=Lt&&Lt[Ww]||"",lt=sr=Yn=null,kc(tn,"config",{g:function(){return lt}})}yi(),tn.getCookieMgr=function(){return fN(tn[Dh])},tn.processTelemetry=function(Lt,Hn){tn.processNext(Lt,Hn)},tn.trackEvent=function(Lt,Hn){try{var hn=rv(Lt,Zy[mf],Zy[a1],tn[_f](),Hn);tn[Dh][V_](hn)}catch(vr){Er(2,39,"trackTrace failed, trace will not be collected: "+Cc(vr),{exception:io(vr)})}},tn.startTrackEvent=function(Lt){try{e.start(Lt)}catch(Hn){Er(1,29,"startTrackEvent failed, event will not be collected: "+Cc(Hn),{exception:io(Hn)})}},tn.stopTrackEvent=function(Lt,Hn,hn){try{e.stop(Lt,void 0,Hn,hn)}catch(vr){Er(1,30,"stopTrackEvent failed, event will not be collected: "+Cc(vr),{exception:io(vr)})}},tn.trackTrace=function(Lt,Hn){try{var hn=rv(Lt,n1[mf],n1[a1],tn[_f](),Hn);tn[Dh][V_](hn)}catch(vr){Er(2,39,"trackTrace failed, trace will not be collected: "+Cc(vr),{exception:io(vr)})}},tn.trackMetric=function(Lt,Hn){try{var hn=rv(Lt,Jy[mf],Jy[a1],tn[_f](),Hn);tn[Dh][V_](hn)}catch(vr){Er(1,36,"trackMetric failed, metric will not be collected: "+Cc(vr),{exception:io(vr)})}},tn[pO]=function(Lt,Hn){try{var hn=Lt||{};o[pO](hn,ep(ep(ep({},hn.properties),hn.measurements),Hn)),mt&&f[aD](hn.name,hn.uri)}catch(vr){Er(1,37,"trackPageView failed, page view will not be collected: "+Cc(vr),{exception:io(vr)})}},tn[s1]=function(Lt,Hn,hn){var vr=((vr=Kd())&&(Lt.refUri=void 0===Lt.refUri?vr.referrer:Lt.refUri),Xr(Lt[c1])&&(vr=(Hn||Lt[sD]||{})[Hg]||0,Lt[c1]=new Date((new Date).getTime()-vr)),rv(Lt,t1[mf],t1[a1],tn[_f](),Hn,hn));tn[Dh][V_](vr)},tn[k5]=function(Lt,Hn,hn){Lt=rv(Lt,bb[mf],bb[a1],tn[_f](),Hn,hn),tn[Dh][V_](Lt)},tn.trackPageViewPerformance=function(Lt,Hn){Lt=Lt||{};try{s[cD](Lt),tn[k5](Lt,Hn)}catch(hn){Er(1,37,"trackPageViewPerformance failed, page view will not be collected: "+Cc(hn),{exception:io(hn)})}},tn.startTrackPage=function(Lt){try{var Hn;"string"!=typeof Lt&&(Lt=(Hn=Kd())&&Hn.title||""),i.start(Lt)}catch(hn){Er(1,31,"startTrackPage failed, page view may not be collected: "+Cc(hn),{exception:io(hn)})}},tn.stopTrackPage=function(Lt,Hn,hn,vr){try{var si,Bi;"string"!=typeof Lt&&(Lt=(si=Kd())&&si.title||""),"string"!=typeof Hn&&(Hn=(Bi=bm())&&Bi[Ww]||""),i.stop(Lt,Hn,hn,vr),mt&&f[aD](Lt,Hn)}catch(Un){Er(1,32,"stopTrackPage failed, page view will not be collected: "+Cc(Un),{exception:io(Un)})}},tn[fO]=function(Lt,Hn,hn){var vr=Lt&&(Lt[Sb]||Lt[wb])||Iy(Lt)&&Lt||{name:Lt&&typeof Lt,message:Lt||Lg};Lt=Lt||{},vr=rv(new gf(tn[_f](),vr,Lt[sD]||Hn,Lt.measurements,Lt.severityLevel,Lt.id).toInterface(),gf[mf],gf[a1],tn[_f](),Hn,hn),tn[Dh][V_](vr)},tn.trackException=function(Lt,Hn){Lt&&!Lt[Sb]&&Lt[wb]&&(Lt[Sb]=Lt[wb]);try{tn[fO](Lt,Hn)}catch(hn){Er(1,35,"trackException failed, exception will not be collected: "+Cc(hn),{exception:io(hn)})}},tn[lD]=function(Lt){var Hn=Lt&&Lt[wb],hn=Lt&&Lt.evt;try{hn||(Bo=Np())&&(hn=Bo.event);var vr,si,Bi=Lt&&Lt.url||(Kd()||{}).URL,Un=Lt[Qw]||"window.onerror@"+Bi+":"+(Lt[Om]||0)+":"+(Lt[Xw]||0),pi={errorSrc:Un,url:Bi,lineNumber:Lt[Om]||0,columnNumber:Lt[Xw]||0,message:Lt[uD]};!function lO(n,t,e,i,o){return!o&&ha(n)&&("Script error."===n||"Script error"===n)}(Lt.message,0,0,0,Lt[wb])?(Lt[Qw]||(Lt[Qw]=Un),tn.trackException({exception:Lt,severityLevel:3},pi)):(vr=gf[gO]("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",Bi,Lt[Om]||0,Lt[Xw]||0,Hn,hn,null,Un),si=pi,vr=rv(vr,gf[mf],gf[a1],tn[_f](),si),tn[Dh][V_](vr))}catch(Li){var Bo=Hn?Hn.name+", "+Hn[uD]:"null";Er(1,11,"_onError threw exception while logging error, error will not be collected: "+Cc(Li),{exception:io(Li),errorString:Bo})}},tn[Zw]=function(Lt){if(tn[Dh])return tn[Dh][Zw](Lt);(v=v||[]).push(Lt)},tn.initialize=function(Lt,Hn,hn,vr){if(!tn.isInitialized()){Xr(Hn)&&Rp("Error initializing"),zn.initialize(Lt,Hn,hn,vr);try{var si,Bi;sr=Tm(Kf(tn.identifier),Hn.evtNamespace&&Hn.evtNamespace()),v&&(lo(v,function(Zi){Hn[Zw](Zi)}),v=null),Bn=tn.identifier,Qs=tn[Dh],tn[o1](xu(Qi=Lt,function(){var Zi,Na=ff(null,Qi,Qs);lt=Na.getExtCfg(Bn,G5),mt=lt[Jw],Qi.storagePrefix&&QN(Qi.storagePrefix),iB(lt),I=lt[F5],!D&&I&&(Zi=["/browserLinkSignalR/","/__browserLink/"],tn[o1](tn[Zw](function(za){if(I&&za.baseType===ev[mf]){var Vi=za.baseData;if(Vi)for(var Sn=0;Sn<Zi[eT];Sn++)if(Vi.target&&0<=kp(Vi.target,Zi[Sn]))return!1}return!0})),D=!0)})),s=new gD(tn[Dh]),o=new ZU(tn,lt.overridePageViewDuration,tn[Dh],s),f=new nB(tn[_f](),function(Zi,Na,za){tn.trackMetric({name:"PageVisitTime",average:za,max:za,min:za,sampleCount:1},{PageName:Zi,PageUrl:Na})}),(e=new bO(tn[_f](),"trackEvent")).action=function(Zi,Na,za,Vi,Sn){Sn=Sn||{},(Vi=Vi||{}).duration=za[Kw](),tn.trackEvent({name:Zi,properties:Vi,measurements:Sn})},(i=new bO(tn[_f](),"trackPageView")).action=function(Zi,Na,za,Vi,Sn){(Vi=Xr(Vi)?{}:Vi).duration=za[Kw](),tn[s1]({name:Zi,uri:Na,properties:Vi,measurements:Sn},Vi)},FS()&&(Bo=Np(),Li=bm(!0),tn[o1](xu(lt,function(){(fe=lt.disableExceptionTracking)||Se||lt.autoExceptionInstrumented||(Zn(Nw(Bo,"onerror",{ns:sr,rsp:function(Zi,Na,za,Vi,Sn,bi){fe||!0===Zi.rslt||tn[lD](gf[gO](Na,za,Vi,Sn,bi,Zi.evt))}},!1)),Se=!0)})),si=Bo,Bi=Li,tn[o1](xu(lt,function(){Se=Se||lt[U5],(Ve=!0===lt[H5])&&!Je&&(Zn(Nw(si,"onunhandledrejection",{ns:sr,rsp:function(Zi,Na){Ve&&!0!==Zi.rslt&&tn[lD](gf[gO](function g$(n){var t;return n&&n.reason?!ha(t=n.reason)&&Sa(t[Kw])?t[Kw]():io(t):n||""}(Na),Bi?Bi[Ww]:"",0,0,Na,Zi.evt))}},!1)),lt[U5]=Je=!0)})),Un=Np(),pi=bm(!0),tn[o1](xu(lt,function(){var Zi,Na,za,Vi;k=!0===lt[dD],Un&&k&&!X&&function L4(){return!!F4()}()&&(Na=F4(),Sa(Na.pushState))&&Sa(Na.replaceState)&&typeof Event!==YC&&(Zi=Un,za=pi,X||(Vi=lt.namePrefix||"",Zn(Nw(Na,"pushState",{ns:sr,rsp:function(){k&&(EO(Zi,qw(Vi+"pushState")),EO(Zi,qw(Vi+"locationchange")))}},!0)),Zn(Nw(Na,"replaceState",{ns:sr,rsp:function(){k&&(EO(Zi,qw(Vi+"replaceState")),EO(Zi,qw(Vi+"locationchange")))}},!0)),U_(Zi,Vi+"popstate",function(){k&&EO(Zi,qw(Vi+"locationchange"))},sr),U_(Zi,Vi+"locationchange",function(){var Sn,bi,Dn,Si;Yn&&(_n=Yn),Yn=za&&za[Ww]||"",k&&(Si=null,tn[Dh]&&tn[Dh].getTraceCtx&&(Si=tn[Dh].getTraceCtx(!1)),Si||(Dn=tn[Dh].getPlugin(dO))&&(Dn=Dn.plugin.context)&&(Si=WN(Dn.telemetryTrace)),(Sn=Si)&&(Sn.setTraceId(wm()),bi="_unknown_",za&&za.pathname&&(bi=za.pathname+(za.hash||"")),Sn.setName(Ku(tn[_f](),bi))),Lp(function(Si){tn[pO]({refUri:Si,properties:{duration:0}})}.bind(tn,_n),tn.autoRoutePVDelay))},sr),X=!0))})))}catch(Zi){throw tn.setInitialized(!1),Zi}var Un,pi,Bo,Li,Qi,Bn,Qs}},tn._doTeardown=function(Lt,Hn){o&&o.teardown(Lt,Hn),ub(window,null,null,sr),yi()},kc(tn,"_pageViewManager",{g:function(){return o}}),kc(tn,"_pageViewPerformanceManager",{g:function(){return s}}),kc(tn,"_pageVisitTimeManager",{g:function(){return f}}),kc(tn,"_evtNamespace",{g:function(){return"."+sr}})}),ri}return P_(t,n),t.Version="3.1.1",t}($0),tT="featureOptIn",_D="onCfgChangeReceive",yD="nonOverrideConfigs",Y5="scheduleFetchTimeout";function W5(n,t,e,i){try{var o=i<e,s=(o&&(n=null),0==e?function qH(n,t,e,i,o,s,f){return cx(n||{},fm[sd](arguments))}({},n):n);return s&&t&&!o&&hs(s,function(f){var v=t[f];v&&(cd(s[f])&&cd(v)?s[f]=W5(s[f],v,++e,i):delete s[f])}),s}catch{}return n}var nT,iv="featureOptIn.",SO=".offCfg";var rT=void 0,iT=xp(((nT={syncMode:1,blkCdnCfg:rT,customEvtName:rT,cfgUrl:rT,overrideSyncFn:rT,overrideFetchFn:rT})[_D]=rT,nT[Y5]=18e5,nT[yD]={instrumentationKey:!0,connectionString:!0,endpointUrl:!0},nT)),wO=function(n){function t(){var e,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,mt,_n=n.call(this)||this,Yn=(_n.priority=198,!(_n.identifier="AppInsightsCfgSyncPlugin"));return Rl(t,_n,function(sr,ri){function tn(){Se=mt=k=fe=X=v=Ve=D=I=f=s=o=i=null}function zn(Un,pi){if(Un){if(i=Un,pi&&!Yn)return Er();if(I&&!Yn)return sr.core.updateCfg(Un),!0}return!1}function Zn(){try{var Un=jf();Un&&ub(Un,null,null,s)}catch{}}function Er(Un){try{return mt&&Sa(mt)?mt(i,Un):function Dg(n,t,e){var i=jf();if(i&&i.CustomEvent)try{return function Em(n,t){return!!(n&&n.dispatchEvent&&t)&&(n.dispatchEvent(t),!0)}(i,function Ng(n,o){var e,i=null;return o={detail:o||null},Sa(CustomEvent)?i=new CustomEvent(n,o):(e=Kd())&&e.createEvent&&(i=e.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,o),i}(n,{cfg:t||null,customDetails:e||null}))}catch{}return!1}(o,i,Un)}catch{}return!1}function yi(Un){try{if(Zn(),Un&&(o=Un,I)){var pi=jf();if(pi)try{U_(pi,o,function(Li){Li=Li&&Li.detail,Se&&Li?Se(Li):(Li=(Li=Li&&Li.cfg)&&Dp(Li)&&function(Qi){var Bn=null;try{Qi&&(Bn=W5(Qi,Ve,0,5))}catch{}return Bn}(Li))&&zn(Li)},s,!0)}catch{}}return!0}catch{}return!1}function Lt(Un,pi,Bo){var Li=(Li=jf())&&Li.fetch||null;if(Un&&Li&&Sa(Li))try{var Qi=new Request(Un,{method:"GET"});I0(fetch(Qi),function(Bn){var Qs=Bn.value;Bn.rejected?vr(pi,400):Qs.ok?I0(Qs.text(),function(Zi){vr(pi,Qs.status,Zi.value,Bo)}):vr(pi,Qs.status,null,Bo)})}catch{}}function Hn(Un,pi,Bo){try{var Li=new XMLHttpRequest;Li.open("GET",Un),Li.onreadystatechange=function(){Li.readyState===XMLHttpRequest.DONE&&vr(pi,Li.status,Li.responseText,Bo)},Li.onerror=function(){vr(pi,400)},Li.ontimeout=function(){vr(pi,400)},Li.send()}catch{}}function hn(Un,pi,Bo){try{var Li,Qi;200<=Un&&Un<400&&pi?(fe=0,(Li=xg())&&(Qi=function cB(n,t){try{var i;return n&&n.enabled?n[tT]?(i=n.config||{},hs(n[tT],function(o){var s=function sB(n,t,e){var i,o,s,f,v,I,D,k,X,fe;return t&&t.enabled?(i=(t=(t[tT]||{})[n]||{mode:1}).mode,o=t.onCfg,t=t.offCfg,s=(e=(e||{})[n]||{mode:2}).mode,I=iv+n+".onCfg",D=iv+n+SO,k=s,X=f=e.onCfg,fe=v=e.offCfg,(e=!!e.blockCdnCfg)||(4===i||5===i?(k=4==i?3:2,X=o||f,fe=t||v):2===i||2===s?(k=2,X=f||o,fe=v||t):3===i?(k=3,X=f||o,fe=v||t):1===i&&1===s&&(k=1)),(e={})[iv+n+".mode"]=k,e[I]=X,e[D]=fe,e):null}(o,n,t.config[tT]);Xr(s)||(hs(s,function(f,v){p0(i,f,v)}),function lB(f,s,e){var i=s[iv+f+".mode"],o=s[iv+f+".onCfg"];s=s[iv+f+SO],(f=2===i?s:3===i?o:null)&&hs(f,function(v,I){p0(e,v,I)})}(o,s,i))}),i):n.config:null}catch{}return null}(Li.parse(pi),sr.core))&&zn(Qi,Bo)):fe++,fe<3&&si()}catch{}}function vr(Un,pi,Bo,Li){try{Un(pi,Bo,Li)}catch{}}function si(){!v&&X&&(v=Lp(function(){v=null,Je(f,hn,D)},X)).unref()}function Bi(){v&&v.cancel(),v=null,fe=0}tn(),sr.initialize=function(Un,pi,Bo,Li){var Qi,Bn,Qs,Zi;ri.initialize(Un,pi,Bo,Li),s=Tm(Kf(sr.identifier),pi.evtNamespace&&pi.evtNamespace()),Bn=sr.identifier,Qs=sr.core,sr._addHook(xu(Qi=Un,function(){var Zi=ff(null,Qi,Qs);e=Zi.getExtCfg(Bn,iT),Zi=k,k=!!e.blkCdnCfg,Xr(Zi)||Zi===k||(!k&&f?Je&&Je(f,hn,D):Bi()),Xr(I)&&(I=2===e.syncMode),Xr(D)&&(D=1===e.syncMode),o!==(Zi=e.customEvtName||"ai_cfgsync")&&(I?yi(Zi):(Zn(),o=Zi)),(f=Xr(f)?e.cfgUrl:f)||(i=Qi,D&&Er())})),mt=e.overrideSyncFn,Se=e[_D],Ve=e[yD],X=e[Y5],Xr(Zi=e.overrideFetchFn)&&(pf()?Zi=Lt:lw()&&(Zi=Hn)),Je=Zi,fe=0,f&&!k&&Je&&Je(f,hn,D)},sr.getCfg=function(){return i},sr.pause=function(){Yn=!0,Bi()},sr.resume=function(){Yn=!1,si()},sr.setCfg=function(Un){return zn(Un)},sr.sync=Er,sr.updateEventListenerName=yi,sr._doTeardown=function(Un,pi){Zn(),Bi(),tn()},sr._getDbgPlgTargets=function(){return[D,I,o,k]},sr.processTelemetry=function(Un,pi){sr.processNext(Un,pi)}}),_n}return P_(t,n),t.__ieDyn=1,t}($0),Pm="duration",Yd="tags",X5="deviceType",op="data",ov="name",TO="traceID",ps="length",oT="stringify",av="measurements",Ug="dataType",sv="envelopeType",cv="toString",aT="_get",d1="enqueue",lv="count",Z5="eventsLimitInMem",Ib="push",Mb="emitLineDelimitedJson",Rm="clear",Ob="createNew",sT="markAsSent",Pb="clearSent",J5="bufferOverride",e6="BUFFER_KEY",h1="SENT_BUFFER_KEY",cT="MAX_BUFFER_SIZE",lT="triggerSend",ap="diagLog",AO="initialize",Rb="_sender",t6="customHeaders",uT="maxBatchSizeInBytes",n6="onunloadDisableBeacon",r6="isBeaconApiDisabled",hB="alwaysUseXhrOverride",CD="disableXhr",pB="enableSessionStorageBuffer",p1="_buffer",i6="onunloadDisableFetch",o6="disableSendBeaconSplit",fB="instrumentationKey",bD="enableSendPromise",IO="getSenderInst",a6="unloadTransports",s6="convertUndefined",MO="maxBatchInterval",dT="serialize",xb="_onError",OO="_onPartialSuccess",PO="_onSuccess",Nb="itemsAccepted",ED="oriPayload",SD="baseType",hT="sampleRate",l6="eventsSendRequest",wD="getSamplingScore",TD="baseType",lu="baseData",Wd="properties",u6="true";function Yu(n,t,e){return _l(n,t,e,fI)}function uv(n,t,e){Xr(n)||hs(n,function(i,o){NC(o)?e[i]=o:ha(o)?t[i]=o:eb()&&(t[i]=xg()[oT](o))})}function dv(n,t){Xr(n)||hs(n,function(e,i){n[e]=i||t})}function hv(n,t,e,i){return Yu(i=new GU(n,i,t),"sampleRate",e[FN]),(e[lu]||{}).startTime&&(i.time=N0(e[lu].startTime)),i.iKey=e.iKey,t=e.iKey.replace(/-/g,""),i[ov]=i[ov].replace("{0}",t),function d6(n,t,e){for(var f,i=e[Yd]=e[Yd]||{},o=t.ext=t.ext||{},s=t[Yd]=t[Yd]||[],v=((f=o.user)&&(Yu(i,xl.userAuthUserId,f.authId),Yu(i,xl.userId,f.id||f.localId)),(f=o.app)&&Yu(i,xl.sessionId,f.sesId),(f=o.device)&&(Yu(i,xl.deviceId,f.id||f.localId),Yu(i,xl[X5],f.deviceClass),Yu(i,xl.deviceIp,f.ip),Yu(i,xl.deviceModel,f.model),Yu(i,xl[X5],f[X5])),(f=t.ext.web)&&(Yu(i,xl.deviceLanguage,f.browserLang),Yu(i,xl.deviceBrowserVersion,f.browserVer),Yu(i,xl.deviceBrowser,f.browser),Yu(t=(t=(t=e[op]=e[op]||{})[lu]=t[lu]||{})[Wd]=t[Wd]||{},"domain",f.domain),Yu(t,"isManual",f.isManual?u6:null),Yu(t,"screenRes",f.screenRes),Yu(t,"userConsent",f.userConsent?u6:null)),(t=o.os)&&Yu(i,xl.deviceOS,t[ov]),(f=o.trace)&&(Yu(i,xl.operationParentId,f.parentID),Yu(i,xl.operationName,Ku(n,f[ov])),Yu(i,xl.operationId,f[TO])),{}),I=s[ps]-1;0<=I;I--)hs(s[I],function(k,X){v[k]=X}),s.splice(I,1);hs(s,function(D,k){v[D]=k}),(t=ep(ep({},i),v))[xl.internalSdkVersion]||(t[xl.internalSdkVersion]=Ku(n,"javascript:".concat(mB.Version),64)),e[Yd]=Wx(t)}(n,e,i),e[Yd]=e[Yd]||[],Wx(i)}function f1(n,t){Xr(t[lu])&&Di(n,1,46,"telemetryItem.baseData cannot be null.")}var mB={Version:"3.1.1"};function RO(n,t,o){f1(n,t);var s={},i={};return t[TD]!==Zy[Ug]&&(s.baseTypeSource=t[TD]),t[TD]===Zy[Ug]?(s=t[lu][Wd]||{},i=t[lu][av]||{}):t[lu]&&uv(t[lu],s,i),uv(t[op],s,i),Xr(o)||dv(s,o),o=new Zy(n,o=t[lu][ov],s,i),s=new r1(Zy[Ug],o),hv(n,Zy[sv],t,s)}var Tu,G_,AD=function(){function n(t,e){var i=[],o=!1;this[aT]=function(){return i},this._set=function(s){return i=s},Rl(n,this,function(s){s[d1]=function(f){s[lv]()>=e[Z5]?o||(Di(t,2,105,"Maximum in-memory buffer size reached: "+s[lv](),!0),o=!0):i[Ib](f)},s[lv]=function(){return i[ps]},s.size=function(){for(var f=i[ps],v=0;v<i[ps];v++)f+=i[v][ps];return e[Mb]||(f+=2),f},s[Rm]=function(){o=!(i=[])},s.getItems=function(){return i.slice(0)},s.batchPayloads=function(f){return f&&0<f[ps]?e[Mb]?f.join("\n"):"["+f.join(",")+"]":null},s[Ob]=function(f,v,I){var D=i.slice(0),k=new(I?f6:p6)(f=f||t,v=v||{});return lo(D,function(X){k[d1](X)}),k}})}return n.__ieDyn=1,n}(),p6=function(n){function t(e,i){return Rl(t,e=n.call(this,e,i)||this,function(o,s){o[sT]=function(f){s[Rm]()},o[Pb]=function(f){}}),e}return P_(t,n),t.__ieDyn=1,t}(AD),f6=function(n){function t(e,v){var o=n.call(this,e,v)||this,s=!1,f=v?.namePrefix,I=(v=v[J5]||{getItem:XN,setItem:M5}).getItem,D=v.setItem;return Rl(t,o,function(k,X){var Se=Je(t[e6]),fe=Je(t[h1]);function Ve(mt,_n){var Yn=[];return lo(_n,function(sr){Sa(sr)||-1!==uh(mt,sr)||Yn[Ib](sr)}),Yn}function Je(mt){try{var _n=I(e,mt=f?f+"_"+mt:mt);if(_n){var Yn=xg().parse(_n);if((Yn=ha(Yn)?xg().parse(Yn):Yn)&&ts(Yn))return Yn}}catch(sr){Di(e,1,42," storage key: "+mt+", "+Cc(sr),{exception:io(sr)})}return[]}function lt(mt,_n){try{mt=f?f+"_"+mt:mt;var Yn=JSON[oT](_n);D(e,mt,Yn)}catch(sr){D(e,mt,JSON[oT]([])),Di(e,2,41," storage key: "+mt+", "+Cc(sr)+". Buffer cleared",{exception:io(sr)})}}(Se=k._set(Se.concat(fe)))[ps]>t[cT]&&(Se[ps]=t[cT]),lt(t[h1],[]),lt(t[e6],Se),k[d1]=function(mt){k[lv]()>=t[cT]?s||(Di(e,2,67,"Maximum buffer size reached: "+k[lv](),!0),s=!0):(X[d1](mt),lt(t.BUFFER_KEY,k[aT]()))},k[Rm]=function(){X[Rm](),lt(t.BUFFER_KEY,k[aT]()),lt(t[h1],[]),s=!1},k[sT]=function(mt){lt(t[e6],k._set(Ve(mt,k[aT]())));var _n=Je(t[h1]);_n instanceof Array&&mt instanceof Array&&((_n=_n.concat(mt))[ps]>t[cT]&&(Di(e,1,67,"Sent buffer reached its maximum size: "+_n[ps],!0),_n[ps]=t[cT]),lt(t[h1],_n))},k[Pb]=function(mt){mt=Ve(mt,Je(t[h1])),lt(t[h1],mt)},k[Ob]=function(mt,_n,Yn){Yn=!!Yn;var sr=k[aT]().slice(0),ri=Je(t[h1]).slice(0),tn=(mt=mt||e,_n=_n||{},k[Rm](),new(Yn?t:p6)(mt,_n));return lo(sr,function(zn){tn[d1](zn)}),Yn&&tn[sT](ri),tn}}),o}return P_(t,n),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}(AD),CB=function(){function n(t){Rl(n,this,function(e){function i(f,v){var I="__aiCircularRefCheck",D={};if(f)if(f[I])Di(t,2,50,"Circular reference detected while serializing object",{name:v},!0);else if(f.aiDataContract)f[I]=!0,hs(f.aiDataContract,function(k,Ve){var fe=Sa(Ve)?1&Ve():1&Ve,Se=Sa(Ve)?4&Ve():4&Ve,Je=(Ve&=2,void 0!==f[k]),lt=cd(f[k])&&null!==f[k];!fe||Je||Ve?Se||(fe=void 0)!==(fe=lt?(Ve?o:i)(f[k],k):f[k])&&(D[k]=fe):Di(t,1,24,"Missing required field specification. The field is required but not present on source",{field:k,name:v})}),delete f[I];else if("measurements"===v)D=s(f,"number",v);else if("properties"===v)D=s(f,"string",v);else if("tags"===v)D=s(f,"string",v);else if(ts(f))D=o(f,v);else{Di(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:v},!0);try{xg()[oT](f),D=f}catch(k){Di(t,1,48,k&&Sa(k[cv])?k[cv]():"Error serializing object",null,!0)}}else Di(t,1,48,"cannot serialize object because it is null or undefined",{name:v},!0);return D}function o(f,v){if(f)if(ts(f))for(var I=[],D=0;D<f[ps];D++){var k=i(f[D],v+"["+D+"]");I[Ib](k)}else Di(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:v},!0);return I}function s(f,v,I){var D;return f&&(D={},hs(f,function(k,X){"string"===v?D[k]=void 0===X?"undefined":null===X?"null":X[cv]?X[cv]():"invalid field: toString() is not defined.":"number"===v?void 0===X?D[k]="undefined":null===X?D[k]="null":(X=parseFloat(X),D[k]=X):(D[k]="invalid field: "+I+" is of unknown type.",Di(t,1,D[k],null,!0))})),D}e[dT]=function(f){f=i(f,"root");try{return xg()[oT](f)}catch(v){Di(t,1,48,v&&Sa(v[cv])?v[cv]():"Error serializing object",null,!0)}}})}return n.__ieDyn=1,n}(),bB=function(){function n(){}return n.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/n.INT_MAX_VALUE*100},n.prototype.getHashCode=function(t){if(""===t)return 0;for(;t[ps]<8;)t=t.concat(t);for(var e=5381,i=0;i<t[ps];++i)e=(e<<5)+e+t.charCodeAt(i),e&=e;return Math.abs(e)},n.INT_MAX_VALUE=2147483647,n}(),EB=function(){var n=new bB,t=new iD;this[wD]=function(e){return e[Yd]&&e[Yd][t.userId]?n.getHashCodeScore(e[Yd][t.userId]):e.ext&&e.ext.user&&e.ext.user.id?n.getHashCodeScore(e.ext.user.id):e[Yd]&&e[Yd][t.operationId]?n.getHashCodeScore(e[Yd][t.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace[TO]?n.getHashCodeScore(e.ext.telemetryTrace[TO]):100*Math.random()}},SB=function(){function n(t,e){this.INT_MAX_VALUE=2147483647,e=e||Uy(null),(100<t||t<0)&&(e.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t},!0),t=100),this[hT]=t,this.samplingScoreGenerator=new EB}return n.prototype.isSampledIn=function(t){var e=this[hT];return null==e||100<=e||t.baseType===Jy[Ug]||this.samplingScoreGenerator[wD](t)<e},n}(),pv=void 0;function m6(n){try{return n.responseText}catch{}return null}var _6=xp(((Tu={endpointUrl:Cw(fI,V0+hb)})[Mb]=wu(),Tu[MO]=15e3,Tu[uT]=102400,Tu.disableTelemetry=wu(),Tu[pB]=wu(!0),Tu.isRetryDisabled=wu(),Tu[r6]=wu(!0),Tu[o6]=wu(!0),Tu[CD]=wu(),Tu[i6]=wu(),Tu[n6]=wu(),Tu[fB]=pv,Tu.namePrefix=pv,Tu.samplingPercentage=Cw(function AB(n){return!isNaN(n)&&0<n&&n<=100},100),Tu[t6]=pv,Tu[s6]=pv,Tu[Z5]=1e4,Tu[J5]=!1,Tu.httpXHROverride={isVal:function TB(n){return n&&n.sendPOST},v:pv},Tu[hB]=wu(),Tu.transports=pv,Tu.retryCodes=pv,Tu));(G_={})[Zy.dataType]=RO,G_[n1.dataType]=function vB(n,t,f){f1(n,t);var v=t[lu].message,i=t[lu].severityLevel,o=t[lu][Wd]||{},s=t[lu][av]||{};return uv(t[op],o,s),Xr(f)||dv(o,f),f=new n1(n,v,i,o,s),v=new r1(n1[Ug],f),hv(n,n1[sv],t,v)},G_[t1.dataType]=function yB(n,t,k){f1(n,t);var i,D=(Xr(D=t[lu])||Xr(D[Wd])||Xr(D[Wd][Pm])?Xr(t[op])||Xr(t[op][Pm])||(i=t[op][Pm],delete t[op][Pm]):(i=D[Wd][Pm],delete D[Wd][Pm]),t[lu]),o=(((t.ext||{}).trace||{})[TO]&&(o=t.ext.trace[TO]),D.id||o),s=D[ov],f=D.uri,v=D[Wd]||{},I=D[av]||{};return Xr(D.refUri)||(v.refUri=D.refUri),Xr(D.pageType)||(v.pageType=D.pageType),Xr(D.isLoggedIn)||(v.isLoggedIn=D.isLoggedIn[cv]()),Xr(D[Wd])||hs(D[Wd],function(X,fe){v[X]=fe}),uv(t[op],v,I),Xr(k)||dv(v,k),D=new t1(n,s,f,i,v,I,o),k=new r1(t1[Ug],D),hv(n,t1[sv],t,k)},G_[bb.dataType]=function xO(n,t,v){f1(n,t);var i=t[lu],I=i[ov],o=i.uri||i.url,s=i[Wd]||{},f=i[av]||{};return uv(t[op],s,f),Xr(v)||dv(s,v),v=new bb(n,I,o,void 0,s,f,i),I=new r1(bb[Ug],v),hv(n,bb[sv],t,I)},G_[gf.dataType]=function h6(n,t,o){f1(n,t);var i=t[lu][av]||{},s=(uv(t[op],s=t[lu][Wd]||{},i),Xr(o)||dv(s,o),o=gf.CreateFromInterface(n,o=t[lu],s,i),new r1(gf[Ug],o));return hv(n,gf[sv],t,s)},G_[Jy.dataType]=function _B(n,t,s){f1(n,t);var i=(f=t[lu])[Wd]||{},o=f[av]||{},f=(uv(t[op],i,o),Xr(s)||dv(i,s),s=new Jy(n,f[ov],f.average,f.sampleCount,f.min,f.max,f.stdDev,i,o),new r1(Jy[Ug],s));return hv(n,Jy[sv],t,f)},G_[ev.dataType]=function pT(n,t,f){f1(n,t);var i,o=t[lu][av]||{},s=t[lu][Wd]||{};return uv(t[op],s,o),Xr(f)||dv(s,f),Xr(f=t[lu])?(By(n,"Invalid input for dependency data"),null):(i=new ev(n,f.id,f.target,f[ov],f[Pm],f.success,f.responseCode,i=f[Wd]&&f[Wd][HN]?f[Wd][HN]:"GET",f.type,f.correlationContext,s,o),f=new r1(ev[Ug],i),hv(n,ev[sv],t,f))};var IB=G_,MB=function(n){function t(){var e,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,lt,mt,_n,Yn,sr,ri,tn,zn,Zn,Er,yi,Lt,Hn,hn,vr,si,Bi,Un,pi,Bo,Li=n.call(this)||this,Qi=(Li.priority=1001,Li.identifier=hO,0);return Rl(t,Li,function(Bn,Qs){function Zi(St,pn){var Wt=m6(St);!St||Wt+""!="200"&&""!==Wt?(Wt=Zx(Wt))&&Wt.itemsReceived&&Wt.itemsReceived>Wt[Nb]&&!tn?Bn[OO](pn,Wt):Bn[xb](pn,T8(St)):(e=0,Bn[PO](pn,0))}function Na(St,pn,Wt){4===St.readyState&&Vo(St.status,pn,St.responseURL,Wt,fw(St),m6(St)||St.response)}function za(St){try{var pn;if(St)return(pn=St[ED])&&pn[ps]?pn:null}catch{}return null}function Vi(St,pn){return!(Yn||(St?St.baseData&&!St[SD]?(pn&&Di(pn,1,70,"Cannot send telemetry without baseData and baseType"),1):(St[SD]||(St[SD]="EventData"),Bn[Rb]?Bn._sample.isSampledIn(St)?(St[FN]=Bn._sample[hT],0):(pn&&Di(pn,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Bn._sample[hT]}),1):(pn&&Di(pn,1,28,"Sender was not initialized"),1)):(pn&&Di(pn,1,7,"Cannot send empty telemetry"),1)))}function Sn(St,pn){var Yr=t.constructEnvelope(St,St.iKey||sr,pn,ri);if(Yr){var Br=!1;if(St[Yd]&&St[Yd][KM]&&(lo(St[Yd][KM],function(vi){try{vi&&!1===vi(Yr)&&(Br=!0,By(pn,"Telemetry processor check returns false"))}catch(eo){Di(pn,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Cc(eo),{exception:io(eo)},!0)}}),delete St[Yd][KM]),!Br)return Yr}else Di(pn,1,47,"Unable to create an AppInsights envelope")}function bi(St){var pn="",Wt=Bn[ap]();try{var Yr=Vi(St,Wt),Br=null;(Br=Yr?Sn(St,Wt):Br)&&(pn=f[dT](Br))}catch{}return pn}function Si(St){return St&&St[ps]?"["+St.join(",")+"]":""}function Dn(St){var pn=to(),Wt={urlString:fe};return Wt[op]=St,Wt.headers=pn,Wt}function er(eo,pn,Wt,Yr){void 0===Yr&&(Yr=!0);var vi=hi(pn);return(eo=eo&&eo.sendPOST)&&vi?(Yr&&Bn._buffer[sT](pn),eo(vi,function Br(Mn,fi,Hr){var fa;fa=pn,200===Mn&&fa?Bn._onSuccess(fa,fa[ps]):Hr&&Bn[xb](fa,Hr)},!Wt)):null}function hi(St){var pn,Wt,Yr;return ts(St)&&0<St[ps]?(Wt=Bn[p1].batchPayloads(St),Yr=to(),(pn={})[op]=Wt,pn.urlString=fe,pn.headers=Yr,pn.disableXhrSync=hn,pn.disableFetchKeepAlive=!vr,pn[ED]=St,pn):null}function to(){try{var St=I||{};return KN(fe)&&(St[rl[6]]=rl[7]),St}catch{}return null}function Gi(St){St=St?St[ps]:0,Bn[p1].size()+St>Ve&&(k&&!k.isOnline()||Bn[lT](!0,null,10))}function Vo(St,pn,Wt,Yr,Br,vi){var eo=null;Bn._appId||(eo=Zx(vi))&&eo.appId&&(Bn._appId=eo.appId),(St<200||300<=St)&&0!==St?(301!==St&&307!==St&&308!==St||Ye(Wt))&&!tn&&yn(St)?($e(pn),Di(Bn[ap](),2,40,". Response code "+St+". Will retry to send "+pn[ps]+" items.")):Bn[xb](pn,Br):k&&!k.isOnline()?tn||($e(pn,10),Di(Bn[ap](),2,40,". Offline - Response Code: ".concat(St,". Offline status: ").concat(!k.isOnline(),". Will retry to send ").concat(pn.length," items."))):(Ye(Wt),206===St?(eo=eo||Zx(vi))&&!tn?Bn[OO](pn,eo):Bn[xb](pn,Br):(e=0,Bn[PO](pn,Yr)))}function Ye(St){return!(10<=v||Xr(St)||""===St||St===fe)&&(fe=St,++v,1)}function Be(St,pn){if(!D)return er(pi&&pi[IO]([3],!0),St,pn);D(St,!1)}function Pe(St,pn){var Wt=null;if(ts(St)){for(var Yr=St[ps],Br=0;Br<St[ps];Br++)Yr+=St[Br][ps];return pi.getSyncFetchPayload()+Yr<=65e3?Wt=2:P0()?Wt=3:(Wt=1,Di(Bn[ap](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),er(pi&&pi[IO]([Wt],!0),St,pn)}return null}function $e(St,pn){if(void 0===pn&&(pn=1),St&&0!==St[ps]){var Wt=Bn[p1];Wt[Pb](St),e++;for(var Yr,Br=0,vi=St;Br<vi.length;Br++)Wt[d1](vi[Br]);St=pn,St=e<=1?10:(Yr=(Math.pow(2,e)-1)/2,Yr=Math.floor(Math.random()*Yr*10)+1,Yr*=St,Math.max(Math.min(Yr,3600),10)),Yr=Ag()+1e3*St,i=Yr,gt()}}function gt(){var St;s||o||(St=i?Math.max(0,i-Ag()):0,St=Math.max(zn,St),s=Lp(function(){s=null,Bn[lT](!0,null,1)},St))}function kt(){s&&s.cancel(),i=s=null}function yn(St){return Xr(Bo)?401===St||408===St||429===St||500===St||502===St||503===St||504===St:Bo[ps]&&-1<Bo.indexOf(St)}function Fn(){Bn[Rb]=null,Bn[p1]=null,Bn._appId=null,Bn._sample=null,Ve=Qi=v=e=0,yi=ri=pv,Un=vr=hn=tn=Yn=Je=o=!(I={}),pi=Bi=si=Zn=sr=_n=Se=fe=X=D=f=s=i=k=null,kc(Bn,"_senderConfig",{g:function(){return Qx({},_6)}})}Fn(),Bn.pause=function(){kt(),o=!0},Bn.resume=function(){o&&(o=!1,i=null,Gi(),gt())},Bn.flush=function(St,pn,Wt){if(void 0===St&&(St=!0),!o){kt();try{return Bn[lT](St,null,Wt||1)}catch(Yr){Di(Bn[ap](),1,22,"flush failed, telemetry will not be collected: "+Cc(Yr),{exception:io(Yr)})}}},Bn.onunloadFlush=function(){if(!o)if(Je||Hn)try{return Bn[lT](!0,Be,2)}catch(St){Di(Bn[ap](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Cc(St),{exception:io(St)})}else Bn.flush(!1)},Bn.addHeader=function(St,pn){I[St]=pn},Bn[AO]=function(St,pn,Wt,Yr){Bn.isInitialized()&&Di(Bn[ap](),1,28,"Sender is already initialized"),Qs[AO](St,pn,Wt,Yr);var Br=Bn.identifier,vi=(f=new CB(pn.logger),e=0,i=null,Bn[Rb]=null,v=0,Bn[ap]());X=Tm(Kf("Sender"),pn.evtNamespace&&pn.evtNamespace()),k=function uO(n){var t,e=Kd(),i=$f(),o=!1,s=[],f=1,v=(!i||Xr(i.onLine)||i.onLine||(f=2),0),I=X(),D=Tm(Kf("OfflineListener"),n);try{k(Np())&&(o=!0),e&&(t=e.body||e).ononline&&k(t)&&(o=!0)}catch{o=!1}function k(Je){var lt=!1;return Je&&(lt=U_(Je,"online",Se,D))&&U_(Je,"offline",Ve,D),lt}function X(){return 2!==v&&2!==f}function fe(){var Je=X();I!==Je&&(I=Je,lo(s,function(lt){var mt={isOnline:I,rState:f,uState:v};try{lt(mt)}catch{}}))}function Se(){f=1,fe()}function Ve(){f=2,fe()}return{isOnline:function(){return I},isListening:function(){return o},unload:function(){var Je=Np();Je&&o&&(oD(Je,D),e&&!Wl((Je=e.body||e).ononline)&&oD(Je,D),o=!1)},addListener:function(Je){return s[Fw](Je),{rm:function(){var lt=s.indexOf(Je);if(-1<lt)return s.splice(lt,1)}}},setOnlineState:function(Je){v=Je,fe()}}}(X),Bn._addHook(xu(St,function(eo){(eo=eo.cfg).storagePrefix&&QN(eo.storagePrefix);var Yo,rt,Mn=ff(null,eo,pn).getExtCfg(Br,_6),Yc=(kc(Bn,"_senderConfig",{g:function(){return Mn}}),Se!==Mn.endpointUrl&&(fe=Se=Mn.endpointUrl),_n&&_n!==Mn[t6]&&lo(_n,function(Yo){delete I[Yo.header]}),Ve=Mn[uT],Je=(!1===Mn[n6]||!1===Mn[r6])&&P0(),lt=!1===Mn[n6]&&P0(),mt=!1===Mn[r6]&&P0(),Hn=Mn[hB],hn=!!Mn[CD],Bo=Mn.retryCodes,Mn[J5]),Xs=!!Mn[pB]&&(!!Yc||zw()),fa=Mn.namePrefix,Hr=Xs!==Zn||Xs&&yi!==fa||Xs&&Er!==Yc;if(Bn[p1]){if(Hr)try{Bn._buffer=Bn._buffer[Ob](vi,Mn,Xs)}catch(Yo){Di(Bn[ap](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Cc(Yo),{exception:io(Yo)})}Gi()}else Bn[p1]=new(Xs?f6:p6)(vi,Mn);yi=fa,Zn=Xs,Er=Yc,vr=!Mn[i6]&&pf(!0),Un=!!Mn[o6],Bn._sample=new SB(Mn.samplingPercentage,vi),Yo=sr=Mn[fB],(!Xr(rt=(rt=eo).disableInstrumentationKeyValidation)&&rt?1:new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(Yo))||Di(vi,1,100,"Invalid Instrumentation key "+sr),_n=Mn[t6],!KN(fe)&&_n&&0<_n[ps]?lo(_n,function(Yo){Li.addHeader(Yo.header,Yo.value)}):_n=null,Lt=Mn[bD],Hr=function(){var Yo;try{var rt={xdrOnComplete:function(xe,je,Ue){if(Ue=za(Ue))return Zi(xe,Ue)},fetchOnComplete:function(xe,je,Ue,Tt){if(Tt=za(Tt))return Vo(xe.status,Tt,xe.url,Tt[ps],xe.statusText,Ue||"")},xhrOnComplete:function(xe,je,Ue){if(Ue=za(Ue))return Na(xe,Ue,Ue[ps])},beaconOnRetry:function(xe,je,Ue){var Tt=je,Jt=Ue,mn=xe&&xe[ED];if(Un)Bi&&Bi(mn,!0),Di(Bn[ap](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Qt=[],zt=0;zt<mn[ps];zt++){var rn=mn[zt],fr=[rn];Jt(hi(fr),Tt)?Bn._onSuccess(fr,fr[ps]):Qt[Ib](rn)}0<Qt[ps]&&(Bi&&Bi(Qt,!0),Di(Bn[ap](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}};return(Yo={})[bD]=Lt,Yo.isOneDs=!1,Yo.disableCredentials=!1,Yo[CD]=hn,Yo.disableBeacon=!mt,Yo.disableBeaconSync=!lt,Yo.senderOnCompleteCallBack=rt,Yo}catch{}return null}(),pi?pi.SetConfig(Hr):(pi=new t5)[AO](Hr,vi),fa=Mn.httpXHROverride,Xs=Xx([3,1,2],Mn.transports);var fi,Ki=pi&&pi[IO](Xs,!1),bl=pi&&pi.getFallbackInst();si=function(Yo,rt){return er(bl,Yo,rt)},Bi=function(Yo,rt){return er(bl,Yo,rt,!1)},Ki=Hn?fa:Ki||fa||bl,Bn[Rb]=function(Yo,rt){return er(Ki,Yo,rt)},vr&&(D=Pe),Yc=Xx([3,1],Mn[a6]),vr||(Yc=Yc.filter(function(Yo){return 2!==Yo})),fi=pi&&pi[IO](Yc,!0),fi=!Hn&&fi||fa,D=(D=(Hn||Mn[a6]||!D)&&fi?function(Yo,rt){return er(fi,Yo,rt)}:D)||si,Yn=Mn.disableTelemetry,ri=Mn[s6]||pv,tn=Mn.isRetryDisabled,zn=Mn[MO]}))},Bn.processTelemetry=function(St,pn){var Wt=(pn=Bn._getTelCtx(pn))[ap]();try{if(!Vi(St,Wt))return;var Yr=Sn(St,Wt);if(!Yr)return;var Br=f[dT](Yr),vi=Bn[p1];Gi(Br),vi[d1](Br),gt()}catch(eo){Di(Wt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Cc(eo),{exception:io(eo)})}Bn.processNext(St,pn)},Bn.isCompletelyIdle=function(){return!o&&0===Qi&&0===Bn._buffer[lv]()},Bn._xhrReadyStateChange=Na,Bn[lT]=function(St,pn,Wt){var Yr,Hr;if(void 0===St&&(St=!0),!o)try{var Br=Bn[p1];if(Yn)Br[Rm]();else if(0<Br[lv]()){var vi=Br.getItems(),eo=Wt||0,Mn=St,fi=Bn.core[Hr="getNotifyMgr"]?Bn.core.getNotifyMgr():Bn.core._notificationManager;if(fi&&fi[l6])try{fi[l6](eo,Mn)}catch(Hr){Di(Bn[ap](),1,74,"send request notification failed: "+Cc(Hr),{exception:io(Hr)})}Yr=pn?pn.call(Bn,vi,St):Bn[Rb](vi,St)}kt()}catch(Hr){(!(Br=XI())||9<Br)&&Di(Bn[ap](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Cc(Hr),{exception:io(Hr)})}return Yr},Bn.getOfflineSupport=function(){var St={getUrl:function(){return fe},createPayload:Dn};return St[dT]=bi,St.batch=Si,St.shouldProcess=function(pn){return!!Vi(pn)},St},Bn._doTeardown=function(St,pn){Bn.onunloadFlush(),F0(k,!1),Fn()},Bn[xb]=function(St,pn,Wt){Di(Bn[ap](),2,26,"Failed to send telemetry.",{message:pn}),Bn._buffer&&Bn._buffer[Pb](St)},Bn[OO]=function(St,pn){for(var Wt=[],Yr=[],Br=0,vi=pn.errors.reverse();Br<vi.length;Br++){var eo=vi[Br],Mn=St.splice(eo.index,1)[0];(yn(eo.statusCode)?Yr:Wt)[Ib](Mn)}0<St[ps]&&Bn[PO](St,pn[Nb]),0<Wt[ps]&&Bn[xb](Wt,fw(null,["partial success",pn[Nb],"of",pn.itemsReceived].join(" "))),0<Yr[ps]&&($e(Yr),Di(Bn[ap](),2,40,"Partial success. Delivered: "+St[ps]+", Failed: "+Wt[ps]+". Will retry to send "+Yr[ps]+" our of "+pn.itemsReceived+" items"))},Bn[PO]=function(St,pn){Bn._buffer&&Bn._buffer[Pb](St)},Bn._xdrOnLoad=Zi}),Li}return P_(t,n),t.constructEnvelope=function(e,i,o,s){return e=i===e.iKey||Xr(i)?e:ep(ep({},e),{iKey:i}),(IB[e.baseType]||RO)(o,e,s)},t}($0),y6="duration",g1="properties",Bg="requestUrl",fT="inst",q_="length",K_="traceID",fv="spanID",Xf="traceFlags",gT="context",m1="aborted",NO="traceId",DO="spanId",mT="_addHook",zg="core",ID="includeCorrelationHeaders",MD="getAbsoluteUrl",r="headers",a="requestHeaders",l="setRequestHeader",h="trackDependencyDataInternal",y="startTime",S="toLowerCase",L="enableRequestHeaderTracking",W="enableAjaxErrorStatusText",oe="enableAjaxPerfTracking",ye="maxAjaxCallsPerView",Me="excludeRequestFromAutoTrackingPatterns",et="addRequestContext",Ot="disableAjaxTracking",Ft="ajaxPerfLookupDelay",ln="disableFetchTracking",cr="enableResponseHeaderTracking",Fr="status",Jr="statusText",nr="headerMap",pa="openDone",Ts="sendDone",dc="requestSentTime",Au="abortDone",kh="getTraceId",gv="getTraceFlags",Y_="method",OB="errorStatusText",_$="stateChangeAttached",y$="responseText",OD="responseFinishedTime",PB="CreateTrackItem",v$="response",C$="getAllResponseHeaders",RB="getPartAProps",v6="perfMark",kO="name",xB="perfTiming",PD="exception",b$="ajaxDiagnosticsMessage",NB="correlationContext",DB="ajaxTotalDuration",E$="eventTraceCtx";function S$(s,o,e){return o=s[o],s=s[e],o&&s?Bp(o,s):0}function _T(n,t,f,i,o){return(f=S$(f,i,o))?Db(n,t,Mm(f)):0}function Db(n,t,e){var i=0;return n&&t&&e&&((n.ajaxPerf=n.ajaxPerf||{})[t]=e,i=1),i}var Id,wq=function(){this[pa]=!1,this.setRequestHeaderDone=!1,this[Ts]=!1,this[Au]=!1,this[_$]=!1},w$=function(){function n(t,e,i,o){var s=this,f=i;s[v6]=null,s.completed=!1,s.requestHeadersSize=null,s[a]=null,s.responseReceivingDuration=null,s.callbackDuration=null,s[DB]=null,s[m1]=0,s.pageUrl=null,s[Bg]=null,s.requestSize=0,s[Y_]=null,s[Fr]=null,s[dc]=null,s.responseStartedTime=null,s[OD]=null,s.callbackFinishedTime=null,s.endTime=null,s.xhrMonitoringState=new wq,s.clientFailure=0,s[K_]=t,s[fv]=e,s[Xf]=o?.getTraceFlags(),s[E$]=o?((i={})[NO]=o[kh](),i[DO]=o.getSpanId(),i[Xf]=o[gv](),i):null,Rl(n,s,function(v){v.getAbsoluteUrl=function(){return v[Bg]?function m5(e){return(e=GN(e))?e.href:undefined}(v[Bg]):null},v.getPathName=function(){return v[Bg]?yb(f,function HU(n,t){return n?n.toUpperCase()+" "+t:t}(v[Y_],v[Bg])):null},v[PB]=function(I,D,k){var X;return v.ajaxTotalDuration=Math.round(1e3*Bp(v.requestSentTime,v.responseFinishedTime))/1e3,v[DB]<0?null:((X={id:"|"+v[K_]+"."+v[fv],target:v[MD]()})[kO]=v.getPathName(),X.type=I,X[y]=null,X.duration=v[DB],X.success=200<=+v[Fr]&&+v[Fr]<400,X.responseCode=+v[Fr],X[g1]={HttpMethod:v[Y_]},X=(I=X)[g1],v[m1]&&(X[m1]=!0),v[dc]&&(I[y]=new Date,I[y].setTime(v[dc])),function Sq(n,t){var e,i=n[xB],o=t[g1]||{},s=0,f="domainLookup",v="connect",I="request",D="response",k=v+"End",X=I+(X="Start"),fe=D+"End",Se="transferSize",Ve="encodedBodySize",Je="decodedBodySize",lt="serverTiming";i?(s=(s=(s=(s=(s=(s=(s|=_T(o,"End",i,"redirectStart","End"))|_T(o,f,i,"domainLookupStart","domainLookupEnd"))|_T(o,v,i,"connectStart",k))|_T(o,I,i,X,"requestEnd"))|_T(o,D,i,"responseStart",fe))|_T(o,"networkConnect",i,"startTime",k))|_T(o,"sentRequest",i,X,fe),f=(f=i[y6])||S$(i,"startTime",fe)||0,s=(s|=Db(o,y6,f))|Db(o,"perfTotal",f),(v=i[lt])&&(e={},lo(v,function(mt,Yn){Yn=dw(mt.name||""+Yn);var sr=e[Yn]||{};hs(mt,function(ri,tn){!("name"!==ri&&ha(tn)||NC(tn))||!(tn=sr[ri]?sr[ri]+";"+tn:tn)&&ha(tn)||(sr[ri]=tn)}),e[Yn]=sr}),s|=Db(o,lt,e)),s=(s=(s|=Db(o,Se,i[Se]))|Db(o,Ve,i[Ve]))|Db(o,Je,i[Je])):n[v6]&&(s|=Db(o,"missing",n.perfAttempts)),s&&(t[g1]=o)}(v,I),D&&0<m_(v.requestHeaders)[q_]&&(X[a]=v[a]),k&&(D=k())&&((k=D[NB])&&(I.correlationContext=k),D[nr]&&0<m_(D.headerMap)[q_]&&(X.responseHeaders=D[nr]),v[OB])&&(400<=v[Fr]?(""!==(k=D.type)&&"text"!==k||(X.responseText=D.responseText?D[Jr]+" - "+D.responseText:D[Jr]),"json"===k&&(X.responseText=D.response?D[Jr]+" - "+JSON.stringify(D[v$]):D[Jr])):0===v[Fr]&&(X.responseText=D[Jr]||"")),I)},v[RB]=function(){var I,D=null,k=v[E$];return k&&(k[NO]||k[DO])&&(I=(D={}).trace=((I={})[K_]=k[NO],I.parentID=k[DO],I),Xr(k[Xf])||(I[Xf]=k[Xf])),D}})}return n.__ieDyn=1,n}(),T$="ai.ajxmn.",RD="diagLog",kb="_ajaxData",yT="fetch",xD="Failed to monitor XMLHttpRequest",A$=", monitoring data for this ajax call ",LO=A$+"may be incorrect.",I$=A$+"won't be sent.",M$="Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",O$="Failed to add custom defined request context as configured call back may missing a null check.",P$="Failed to calculate the duration of the ",Tq=0,FO=function(n,t){return n&&t&&n[kb]?(n[kb].i||{})[t]:null},kB=function(n,t){var e=!1;return n&&(n=(n[kb]||{}).xh)&&lo(n,function(i){if(i.n===t)return e=!0,-1}),e};function C6(n,t){var e="";try{var i=FO(n,t);i&&i[Bg]&&(e+="(url: '"+i[Bg]+"')")}catch{}return e}function ND(n,t,e,i,o){Di(n[RD](),1,t,e,i,o)}function _1(n,t,e,i,o){Di(n[RD](),2,t,e,i,o)}function DD(n,t,e){return function(i){var o;ND(n,t,e,((o={ajaxDiagnosticsMessage:C6(i[fT],n._ajaxDataId)})[PD]=io(i.err),o))}}function HO(n,t){return n&&t?kp(n,t):-1}function R$(n,t,e){var i={id:t,fn:e};return n.push(i),{remove:function(){lo(n,function(o,s){if(o.id===i.id)return n.splice(s,1),-1})}}}function x$(n,t,e,i){var o=!0;return lo(t,function(s,f){try{!1===s.fn.call(null,e)&&(o=!1)}catch(v){Di(n&&n.logger,1,64,"Dependency "+i+" [#"+f+"] failed: "+Cc(v),{exception:io(v)},!0)}}),o}var b6="*.blob.core.",Pq=Uf([b6+"windows.net",b6+"chinacloudapi.cn",b6+"cloudapi.de",b6+"usgovcloudapi.net"]),Rq=[/https:\/\/[^\/]*(\.pipe\.aria|aria\.pipe|events\.data|collector\.azure)\.[^\/]+\/(OneCollector\/1|Collector\/3)\.0/i],xq=Uf(((Id={})[ye]=500,Id[Ot]=!1,Id[ln]=!1,Id[Me]=void 0,Id.disableCorrelationHeaders=!1,Id.distributedTracingMode=1,Id.correlationHeaderExcludedDomains=Pq,Id.correlationHeaderDomains=void 0,Id.correlationHeaderExcludePatterns=void 0,Id.appId=void 0,Id.enableCorsCorrelation=!1,Id[L]=!1,Id[cr]=!1,Id[W]=!1,Id[oe]=!1,Id.maxAjaxPerfLookupAttempts=3,Id[Ft]=25,Id.ignoreHeaders=["Authorization","X-API-Key","WWW-Authenticate"],Id[et]=void 0,Id.addIntEndpoints=!0,Id)),Nq=function(n){function t(){var e,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,lt,mt,_n,Yn,sr,ri,tn,zn,Zn,Er,yi,Lt,Hn,hn,vr,si,Bi=n.call(this)||this;return Bi.identifier=t.identifier,Bi.priority=120,Rl(t,Bi,function(Un,pi){var Bo=pi[mT];function Li(){var Dn=bm();si=i=e=!1,o=Dn&&Dn.host&&Dn.host[S](),Je=Se=X=k=v=f=!1,_n=mt=!(lt={}),ri=sr=Yn=fe=D=s=null,zn=Ve=I=0,Zn=[],Er=[],tn=Kf("ajaxData"),Un._ajaxDataId=tn,hn=Hn=Lt=1,vr=yi=null}function Qi(Dn){var er=!0;return(Dn||yi)&&lo(yi,function(hi){if(hi[S]()===Dn[S]())return er=!1,-1}),er}function Bn(Dn,er,hi){Bo(function p5(n,t,e){return n?qM(n[ym],t,e,!1):null}(Dn,er,hi))}function Qs(Dn,er,hi){var to,Gi,Vo=!1,Ye=((ha(er)?er:(er||{}).url||"")||"")[S]();return lo(Yn,function(Be){var Pe=Be;ha(Be)&&(Pe=new RegExp(Be)),Vo=Vo||Pe.test(Ye)}),Vo||(to=HO(Ye,"?"),Gi=HO(Ye,"#"),-1!==(to=-1===to||-1!==Gi&&Gi<to?Gi:to)&&(Ye=Ye.substring(0,to)),Xr(Dn)?Xr(er)||(Vo="object"==typeof er&&!0===er[Dw]||!!hi&&!0===hi[Dw]):Vo=!0===Dn[Dw]||!0===Ye[Dw],(Vo=!(Vo||!Ye||!KN(Ye))||Vo)?lt[Ye]||(lt[Ye]=1):lt[Ye]&&(Vo=!0)),Vo}function Zi(Dn,er,hi){var to=!0,Gi=i;return Xr(Dn)||(to=!0===hi||!Xr(er)),Gi&&to}function Na(){var Dn=null;return!(Dn=Un[zg]&&Un[zg].getTraceCtx?Un[zg].getTraceCtx(!1):Dn)&&D&&D.telemetryTrace?WN(D.telemetryTrace):Dn}function za(Dn,er){var hi;er[Bg]&&fe&&Se&&(hi=b_())&&Sa(hi.mark)&&(Dn=fe+Dn+"#"+ ++Tq,hi.mark(Dn),hi=hi.getEntriesByName(Dn))&&1===hi[q_]&&(er[v6]=hi[0])}function Vi(Dn,er,hi,to){var Gi=er[v6],Vo=b_(),Ye=Lt,Be=Hn,Pe=er[Bg],$e=0;!function gt(){try{if(Vo&&Gi){$e++;for(var kt=null,yn=Vo.getEntries(),Fn=yn[q_]-1;0<=Fn;Fn--){var St=yn[Fn];if(St){if("resource"===St.entryType)St.initiatorType!==Dn||-1===HO(St[kO],Pe)&&-1===HO(Pe,St[kO])||(kt=St);else if("mark"===St.entryType&&St[kO]===Gi[kO]){er[xB]=kt;break}if(St[y]<Gi[y]-1e3)break}}}!Gi||er[xB]||Ye<=$e||!1===er.async?(Gi&&Sa(Vo.clearMarks)&&Vo.clearMarks(Gi[kO]),er.perfAttempts=$e,hi()):Lp(gt,Be)}catch(pn){to(pn)}}()}function Sn(Dn){var er="";try{Xr(Dn)||(er+="(url: '".concat("string"==typeof Dn?Dn:Dn.url,"')"))}catch(hi){ND(Un,15,"Failed to grab failed fetch diagnostics message",{exception:io(hi)})}return er}function bi(Dn,er,hi,to,Gi,Vo){function Ye(Be,Pe,$e){($e=$e||{}).fetchDiagnosticsMessage=Sn(hi),Pe&&($e.exception=io(Pe)),_1(Un,Be,P$+"fetch call"+I$,$e)}Gi&&(Gi[OD]=iO(),Gi[Fr]=er,Vi(yT,Gi,function(){var Be,Pe=Gi[PB]("Fetch",f,Vo);try{sr&&(Be=sr({status:er,request:hi,response:to}))}catch{_1(Un,104,O$)}Pe?(void 0!==Be&&(Pe[g1]=ep(ep({},Pe.properties),Be)),Be=Gi[RB](),Si(Er,Un[zg],Gi,Pe,null,Be)):Ye(14,null,{requestSentTime:Gi[dc],responseFinishedTime:Gi[OD]})},function(Be){Ye(18,Be,null)}))}function Si(Dn,er,hi,to,Gi,Vo){var Ye,Be=!0;0<Dn[q_]&&((Ye={item:to})[g1]=Gi,Ye.sysProperties=Vo,Ye.context=hi?hi[gT]:null,Ye.aborted=!!hi&&!!hi[m1],Be=x$(er,Dn,Ye,"initializer")),Be&&Un[h](to,Gi,Vo)}Li(),Un.initialize=function(Dn,er,hi,to){var Gi,Vo;!Un.isInitialized()&&(pi.initialize(Dn,er,hi,to),ri=Tm(Kf("ajax"),er&&er.evtNamespace&&er.evtNamespace()),Un[mT](xu(Dn,function(Be){var Pe=ff(null,Be=Be.cfg,Un[zg]);s=Pe.getExtCfg(t.identifier,xq),hn=s.distributedTracingMode,f=s[L],v=s[W],Se=s[oe],Ve=s[ye],Yn=[].concat(s[Me]||[],!1!==s.addIntEndpoints?Rq:[]),sr=s[et],X=0===hn||1===hn,k=1===hn||2===hn,Se&&(fe=5<(Pe=Be.instrumentationKey||"unkwn")[q_]?T$+Bf(Pe,Pe[q_]-5)+".":T$+Pe+"."),mt=!!s[Ot],Lt=s.maxAjaxPerfLookupAttempts,Hn=s[Ft],yi=s.ignoreHeaders,vr=s.appId})),function Iq(n,t){var e,i=!1,o=(lw()&&(i=!(Xr(o=XMLHttpRequest[ym])||Xr(o.open)||Xr(o.send)||Xr(o.abort))),XI());if(i=!(o&&o<9)&&i)try{var s=new XMLHttpRequest,f={xh:[],i:((e={})[t]={},e)},v=(s[kb]=f,XMLHttpRequest[ym].open);XMLHttpRequest[ym].open=v}catch(I){i=!1,ND(n,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",((o={})[PD]=io(I),o))}return i}(Un,tn)&&Un[mT](xu(s,function(){f=s[L],(mt=!!s[Ot])||i||(Bn(XMLHttpRequest,"open",{ns:ri,req:function(Ye,Be,Pe,$e){var gt,kt,yn,Fn,St,pn,Wt;mt||(gt=FO(Ye=Ye[fT],tn),!Qs(Ye,Pe)&&Zi(Ye,gt,!0)&&(gt&&gt.xhrMonitoringState[pa]||(Fn=Ye,pn=(St=Na())&&St[kh]()||wm(),Wt=zf(wm(),0,16),(pn=(Fn=(Fn=Fn[kb]=Fn[kb]||{xh:[],i:{}}).i=Fn.i||{})[tn]=Fn[tn]||new w$(pn,Wt,Un[RD](),null==(Fn=Un.core)?void 0:Fn.getTraceCtx()))[Xf]=St&&St[gv](),pn[Y_]=Be,pn[Bg]=Pe,pn.xhrMonitoringState[pa]=!0,pn[a]={},pn.async=$e,pn[OB]=v,gt=pn),(yn=gt).xhrMonitoringState[_$]=U_(kt=Ye,"readystatechange",function(){var Yr,Br,vi;try{kt&&4===kt.readyState&&Zi(kt,yn)&&((vi=FO(Br=kt,tn))[OD]=iO(),vi[Fr]=Br[Fr],Vi("xmlhttprequest",vi,function(){try{var fi,Hr=vi[PB]("Ajax",f,function(){var Ki,bl,Yc;return(Yc={statusText:Br[Jr]})[nr]=null,Yc[NB]=function(Yo){try{var rt=Yo[C$]();if(null!==rt&&-1!==HO(rt[S](),rl[8]))return YN(Yo.getResponseHeader(rl[0]))}catch(xe){_1(Un,18,M$,((rt={})[b$]=C6(Yo,tn),rt[PD]=io(xe),rt))}}(Br),Yc.type=Br.responseType,Yc[y$]=function(Yo){try{var rt=Yo.responseType;if(""===rt||"text"===rt)return Yo[y$]}catch{}return null}(Br),Yc.response=Br[v$],Je&&(Ki=Br[C$]())&&(Ki=Vu(Ki).split(/[\r\n]+/),bl={},lo(Ki,function(xe){var rt=(xe=xe.split(": ")).shift();xe=xe.join(": "),Qi(rt)&&(bl[rt]=xe)}),Yc[nr]=bl),Yc}),fa=void 0;try{sr&&(fa=sr({status:Br[Fr],xhr:Br}))}catch{_1(Un,104,O$)}Hr?(void 0!==fa&&(Hr[g1]=ep(ep({},Hr.properties),fa)),fi=vi[RB](),Si(Er,Un[zg],vi,Hr,null,fi)):Mn(null,{requestSentTime:vi[dc],responseFinishedTime:vi[OD]})}finally{try{var Xs=(Br[kb]||{i:{}}).i||{};Xs[tn]&&(Xs[tn]=null)}catch{}}},function(fi){Mn(fi,null)}))}catch(fi){var eo=io(fi);eo&&-1!==HO(eo[S](),"c00c023f")||ND(Un,16,xD+" 'readystatechange' event handler"+LO,((Yr={})[b$]=C6(kt,tn),Yr[PD]=eo,Yr))}function Mn(fi,Hr){(Hr=Hr||{}).ajaxDiagnosticsMessage=C6(Br,tn),fi&&(Hr.exception=io(fi)),_1(Un,14,P$+"ajax call"+I$,Hr)}},ri)))},hkErr:DD(Un,15,xD+".open"+LO)}),Bn(XMLHttpRequest,"send",{ns:ri,req:function(Ye,Be){var Pe;mt||Zi(Ye=Ye[fT],Pe=FO(Ye,tn))&&!Pe.xhrMonitoringState[Ts]&&(za("xhr",Pe),Pe[dc]=iO(),Un[ID](Pe,void 0,void 0,Ye),Pe.xhrMonitoringState[Ts]=!0)},hkErr:DD(Un,17,xD+LO)}),Bn(XMLHttpRequest,"abort",{ns:ri,req:function(Ye){mt||Zi(Ye=Ye[fT],Ye=FO(Ye,tn))&&!Ye.xhrMonitoringState[Au]&&(Ye[m1]=1,Ye.xhrMonitoringState[Au]=!0)},hkErr:DD(Un,13,xD+".abort"+LO)}),Bn(XMLHttpRequest,"setRequestHeader",{ns:ri,req:function(Ye,Be,Pe){var $e;mt||($e=FO(Ye=Ye[fT],tn))&&Zi(Ye,$e)&&(function(n,t,e){n&&(n=(n[kb]||{}).xh)&&n.push({n:t,v:e})}(Ye,Be,Pe),f)&&Qi(Be)&&$e&&($e[a][Be]=Pe)},hkErr:DD(Un,71,xD+".setRequestHeader"+LO)}),i=!0)})),(hi=function Aq(){var n=jf();return!n||Xr(n.Request)||Xr(n.Request[ym])||Xr(n[yT])?null:n[yT]}())&&(Gi=jf(),Vo=hi.polyfill,Un[mT](xu(s,function(){Je=s[cr],(_n=!!s[ln])||e?Vo&&!si&&(Bo(qM(Gi,yT,{ns:ri,req:function(Ye,Be,Pe){Qs(null,Be,Pe)}})),si=!0):(Bo(qM(Gi,yT,{ns:ri,req:function(Ye,Be,Pe){var $e,gt;_n||!e||Qs(null,Be,Pe)||Vo&&i||($e=Ye.ctx(),gt=function(kt,yn){var Fn=Na(),St=Fn&&Fn[kh]()||wm(),pn=zf(wm(),0,16);(pn=new w$(St,pn,Un[RD](),null==(St=Un.core)?void 0:St.getTraceCtx()))[Xf]=Fn&&Fn[gv](),pn[dc]=iO(),pn[OB]=v,""===(St=kt instanceof Request?(kt||{}).url||"":kt)&&(Fn=bm())&&Fn.href&&(St=lx(Fn.href,"#")[0]),pn[Bg]=St,Fn="GET",yn&&yn[Y_]?Fn=yn[Y_]:kt&&kt instanceof Request&&(Fn=kt[Y_]),pn[Y_]=Fn;var Wt={};return f&&new Headers((yn?yn[r]:0)||kt instanceof Request&&kt[r]||{}).forEach(function(Yr,Br){Qi(Br)&&(Wt[Br]=Yr)}),pn[a]=Wt,za(yT,pn),pn}(Be,Pe),(Be=Un[ID](gt,Be,Pe))!==Pe&&Ye.set(1,Be),$e.data=gt)},rsp:function(Ye,Be){var Pe;_n||(Pe=Ye.ctx().data)&&(Ye.rslt=Ye.rslt.then(function($e){return bi(0,($e||{})[Fr],Be,$e,Pe,function(){var gt,kt;return(kt={statusText:($e||{})[Jr]})[nr]=null,kt[NB]=function(yn){if(yn&&yn[r])try{return YN(yn[r].get(rl[0]))}catch(Fn){_1(Un,18,M$,((yn={fetchDiagnosticsMessage:Sn(yn)})[PD]=io(Fn),yn))}}($e),Je&&$e&&(gt={},$e.headers.forEach(function(yn,Fn){Qi(Fn)&&(gt[Fn]=yn)}),kt[nr]=gt),kt}),$e}).catch(function($e){throw bi(0,0,Be,null,Pe,null,$e.message||io($e)),$e}))},hkErr:DD(Un,15,"Failed to monitor Window.fetch"+LO)},!0,_I())),e=!0)})),Vo)&&(Gi[yT].polyfill=Vo),to=Un[zg].getPlugin(dO))&&(D=to.plugin[gT])},Un._doTeardown=function(){Li()},Un.trackDependencyData=function(Dn,er){Si(Er,Un[zg],null,Dn,er)},Un[ID]=function(Dn,er,hi,to){var Gi,Vo,Ye,Be,Pe=Un._currentWindowHost||o;return function Oq(n,t,e,i,o,s){var f;0<n[q_]&&((f={})[zg]=t,f.xhr=i,f.input=o,f.init=s,f.traceId=e[K_],f.spanId=e[fv],f.traceFlags=e[Xf],f.context=e[gT]||{},f.aborted=!!e[m1],x$(t,n,i=f,"listener"),e[K_]=i[NO],e[fv]=i[DO],e[Xf]=i[Xf],e[gT]=i[gT])}(Zn,Un[zg],Dn,to,er,hi),er||""===er?(C5(s,Dn[MD](),Pe)&&(hi=hi||{},er=new Headers(hi[r]||er instanceof Request&&er[r]||{}),X&&(er.set(rl[3],Gi="|"+Dn[K_]+"."+Dn[fv]),f)&&(Dn[a][rl[3]]=Gi),(Vo=vr||D&&D.appId())&&(er.set(rl[0],rl[2]+Vo),f)&&(Dn[a][rl[0]]=rl[2]+Vo),k&&(Xr(Ye=Dn[Xf])&&(Ye=1),Be=PU(CM(Dn[K_],Dn[fv],Ye)),er.set(rl[4],Be),f)&&(Dn[a][rl[4]]=Be),hi[r]=er),hi):to?(C5(s,Dn[MD](),Pe)&&(X&&(kB(to,rl[3])?_1(Un,71,"Unable to set ["+rl[3]+"] as it has already been set by another instance"):(to[l](rl[3],Gi="|"+Dn[K_]+"."+Dn[fv]),f&&(Dn[a][rl[3]]=Gi))),(Vo=vr||D&&D.appId())&&(kB(to,rl[0])?_1(Un,71,"Unable to set ["+rl[0]+"] as it has already been set by another instance"):(to[l](rl[0],rl[2]+Vo),f&&(Dn[a][rl[0]]=rl[2]+Vo))),k)&&(Xr(Ye=Dn[Xf])&&(Ye=1),kB(to,rl[4])?_1(Un,71,"Unable to set ["+rl[4]+"] as it has already been set by another instance"):(Be=PU(CM(Dn[K_],Dn[fv],Ye)),to[l](rl[4],Be),f&&(Dn[a][rl[4]]=Be))),to):void 0},Un[h]=function(Dn,er,hi){-1===Ve||I<Ve?(2!==hn&&1!==hn||"string"!=typeof Dn.id||"."===Dn.id[Dn.id[q_]-1]||(Dn.id+="."),Xr(Dn[y])&&(Dn[y]=new Date),Dn=rv(Dn,ev.dataType,ev.envelopeType,Un[RD](),er,hi),Un[zg].track(Dn)):I===Ve&&ND(Un,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0),++I},Un.addDependencyListener=function(Dn){return R$(Zn,zn++,Dn)},Un.addDependencyInitializer=function(Dn){return R$(Er,zn++,Dn)}}),Bi}return P_(t,n),t.prototype.processTelemetry=function(e,i){this.processNext(e,i)},t.prototype.addDependencyInitializer=function(e){return null},t.identifier="AjaxDependencyPlugin",t}($0),Dq=function(){},kq=function(){this.id="browser",this.deviceClass="Browser"},Fq=function(n,t){var e=this,i=xu(n,function(){var o=n.sdkExtension;e.sdkVersion=(o?o+"_":"")+"javascript:3.1.1"});t&&t.add(i)},Hq=function(){},E6="sessionManager",S6="update",w6="isUserCookieSet",T6="isNewUser",LB="getTraceCtx",FB="telemetryTrace",N$="applySessionContext",D$="applyApplicationContext",k$="applyDeviceContext",L$="applyOperationContext",F$="applyUserContext",H$="applyOperatingSystemContxt",U$="applyLocationContext",B$="applyInternalContext",vT="accountId",A6="getSessionId",HB="namePrefix",z$="userCookiePostfix",I6="idLength",UB="getNewId",M6="length",UO="automaticSession",BO="authenticatedId",kD="acquisitionDate",O6="renewalDate",LD="join",FD="cookieSeparator",BB="authUserCookieName",j$=function(){},Vq=function(){function n(t,e,i){var o,s,f,v,I=Uy(e),D=fN(e);Rl(n,this,function(k){var X=xu(t=t||{},function(Ve){f=t.sessionExpirationMs||864e5,v=t.sessionRenewalMs||18e5,o="ai_session"+(t.sessionCookiePostfix||t[HB]||"")});function Se(mt,Je){var _n=mt[kD],lt=(mt[O6]=Je,v),Yn=_n+f-Je;mt=[mt.id,_n,Je],_n=0,_n=Yn<lt?Yn/1e3:lt/1e3,Yn=t.cookieDomain||null,D.set(o,mt[LD]("|"),0<f?_n:null,Yn),s=Je}i&&i.add(X),k[UO]=new j$,k[S6]=function(){var Ve,Je,Yn,sr,ri,lt=Ag(),mt=!1,_n=k[UO];!(mt=_n.id?mt:(Yn=_n,sr=!1,ri=D.get(o),(ri&&Sa(ri.split)||(ri=A5(I,o)))&&(sr=function fe(Ve,Je){var lt=!1,mt=", session will be reset",_n=Je.split("|");if(2<=_n[M6])try{var Yn=+_n[1]||0,sr=+_n[2]||0;isNaN(Yn)||Yn<=0?Di(I,2,27,"AI session acquisition date is 0"+mt):isNaN(sr)||sr<=0?Di(I,2,27,"AI session renewal date is 0"+mt):_n[0]&&(Ve.id=_n[0],Ve[kD]=Yn,Ve[O6]=sr,lt=!0)}catch(ri){Di(I,1,9,"Error parsing ai_session value ["+(Je||"")+"]"+mt+" - "+Cc(ri),{exception:io(ri)})}return lt}(Yn,ri)),!(sr||Yn.id)))&&0<f&&(Je=lt-_n[O6],mt=(mt=(mt=(Ve=lt-_n[kD])<0||Je<0)||f<Ve)||v<Je),mt?(Ve=lt,k.automaticSession.id=(Je=t[UB]||rN)(t[I6]||22),k[UO][kD]=Ve,Se(k[UO],Ve),J0()||Di(I,2,0,"Browser does not support local storage. Session durations will be inaccurate.")):(!s||6e4<lt-s)&&Se(_n,lt)},k.backup=function(){var lt=k[UO];I5(I,o,[lt.id,lt[kD],lt=lt[O6]][LD]("|"))}})}return n.__ieDyn=1,n}(),Gq=function(n,t,e,i){this.traceID=n||wm(),this.parentID=t,n=bm(),!e&&n&&n.pathname&&(e=n.pathname),this.name=Ku(i,e)};function $$(n){return!("string"!=typeof n||!n||n.match(/,|;|=| |\|/))}var qq=function(){function n(t,e,i){this.isNewUser=!1,this.isUserCookieSet=!1;var o,s=Uy(e),f=fN(e);Rl(n,this,function(v){kc(v,"config",{g:function(){return t}});var I=xu(t,function(){var fe=((fe=f.get(o=n.userCookieName+(fe=t[z$]||"")))&&(v[T6]=!1,0<(fe=fe.split(n[FD]))[M6])&&(v.id=fe[0],v[w6]=!!v.id),v.id||(v.id=D(),X(k(v.id)[LD](n[FD])),function UU(n,t){var e=oO();if(null!==e)try{return e[WM](t),!0}catch(i){Qy=!1,Di(n,2,5,"Browser failed removal of local storage item. "+Cc(i),{exception:io(i)})}}(s,fe=(t[HB]||"")+"ai_session")),v[vT]=t[vT]||void 0,f.get(n[BB]));fe&&((fe=(fe=decodeURI(fe)).split(n[FD]))[0]&&(v[BO]=fe[0]),1<fe[M6])&&fe[1]&&(v[vT]=fe[1])});function D(){var fe=t||{};return(fe[UB]||rN)(fe[I6]?t[I6]:22)}function k(fe){var Se=N0(new Date);return v.accountAcquisitionDate=Se,v[T6]=!0,[fe,Se]}function X(fe){v[w6]=f.set(o,fe,31536e3)}i&&i.add(I),v.setAuthenticatedUserContext=function(fe,Se,Ve){void 0===Ve&&(Ve=!1),!$$(fe)||Se&&!$$(Se)?Di(s,2,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0):(v[BO]=fe,fe=v[BO],Se&&(v[vT]=Se,fe=[v[BO],v.accountId][LD](n[FD])),Ve&&f.set(n[BB],encodeURI(fe)))},v.clearAuthenticatedUserContext=function(){v[BO]=null,v[vT]=null,f.del(n[BB])},v[S6]=function(fe){v.id===fe&&v[w6]||X(k(fe||D())[LD](n[FD]))}})}return n.cookieSeparator="|",n.userCookieName="ai_user",n.authUserCookieName="ai_authUser",n}(),P6="ext",R6="tags";function zO(n,t){n&&n[t]&&0===m_(n[t])[M6]&&delete n[t]}function V$(){return null}var yf,zB,Lb,x6,HD,N6,VO,Kq=function(){function n(t,e,i,o){var s=this,f=t.logger;Rl(n,this,function(v){var I,D,k;v.appId=V$,v[A6]=V$,v.application=new Dq,v.internal=new Fq(e,o),FS()&&(v[E6]=new Vq(e,t,o),v.device=new kq,v.location=new Hq,v.user=new qq(e,t,o),D=I=void 0,i&&(I=i.getTraceId(),D=i.getSpanId(),k=i.getName()),v[FB]=new Gq(I,D,k,f),v.session=new j$),v[A6]=function(){var X=v.session;return X&&ha(X.id)||(X=(v[E6]||{})[UO])&&ha(X.id)?X.id:null},v[N$]=function(X,fe){_l(Nh(X.ext,"app"),"sesId",v[A6](),ha)},v[H$]=function(X,fe){_l(X.ext,"os",v.os)},v[D$]=function(X,fe){var Se=v.application;Se&&(_l(X=Nh(X,R6),xl.applicationVersion,Se.ver,ha),_l(X,xl.applicationBuild,Se.build,ha))},v[k$]=function(X,fe){var Se=v.device;Se&&(_l(X=Nh(Nh(X,P6),"device"),"localId",Se.id,ha),_l(X,"ip",Se.ip,ha),_l(X,"model",Se.model,ha),_l(X,"deviceClass",Se.deviceClass,ha))},v[B$]=function(X,fe){var Se,Ve=v.internal;Ve&&(_l(Se=Nh(X,R6),xl.internalAgentVersion,Ve.agentVersion,ha),_l(Se,xl.internalSdkVersion,Ku(f,Ve.sdkVersion,64),ha),X.baseType!==uw.dataType&&X.baseType!==t1.dataType||(_l(Se,xl.internalSnippet,Ve.snippetVer,ha),_l(Se,xl.internalSdkSrc,Ve.sdkSrc,ha)))},v[U$]=function(X,fe){var Se=s.location;Se&&_l(Nh(X,R6,[]),xl.locationIp,Se.ip,ha)},v[L$]=function(X,fe){var Se=v[FB];Se&&(_l(X=Nh(Nh(X,P6),"trace",{traceID:void 0,parentID:void 0}),"traceID",Se.traceID,ha,Xr),_l(X,"name",Se.name,ha,Xr),_l(X,"parentID",Se.parentID,ha,Xr))},v.applyWebContext=function(X,fe){var Se=s.web;Se&&_l(Nh(X,P6),"web",Se)},v[F$]=function(X,fe){var Se=v.user;Se&&(_l(Nh(X,R6,[]),xl.userAccountId,Se[vT],ha),_l(X=Nh(Nh(X,P6),"user"),"id",Se.id,ha),_l(X,"authId",Se[BO],ha))},v.cleanUp=function(X,fe){(X=X.ext)&&(zO(X,"device"),zO(X,"user"),zO(X,"web"),zO(X,"os"),zO(X,"app"),zO(X,"trace"))}})}return n.__ieDyn=1,n}(),jO=null,Yq=xp(((yf={})[vT]=jO,yf.sessionRenewalMs=18e5,yf.samplingPercentage=100,yf.sessionExpirationMs=864e5,yf.cookieDomain=jO,yf.sdkExtension=jO,yf.isBrowserLinkTrackingEnabled=!1,yf.appId=jO,yf[A6]=jO,yf[HB]=zB,yf.sessionCookiePostfix=zB,yf[z$]=zB,yf[I6]=22,yf[UB]=jO,yf)),Wq=function(n){function t(){var e,i,o,s,f,v=n.call(this)||this;return v.priority=110,v.identifier=dO,Rl(t,v,function(I,D){function k(){f=!(s=o=i=e=null)}k(),kc(I,"context",{g:function(){return s}}),I.initialize=function(X,fe,Se,Ve){var Je,lt,mt;D.initialize(X,fe,Se,Ve),lt=I.identifier,mt=I.core,I._addHook(xu(Je=X,function(){var _n=ff(null,Je,mt);Je.storagePrefix&&QN(Je.storagePrefix),f=!1!==Je.disableUserInitMessage,e=_n.getExtCfg(lt,Yq),I._extConfig=e})),o=mt[LB](!1),s=new Kq(mt,e,o,I._unloadHooks),i=WN(I.context[FB],o),mt.setTraceCtx(i),I.context.appId=function(){var _n=mt.getPlugin(hO);return _n?_n.plugin._appId:null}},I.processTelemetry=function(X,fe){var Se,Ve,Je,lt;Xr(X)||(fe=I._getTelCtx(fe),X.name===t1.envelopeType&&fe.diagLog().resetInternalMessageCount(),(Je=s||{}).session&&"string"!=typeof s.session.id&&Je[E6]&&Je[E6][S6](),(Se=Je.user)&&!Se[w6]&&Se[S6](Je.user.id),Je=fe,Nh(Ve=X,"tags",[]),Nh(Ve,"ext",{}),(lt=I.context)[N$](Ve,Je),lt[D$](Ve,Je),lt[k$](Ve,Je),lt[L$](Ve,Je),lt[F$](Ve,Je),lt[H$](Ve,Je),lt.applyWebContext(Ve,Je),lt[U$](Ve,Je),lt[B$](Ve,Je),lt.cleanUp(Ve,Je),Se&&Se[T6]&&(Se[T6]=!1,f||(lt=new uw(72,($f()||{}).userAgent||""),function eM(n,t,e){Gx(n)[vx](t,e)}(fe.diagLog(),1,lt))),I.processNext(X,fe))},I._doTeardown=function(X,fe){(X=(X||{}).core())&&X[LB]&&X[LB](!1)===i&&X.setTraceCtx(o),k()}}),v}return P_(t,n),t.__ieDyn=1,t}($0),Qq=Wq,G$="AuthenticatedUserContext",$O="track",jB="snippet",$B="flush",q$="pollInternalLogs",VB="getPlugin",GB="evtNamespace",rK=$O+"Event",iK=$O+"Trace",oK=$O+"Metric",aK=$O+"PageView",sK=$O+"Exception",cK=$O+"DependencyData",lK="set"+G$,uK="clear"+G$,qB="version",CT="queue",D6="connectionString",k6="endpointUrl",KB="userOverrideEndpointUrl",YB="instrumentationKey",UD="onunloadFlush",xm="context",K$="addHousekeepingBeforeUnload",WB="sendMessage",Y$=[jB,"dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],W$="iKeyUsage",Q$="CdnUsage",X$="SdkLoaderVer",L6=void 0,F6={disabled:!0,limit:U0({samplingRate:100,maxSendNumber:1}),interval:U0({monthInterval:3,daysOfMonth:[28]})},fK=((Lb={})[D6]=L6,Lb[k6]=L6,Lb[YB]=L6,Lb[KB]=L6,Lb.diagnosticLogInterval=Cw(function gK(n){return n&&0<n},1e4),Lb.featureOptIn=((x6={})[W$]={mode:2},x6[Q$]={mode:2},x6[X$]={mode:2},x6),Lb.throttleMgrCfg=U0(((HD={})[109]=U0(F6),HD[106]=U0(F6),HD[111]=U0(F6),HD[110]=U0(F6),HD)),Lb),mK=function(){function n(t){var e,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,lt=this;Rl(n,this,function(mt){Yn(),kc(mt,"config",{g:function(){return D}}),lo(["pluginVersionStringArr","pluginVersionString"],function(tn){kc(mt,tn,{g:function(){return I?I[tn]:null}})}),s=""+(t.sv||t[qB]||""),t[CT]=t[CT]||[],t[qB]=t[qB]||2;var _n=Yf(t.config||{},fK);function Yn(){f=Kf("AISKU"),fe=s=o=i=e=v=null,Je=Ve=Se=!1,X=new wO}function sr(){v&&(function l5(n,t){$M([HM,"unload",cb],n,t)}(null,v),function u5(n,t){t=Tm(UM,t),$M([cb],n,t),$M([Ow],null,t)}(null,v))}function ri(tn){I.addUnloadHook(tn)}D=_n.cfg,k=new oB,kc(mt,"appInsights",{g:function(){return k}}),i=new Qq,e=new Nq,o=new MB,I=new ON,kc(mt,"core",{g:function(){return I}}),ri(xu(_n,function(){var tn,zn;D[D6]&&(zn=(tn=function VU(n){return n?(n=n[G0](";"),n=B4(n,function(e,s){return 2===(s=s[G0]("="))[Ba]&&(e[s[0][kw]()]=s=s[1]),e},{}),0<m_(n)[Ba]&&(n.endpointsuffix&&(n[pb]=n[pb]||"https://"+(n.location?n.location+".":"")+"dc."+n.endpointsuffix),n[pb]=n[pb]||V0,UC(n[pb],"/"))&&(n[pb]=n[pb].slice(0,-1)),n):{}}(D[D6])).ingestionendpoint,D[k6]=D[KB]||zn+hb,D[YB]=tn.instrumentationkey||D[YB]),D[k6]=D[KB]||D[k6]})),mt[jB]=t,mt[$B]=function(tn,zn){var Zn;return Sw(I,function(){return"AISKU.flush"},function(){function Er(){0==--yi&&zn()}tn&&!zn&&(Zn=Og(function(Lt){zn=Lt}));var yi=1;lo(I.getChannels(),function(Lt){Lt&&(yi++,Lt[$B](tn,Er))}),Er()},null,tn=void 0===tn||tn),Zn},mt[UD]=function(tn){void 0===tn&&(tn=!0),lo(I.getChannels(),function(zn){zn[UD]?zn[UD]():zn[$B](tn)})},mt.loadAppInsights=function(tn,zn,Zn){return(tn=void 0!==tn&&tn)&&function j4(n){throw new(vI=vI||ix("UnsupportedError"))(n)}("Legacy Mode is no longer supported"),Sw(mt.core,function(){return"AISKU.loadAppInsights"},function(){I.initialize(D,[o,i,e,k,X],zn,Zn),kc(mt,"context",{g:function(){return i[xm]}}),fe=fe||new zU(I);var Er,yi=function _K(){if(!N6){var n=null;try{var t=(document||{}).currentScript;t&&(n=t.src)}catch{}if(n){try{var e,i=n.toLowerCase();i&&(e="",lo(["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"],function(o,s){if(-1!==kp(i,o))return e="cdn"+(s+1),-1===kp(i,"/scripts/")&&(-1!==kp(i,"/next/")?e+="-next":-1!==kp(i,"/beta/")&&(e+="-beta")),N6=e+"",-1}))}catch{}N6=n}}return N6}();yi&&mt[xm]&&(mt[xm].internal.sdkSrc=yi),(Er=mt[jB])&&(yi="",Xr(s)||(yi+=s),mt[xm]&&mt[xm].internal&&(mt[xm].internal.snippetVer=yi||"-"),hs(mt,function(Lt,Hn){ha(Lt)&&!Sa(Hn)&&Lt&&"_"!==Lt[0]&&-1===uh(Y$,Lt)&&Er[Lt]!==Hn&&(Er[Lt]=Hn)})),mt.emptyQueue(),mt[q$](),mt[K$](mt),ri(xu(_n,function(){var Lt=!1;D.throttleMgrCfg[109]&&(Lt=!D.throttleMgrCfg[109].disabled),!fe.isReady()&&D.extensionConfig&&D.extensionConfig[X.identifier]&&Lt&&fe.onReadyState(!0),Se||D[D6]||!tM(W$,D)||(fe[WB](106,"See Instrumentation key support at aka.ms/IkeyMigrate"),Se=!0),!Ve&&mt[xm].internal.sdkSrc&&-1!=mt[xm].internal.sdkSrc.indexOf("az416426")&&tM(Q$,D)&&(fe[WB](110,"See Cdn support notice at aka.ms/JsActiveCdn"),Ve=!0),!Je&&parseInt(s)<6&&tM(X$,D)&&(fe[WB](111,"An updated Sdk Loader is available, see aka.ms/SnippetVer"),Je=!0)}))}),mt},mt.updateSnippetDefinitions=function(tn){!function qx(n,t,e){if(n&&t&&cd(n)&&cd(t))for(var i in t)!function(o){ha(o)&&(Sa(t[o])?e&&!e(o,!0,t,n)||(n[o]=w8(t,o)):e&&!e(o,!1,t,n)||(My(n,o)&&delete n[o],kc(n,o,{g:function(){return t[o]},s:function(f){t[o]=f}})))}(i)}(tn,mt,function(zn){return zn&&-1===uh(Y$,zn)})},mt.emptyQueue=function(){try{if(ts(mt.snippet[CT])){for(var tn=mt.snippet[CT].length,zn=0;zn<tn;zn++)(0,mt.snippet[CT][zn])();mt.snippet[CT]=void 0,delete mt.snippet[CT]}}catch(Zn){Zn&&Sa(Zn.toString)&&Zn.toString()}},mt[K$]=function(tn){var zn,Zn;(FS()||YR())&&(Zn=!(zn=function(){var Er;tn[UD](!1),Sa(mt.core[VB])&&(Er=lt.core[VB](dO))&&(Er=Er.plugin)&&Er[xm]&&Er[xm]._sessionManager&&Er[xm]._sessionManager.backup()}),v=v||Tm(f,I[GB]&&I[GB]()),ri(xu(D,function(Lt){var yi=ff(null,Lt=Lt.cfg,(yi=tn.appInsights).core).getExtCfg(yi.identifier||D5);sr(),Lt=Lt.disablePageUnloadEvents,yi.disableFlushOnBeforeUnload||(function c5(n,t,e){return function NU(n,t,e,i){var o=!1;return t&&n&&ts(n)&&!(o=Pw(n,t,e,i))&&e&&0<e[Ua]?Pw(n,t,null,i):o}([HM,"unload",cb],n,t,e)}(zn,Lt,v)&&(Zn=!0),Zn=!!db(zn,Lt,v)||Zn)||function $x(){var n=$f();return!(!n||!n.product)&&"ReactNative"===n.product}()||Di(I.logger,1,19,"Could not add handler for beforeunload and pagehide"),Zn||yi.disableFlushOnUnload||db(zn,Lt,v)})))},mt.getSender=function(){return o},mt.unload=function(tn,zn,Zn){var Er,yi=!1;return tn&&!zn&&(Er=Og(function(Lt){zn=Lt})),mt[UD](tn),sr(),I.unload&&I.unload(tn,function(Lt){yi||(yi=!0,Yn(),zn&&zn(Lt))},Zn),Er},hw(mt,k,["getCookieMgr",rK,aK,"trackPageViewPerformance",sK,"_onerror",iK,oK,"startTrackPage","stopTrackPage","startTrackEvent","stopTrackEvent"]),hw(mt,function(){return e},[cK,"addDependencyListener","addDependencyInitializer"]),hw(mt,I,["addTelemetryInitializer",q$,"stopPollingInternalLogs",VB,"addPlugin",GB,"addUnloadCb","getTraceCtx","updateCfg","onCfgChange"]),hw(mt,function(){var tn=i[xm];return tn?tn.user:null},[lK,uK])})}return n.prototype.addDependencyInitializer=function(t){return null},n}(),yK=function(){function n(t){this.options=t,!this.options.disableTelemetry&&Ne.appInsightsKey&&(this.appInsights=new mK({config:{instrumentationKey:Ne.appInsightsKey,disableExceptionTracking:!0,disableAjaxTracking:!0,isCookieUseDisabled:!0,maxBatchInterval:5e3}}),this.appInsights.loadAppInsights(),this.appInsights.addTelemetryInitializer(function(e){e.tags[xl.applicationVersion]=Rn.getFullVersion()}))}return n.prototype.trackEvent=function(t,e){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackEvent(t,e)},n.prototype.setAuthenticatedUserContext=function(t,e){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.setAuthenticatedUserContext(t,e)},n.prototype.trackException=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackException(t)},n.prototype.flush=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.flush(t)},n}(),vK=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Z$=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.copyrightMessage=void 0,e.copyrightContent=void 0,e.customAttribution=void 0,e.showFeedbackLink=!0,e.showLogo=!0,e}return vK(t,n),t}(_t),CK=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bK=function(n){function t(e){var i=n.call(this)||this;return i.textAttribution=function(o){return[i.options.copyrightMessage,i.options.customAttribution].filter(function(s){return s}).join("")},i.updateFeedbackLink=function(){var o,s;i.feedbackAnchor&&i.map&&(o=(s=i.map.getCamera()).center,s=s.zoom,i.feedbackAnchor.href="".concat(t.feedbackLink,"&cp=").concat(o[1],"~").concat(o[0],"&lvl=").concat(s+1))},i.options=(new Z$).merge(e),i}return CK(t,n),t.prototype.onAdd=function(e){return this.map=e,this.container=this.buildContainer(e,Ga.auto),this.container.className="map-copyright without-bg",this.copyrightDiv=this.buildCopyrightDiv(),this.copyrightDiv.className="azure-map-copyright",this.container.appendChild(this.copyrightDiv),this.options.showFeedbackLink&&this.addRemoveFeedbackDiv(!0),this.container},t.prototype.onRemove=function(){n.prototype.onRemove.call(this),delete this.container},t.prototype.setOptions=function(s){var i,o=this;(s=(new Z$).merge(this.options,s)).copyrightMessage===this.options.copyrightMessage&&s.customAttribution===this.options.customAttribution||(this.copyrightDiv.innerText=this.textAttribution(s)),s.copyrightContent!==this.options.copyrightContent&&(this.options.copyrightContent&&(i=Array.from(this.copyrightDiv.children).find(function(f){return f===o.options.copyrightContent}),this.copyrightDiv.removeChild(i)),0<this.copyrightDiv.childNodes.length?this.copyrightDiv.insertBefore(s.copyrightContent,this.copyrightDiv.childNodes[0]):this.copyrightDiv.appendChild(s.copyrightContent),this.options.copyrightContent=s.copyrightContent),!s.showFeedbackLink&&this.feedbackAnchor?this.addRemoveFeedbackDiv(!1):s.showFeedbackLink&&!this.feedbackAnchor&&this.addRemoveFeedbackDiv(!0),this.options=s},t.prototype.getDefaultAttributions=function(){var e=(new Date).getFullYear(),i=["\xa9".concat(e," TomTom")];return this.options.showLogo||i.push("\xa9".concat(e," Microsoft")),i},t.prototype.buildCopyrightDiv=function(){var e=document.createElement("div");return e.innerText=this.textAttribution(this.options)||"",e},t.prototype.buildFeedbackLink=function(){var e=document.createElement("a");return e.setAttribute("alt","Provide Map Data Feedback"),e.setAttribute("aria-label","Provide Map Data Feedback"),e.innerText="Feedback",e.href=t.feedbackLink,e.target="_blank",e.rel="noopener",e.className="azure-map-feedback-text",e},t.prototype.addRemoveFeedbackDiv=function(e){e?(this.feedbackAnchor=this.buildFeedbackLink(),this.feedbackTooltip=At("Provide Map Data Feedback"),this.container.appendChild(this.feedbackAnchor),this.container.appendChild(this.feedbackTooltip),ut(this.feedbackTooltip,this.feedbackAnchor),null!=(e=null==(e=this.map)?void 0:e.events)&&e.add("moveend",this.updateFeedbackLink)):(this.feedbackAnchor.remove(),this.feedbackTooltip.remove(),delete this.feedbackTooltip,delete this.feedbackAnchor,null!=(e=null==(e=this.map)?void 0:e.events)&&e.remove("moveend",this.updateFeedbackLink))},t.feedbackLink="https://aka.ms/azuremaps-feedback?feedbackep=UrlAzureMapsWebSdk",t}(ko),EK=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),J$=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.showLogo=!0,e}return EK(t,n),t}(_t),SK=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wK=function(n){function t(e){var i=n.call(this)||this;return i.map=null,i._onResize=function(){var o=(null==(o=null==(o=i.map)?void 0:o.getMapContainer())?void 0:o.clientWidth)||0;i._setVisiblity(i.options.showLogo&&t.CONTAINER_MIN_WIDTH<=o)},i.options=(new J$).merge(e),i}return SK(t,n),t.prototype.onAdd=function(e){return this.map=e,this.container=this.buildContainer(e,Ga.auto),this.container.className="map-logo-control",null!=(e=this.map)&&e.events.add("resize",this._onResize),this._addRemoveLogo(this.options.showLogo),this.container},t.prototype.onRemove=function(){var e;n.prototype.onRemove.call(this),null!=(e=this.map)&&e.events.remove("resize",this._onResize),this.map=null,delete this.container},t.prototype.setOptions=function(e){!(e=(new J$).merge(this.options,e)).showLogo&&this.logoAnchor?this._addRemoveLogo(!1):e.showLogo&&!this.logoAnchor&&this._addRemoveLogo(!0),this.options=e},t.prototype._addRemoveLogo=function(e){e?(this.logoAnchor=document.createElement("a"),this.logoAnchor.className="azure-map-logo",this.logoAnchor.href="https://aka.ms/azuremaps",this.logoAnchor.setAttribute("aria-label","Visit azure.microsoft.com"),this.logoAnchor.setAttribute("target","_blank"),this.container.appendChild(this.logoAnchor),this.logoTooltip=At("Visit azure.microsoft.com"),this.container.appendChild(this.logoTooltip),ut(this.logoTooltip,this.logoAnchor),this._setVisiblity(!0)):(null!=(e=this.logoAnchor)&&e.remove(),null!=(e=this.logoTooltip)&&e.remove(),delete this.logoAnchor,this._setVisiblity(!1))},t.prototype._setVisiblity=function(e){this.container&&(this.container.style.display=e?"flex":"none")},t.CONTAINER_MIN_WIDTH=480,t}(ko),TK=function(){function n(){}return n.throwOnError=function(s,e){function i(f){throw o.off("error",i),f.error}var o=s instanceof Sz?s._getMap():s;return o.on("error",i),s=e(),o.off("error",i),s},n.tryCatch=function(t,e,i,o){try{return this.throwOnError(t,e)}catch(s){return i(s)}finally{"function"==typeof o&&o()}},n.tryFinally=function(t,e,i){try{return this.throwOnError(t,e)}finally{i()}},n}(),eV=window&&window.__assign||function(){return(eV=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},AK=function(){function n(t){this.map=t}return n.prototype.request=function(i){var e;return i={domain:this.map.getServiceOptions().domain,path:"reverseGeocode",queryParams:eV({"api-version":"2023-06-01",coordinates:"".concat(Eu(i.position[0]),",").concat(od(i.position[1]))},i.style.view&&{view:i.style.view}),headers:{"Accept-Language":i.style.language}},new vt((null==(e=this.map.authentication)?void 0:e.signRequest(i))||i).get()},n}(),IK=function(){function n(){this._labelCache={},this._labelIdx={},this._preloadedCache=new Set}return n.prototype.cache=function(t,e,i,o){o="".concat(t,"_").concat(i[0],"_").concat(i[1],"_").concat(o),this._labelIdx[e.labelType]||(this._labelIdx[e.labelType]=[],this._labelCache[e.labelType]=[]),-1===this._labelIdx[e.labelType].indexOf(o)&&(this._labelCache[e.labelType].push({name:t,radius:e.radius,minZoom:e.minZoom,maxZoom:e.maxZoom||24,position:i}),this._labelIdx[e.labelType].push(o))},n.prototype.getNearestLabel=function(t,e,i){var o=null,s=this._labelCache[t];if(s)for(var f,v=1/0,I=0,D=s.length;I<D;I++)i>=s[I].minZoom&&i<=s[I].maxZoom&&(f=cf(s[I].position,e))<=s[I].radius&&f<=v&&(v=f,o=s[I]);return o},n.prototype._preloadCache=function(t){if(!this._preloadedCache.has(t)){this._preloadedCache.add(t);var e={source:[],labelType:"water",minZoom:0,radius:395e4,polygonSources:[]},i=t,o=i.indexOf("-");switch(i=-1!==o?i.substr(0,o):i){case"fr":this.cache("Oc\xe9an Pacifique",e,[-170,32],t),this.cache("Oc\xe9an Pacifique",e,[-138,-27],t),this.cache("Oc\xe9an Atlantique",e,[-40,32],t),this.cache("Oc\xe9an Atlantique",e,[-17,-29],t);break;case"es":this.cache("Oc\xe9an Pacifique",e,[-170,32],t),this.cache("Oc\xe9an Pacifique",e,[-138,-27],t),this.cache("Oc\xe9ano Atl\xe1ntico",e,[-40,32],t),this.cache("Oc\xe9ano Atl\xe1ntico",e,[-17,-29],t);break;case"pt":this.cache("Oceano Pac\xedfico",e,[-170,32],t),this.cache("Oceano Pac\xedfico",e,[-138,-27],t),this.cache("Oceano Atl\xe2ntico",e,[-40,32],t),this.cache("Oceano Atl\xe2ntico",e,[-17,-29],t);break;case"ja":this.cache("\u592a\u5e73\u6d0b",e,[-170,32],t),this.cache("\u592a\u5e73\u6d0b",e,[-138,-27],t);break;case"en":this.cache("Pacific Ocean",e,[-170,32],t),this.cache("Pacific Ocean",e,[-138,-27],t),this.cache("Atlantic Ocean",e,[-40,32],t),this.cache("Atlantic Ocean",e,[-17,-29],t),this.cache("Indian Ocean",e,[77,-26],t)}}},n}(),BD=window&&window.__awaiter||function(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})},zD=window&&window.__generator||function(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s=f&&k[f=0]?0:s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},tV=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},MK=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},OK=function(){function n(t,e){var i=this;this._disposed=!1,this._lastHeadingTime=0,this._actionQueue=[],this._pointerUpdateDelay=3e3,this._camUpdateDelay=1e3,this._headUpdateLimit=1e3,this._controlEventDelay=500,this._moveThreshold=25,this._headingThreshold=5,this._pitchThreshold=5,this._roadPixelRadius=120,this._minRoadDistance=25,this._minIntersectionPixelDistance=50,this._labelConfig=[{source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},{source:["Sea label"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["Sea","Ocean or sea"]},{source:["Country name"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["State name","State name short"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["Capital city","Large city"],labelType:"city",minZoom:8,radius:4e4},{source:["Medium city"],labelType:"city",minZoom:8,radius:3e4},{source:["Small city"],labelType:"city",minZoom:8,radius:2e4},{source:["Island label"],labelType:"city",minZoom:8,radius:1e4},{source:["Town"],labelType:"city",minZoom:10,radius:1e4},{source:["Village"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["Amusement area label"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["Amusement park"]},{source:["Hospital label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Hospital"]},{source:["Shopping centre label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Shopping"]},{source:["Stadium label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Stadium"]},{source:["University/School label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["University"]},{source:["Zoo label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Zoo"]},{source:["Airport Label","Airport name","Airport POI"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["Airport","Runway"]},{source:["National park label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["National or state park","National park","Forest"]},{source:["Reservation label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["Reservation"]}],this._labelCache=new Set(["city","state","country","water","majorPoi"]),this._roadLayers=new Set(["Connecting road","Connecting road tunnel","International road","International road tunnel","Local road","Local road tunnel","Major local road","Major local road tunnel","Major road","Major road tunnel","Minor local road","Minor local road tunnel","Motorway","Motorway tunnel","Secondary road","Secondary road tunnel","Toll connecting road","Toll connecting road tunnel","Toll international road","Toll international road tunnel","Toll local road","Toll local road tunnel","Toll major local road","Toll major local road tunnel","Toll major road","Toll major road tunnel","Toll minor local road","Toll minor local road tunnel","Toll motorway","Toll motorway tunnel","Toll secondary road","Toll secondary road tunnel"]),this._returnDetailedDescriptions=!1,this._shortcutListener=function(o){return BD(i,void 0,void 0,function(){var s,f,v;return zD(this,function(I){switch(I.label){case 0:return o.altKey&&o.ctrlKey&&68===o.keyCode?(this._returnDetailedDescriptions=!this._returnDetailedDescriptions,v=this._map.getCamera(),f=this._map.getStyle(),s=f.language.toLowerCase(),f=f.style.toLowerCase(),[4,this._getLocDesc(v,s,f)]):[3,2];case 1:v=I.sent(),this._descCallback(v),I.label=2;case 2:return[2]}})})},this._onRotate=function(){i._rotateTimeout||(i._rotateTimeout=Date.now()-i._lastHeadingTime>=i._headUpdateLimit?setTimeout(i._updateHeading,ao.RotationDuration+25):setTimeout(i._updateHeading,i._headUpdateLimit-(Date.now()-i._lastHeadingTime)))},this._onMove=function(){i._moveTimeout&&(clearTimeout(i._moveTimeout),delete i._moveTimeout),i._controlTimeout&&(clearTimeout(i._controlTimeout),delete i._controlTimeout)},this._onMoveEnd=function(o){o.fromControl?i._controlTimeout=setTimeout(i._updateCam,i._controlEventDelay):i._updateCam()},this._onStyleData=function(){setTimeout(i._updateStyle)},this._onPointerDown=function(o){i._lastPointerPos=i._getEventPos(o),i._pointerTimeout=setTimeout(function(){return BD(i,void 0,void 0,function(){var s,f,v;return zD(this,function(I){switch(I.label){case 0:return f=this._map.getStyle(),s=f.language.toLowerCase(),f=f.style.toLowerCase(),(v=this._map.getCamera()).center=this._map.pixelsToPositions([this._lastPointerPos])[0],[4,this._getLocDesc(v,s,f)];case 1:return v=I.sent(),this._descCallback(v),this._onPointerUp(),[2]}})})},i._pointerUpdateDelay),i._map.getCanvas().addEventListener("mousemove",i._onPointerMove),i._map.getCanvas().addEventListener("touchmove",i._onPointerMove),i._map.getCanvas().addEventListener("mouseup",i._onPointerUp),i._map.getCanvas().addEventListener("touchend",i._onPointerUp)},this._onPointerMove=function(f){f=i._getEventPos(f);var s=i._lastPointerPos[0]-f[0];f=i._lastPointerPos[1]-f[1],Math.sqrt(s*s+f*f)>i._moveThreshold&&i._onPointerUp()},this._onPointerUp=function(){clearTimeout(i._pointerTimeout),delete i._pointerTimeout,i._map.getCanvas().removeEventListener("mousemove",i._onPointerMove),i._map.getCanvas().removeEventListener("touchmove",i._onPointerMove),i._map.getCanvas().removeEventListener("mouseup",i._onPointerUp),i._map.getCanvas().removeEventListener("touchend",i._onPointerUp)},this._updateHeading=function(){var o,s=i._map.getCamera();i._lastHead&&!i._checkHeadingThreshold(s.bearing,i._lastHead)||(o=i._getHeadingDesc(s),i._lastHead=s.bearing,i._descCallback("<p>Map heading ".concat(o,".</p>")),i._lastHeadingTime=Date.now()),delete i._rotateTimeout},this._updateStyle=function(){return BD(i,void 0,void 0,function(){var o,s,f,v;return zD(this,function(I){switch(I.label){case 0:return o=this._map.getCamera(),f=this._map.getStyle(),s=f.language.toLowerCase(),f=f.style.toLowerCase(),this._lastLang===s?[3,2]:(n._labelCache._preloadCache(s),[4,this._getLocDesc(o,s,f)]);case 1:return v=I.sent(),[3,4];case 2:return this._lastStyle===f||"blank"!==this._lastStyle?[3,4]:[4,this._getLocDesc(o,s,f)];case 3:v=I.sent(),I.label=4;case 4:return this._lastLang=s,this._lastStyle=f,v&&this._descCallback(v),[2]}})})},this._updateCam=function(o){void 0===o&&(o=!1);var s,f,v,I=i._map.getCamera();(!i._lastCam||0<i._actionQueue.length||i._checkThresholds(I,i._lastCam))&&(v=i._map.getStyle(),s=v.language.toLowerCase(),f=v.style.toLowerCase(),(v=i._getActionDesc(I))&&i._actionQueue.push(v),i._lastCam=I,i._moveTimeout&&(clearTimeout(i._moveTimeout),delete i._moveTimeout),i._moveTimeout=setTimeout(function(){return BD(i,void 0,void 0,function(){var D;return zD(this,function(k){switch(k.label){case 0:return clearTimeout(this._rotateTimeout),delete this._rotateTimeout,[4,this._getLocDesc(I,s,f)];case 1:return D=k.sent(),0<this._actionQueue.length?(this._descCallback("<p>Map ".concat(this._actionQueue.join(", then "),".</p>").concat(D)),this._actionQueue=[]):this._descCallback(D),[2]}})})},o?0:i._camUpdateDelay))},this._map=t,this._restFallback=t.getServiceOptions().enableAccessibilityLocationFallback,this._descCallback=e,this._reverseSearch=new AK(t),n._labelCache||(n._labelCache=new IK),this._lastLang=this._map.getStyle().language.toLowerCase(),n._labelCache._preloadCache(this._lastLang),this._map.events.addOnce("idle",function(){var o;i._disposed||(i._updateCam(!0),i._baseVectorTileSourceId=n._baseVectorTileSourceIds.find(function(s){return i._map.sources.getById(s)}),"bing-mvt"===i._baseVectorTileSourceId&&(i._labelConfig=n._labelConfigBing,i._roadLayers=n._roadLayersBing),i._polygonStyleLayer=i._labelConfig.reduce(function(s,f){return f.polygonSources&&s.push.apply(s,MK([],tV(f.polygonSources),!1)),s},[]),(o=i._map._getMap()).on("move",i._onMove),o.on("moveend",i._onMoveEnd),o.on("styledata",i._onStyleData),o.on("rotate",i._onRotate),(o=i._map.getCanvas()).addEventListener("mousedown",i._onPointerDown),o.addEventListener("touchstart",i._onPointerDown))}),this._map.getMapContainer().addEventListener("keydown",this._shortcutListener)}return n.prototype.dispose=function(){var t;this._disposed=!0,((t=this._map._getMap()).off("move",this._onMove),t.off("moveend",this._onMoveEnd),t.off("styledata",this._onStyleData),t.off("rotate",this._onRotate),t=this._map.getCanvas()).removeEventListener("mousedown",this._onPointerDown),t.removeEventListener("touchstart",this._onPointerDown),this._map.getMapContainer().removeEventListener("keydown",this._shortcutListener)},n.prototype._getEventPos=function(t){var e,i;return"touches"in t?(e=t.touches[0],i=t.target.getBoundingClientRect(),[e.pageX-i.left,e.pageY-i.top]):[t.offsetX,t.offsetY]},n.prototype._checkThresholds=function(t,e){return this._checkZoomThreshold(t.zoom,e.zoom)||this._checkPitchThreshold(t.pitch,e.pitch)||this._checkLocThreshold(t.center,e.center)||this._checkHeadingThreshold(t.bearing,e.bearing)},n.prototype._checkZoomThreshold=function(t,e){return this._round(t)!==this._round(e)},n.prototype._checkPitchThreshold=function(t,e){return Math.abs(t-e)>=this._pitchThreshold},n.prototype._checkLocThreshold=function(t,e){return t=(e=tV(this._map.positionsToPixels([e,t]),2))[0],id.getDistance(t,e=e[1])>=this._moveThreshold},n.prototype._checkHeadingThreshold=function(t,e){return t<0&&(t+=360),e<0&&(e+=360),(t=180<(t=Math.abs(t-e))?360-t:t)>=this._headingThreshold},n.prototype._getLocDesc=function(t,e,i){return BD(this,void 0,void 0,function(){var o,s,f,v,I,D,k,X,fe,Se=this;return zD(this,function(Ve){switch(Ve.label){case 0:return"blank"===i?[3,3]:this._map._getMap().loaded()?[3,2]:[4,new Promise(function(Je){return Se._map._getMap().once("idle",Je)})];case 1:Ve.sent(),Ve.label=2;case 2:for(o={},s=this._map.positionsToPixels([t.center])[0],TK.tryCatch(this._map,function(){var Je=Se._map._getMap();f=Je.queryRenderedFeatures(s,{layers:Se._polygonStyleLayer.filter(function(lt){return Je.getLayer(lt)}),filter:["==",["geometry-type"],"Polygon"]})},function(){}),v=null,f&&0<f.length&&(v=f[0]),I=null,D=0,k=this._labelConfig.length;D<k;D++)t.zoom>=(X=this._labelConfig[D]).minZoom?X.polygonSources?v&&-1!==X.polygonSources.indexOf(v.layer["source-layer"])?(I=X.labelType,this._getClosestLabel(X,t,e,o,!1)):this._getClosestLabel(X,t,e,o,!0):this._getClosestLabel(X,t,e,o,!1):this._getClosestLabel(X,t,e,o,!0);return 8<=t.zoom&&this._processRoads(o,t,e),this._labelCache.forEach(function(Je){!o[Je]&&(fe=null,fe="water"!==Je&&"majorPoi"!==Je||Je===I?n._labelCache.getNearestLabel(Je,t.center,t.zoom):fe)&&(o[Je]=fe.name)}),[2,this._processLocInfo(t,I,o,!0,this._restFallback)];case 3:return[2,this._processLocInfo(t,null,null,!1,!1)]}})})},n.prototype._getHeadingDesc=function(t){var e=t.bearing;switch(e<0&&(e+=360),e=this._round(e,this._headingThreshold)){case 0:case 360:return"north";case 45:return"north east";case 90:return"east";case 135:return"south east";case 180:return"south";case 225:return"south west";case 270:return"west";case 315:return"north west";default:return"".concat(e," degrees")}},n.prototype._getClosestLabel=function(t,e,i,o,s){for(var f=t.radius,v=0,I=t.source.length;v<I;v++){var D={sourceLayer:t.source[v],filter:["has","name"]},k=this._map._getMap().querySourceFeatures(this._baseVectorTileSourceId,D),X=null,fe=1/0,Se=this._labelCache.has(t.labelType);if(!s||Se)for(var Ve=0,Je=k.length;Ve<Je;Ve++){var lt,mt="Point"===k[Ve].geometry.type?k[Ve]:cS(e.center,k[Ve].geometry);s||(lt="Point"===k[Ve].geometry.type?cf(e.center,mt.geometry.coordinates):mt.properties.distance)<fe&&(fe=lt,X=k[Ve]),Se&&n._labelCache.cache(k[Ve].properties.name,t,mt.geometry.coordinates,i)}s||(D=t.labelType+"Dis",X&&fe<=f&&("number"!=typeof o[D]||fe<=o[D])&&(o[t.labelType]=X.properties.name,o[D]=fe))}},n.prototype._processRoads=function(t,e,i,o){var s=this._map._getMap().queryRenderedFeatures(o,{filter:["==",["geometry-type"],"LineString"]});if(s){for(var f,v=void 0,I=void 0,D=void 0,k=void 0,X=0,fe=s.length;X<fe;X++)this._roadLayers.has(s[X].layer["source-layer"])&&s[X].properties.name&&""!==s[X].properties.name&&(f=cS(e.center,s[X]),!D||f.properties.distance<D.properties.distance)&&(v&&s[X].properties.name===v.properties.name?D=f:v&&s[X].properties.name===v.properties.name?(!k||f.properties.distance<k.properties.distance)&&(k=f,I=s[X]):(k=D,I=v,D=f,v=s[X]));v&&(!t.country&&v.properties.country_code&&(t.country=v.properties.country_code,t.countryDis=0,n._labelCache.cache(t.country,{source:[],labelType:"country",radius:5e3,minZoom:0},D.geometry.coordinates,i)),!t.state&&v.properties.country_subdivision&&(t.state=v.properties.country_subdivision,t.stateDis=0,n._labelCache.cache(t.state,{source:[],labelType:"state",radius:5e3,minZoom:4},D.geometry.coordinates,i)),15<=e.zoom)&&(o=this._map.positionsToPixels([e.center,D.geometry.coordinates]),(id.getDistance(o[0],o[1])<this._roadPixelRadius||D.properties.distance<this._minRoadDistance)&&(t.road=v.properties.name),I)&&(i=this._map.positionsToPixels([k.geometry.coordinates]),id.getDistance(o[0],i[0])<this._minIntersectionPixelDistance||k.properties.distance<this._minRoadDistance)&&(t.secondRoad=I.properties.name,t.secondRoadDis=k.properties.distance)}},n.prototype._getActionDesc=function(t){var e,i,o;return this._lastCam&&(e=[],this._checkLocThreshold(t.center,this._lastCam.center)&&(o=["panned"],0===(i=Math.round(h_(this._lastCam.center,t.center)))||360===i?o.push("north"):i<90?o.push("north east"):90===i?o.push("east"):i<180?o.push("south east"):180===i?o.push("south"):i<270?o.push("south west"):270===i?o.push("west"):i<360&&o.push("north west"),i=cf(this._lastCam.center,t.center,cc.meters),o.push(1e3<i?"".concat(Mp(i/1e3,2)," kilometers"):"".concat(Mp(i,2)," meters")),e.push(o.join(" "))),this._checkZoomThreshold(t.zoom,this._lastCam.zoom)&&((o=["zoomed"]).push(this._lastCam.zoom<t.zoom?"in":"out"),1<=(i=Math.abs(this._lastCam.zoom-t.zoom))&&(i=Math.ceil(i),o.push("".concat(i,1<i?" levels":" level"))),this._getCanonicalZoom(this._lastCam.zoom)!==this._getCanonicalZoom(t.zoom)&&o.push("to ".concat(this._getCanonicalZoom(t.zoom)," level")),t.zoom>=t.maxZoom&&o.push("Zoom In button disabled, maximum zoom level reached"),i=es.getSouth(t.bounds)<=-$A&&es.getNorth(t.bounds)>=$A,(t.zoom<=t.minZoom||i)&&o.push("Zoom Out button disabled, minimum zoom level reached"),e.push(o.join(" "))),this._checkPitchThreshold(t.pitch,this._lastCam.pitch)&&(i=this._round(t.pitch,this._pitchThreshold),e.push("pitched to ".concat(i," degrees")),60!==t.pitch&&0!==t.pitch||e.push("reached ".concat(o=60===t.pitch?"maximum":"minimum"," of ").concat(t.pitch," degrees"))),this._checkHeadingThreshold(this._lastCam.bearing,t.bearing)&&e.push("rotated to ".concat(this._getHeadingDesc(t))),e.join(" and "))||null},n.prototype._getCanonicalZoom=function(t){return(t=this._round(t))<2?"world":t<5?"country":t<11?"state province":t<15?"city":"street"},n.prototype._processLocInfo=function(t,e,i,o,s){var f=this;return new Promise(function(v,I){var D=[];if(o){var k=[];if(i&&(e&&("water"===e&&i.water?k.push(i.water):"majorPoi"===e&&i.majorPoi&&k.push(i.majorPoi)),0===k.length)&&(i.majorPoi&&8<=t.zoom?k.push(i.majorPoi):(i.poi&&14<=t.zoom?k.push(i.poi):i.road&&15<=t.zoom&&k.push(i.secondRoad?i.road+" & "+i.secondRoad:i.road),i.neighbourhood&&12<=t.zoom&&k.push(i.neighbourhood),i.city&&6<=t.zoom&&k.push(i.city)),i.state&&4<=t.zoom&&k.push(i.state),0===k.length?i.water?k.push(i.water):i.country&&k.push(i.country):1===k.length&&i.state&&4<=t.zoom&&i.country&&k.push(i.country)),0<k.length)D.push("<p>Location: ",k.join(", "),".</p>");else if(s&&"water"!==e)return void f._reverseGeocodeDescription(t).then(function(X){v(X)},function(){I("<p>Location: unknown</p>")})}f._returnDetailedDescriptions&&(D.push("<p>Zoom: ",Mp(t.zoom,2),".</p>"),D.push("<p>Latitude: ",Mp(t.center[1],5),".</p>"),D.push("<p>Longitude: ",Mp(t.center[0],5),".</p>")),v(D.join(""))})},n.prototype._reverseGeocodeDescription=function(t){var e=this;return new Promise(function(i){var o=e._map.getStyle();e._reverseSearch.request({position:t.center,style:o}).then(function(s){var f,v={};s&&s.features&&0<s.features.length&&null!=(f=null==(f=s.features[0])?void 0:f.properties)&&f.address&&((f=s.features[0].properties.address).countryRegion&&(v.country=f.countryRegion.name,n._labelCache.cache(v.country,{source:[],labelType:"country",radius:5e3,minZoom:0},t.center,o.language)),f.adminDistricts&&(v.state=null==(s=f.adminDistricts[0])?void 0:s.shortName,n._labelCache.cache(v.state,{source:[],labelType:"state",radius:5e3,minZoom:4},t.center,o.language)),f.locality&&(v.city=f.locality,n._labelCache.cache(v.city,{source:[],labelType:"city",radius:1e3,minZoom:10},t.center,o.language)),f.addressLine)&&(v.road=f.addressLine),e._processLocInfo(t,null,v,!0,!1).then(function(I){i(I)})},function(s){e._processLocInfo(t,null,null,!0,!1).then(function(f){i(f)})}).catch(function(s){e._processLocInfo(t,null,null,!0,!1).then(function(f){i(f)})})})},n.prototype._round=function(t,e){return void 0===e&&(e=1),Math.round(t/e)*e},n._baseVectorTileSourceIds=["microsoft.base","vectorTiles","bing-mvt"],n._labelConfigBing=[{source:["water_feature"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["generic_water_fill"]},{source:["water_feature"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["generic_water_fill"]},{source:["country_region"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["admin_division1"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["populated_place"],labelType:"city",minZoom:8,radius:4e4},{source:["neighborhood"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["amusement_park"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["amusement_park_fill"]},{source:["hospital"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["hospital_fill"]},{source:["shopping_center"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["shopping_center_fill"]},{source:["stadium"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["stadium_fill"]},{source:["higher_education_facility","school"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["higher_education_facility_fill","school_fill"]},{source:["zoo"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["zoo_fill"]},{source:["airport","airport_terminal"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["airport_terminal_fill","airport_fill-merged7","airport_runway_fill"]},{source:["reserve"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["generic_reserve_fill","land_cover_forest_fill"]}],n._roadLayersBing=new Set(["road"]),n}(),PK=function(n){var t=this;this.addToMap=function(){null==t.mapViewDesc&&(t.initializeMapLiveStateInfo(),t.initializeMapStyleInfo(),t.createMapKeyBindingInfo(),t.map.getMapContainer().setAttribute("role","application"),t.map.getMapContainer().setAttribute("aria-label","Map Application"),t.map.getCanvasContainer().setAttribute("aria-live","polite"),t.map.getCanvasContainer().setAttribute("aria-describedby","atlas-map-state atlas-map-style"),t.map.getCanvas().setAttribute("aria-label","Interactive Map"),t.map.getCanvas().setAttribute("aria-describedby","atlas-map-shortcuts"),t.map.getCanvas().setAttribute("alt","Interactive Map"))},this.removeFromMap=function(){null!=t.mapViewDesc&&t.mapViewDesc.dispose(),delete t.mapViewDesc,null!=t.atlasMapKeyBindings&&t.map.getCanvasContainer().removeChild(t.atlasMapKeyBindings),delete t.atlasMapKeyBindings,null!=t.atlasMapLiveStateInfo&&t.map.getCanvasContainer().removeChild(t.atlasMapLiveStateInfo),delete t.atlasMapLiveStateInfo,null!=t.atlasMapStyleInfo&&t.map.getCanvasContainer().removeChild(t.atlasMapStyleInfo),delete t.atlasMapStyleInfo,t.map.getMapContainer().removeAttribute("role"),t.map.getMapContainer().removeAttribute("aria-label"),t.map.getCanvasContainer().removeAttribute("aria-live"),t.map.getCanvasContainer().removeAttribute("aria-describedby"),t.map.getCanvas().removeAttribute("aria-label"),t.map.getCanvas().removeAttribute("aria-describedby"),t.map.getCanvas().removeAttribute("alt"),t.map.events.remove("stylechanged",t.updateMapStyle)},this.createMapKeyBindingInfo=function(){t.atlasMapKeyBindings=document.createElement("div"),t.atlasMapKeyBindings.setAttribute("tabindex","-1"),t.atlasMapKeyBindings.setAttribute("aria-hidden","true"),t.atlasMapKeyBindings.id="atlas-map-shortcuts",t.atlasMapKeyBindings.classList.add("hidden-accessible-element"),t.atlasMapKeyBindings.innerHTML=["Map shortcuts:","Zoom out: hyphen.","Zoom in: plus.","Pan right 100 pixels: right arrow.","Pan left 100 pixels: left arrow.","Pan up 100 pixels: up arrow.","Pan down 100 pixels: down arrow.","Rotate 15 degrees clockwise: shift + right arrow.","Rotate 15 degrees counter clockwise: shift + left arrow.","Increase pitch 10 degrees: shift + up arrow.","Decrease pitch 10 degrees: shift + down arrow.","Jump focus to the map: Escape."].join("\n"),t.map.getCanvasContainer().appendChild(t.atlasMapKeyBindings);var e=[189,187,38,37,39,40],i=t.map._getMap()._canvas;i?.addEventListener("keyup",function(o){e.find(function(s){return o.keyCode===s})&&(t.atlasMapKeyBindings.innerHTML="")})},this.initializeMapLiveStateInfo=function(){t.mapViewDesc=new OK(t.map,t.updateMapState),t.atlasMapLiveStateInfo=document.createElement("div"),t.atlasMapLiveStateInfo.setAttribute("tabindex","-1"),t.atlasMapLiveStateInfo.setAttribute("aria-hidden","true"),t.atlasMapLiveStateInfo.id="atlas-map-state",t.atlasMapLiveStateInfo.classList.add("hidden-accessible-element"),t.map.getCanvasContainer().appendChild(t.atlasMapLiveStateInfo)},this.initializeMapStyleInfo=function(){t.atlasMapStyleInfo=document.createElement("div"),t.atlasMapStyleInfo.setAttribute("tabindex","-1"),t.atlasMapStyleInfo.setAttribute("aria-hidden","true"),t.atlasMapStyleInfo.id="atlas-map-style",t.atlasMapStyleInfo.classList.add("hidden-accessible-element"),t.map.events.add("stylechanged",t.updateMapStyle),t.map.getCanvasContainer().appendChild(t.atlasMapStyleInfo)},this.updateMapStyle=function(){t.atlasMapStyleInfo.innerHTML="<p>Map style: ".concat(t.map.getStyle().style,".</p>")},this.updateMapState=function(e){t.atlasMapLiveStateInfo.innerHTML=e},this.map=n},RK=function(n){var t=this;this.listenerEnabled=!1,this.lastFlowMode="none",this.addToMap=function(){if(!t.map._isReady())throw new Error("Traffic flow could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before enabling traffic flow.");t.listenerEnabled||(t.map.events.add("styledata",t.addToMap),t.listenerEnabled=!0);var e,i=t.map.getTraffic();"none"!==i.flow&&(e=t.map.layers.getLayerById("traffic_".concat(i.flow)))&&(t.lastFlowMode=i.flow,e._updateLayoutProperty("visibility","visible","none"))},this.removeFromMap=function(){var e;t.map.getTraffic(),"none"!=t.lastFlowMode&&((e=t.map.layers.getLayerById("traffic_".concat(t.lastFlowMode)))&&e._updateLayoutProperty("visibility","none","visible"),t.lastFlowMode="none"),t.listenerEnabled&&(t.map.events.remove("styledata",t.addToMap),t.listenerEnabled=!1)},this.map=n},xK=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nV=function(n){function t(e,i,o){var f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=null!=(f=e.icon_category_12)?f:e.icon_category_11)?f:e.icon_category_10)?f:e.icon_category_9)?f:e.icon_category_8)?f:e.icon_category_7)?f:e.icon_category_6)?f:e.icon_category_5)?f:e.icon_category_4)?f:e.icon_category_3)?f:e.icon_category_2)?f:e.icon_category_1)?f:e.icon_category_0)?f:e.icon_category,s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=e.description_12)?s:e.description_11)?s:e.description_10)?s:e.description_9)?s:e.description_8)?s:e.description_7)?s:e.description_6)?s:e.description_5)?s:e.description_4)?s:e.description_3)?s:e.description_2)?s:e.description_1)?s:e.description_0)?s:e.description;return f={icon:"".concat(t.getSeverityColorName(e.magnitude),"-").concat(t.getIncidentTypeIconName(f)),incidentType:t.getIncidentTypeName(f,o),description:s,delay:e.delay,color:t.getSeverityColorHexCode(e.magnitude),id:e.id},n.call(this,i,f)||this}return xK(t,n),t.getIncidentTypeName=function(e,i){switch(e){case 0:default:return i.Unknown;case 1:return i.Accident;case 2:return i.Fog;case 3:return i.Danger;case 4:return i.Rain;case 5:return i.Ice;case 6:return i.Jam;case 7:return i.LaneClosed;case 8:return i.RoadClosed;case 9:return i.RoadWorks;case 10:return i.Wind;case 11:return i.Flood;case 12:return i.Detour}},t.getIncidentTypeIconName=function(e){switch(e){case 0:default:return"unknown";case 1:return"accident";case 2:return"fog";case 3:return"danger";case 4:return"rain";case 5:return"ice";case 6:return"jam";case 7:return"lane-closed";case 8:return"road-closed";case 9:return"road-work";case 10:return"wind";case 11:return"flood";case 12:return"detour"}},t.getSeverityColorName=function(e){switch(e){case 0:default:return"grey";case 1:return"yellow";case 2:return"orange";case 3:return"red"}},t.getSeverityColorHexCode=function(e){switch(e){case 0:default:return"#B5B6B7";case 1:return"#F4C951";case 2:return"#F4873F";case 3:return"#F04F4E"}},t}(Ff),rV=(function(n){n.DELAY="delay",n.LENGTH="length",n.FROM="from",n.TO="to"}(VO=VO||{}),function(){function n(){}return n.build=function(t,e){void 0===e&&(e="en-US");var i,s,f,o=(((s=document.createElement("div")).classList.add("incident-popup-title"),s.classList.add("font-segoeui-b"),s.innerText=t.properties.incidentType,s.setAttribute("aria-label","Incident Type ".concat(t.properties.incidentType)),f=document.createElement("div")).classList.add("incident-popup-subtitle"),f.classList.add("font-segoeui-b"),f.setAttribute("aria-label","Incident Description ".concat(t.properties.description)),f.innerText=t.properties.description,document.createElement("div"));return((o.classList.add("incident-popup-header"),o.style.backgroundColor=t.properties.color,o.appendChild(s),o.appendChild(f),s=document.createElement("div")).classList.add("incident-popup-body"),t.properties.delay&&(f="".concat(Math.floor(t.properties.delay/60)," min"),f=this.createInfoSection(f,VO.DELAY),s.appendChild(f)),t.properties.length&&(f=new Intl.NumberFormat([e,"en-US"],{maximumFractionDigits:2}),i=void 0,i="en-US"===e?(e=by(t.properties.length,"meters","miles"),"".concat(f.format(e)," miles")):(e=by(t.properties.length,"meters","kilometers"),"".concat(f.format(e)," km")),f=this.createInfoSection(i,VO.LENGTH),s.appendChild(f)),t.properties.from&&(e=this.createInfoSection(t.properties.from,VO.FROM),s.appendChild(e)),t.properties.to&&(i=this.createInfoSection(t.properties.to,VO.TO),s.appendChild(i)),f=document.createElement("div")).classList.add("incident-popup-content"),f.appendChild(o),f.appendChild(s),new PC({content:f,position:t.geometry.coordinates})},n.createInfoSection=function(t,e){var i=document.createElement("div"),o=(i.classList.add("incident-popup-info"),document.createElement("div")),s=(o.classList.add("icon"),o.classList.add(e),document.createElement("span"));return s.classList.add("message"),s.classList.add("font-segoeui"),s.setAttribute("aria-label","Incident ".concat(e," ").concat(t)),s.innerText=t,i.appendChild(o),i.appendChild(s),i},n}()),NK=window&&window.__awaiter||function(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})},DK=window&&window.__generator||function(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s=f&&k[f=0]?0:s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},kK=function(){function n(i){var e=this;this.incidentLayerName="incidents",this.incidentSourceName="mapcontrol_traffic_incident",this.addToMap=function(){e.map.sources.getById(e.incidentSourceName)||e.map.sources.add(e.vectorTileSource),e.map.layers.getLayerById(e.incidentLayerName)||e.map.layers.add(e.incidentLayer,"labels"),e.clickPopup=new PC({position:[0,0],pixelOffset:[0,-18]}),e.map.addEventListener("mouseover",e.incidentLayerName,e.cursorToPointer),e.map.addEventListener("mouseleave",e.incidentLayerName,e.cursorToDefault),e.map.addEventListener("click",e.incidentLayerName,e.openIncidentPopup),e.map.events.addOnce("idle",e.setAccessiblePopups),e.map.events.add("moveend",e.setAccessiblePopups)},this.accessiblePopups=[],this.setAccessiblePopups=function(){return NK(e,void 0,void 0,function(){var o,s,f,v,I,D,k=this;return DK(this,function(X){switch(X.label){case 0:return this.accessiblePopups.forEach(function(fe){return fe.remove()}),this.accessiblePopups=[],o=this.map.layers.getRenderedShapes(this.map.getCamera().bounds,this.incidentLayer),[4,this.map._getLocalizedStrings()];case 1:return s=X.sent(),f=function(fe,Se){var lt=new Eg(new ad((lt=(Ve=fe[Se]).geometry.coordinates)[0],lt[1])),Ve=new nV(Ve.properties,lt,s),Je=rV.build(Ve,k.incidentLanguage);return(lt=Je.getPopupContainer()).addEventListener("focusin",function(mt){k.clickPopup.remove(),k.accessiblePopups.filter(function(_n){return _n!==Je}).forEach(function(_n){return _n.remove()}),0<=Se-1&&v(Je,f(fe,Se-1)),Se+1<fe.length&&D(f(fe,Se+1)),2<=Se&&Se==fe.length-1&&I(f(fe,0)),0==Se&&2<=fe.length&&D(f(fe,fe.length-1))}),Se==fe.length-1&&lt.addEventListener("focusout",function(mt){null===mt.relatedTarget&&Je.close()}),k.accessiblePopups.push(Je),Je},v=function(fe,Se){Se.open(k.map),Se.close(),Se=Se.getPopupContainer(),(fe=fe.getPopupContainer()).parentElement.insertBefore(Se,fe)},I=function(Se){Se.open(k.map),Se.close();var Ve=(Se=Se.getPopupContainer()).parentElement;Ve.insertBefore(Se,Ve.firstElementChild)},D=function(fe){fe.open(k.map),fe.close()},0<o.length&&D(f(o,0)),1<o.length&&D(f(o,o.length-1)),[2]}})})},this.removeFromMap=function(){var o;e.map.removeEventListener("mouseover",e.incidentLayerName,e.cursorToPointer),e.map.removeEventListener("mouseleave",e.incidentLayerName,e.cursorToDefault),e.map.removeEventListener("click",e.incidentLayerName,e.openIncidentPopup),e.map.events.remove("idle",e.setAccessiblePopups),e.map.events.remove("moveend",e.setAccessiblePopups),e.accessiblePopups.forEach(function(s){return s.remove()}),e.accessiblePopups=[],null!=(o=e.clickPopup)&&o.remove(),null!=e.map.layers.getLayerById(e.incidentLayerName)&&e.map.layers.remove(e.incidentLayerName),null!=e.map.sources.getById(e.incidentSourceName)&&e.map.sources.remove(e.incidentSourceName)},this.cursorToPointer=function(o){e.map.getCanvas().style.cursor="pointer"},this.cursorToDefault=function(o){e.map.getCanvas().style.cursor=""},this.openIncidentPopup=function(o){e.clickPopup.remove(),e.accessiblePopups.forEach(function(v){return v.close()});var s=o.position,f=o.features[0];e.map._getLocalizedStrings().then(function(v){var I=new Eg(new ad(s[0],s[1]));I=new nV(f.properties,I,v),e.clickPopup=rV.build(I,e.incidentLanguage),e.clickPopup.open(e.map),e.clickPopup.getPopupContainer().addEventListener("focusout",function(D){null===D.relatedTarget&&e.clickPopup.close()})})},this.map=i,this.vectorTileSource=new r4(this.incidentSourceName,{maxZoom:22,tiles:["https://".concat("{{azMapsDomain}}","/traffic/incident/tile/pbf?api-version=1.0&zoom={z}&x={x}&y={y}")]}),i=this.getIncidentIconImageExpression(),this.incidentLayer=new aI(this.incidentSourceName,this.incidentLayerName,{sourceLayer:"Traffic incident POI",iconOptions:{ignorePlacement:!0,allowOverlap:!0,image:i,size:.75}})}return n.prototype.getIncidentIconImageExpression=function(){return["concat",["let","magnitude",["get","magnitude"],["case",["==",["var","magnitude"],0],"grey",["==",["var","magnitude"],1],"yellow",["==",["var","magnitude"],2],"orange",["==",["var","magnitude"],3],"red",["==",["var","magnitude"],4],"grey","grey"]],"-",["let","category",["coalesce",["get","icon_category_12"],["get","icon_category_11"],["get","icon_category_10"],["get","icon_category_9"],["get","icon_category_8"],["get","icon_category_7"],["get","icon_category_6"],["get","icon_category_5"],["get","icon_category_4"],["get","icon_category_3"],["get","icon_category_2"],["get","icon_category_0"],["get","icon_category"],0],["case",["==",["var","category"],0],"unknown",["==",["var","category"],1],"accident",["==",["var","category"],2],"fog",["==",["var","category"],3],"danger",["==",["var","category"],4],"rain",["==",["var","category"],5],"ice",["==",["var","category"],6],"jam",["==",["var","category"],7],"lane-closed",["==",["var","category"],8],"road-closed",["==",["var","category"],9],"road-work",["==",["var","category"],10],"wind",["==",["var","category"],11],"flood",["==",["var","category"],12],"detour","unknown"]]]},n}(),LK=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),iV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.interactive=!0,e.scrollZoomInteraction=!0,e.boxZoomInteraction=!0,e.dragRotateInteraction=!0,e.dragPanInteraction=!0,e.keyboardInteraction=!0,e.dblClickZoomInteraction=!0,e.touchInteraction=!0,e.touchRotate=!0,e.wheelZoomRate=1/450,e}return LK(t,n),t}(_t),FK=function(){function n(t){var e=this;this._onKeyDown=function(i){27===i.keyCode&&e.map.getCanvas().focus()},this.map=t}return n.prototype.enable=function(){this.map.getMapContainer().addEventListener("keydown",this._onKeyDown)},n.prototype.disable=function(){this.map.getMapContainer().removeEventListener("keydown",this._onKeyDown)},n}(),HK=function(){function n(t){var e=this;this._onGestureStart=function(i){e.hasTouch||(i.preventDefault(),e.initZoom=e.map.getCamera().zoom)},this._onGestureChange=function(i){e.hasTouch||(i.preventDefault(),e.map.setCamera({zoom:e.initZoom+i.scale-1}))},this._onTouchStart=function(i){e.hasTouch=!0},this._onTouchEnd=function(i){0===i.touches.length&&(e.hasTouch=!1)},this.map=t}return n.prototype.enable=function(){this.map.getCanvasContainer().addEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().addEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().addEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().addEventListener("touchend",this._onTouchEnd)},n.prototype.disable=function(){this.map.getCanvasContainer().removeEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().removeEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().removeEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().removeEventListener("touchend",this._onTouchEnd)},n}(),UK=function(){function n(t,e){this.added=!1,this.map=t,this.focusShortcut=new FK(t),this.pinchZoom=new HK(t),this.options=(new iV).merge(e)}return n.prototype.addToMap=function(){this.added||(this.added=!0,this._setInteractions(this.options))},n.prototype.removeFromMap=function(){this.added&&(this.added=!1,this._setInteractions({interactive:!1}))},n.prototype.setOptions=function(t){this.options=(new iV).merge(this.options,t),this.added&&this._setInteractions(this.options)},n.prototype.getOptions=function(){return Object.assign({},this.options)},n.prototype._setInteractions=function(t){var e;t.interactive?(t.boxZoomInteraction?this.map._getMap().boxZoom.enable():this.map._getMap().boxZoom.disable(),t.dblClickZoomInteraction?this.map._getMap().doubleClickZoom.enable():this.map._getMap().doubleClickZoom.disable(),t.dragPanInteraction?this.map._getMap().dragPan.enable():this.map._getMap().dragPan.disable(),t.dragRotateInteraction?this.map._getMap().dragRotate.enable():this.map._getMap().dragRotate.disable(),t.keyboardInteraction?(this.map._getMap().keyboard.enable(),this.focusShortcut.enable()):(this.map._getMap().keyboard.disable(),this.focusShortcut.disable()),t.scrollZoomInteraction?(this.map._getMap().scrollZoom.enable(),this.map._getMap().scrollZoom.setWheelZoomRate(t.wheelZoomRate)):this.map._getMap().scrollZoom.disable(),e=this.map._getMap().touchZoomRotate,t.touchInteraction?(e.enable(),t.touchRotate?e.enableRotation():e.disableRotation()):e.disable(),this.pinchZoom.enable()):(this.map._getMap().boxZoom.disable(),this.map._getMap().doubleClickZoom.disable(),this.map._getMap().dragPan.disable(),this.map._getMap().dragRotate.disable(),this.map._getMap().keyboard.disable(),this.focusShortcut.disable(),this.map._getMap().scrollZoom.disable(),this.map._getMap().touchZoomRotate.disable(),this.pinchZoom.disable())},n}();function oV(n,t,e){var i={type:"Feature"};return 0!==(e=void 0===e?{}:e).id&&!e.id||(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.properties=t||{},i.geometry=n,i}function aV(n){return"Feature"===n.type?n.geometry:n}var sV={exports:{}},jK=(sV.exports=function(){function n(Ye,Be){if(!(Ye instanceof Be))throw new TypeError("Cannot call a class as a function")}function t(Ye,Be){for(var Pe=0;Pe<Be.length;Pe++){var $e=Be[Pe];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ye,$e.key,$e)}}function e(Ye,Be,Pe){return Be&&t(Ye.prototype,Be),Pe&&t(Ye,Pe),Ye}var i=function(){return function Ye(Be,Pe){this.next=null,this.key=Be,this.data=Pe,this.left=null,this.right=null}}();function o(Ye,Be){return Ye>Be?1:Ye<Be?-1:0}function s(Ye,Be,Pe){for(var $e=new i(null,null),gt=$e,kt=$e;;){var yn=Pe(Ye,Be.key);if(yn<0){if(null===Be.left)break;if(Pe(Ye,Be.left.key)<0&&(Be.left=(Fn=Be.left).right,Fn.right=Be,null===(Be=Fn).left))break;kt.left=Be,kt=Be,Be=Be.left}else{if(!(yn>0))break;if(null===Be.right)break;var Fn;if(Pe(Ye,Be.right.key)>0&&(Be.right=(Fn=Be.right).left,Fn.left=Be,null===(Be=Fn).right))break;gt.right=Be,gt=Be,Be=Be.right}}return gt.right=Be.left,kt.left=Be.right,Be.left=$e.right,Be.right=$e.left,Be}function f(Ye,Be,Pe,$e){var gt=new i(Ye,Be);if(null===Pe)return gt.left=gt.right=null,gt;var kt=$e(Ye,(Pe=s(Ye,Pe,$e)).key);return kt<0?(gt.left=Pe.left,gt.right=Pe,Pe.left=null):kt>=0&&(gt.right=Pe.right,gt.left=Pe,Pe.right=null),gt}function v(Ye,Be,Pe){var $e=null,gt=null;if(Be){var kt=Pe((Be=s(Ye,Be,Pe)).key,Ye);0===kt?($e=Be.left,gt=Be.right):kt<0?(gt=Be.right,Be.right=null,$e=Be):($e=Be.left,Be.left=null,gt=Be)}return{left:$e,right:gt}}function D(Ye,Be,Pe,$e,gt){if(Ye){$e(Be+(Pe?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+gt(Ye)+"\n");var kt=Be+(Pe?"    ":"\u2502   ");Ye.left&&D(Ye.left,kt,!1,$e,gt),Ye.right&&D(Ye.right,kt,!0,$e,gt)}}var k=function(){function Ye(Be){void 0===Be&&(Be=o),this._root=null,this._size=0,this._comparator=Be}return Ye.prototype.insert=function(Be,Pe){return this._size++,this._root=f(Be,Pe,this._root,this._comparator)},Ye.prototype.add=function(Be,Pe){var $e=new i(Be,Pe);null===this._root&&($e.left=$e.right=null,this._size++,this._root=$e);var gt=this._comparator,kt=s(Be,this._root,gt),yn=gt(Be,kt.key);return 0===yn?this._root=kt:(yn<0?($e.left=kt.left,$e.right=kt,kt.left=null):yn>0&&($e.right=kt.right,$e.left=kt,kt.right=null),this._size++,this._root=$e),this._root},Ye.prototype.remove=function(Be){this._root=this._remove(Be,this._root,this._comparator)},Ye.prototype._remove=function(Be,Pe,$e){var gt;return null===Pe?null:0===$e(Be,(Pe=s(Be,Pe,$e)).key)?(null===Pe.left?gt=Pe.right:(gt=s(Be,Pe.left,$e)).right=Pe.right,this._size--,gt):Pe},Ye.prototype.pop=function(){var Be=this._root;if(Be){for(;Be.left;)Be=Be.left;return this._root=s(Be.key,this._root,this._comparator),this._root=this._remove(Be.key,this._root,this._comparator),{key:Be.key,data:Be.data}}return null},Ye.prototype.findStatic=function(Be){for(var Pe=this._root,$e=this._comparator;Pe;){var gt=$e(Be,Pe.key);if(0===gt)return Pe;Pe=gt<0?Pe.left:Pe.right}return null},Ye.prototype.find=function(Be){return this._root&&(this._root=s(Be,this._root,this._comparator),0!==this._comparator(Be,this._root.key))?null:this._root},Ye.prototype.contains=function(Be){for(var Pe=this._root,$e=this._comparator;Pe;){var gt=$e(Be,Pe.key);if(0===gt)return!0;Pe=gt<0?Pe.left:Pe.right}return!1},Ye.prototype.forEach=function(Be,Pe){for(var $e=this._root,gt=[],kt=!1;!kt;)null!==$e?(gt.push($e),$e=$e.left):0!==gt.length?($e=gt.pop(),Be.call(Pe,$e),$e=$e.right):kt=!0;return this},Ye.prototype.range=function(Be,Pe,$e,gt){for(var kt=[],yn=this._comparator,Fn=this._root;0!==kt.length||Fn;)if(Fn)kt.push(Fn),Fn=Fn.left;else{if(yn((Fn=kt.pop()).key,Pe)>0)break;if(yn(Fn.key,Be)>=0&&$e.call(gt,Fn))return this;Fn=Fn.right}return this},Ye.prototype.keys=function(){var Be=[];return this.forEach(function(Pe){return Be.push(Pe.key)}),Be},Ye.prototype.values=function(){var Be=[];return this.forEach(function(Pe){return Be.push(Pe.data)}),Be},Ye.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Ye.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Ye.prototype.minNode=function(Be){if(void 0===Be&&(Be=this._root),Be)for(;Be.left;)Be=Be.left;return Be},Ye.prototype.maxNode=function(Be){if(void 0===Be&&(Be=this._root),Be)for(;Be.right;)Be=Be.right;return Be},Ye.prototype.at=function(Be){for(var Pe=this._root,$e=!1,gt=0,kt=[];!$e;)if(Pe)kt.push(Pe),Pe=Pe.left;else if(kt.length>0){if(Pe=kt.pop(),gt===Be)return Pe;gt++,Pe=Pe.right}else $e=!0;return null},Ye.prototype.next=function(Be){var Pe=this._root,$e=null;if(Be.right){for($e=Be.right;$e.left;)$e=$e.left;return $e}for(var gt=this._comparator;Pe;){var kt=gt(Be.key,Pe.key);if(0===kt)break;kt<0?($e=Pe,Pe=Pe.left):Pe=Pe.right}return $e},Ye.prototype.prev=function(Be){var Pe=this._root,$e=null;if(null!==Be.left){for($e=Be.left;$e.right;)$e=$e.right;return $e}for(var gt=this._comparator;Pe;){var kt=gt(Be.key,Pe.key);if(0===kt)break;kt<0?Pe=Pe.left:($e=Pe,Pe=Pe.right)}return $e},Ye.prototype.clear=function(){return this._root=null,this._size=0,this},Ye.prototype.toList=function(){return function Se(Ye){for(var Be=Ye,Pe=[],$e=!1,gt=new i(null,null),kt=gt;!$e;)Be?(Pe.push(Be),Be=Be.left):Pe.length>0?Be=(Be=kt=kt.next=Pe.pop()).right:$e=!0;return kt.next=null,gt.next}(this._root)},Ye.prototype.load=function(Be,Pe,$e){void 0===Pe&&(Pe=[]),void 0===$e&&($e=!1);var gt=Be.length,kt=this._comparator;if($e&&lt(Be,Pe,0,gt-1,kt),null===this._root)this._root=X(Be,Pe,0,gt),this._size=gt;else{var yn=function Je(Ye,Be,Pe){for(var $e=new i(null,null),gt=$e,kt=Ye,yn=Be;null!==kt&&null!==yn;)Pe(kt.key,yn.key)<0?(gt.next=kt,kt=kt.next):(gt.next=yn,yn=yn.next),gt=gt.next;return null!==kt?gt.next=kt:null!==yn&&(gt.next=yn),$e.next}(this.toList(),function fe(Ye,Be){for(var Pe=new i(null,null),$e=Pe,gt=0;gt<Ye.length;gt++)$e=$e.next=new i(Ye[gt],Be[gt]);return $e.next=null,Pe.next}(Be,Pe),kt);this._root=Ve({head:yn},0,gt=this._size+gt)}return this},Ye.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(Ye.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Ye.prototype.toString=function(Be){void 0===Be&&(Be=function(gt){return String(gt.key)});var Pe=[];return D(this._root,"",!0,function($e){return Pe.push($e)},Be),Pe.join("")},Ye.prototype.update=function(Be,Pe,$e){var gt=this._comparator,kt=v(Be,this._root,gt),yn=kt.left,Fn=kt.right;gt(Be,Pe)<0?Fn=f(Pe,$e,Fn,gt):yn=f(Pe,$e,yn,gt),this._root=function I(Ye,Be,Pe){return null===Be?Ye:(null===Ye||((Be=s(Ye.key,Be,Pe)).left=Ye),Be)}(yn,Fn,gt)},Ye.prototype.split=function(Be){return v(Be,this._root,this._comparator)},Ye}();function X(Ye,Be,Pe,$e){var gt=$e-Pe;if(gt>0){var kt=Pe+Math.floor(gt/2),St=new i(Ye[kt],Be[kt]);return St.left=X(Ye,Be,Pe,kt),St.right=X(Ye,Be,kt+1,$e),St}return null}function Ve(Ye,Be,Pe){var $e=Pe-Be;if($e>0){var gt=Be+Math.floor($e/2),kt=Ve(Ye,Be,gt),yn=Ye.head;return yn.left=kt,Ye.head=Ye.head.next,yn.right=Ve(Ye,gt+1,Pe),yn}return null}function lt(Ye,Be,Pe,$e,gt){if(!(Pe>=$e)){for(var kt=Ye[Pe+$e>>1],yn=Pe-1,Fn=$e+1;;){do{yn++}while(gt(Ye[yn],kt)<0);do{Fn--}while(gt(Ye[Fn],kt)>0);if(yn>=Fn)break;var St=Ye[yn];Ye[yn]=Ye[Fn],Ye[Fn]=St,St=Be[yn],Be[yn]=Be[Fn],Be[Fn]=St}lt(Ye,Be,Pe,Fn,gt),lt(Ye,Be,Fn+1,$e,gt)}}var mt=function(Be,Pe){return Be.ll.x<=Pe.x&&Pe.x<=Be.ur.x&&Be.ll.y<=Pe.y&&Pe.y<=Be.ur.y},_n=function(Be,Pe){return Pe.ur.x<Be.ll.x||Be.ur.x<Pe.ll.x||Pe.ur.y<Be.ll.y||Be.ur.y<Pe.ll.y?null:{ll:{x:Be.ll.x<Pe.ll.x?Pe.ll.x:Be.ll.x,y:Be.ll.y<Pe.ll.y?Pe.ll.y:Be.ll.y},ur:{x:Be.ur.x<Pe.ur.x?Be.ur.x:Pe.ur.x,y:Be.ur.y<Pe.ur.y?Be.ur.y:Pe.ur.y}}},Yn=Number.EPSILON;void 0===Yn&&(Yn=Math.pow(2,-52));var sr=Yn*Yn,ri=function(Be,Pe){if(-Yn<Be&&Be<Yn&&-Yn<Pe&&Pe<Yn)return 0;var $e=Be-Pe;return $e*$e<sr*Be*Pe?0:Be<Pe?-1:1},tn=function(){function Ye(){n(this,Ye),this.reset()}return e(Ye,[{key:"reset",value:function(){this.xRounder=new zn,this.yRounder=new zn}},{key:"round",value:function(Pe,$e){return{x:this.xRounder.round(Pe),y:this.yRounder.round($e)}}}]),Ye}(),zn=function(){function Ye(){n(this,Ye),this.tree=new k,this.round(0)}return e(Ye,[{key:"round",value:function(Pe){var $e=this.tree.add(Pe),gt=this.tree.prev($e);if(null!==gt&&0===ri($e.key,gt.key))return this.tree.remove(Pe),gt.key;var kt=this.tree.next($e);return null!==kt&&0===ri($e.key,kt.key)?(this.tree.remove(Pe),kt.key):Pe}}]),Ye}(),Zn=new tn,Er=function(Be,Pe){return Be.x*Pe.y-Be.y*Pe.x},yi=function(Be,Pe){return Be.x*Pe.x+Be.y*Pe.y},Lt=function(Be,Pe,$e){var yn=Er({x:Pe.x-Be.x,y:Pe.y-Be.y},{x:$e.x-Be.x,y:$e.y-Be.y});return ri(yn,0)},Hn=function(Be){return Math.sqrt(yi(Be,Be))},hn=function(Be,Pe,$e){var gt={x:Pe.x-Be.x,y:Pe.y-Be.y},kt={x:$e.x-Be.x,y:$e.y-Be.y};return Er(kt,gt)/Hn(kt)/Hn(gt)},vr=function(Be,Pe,$e){var gt={x:Pe.x-Be.x,y:Pe.y-Be.y},kt={x:$e.x-Be.x,y:$e.y-Be.y};return yi(kt,gt)/Hn(kt)/Hn(gt)},si=function(Be,Pe,$e){return 0===Pe.y?null:{x:Be.x+Pe.x/Pe.y*($e-Be.y),y:$e}},Bi=function(Be,Pe,$e){return 0===Pe.x?null:{x:$e,y:Be.y+Pe.y/Pe.x*($e-Be.x)}},pi=function(){function Ye(Be,Pe){n(this,Ye),void 0===Be.events?Be.events=[this]:Be.events.push(this),this.point=Be,this.isLeft=Pe}return e(Ye,null,[{key:"compare",value:function(Pe,$e){var gt=Ye.comparePoints(Pe.point,$e.point);return 0!==gt?gt:(Pe.point!==$e.point&&Pe.link($e),Pe.isLeft!==$e.isLeft?Pe.isLeft?1:-1:Li.compare(Pe.segment,$e.segment))}},{key:"comparePoints",value:function(Pe,$e){return Pe.x<$e.x?-1:Pe.x>$e.x?1:Pe.y<$e.y?-1:Pe.y>$e.y?1:0}}]),e(Ye,[{key:"link",value:function(Pe){if(Pe.point===this.point)throw new Error("Tried to link already linked events");for(var $e=Pe.point.events,gt=0,kt=$e.length;gt<kt;gt++){var yn=$e[gt];this.point.events.push(yn),yn.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Pe=this.point.events.length,$e=0;$e<Pe;$e++){var gt=this.point.events[$e];if(void 0===gt.segment.consumedBy)for(var kt=$e+1;kt<Pe;kt++){var yn=this.point.events[kt];void 0===yn.consumedBy&&gt.otherSE.point.events===yn.otherSE.point.events&&gt.segment.consume(yn.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Pe=[],$e=0,gt=this.point.events.length;$e<gt;$e++){var kt=this.point.events[$e];kt!==this&&!kt.segment.ringOut&&kt.segment.isInResult()&&Pe.push(kt)}return Pe}},{key:"getLeftmostComparator",value:function(Pe){var $e=this,gt=new Map,kt=function(Fn){var St=Fn.otherSE;gt.set(Fn,{sine:hn($e.point,Pe.point,St.point),cosine:vr($e.point,Pe.point,St.point)})};return function(yn,Fn){gt.has(yn)||kt(yn),gt.has(Fn)||kt(Fn);var St=gt.get(yn),pn=St.sine,Wt=St.cosine,Yr=gt.get(Fn),Br=Yr.sine,vi=Yr.cosine;return pn>=0&&Br>=0?Wt<vi?1:Wt>vi?-1:0:pn<0&&Br<0?Wt<vi?-1:Wt>vi?1:0:Br<pn?-1:Br>pn?1:0}}}]),Ye}(),Bo=0,Li=function(){function Ye(Be,Pe,$e,gt){n(this,Ye),this.id=++Bo,this.leftSE=Be,Be.segment=this,Be.otherSE=Pe,this.rightSE=Pe,Pe.segment=this,Pe.otherSE=Be,this.rings=$e,this.windings=gt}return e(Ye,null,[{key:"compare",value:function(Pe,$e){var gt=Pe.leftSE.point.x,kt=$e.leftSE.point.x,yn=Pe.rightSE.point.x,Fn=$e.rightSE.point.x;if(Fn<gt)return 1;if(yn<kt)return-1;var St=Pe.leftSE.point.y,pn=$e.leftSE.point.y,Wt=Pe.rightSE.point.y,Yr=$e.rightSE.point.y;if(gt<kt){if(pn<St&&pn<Wt)return 1;if(pn>St&&pn>Wt)return-1;var Br=Pe.comparePoint($e.leftSE.point);if(Br<0)return 1;if(Br>0)return-1;var vi=$e.comparePoint(Pe.rightSE.point);return 0!==vi?vi:-1}if(gt>kt){if(St<pn&&St<Yr)return-1;if(St>pn&&St>Yr)return 1;var eo=$e.comparePoint(Pe.leftSE.point);if(0!==eo)return eo;var Mn=Pe.comparePoint($e.rightSE.point);return Mn<0?1:Mn>0?-1:1}if(St<pn)return-1;if(St>pn)return 1;if(yn<Fn){var fi=$e.comparePoint(Pe.rightSE.point);if(0!==fi)return fi}if(yn>Fn){var Hr=Pe.comparePoint($e.rightSE.point);if(Hr<0)return 1;if(Hr>0)return-1}if(yn!==Fn){var fa=Wt-St,Xs=yn-gt,Ki=Yr-pn,bl=Fn-kt;if(fa>Xs&&Ki<bl)return 1;if(fa<Xs&&Ki>bl)return-1}return yn>Fn?1:yn<Fn||Wt<Yr?-1:Wt>Yr?1:Pe.id<$e.id?-1:Pe.id>$e.id?1:0}}]),e(Ye,[{key:"replaceRightSE",value:function(Pe){this.rightSE=Pe,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Pe=this.leftSE.point.y,$e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Pe<$e?Pe:$e},ur:{x:this.rightSE.point.x,y:Pe>$e?Pe:$e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Pe){return Pe.x===this.leftSE.point.x&&Pe.y===this.leftSE.point.y||Pe.x===this.rightSE.point.x&&Pe.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Pe){if(this.isAnEndpoint(Pe))return 0;var $e=this.leftSE.point,gt=this.rightSE.point,kt=this.vector();if($e.x===gt.x)return Pe.x===$e.x?0:Pe.x<$e.x?1:-1;if(Pe.x===$e.x+(Pe.y-$e.y)/kt.y*kt.x)return 0;var pn=$e.y+(Pe.x-$e.x)/kt.x*kt.y;return Pe.y===pn?0:Pe.y<pn?-1:1}},{key:"getIntersection",value:function(Pe){var $e=this.bbox(),gt=Pe.bbox(),kt=_n($e,gt);if(null===kt)return null;var yn=this.leftSE.point,Fn=this.rightSE.point,St=Pe.leftSE.point,pn=Pe.rightSE.point,Wt=mt($e,St)&&0===this.comparePoint(St),Yr=mt(gt,yn)&&0===Pe.comparePoint(yn),Br=mt($e,pn)&&0===this.comparePoint(pn),vi=mt(gt,Fn)&&0===Pe.comparePoint(Fn);if(Yr&&Wt)return vi&&!Br?Fn:!vi&&Br?pn:null;if(Yr)return Br&&yn.x===pn.x&&yn.y===pn.y?null:yn;if(Wt)return vi&&Fn.x===St.x&&Fn.y===St.y?null:St;if(vi&&Br)return null;if(vi)return Fn;if(Br)return pn;var eo=function(Be,Pe,$e,gt){if(0===Pe.x)return Bi($e,gt,Be.x);if(0===gt.x)return Bi(Be,Pe,$e.x);if(0===Pe.y)return si($e,gt,Be.y);if(0===gt.y)return si(Be,Pe,$e.y);var kt=Er(Pe,gt);if(0==kt)return null;var yn={x:$e.x-Be.x,y:$e.y-Be.y},Fn=Er(yn,Pe)/kt,St=Er(yn,gt)/kt;return{x:(Be.x+St*Pe.x+($e.x+Fn*gt.x))/2,y:(Be.y+St*Pe.y+($e.y+Fn*gt.y))/2}}(yn,this.vector(),St,Pe.vector());return null!==eo&&mt(kt,eo)?Zn.round(eo.x,eo.y):null}},{key:"split",value:function(Pe){var $e=[],gt=void 0!==Pe.events,kt=new pi(Pe,!0),yn=new pi(Pe,!1),Fn=this.rightSE;this.replaceRightSE(yn),$e.push(yn),$e.push(kt);var St=new Ye(kt,Fn,this.rings.slice(),this.windings.slice());return pi.comparePoints(St.leftSE.point,St.rightSE.point)>0&&St.swapEvents(),pi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),gt&&(kt.checkForConsuming(),yn.checkForConsuming()),$e}},{key:"swapEvents",value:function(){var Pe=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Pe,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var $e=0,gt=this.windings.length;$e<gt;$e++)this.windings[$e]*=-1}},{key:"consume",value:function(Pe){for(var $e=this,gt=Pe;$e.consumedBy;)$e=$e.consumedBy;for(;gt.consumedBy;)gt=gt.consumedBy;var kt=Ye.compare($e,gt);if(0!==kt){if(kt>0){var yn=$e;$e=gt,gt=yn}if($e.prev===gt){var Fn=$e;$e=gt,gt=Fn}for(var St=0,pn=gt.rings.length;St<pn;St++){var Wt=gt.rings[St],Yr=gt.windings[St],Br=$e.rings.indexOf(Wt);-1===Br?($e.rings.push(Wt),$e.windings.push(Yr)):$e.windings[Br]+=Yr}gt.rings=null,gt.windings=null,gt.consumedBy=$e,gt.leftSE.consumedBy=$e.leftSE,gt.rightSE.consumedBy=$e.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var Pe=this.beforeState();this._afterState={rings:Pe.rings.slice(0),windings:Pe.windings.slice(0),multiPolys:[]};for(var $e=this._afterState.rings,gt=this._afterState.windings,kt=this._afterState.multiPolys,yn=0,Fn=this.rings.length;yn<Fn;yn++){var St=this.rings[yn],pn=this.windings[yn],Wt=$e.indexOf(St);-1===Wt?($e.push(St),gt.push(pn)):gt[Wt]+=pn}for(var Yr=[],Br=[],vi=0,eo=$e.length;vi<eo;vi++)if(0!==gt[vi]){var Mn=$e[vi],fi=Mn.poly;if(-1===Br.indexOf(fi))if(Mn.isExterior)Yr.push(fi);else{-1===Br.indexOf(fi)&&Br.push(fi);var Hr=Yr.indexOf(Mn.poly);-1!==Hr&&Yr.splice(Hr,1)}}for(var fa=0,Xs=Yr.length;fa<Xs;fa++){var Ki=Yr[fa].multiPoly;-1===kt.indexOf(Ki)&&kt.push(Ki)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var Pe=this.beforeState().multiPolys,$e=this.afterState().multiPolys;switch(Dn.type){case"union":this._isInResult=0===Pe.length!=(0===$e.length);break;case"intersection":var yn,Fn;Pe.length<$e.length?(yn=Pe.length,Fn=$e.length):(yn=$e.length,Fn=Pe.length),this._isInResult=Fn===Dn.numMultiPolys&&yn<Fn;break;case"xor":var St=Math.abs(Pe.length-$e.length);this._isInResult=St%2==1;break;case"difference":var pn=function(Yr){return 1===Yr.length&&Yr[0].isSubject};this._isInResult=pn(Pe)!==pn($e);break;default:throw new Error("Unrecognized operation type found ".concat(Dn.type))}return this._isInResult}}],[{key:"fromRing",value:function(Pe,$e,gt){var kt,yn,Fn,St=pi.comparePoints(Pe,$e);if(St<0)kt=Pe,yn=$e,Fn=1;else{if(!(St>0))throw new Error("Tried to create degenerate segment at [".concat(Pe.x,", ").concat(Pe.y,"]"));kt=$e,yn=Pe,Fn=-1}return new Ye(new pi(kt,!0),new pi(yn,!1),[gt],[Fn])}}]),Ye}(),Qi=function(){function Ye(Be,Pe,$e){if(n(this,Ye),!Array.isArray(Be)||0===Be.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Pe,this.isExterior=$e,this.segments=[],"number"!=typeof Be[0][0]||"number"!=typeof Be[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var gt=Zn.round(Be[0][0],Be[0][1]);this.bbox={ll:{x:gt.x,y:gt.y},ur:{x:gt.x,y:gt.y}};for(var kt=gt,yn=1,Fn=Be.length;yn<Fn;yn++){if("number"!=typeof Be[yn][0]||"number"!=typeof Be[yn][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var St=Zn.round(Be[yn][0],Be[yn][1]);St.x===kt.x&&St.y===kt.y||(this.segments.push(Li.fromRing(kt,St,this)),St.x<this.bbox.ll.x&&(this.bbox.ll.x=St.x),St.y<this.bbox.ll.y&&(this.bbox.ll.y=St.y),St.x>this.bbox.ur.x&&(this.bbox.ur.x=St.x),St.y>this.bbox.ur.y&&(this.bbox.ur.y=St.y),kt=St)}(gt.x!==kt.x||gt.y!==kt.y)&&this.segments.push(Li.fromRing(kt,gt,this))}return e(Ye,[{key:"getSweepEvents",value:function(){for(var Pe=[],$e=0,gt=this.segments.length;$e<gt;$e++){var kt=this.segments[$e];Pe.push(kt.leftSE),Pe.push(kt.rightSE)}return Pe}}]),Ye}(),Bn=function(){function Ye(Be,Pe){if(n(this,Ye),!Array.isArray(Be))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Qi(Be[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var $e=1,gt=Be.length;$e<gt;$e++){var kt=new Qi(Be[$e],this,!1);kt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=kt.bbox.ll.x),kt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=kt.bbox.ll.y),kt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=kt.bbox.ur.x),kt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=kt.bbox.ur.y),this.interiorRings.push(kt)}this.multiPoly=Pe}return e(Ye,[{key:"getSweepEvents",value:function(){for(var Pe=this.exteriorRing.getSweepEvents(),$e=0,gt=this.interiorRings.length;$e<gt;$e++)for(var kt=this.interiorRings[$e].getSweepEvents(),yn=0,Fn=kt.length;yn<Fn;yn++)Pe.push(kt[yn]);return Pe}}]),Ye}(),Qs=function(){function Ye(Be,Pe){if(n(this,Ye),!Array.isArray(Be))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof Be[0][0][0]&&(Be=[Be])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var $e=0,gt=Be.length;$e<gt;$e++){var kt=new Bn(Be[$e],this);kt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=kt.bbox.ll.x),kt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=kt.bbox.ll.y),kt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=kt.bbox.ur.x),kt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=kt.bbox.ur.y),this.polys.push(kt)}this.isSubject=Pe}return e(Ye,[{key:"getSweepEvents",value:function(){for(var Pe=[],$e=0,gt=this.polys.length;$e<gt;$e++)for(var kt=this.polys[$e].getSweepEvents(),yn=0,Fn=kt.length;yn<Fn;yn++)Pe.push(kt[yn]);return Pe}}]),Ye}(),Zi=function(){function Ye(Be){n(this,Ye),this.events=Be;for(var Pe=0,$e=Be.length;Pe<$e;Pe++)Be[Pe].segment.ringOut=this;this.poly=null}return e(Ye,null,[{key:"factory",value:function(Pe){for(var $e=[],gt=0,kt=Pe.length;gt<kt;gt++){var yn=Pe[gt];if(yn.isInResult()&&!yn.ringOut){for(var Fn=null,St=yn.leftSE,pn=yn.rightSE,Wt=[St],Yr=St.point,Br=[];Fn=St,Wt.push(St=pn),St.point!==Yr;)for(;;){var vi=St.getAvailableLinkedEvents();if(0===vi.length){var eo=Wt[0].point,Mn=Wt[Wt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(eo.x,",")+" ".concat(eo.y,"]. Last matching segment found ends at")+" [".concat(Mn.x,", ").concat(Mn.y,"]."))}if(1===vi.length){pn=vi[0].otherSE;break}for(var fi=null,Hr=0,fa=Br.length;Hr<fa;Hr++)if(Br[Hr].point===St.point){fi=Hr;break}if(null===fi){Br.push({index:Wt.length,point:St.point});var bl=St.getLeftmostComparator(Fn);pn=vi.sort(bl)[0].otherSE;break}var Xs=Br.splice(fi)[0],Ki=Wt.splice(Xs.index);Ki.unshift(Ki[0].otherSE),$e.push(new Ye(Ki.reverse()))}$e.push(new Ye(Wt))}}return $e}}]),e(Ye,[{key:"getGeom",value:function(){for(var Pe=this.events[0].point,$e=[Pe],gt=1,kt=this.events.length-1;gt<kt;gt++){var yn=this.events[gt].point;0!==Lt(yn,Pe,this.events[gt+1].point)&&($e.push(yn),Pe=yn)}if(1===$e.length)return null;0===Lt($e[0],Pe,$e[1])&&$e.shift(),$e.push($e[0]);for(var Wt=this.isExteriorRing()?1:-1,Yr=this.isExteriorRing()?0:$e.length-1,Br=this.isExteriorRing()?$e.length:-1,vi=[],eo=Yr;eo!=Br;eo+=Wt)vi.push([$e[eo].x,$e[eo].y]);return vi}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var Pe=this.enclosingRing();this._isExteriorRing=!Pe||!Pe.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Pe=this.events[0],$e=1,gt=this.events.length;$e<gt;$e++){var kt=this.events[$e];pi.compare(Pe,kt)>0&&(Pe=kt)}for(var yn=Pe.segment.prevInResult(),Fn=yn?yn.prevInResult():null;;){if(!yn)return null;if(!Fn)return yn.ringOut;if(Fn.ringOut!==yn.ringOut)return Fn.ringOut.enclosingRing()!==yn.ringOut?yn.ringOut:yn.ringOut.enclosingRing();yn=Fn.prevInResult(),Fn=yn?yn.prevInResult():null}}}]),Ye}(),Na=function(){function Ye(Be){n(this,Ye),this.exteriorRing=Be,Be.poly=this,this.interiorRings=[]}return e(Ye,[{key:"addInterior",value:function(Pe){this.interiorRings.push(Pe),Pe.poly=this}},{key:"getGeom",value:function(){var Pe=[this.exteriorRing.getGeom()];if(null===Pe[0])return null;for(var $e=0,gt=this.interiorRings.length;$e<gt;$e++){var kt=this.interiorRings[$e].getGeom();null!==kt&&Pe.push(kt)}return Pe}}]),Ye}(),za=function(){function Ye(Be){n(this,Ye),this.rings=Be,this.polys=this._composePolys(Be)}return e(Ye,[{key:"getGeom",value:function(){for(var Pe=[],$e=0,gt=this.polys.length;$e<gt;$e++){var kt=this.polys[$e].getGeom();null!==kt&&Pe.push(kt)}return Pe}},{key:"_composePolys",value:function(Pe){for(var $e=[],gt=0,kt=Pe.length;gt<kt;gt++){var yn=Pe[gt];if(!yn.poly)if(yn.isExteriorRing())$e.push(new Na(yn));else{var Fn=yn.enclosingRing();Fn.poly||$e.push(new Na(Fn)),Fn.poly.addInterior(yn)}}return $e}}]),Ye}(),Vi=function(){function Ye(Be){var Pe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Li.compare;n(this,Ye),this.queue=Be,this.tree=new k(Pe),this.segments=[]}return e(Ye,[{key:"process",value:function(Pe){var $e=Pe.segment,gt=[];if(Pe.consumedBy)return Pe.isLeft?this.queue.remove(Pe.otherSE):this.tree.remove($e),gt;var kt=Pe.isLeft?this.tree.insert($e):this.tree.find($e);if(!kt)throw new Error("Unable to find segment #".concat($e.id," ")+"[".concat($e.leftSE.point.x,", ").concat($e.leftSE.point.y,"] -> ")+"[".concat($e.rightSE.point.x,", ").concat($e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var yn=kt,Fn=kt,St=void 0,pn=void 0;void 0===St;)null===(yn=this.tree.prev(yn))?St=null:void 0===yn.key.consumedBy&&(St=yn.key);for(;void 0===pn;)null===(Fn=this.tree.next(Fn))?pn=null:void 0===Fn.key.consumedBy&&(pn=Fn.key);if(Pe.isLeft){var Wt=null;if(St){var Yr=St.getIntersection($e);if(null!==Yr&&($e.isAnEndpoint(Yr)||(Wt=Yr),!St.isAnEndpoint(Yr)))for(var Br=this._splitSafely(St,Yr),vi=0,eo=Br.length;vi<eo;vi++)gt.push(Br[vi])}var Mn=null;if(pn){var fi=pn.getIntersection($e);if(null!==fi&&($e.isAnEndpoint(fi)||(Mn=fi),!pn.isAnEndpoint(fi)))for(var Hr=this._splitSafely(pn,fi),fa=0,Xs=Hr.length;fa<Xs;fa++)gt.push(Hr[fa])}if(null!==Wt||null!==Mn){var Ki=null;Ki=null===Wt?Mn:null===Mn||pi.comparePoints(Wt,Mn)<=0?Wt:Mn,this.queue.remove($e.rightSE),gt.push($e.rightSE);for(var Yc=$e.split(Ki),Yo=0,rt=Yc.length;Yo<rt;Yo++)gt.push(Yc[Yo])}gt.length>0?(this.tree.remove($e),gt.push(Pe)):(this.segments.push($e),$e.prev=St)}else{if(St&&pn){var xe=St.getIntersection(pn);if(null!==xe){if(!St.isAnEndpoint(xe))for(var je=this._splitSafely(St,xe),Ue=0,Tt=je.length;Ue<Tt;Ue++)gt.push(je[Ue]);if(!pn.isAnEndpoint(xe))for(var Jt=this._splitSafely(pn,xe),mn=0,Qt=Jt.length;mn<Qt;mn++)gt.push(Jt[mn])}}this.tree.remove($e)}return gt}},{key:"_splitSafely",value:function(Pe,$e){this.tree.remove(Pe);var gt=Pe.rightSE;this.queue.remove(gt);var kt=Pe.split($e);return kt.push(gt),void 0===Pe.consumedBy&&this.tree.insert(Pe),kt}}]),Ye}(),Sn=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,bi=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Dn=new(function(){function Ye(){n(this,Ye)}return e(Ye,[{key:"run",value:function(Pe,$e,gt){Dn.type=Pe,Zn.reset();for(var kt=[new Qs($e,!0)],yn=0,Fn=gt.length;yn<Fn;yn++)kt.push(new Qs(gt[yn],!1));if(Dn.numMultiPolys=kt.length,"difference"===Dn.type)for(var St=kt[0],pn=1;pn<kt.length;)null!==_n(kt[pn].bbox,St.bbox)?pn++:kt.splice(pn,1);if("intersection"===Dn.type)for(var Wt=0,Yr=kt.length;Wt<Yr;Wt++)for(var Br=kt[Wt],vi=Wt+1,eo=kt.length;vi<eo;vi++)if(null===_n(Br.bbox,kt[vi].bbox))return[];for(var Mn=new k(pi.compare),fi=0,Hr=kt.length;fi<Hr;fi++)for(var fa=kt[fi].getSweepEvents(),Xs=0,Ki=fa.length;Xs<Ki;Xs++)if(Mn.insert(fa[Xs]),Mn.size>Sn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var bl=new Vi(Mn),Yc=Mn.size,Yo=Mn.pop();Yo;){var rt=Yo.key;if(Mn.size===Yc){var xe=rt.segment;throw new Error("Unable to pop() ".concat(rt.isLeft?"left":"right"," SweepEvent ")+"[".concat(rt.point.x,", ").concat(rt.point.y,"] from segment #").concat(xe.id," ")+"[".concat(xe.leftSE.point.x,", ").concat(xe.leftSE.point.y,"] -> ")+"[".concat(xe.rightSE.point.x,", ").concat(xe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Mn.size>Sn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(bl.segments.length>bi)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var je=bl.process(rt),Ue=0,Tt=je.length;Ue<Tt;Ue++){var Jt=je[Ue];void 0===Jt.consumedBy&&Mn.insert(Jt)}Yc=Mn.size,Yo=Mn.pop()}Zn.reset();var mn=Zi.factory(bl.segments);return new za(mn).getGeom()}}]),Ye}());return{union:function(Be){for(var Pe=arguments.length,$e=new Array(Pe>1?Pe-1:0),gt=1;gt<Pe;gt++)$e[gt-1]=arguments[gt];return Dn.run("union",Be,$e)},intersection:function(Be){for(var Pe=arguments.length,$e=new Array(Pe>1?Pe-1:0),gt=1;gt<Pe;gt++)$e[gt-1]=arguments[gt];return Dn.run("intersection",Be,$e)},xor:function(Be){for(var Pe=arguments.length,$e=new Array(Pe>1?Pe-1:0),gt=1;gt<Pe;gt++)$e[gt-1]=arguments[gt];return Dn.run("xor",Be,$e)},difference:function(Be){for(var Pe=arguments.length,$e=new Array(Pe>1?Pe-1:0),gt=1;gt<Pe;gt++)$e[gt-1]=arguments[gt];return Dn.run("difference",Be,$e)}}}(),sV.exports),$K=T(jK);var GK=function(n){return function(t,e,i){var o=i.value,s=new Map;return i.value=function(){var f=this,v=arguments;!s.get(f)&&(o.apply(f,v),s.set(f,!0),setTimeout(function(){return s.delete(f)},n))},i}},qK=window&&window.__decorate||function(n,t,e,i){var o,s=arguments.length,f=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;0<=v;v--)(o=n[v])&&(f=(s<3?o(f):3<s?o(t,e,f):o(t,e))||f);return 3<s&&f&&Object.defineProperty(t,e,f),f},QB=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},XB=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},KK=["DIV","SPAN","A"],ZB=["data-azure-maps-attribution-minzoom","data-azure-maps-attribution-maxzoom","data-azure-maps-attribution-geometry","data-azure-maps-attribution-tileset","data-azure-maps-attribution-order","data-azure-maps-attribution-dynamic"],YK=XB(["href"],QB(ZB),!1),cV=function(){function n(t,e){var i=this;this.lastFetchState={bounds:null,zoom:null},this.getElement=function(){return i.element},this.element=t,this.attributionChangeCallback=e}return n.prototype.equals=function(t){return this.stringRepresentation===t.stringRepresentation},Object.defineProperty(n.prototype,"stringRepresentation",{get:function(){return[void 0!==this.minZoom?"minzoom=".concat(this.minZoom):"",void 0!==this.maxZoom?"maxzoom=".concat(this.maxZoom):"",void 0!==this.geometry?this.element.attributes.getNamedItem("data-azure-maps-attribution-geometry").value:"",void 0!==this.tilesetId?"tilesetId=".concat(this.tilesetId):"",this.dynamic?"dynamic":""].filter(function(t){return 0<t.length}).join(";")},enumerable:!1,configurable:!0}),n.applicable=function(t){return Array.from(t.attributes).map(function(e){return ZB.includes(e.name)}).reduce(function(e,i){return e||i},!1)},Object.defineProperty(n.prototype,"minZoom",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-minzoom");return t&&!isNaN(t.value)?parseInt(t.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxZoom",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-maxzoom");return t&&!isNaN(t.value)?parseInt(t.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"geometry",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-geometry");if(t&&t.value)try{return JSON.parse(t.value)}catch{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tilesetId",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-tileset");return t&&t.value?t.value:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"order",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-order");return t&&!isNaN(t.value)?parseInt(t.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dynamic",{get:function(){return null!==this.element.attributes.getNamedItem("data-azure-maps-attribution-dynamic")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hidesElement",{get:function(){return"none"==this.element.style.display},enumerable:!1,configurable:!0}),n.prototype.forceHide=function(){this.element.style.display="none"},n.prototype.satisfied=function(t){var e=!this.minZoom||!t.zoom||t.zoom>=this.minZoom,i=!this.maxZoom||!t.zoom||t.zoom<=this.maxZoom,o=!0;return this.geometry&&t.bounds&&(o=null!==function VK(n,t,e){return void 0===e&&(e={}),n=aV(n),t=aV(t),0===(n=$K.intersection(n.coordinates,t.coordinates)).length?null:1===n.length?function BK(n,t,e){void 0===e&&(e={});for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<s[s.length-1].length;f++)if(s[s.length-1][f]!==s[0][f])throw new Error("First and last Position are not equivalent.")}return oV({type:"Polygon",coordinates:n},t,e)}(n[0],e.properties):function zK(n,t,e){return oV({type:"MultiPolygon",coordinates:n},t,e=void 0===e?{}:e)}(n,e.properties)}({type:"Feature",geometry:this.geometry,properties:{}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[es.getNorthWest(t.bounds),es.getNorthEast(t.bounds),es.getSouthEast(t.bounds),es.getSouthWest(t.bounds),es.getNorthWest(t.bounds)]]},properties:{}})),e&&i&&o},n.prototype.apply=function(t,v){var i=this,o=(void 0===v&&(v=null),this.satisfied(t.getCamera())),s=this.dynamic&&this.tilesetId,f=this.hidesElement;return v=v&&["dragend","zoomend","pitchend"].includes(v.type),o||f?o&&(f||s)&&(o&&f&&this.element.style.removeProperty("display"),s)&&(v?t.events.addOnce("idle",function(I){return i.fetchAndApplyDynamicAttribution(t)}):this.fetchAndApplyDynamicAttribution(t)):this.element.style.display="none",o===f},n.prototype.fetchAndApplyDynamicAttribution=function(t){var e,i,o,s=this,f=t.getCamera();this.lastFetchState&&es.containsBoundingBox(this.lastFetchState.bounds,f.bounds)&&Math.floor(this.lastFetchState.zoom)==Math.floor(f.zoom)||(e=hR(f.center,es.getSouthWest(f.bounds),n.viewportBufferExpansionRatio),o=((i=hR(f.center,es.getNorthEast(f.bounds),n.viewportBufferExpansionRatio))[0]<e[0]?[[e[0],e[1],180,i[1]],[-180,e[1],i[0],i[1]]]:[[e[0],e[1],i[0],i[1]]]).map(function(I){I=new URLSearchParams({"api-version":"2.1",tilesetId:s.tilesetId,zoom:void 0!==f.zoom?"".concat(Math.floor(f.zoom)):void 0,bounds:I.join(",")});var D={url:k="".concat("https://{{azMapsDomain}}","/map/attribution"),headers:{}},k=(t._substituteDomainLanguageViewAndSignInRequest(k,D),"".concat(D.url).concat(D.url.includes("?")?"&":"?").concat(I.toString()));return t._sendRequest(k,"Attribution",D.headers).then(function(X){return X.json()})}),Promise.all(o).then(function(v){s.applyAttributionResponse(v),s.lastFetchState={bounds:new es([e[0],e[1],i[0],i[1]]),zoom:f.zoom}}).catch(function(v){return console.error(v)}))},n.prototype.applyAttributionResponse=function(f){var e,i,o,s=this;0!=(f=f.map(function(v){return v.copyrights||[]}).reduce(function(v,I){return XB(XB([],QB(v),!1),QB(I),!1)},[])).length&&(null===(f=TS.parseWithFilter(f.join(""),function(v){return!0},function(v){return v},function(){return s.element.innerHTML="",s.element}))?console.warn("Dynamic attribution is empty after filtering"):(e="string"==typeof f?((e=document.createElement("span")).innerHTML=f,e):f,o=e===this.element?(i=document.createElement("span"),Array.from(this.element.childNodes).forEach(function(v){return i.appendChild(v)}),i):e,Array.from(this.element.attributes).filter(function(v){return ZB.includes(v.name)}).forEach(function(v){return o.attributes.setNamedItem(v.cloneNode())}),o.style.display=this.element.style.display,f=this.element.parentElement,this.element.remove(),f.append(o),this.element=o,this.attributionChangeCallback(this)))},n.viewportBufferExpansionRatio=2,qK([GK(1e3)],n.prototype,"fetchAndApplyDynamicAttribution",null),n}(),Fb=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},GO=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},WK=[/all rights reserved/gi],QK=function(){function n(t,e,i){var o,s=this;this.rules=[],this.virtualContext=((o=document.createElement("span")).className="azure-map-copyright-context",o),this.renderContext=this.virtualContext.cloneNode(!1),this.addAttributionFromSource=function(f){},this.removeAttributionFromSource=function(f){},this.getMapStyleVisibleSources=function(){var f=s.map._getMap(),v=f.getStyle();return Object.entries(v.sources).filter(function(I){var D=Fb(I,1)[0];return v.layers.filter(function(k){return k&&k.source==D}).reduce(function(k,X){return!(X.layout&&"none"===X.layout.visibility||X.paint&&0===X.paint["icon-opacity"]&&0===X.paint["text-opacity"])||k},!1)}).map(function(I){return I=Fb(I,1)[0],f.getSource(I)})},this.loadAttributionOnceSourcesLoaded=function(){var f=s.getMapStyleVisibleSources();Promise.all(f.map(function(v){return new Promise(function(I,D){var k;"tiles"in v?I(v):((k=v).on("data",function X(fe){"metadata"==fe.sourceDataType&&(k.off("data",X),I(v))}),k.on("error",function X(fe){k.off("error",X),D(fe)}))}).then(function(I){return{status:"fulfilled",value:I}}).catch(function(I){return{status:"rejected",reason:I}})})).then(function(v){s.reloadAttribution()})},this.reloadAttribution=function(){var I=s.getMapStyleVisibleSources(),f=new Set,v={},D=(I=I.filter(function(Se){return"attribution"in Se&&Se.attribution&&"tiles"in Se&&Se.tiles instanceof Array&&0<Se.tiles.length}).map(function(Se){return TS.parseWithFilter(null!=(Se=Se.attribution)?Se:"",function(Ve){return KK.includes(Ve.tagName)&&Array.from(Ve.attributes).map(function(Je){return YK.includes(Je.name)}).reduce(function(Je,lt){return Je&&lt},!0)},function(Ve){var Je,lt=null;return Ve instanceof HTMLElement&&cV.applicable(Ve)&&(lt=new cV(Ve,function(){return s.renderAttribution()}),f.add(lt),void 0!==lt.order)&&(Ve.style.order="".concat(lt.order)),lt&&Ve instanceof HTMLElement&&(!((Je=lt.stringRepresentation)in v)||void 0!==lt.order&&void 0!==v[Je].order&&lt.order<v[Je].order||void 0!==lt.order&&void 0===v[Je].order)&&(v[Je]=lt),Ve},function(){return document.createElement("span")})}),new Set(Object.values(v))),X=new Set(GO([],Fb(f),!1).filter(function(Se){return!D.has(Se)})),k=new Set(GO([],Fb(X),!1).map(function(Se){return Se.getElement()})),fe=(GO([],Fb(k),!1).filter(function(Se){return null!==Se.parentElement}).forEach(function(Se){return Se.parentElement.removeChild(Se)}),s.rules=Object.values(v),X=I.filter(function(Se){return"string"==typeof Se||!k.has(Se)}).map(function(Se){return"string"==typeof Se?new Text(Se):Se}),document.createElement("span"));0<X.length?X.forEach(function(Se){return fe.appendChild(Se)}):s.getDefaultAttribution().forEach(function(Se){return fe.appendChild(Se)}),s.virtualContext=fe,s.copyrightControl.setOptions({copyrightContent:s.renderContext}),s.applyRules(),s.renderAttribution()},this.applyRules=function(f){void 0===f&&(f=null),s.rules.reduce(function(v,I){return I=I.apply(s.map,f),v||I},!1)&&s.renderAttribution()},this.renderAttribution=function(){var f=function(D){return Array.from("none"!=D.style.display?D.children:[]).map(function(k){return f(k)}).reduce(function(k,X){return GO(GO([],Fb(k),!1),Fb(X),!1)},Array.from("none"!=D.style.display?D.childNodes:[]).filter(function(k){return k.nodeType==k.TEXT_NODE}))},v=s.virtualContext.cloneNode(!0),I=f(v);I.forEach(function(D){return D.textContent=GO([],Fb(WK),!1).reduce(function(k,X){return k.replace(X,"").trim()},D.textContent)}),I.reduce(function(D,k){return D.has(k.textContent)?(k.textContent="",k.parentElement&&k.parentElement.removeChild(k)):D.add(k.textContent),D},new Set),s.renderContext.innerHTML="",Array.from(v.childNodes).forEach(function(D){return s.renderContext.appendChild(D)})},this.map=t,this.copyrightControl=e,this.options=i}return n.prototype.addToMap=function(){this.map.events.add("stylechanged",this.loadAttributionOnceSourcesLoaded),this.map.events.add("dragend",this.applyRules),this.map.events.add("zoomend",this.applyRules),this.map.events.add("pitchend",this.applyRules)},n.prototype.removeFromMap=function(){this.map.events.remove("stylechanged",this.loadAttributionOnceSourcesLoaded),this.map.events.remove("dragend",this.applyRules),this.map.events.remove("zoomend",this.applyRules),this.map.events.remove("pitchend",this.applyRules)},n.prototype.getDefaultAttribution=function(){return this.copyrightControl.getDefaultAttributions().map(function(t){return(e=document.createElement("a")).textContent=t,e;var e})},n}(),lV=function(n,t){return(lV=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,i){e.__proto__=i}:function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}))(n,t)};function sp(n,t){function e(){this.constructor=n}lV(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var bo=function(){return(bo=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function uV(n,t){var e={};for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(n);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(n,o[i])&&(e[o[i]]=n[o[i]]);return e}function Pr(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})}function Rr(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}}function XK(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f}function JB(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(XK(arguments[t]));return n}var dV=function(n,t){return(dV=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,i){e.__proto__=i}:function(e,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}))(n,t)};function Zf(n,t){function e(){this.constructor=n}dV(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var vl=function(){return(vl=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function Pa(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})}function Ra(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}}function H6(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var i=Array(n),o=0;for(t=0;t<e;t++)for(var s=arguments[t],f=0,v=s.length;f<v;f++,o++)i[o]=s[f];return i}var jg,ph,bT,Ka,qO,jD,U6,B6,y1,fh,sa,v1,Nm,Cl,z6,KO,Hb,$D,Ub,ez,Lh,VD,vf,Zt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},GD=[Zt.OPENID_SCOPE,Zt.PROFILE_SCOPE,Zt.OFFLINE_ACCESS_SCOPE],hV=H6(GD,[Zt.EMAIL_SCOPE]),$p=(function(n){n.CONTENT_TYPE="Content-Type",n.RETRY_AFTER="Retry-After",n.CCS_HEADER="X-AnchorMailbox",n.WWWAuthenticate="WWW-Authenticate",n.AuthenticationInfo="Authentication-Info",n.X_MS_REQUEST_ID="x-ms-request-id",n.X_MS_HTTP_VERSION="x-ms-httpver"}(jg=jg||{}),function(n){n.ID_TOKEN="idtoken",n.CLIENT_INFO="client.info",n.ADAL_ID_TOKEN="adal.idtoken",n.ERROR="error",n.ERROR_DESC="error.description",n.ACTIVE_ACCOUNT="active-account",n.ACTIVE_ACCOUNT_FILTERS="active-account-filters"}(ph=ph||{}),function(n){n.COMMON="common",n.ORGANIZATIONS="organizations",n.CONSUMERS="consumers"}(bT=bT||{}),function(n){n.CLIENT_ID="client_id",n.REDIRECT_URI="redirect_uri",n.RESPONSE_TYPE="response_type",n.RESPONSE_MODE="response_mode",n.GRANT_TYPE="grant_type",n.CLAIMS="claims",n.SCOPE="scope",n.ERROR="error",n.ERROR_DESCRIPTION="error_description",n.ACCESS_TOKEN="access_token",n.ID_TOKEN="id_token",n.REFRESH_TOKEN="refresh_token",n.EXPIRES_IN="expires_in",n.STATE="state",n.NONCE="nonce",n.PROMPT="prompt",n.SESSION_STATE="session_state",n.CLIENT_INFO="client_info",n.CODE="code",n.CODE_CHALLENGE="code_challenge",n.CODE_CHALLENGE_METHOD="code_challenge_method",n.CODE_VERIFIER="code_verifier",n.CLIENT_REQUEST_ID="client-request-id",n.X_CLIENT_SKU="x-client-SKU",n.X_CLIENT_VER="x-client-VER",n.X_CLIENT_OS="x-client-OS",n.X_CLIENT_CPU="x-client-CPU",n.X_CLIENT_CURR_TELEM="x-client-current-telemetry",n.X_CLIENT_LAST_TELEM="x-client-last-telemetry",n.X_MS_LIB_CAPABILITY="x-ms-lib-capability",n.X_APP_NAME="x-app-name",n.X_APP_VER="x-app-ver",n.POST_LOGOUT_URI="post_logout_redirect_uri",n.ID_TOKEN_HINT="id_token_hint",n.DEVICE_CODE="device_code",n.CLIENT_SECRET="client_secret",n.CLIENT_ASSERTION="client_assertion",n.CLIENT_ASSERTION_TYPE="client_assertion_type",n.TOKEN_TYPE="token_type",n.REQ_CNF="req_cnf",n.OBO_ASSERTION="assertion",n.REQUESTED_TOKEN_USE="requested_token_use",n.ON_BEHALF_OF="on_behalf_of",n.FOCI="foci",n.CCS_HEADER="X-AnchorMailbox",n.RETURN_SPA_CODE="return_spa_code",n.NATIVE_BROKER="nativebroker",n.LOGOUT_HINT="logout_hint"}(Ka=Ka||{}),function(n){n.ACCESS_TOKEN="access_token",n.XMS_CC="xms_cc"}(qO=qO||{}),{LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"}),pV=(function(n){n.ACCOUNT="account",n.SID="sid",n.LOGIN_HINT="login_hint",n.ID_TOKEN="id_token",n.DOMAIN_HINT="domain_hint",n.ORGANIZATIONS="organizations",n.CONSUMERS="consumers",n.ACCOUNT_ID="accountIdentifier",n.HOMEACCOUNT_ID="homeAccountIdentifier"}(jD=jD||{}),{PLAIN:"plain",S256:"S256"}),tz=(function(n){n.QUERY="query",n.FRAGMENT="fragment",n.FORM_POST="form_post"}(U6=U6||{}),function(n){n.IMPLICIT_GRANT="implicit",n.AUTHORIZATION_CODE_GRANT="authorization_code",n.CLIENT_CREDENTIALS_GRANT="client_credentials",n.RESOURCE_OWNER_PASSWORD_GRANT="password",n.REFRESH_TOKEN_GRANT="refresh_token",n.DEVICE_CODE_GRANT="device_code",n.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(B6=B6||{}),function(n){n.MSSTS_ACCOUNT_TYPE="MSSTS",n.ADFS_ACCOUNT_TYPE="ADFS",n.MSAV1_ACCOUNT_TYPE="MSA",n.GENERIC_ACCOUNT_TYPE="Generic"}(y1=y1||{}),function(n){n.CACHE_KEY_SEPARATOR="-",n.CLIENT_INFO_SEPARATOR="."}(fh=fh||{}),function(n){n.ID_TOKEN="IdToken",n.ACCESS_TOKEN="AccessToken",n.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",n.REFRESH_TOKEN="RefreshToken"}(sa=sa||{}),function(n){n[n.ADFS=1001]="ADFS",n[n.MSA=1002]="MSA",n[n.MSSTS=1003]="MSSTS",n[n.GENERIC=1004]="GENERIC",n[n.ACCESS_TOKEN=2001]="ACCESS_TOKEN",n[n.REFRESH_TOKEN=2002]="REFRESH_TOKEN",n[n.ID_TOKEN=2003]="ID_TOKEN",n[n.APP_METADATA=3001]="APP_METADATA",n[n.UNDEFINED=9999]="UNDEFINED"}(v1=v1||{}),"appmetadata"),cp=(function(n){n.CONFIG="config",n.CACHE="cache",n.NETWORK="network",n.HARDCODED_VALUES="hardcoded_values"}(Nm=Nm||{}),{SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"}),YD=(function(n){n.BEARER="Bearer",n.POP="pop",n.SSH="ssh-cert"}(Cl=Cl||{}),{DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"}),j6=(function(n){n.username="username",n.password="password"}(z6=z6||{}),function(n){n[n.httpSuccess=200]="httpSuccess",n[n.httpBadRequest=400]="httpBadRequest"}(KO=KO||{}),function(n){n.FAILED_AUTO_DETECTION="1",n.INTERNAL_CACHE="2",n.ENVIRONMENT_VARIABLE="3",n.IMDS="4"}(Hb=Hb||{}),function(n){n.CONFIGURED_MATCHES_DETECTED="1",n.CONFIGURED_NO_AUTO_DETECTION="2",n.CONFIGURED_NOT_DETECTED="3",n.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",n.AUTO_DETECTION_REQUESTED_FAILED="5"}($D=$D||{}),function(n){n.NO_CACHE_HIT="0",n.FORCE_REFRESH="1",n.NO_CACHED_ACCESS_TOKEN="2",n.CACHED_ACCESS_TOKEN_EXPIRED="3",n.REFRESH_CACHED_ACCESS_TOKEN="4",n.CLAIMS_REQUESTED_CACHE_SKIPPED="5"}(Ub=Ub||{}),function(n){n.Jwt="JWT",n.Jwk="JWK",n.Pop="pop"}(ez=ez||{}),{unexpectedError:{code:"unexpected_error",desc:"Unexpected error in authentication."},postRequestFailed:{code:"post_request_failed",desc:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."}}),Po=function(n){function t(e,i,o){var s=this;return s=n.call(this,i?e+": "+i:e)||this,Object.setPrototypeOf(s,t.prototype),s.errorCode=e||Zt.EMPTY_STRING,s.errorMessage=i||Zt.EMPTY_STRING,s.subError=o||Zt.EMPTY_STRING,s.name="AuthError",s}return Zf(t,n),t.prototype.setCorrelationId=function(e){this.correlationId=e},t.createUnexpectedError=function(e){return new t(j6.unexpectedError.code,j6.unexpectedError.desc+": "+e)},t.createPostRequestFailed=function(e){return new t(j6.postRequestFailed.code,j6.postRequestFailed.desc+": "+e)},t}(Error),$6={createNewGuid:function(){throw Po.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw Po.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw Po.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")})})},getPublicKeyThumbprint:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")})})},removeTokenBindingKey:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Crypto interface - removeTokenBindingKey() has not been implemented")})})},clearKeystore:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Crypto interface - clearKeystore() has not been implemented")})})},signJwt:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Crypto interface - signJwt() has not been implemented")})})},hashString:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Crypto interface - hashString() has not been implemented")})})}},ii_clientInfoDecodingError_code="client_info_decoding_error",ii_clientInfoDecodingError_desc="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",ii_clientInfoEmptyError_code="client_info_empty_error",ii_clientInfoEmptyError_desc="The client info was empty. Please review the trace to determine the root cause.",ii_tokenParsingError_code="token_parsing_error",ii_tokenParsingError_desc="Token cannot be parsed. Please review stack trace to determine root cause.",ii_nullOrEmptyToken_code="null_or_empty_token",ii_nullOrEmptyToken_desc="The token is null or empty. Please review the trace to determine the root cause.",ii_endpointResolutionError_code="endpoints_resolution_error",ii_endpointResolutionError_desc="Error: could not resolve endpoints. Please check network and try again.",ii_networkError_code="network_error",ii_networkError_desc="Network request failed. Please check network trace to determine root cause.",ii_unableToGetOpenidConfigError_code="openid_config_error",ii_unableToGetOpenidConfigError_desc="Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",ii_hashNotDeserialized_code="hash_not_deserialized",ii_hashNotDeserialized_desc="The hash parameters could not be deserialized. Please review the trace to determine the root cause.",ii_invalidStateError_code="invalid_state",ii_invalidStateError_desc="State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState().",ii_stateMismatchError_code="state_mismatch",ii_stateMismatchError_desc="State mismatch error. Please check your network. Continued requests may cause cache overflow.",ii_stateNotFoundError_code="state_not_found",ii_stateNotFoundError_desc="State not found",ii_nonceMismatchError_code="nonce_mismatch",ii_nonceMismatchError_desc="Nonce mismatch error. This may be caused by a race condition in concurrent requests.",ii_nonceNotFoundError_code="nonce_not_found",ii_nonceNotFoundError_desc="nonce not found",ii_authTimeNotFoundError_code="auth_time_not_found",ii_authTimeNotFoundError_desc="Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",ii_maxAgeTranspiredError_code="max_age_transpired",ii_maxAgeTranspiredError_desc="Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",ii_multipleMatchingTokens_code="multiple_matching_tokens",ii_multipleMatchingTokens_desc="The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",ii_multipleMatchingAccounts_code="multiple_matching_accounts",ii_multipleMatchingAccounts_desc="The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",ii_multipleMatchingAppMetadata_code="multiple_matching_appMetadata",ii_multipleMatchingAppMetadata_desc="The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",ii_tokenRequestCannotBeMade_code="request_cannot_be_made",ii_tokenRequestCannotBeMade_desc="Token request cannot be made without authorization code or refresh token.",ii_appendEmptyScopeError_code="cannot_append_empty_scope",ii_appendEmptyScopeError_desc="Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info.",ii_removeEmptyScopeError_code="cannot_remove_empty_scope",ii_removeEmptyScopeError_desc="Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info.",ii_appendScopeSetError_code="cannot_append_scopeset",ii_appendScopeSetError_desc="Cannot append ScopeSet due to error.",ii_emptyInputScopeSetError_code="empty_input_scopeset",ii_emptyInputScopeSetError_desc="Empty input ScopeSet cannot be processed.",ii_DeviceCodePollingCancelled_code="device_code_polling_cancelled",ii_DeviceCodePollingCancelled_desc="Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",ii_DeviceCodeExpired_code="device_code_expired",ii_DeviceCodeExpired_desc="Device code is expired.",ii_DeviceCodeUnknownError_code="device_code_unknown_error",ii_DeviceCodeUnknownError_desc="Device code stopped polling for unknown reasons.",ii_NoAccountInSilentRequest_code="no_account_in_silent_request",ii_NoAccountInSilentRequest_desc="Please pass an account object, silent flow is not supported without account information",ii_invalidCacheRecord_code="invalid_cache_record",ii_invalidCacheRecord_desc="Cache record object was null or undefined.",ii_invalidCacheEnvironment_code="invalid_cache_environment",ii_invalidCacheEnvironment_desc="Invalid environment when attempting to create cache entry",ii_noAccountFound_code="no_account_found",ii_noAccountFound_desc="No account found in cache for given key.",ii_CachePluginError_code="no cache plugin set on CacheManager",ii_CachePluginError_desc="ICachePlugin needs to be set before using readFromStorage or writeFromStorage",ii_noCryptoObj_code="no_crypto_object",ii_noCryptoObj_desc="No crypto object detected. This is required for the following operation: ",ii_invalidCacheType_code="invalid_cache_type",ii_invalidCacheType_desc="Invalid cache type",ii_unexpectedAccountType_code="unexpected_account_type",ii_unexpectedAccountType_desc="Unexpected account type.",ii_unexpectedCredentialType_code="unexpected_credential_type",ii_unexpectedCredentialType_desc="Unexpected credential type.",ii_invalidAssertion_code="invalid_assertion",ii_invalidAssertion_desc="Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",ii_invalidClientCredential_code="invalid_client_credential",ii_invalidClientCredential_desc="Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",ii_tokenRefreshRequired_code="token_refresh_required",ii_tokenRefreshRequired_desc="Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",ii_userTimeoutReached_code="user_timeout_reached",ii_userTimeoutReached_desc="User defined timeout for device code polling reached",ii_tokenClaimsRequired_code="token_claims_cnf_required_for_signedjwt",ii_tokenClaimsRequired_desc="Cannot generate a POP jwt if the token_claims are not populated",ii_noAuthorizationCodeFromServer_code="authorization_code_missing_from_server_response",ii_noAuthorizationCodeFromServer_desc="Server response does not contain an authorization code to proceed",ii_bindingKeyNotRemovedError_code="binding_key_not_removed",ii_bindingKeyNotRemovedError_desc="Could not remove the credential's binding key from storage.",ii_logoutNotSupported_code="end_session_endpoint_not_supported",ii_logoutNotSupported_desc="Provided authority does not support logout.",ii_keyIdMissing_code="key_id_missing",ii_keyIdMissing_desc="A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",ii_noNetworkConnectivity_code="no_network_connectivity",ii_noNetworkConnectivity_desc="No network connectivity. Check your internet connection.",ii_userCanceledError_code="user_canceled",ii_userCanceledError_desc="User canceled the flow.",Ji=function(n){function t(e,i){return(e=n.call(this,e,i)||this).name="ClientAuthError",Object.setPrototypeOf(e,t.prototype),e}return Zf(t,n),t.createClientInfoDecodingError=function(e){return new t(ii_clientInfoDecodingError_code,ii_clientInfoDecodingError_desc+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(ii_clientInfoEmptyError_code,""+ii_clientInfoEmptyError_desc)},t.createTokenParsingError=function(e){return new t(ii_tokenParsingError_code,ii_tokenParsingError_desc+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(ii_nullOrEmptyToken_code,ii_nullOrEmptyToken_desc+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t(ii_endpointResolutionError_code,ii_endpointResolutionError_desc+" Detail: "+e)},t.createNetworkError=function(e,i){return new t(ii_networkError_code,ii_networkError_desc+" | Fetch client threw: "+i+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(ii_unableToGetOpenidConfigError_code,ii_unableToGetOpenidConfigError_desc+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(ii_hashNotDeserialized_code,ii_hashNotDeserialized_desc+" Given Object: "+e)},t.createInvalidStateError=function(e,i){return new t(ii_invalidStateError_code,ii_invalidStateError_desc+" Invalid State: "+e+", Root Err: "+i)},t.createStateMismatchError=function(){return new t(ii_stateMismatchError_code,ii_stateMismatchError_desc)},t.createStateNotFoundError=function(e){return new t(ii_stateNotFoundError_code,ii_stateNotFoundError_desc+":  "+e)},t.createNonceMismatchError=function(){return new t(ii_nonceMismatchError_code,ii_nonceMismatchError_desc)},t.createAuthTimeNotFoundError=function(){return new t(ii_authTimeNotFoundError_code,ii_authTimeNotFoundError_desc)},t.createMaxAgeTranspiredError=function(){return new t(ii_maxAgeTranspiredError_code,ii_maxAgeTranspiredError_desc)},t.createNonceNotFoundError=function(e){return new t(ii_nonceNotFoundError_code,ii_nonceNotFoundError_desc+":  "+e)},t.createMultipleMatchingTokensInCacheError=function(){return new t(ii_multipleMatchingTokens_code,ii_multipleMatchingTokens_desc+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(ii_multipleMatchingAccounts_code,ii_multipleMatchingAccounts_desc)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(ii_multipleMatchingAppMetadata_code,ii_multipleMatchingAppMetadata_desc)},t.createTokenRequestCannotBeMadeError=function(){return new t(ii_tokenRequestCannotBeMade_code,ii_tokenRequestCannotBeMade_desc)},t.createAppendEmptyScopeToSetError=function(e){return new t(ii_appendEmptyScopeError_code,ii_appendEmptyScopeError_desc+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(ii_removeEmptyScopeError_code,ii_removeEmptyScopeError_desc+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(ii_appendScopeSetError_code,ii_appendScopeSetError_desc+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(ii_emptyInputScopeSetError_code,""+ii_emptyInputScopeSetError_desc)},t.createDeviceCodeCancelledError=function(){return new t(ii_DeviceCodePollingCancelled_code,""+ii_DeviceCodePollingCancelled_desc)},t.createDeviceCodeExpiredError=function(){return new t(ii_DeviceCodeExpired_code,""+ii_DeviceCodeExpired_desc)},t.createDeviceCodeUnknownError=function(){return new t(ii_DeviceCodeUnknownError_code,""+ii_DeviceCodeUnknownError_desc)},t.createNoAccountInSilentRequestError=function(){return new t(ii_NoAccountInSilentRequest_code,""+ii_NoAccountInSilentRequest_desc)},t.createNullOrUndefinedCacheRecord=function(){return new t(ii_invalidCacheRecord_code,ii_invalidCacheRecord_desc)},t.createInvalidCacheEnvironmentError=function(){return new t(ii_invalidCacheEnvironment_code,ii_invalidCacheEnvironment_desc)},t.createNoAccountFoundError=function(){return new t(ii_noAccountFound_code,ii_noAccountFound_desc)},t.createCachePluginError=function(){return new t(ii_CachePluginError_code,""+ii_CachePluginError_desc)},t.createNoCryptoObjectError=function(e){return new t(ii_noCryptoObj_code,""+ii_noCryptoObj_desc+e)},t.createInvalidCacheTypeError=function(){return new t(ii_invalidCacheType_code,""+ii_invalidCacheType_desc)},t.createUnexpectedAccountTypeError=function(){return new t(ii_unexpectedAccountType_code,""+ii_unexpectedAccountType_desc)},t.createUnexpectedCredentialTypeError=function(){return new t(ii_unexpectedCredentialType_code,""+ii_unexpectedCredentialType_desc)},t.createInvalidAssertionError=function(){return new t(ii_invalidAssertion_code,""+ii_invalidAssertion_desc)},t.createInvalidCredentialError=function(){return new t(ii_invalidClientCredential_code,""+ii_invalidClientCredential_desc)},t.createRefreshRequiredError=function(){return new t(ii_tokenRefreshRequired_code,ii_tokenRefreshRequired_desc)},t.createUserTimeoutReachedError=function(){return new t(ii_userTimeoutReached_code,ii_userTimeoutReached_desc)},t.createTokenClaimsRequiredError=function(){return new t(ii_tokenClaimsRequired_code,ii_tokenClaimsRequired_desc)},t.createNoAuthCodeInServerResponseError=function(){return new t(ii_noAuthorizationCodeFromServer_code,ii_noAuthorizationCodeFromServer_desc)},t.createBindingKeyNotRemovedError=function(){return new t(ii_bindingKeyNotRemovedError_code,ii_bindingKeyNotRemovedError_desc)},t.createLogoutNotSupportedError=function(){return new t(ii_logoutNotSupported_code,ii_logoutNotSupported_desc)},t.createKeyIdMissingError=function(){return new t(ii_keyIdMissing_code,ii_keyIdMissing_desc)},t.createNoNetworkConnectivityError=function(){return new t(ii_noNetworkConnectivity_code,ii_noNetworkConnectivity_desc)},t.createUserCanceledError=function(){return new t(ii_userCanceledError_code,ii_userCanceledError_desc)},t}(Po),Wi=function(){function n(){}return n.decodeAuthToken=function(t){if(n.isEmpty(t))throw Ji.createTokenNullOrEmptyError(t);var e=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!e||e.length<4)throw Ji.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:e[1],JWSPayload:e[2],JWSSig:e[3]}},n.isEmpty=function(t){return void 0===t||!t||0===t.length},n.isEmptyObj=function(t){if(t&&!n.isEmpty(t))try{var e=JSON.parse(t);return 0===Object.keys(e).length}catch{}return!0},n.startsWith=function(t,e){return 0===t.indexOf(e)},n.endsWith=function(t,e){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length},n.queryStringToObject=function(o){function e(s){return decodeURIComponent(s.replace(/\+/g," "))}var i={};return(o=o.split("&")).forEach(function(s){var f;s.trim()&&(f=(s=s.split(/=(.+)/g,2))[0],s=s[1],f)&&s&&(i[e(f)]=e(s))}),i},n.trimArrayEntries=function(t){return t.map(function(e){return e.trim()})},n.removeEmptyStringsFromArray=function(t){return t.filter(function(e){return!n.isEmpty(e)})},n.jsonParseHelper=function(t){try{return JSON.parse(t)}catch{return null}},n.matchPattern=function(t,e){return new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(e)},n}(),nz=(function(n){n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace"}(Lh=Lh||{}),function(){function n(t,e,i){this.level=Lh.Info,t=t||n.createDefaultLoggerOptions(),this.localCallback=t.loggerCallback||function(){},this.piiLoggingEnabled=t.piiLoggingEnabled||!1,this.level="number"==typeof t.logLevel?t.logLevel:Lh.Info,this.correlationId=t.correlationId||Zt.EMPTY_STRING,this.packageName=e||Zt.EMPTY_STRING,this.packageVersion=i||Zt.EMPTY_STRING}return n.createDefaultLoggerOptions=function(){return{loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Lh.Info}},n.prototype.clone=function(t,e,i){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:i||this.correlationId},t,e)},n.prototype.logMessage=function(t,e){var i;e.logLevel>this.level||!this.piiLoggingEnabled&&e.containsPii||(i=(new Date).toUTCString(),i=(Wi.isEmpty(e.correlationId)?Wi.isEmpty(this.correlationId)?"["+i+"]":"["+i+"] : ["+this.correlationId+"]":"["+i+"] : ["+e.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+Lh[e.logLevel]+" - "+t,this.executeCallback(e.logLevel,i,e.containsPii||!1))},n.prototype.executeCallback=function(t,e,i){this.localCallback&&this.localCallback(t,e,i)},n.prototype.error=function(t,e){this.logMessage(t,{logLevel:Lh.Error,containsPii:!1,correlationId:e||Zt.EMPTY_STRING})},n.prototype.errorPii=function(t,e){this.logMessage(t,{logLevel:Lh.Error,containsPii:!0,correlationId:e||Zt.EMPTY_STRING})},n.prototype.warning=function(t,e){this.logMessage(t,{logLevel:Lh.Warning,containsPii:!1,correlationId:e||Zt.EMPTY_STRING})},n.prototype.warningPii=function(t,e){this.logMessage(t,{logLevel:Lh.Warning,containsPii:!0,correlationId:e||Zt.EMPTY_STRING})},n.prototype.info=function(t,e){this.logMessage(t,{logLevel:Lh.Info,containsPii:!1,correlationId:e||Zt.EMPTY_STRING})},n.prototype.infoPii=function(t,e){this.logMessage(t,{logLevel:Lh.Info,containsPii:!0,correlationId:e||Zt.EMPTY_STRING})},n.prototype.verbose=function(t,e){this.logMessage(t,{logLevel:Lh.Verbose,containsPii:!1,correlationId:e||Zt.EMPTY_STRING})},n.prototype.verbosePii=function(t,e){this.logMessage(t,{logLevel:Lh.Verbose,containsPii:!0,correlationId:e||Zt.EMPTY_STRING})},n.prototype.trace=function(t,e){this.logMessage(t,{logLevel:Lh.Trace,containsPii:!1,correlationId:e||Zt.EMPTY_STRING})},n.prototype.tracePii=function(t,e){this.logMessage(t,{logLevel:Lh.Trace,containsPii:!0,correlationId:e||Zt.EMPTY_STRING})},n.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},n}()),gV="@azure/msal-common",rz="13.3.1",xa=(function(n){n[n.None=0]="None",n.AzurePublic="https://login.microsoftonline.com",n.AzurePpe="https://login.windows-ppe.net",n.AzureChina="https://login.chinacloudapi.cn",n.AzureGermany="https://login.microsoftonline.de",n.AzureUsGovernment="https://login.microsoftonline.us"}(VD=VD||{}),{redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},urlParseError:{code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},urlEmptyError:{code:"empty_url_error",desc:"URL was empty or null."},emptyScopesError:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},nonArrayScopesError:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientIdSingleScopeError:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create', 'none' and 'no_session'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},invalidClaimsRequest:{code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},tokenRequestEmptyError:{code:"token_request_empty",desc:"Token request was empty and not found in cache."},logoutRequestEmptyError:{code:"logout_request_empty",desc:"The logout request was null or undefined."},invalidCodeChallengeMethod:{code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},invalidCodeChallengeParams:{code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},invalidCloudDiscoveryMetadata:{code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields"},invalidAuthorityMetadata:{code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields."},untrustedAuthority:{code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."},invalidAzureCloudInstance:{code:"invalid_azure_cloud_instance",desc:"Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values"},missingSshJwk:{code:"missing_ssh_jwk",desc:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme."},missingSshKid:{code:"missing_ssh_kid",desc:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme."},missingNonceAuthenticationHeader:{code:"missing_nonce_authentication_header",desc:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce."},invalidAuthenticationHeader:{code:"invalid_authentication_header",desc:"Invalid authentication header provided"},authorityMismatch:{code:"authority_mismatch",desc:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."}}),uu=function(n){function t(e,i){return(e=n.call(this,e,i)||this).name="ClientConfigurationError",Object.setPrototypeOf(e,t.prototype),e}return Zf(t,n),t.createRedirectUriEmptyError=function(){return new t(xa.redirectUriNotSet.code,xa.redirectUriNotSet.desc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(xa.postLogoutUriNotSet.code,xa.postLogoutUriNotSet.desc)},t.createClaimsRequestParsingError=function(e){return new t(xa.claimsRequestParsingError.code,xa.claimsRequestParsingError.desc+" Given value: "+e)},t.createInsecureAuthorityUriError=function(e){return new t(xa.authorityUriInsecure.code,xa.authorityUriInsecure.desc+" Given URI: "+e)},t.createUrlParseError=function(e){return new t(xa.urlParseError.code,xa.urlParseError.desc+" Given Error: "+e)},t.createUrlEmptyError=function(){return new t(xa.urlEmptyError.code,xa.urlEmptyError.desc)},t.createEmptyScopesArrayError=function(){return new t(xa.emptyScopesError.code,""+xa.emptyScopesError.desc)},t.createClientIdSingleScopeError=function(e){return new t(xa.clientIdSingleScopeError.code,xa.clientIdSingleScopeError.desc+" Given Scopes: "+e)},t.createInvalidPromptError=function(e){return new t(xa.invalidPrompt.code,xa.invalidPrompt.desc+" Given value: "+e)},t.createInvalidClaimsRequestError=function(){return new t(xa.invalidClaimsRequest.code,xa.invalidClaimsRequest.desc)},t.createEmptyLogoutRequestError=function(){return new t(xa.logoutRequestEmptyError.code,xa.logoutRequestEmptyError.desc)},t.createEmptyTokenRequestError=function(){return new t(xa.tokenRequestEmptyError.code,xa.tokenRequestEmptyError.desc)},t.createInvalidCodeChallengeMethodError=function(){return new t(xa.invalidCodeChallengeMethod.code,xa.invalidCodeChallengeMethod.desc)},t.createInvalidCodeChallengeParamsError=function(){return new t(xa.invalidCodeChallengeParams.code,xa.invalidCodeChallengeParams.desc)},t.createInvalidCloudDiscoveryMetadataError=function(){return new t(xa.invalidCloudDiscoveryMetadata.code,xa.invalidCloudDiscoveryMetadata.desc)},t.createInvalidAuthorityMetadataError=function(){return new t(xa.invalidAuthorityMetadata.code,xa.invalidAuthorityMetadata.desc)},t.createUntrustedAuthorityError=function(){return new t(xa.untrustedAuthority.code,xa.untrustedAuthority.desc)},t.createInvalidAzureCloudInstanceError=function(){return new t(xa.invalidAzureCloudInstance.code,xa.invalidAzureCloudInstance.desc)},t.createMissingSshJwkError=function(){return new t(xa.missingSshJwk.code,xa.missingSshJwk.desc)},t.createMissingSshKidError=function(){return new t(xa.missingSshKid.code,xa.missingSshKid.desc)},t.createMissingNonceAuthenticationHeadersError=function(){return new t(xa.missingNonceAuthenticationHeader.code,xa.missingNonceAuthenticationHeader.desc)},t.createInvalidAuthenticationHeaderError=function(e,i){return new t(xa.invalidAuthenticationHeader.code,xa.invalidAuthenticationHeader.desc+". Invalid header: "+e+". Details: "+i)},t.createAuthorityMismatchError=function(){return new t(xa.authorityMismatch.code,xa.authorityMismatch.desc)},t}(Ji),Vp=function(){function n(i){var e=this;i=(i=i?Wi.trimArrayEntries(H6(i)):[])?Wi.removeEmptyStringsFromArray(i):[],this.validateInputScopes(i),this.scopes=new Set,i.forEach(function(o){return e.scopes.add(o)})}return n.fromString=function(t){return new n((t||Zt.EMPTY_STRING).split(" "))},n.createSearchScopes=function(t){return(t=new n(t)).containsOnlyOIDCScopes()?t.removeScope(Zt.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t},n.prototype.validateInputScopes=function(t){if(!t||t.length<1)throw uu.createEmptyScopesArrayError()},n.prototype.containsScope=function(t){var e=new n(this.printScopesLowerCase().split(" "));return!Wi.isEmpty(t)&&e.scopes.has(t.toLowerCase())},n.prototype.containsScopeSet=function(t){var e=this;return!(!t||t.scopes.size<=0)&&this.scopes.size>=t.scopes.size&&t.asArray().every(function(i){return e.containsScope(i)})},n.prototype.containsOnlyOIDCScopes=function(){var t=this,e=0;return hV.forEach(function(i){t.containsScope(i)&&(e+=1)}),this.scopes.size===e},n.prototype.appendScope=function(t){Wi.isEmpty(t)||this.scopes.add(t.trim())},n.prototype.appendScopes=function(t){var e=this;try{t.forEach(function(i){return e.appendScope(i)})}catch(i){throw Ji.createAppendScopeSetError(i)}},n.prototype.removeScope=function(t){if(Wi.isEmpty(t))throw Ji.createRemoveEmptyScopeFromSetError(t);this.scopes.delete(t.trim())},n.prototype.removeOIDCScopes=function(){var t=this;hV.forEach(function(e){t.scopes.delete(e)})},n.prototype.unionScopeSets=function(t){var e;if(t)return e=new Set,t.scopes.forEach(function(i){return e.add(i.toLowerCase())}),this.scopes.forEach(function(i){return e.add(i.toLowerCase())}),e;throw Ji.createEmptyInputScopeSetError()},n.prototype.intersectingScopeSets=function(i){if(!i)throw Ji.createEmptyInputScopeSetError();i.containsOnlyOIDCScopes()||i.removeOIDCScopes();var e=this.unionScopeSets(i),o=(i=i.getScopeCount(),this.getScopeCount());return e.size<o+i},n.prototype.getScopeCount=function(){return this.scopes.size},n.prototype.asArray=function(){var t=[];return this.scopes.forEach(function(e){return t.push(e)}),t},n.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):Zt.EMPTY_STRING},n.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},n}();function V6(n,t){if(Wi.isEmpty(n))throw Ji.createClientInfoEmptyError();try{var e=t.base64Decode(n);return JSON.parse(e)}catch(i){throw Ji.createClientInfoDecodingError(i.message)}}function YO(n){if(Wi.isEmpty(n))throw Ji.createClientInfoDecodingError("Home account ID was empty.");return{uid:(n=n.split(fh.CLIENT_INFO_SEPARATOR,2))[0],utid:n.length<2?Zt.EMPTY_STRING:n[1]}}!function(n){n[n.Default=0]="Default",n[n.Adfs=1]="Adfs",n[n.Dsts=2]="Dsts",n[n.Ciam=3]="Ciam"}(vf=vf||{});var lp=function(){function n(){}return n.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(fh.CACHE_KEY_SEPARATOR).toLowerCase()},n.prototype.generateAccountKey=function(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},n.prototype.generateType=function(){switch(this.authorityType){case y1.ADFS_ACCOUNT_TYPE:return v1.ADFS;case y1.MSAV1_ACCOUNT_TYPE:return v1.MSA;case y1.MSSTS_ACCOUNT_TYPE:return v1.MSSTS;case y1.GENERIC_ACCOUNT_TYPE:return v1.GENERIC;default:throw Ji.createUnexpectedAccountTypeError()}},n.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}},n.generateAccountCacheKey=function(t){return[t.homeAccountId,t.environment||Zt.EMPTY_STRING,t.tenantId||Zt.EMPTY_STRING].join(fh.CACHE_KEY_SEPARATOR).toLowerCase()},n.createAccount=function(k,e,i,o,s,f,v,I){var D=new n;if(D.authorityType=y1.MSSTS_ACCOUNT_TYPE,D.clientInfo=k,D.homeAccountId=e,D.nativeAccountId=I,k=v||o&&o.getPreferredCache())return D.environment=k,D.realm=(null==(e=i?.claims)?void 0:e.tid)||Zt.EMPTY_STRING,i&&(D.idTokenClaims=i.claims,D.localAccountId=(null==(I=i?.claims)?void 0:I.oid)||(null==(v=i?.claims)?void 0:v.sub)||Zt.EMPTY_STRING,k=null==(o=i?.claims)?void 0:o.preferred_username,I=null!=(e=i?.claims)&&e.emails?i.claims.emails[0]:null,D.username=k||I||Zt.EMPTY_STRING,D.name=null==(v=i?.claims)?void 0:v.name),D.cloudGraphHostName=s,D.msGraphHost=f,D;throw Ji.createInvalidCacheEnvironmentError()},n.createGenericAccount=function(I,e,i,o,s,f){var v=new n;if(v.authorityType=i&&i.authorityType===vf.Adfs?y1.ADFS_ACCOUNT_TYPE:y1.GENERIC_ACCOUNT_TYPE,v.homeAccountId=I,v.realm=Zt.EMPTY_STRING,I=f||i&&i.getPreferredCache())return e&&(v.localAccountId=(null==(f=e?.claims)?void 0:f.oid)||(null==(i=e?.claims)?void 0:i.sub)||Zt.EMPTY_STRING,v.username=(null==(f=e?.claims)?void 0:f.upn)||Zt.EMPTY_STRING,v.name=(null==(i=e?.claims)?void 0:i.name)||Zt.EMPTY_STRING,v.idTokenClaims=e?.claims),v.environment=I,v.cloudGraphHostName=o,v.msGraphHost=s,v;throw Ji.createInvalidCacheEnvironmentError()},n.generateHomeAccountId=function(t,e,i,o,s){var f=null!=(f=s?.claims)&&f.sub?s.claims.sub:Zt.EMPTY_STRING;if(e!==vf.Adfs&&e!==vf.Dsts){if(t)try{var v=V6(t,o);if(!Wi.isEmpty(v.uid)&&!Wi.isEmpty(v.utid))return""+v.uid+fh.CLIENT_INFO_SEPARATOR+v.utid}catch{}i.verbose("No client info in response")}return f},n.isAccountEntity=function(t){return!!t&&t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType")},n.accountInfoIsEqual=function(t,e,i){var o,s;return!(!t||!e)&&(s=!0,i&&(s=(i=t.idTokenClaims||{}).iat===(o=e.idTokenClaims||{}).iat&&i.nonce===o.nonce),t.homeAccountId===e.homeAccountId)&&t.localAccountId===e.localAccountId&&t.username===e.username&&t.tenantId===e.tenantId&&t.environment===e.environment&&t.nativeAccountId===e.nativeAccountId&&s},n}(),mv=function(){function n(t,e){if(Wi.isEmpty(t))throw Ji.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=n.extractTokenClaims(t,e)}return n.extractTokenClaims=function(t,e){t=Wi.decodeAuthToken(t);try{var o=e.base64Decode(t.JWSPayload);return JSON.parse(o)}catch(s){throw Ji.createTokenParsingError(s)}},n.checkMaxAge=function(t,e){if(0===e||Date.now()-3e5>t+e)throw Ji.createMaxAgeTranspiredError()},n}(),Jf=function(){function n(t,e,i){this.clientId=t,this.cryptoImpl=e,this.commonLogger=i.clone(gV,rz)}return n.prototype.getAllAccounts=function(){var t=this,e=this.getAccountKeys();return e.length<1||(e=e.reduce(function(i,o){return(o=t.getAccount(o))&&i.push(o),i},[])).length<1?[]:e.map(function(i){return t.getAccountInfoFromEntity(i)})},n.prototype.getAccountInfoFilteredBy=function(t){return 0<(t=this.getAccountsFilteredBy(t)).length?this.getAccountInfoFromEntity(t[0]):null},n.prototype.getAccountInfoFromEntity=function(e){e=e.getAccountInfo();var i=this.getIdToken(e);return i&&(e.idToken=i.secret,e.idTokenClaims=new mv(i.secret,this.cryptoImpl).claims),e},n.prototype.saveCacheRecord=function(t){return Pa(this,void 0,void 0,function(){return Ra(this,function(e){switch(e.label){case 0:if(t)return t.account&&this.setAccount(t.account),t.idToken&&this.setIdTokenCredential(t.idToken),t.accessToken?[4,this.saveAccessToken(t.accessToken)]:[3,2];throw Ji.createNullOrUndefinedCacheRecord();case 1:e.sent(),e.label=2;case 2:return t.refreshToken&&this.setRefreshTokenCredential(t.refreshToken),t.appMetadata&&this.setAppMetadata(t.appMetadata),[2]}})})},n.prototype.saveAccessToken=function(t){return Pa(this,void 0,void 0,function(){var e,i,o,s,f=this;return Ra(this,function(v){switch(v.label){case 0:return e={clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash},i=this.getTokenKeys(),o=Vp.fromString(t.target),s=[],i.accessToken.forEach(function(I){var D;f.accessTokenKeyMatchesFilter(I,e,!1)&&(D=f.getAccessTokenCredential(I))&&f.credentialMatchesFilter(D,e)&&Vp.fromString(D.target).intersectingScopeSets(o)&&s.push(f.removeAccessToken(I))}),[4,Promise.all(s)];case 1:return v.sent(),this.setAccessTokenCredential(t),[2]}})})},n.prototype.getAccountsFilteredBy=function(t){var e=this,i=this.getAccountKeys(),o=[];return i.forEach(function(s){!e.isAccountKey(s,t.homeAccountId,t.realm)||!(s=e.getAccount(s))||t.homeAccountId&&!e.matchHomeAccountId(s,t.homeAccountId)||t.localAccountId&&!e.matchLocalAccountId(s,t.localAccountId)||t.username&&!e.matchUsername(s,t.username)||t.environment&&!e.matchEnvironment(s,t.environment)||t.realm&&!e.matchRealm(s,t.realm)||t.nativeAccountId&&!e.matchNativeAccountId(s,t.nativeAccountId)||o.push(s)}),o},n.prototype.isAccountKey=function(t,e,i){return!(t.split(fh.CACHE_KEY_SEPARATOR).length<3||e&&!t.toLowerCase().includes(e.toLowerCase())||i&&!t.toLowerCase().includes(i.toLowerCase()))},n.prototype.isCredentialKey=function(t){if(t.split(fh.CACHE_KEY_SEPARATOR).length<6||-1===(t=t.toLowerCase()).indexOf(sa.ID_TOKEN.toLowerCase())&&-1===t.indexOf(sa.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(sa.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(sa.REFRESH_TOKEN.toLowerCase()))return!1;if(-1<t.indexOf(sa.REFRESH_TOKEN.toLowerCase())){var i=""+sa.REFRESH_TOKEN+fh.CACHE_KEY_SEPARATOR+"1"+fh.CACHE_KEY_SEPARATOR;if(-1===t.indexOf((""+sa.REFRESH_TOKEN+fh.CACHE_KEY_SEPARATOR+this.clientId+fh.CACHE_KEY_SEPARATOR).toLowerCase())&&-1===t.indexOf(i.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0},n.prototype.credentialMatchesFilter=function(t,e){return!(e.clientId&&!this.matchClientId(t,e.clientId)||e.userAssertionHash&&!this.matchUserAssertionHash(t,e.userAssertionHash)||"string"==typeof e.homeAccountId&&!this.matchHomeAccountId(t,e.homeAccountId)||e.environment&&!this.matchEnvironment(t,e.environment)||e.realm&&!this.matchRealm(t,e.realm)||e.credentialType&&!this.matchCredentialType(t,e.credentialType)||e.familyId&&!this.matchFamilyId(t,e.familyId)||e.target&&!this.matchTarget(t,e.target)||(e.requestedClaimsHash||t.requestedClaimsHash)&&t.requestedClaimsHash!==e.requestedClaimsHash||t.credentialType===sa.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(e.tokenType&&!this.matchTokenType(t,e.tokenType)||e.tokenType===Cl.SSH&&e.keyId&&!this.matchKeyId(t,e.keyId)))},n.prototype.getAppMetadataFilteredBy=function(t){return this.getAppMetadataFilteredByInternal(t.environment,t.clientId)},n.prototype.getAppMetadataFilteredByInternal=function(t,e){var i=this,o=this.getKeys(),s={};return o.forEach(function(f){var v;!i.isAppMetadata(f)||!(v=i.getAppMetadata(f))||t&&!i.matchEnvironment(v,t)||e&&!i.matchClientId(v,e)||(s[f]=v)}),s},n.prototype.getAuthorityMetadataByAlias=function(t){var e=this,i=this.getAuthorityMetadataKeys(),o=null;return i.forEach(function(s){e.isAuthorityMetadata(s)&&-1!==s.indexOf(e.clientId)&&(s=e.getAuthorityMetadata(s))&&-1!==s.aliases.indexOf(t)&&(o=s)}),o},n.prototype.removeAllAccounts=function(){return Pa(this,void 0,void 0,function(){var t,e,i=this;return Ra(this,function(o){switch(o.label){case 0:return t=this.getAccountKeys(),e=[],t.forEach(function(s){e.push(i.removeAccount(s))}),[4,Promise.all(e)];case 1:return o.sent(),[2]}})})},n.prototype.removeAccount=function(t){return Pa(this,void 0,void 0,function(){var e;return Ra(this,function(i){switch(i.label){case 0:if(e=this.getAccount(t))return[4,this.removeAccountContext(e)];throw Ji.createNoAccountFoundError();case 1:return i.sent(),this.removeItem(t),[2]}})})},n.prototype.removeAccountContext=function(t){return Pa(this,void 0,void 0,function(){var e,i,o,s=this;return Ra(this,function(f){switch(f.label){case 0:return e=this.getTokenKeys(),i=t.generateAccountId(),o=[],e.idToken.forEach(function(v){0===v.indexOf(i)&&s.removeIdToken(v)}),e.accessToken.forEach(function(v){0===v.indexOf(i)&&o.push(s.removeAccessToken(v))}),e.refreshToken.forEach(function(v){0===v.indexOf(i)&&s.removeRefreshToken(v)}),[4,Promise.all(o)];case 1:return f.sent(),[2]}})})},n.prototype.removeAccessToken=function(t){return Pa(this,void 0,void 0,function(){var e;return Ra(this,function(i){switch(i.label){case 0:if(!(e=this.getAccessTokenCredential(t)))return[2];if(e.credentialType.toLowerCase()!==sa.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(e.tokenType!==Cl.POP)return[3,4];if(!(e=e.keyId))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(e)];case 2:return i.sent(),[3,4];case 3:throw i.sent(),Ji.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(t)]}})})},n.prototype.removeAppMetadata=function(){var t=this;return this.getKeys().forEach(function(e){t.isAppMetadata(e)&&t.removeItem(e)}),!0},n.prototype.readCacheRecord=function(v,f,i){var I=this.getTokenKeys(),o=this.readAccountFromCache(v),s=this.getIdToken(v,I);return f=this.getAccessToken(v,f,I),v=this.getRefreshToken(v,!1,I),I=this.readAppMetadataFromCache(i),o&&s&&(o.idTokenClaims=new mv(s.secret,this.cryptoImpl).claims),{account:o,idToken:s,accessToken:f,refreshToken:v,appMetadata:I}},n.prototype.readAccountFromCache=function(t){return t=lp.generateAccountCacheKey(t),this.getAccount(t)},n.prototype.getIdToken=function(o,s){var i=this;return this.commonLogger.trace("CacheManager - getIdToken called"),(s=(o=this.getIdTokensByFilter(o={homeAccountId:o.homeAccountId,environment:o.environment,credentialType:sa.ID_TOKEN,clientId:this.clientId,realm:o.tenantId},s)).length)<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):1<s?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),o.forEach(function(f){i.removeIdToken(f.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),o[0])},n.prototype.getIdTokensByFilter=function(t,o){var i=this,s=(o=o&&o.idToken||this.getTokenKeys().idToken,[]);return o.forEach(function(f){i.idTokenKeyMatchesFilter(f,vl({clientId:i.clientId},t))&&(f=i.getIdTokenCredential(f))&&i.credentialMatchesFilter(f,t)&&s.push(f)}),s},n.prototype.idTokenKeyMatchesFilter=function(t,e){return t=t.toLowerCase(),!(e.clientId&&-1===t.indexOf(e.clientId.toLowerCase())||e.homeAccountId&&-1===t.indexOf(e.homeAccountId.toLowerCase()))},n.prototype.removeIdToken=function(t){this.removeItem(t)},n.prototype.removeRefreshToken=function(t){this.removeItem(t)},n.prototype.getAccessToken=function(k,e,i){var o=this,s=(this.commonLogger.trace("CacheManager - getAccessToken called"),Vp.createSearchScopes(e.scopes)),f=e.authenticationScheme||Cl.BEARER,I=f&&f.toLowerCase()!==Cl.BEARER.toLowerCase()?sa.ACCESS_TOKEN_WITH_AUTH_SCHEME:sa.ACCESS_TOKEN,v={homeAccountId:k.homeAccountId,environment:k.environment,credentialType:I,clientId:this.clientId,realm:k.tenantId,target:s,tokenType:f,keyId:e.sshKid,requestedClaimsHash:e.requestedClaimsHash},D=(I=i&&i.accessToken||this.getTokenKeys().accessToken,[]);return I.forEach(function(X){o.accessTokenKeyMatchesFilter(X,v,!0)&&(X=o.getAccessTokenCredential(X))&&o.credentialMatchesFilter(X,v)&&D.push(X)}),(k=D.length)<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):1<k?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),D.forEach(function(X){o.removeAccessToken(X.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),D[0])},n.prototype.accessTokenKeyMatchesFilter=function(t,e,i){var o=t.toLowerCase();if(e.clientId&&-1===o.indexOf(e.clientId.toLowerCase())||e.homeAccountId&&-1===o.indexOf(e.homeAccountId.toLowerCase())||e.realm&&-1===o.indexOf(e.realm.toLowerCase())||e.requestedClaimsHash&&-1===o.indexOf(e.requestedClaimsHash.toLowerCase()))return!1;if(e.target)for(var s=e.target.asArray(),f=0;f<s.length;f++){if(i&&!o.includes(s[f].toLowerCase()))return!1;if(!i&&o.includes(s[f].toLowerCase()))return!0}return!0},n.prototype.getAccessTokensByFilter=function(t){var e=this,i=this.getTokenKeys(),o=[];return i.accessToken.forEach(function(s){e.accessTokenKeyMatchesFilter(s,t,!0)&&(s=e.getAccessTokenCredential(s))&&e.credentialMatchesFilter(s,t)&&o.push(s)}),o},n.prototype.getRefreshToken=function(v,s,i){var o=this,f=(this.commonLogger.trace("CacheManager - getRefreshToken called"),{homeAccountId:v.homeAccountId,environment:v.environment,credentialType:sa.REFRESH_TOKEN,clientId:this.clientId,familyId:s=s?"1":void 0}),I=(v=i&&i.refreshToken||this.getTokenKeys().refreshToken,[]);return v.forEach(function(D){o.refreshTokenKeyMatchesFilter(D,f)&&(D=o.getRefreshTokenCredential(D))&&o.credentialMatchesFilter(D,f)&&I.push(D)}),I.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),I[0])},n.prototype.refreshTokenKeyMatchesFilter=function(t,e){return t=t.toLowerCase(),!(e.familyId&&-1===t.indexOf(e.familyId.toLowerCase())||!e.familyId&&e.clientId&&-1===t.indexOf(e.clientId.toLowerCase())||e.homeAccountId&&-1===t.indexOf(e.homeAccountId.toLowerCase()))},n.prototype.readAppMetadataFromCache=function(i){var e=this.getAppMetadataFilteredBy(i={environment:i,clientId:this.clientId}),o=(i=Object.keys(e).map(function(s){return e[s]})).length;if(o<1)return null;if(1<o)throw Ji.createMultipleMatchingAppMetadataInCacheError();return i[0]},n.prototype.isAppMetadataFOCI=function(t){return!(!(t=this.readAppMetadataFromCache(t))||"1"!==t.familyId)},n.prototype.matchHomeAccountId=function(t,e){return!("string"!=typeof t.homeAccountId||e!==t.homeAccountId)},n.prototype.matchLocalAccountId=function(t,e){return!("string"!=typeof t.localAccountId||e!==t.localAccountId)},n.prototype.matchUsername=function(t,e){return!("string"!=typeof t.username||e.toLowerCase()!==t.username.toLowerCase())},n.prototype.matchUserAssertionHash=function(t,e){return!(!t.userAssertionHash||e!==t.userAssertionHash)},n.prototype.matchEnvironment=function(t,e){return!!((e=this.getAuthorityMetadataByAlias(e))&&-1<e.aliases.indexOf(t.environment))},n.prototype.matchCredentialType=function(t,e){return t.credentialType&&e.toLowerCase()===t.credentialType.toLowerCase()},n.prototype.matchClientId=function(t,e){return!(!t.clientId||e!==t.clientId)},n.prototype.matchFamilyId=function(t,e){return!(!t.familyId||e!==t.familyId)},n.prototype.matchRealm=function(t,e){return!(!t.realm||e!==t.realm)},n.prototype.matchNativeAccountId=function(t,e){return!(!t.nativeAccountId||e!==t.nativeAccountId)},n.prototype.matchTarget=function(t,e){return!(t.credentialType!==sa.ACCESS_TOKEN&&t.credentialType!==sa.ACCESS_TOKEN_WITH_AUTH_SCHEME||!t.target)&&Vp.fromString(t.target).containsScopeSet(e)},n.prototype.matchTokenType=function(t,e){return!(!t.tokenType||t.tokenType!==e)},n.prototype.matchKeyId=function(t,e){return!(!t.keyId||t.keyId!==e)},n.prototype.isAppMetadata=function(t){return-1!==t.indexOf(tz)},n.prototype.isAuthorityMetadata=function(t){return-1!==t.indexOf("authority-metadata")},n.prototype.generateAuthorityMetadataCacheKey=function(t){return"authority-metadata-"+this.clientId+"-"+t},n.toObject=function(t,e){for(var i in e)t[i]=e[i];return t},n}(),JK=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Zf(t,n),t.prototype.setAccount=function(){throw Po.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw Po.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw Po.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw Po.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw Po.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw Po.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw Po.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw Po.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw Po.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw Po.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw Po.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw Po.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setAuthorityMetadata=function(){throw Po.createUnexpectedError("Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadata=function(){throw Po.createUnexpectedError("Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadataKeys=function(){throw Po.createUnexpectedError("Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw Po.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw Po.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw Po.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw Po.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw Po.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getAccountKeys=function(){throw Po.createUnexpectedError("Storage interface - getAccountKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getTokenKeys=function(){throw Po.createUnexpectedError("Storage interface - getTokenKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(e){throw Po.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")})})},t.prototype.updateCredentialCacheKey=function(){throw Po.createUnexpectedError("Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.")},t}(Jf),mV={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},tY={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Lh.Info,correlationId:Zt.EMPTY_STRING},nY={claimsBasedCachingEnabled:!0},rY={sendGetRequestAsync:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")})})},sendPostRequestAsync:function(){return Pa(this,void 0,void 0,function(){return Ra(this,function(n){throw Po.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")})})}},iY={sku:Zt.SKU,version:rz,cpu:Zt.EMPTY_STRING,os:Zt.EMPTY_STRING},oY={clientSecret:Zt.EMPTY_STRING,clientAssertion:void 0},aY={azureCloudInstance:VD.None,tenant:""+Zt.DEFAULT_COMMON_TENANT},sY={application:{appName:"",appVersion:""}};function lY(n){return vl({clientCapabilities:[],azureCloudOptions:aY,skipAuthorityMetadataCache:!1},n)}var $g,ar,G6,iz,ET=function(n){function t(e,i,o){return(e=n.call(this,e,i,o)||this).name="ServerError",Object.setPrototypeOf(e,t.prototype),e}return Zf(t,n),t}(Po),q6=function(){function n(){}return n.generateThrottlingStorageKey=function(t){return YD.THROTTLING_PREFIX+"."+JSON.stringify(t)},n.preProcess=function(t,o){o=n.generateThrottlingStorageKey(o);var i,s=t.getThrottlingCache(o);if(s){if(!(s.throttleTime<Date.now()))throw new ET((null==(i=s.errorCodes)?void 0:i.join(" "))||Zt.EMPTY_STRING,s.errorMessage,s.subError);t.removeItem(o)}},n.postProcess=function(t,e,i){(n.checkResponseStatus(i)||n.checkResponseForRetryAfter(i))&&(i={throttleTime:n.calculateThrottleTime(parseInt(i.headers[jg.RETRY_AFTER])),error:i.body.error,errorCodes:i.body.error_codes,errorMessage:i.body.error_description,subError:i.body.suberror},t.setThrottlingCache(n.generateThrottlingStorageKey(e),i))},n.checkResponseStatus=function(t){return 429===t.status||500<=t.status&&t.status<600},n.checkResponseForRetryAfter=function(t){return!!t.headers&&t.headers.hasOwnProperty(jg.RETRY_AFTER)&&(t.status<200||300<=t.status)},n.calculateThrottleTime=function(e){e=e<=0?0:e;var i=Date.now()/1e3;return Math.floor(1e3*Math.min(i+(e||YD.DEFAULT_THROTTLE_TIME_SECONDS),i+YD.DEFAULT_MAX_THROTTLE_TIME_SECONDS))},n.removeThrottle=function(t,e,i,o){o=this.generateThrottlingStorageKey(e={clientId:e,authority:i.authority,scopes:i.scopes,homeAccountIdentifier:o,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid}),t.removeItem(o)},n}(),uY=function(){function n(t,e){this.networkClient=t,this.cacheManager=e}return n.prototype.sendPostRequest=function(t,e,i){return Pa(this,void 0,void 0,function(){var o,s;return Ra(this,function(f){switch(f.label){case 0:q6.preProcess(this.cacheManager,t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(e,i)];case 2:return o=f.sent(),[3,4];case 3:throw(s=f.sent())instanceof Po?s:Ji.createNetworkError(e,s);case 4:return q6.postProcess(this.cacheManager,t,o),[2,o]}})})},n}(),ST=(function(n){n.HOME_ACCOUNT_ID="home_account_id",n.UPN="UPN"}($g=$g||{}),function(){function n(){}return n.validateRedirectUri=function(t){if(Wi.isEmpty(t))throw uu.createRedirectUriEmptyError()},n.validatePrompt=function(t){var e,i=[];for(e in $p)i.push($p[e]);if(i.indexOf(t)<0)throw uu.createInvalidPromptError(t)},n.validateClaims=function(t){try{JSON.parse(t)}catch{throw uu.createInvalidClaimsRequestError()}},n.validateCodeChallengeParams=function(t,e){if(Wi.isEmpty(t)||Wi.isEmpty(e))throw uu.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(e)},n.validateCodeChallengeMethod=function(t){if([pV.PLAIN,pV.S256].indexOf(t)<0)throw uu.createInvalidCodeChallengeMethodError()},n.sanitizeEQParams=function(t,e){return t?(e.forEach(function(i,o){t[o]&&delete t[o]}),Object.fromEntries(Object.entries(t).filter(function(i){return""!==i[1]}))):{}},n}()),WD=function(){function n(){this.parameters=new Map}return n.prototype.addResponseTypeCode=function(){this.parameters.set(Ka.RESPONSE_TYPE,encodeURIComponent(Zt.CODE_RESPONSE_TYPE))},n.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(Ka.RESPONSE_TYPE,encodeURIComponent(Zt.TOKEN_RESPONSE_TYPE+" "+Zt.ID_TOKEN_RESPONSE_TYPE))},n.prototype.addResponseMode=function(t){this.parameters.set(Ka.RESPONSE_MODE,encodeURIComponent(t||U6.QUERY))},n.prototype.addNativeBroker=function(){this.parameters.set(Ka.NATIVE_BROKER,encodeURIComponent("1"))},n.prototype.addScopes=function(t,e){e=(e=void 0===e||e)?H6(t||[],GD):t||[],t=new Vp(e),this.parameters.set(Ka.SCOPE,encodeURIComponent(t.printScopes()))},n.prototype.addClientId=function(t){this.parameters.set(Ka.CLIENT_ID,encodeURIComponent(t))},n.prototype.addRedirectUri=function(t){ST.validateRedirectUri(t),this.parameters.set(Ka.REDIRECT_URI,encodeURIComponent(t))},n.prototype.addPostLogoutRedirectUri=function(t){ST.validateRedirectUri(t),this.parameters.set(Ka.POST_LOGOUT_URI,encodeURIComponent(t))},n.prototype.addIdTokenHint=function(t){this.parameters.set(Ka.ID_TOKEN_HINT,encodeURIComponent(t))},n.prototype.addDomainHint=function(t){this.parameters.set(jD.DOMAIN_HINT,encodeURIComponent(t))},n.prototype.addLoginHint=function(t){this.parameters.set(jD.LOGIN_HINT,encodeURIComponent(t))},n.prototype.addCcsUpn=function(t){this.parameters.set(jg.CCS_HEADER,encodeURIComponent("UPN:"+t))},n.prototype.addCcsOid=function(t){this.parameters.set(jg.CCS_HEADER,encodeURIComponent("Oid:"+t.uid+"@"+t.utid))},n.prototype.addSid=function(t){this.parameters.set(jD.SID,encodeURIComponent(t))},n.prototype.addClaims=function(t,e){t=this.addClientCapabilitiesToClaims(t,e),ST.validateClaims(t),this.parameters.set(Ka.CLAIMS,encodeURIComponent(t))},n.prototype.addCorrelationId=function(t){this.parameters.set(Ka.CLIENT_REQUEST_ID,encodeURIComponent(t))},n.prototype.addLibraryInfo=function(t){this.parameters.set(Ka.X_CLIENT_SKU,t.sku),this.parameters.set(Ka.X_CLIENT_VER,t.version),t.os&&this.parameters.set(Ka.X_CLIENT_OS,t.os),t.cpu&&this.parameters.set(Ka.X_CLIENT_CPU,t.cpu)},n.prototype.addApplicationTelemetry=function(t){null!=t&&t.appName&&this.parameters.set(Ka.X_APP_NAME,t.appName),null!=t&&t.appVersion&&this.parameters.set(Ka.X_APP_VER,t.appVersion)},n.prototype.addPrompt=function(t){ST.validatePrompt(t),this.parameters.set(""+Ka.PROMPT,encodeURIComponent(t))},n.prototype.addState=function(t){Wi.isEmpty(t)||this.parameters.set(Ka.STATE,encodeURIComponent(t))},n.prototype.addNonce=function(t){this.parameters.set(Ka.NONCE,encodeURIComponent(t))},n.prototype.addCodeChallengeParams=function(t,e){if(ST.validateCodeChallengeParams(t,e),!t||!e)throw uu.createInvalidCodeChallengeParamsError();this.parameters.set(Ka.CODE_CHALLENGE,encodeURIComponent(t)),this.parameters.set(Ka.CODE_CHALLENGE_METHOD,encodeURIComponent(e))},n.prototype.addAuthorizationCode=function(t){this.parameters.set(Ka.CODE,encodeURIComponent(t))},n.prototype.addDeviceCode=function(t){this.parameters.set(Ka.DEVICE_CODE,encodeURIComponent(t))},n.prototype.addRefreshToken=function(t){this.parameters.set(Ka.REFRESH_TOKEN,encodeURIComponent(t))},n.prototype.addCodeVerifier=function(t){this.parameters.set(Ka.CODE_VERIFIER,encodeURIComponent(t))},n.prototype.addClientSecret=function(t){this.parameters.set(Ka.CLIENT_SECRET,encodeURIComponent(t))},n.prototype.addClientAssertion=function(t){Wi.isEmpty(t)||this.parameters.set(Ka.CLIENT_ASSERTION,encodeURIComponent(t))},n.prototype.addClientAssertionType=function(t){Wi.isEmpty(t)||this.parameters.set(Ka.CLIENT_ASSERTION_TYPE,encodeURIComponent(t))},n.prototype.addOboAssertion=function(t){this.parameters.set(Ka.OBO_ASSERTION,encodeURIComponent(t))},n.prototype.addRequestTokenUse=function(t){this.parameters.set(Ka.REQUESTED_TOKEN_USE,encodeURIComponent(t))},n.prototype.addGrantType=function(t){this.parameters.set(Ka.GRANT_TYPE,encodeURIComponent(t))},n.prototype.addClientInfo=function(){this.parameters.set("client_info","1")},n.prototype.addExtraQueryParameters=function(t){var e=this,i=ST.sanitizeEQParams(t,this.parameters);Object.keys(i).forEach(function(o){e.parameters.set(o,t[o])})},n.prototype.addClientCapabilitiesToClaims=function(t,e){var i;if(t)try{i=JSON.parse(t)}catch{throw uu.createInvalidClaimsRequestError()}else i={};return e&&0<e.length&&(i.hasOwnProperty(qO.ACCESS_TOKEN)||(i[qO.ACCESS_TOKEN]={}),i[qO.ACCESS_TOKEN][qO.XMS_CC]={values:e}),JSON.stringify(i)},n.prototype.addUsername=function(t){this.parameters.set(z6.username,encodeURIComponent(t))},n.prototype.addPassword=function(t){this.parameters.set(z6.password,encodeURIComponent(t))},n.prototype.addPopToken=function(t){Wi.isEmpty(t)||(this.parameters.set(Ka.TOKEN_TYPE,Cl.POP),this.parameters.set(Ka.REQ_CNF,encodeURIComponent(t)))},n.prototype.addSshJwk=function(t){Wi.isEmpty(t)||(this.parameters.set(Ka.TOKEN_TYPE,Cl.SSH),this.parameters.set(Ka.REQ_CNF,encodeURIComponent(t)))},n.prototype.addServerTelemetry=function(t){this.parameters.set(Ka.X_CLIENT_CURR_TELEM,t.generateCurrentRequestHeaderValue()),this.parameters.set(Ka.X_CLIENT_LAST_TELEM,t.generateLastRequestHeaderValue())},n.prototype.addThrottling=function(){this.parameters.set(Ka.X_MS_LIB_CAPABILITY,YD.X_MS_LIB_CAPABILITY_VALUE)},n.prototype.addLogoutHint=function(t){this.parameters.set(Ka.LOGOUT_HINT,encodeURIComponent(t))},n.prototype.createQueryString=function(){var t=new Array;return this.parameters.forEach(function(e,i){t.push(i+"="+e)}),t.join("&")},n}(),oz=function(){function n(t,e){this.config=function cY(fe){var t=fe.authOptions,e=fe.systemOptions,Se=fe.loggerOptions,i=fe.cacheOptions,o=fe.storageInterface,s=fe.networkInterface,f=fe.cryptoInterface,v=fe.clientCredentials,I=fe.libraryInfo,D=fe.telemetry,k=fe.serverTelemetryManager,X=fe.persistencePlugin;return fe=fe.serializableCache,Se=vl(vl({},tY),Se),{authOptions:lY(t),systemOptions:vl(vl({},mV),e),loggerOptions:Se,cacheOptions:vl(vl({},nY),i),storageInterface:o||new JK(t.clientId,$6,new nz(Se)),networkInterface:s||rY,cryptoInterface:f||$6,clientCredentials:v||oY,libraryInfo:vl(vl({},iY),I),telemetry:vl(vl({},sY),D),serverTelemetryManager:k||null,persistencePlugin:X||null,serializableCache:fe||null}}(t),this.logger=new nz(this.config.loggerOptions,gV,rz),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new uY(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=e}return n.prototype.createTokenRequestHeaders=function(t){var e={};if(e[jg.CONTENT_TYPE]=Zt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case $g.HOME_ACCOUNT_ID:try{var i=YO(t.credential);e[jg.CCS_HEADER]="Oid:"+i.uid+"@"+i.utid}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case $g.UPN:e[jg.CCS_HEADER]="UPN: "+t.credential}return e},n.prototype.executePostToTokenEndpoint=function(t,e,i,o){return Pa(this,void 0,void 0,function(){var s;return Ra(this,function(f){switch(f.label){case 0:return[4,this.networkManager.sendPostRequest(o,t,{body:e,headers:i})];case 1:return s=f.sent(),this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,s]}})})},n.prototype.updateAuthority=function(t){if(!t.discoveryComplete())throw Ji.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=t},n.prototype.createTokenQueryParameters=function(t){var e=new WD;return t.tokenQueryParameters&&e.addExtraQueryParameters(t.tokenQueryParameters),e.createQueryString()},n}(),az=function(){function n(){}return n.prototype.generateAccountId=function(){return n.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},n.prototype.generateCredentialId=function(){return n.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},n.prototype.generateTarget=function(){return n.generateTargetForCacheKey(this.target)},n.prototype.generateCredentialKey=function(){return n.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},n.prototype.generateType=function(){switch(this.credentialType){case sa.ID_TOKEN:return v1.ID_TOKEN;case sa.ACCESS_TOKEN:case sa.ACCESS_TOKEN_WITH_AUTH_SCHEME:return v1.ACCESS_TOKEN;case sa.REFRESH_TOKEN:return v1.REFRESH_TOKEN;default:throw Ji.createUnexpectedCredentialTypeError()}},n.generateCredentialCacheKey=function(t,e,i,o,s,f,v,I,D){return[this.generateAccountIdForCacheKey(t,e),this.generateCredentialIdForCacheKey(i,o,s,v),this.generateTargetForCacheKey(f),this.generateClaimsHashForCacheKey(D),this.generateSchemeForCacheKey(I)].join(fh.CACHE_KEY_SEPARATOR).toLowerCase()},n.generateAccountIdForCacheKey=function(t,e){return[t,e].join(fh.CACHE_KEY_SEPARATOR).toLowerCase()},n.generateCredentialIdForCacheKey=function(t,e,i,o){return[t,t===sa.REFRESH_TOKEN&&o||e,i||Zt.EMPTY_STRING].join(fh.CACHE_KEY_SEPARATOR).toLowerCase()},n.generateTargetForCacheKey=function(t){return(t||Zt.EMPTY_STRING).toLowerCase()},n.generateClaimsHashForCacheKey=function(t){return(t||Zt.EMPTY_STRING).toLowerCase()},n.generateSchemeForCacheKey=function(t){return t&&t.toLowerCase()!==Cl.BEARER.toLowerCase()?t.toLowerCase():Zt.EMPTY_STRING},n}(),wT=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Zf(t,n),t.createIdTokenEntity=function(e,i,o,s,f){var v=new t;return v.credentialType=sa.ID_TOKEN,v.homeAccountId=e,v.environment=i,v.clientId=s,v.secret=o,v.realm=f,v},t.isIdTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===sa.ID_TOKEN},t}(az),Dm=function(){function n(){}return n.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)},n.isTokenExpired=function(t,e){return(Number(t)||0)<n.nowSeconds()+e},n.wasClockTurnedBack=function(t){return Number(t)>n.nowSeconds()},n.delay=function(t,e){return new Promise(function(i){return setTimeout(function(){return i(e)},t)})},n}(),TT=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Zf(t,n),t.createAccessTokenEntity=function(Yn,i,o,s,f,v,I,D,k,X,fe,Se,Ve,Je,lt){var mt,_n=new t;if(_n.homeAccountId=Yn,_n.credentialType=sa.ACCESS_TOKEN,_n.secret=o,Yn=Dm.nowSeconds(),_n.cachedAt=Yn.toString(),_n.expiresOn=I.toString(),_n.extendedExpiresOn=D.toString(),X&&(_n.refreshOn=X.toString()),_n.environment=i,_n.clientId=s,_n.realm=f,_n.target=v,_n.userAssertionHash=Se,_n.tokenType=Wi.isEmpty(fe)?Cl.BEARER:fe,Je&&(_n.requestedClaims=Je,_n.requestedClaimsHash=lt),(null==(Yn=_n.tokenType)?void 0:Yn.toLowerCase())!==Cl.BEARER.toLowerCase())switch(_n.credentialType=sa.ACCESS_TOKEN_WITH_AUTH_SCHEME,_n.tokenType){case Cl.POP:var sr=mv.extractTokenClaims(o,k);if(null==(mt=sr?.cnf)||!mt.kid)throw Ji.createTokenClaimsRequiredError();_n.keyId=sr.cnf.kid;break;case Cl.SSH:_n.keyId=Ve}return _n},t.isAccessTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.hasOwnProperty("target")&&(e.credentialType===sa.ACCESS_TOKEN||e.credentialType===sa.ACCESS_TOKEN_WITH_AUTH_SCHEME)},t}(az),WO=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Zf(t,n),t.createRefreshTokenEntity=function(e,i,o,s,f,v){var I=new t;return I.clientId=s,I.credentialType=sa.REFRESH_TOKEN,I.environment=i,I.homeAccountId=e,I.secret=o,I.userAssertionHash=v,f&&(I.familyId=f),I},t.isRefreshTokenEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===sa.REFRESH_TOKEN},t}(az),_V=["interaction_required","consent_required","login_required"],dY=["message_only","additional_action","basic_action","user_password_expired","consent_required"],QO_noTokensFoundError_code="no_tokens_found",QO_noTokensFoundError_desc="No refresh token found in the cache. Please sign-in.",QO_native_account_unavailable_code="native_account_unavailable",QO_native_account_unavailable_desc="The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",km=function(n){function t(e,i,o,s,f,v,I){return e=n.call(this,e,i,o)||this,Object.setPrototypeOf(e,t.prototype),e.timestamp=s||Zt.EMPTY_STRING,e.traceId=f||Zt.EMPTY_STRING,e.correlationId=v||Zt.EMPTY_STRING,e.claims=I||Zt.EMPTY_STRING,e.name="InteractionRequiredAuthError",e}return Zf(t,n),t.isInteractionRequiredError=function(s,i,f){s=!!s&&-1<_V.indexOf(s),f=!!f&&-1<dY.indexOf(f);var v=!!i&&_V.some(function(I){return-1<i.indexOf(I)});return s||v||f},t.createNoTokensFoundError=function(){return new t(QO_noTokensFoundError_code,QO_noTokensFoundError_desc)},t.createNativeAccountUnavailableError=function(){return new t(QO_native_account_unavailable_code,QO_native_account_unavailable_desc)},t}(Po),K6=function(n,t,e,i,o){this.account=n||null,this.idToken=t||null,this.accessToken=e||null,this.refreshToken=i||null,this.appMetadata=o||null},C1=function(){function n(){}return n.setRequestState=function(t,e,i){return t=n.generateLibraryState(t,i),Wi.isEmpty(e)?t:""+t+Zt.RESOURCE_DELIM+e},n.generateLibraryState=function(t,e){var i;if(t)return i={id:t.createNewGuid()},e&&(i.meta=e),e=JSON.stringify(i),t.base64Encode(e);throw Ji.createNoCryptoObjectError("generateLibraryState")},n.parseRequestState=function(t,e){if(!t)throw Ji.createNoCryptoObjectError("parseRequestState");if(Wi.isEmpty(e))throw Ji.createInvalidStateError(e,"Null, undefined or empty state");try{var i=e.split(Zt.RESOURCE_DELIM),o=i[0],s=1<i.length?i.slice(1).join(Zt.RESOURCE_DELIM):Zt.EMPTY_STRING,f=t.base64Decode(o),v=JSON.parse(f);return{userRequestState:Wi.isEmpty(s)?Zt.EMPTY_STRING:s,libraryState:v}}catch(I){throw Ji.createInvalidStateError(e,I)}},n}(),bc=function(){function n(t){if(this._urlString=t,Wi.isEmpty(this._urlString))throw uu.createUrlEmptyError();Wi.isEmpty(this.getHash())&&(this._urlString=n.canonicalizeUri(t))}return Object.defineProperty(n.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),n.canonicalizeUri=function(t){var e;return t&&(e=t.toLowerCase(),Wi.endsWith(e,"?")?e=e.slice(0,-1):Wi.endsWith(e,"?/")&&(e=e.slice(0,-2)),Wi.endsWith(e,"/")||(e+="/"),e)},n.prototype.validateAsUri=function(){var t;try{t=this.getUrlComponents()}catch(e){throw uu.createUrlParseError(e)}if(!t.HostNameAndPort||!t.PathSegments)throw uu.createUrlParseError("Given url string: "+this.urlString);if(!t.Protocol||"https:"!==t.Protocol.toLowerCase())throw uu.createInsecureAuthorityUriError(this.urlString)},n.appendQueryString=function(t,e){return Wi.isEmpty(e)?t:t.indexOf("?")<0?t+"?"+e:t+"&"+e},n.removeHashFromUrl=function(t){return n.canonicalizeUri(t.split("#")[0])},n.prototype.replaceTenantPath=function(t){var e=this.getUrlComponents(),i=e.PathSegments;return!t||0===i.length||i[0]!==bT.COMMON&&i[0]!==bT.ORGANIZATIONS||(i[0]=t),n.constructAuthorityUriFromObject(e)},n.prototype.getHash=function(){return n.parseHash(this.urlString)},n.prototype.getUrlComponents=function(){var t,e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");if(e=this.urlString.match(e))return t=(t=(e={Protocol:e[1],HostNameAndPort:e[4],AbsolutePath:e[5],QueryString:e[7]}).AbsolutePath.split("/")).filter(function(i){return i&&0<i.length}),e.PathSegments=t,!Wi.isEmpty(e.QueryString)&&e.QueryString.endsWith("/")&&(e.QueryString=e.QueryString.substring(0,e.QueryString.length-1)),e;throw uu.createUrlParseError("Given url string: "+this.urlString)},n.getDomainFromUrl=function(t){var e=RegExp("^([^:/?#]+://)?([^/?#]*)");if(e=t.match(e))return e[2];throw uu.createUrlParseError("Given url string: "+t)},n.getAbsoluteUrl=function(t,e){return t[0]===Zt.FORWARD_SLASH?(e=new n(e).getUrlComponents()).Protocol+"//"+e.HostNameAndPort+t:t},n.parseHash=function(t){var e=t.indexOf("#"),i=t.indexOf("#/");return-1<i?t.substring(i+2):-1<e?t.substring(e+1):Zt.EMPTY_STRING},n.parseQueryString=function(t){var e=t.indexOf("?"),i=t.indexOf("/?");return-1<i?t.substring(i+2):-1<e?t.substring(e+1):Zt.EMPTY_STRING},n.constructAuthorityUriFromObject=function(t){return new n(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},n.getDeserializedHash=function(i){if(Wi.isEmpty(i))return{};var e=n.parseHash(i);if(i=Wi.queryStringToObject(Wi.isEmpty(e)?i:e))return i;throw Ji.createHashNotDeserializedError(JSON.stringify(i))},n.getDeserializedQueryString=function(i){if(Wi.isEmpty(i))return{};var e=n.parseQueryString(i);if(i=Wi.queryStringToObject(Wi.isEmpty(e)?i:e))return i;throw Ji.createHashNotDeserializedError(JSON.stringify(i))},n.hashContainsKnownProperties=function(t){return!(Wi.isEmpty(t)||t.indexOf("=")<0||!((t=n.getDeserializedHash(t)).code||t.error_description||t.error||t.state))},n}(),hY=(function(n){n.AcquireTokenByCode="acquireTokenByCode",n.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",n.AcquireTokenSilent="acquireTokenSilent",n.AcquireTokenSilentAsync="acquireTokenSilentAsync",n.AcquireTokenPopup="acquireTokenPopup",n.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",n.CryptoOptsSignJwt="cryptoOptsSignJwt",n.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",n.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",n.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",n.SsoSilent="ssoSilent",n.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",n.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",n.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken",n.BaseClientCreateTokenRequestHeaders="baseClientCreateTokenRequestHeaders",n.BrokerHandhshake="brokerHandshake",n.AcquireTokenByRefreshTokenInBroker="acquireTokenByRefreshTokenInBroker",n.AcquireTokenByBroker="acquireTokenByBroker",n.RefreshTokenClientExecuteTokenRequest="refreshTokenClientExecuteTokenRequest",n.RefreshTokenClientAcquireToken="refreshTokenClientAcquireToken",n.RefreshTokenClientAcquireTokenWithCachedRefreshToken="refreshTokenClientAcquireTokenWithCachedRefreshToken",n.RefreshTokenClientAcquireTokenByRefreshToken="refreshTokenClientAcquireTokenByRefreshToken",n.RefreshTokenClientCreateTokenRequestBody="refreshTokenClientCreateTokenRequestBody",n.AcquireTokenFromCache="acquireTokenFromCache",n.AcquireTokenBySilentIframe="acquireTokenBySilentIframe",n.InitializeBaseRequest="initializeBaseRequest",n.InitializeSilentRequest="initializeSilentRequest",n.InitializeClientApplication="initializeClientApplication",n.SilentIframeClientTokenHelper="silentIframeClientTokenHelper",n.SilentHandlerInitiateAuthRequest="silentHandlerInitiateAuthRequest",n.SilentHandlerMonitorIframeForHash="silentHandlerMonitorIframeForHash",n.SilentHandlerLoadFrame="silentHandlerLoadFrame",n.StandardInteractionClientCreateAuthCodeClient="standardInteractionClientCreateAuthCodeClient",n.StandardInteractionClientGetClientConfiguration="standardInteractionClientGetClientConfiguration",n.StandardInteractionClientInitializeAuthorizationRequest="standardInteractionClientInitializeAuthorizationRequest",n.StandardInteractionClientInitializeAuthorizationCodeRequest="standardInteractionClientInitializeAuthorizationCodeRequest",n.GetAuthCodeUrl="getAuthCodeUrl",n.HandleCodeResponseFromServer="handleCodeResponseFromServer",n.HandleCodeResponseFromHash="handleCodeResponseFromHash",n.UpdateTokenEndpointAuthority="updateTokenEndpointAuthority",n.AuthClientAcquireToken="authClientAcquireToken",n.AuthClientExecuteTokenRequest="authClientExecuteTokenRequest",n.AuthClientCreateTokenRequestBody="authClientCreateTokenRequestBody",n.AuthClientCreateQueryString="authClientCreateQueryString",n.PopTokenGenerateCnf="popTokenGenerateCnf",n.PopTokenGenerateKid="popTokenGenerateKid",n.HandleServerTokenResponse="handleServerTokenResponse",n.AuthorityFactoryCreateDiscoveredInstance="authorityFactoryCreateDiscoveredInstance",n.AuthorityResolveEndpointsAsync="authorityResolveEndpointsAsync",n.AuthorityGetCloudDiscoveryMetadataFromNetwork="authorityGetCloudDiscoveryMetadataFromNetwork",n.AuthorityUpdateCloudDiscoveryMetadata="authorityUpdateCloudDiscoveryMetadata",n.AuthorityGetEndpointMetadataFromNetwork="authorityGetEndpointMetadataFromNetwork",n.AuthorityUpdateEndpointMetadata="authorityUpdateEndpointMetadata",n.AuthorityUpdateMetadataWithRegionalInformation="authorityUpdateMetadataWithRegionalInformation",n.RegionDiscoveryDetectRegion="regionDiscoveryDetectRegion",n.RegionDiscoveryGetRegionFromIMDS="regionDiscoveryGetRegionFromIMDS",n.RegionDiscoveryGetCurrentVersion="regionDiscoveryGetCurrentVersion",n.AcquireTokenByCodeAsync="acquireTokenByCodeAsync",n.GetEndpointMetadataFromNetwork="getEndpointMetadataFromNetwork",n.GetCloudDiscoveryMetadataFromNetworkMeasurement="getCloudDiscoveryMetadataFromNetworkMeasurement",n.HandleRedirectPromiseMeasurement="handleRedirectPromiseMeasurement",n.UpdateCloudDiscoveryMetadataMeasurement="updateCloudDiscoveryMetadataMeasurement",n.UsernamePasswordClientAcquireToken="usernamePasswordClientAcquireToken",n.NativeMessageHandlerHandshake="nativeMessageHandlerHandshake",n.ClearTokensAndKeysWithClaims="clearTokensAndKeysWithClaims"}(ar=ar||{}),function(n){n[n.NotStarted=0]="NotStarted",n[n.InProgress=1]="InProgress",n[n.Completed=2]="Completed"}(G6=G6||{}),new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status"])),XO=(function(n){n.SW="sw",n.UHW="uhw"}(iz=iz||{}),function(){function n(t,e){this.cryptoUtils=t,this.performanceClient=e}return n.prototype.generateCnf=function(t){var e;return Pa(this,void 0,void 0,function(){var i,o;return Ra(this,function(s){switch(s.label){case 0:return null!=(e=this.performanceClient)&&e.addQueueMeasurement(ar.PopTokenGenerateCnf,t.correlationId),null!=(e=this.performanceClient)&&e.setPreQueueTime(ar.PopTokenGenerateKid,t.correlationId),[4,this.generateKid(t)];case 1:return o=s.sent(),i=this.cryptoUtils.base64Encode(JSON.stringify(o)),o={kid:o.kid,reqCnfString:i},[4,this.cryptoUtils.hashString(i)];case 2:return[2,(o.reqCnfHash=s.sent(),o)]}})})},n.prototype.generateKid=function(t){var e;return Pa(this,void 0,void 0,function(){return Ra(this,function(i){switch(i.label){case 0:return null!=(e=this.performanceClient)&&e.addQueueMeasurement(ar.PopTokenGenerateKid,t.correlationId),[4,this.cryptoUtils.getPublicKeyThumbprint(t)];case 1:return[2,{kid:i.sent(),xms_ksl:iz.SW}]}})})},n.prototype.signPopToken=function(t,e,i){return Pa(this,void 0,void 0,function(){return Ra(this,function(o){return[2,this.signPayload(t,e,i)]})})},n.prototype.signPayload=function(t,e,i,o){return Pa(this,void 0,void 0,function(){var s,f,v,I;return Ra(this,function(D){switch(D.label){case 0:return s=i.resourceRequestMethod,f=i.shrClaims,v=i.shrNonce,I=(I=i.resourceRequestUri)?new bc(I):void 0,I=I?.getUrlComponents(),[4,this.cryptoUtils.signJwt(vl({at:t,ts:Dm.nowSeconds(),m:s?.toUpperCase(),u:I?.HostNameAndPort,nonce:v||this.cryptoUtils.createNewGuid(),p:I?.AbsolutePath,q:null!=I&&I.QueryString?[[],I.QueryString]:void 0,client_claims:f||void 0},o),e,i.correlationId)];case 1:return[2,D.sent()]}})})},n}()),sz=function(){function n(){}return n.prototype.generateAppMetadataKey=function(){return n.generateAppMetadataCacheKey(this.environment,this.clientId)},n.generateAppMetadataCacheKey=function(t,e){return[tz,t,e].join(fh.CACHE_KEY_SEPARATOR).toLowerCase()},n.createAppMetadataEntity=function(t,e,i){var o=new n;return o.clientId=t,o.environment=e,i&&(o.familyId=i),o},n.isAppMetadataEntity=function(t,e){return!!e&&0===t.indexOf(tz)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")},n}(),pY=function(){function n(t,e){this.cache=t,this.hasChanged=e}return Object.defineProperty(n.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),n}(),Y6=function(){function n(t,e,i,o,s,f,v){this.clientId=t,this.cacheStorage=e,this.cryptoObj=i,this.logger=o,this.serializableCache=s,this.persistencePlugin=f,this.performanceClient=v}return n.prototype.validateServerAuthorizationCodeResponse=function(t,e,i){if(!t.state||!e)throw Ji.createStateNotFoundError(t.state?"Cached State":"Server State");if(decodeURIComponent(t.state)!==decodeURIComponent(e))throw Ji.createStateMismatchError();if(t.error||t.error_description||t.suberror)throw km.isInteractionRequiredError(t.error,t.error_description,t.suberror)?new km(t.error||Zt.EMPTY_STRING,t.error_description,t.suberror,t.timestamp||Zt.EMPTY_STRING,t.trace_id||Zt.EMPTY_STRING,t.correlation_id||Zt.EMPTY_STRING,t.claims||Zt.EMPTY_STRING):new ET(t.error||Zt.EMPTY_STRING,t.error_description,t.suberror);t.client_info&&V6(t.client_info,i)},n.prototype.validateTokenResponse=function(t){if(t.error||t.error_description||t.suberror){if(km.isInteractionRequiredError(t.error,t.error_description,t.suberror))throw new km(t.error,t.error_description,t.suberror,t.timestamp||Zt.EMPTY_STRING,t.trace_id||Zt.EMPTY_STRING,t.correlation_id||Zt.EMPTY_STRING,t.claims||Zt.EMPTY_STRING);throw new ET(t.error,t.error_codes+" - ["+t.timestamp+"]: "+t.error_description+" - Correlation ID: "+t.correlation_id+" - Trace ID: "+t.trace_id,t.suberror)}},n.prototype.handleServerTokenResponse=function(t,e,i,o,s,f,v,I,D){var k;return Pa(this,void 0,void 0,function(){var X,fe,Se,Ve,Je;return Ra(this,function(lt){switch(lt.label){case 0:if(null!=(k=this.performanceClient)&&k.addQueueMeasurement(ar.HandleServerTokenResponse,t.correlation_id),t.id_token){if(X=new mv(t.id_token||Zt.EMPTY_STRING,this.cryptoObj),s&&!Wi.isEmpty(s.nonce)&&X.claims.nonce!==s.nonce)throw Ji.createNonceMismatchError();if(o.maxAge||0===o.maxAge){if(!(Se=X.claims.auth_time))throw Ji.createAuthTimeNotFoundError();mv.checkMaxAge(Se,o.maxAge)}}this.homeAccountIdentifier=lp.generateHomeAccountId(t.client_info||Zt.EMPTY_STRING,e.authorityType,this.logger,this.cryptoObj,X),s&&s.state&&(fe=C1.parseRequestState(this.cryptoObj,s.state)),t.key_id=t.key_id||o.sshKid||void 0,Se=this.generateCacheRecord(t,e,i,o,X,f,s),lt.label=1;case 1:return lt.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),Ve=new pY(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(Ve)]):[3,3];case 2:lt.sent(),lt.label=3;case 3:return!v||I||!Se.account||(Je=Se.account.generateAccountKey(),this.cacheStorage.getAccount(Je))?[4,this.cacheStorage.saveCacheRecord(Se)]:(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,n.generateAuthenticationResult(this.cryptoObj,e,Se,!1,o,X,fe,void 0,D)]);case 4:return lt.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&Ve?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(Ve)]):[3,7];case 6:lt.sent(),lt.label=7;case 7:return[7];case 8:return[2,n.generateAuthenticationResult(this.cryptoObj,e,Se,!1,o,X,fe,t,D)]}})})},n.prototype.generateCacheRecord=function(t,e,i,o,lt,f,Ve){var I,D,k=e.getPreferredCache();if(Wi.isEmpty(k))throw Ji.createInvalidCacheEnvironmentError();!Wi.isEmpty(t.id_token)&&lt&&(I=wT.createIdTokenEntity(this.homeAccountIdentifier,k,t.id_token||Zt.EMPTY_STRING,this.clientId,lt.claims.tid||Zt.EMPTY_STRING),D=this.generateAccountEntity(t,lt,e,Ve)),Ve=null;var X,fe,Se,Je=(Wi.isEmpty(t.access_token)||(X=t.scope?Vp.fromString(t.scope):new Vp(o.scopes||[]),Se=(fe=i+(("string"==typeof t.expires_in?parseInt(t.expires_in,10):t.expires_in)||0))+(("string"==typeof t.ext_expires_in?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0),i=(Je=("string"==typeof t.refresh_in?parseInt(t.refresh_in,10):t.refresh_in)||void 0)&&0<Je?i+Je:void 0,Ve=TT.createAccessTokenEntity(this.homeAccountIdentifier,k,t.access_token||Zt.EMPTY_STRING,this.clientId,lt?lt.claims.tid||Zt.EMPTY_STRING:e.tenant,X.printScopes(),fe,Se,this.cryptoObj,i,t.token_type,f,t.key_id,o.claims,o.requestedClaimsHash)),null);return Wi.isEmpty(t.refresh_token)||(Je=WO.createRefreshTokenEntity(this.homeAccountIdentifier,k,t.refresh_token||Zt.EMPTY_STRING,this.clientId,t.foci,f)),lt=null,Wi.isEmpty(t.foci)||(lt=sz.createAppMetadataEntity(this.clientId,k,t.foci)),new K6(D,I,Ve,Je,lt)},n.prototype.generateAccountEntity=function(t,e,i,v){var f=v?v.cloud_graph_host_name:Zt.EMPTY_STRING;if(v=v?v.msgraph_host:Zt.EMPTY_STRING,i.authorityType===vf.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),lp.createGenericAccount(this.homeAccountIdentifier,e,i,f,v);if(Wi.isEmpty(t.client_info)&&"AAD"===i.protocolMode)throw Ji.createClientInfoEmptyError();return t.client_info?lp.createAccount(t.client_info,this.homeAccountIdentifier,e,i,f,v):lp.createGenericAccount(this.homeAccountIdentifier,e,i,f,v)},n.generateAuthenticationResult=function(t,e,i,o,s,f,v,I,D){var k;return Pa(this,void 0,void 0,function(){var X,fe,Se,Ve,Je,lt,mt,_n;return Ra(this,function(Yn){switch(Yn.label){case 0:if(X=Zt.EMPTY_STRING,fe=[],Se=null,Je=Zt.EMPTY_STRING,!i.accessToken)return[3,4];if(i.accessToken.tokenType!==Cl.POP)return[3,2];if(mt=new XO(t),_n=(lt=i.accessToken).secret,lt=lt.keyId)return[4,mt.signPopToken(_n,lt,s)];throw Ji.createKeyIdMissingError();case 1:return X=Yn.sent(),[3,3];case 2:X=i.accessToken.secret,Yn.label=3;case 3:fe=Vp.fromString(i.accessToken.target).asArray(),Se=new Date(1e3*Number(i.accessToken.expiresOn)),Ve=new Date(1e3*Number(i.accessToken.extendedExpiresOn)),Yn.label=4;case 4:return i.appMetadata&&(Je="1"===i.appMetadata.familyId?"1":Zt.EMPTY_STRING),mt=f?.claims.oid||f?.claims.sub||Zt.EMPTY_STRING,_n=f?.claims.tid||Zt.EMPTY_STRING,null!=I&&I.spa_accountid&&i.account&&(i.account.nativeAccountId=I?.spa_accountid),[2,{authority:e.canonicalAuthority,uniqueId:mt,tenantId:_n,scopes:fe,account:i.account?i.account.getAccountInfo():null,idToken:f?f.rawToken:Zt.EMPTY_STRING,idTokenClaims:f?f.claims:{},accessToken:X,fromCache:o,expiresOn:Se,correlationId:s.correlationId,requestId:D||Zt.EMPTY_STRING,extExpiresOn:Ve,familyId:Je,tokenType:(null==(k=i.accessToken)?void 0:k.tokenType)||Zt.EMPTY_STRING,state:v?v.userRequestState:Zt.EMPTY_STRING,cloudGraphHostName:(null==(k=i.account)?void 0:k.cloudGraphHostName)||Zt.EMPTY_STRING,msGraphHost:(null==(k=i.account)?void 0:k.msGraphHost)||Zt.EMPTY_STRING,code:I?.spa_code,fromNativeBroker:!1}]}})})},n}(),yV=function(n){function t(e,i){return(e=n.call(this,e,i)||this).includeRedirectUri=!0,e}return Zf(t,n),t.prototype.getAuthCodeUrl=function(e){var i;return Pa(this,void 0,void 0,function(){var o;return Ra(this,function(s){switch(s.label){case 0:return null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.GetAuthCodeUrl,e.correlationId),null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.AuthClientCreateQueryString,e.correlationId),[4,this.createAuthCodeUrlQueryString(e)];case 1:return o=s.sent(),[2,bc.appendQueryString(this.authority.authorizationEndpoint,o)]}})})},t.prototype.acquireToken=function(e,i){var o,s;return Pa(this,void 0,void 0,function(){var f,v,I,D,k,X=this;return Ra(this,function(fe){switch(fe.label){case 0:if(e&&e.code)return null!=(o=this.performanceClient)&&o.addQueueMeasurement(ar.AuthClientAcquireToken,e.correlationId),f=null==(o=this.performanceClient)?void 0:o.startMeasurement("AuthCodeClientAcquireToken",e.correlationId),this.logger.info("in acquireToken call in auth-code client"),v=Dm.nowSeconds(),null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.AuthClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(this.authority,e)];throw Ji.createTokenRequestCannotBeMadeError();case 1:return I=fe.sent(),D=null==(o=I.headers)?void 0:o[jg.X_MS_REQUEST_ID],(k=null==(s=I.headers)?void 0:s[jg.X_MS_HTTP_VERSION])&&null!=f&&f.addStaticFields({httpVerAuthority:k}),(k=new Y6(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient)).validateTokenResponse(I.body),null!=(s=this.performanceClient)&&s.setPreQueueTime(ar.HandleServerTokenResponse,e.correlationId),[2,k.handleServerTokenResponse(I.body,this.authority,v,e,i,void 0,void 0,void 0,D).then(function(Se){return f?.endMeasurement({success:!0}),Se}).catch(function(Se){throw X.logger.verbose("Error in fetching token in ACC",e.correlationId),f?.endMeasurement({errorCode:Se.errorCode,subErrorCode:Se.subError,success:!1}),Se})]}})})},t.prototype.handleFragmentResponse=function(s,i){var o=new Y6(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null);if(s=new bc(s),s=bc.getDeserializedHash(s.getHash()),o.validateServerAuthorizationCodeResponse(s,i,this.cryptoUtils),s.code)return vl(vl({},s),{code:s.code});throw Ji.createNoAuthCodeInServerResponseError()},t.prototype.getLogoutUri=function(e){if(e)return e=this.createLogoutUrlQueryString(e),bc.appendQueryString(this.authority.endSessionEndpoint,e);throw uu.createEmptyLogoutRequestError()},t.prototype.executeTokenRequest=function(e,i){var o;return Pa(this,void 0,void 0,function(){var s,f,v,I;return Ra(this,function(k){switch(k.label){case 0:return null!=(o=this.performanceClient)&&o.addQueueMeasurement(ar.AuthClientExecuteTokenRequest,i.correlationId),null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.AuthClientCreateTokenRequestBody,i.correlationId),s=this.createTokenQueryParameters(i),s=bc.appendQueryString(e.tokenEndpoint,s),[4,this.createTokenRequestBody(i)];case 1:if(f=k.sent(),I=void 0,i.clientInfo)try{v=V6(i.clientInfo,this.cryptoUtils),I={credential:""+v.uid+fh.CLIENT_INFO_SEPARATOR+v.utid,type:$g.HOME_ACCOUNT_ID}}catch(X){this.logger.verbose("Could not parse client info for CCS Header: "+X)}return I=this.createTokenRequestHeaders(I||i.ccsCredential),[2,this.executePostToTokenEndpoint(s,f,I,{clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:i.scopes,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid})]}})})},t.prototype.createTokenRequestBody=function(e){var i;return Pa(this,void 0,void 0,function(){var o,s,f,v,I,D;return Ra(this,function(k){switch(k.label){case 0:return null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.AuthClientCreateTokenRequestBody,e.correlationId),(o=new WD).addClientId(this.config.authOptions.clientId),this.includeRedirectUri?o.addRedirectUri(e.redirectUri):ST.validateRedirectUri(e.redirectUri),o.addScopes(e.scopes),o.addAuthorizationCode(e.code),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addThrottling(),this.serverTelemetryManager&&o.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&o.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&o.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(o.addClientAssertion((s=this.config.clientCredentials.clientAssertion).assertion),o.addClientAssertionType(s.assertionType)),o.addGrantType(B6.AUTHORIZATION_CODE_GRANT),o.addClientInfo(),e.authenticationScheme!==Cl.POP?[3,2]:(s=new XO(this.cryptoUtils,this.performanceClient),null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.PopTokenGenerateCnf,e.correlationId),[4,s.generateCnf(e)]);case 1:return f=k.sent(),o.addPopToken(f.reqCnfString),[3,3];case 2:if(e.authenticationScheme===Cl.SSH){if(!e.sshJwk)throw uu.createMissingSshJwkError();o.addSshJwk(e.sshJwk)}k.label=3;case 3:if(f=e.correlationId||this.config.cryptoInterface.createNewGuid(),o.addCorrelationId(f),(!Wi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&0<this.config.authOptions.clientCapabilities.length)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),v=void 0,e.clientInfo)try{I=V6(e.clientInfo,this.cryptoUtils),v={credential:""+I.uid+fh.CLIENT_INFO_SEPARATOR+I.utid,type:$g.HOME_ACCOUNT_ID}}catch(X){this.logger.verbose("Could not parse client info for CCS Header: "+X)}else v=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&v)switch(v.type){case $g.HOME_ACCOUNT_ID:try{I=YO(v.credential),o.addCcsOid(I)}catch(X){this.logger.verbose("Could not parse home account ID for CCS Header: "+X)}break;case $g.UPN:o.addCcsUpn(v.credential)}return e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Ka.RETURN_SPA_CODE]||o.addExtraQueryParameters(((D={})[Ka.RETURN_SPA_CODE]="1",D)),[2,o.createQueryString()]}})})},t.prototype.createAuthCodeUrlQueryString=function(e){var i;return Pa(this,void 0,void 0,function(){var o,s,f,v;return Ra(this,function(I){switch(I.label){case 0:if(null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.AuthClientCreateQueryString,e.correlationId),(o=new WD).addClientId(this.config.authOptions.clientId),s=H6(e.scopes||[],e.extraScopesToConsent||[]),o.addScopes(s),o.addRedirectUri(e.redirectUri),s=e.correlationId||this.config.cryptoInterface.createNewGuid(),o.addCorrelationId(s),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==$p.SELECT_ACCOUNT)if(e.sid&&e.prompt===$p.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){if(s=this.extractAccountSid(e.account),v=this.extractLoginHint(e.account)){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(v);try{f=YO(e.account.homeAccountId),o.addCcsOid(f)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===$p.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(s);try{f=YO(e.account.homeAccountId),o.addCcsOid(f)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{f=YO(e.account.homeAccountId),o.addCcsOid(f)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(!Wi.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&0<this.config.authOptions.clientCapabilities.length)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&o.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker?(o.addNativeBroker(),e.authenticationScheme!==Cl.POP?[3,2]:[4,new XO(this.cryptoUtils).generateCnf(e)]):[3,2];case 1:v=I.sent(),o.addPopToken(v.reqCnfString),I.label=2;case 2:return[2,o.createQueryString()]}})})},t.prototype.createLogoutUrlQueryString=function(e){var i=new WD;return e.postLogoutRedirectUri&&i.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&i.addCorrelationId(e.correlationId),e.idTokenHint&&i.addIdTokenHint(e.idTokenHint),e.state&&i.addState(e.state),e.logoutHint&&i.addLogoutHint(e.logoutHint),e.extraQueryParameters&&i.addExtraQueryParameters(e.extraQueryParameters),i.createQueryString()},t.prototype.extractAccountSid=function(e){return(null==(e=e.idTokenClaims)?void 0:e.sid)||null},t.prototype.extractLoginHint=function(e){return(null==(e=e.idTokenClaims)?void 0:e.login_hint)||null},t}(oz),vV=function(n){function t(e,i){return n.call(this,e,i)||this}return Zf(t,n),t.prototype.acquireToken=function(e){var i,o,s;return Pa(this,void 0,void 0,function(){var f,v,I,D,k,X=this;return Ra(this,function(fe){switch(fe.label){case 0:return null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.RefreshTokenClientAcquireToken,e.correlationId),f=null==(i=this.performanceClient)?void 0:i.startMeasurement(ar.RefreshTokenClientAcquireToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireToken called",e.correlationId),v=Dm.nowSeconds(),null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.RefreshTokenClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(e,this.authority)];case 1:return I=fe.sent(),D=null==(i=I.headers)?void 0:i[jg.X_MS_HTTP_VERSION],f?.addStaticFields({refreshTokenSize:(null==(o=I.body.refresh_token)?void 0:o.length)||0}),D&&null!=f&&f.addStaticFields({httpVerToken:D}),D=null==(o=I.headers)?void 0:o[jg.X_MS_REQUEST_ID],(k=new Y6(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(I.body),null!=(s=this.performanceClient)&&s.setPreQueueTime(ar.HandleServerTokenResponse,e.correlationId),[2,k.handleServerTokenResponse(I.body,this.authority,v,e,void 0,void 0,!0,e.forceCache,D).then(function(Se){return f?.endMeasurement({success:!0}),Se}).catch(function(Se){throw X.logger.verbose("Error in fetching refresh token",e.correlationId),f?.endMeasurement({errorCode:Se.errorCode,subErrorCode:Se.subError,success:!1}),Se})]}})})},t.prototype.acquireTokenByRefreshToken=function(e){var i,o;return Pa(this,void 0,void 0,function(){var f;return Ra(this,function(v){if(!e)throw uu.createEmptyTokenRequestError();if(null!=(o=this.performanceClient)&&o.addQueueMeasurement(ar.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ji.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!0)]}catch(I){if(f=I instanceof ET&&"invalid_grant"===I.errorCode&&"client_mismatch"===I.subError,I instanceof km&&I.errorCode===QO_noTokensFoundError_code||f)return null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)];throw I}return null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)]})})},t.prototype.acquireTokenWithCachedRefreshToken=function(e,i){var o;return Pa(this,void 0,void 0,function(){var s,f;return Ra(this,function(v){if(null!=(o=this.performanceClient)&&o.addQueueMeasurement(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),s=null==(o=this.performanceClient)?void 0:o.startMeasurement(ar.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireTokenWithCachedRefreshToken called",e.correlationId),f=this.cacheManager.getRefreshToken(e.account,i))return s?.endMeasurement({success:!0}),f=vl(vl({},e),{refreshToken:f.secret,authenticationScheme:e.authenticationScheme||Cl.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:$g.HOME_ACCOUNT_ID}}),null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.RefreshTokenClientAcquireToken,e.correlationId),[2,this.acquireToken(f)];throw s?.discardMeasurement(),km.createNoTokensFoundError()})})},t.prototype.executeTokenRequest=function(e,i){var o;return Pa(this,void 0,void 0,function(){var s,f,v,I;return Ra(this,function(k){switch(k.label){case 0:return null!=(o=this.performanceClient)&&o.addQueueMeasurement(ar.RefreshTokenClientExecuteTokenRequest,e.correlationId),s=null==(o=this.performanceClient)?void 0:o.startMeasurement(ar.RefreshTokenClientExecuteTokenRequest,e.correlationId),null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.RefreshTokenClientCreateTokenRequestBody,e.correlationId),f=this.createTokenQueryParameters(e),f=bc.appendQueryString(i.tokenEndpoint,f),[4,this.createTokenRequestBody(e)];case 1:return v=k.sent(),I=this.createTokenRequestHeaders(e.ccsCredential),[2,this.executePostToTokenEndpoint(f,v,I,{clientId:this.config.authOptions.clientId,authority:i.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid}).then(function(X){return s?.endMeasurement({success:!0}),X}).catch(function(X){throw s?.endMeasurement({success:!1}),X})]}})})},t.prototype.createTokenRequestBody=function(e){var i;return Pa(this,void 0,void 0,function(){var o,s,f,v;return Ra(this,function(I){switch(I.label){case 0:return null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.RefreshTokenClientCreateTokenRequestBody,e.correlationId),f=e.correlationId,o=null==(i=this.performanceClient)?void 0:i.startMeasurement(ar.BaseClientCreateTokenRequestHeaders,f),(s=new WD).addClientId(this.config.authOptions.clientId),s.addScopes(e.scopes),s.addGrantType(B6.REFRESH_TOKEN_GRANT),s.addClientInfo(),s.addLibraryInfo(this.config.libraryInfo),s.addApplicationTelemetry(this.config.telemetry.application),s.addThrottling(),this.serverTelemetryManager&&s.addServerTelemetry(this.serverTelemetryManager),s.addCorrelationId(f),s.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&s.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(s.addClientAssertion((f=this.config.clientCredentials.clientAssertion).assertion),s.addClientAssertionType(f.assertionType)),e.authenticationScheme!==Cl.POP?[3,2]:(f=new XO(this.cryptoUtils,this.performanceClient),null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.PopTokenGenerateCnf,e.correlationId),[4,f.generateCnf(e)]);case 1:return f=I.sent(),s.addPopToken(f.reqCnfString),[3,3];case 2:if(e.authenticationScheme===Cl.SSH){if(!e.sshJwk)throw o?.endMeasurement({success:!1}),uu.createMissingSshJwkError();s.addSshJwk(e.sshJwk)}I.label=3;case 3:if((!Wi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&0<this.config.authOptions.clientCapabilities.length)&&s.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case $g.HOME_ACCOUNT_ID:try{v=YO(e.ccsCredential.credential),s.addCcsOid(v)}catch(D){this.logger.verbose("Could not parse home account ID for CCS Header: "+D)}break;case $g.UPN:s.addCcsUpn(e.ccsCredential.credential)}return o?.endMeasurement({success:!0}),[2,s.createQueryString()]}})})},t}(oz),fY=function(n){function t(e,i){return n.call(this,e,i)||this}return Zf(t,n),t.prototype.acquireToken=function(e){return Pa(this,void 0,void 0,function(){var i;return Ra(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.acquireCachedToken(e)];case 1:return[2,o.sent()];case 2:if((i=o.sent())instanceof Ji&&i.errorCode===ii_tokenRefreshRequired_code)return[2,new vV(this.config,this.performanceClient).acquireTokenByRefreshToken(e)];throw i;case 3:return[2]}})})},t.prototype.acquireCachedToken=function(e){var i,o,s;return Pa(this,void 0,void 0,function(){var f;return Ra(this,function(v){switch(v.label){case 0:if(!e)throw uu.createEmptyTokenRequestError();if(e.forceRefresh)throw null!=(i=this.serverTelemetryManager)&&i.setCacheOutcome(Ub.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),Ji.createRefreshRequiredError();if(!this.config.cacheOptions.claimsBasedCachingEnabled&&!Wi.isEmptyObj(e.claims))throw null!=(i=this.serverTelemetryManager)&&i.setCacheOutcome(Ub.CLAIMS_REQUESTED_CACHE_SKIPPED),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because claims-based caching is disabled and claims were requested."),Ji.createRefreshRequiredError();if(!e.account)throw Ji.createNoAccountInSilentRequestError();if(f=e.authority||this.authority.getPreferredCache(),!(f=this.cacheManager.readCacheRecord(e.account,e,f)).accessToken)throw null!=(o=this.serverTelemetryManager)&&o.setCacheOutcome(Ub.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ji.createRefreshRequiredError();if(Dm.wasClockTurnedBack(f.accessToken.cachedAt)||Dm.isTokenExpired(f.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw null!=(o=this.serverTelemetryManager)&&o.setCacheOutcome(Ub.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),Ji.createRefreshRequiredError();if(f.accessToken.refreshOn&&Dm.isTokenExpired(f.accessToken.refreshOn,0))throw null!=(s=this.serverTelemetryManager)&&s.setCacheOutcome(Ub.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),Ji.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(f,e)];case 1:return[2,v.sent()]}})})},t.prototype.generateResultFromCacheRecord=function(e,i){return Pa(this,void 0,void 0,function(){var o,s;return Ra(this,function(f){switch(f.label){case 0:if(e.idToken&&(o=new mv(e.idToken.secret,this.config.cryptoInterface)),i.maxAge||0===i.maxAge){if(!(s=o?.claims.auth_time))throw Ji.createAuthTimeNotFoundError();mv.checkMaxAge(s,i.maxAge)}return[4,Y6.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,i,o)];case 1:return[2,f.sent()]}})})},t}(oz);function gY(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}var QD,b1,Qd,_v,Lc,yv,ZO,du,mo,SV,wV,eg,wa,Bb,J6,bV={"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},EV={"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},cz=(function(n){n.AAD="AAD",n.OIDC="OIDC"}(QD=QD||{}),function(){function n(){this.expiresAt=Dm.nowSeconds()+86400}return n.prototype.updateCloudDiscoveryMetadata=function(t,e){this.aliases=t.aliases,this.preferred_cache=t.preferred_cache,this.preferred_network=t.preferred_network,this.aliasesFromNetwork=e},n.prototype.updateEndpointMetadata=function(t,e){this.authorization_endpoint=t.authorization_endpoint,this.token_endpoint=t.token_endpoint,this.end_session_endpoint=t.end_session_endpoint,this.issuer=t.issuer,this.endpointsFromNetwork=e,this.jwks_uri=t.jwks_uri},n.prototype.updateCanonicalAuthority=function(t){this.canonical_authority=t},n.prototype.resetExpiresAt=function(){this.expiresAt=Dm.nowSeconds()+86400},n.prototype.isExpired=function(){return this.expiresAt<=Dm.nowSeconds()},n.isAuthorityMetadataEntity=function(t,e){return!!e&&0===t.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")},n}()),yY=function(){function n(t,e,i){this.networkInterface=t,this.performanceClient=e,this.correlationId=i}return n.prototype.detectRegion=function(t,e){var i,o;return Pa(this,void 0,void 0,function(){var s,f,v,I;return Ra(this,function(D){switch(D.label){case 0:if(null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.RegionDiscoveryDetectRegion,this.correlationId),s=t)return[3,8];f=n.IMDS_OPTIONS,D.label=1;case 1:return D.trys.push([1,6,,7]),null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(Zt.IMDS_VERSION,f)];case 2:return(v=D.sent()).status===KO.httpSuccess&&(s=v.body,e.region_source=Hb.IMDS),v.status!==KO.httpBadRequest?[3,5]:(null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.RegionDiscoveryGetCurrentVersion,this.correlationId),[4,this.getCurrentVersion(f)]);case 3:return(v=D.sent())?(null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(v,f)]):(e.region_source=Hb.FAILED_AUTO_DETECTION,[2,null]);case 4:(I=D.sent()).status===KO.httpSuccess&&(s=I.body,e.region_source=Hb.IMDS),D.label=5;case 5:return[3,7];case 6:return D.sent(),e.region_source=Hb.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:e.region_source=Hb.ENVIRONMENT_VARIABLE,D.label=9;case 9:return s||(e.region_source=Hb.FAILED_AUTO_DETECTION),[2,s||null]}})})},n.prototype.getRegionFromIMDS=function(t,e){var i;return Pa(this,void 0,void 0,function(){return Ra(this,function(o){return null!=(i=this.performanceClient)&&i.addQueueMeasurement(ar.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[2,this.networkInterface.sendGetRequestAsync(Zt.IMDS_ENDPOINT+"?api-version="+t+"&format=text",e,Zt.IMDS_TIMEOUT)]})})},n.prototype.getCurrentVersion=function(t){var e;return Pa(this,void 0,void 0,function(){var i;return Ra(this,function(o){switch(o.label){case 0:null!=(e=this.performanceClient)&&e.addQueueMeasurement(ar.RegionDiscoveryGetCurrentVersion,this.correlationId),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(Zt.IMDS_ENDPOINT+"?format=json",t)];case 2:return(i=o.sent()).status===KO.httpBadRequest&&i.body&&i.body["newest-versions"]&&0<i.body["newest-versions"].length?[2,i.body["newest-versions"][0]]:[2,null];case 3:return o.sent(),[2,null];case 4:return[2]}})})},n.IMDS_OPTIONS={headers:{Metadata:"true"}},n}(),XD=function(){function n(t,e,i,o,s,f,v){this.canonicalAuthority=t,this._canonicalAuthority.validateAsUri(),this.networkInterface=e,this.cacheManager=i,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=f,this.correlationId=v,this.regionDiscovery=new yY(e,this.performanceClient,this.correlationId)}return n.prototype.getAuthorityType=function(t){if(t.HostNameAndPort.endsWith(Zt.CIAM_AUTH_URL))return vf.Ciam;if((t=t.PathSegments).length)switch(t[0].toLowerCase()){case Zt.ADFS:return vf.Adfs;case Zt.DSTS:return vf.Dsts}return vf.Default},Object.defineProperty(n.prototype,"authorityType",{get:function(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(t){this._canonicalAuthority=new bc(t),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(this.metadata.end_session_endpoint)return this.replacePath(this.metadata.end_session_endpoint);throw Ji.createLogoutNotSupportedError()}throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"jwksUri",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),n.prototype.canReplaceTenant=function(t){return 1===t.PathSegments.length&&!n.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===vf.Default&&this.protocolMode===QD.AAD},n.prototype.replaceTenant=function(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)},n.prototype.replacePath=function(t){var e=this,i=t,o=new bc(this.metadata.canonical_authority).getUrlComponents(),s=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(function(f,v){var I=s[v];0===v&&e.canReplaceTenant(o)&&I!==(v=new bc(e.metadata.authorization_endpoint).getUrlComponents().PathSegments[0])&&(e.logger.verbose("Replacing tenant domain name "+I+" with id "+v),I=v),f!==I&&(i=i.replace("/"+I+"/","/"+f+"/"))}),this.replaceTenant(i)},Object.defineProperty(n.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===vf.Adfs||this.authorityType===vf.Dsts||this.protocolMode===QD.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),n.prototype.discoveryComplete=function(){return!!this.metadata},n.prototype.resolveEndpointsAsync=function(){var t;return Pa(this,void 0,void 0,function(){var e,i,o;return Ra(this,function(s){switch(s.label){case 0:return null!=(t=this.performanceClient)&&t.addQueueMeasurement(ar.AuthorityResolveEndpointsAsync,this.correlationId),(e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort))||(e=new cz).updateCanonicalAuthority(this.canonicalAuthority),null!=(t=this.performanceClient)&&t.setPreQueueTime(ar.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),[4,this.updateCloudDiscoveryMetadata(e)];case 1:return i=s.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network),null!=(t=this.performanceClient)&&t.setPreQueueTime(ar.AuthorityUpdateEndpointMetadata,this.correlationId),[4,this.updateEndpointMetadata(e)];case 2:return o=s.sent(),i!==Nm.CACHE&&o!==Nm.CACHE&&(e.resetExpiresAt(),e.updateCanonicalAuthority(this.canonicalAuthority)),o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache),this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e,[2]}})})},n.prototype.updateEndpointMetadata=function(t){var e,i,o;return Pa(this,void 0,void 0,function(){var s,f;return Ra(this,function(v){switch(v.label){case 0:return null!=(e=this.performanceClient)&&e.addQueueMeasurement(ar.AuthorityUpdateEndpointMetadata,this.correlationId),(s=this.getEndpointMetadataFromConfig())?(t.updateEndpointMetadata(s,!1),[2,Nm.CONFIG]):this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!t.isExpired()?[2,Nm.CACHE]:(null!=(e=this.performanceClient)&&e.setPreQueueTime(ar.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),[4,this.getEndpointMetadataFromNetwork()]);case 1:return(s=v.sent())?null!=(e=this.authorityOptions.azureRegionConfiguration)&&e.azureRegion?(null!=(i=this.performanceClient)&&i.setPreQueueTime(ar.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(s)]):[3,3]:[3,4];case 2:s=v.sent(),v.label=3;case 3:return t.updateEndpointMetadata(s,!0),[2,Nm.NETWORK];case 4:return!(f=this.getEndpointMetadataFromHardcodedValues())||this.authorityOptions.skipAuthorityMetadataCache?[3,7]:null!=(i=this.authorityOptions.azureRegionConfiguration)&&i.azureRegion?(null!=(o=this.performanceClient)&&o.setPreQueueTime(ar.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(f)]):[3,6];case 5:f=v.sent(),v.label=6;case 6:return t.updateEndpointMetadata(f,!1),[2,Nm.HARDCODED_VALUES];case 7:throw Ji.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}})})},n.prototype.isAuthoritySameType=function(t){return new bc(t.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length},n.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw uu.createInvalidAuthorityMetadataError()}return null},n.prototype.getEndpointMetadataFromNetwork=function(){var t;return Pa(this,void 0,void 0,function(){var e,i;return Ra(this,function(o){switch(o.label){case 0:null!=(t=this.performanceClient)&&t.addQueueMeasurement(ar.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),e={},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,e)];case 2:return[2,gY((i=o.sent()).body)?i.body:null];case 3:return o.sent(),[2,null];case 4:return[2]}})})},n.prototype.getEndpointMetadataFromHardcodedValues=function(){return this.canonicalAuthority in bV?bV[this.canonicalAuthority]:null},n.prototype.updateMetadataWithRegionalInformation=function(t){var e;return Pa(this,void 0,void 0,function(){var i;return Ra(this,function(o){switch(o.label){case 0:return null!=(e=this.performanceClient)&&e.addQueueMeasurement(ar.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),(i=null==(e=this.authorityOptions.azureRegionConfiguration)?void 0:e.azureRegion)?i!==Zt.AZURE_REGION_AUTO_DISCOVER_FLAG?(this.regionDiscoveryMetadata.region_outcome=$D.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=i,[2,n.replaceWithRegionalInformation(t,i)]):(null!=(e=this.performanceClient)&&e.setPreQueueTime(ar.RegionDiscoveryDetectRegion,this.correlationId),[4,this.regionDiscovery.detectRegion(null==(e=this.authorityOptions.azureRegionConfiguration)?void 0:e.environmentRegion,this.regionDiscoveryMetadata)]):[3,2];case 1:if(i=o.sent())return this.regionDiscoveryMetadata.region_outcome=$D.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=i,[2,n.replaceWithRegionalInformation(t,i)];this.regionDiscoveryMetadata.region_outcome=$D.AUTO_DETECTION_REQUESTED_FAILED,o.label=2;case 2:return[2,t]}})})},n.prototype.updateCloudDiscoveryMetadata=function(t){var e;return Pa(this,void 0,void 0,function(){var i,o;return Ra(this,function(s){switch(s.label){case 0:return null!=(e=this.performanceClient)&&e.addQueueMeasurement(ar.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),this.logger.verbose("Attempting to get cloud discovery metadata in the config"),this.logger.verbosePii("Known Authorities: "+(this.authorityOptions.knownAuthorities||Zt.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: "+(this.authorityOptions.authorityMetadata||Zt.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: "+(t.canonical_authority||Zt.NOT_APPLICABLE)),(i=this.getCloudDiscoveryMetadataFromConfig())?(this.logger.verbose("Found cloud discovery metadata in the config."),t.updateCloudDiscoveryMetadata(i,!1),[2,Nm.CONFIG]):(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the cache."),o=t.isExpired(),this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!o?(this.logger.verbose("Found metadata in the cache."),[2,Nm.CACHE]):(o&&this.logger.verbose("The metadata entity is expired."),this.logger.verbose("Did not find cloud discovery metadata in the cache... Attempting to get cloud discovery metadata from the network."),null!=(e=this.performanceClient)&&e.setPreQueueTime(ar.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),[4,this.getCloudDiscoveryMetadataFromNetwork()]));case 1:if(i=s.sent())return this.logger.verbose("cloud discovery metadata was successfully returned from getCloudDiscoveryMetadataFromNetwork()"),t.updateCloudDiscoveryMetadata(i,!0),[2,Nm.NETWORK];if(this.logger.verbose("Did not find cloud discovery metadata from the network... Attempting to get cloud discovery metadata from hardcoded values."),(o=this.getCloudDiscoveryMetadataFromHarcodedValues())&&!this.options.skipAuthorityMetadataCache)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),t.updateCloudDiscoveryMetadata(o,!1),[2,Nm.HARDCODED_VALUES];throw this.logger.error("Did not find cloud discovery metadata from hardcoded values... Metadata could not be obtained from config, cache, network or hardcoded values. Throwing Untrusted Authority Error."),uu.createUntrustedAuthorityError()}})})},n.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityType===vf.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),e=n.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),uu.createInvalidCloudDiscoveryMetadataError()}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null},n.prototype.getCloudDiscoveryMetadataFromNetwork=function(){var t;return Pa(this,void 0,void 0,function(){var e,i,o,s,f,v;return Ra(this,function(I){switch(I.label){case 0:null!=(t=this.performanceClient)&&t.addQueueMeasurement(ar.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),e=""+Zt.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",i={},o=null,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(e,i)];case 2:if(v=I.sent(),f=s=void 0,function mY(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}(v.body))f=(s=v.body).metadata,this.logger.verbosePii("tenant_discovery_endpoint is: "+s.tenant_discovery_endpoint);else{if(!function _Y(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}(v.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),[2,null];if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: "+v.status),(s=v.body).error===Zt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),[2,null];this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is "+s.error),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is "+s.error_description),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),f=[]}return this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=n.getCloudDiscoveryMetadataFromNetworkResponse(f,this.hostnameAndPort),[3,4];case 3:return(v=I.sent())instanceof Po?this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: "+v.errorCode+"\nError Description: "+v.errorMessage):this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: "+v.name+"\nError Description: "+v.message),[2,null];case 4:return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,o]}})})},n.prototype.getCloudDiscoveryMetadataFromHarcodedValues=function(){return this.canonicalAuthority in EV?EV[this.canonicalAuthority]:null},n.prototype.isInKnownAuthorities=function(){var t=this;return 0<this.authorityOptions.knownAuthorities.filter(function(e){return bc.getDomainFromUrl(e).toLowerCase()===t.hostnameAndPort}).length},n.generateAuthority=function(t,e){var i;return e&&e.azureCloudInstance!==VD.None&&(i=e.azureCloudInstance+"/"+(i=e.tenant||Zt.DEFAULT_COMMON_TENANT)+"/"),i||t},n.createCloudDiscoveryMetadataFromHost=function(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}},n.getCloudDiscoveryMetadataFromNetworkResponse=function(t,e){for(var i=0;i<t.length;i++){var o=t[i];if(-1<o.aliases.indexOf(e))return o}return null},n.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ji.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},n.prototype.isAlias=function(t){return-1<this.metadata.aliases.indexOf(t)},n.isPublicCloudAuthority=function(t){return 0<=Zt.KNOWN_PUBLIC_CLOUDS.indexOf(t)},n.buildRegionalAuthorityString=function(o,e,i){var s=e+"."+((o=new bc(o)).validateAsUri(),f=o.getUrlComponents()).HostNameAndPort,f=(this.isPublicCloudAuthority(f.HostNameAndPort)&&(s=e+"."+Zt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX),bc.constructAuthorityUriFromObject(vl(vl({},o.getUrlComponents()),{HostNameAndPort:s})).urlString);return i?f+"?"+i:f},n.replaceWithRegionalInformation=function(t,e){return t.authorization_endpoint=n.buildRegionalAuthorityString(t.authorization_endpoint,e),t.token_endpoint=n.buildRegionalAuthorityString(t.token_endpoint,e,Zt.REGIONAL_AUTH_NON_MSI_QUERY_STRING),t.end_session_endpoint&&(t.end_session_endpoint=n.buildRegionalAuthorityString(t.end_session_endpoint,e)),t},n.transformCIAMAuthority=function(i){var e=i.endsWith(Zt.FORWARD_SLASH)?i:""+i+Zt.FORWARD_SLASH;return 0===(i=new bc(i).getUrlComponents()).PathSegments.length&&i.HostNameAndPort.endsWith(Zt.CIAM_AUTH_URL)?""+e+i.HostNameAndPort.split(".")[0]+Zt.AAD_TENANT_DOMAIN_SUFFIX:e},n.reservedTenantDomains=new Set(["{tenant}","{tenantid}",bT.COMMON,bT.CONSUMERS,bT.ORGANIZATIONS]),n}(),W6=function(){function n(){}return n.createDiscoveredInstance=function(t,e,i,o,s,f,v){return Pa(this,void 0,void 0,function(){var I,D;return Ra(this,function(k){switch(k.label){case 0:f?.addQueueMeasurement(ar.AuthorityFactoryCreateDiscoveredInstance,v),I=XD.transformCIAMAuthority(t),I=n.createInstance(I,e,i,o,s,f,v),k.label=1;case 1:return k.trys.push([1,3,,4]),f?.setPreQueueTime(ar.AuthorityResolveEndpointsAsync,v),[4,I.resolveEndpointsAsync()];case 2:return k.sent(),[2,I];case 3:throw D=k.sent(),Ji.createEndpointDiscoveryIncompleteError(D);case 4:return[2]}})})},n.createInstance=function(t,e,i,o,s,f,v){if(Wi.isEmpty(t))throw uu.createUrlEmptyError();return new XD(t,e,i,o,s,f,v)},n}(),Q6=function(){function n(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return n.isServerTelemetryEntity=function(i,e){i=0===i.indexOf(cp.CACHE_KEY);var o=!0;return e&&(o=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),i&&o},n}(),TV=function(){function n(){}return n.isThrottlingEntity=function(o,e){var i=!1;return o&&(i=0===o.indexOf(YD.THROTTLING_PREFIX)),o=!0,e&&(o=e.hasOwnProperty("throttleTime")),i&&o},n}(),vY={sendGetRequestAsync:function(){return Promise.reject(Po.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented for the Network interface."))},sendPostRequestAsync:function(){return Promise.reject(Po.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented for the Network interface."))}},X6_missingKidError_code="missing_kid_error",X6_missingKidError_desc="The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",X6_missingAlgError_code="missing_alg_error",X6_missingAlgError_desc="The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided.",AV=function(n){function t(e,i){return(e=n.call(this,e,i)||this).name="JoseHeaderError",Object.setPrototypeOf(e,t.prototype),e}return Zf(t,n),t.createMissingKidError=function(){return new t(X6_missingKidError_code,X6_missingKidError_desc)},t.createMissingAlgError=function(){return new t(X6_missingAlgError_code,X6_missingAlgError_desc)},t}(Po),CY=function(){function n(t){this.typ=t.typ,this.alg=t.alg,this.kid=t.kid}return n.getShrHeaderString=function(t){if(!t.kid)throw AV.createMissingKidError();if(t.alg)return t=new n({typ:t.typ||ez.Pop,kid:t.kid,alg:t.alg}),JSON.stringify(t);throw AV.createMissingAlgError()},n}(),bY=function(){function n(t,e){this.cacheOutcome=Ub.NO_CACHE_HIT,this.cacheManager=e,this.apiId=t.apiId,this.correlationId=t.correlationId,this.wrapperSKU=t.wrapperSKU||Zt.EMPTY_STRING,this.wrapperVer=t.wrapperVer||Zt.EMPTY_STRING,this.telemetryCacheKey=cp.CACHE_KEY+fh.CACHE_KEY_SEPARATOR+t.clientId}return n.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+cp.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(cp.VALUE_SEPARATOR);return e=[e,this.getRegionDiscoveryFields()].join(cp.VALUE_SEPARATOR),[cp.SCHEMA_VERSION,e,t].join(cp.CATEGORY_SEPARATOR)},n.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),s=n.maxErrorsToSend(t),e=t.failedRequests.slice(0,2*s).join(cp.VALUE_SEPARATOR),i=t.errors.slice(0,s).join(cp.VALUE_SEPARATOR),o=t.errors.length;return s=[o,s<o?cp.OVERFLOW_TRUE:cp.OVERFLOW_FALSE].join(cp.VALUE_SEPARATOR),[cp.SCHEMA_VERSION,t.cacheHits,e,i,s].join(cp.CATEGORY_SEPARATOR)},n.prototype.cacheFailedRequest=function(t){var e=this.getLastRequests();e.errors.length>=cp.MAX_CACHED_ERRORS&&(e.failedRequests.shift(),e.failedRequests.shift(),e.errors.shift()),e.failedRequests.push(this.apiId,this.correlationId),Wi.isEmpty(t.subError)?Wi.isEmpty(t.errorCode)?t&&t.toString()?e.errors.push(t.toString()):e.errors.push(cp.UNKNOWN_ERROR):e.errors.push(t.errorCode):e.errors.push(t.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)},n.prototype.incrementCacheHits=function(){var t=this.getLastRequests();return t.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t),t.cacheHits},n.prototype.getLastRequests=function(){var t=new Q6;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||t},n.prototype.clearTelemetryCache=function(){var t,e=this.getLastRequests(),i=n.maxErrorsToSend(e);i===e.errors.length?this.cacheManager.removeItem(this.telemetryCacheKey):((t=new Q6).failedRequests=e.failedRequests.slice(2*i),t.errors=e.errors.slice(i),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t))},n.maxErrorsToSend=function(t){for(var e=0,i=0,o=t.errors.length,s=0;s<o;s++){var v=t.failedRequests[2*s+1]||Zt.EMPTY_STRING,I=t.errors[s]||Zt.EMPTY_STRING;if(!((i+=(t.failedRequests[2*s]||Zt.EMPTY_STRING).toString().length+v.toString().length+I.length+3)<cp.MAX_LAST_HEADER_BYTES))break;e+=1}return e},n.prototype.getRegionDiscoveryFields=function(){var t=[];return t.push(this.regionUsed||Zt.EMPTY_STRING),t.push(this.regionSource||Zt.EMPTY_STRING),t.push(this.regionOutcome||Zt.EMPTY_STRING),t.join(",")},n.prototype.updateRegionDiscoveryMetadata=function(t){this.regionUsed=t.region_used,this.regionSource=t.region_source,this.regionOutcome=t.region_outcome},n.prototype.setCacheOutcome=function(t){this.cacheOutcome=t},n}(),IV=function(){function n(t,e,i,o,s,f){this.authority=e,this.libraryName=o,this.libraryVersion=s,this.applicationTelemetry=f,this.clientId=t,this.logger=i,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map}return n.prototype.startPerformanceMeasurement=function(t,e){return{}},n.prototype.startPerformanceMeasuremeant=function(t,e){return{}},n.prototype.getIntFields=function(){return hY},n.prototype.getPreQueueTime=function(t,e){var i=this.preQueueTimeByCorrelationId.get(e);if(i){if(i.name===t)return i.time;this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue time found for "+t+", unable to add queue measurement")}else this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: "+e+", unable to add queue measurement")},n.prototype.calculateQueuedTime=function(t,e){return t<1?(this.logger.trace("PerformanceClient: preQueueTime should be a positive integer and not "+t),0):e<1?(this.logger.trace("PerformanceClient: currentTime should be a positive integer and not "+e),0):e<t?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):e-t},n.prototype.addQueueMeasurement=function(t,e,i,o){if(e){if(0===i)this.logger.trace("PerformanceClient.addQueueMeasurement: queue time provided for "+t+" is "+i);else if(!i)return void this.logger.trace("PerformanceClient.addQueueMeasurement: no queue time provided for "+t);i={eventName:t,queueTime:i,manuallyCompleted:o},(o=this.queueMeasurements.get(e))?(o.push(i),this.queueMeasurements.set(e,o)):(this.logger.trace("PerformanceClient.addQueueMeasurement: adding correlationId "+e+" to queue measurements"),this.queueMeasurements.set(e,[i])),this.preQueueTimeByCorrelationId.delete(e)}else this.logger.trace("PerformanceClient.addQueueMeasurement: correlationId not provided for "+t+", cannot add queue measurement")},n.prototype.startMeasurement=function(t,e){var i=this,o=e||this.generateId(),s=(e||this.logger.info("PerformanceClient: No correlation id provided for "+t+", generating",o),this.logger.trace("PerformanceClient: Performance measurement started for "+t,o),this.startPerformanceMeasuremeant(t,o)),f=(s.startMeasurement(),{eventId:this.generateId(),status:G6.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:t,startTimeMs:Date.now(),correlationId:o,appName:null==(e=this.applicationTelemetry)?void 0:e.appName,appVersion:null==(t=this.applicationTelemetry)?void 0:t.appVersion});return this.cacheEventByCorrelationId(f),{endMeasurement:function(v){return i.endMeasurement(vl(vl({},f),v),s)},discardMeasurement:function(){return i.discardMeasurements(f.correlationId)},addStaticFields:function(v){return i.addStaticFields(v,f.correlationId)},increment:function(v){return i.increment(v,f.correlationId)},measurement:s,event:f}},n.prototype.endMeasurement=function(t,e){var i,o,s,f,v,I=this,D=this.eventsByCorrelationId.get(t.correlationId);return D?(o={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0},(i=t.eventId===D.eventId)?(o=this.getQueueInfo(t.correlationId),this.discardCache(D.correlationId)):null!=(s=D.incompleteSubMeasurements)&&s.delete(t.eventId),e?.endMeasurement(),(s=e?.flushMeasurement())?(this.logger.trace("PerformanceClient: Performance measurement ended for "+t.name+": "+s+" ms",t.correlationId),i?(f=vl(vl({},D),t),v=0,null!=(e=f.incompleteSubMeasurements)&&e.forEach(function(k){I.logger.trace("PerformanceClient: Incomplete submeasurement "+k.name+" found for "+t.name,f.correlationId),v++}),f.incompleteSubMeasurements=void 0,f=vl(vl({},f),{durationMs:Math.round(s),queuedTimeMs:o.totalQueueTime,queuedCount:o.totalQueueCount,queuedManuallyCompletedCount:o.manuallyCompletedCount,status:G6.Completed,incompleteSubsCount:v}),this.truncateIntegralFields(f,this.getIntFields()),this.emitEvents([f],t.correlationId),f):(D[t.name+"DurationMs"]=Math.floor(s),vl({},D))):(this.logger.trace("PerformanceClient: Performance measurement not taken",D.correlationId),null)):(this.logger.trace("PerformanceClient: Measurement not found for "+t.eventId,t.correlationId),null)},n.prototype.addStaticFields=function(t,e){this.logger.trace("PerformanceClient: Updating static fields");var i=this.eventsByCorrelationId.get(e);i?this.eventsByCorrelationId.set(e,vl(vl({},i),t)):this.logger.trace("PerformanceClient: Event not found for",e)},n.prototype.increment=function(t,e){this.logger.trace("PerformanceClient: Updating counters");var i=this.eventsByCorrelationId.get(e);if(i)for(var o in t)i.hasOwnProperty(o)||(i[o]=0),i[o]+=t[o];else this.logger.trace("PerformanceClient: Event not found for",e)},n.prototype.cacheEventByCorrelationId=function(t){var e=this.eventsByCorrelationId.get(t.correlationId);e?(this.logger.trace("PerformanceClient: Performance measurement for "+t.name+" added/updated",t.correlationId),e.incompleteSubMeasurements=e.incompleteSubMeasurements||new Map,e.incompleteSubMeasurements.set(t.eventId,{name:t.name,startTimeMs:t.startTimeMs})):(this.logger.trace("PerformanceClient: Performance measurement for "+t.name+" started",t.correlationId),this.eventsByCorrelationId.set(t.correlationId,vl({},t)))},n.prototype.getQueueInfo=function(t){var e=this.queueMeasurements.get(t),i=(e||this.logger.trace("PerformanceClient: no queue measurements found for for correlationId: "+t),0),o=0,s=0;return e?.forEach(function(f){i+=f.queueTime,o++,s+=f.manuallyCompleted?1:0}),{totalQueueTime:i,totalQueueCount:o,manuallyCompletedCount:s}},n.prototype.discardMeasurements=function(t){this.logger.trace("PerformanceClient: Performance measurements discarded",t),this.eventsByCorrelationId.delete(t)},n.prototype.discardCache=function(t){this.discardMeasurements(t),this.logger.trace("PerformanceClient: QueueMeasurements discarded",t),this.queueMeasurements.delete(t),this.logger.trace("PerformanceClient: Pre-queue times discarded",t),this.preQueueTimeByCorrelationId.delete(t)},n.prototype.addPerformanceCallback=function(t){var e=this.generateId();return this.callbacks.set(e,t),this.logger.verbose("PerformanceClient: Performance callback registered with id: "+e),e},n.prototype.removePerformanceCallback=function(t){var e=this.callbacks.delete(t);return this.logger.verbose(e?"PerformanceClient: Performance callback "+t+" removed.":"PerformanceClient: Performance callback "+t+" not removed."),e},n.prototype.emitEvents=function(t,e){var i=this;this.logger.verbose("PerformanceClient: Emitting performance events",e),this.callbacks.forEach(function(o,s){i.logger.trace("PerformanceClient: Emitting event to callback "+s,e),o.apply(null,[t])})},n.prototype.truncateIntegralFields=function(t,e){e.forEach(function(i){i in t&&"number"==typeof t[i]&&(t[i]=Math.floor(t[i]))})},n}(),MV=function(){function n(){}return n.prototype.startMeasurement=function(){},n.prototype.endMeasurement=function(){},n.prototype.flushMeasurement=function(){return null},n}(),EY=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Zf(t,n),t.prototype.generateId=function(){return"callback-id"},t.prototype.startPerformanceMeasuremeant=function(){return new MV},t.prototype.startPerformanceMeasurement=function(){return new MV},t.prototype.calculateQueuedTime=function(e,i){return 0},t.prototype.addQueueMeasurement=function(e,i,o){},t.prototype.setPreQueueTime=function(e,i){},t}(IV),ni_pkceNotGenerated_code="pkce_not_created",ni_pkceNotGenerated_desc="The PKCE code challenge and verifier could not be generated.",ni_cryptoDoesNotExist_code="crypto_nonexistent",ni_cryptoDoesNotExist_desc="The crypto object or function is not available.",ni_httpMethodNotImplementedError_code="http_method_not_implemented",ni_httpMethodNotImplementedError_desc="The HTTP method given has not been implemented in this library.",ni_emptyNavigateUriError_code="empty_navigate_uri",ni_emptyNavigateUriError_desc="Navigation URI is empty. Please check stack trace for more info.",ni_hashEmptyError_code="hash_empty_error",ni_hashEmptyError_desc="Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. For more visit: aka.ms/msaljs/browser-errors.",ni_hashDoesNotContainStateError_code="no_state_in_hash",ni_hashDoesNotContainStateError_desc="Hash does not contain state. Please verify that the request originated from msal.",ni_hashDoesNotContainKnownPropertiesError_code="hash_does_not_contain_known_properties",ni_hashDoesNotContainKnownPropertiesError_desc="Hash does not contain known properites. Please verify that your redirectUri is not changing the hash. For more visit: aka.ms/msaljs/browser-errors.",ni_unableToParseStateError_code="unable_to_parse_state",ni_unableToParseStateError_desc="Unable to parse state. Please verify that the request originated from msal.",ni_stateInteractionTypeMismatchError_code="state_interaction_type_mismatch",ni_stateInteractionTypeMismatchError_desc="Hash contains state but the interaction type does not match the caller.",ni_interactionInProgress_code="interaction_in_progress",ni_interactionInProgress_desc="Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.  For more visit: aka.ms/msaljs/browser-errors.",ni_popupWindowError_code="popup_window_error",ni_popupWindowError_desc="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",ni_emptyWindowError_code="empty_window_error",ni_emptyWindowError_desc="window.open returned null or undefined window object.",ni_userCancelledError_code="user_cancelled",ni_userCancelledError_desc="User cancelled the flow.",ni_monitorPopupTimeoutError_code="monitor_window_timeout",ni_monitorPopupTimeoutError_desc="Token acquisition in popup failed due to timeout. For more visit: aka.ms/msaljs/browser-errors.",ni_monitorIframeTimeoutError_code="monitor_window_timeout",ni_monitorIframeTimeoutError_desc="Token acquisition in iframe failed due to timeout. For more visit: aka.ms/msaljs/browser-errors.",ni_redirectInIframeError_code="redirect_in_iframe",ni_redirectInIframeError_desc="Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",ni_blockTokenRequestsInHiddenIframeError_code="block_iframe_reload",ni_blockTokenRequestsInHiddenIframeError_desc="Request was blocked inside an iframe because MSAL detected an authentication response. For more visit: aka.ms/msaljs/browser-errors",ni_blockAcquireTokenInPopupsError_code="block_nested_popups",ni_blockAcquireTokenInPopupsError_desc="Request was blocked inside a popup because MSAL detected it was running in a popup.",ni_iframeClosedPrematurelyError_code="iframe_closed_prematurely",ni_iframeClosedPrematurelyError_desc="The iframe being monitored was closed prematurely.",ni_silentLogoutUnsupportedError_code="silent_logout_unsupported",ni_silentLogoutUnsupportedError_desc="Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",ni_noAccountError_code="no_account_error",ni_noAccountError_desc="No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",ni_silentPromptValueError_code="silent_prompt_value_error",ni_silentPromptValueError_desc="The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",ni_noTokenRequestCacheError_code="no_token_request_cache_error",ni_noTokenRequestCacheError_desc="No token request found in cache.",ni_unableToParseTokenRequestCacheError_code="unable_to_parse_token_request_cache_error",ni_unableToParseTokenRequestCacheError_desc="The cached token request could not be parsed.",ni_noCachedAuthorityError_code="no_cached_authority_error",ni_noCachedAuthorityError_desc="No cached authority found.",ni_authRequestNotSet_code="auth_request_not_set_error",ni_authRequestNotSet_desc="Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",ni_invalidCacheType_code="invalid_cache_type",ni_invalidCacheType_desc="Invalid cache type",ni_notInBrowserEnvironment_code="non_browser_environment",ni_notInBrowserEnvironment_desc="Login and token requests are not supported in non-browser environments.",ni_databaseNotOpen_code="database_not_open",ni_databaseNotOpen_desc="Database is not open!",ni_noNetworkConnectivity_code="no_network_connectivity",ni_noNetworkConnectivity_desc="No network connectivity. Check your internet connection.",ni_postRequestFailed_code="post_request_failed",ni_postRequestFailed_desc="Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",ni_getRequestFailed_code="get_request_failed",ni_getRequestFailed_desc="Network request failed. Please check the network trace to determine root cause.",ni_failedToParseNetworkResponse_code="failed_to_parse_response",ni_failedToParseNetworkResponse_desc="Failed to parse network response. Check network trace.",ni_unableToLoadTokenError_code="unable_to_load_token",ni_unableToLoadTokenError_desc="Error loading token to cache.",ni_signingKeyNotFoundInStorage_code="crypto_key_not_found",ni_signingKeyNotFoundInStorage_desc="Cryptographic Key or Keypair not found in browser storage.",ni_authCodeRequired_code="auth_code_required",ni_authCodeRequired_desc="An authorization code must be provided (as the `code` property on the request) to this flow.",ni_authCodeOrNativeAccountRequired_code="auth_code_or_nativeAccountId_required",ni_authCodeOrNativeAccountRequired_desc="An authorization code or nativeAccountId must be provided to this flow.",ni_spaCodeAndNativeAccountPresent_code="spa_code_and_nativeAccountId_present",ni_spaCodeAndNativeAccountPresent_desc="Request cannot contain both spa code and native account id.",ni_databaseUnavailable_code="database_unavailable",ni_databaseUnavailable_desc="IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",ni_unableToAcquireTokenFromNativePlatform_code="unable_to_acquire_token_from_native_platform",ni_unableToAcquireTokenFromNativePlatform_desc="Unable to acquire token from native platform. For a list of possible reasons visit aka.ms/msaljs/browser-errors.",ni_nativeHandshakeTimeout_code="native_handshake_timeout",ni_nativeHandshakeTimeout_desc="Timed out while attempting to establish connection to browser extension",ni_nativeExtensionNotInstalled_code="native_extension_not_installed",ni_nativeExtensionNotInstalled_desc="Native extension is not installed. If you think this is a mistake call the initialize function.",ni_nativeConnectionNotEstablished_code="native_connection_not_established",ni_nativeConnectionNotEstablished_desc="Connection to native platform has not been established. Please install a compatible browser extension and run initialize(). For more please visit aka.ms/msaljs/browser-errors.",ni_nativeBrokerCalledBeforeInitialize_code="native_broker_called_before_initialize",ni_nativeBrokerCalledBeforeInitialize_desc="You must call and await the initialize function before attempting to call any other MSAL API when native brokering is enabled. For more please visit aka.ms/msaljs/browser-errors.",ni_nativePromptNotSupported_code="native_prompt_not_supported",ni_nativePromptNotSupported_desc="The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",ki=function(n){function t(e,i){return e=n.call(this,e,i)||this,Object.setPrototypeOf(e,t.prototype),e.name="BrowserAuthError",e}return sp(t,n),t.createPkceNotGeneratedError=function(e){return new t(ni_pkceNotGenerated_code,ni_pkceNotGenerated_desc+" Detail:"+e)},t.createCryptoNotAvailableError=function(e){return new t(ni_cryptoDoesNotExist_code,ni_cryptoDoesNotExist_desc+" Detail:"+e)},t.createHttpMethodNotImplementedError=function(e){return new t(ni_httpMethodNotImplementedError_code,ni_httpMethodNotImplementedError_desc+" Given Method: "+e)},t.createEmptyNavigationUriError=function(){return new t(ni_emptyNavigateUriError_code,ni_emptyNavigateUriError_desc)},t.createEmptyHashError=function(e){return new t(ni_hashEmptyError_code,ni_hashEmptyError_desc+" Given Url: "+e)},t.createHashDoesNotContainStateError=function(){return new t(ni_hashDoesNotContainStateError_code,ni_hashDoesNotContainStateError_desc)},t.createHashDoesNotContainKnownPropertiesError=function(){return new t(ni_hashDoesNotContainKnownPropertiesError_code,ni_hashDoesNotContainKnownPropertiesError_desc)},t.createUnableToParseStateError=function(){return new t(ni_unableToParseStateError_code,ni_unableToParseStateError_desc)},t.createStateInteractionTypeMismatchError=function(){return new t(ni_stateInteractionTypeMismatchError_code,ni_stateInteractionTypeMismatchError_desc)},t.createInteractionInProgressError=function(){return new t(ni_interactionInProgress_code,ni_interactionInProgress_desc)},t.createPopupWindowError=function(e){var i=ni_popupWindowError_desc;return i=Wi.isEmpty(e)?i:i+" Details: "+e,new t(ni_popupWindowError_code,i)},t.createEmptyWindowCreatedError=function(){return new t(ni_emptyWindowError_code,ni_emptyWindowError_desc)},t.createUserCancelledError=function(){return new t(ni_userCancelledError_code,ni_userCancelledError_desc)},t.createMonitorPopupTimeoutError=function(){return new t(ni_monitorPopupTimeoutError_code,ni_monitorPopupTimeoutError_desc)},t.createMonitorIframeTimeoutError=function(){return new t(ni_monitorIframeTimeoutError_code,ni_monitorIframeTimeoutError_desc)},t.createRedirectInIframeError=function(e){return new t(ni_redirectInIframeError_code,ni_redirectInIframeError_desc+" (window.parent !== window) => "+e)},t.createBlockReloadInHiddenIframeError=function(){return new t(ni_blockTokenRequestsInHiddenIframeError_code,ni_blockTokenRequestsInHiddenIframeError_desc)},t.createBlockAcquireTokenInPopupsError=function(){return new t(ni_blockAcquireTokenInPopupsError_code,ni_blockAcquireTokenInPopupsError_desc)},t.createIframeClosedPrematurelyError=function(){return new t(ni_iframeClosedPrematurelyError_code,ni_iframeClosedPrematurelyError_desc)},t.createSilentLogoutUnsupportedError=function(){return new t(ni_silentLogoutUnsupportedError_code,ni_silentLogoutUnsupportedError_desc)},t.createNoAccountError=function(){return new t(ni_noAccountError_code,ni_noAccountError_desc)},t.createSilentPromptValueError=function(e){return new t(ni_silentPromptValueError_code,ni_silentPromptValueError_desc+" Given value: "+e)},t.createUnableToParseTokenRequestCacheError=function(){return new t(ni_unableToParseTokenRequestCacheError_code,ni_unableToParseTokenRequestCacheError_desc)},t.createNoTokenRequestCacheError=function(){return new t(ni_noTokenRequestCacheError_code,ni_noTokenRequestCacheError_desc)},t.createAuthRequestNotSetError=function(){return new t(ni_authRequestNotSet_code,ni_authRequestNotSet_desc)},t.createNoCachedAuthorityError=function(){return new t(ni_noCachedAuthorityError_code,ni_noCachedAuthorityError_desc)},t.createInvalidCacheTypeError=function(){return new t(ni_invalidCacheType_code,""+ni_invalidCacheType_desc)},t.createNonBrowserEnvironmentError=function(){return new t(ni_notInBrowserEnvironment_code,ni_notInBrowserEnvironment_desc)},t.createDatabaseNotOpenError=function(){return new t(ni_databaseNotOpen_code,ni_databaseNotOpen_desc)},t.createNoNetworkConnectivityError=function(){return new t(ni_noNetworkConnectivity_code,ni_noNetworkConnectivity_desc)},t.createPostRequestFailedError=function(e,i){return new t(ni_postRequestFailed_code,ni_postRequestFailed_desc+" | Network client threw: "+e+" | Attempted to reach: "+i.split("?")[0])},t.createGetRequestFailedError=function(e,i){return new t(ni_getRequestFailed_code,ni_getRequestFailed_desc+" | Network client threw: "+e+" | Attempted to reach: "+i.split("?")[0])},t.createFailedToParseNetworkResponseError=function(e){return new t(ni_failedToParseNetworkResponse_code,ni_failedToParseNetworkResponse_desc+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToLoadTokenError=function(e){return new t(ni_unableToLoadTokenError_code,ni_unableToLoadTokenError_desc+" | "+e)},t.createSigningKeyNotFoundInStorageError=function(e){return new t(ni_signingKeyNotFoundInStorage_code,ni_signingKeyNotFoundInStorage_desc+" | No match found for KeyId: "+e)},t.createAuthCodeRequiredError=function(){return new t(ni_authCodeRequired_code,ni_authCodeRequired_desc)},t.createAuthCodeOrNativeAccountIdRequiredError=function(){return new t(ni_authCodeOrNativeAccountRequired_code,ni_authCodeOrNativeAccountRequired_desc)},t.createSpaCodeAndNativeAccountIdPresentError=function(){return new t(ni_spaCodeAndNativeAccountPresent_code,ni_spaCodeAndNativeAccountPresent_desc)},t.createDatabaseUnavailableError=function(){return new t(ni_databaseUnavailable_code,ni_databaseUnavailable_desc)},t.createUnableToAcquireTokenFromNativePlatformError=function(){return new t(ni_unableToAcquireTokenFromNativePlatform_code,ni_unableToAcquireTokenFromNativePlatform_desc)},t.createNativeHandshakeTimeoutError=function(){return new t(ni_nativeHandshakeTimeout_code,ni_nativeHandshakeTimeout_desc)},t.createNativeExtensionNotInstalledError=function(){return new t(ni_nativeExtensionNotInstalled_code,ni_nativeExtensionNotInstalled_desc)},t.createNativeConnectionNotEstablishedError=function(){return new t(ni_nativeConnectionNotEstablished_code,ni_nativeConnectionNotEstablished_desc)},t.createNativeBrokerCalledBeforeInitialize=function(){return new t(ni_nativeBrokerCalledBeforeInitialize_code,ni_nativeBrokerCalledBeforeInitialize_desc)},t.createNativePromptParameterNotSupportedError=function(){return new t(ni_nativePromptNotSupported_code,ni_nativePromptNotSupported_desc)},t}(Po),ZD_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836",OV=(function(n){n.HandshakeRequest="Handshake",n.HandshakeResponse="HandshakeResponse",n.GetToken="GetToken",n.Response="Response"}(b1=b1||{}),function(n){n.LocalStorage="localStorage",n.SessionStorage="sessionStorage",n.MemoryStorage="memoryStorage"}(Qd=Qd||{}),function(n){n.GET="GET",n.POST="POST"}(_v=_v||{}),function(n){n.AUTHORITY="authority",n.ACQUIRE_TOKEN_ACCOUNT="acquireToken.account",n.SESSION_STATE="session.state",n.REQUEST_STATE="request.state",n.NONCE_IDTOKEN="nonce.id_token",n.ORIGIN_URI="request.origin",n.RENEW_STATUS="token.renew.status",n.URL_HASH="urlHash",n.REQUEST_PARAMS="request.params",n.SCOPES="scopes",n.INTERACTION_STATUS_KEY="interaction.status",n.CCS_CREDENTIAL="ccs.credential",n.CORRELATION_ID="request.correlationId",n.NATIVE_REQUEST="request.native",n.REDIRECT_CONTEXT="request.redirect.context"}(Lc=Lc||{}),function(n){n.ACCOUNT_KEYS="msal.account.keys",n.TOKEN_KEYS="msal.token.keys"}(yv=yv||{}),function(n){n.WRAPPER_SKU="wrapper.sku",n.WRAPPER_VER="wrapper.version"}(ZO=ZO||{}),function(n){n[n.acquireTokenRedirect=861]="acquireTokenRedirect",n[n.acquireTokenPopup=862]="acquireTokenPopup",n[n.ssoSilent=863]="ssoSilent",n[n.acquireTokenSilent_authCode=864]="acquireTokenSilent_authCode",n[n.handleRedirectPromise=865]="handleRedirectPromise",n[n.acquireTokenByCode=866]="acquireTokenByCode",n[n.acquireTokenSilent_silentFlow=61]="acquireTokenSilent_silentFlow",n[n.logout=961]="logout",n[n.logoutPopup=962]="logoutPopup"}(du=du||{}),function(n){n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none"}(mo=mo||{}),function(n){n.Startup="startup",n.Login="login",n.Logout="logout",n.AcquireToken="acquireToken",n.SsoSilent="ssoSilent",n.HandleRedirect="handleRedirect",n.None="none"}(SV=SV||{}),{scopes:GD}),JO="jwk",lz=(function(n){n.React="@azure/msal-react",n.Angular="@azure/msal-angular"}(wV=wV||{}),"msal.db"),wY=lz+".keys",tg=(function(n){n[n.Default=0]="Default",n[n.AccessToken=1]="AccessToken",n[n.AccessTokenAndRefreshToken=2]="AccessTokenAndRefreshToken",n[n.RefreshToken=3]="RefreshToken",n[n.RefreshTokenAndNetwork=4]="RefreshTokenAndNetwork",n[n.Skip=5]="Skip"}(eg=eg||{}),{redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},storageNotSupportedError:{code:"storage_not_supported",desc:"Given storage configuration option was not supported."},noRedirectCallbacksSet:{code:"no_redirect_callbacks",desc:"No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},invalidCallbackObject:{code:"invalid_callback_object",desc:"The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},stubPcaInstanceCalled:{code:"stubbed_public_client_application_called",desc:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors"},inMemRedirectUnavailable:{code:"in_mem_redirect_unavailable",desc:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},entropyNotProvided:{code:"entropy_not_provided",desc:"The available browser crypto interface requires entropy set via system.cryptoOptions.entropy configuration option."}}),Z6=function(n){function t(e,i){return(e=n.call(this,e,i)||this).name="BrowserConfigurationAuthError",Object.setPrototypeOf(e,t.prototype),e}return sp(t,n),t.createRedirectUriEmptyError=function(){return new t(tg.redirectUriNotSet.code,tg.redirectUriNotSet.desc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(tg.postLogoutUriNotSet.code,tg.postLogoutUriNotSet.desc)},t.createStorageNotSupportedError=function(e){return new t(tg.storageNotSupportedError.code,tg.storageNotSupportedError.desc+" Given Location: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t(tg.noRedirectCallbacksSet.code,tg.noRedirectCallbacksSet.desc)},t.createStubPcaInstanceCalledError=function(){return new t(tg.stubPcaInstanceCalled.code,tg.stubPcaInstanceCalled.desc)},t.createInMemoryRedirectUnavailableError=function(){return new t(tg.inMemRedirectUnavailable.code,tg.inMemRedirectUnavailable.desc)},t.createEntropyNotProvided=function(){return new t(tg.entropyNotProvided.code,tg.entropyNotProvided.desc)},t}(Po),PV=function(){function n(t){this.validateWindowStorage(t),this.windowStorage=window[t]}return n.prototype.validateWindowStorage=function(t){if(t!==Qd.LocalStorage&&t!==Qd.SessionStorage||!window[t])throw Z6.createStorageNotSupportedError(t)},n.prototype.getItem=function(t){return this.windowStorage.getItem(t)},n.prototype.setItem=function(t,e){this.windowStorage.setItem(t,e)},n.prototype.removeItem=function(t){this.windowStorage.removeItem(t)},n.prototype.getKeys=function(){return Object.keys(this.windowStorage)},n.prototype.containsKey=function(t){return this.windowStorage.hasOwnProperty(t)},n}(),uz=function(){function n(){this.cache=new Map}return n.prototype.getItem=function(t){return this.cache.get(t)||null},n.prototype.setItem=function(t,e){this.cache.set(t,e)},n.prototype.removeItem=function(t){this.cache.delete(t)},n.prototype.getKeys=function(){var t=[];return this.cache.forEach(function(e,i){t.push(i)}),t},n.prototype.containsKey=function(t){return this.cache.has(t)},n.prototype.clear=function(){this.cache.clear()},n}(),RV=function(){function n(){}return n.extractBrowserRequestState=function(t,e){if(Wi.isEmpty(e))return null;try{return C1.parseRequestState(t,e).libraryState.meta}catch(i){throw Ji.createInvalidStateError(e,i)}},n.parseServerResponseFromHash=function(t){return t?(t=new bc(t),bc.getDeserializedHash(t.getHash())):{}},n}(),dz=function(n){function t(e,i,o,s){return(e=n.call(this,e,o,s)||this).COOKIE_LIFE_MULTIPLIER=864e5,e.cacheConfig=i,e.logger=s,e.internalStorage=new uz,e.browserStorage=e.setupBrowserStorage(e.cacheConfig.cacheLocation),e.temporaryCacheStorage=e.setupTemporaryCacheStorage(e.cacheConfig.temporaryCacheLocation,e.cacheConfig.cacheLocation),i.cacheMigrationEnabled&&(e.migrateCacheEntries(),e.createKeyMaps()),e}return sp(t,n),t.prototype.setupBrowserStorage=function(e){switch(e){case Qd.LocalStorage:case Qd.SessionStorage:try{return new PV(e)}catch(i){this.logger.verbose(i);break}}return this.cacheConfig.cacheLocation=Qd.MemoryStorage,new uz},t.prototype.setupTemporaryCacheStorage=function(e,i){switch(i){case Qd.LocalStorage:case Qd.SessionStorage:try{return new PV(e||Qd.SessionStorage)}catch(o){return this.logger.verbose(o),this.internalStorage}default:return this.internalStorage}},t.prototype.migrateCacheEntries=function(){var e=this,o=Zt.CACHE_PREFIX+"."+ph.CLIENT_INFO,s=Zt.CACHE_PREFIX+"."+ph.ERROR,f=Zt.CACHE_PREFIX+"."+ph.ERROR_DESC,v=[this.browserStorage.getItem(Zt.CACHE_PREFIX+"."+ph.ID_TOKEN),this.browserStorage.getItem(o),this.browserStorage.getItem(s),this.browserStorage.getItem(f)];[ph.ID_TOKEN,ph.CLIENT_INFO,ph.ERROR,ph.ERROR_DESC].forEach(function(I,D){return e.migrateCacheEntry(I,v[D])})},t.prototype.migrateCacheEntry=function(e,i){i&&this.setTemporaryCache(e,i,!0)},t.prototype.createKeyMaps=function(){var e=this,i=(this.logger.trace("BrowserCacheManager - createKeyMaps called."),this.getItem(yv.ACCOUNT_KEYS)),o=this.getItem(yv.TOKEN_KEYS+"."+this.clientId);i&&o?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(function(s){var f;if(e.isCredentialKey(s)&&(f=e.getItem(s))){var v,I,D=e.validateAndParseJson(f);if(D&&D.hasOwnProperty("credentialType"))switch(D.credentialType){case sa.ID_TOKEN:if(wT.isIdTokenEntity(D))return e.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - idToken with key: "+s+" found, saving key to token key map"),I=Jf.toObject(new wT,D),I=e.updateCredentialCacheKey(s,I),void e.addTokenKey(I,sa.ID_TOKEN);e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed idToken validation on key: "+s);break;case sa.ACCESS_TOKEN:case sa.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(TT.isAccessTokenEntity(D))return e.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - accessToken with key: "+s+" found, saving key to token key map"),v=Jf.toObject(new TT,D),I=e.updateCredentialCacheKey(s,v),void e.addTokenKey(I,sa.ACCESS_TOKEN);e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed accessToken validation on key: "+s);break;case sa.REFRESH_TOKEN:if(WO.isRefreshTokenEntity(D))return e.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - refreshToken with key: "+s+" found, saving key to token key map"),v=Jf.toObject(new WO,D),I=e.updateCredentialCacheKey(s,v),void e.addTokenKey(I,sa.REFRESH_TOKEN);e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: "+s)}}e.isAccountKey(s)&&(f=e.getItem(s))&&(f=e.validateAndParseJson(f))&&lp.isAccountEntity(f)&&(e.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - account with key: "+s+" found, saving key to account key map"),e.addAccountKeyToMap(s))})},t.prototype.validateAndParseJson=function(e){try{var i=JSON.parse(e);return i&&"object"==typeof i?i:null}catch{return null}},t.prototype.getItem=function(e){return this.browserStorage.getItem(e)},t.prototype.setItem=function(e,i){this.browserStorage.setItem(e,i)},t.prototype.getAccount=function(e){this.logger.trace("BrowserCacheManager.getAccount called");var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&lp.isAccountEntity(i)?Jf.toObject(new lp,i):(this.removeAccountKeyFromMap(e),null)},t.prototype.setAccount=function(e){this.logger.trace("BrowserCacheManager.setAccount called");var i=e.generateAccountKey();this.setItem(i,JSON.stringify(e)),this.addAccountKeyToMap(i)},t.prototype.getAccountKeys=function(){this.logger.trace("BrowserCacheManager.getAccountKeys called");var e=this.getItem(yv.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])},t.prototype.addAccountKeyToMap=function(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: "+e);var i=this.getAccountKeys();-1===i.indexOf(e)?(i.push(e),this.setItem(yv.ACCOUNT_KEYS,JSON.stringify(i)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")},t.prototype.removeAccountKeyFromMap=function(o){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: "+o);var i=this.getAccountKeys();-1<(o=i.indexOf(o))?(i.splice(o,1),this.setItem(yv.ACCOUNT_KEYS,JSON.stringify(i)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")},t.prototype.removeAccount=function(e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return n.prototype.removeAccount.call(this,e),this.removeAccountKeyFromMap(e),[2]})})},t.prototype.removeIdToken=function(e){n.prototype.removeIdToken.call(this,e),this.removeTokenKey(e,sa.ID_TOKEN)},t.prototype.removeAccessToken=function(e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return n.prototype.removeAccessToken.call(this,e),this.removeTokenKey(e,sa.ACCESS_TOKEN),[2]})})},t.prototype.removeRefreshToken=function(e){n.prototype.removeRefreshToken.call(this,e),this.removeTokenKey(e,sa.REFRESH_TOKEN)},t.prototype.getTokenKeys=function(){this.logger.trace("BrowserCacheManager.getTokenKeys called");var e=this.getItem(yv.TOKEN_KEYS+"."+this.clientId);if(e){if((e=this.validateAndParseJson(e))&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}},t.prototype.addTokenKey=function(e,i){this.logger.trace("BrowserCacheManager addTokenKey called");var o=this.getTokenKeys();switch(i){case sa.ID_TOKEN:-1===o.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case sa.ACCESS_TOKEN:-1===o.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),o.accessToken.push(e));break;case sa.REFRESH_TOKEN:-1===o.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: "+i),Ji.createUnexpectedCredentialTypeError()}this.setItem(yv.TOKEN_KEYS+"."+this.clientId,JSON.stringify(o))},t.prototype.removeTokenKey=function(e,i){this.logger.trace("BrowserCacheManager removeTokenKey called");var o=this.getTokenKeys();switch(i){case sa.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: "+e+" from map");var s=o.idToken.indexOf(e);-1<s?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case sa.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: "+e+" from map"),-1<(s=o.accessToken.indexOf(e))?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case sa.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: "+e+" from map"),-1<(s=o.refreshToken.indexOf(e))?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: "+i),Ji.createUnexpectedCredentialTypeError()}this.setItem(yv.TOKEN_KEYS+"."+this.clientId,JSON.stringify(o))},t.prototype.getIdTokenCredential=function(e){var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&wT.isIdTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),Jf.toObject(new wT,i)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,sa.ID_TOKEN),null)},t.prototype.setIdTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");var i=e.generateCredentialKey();this.setItem(i,JSON.stringify(e)),this.addTokenKey(i,sa.ID_TOKEN)},t.prototype.getAccessTokenCredential=function(e){var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&TT.isAccessTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),Jf.toObject(new TT,i)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,sa.ACCESS_TOKEN),null)},t.prototype.setAccessTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");var i=e.generateCredentialKey();this.setItem(i,JSON.stringify(e)),this.addTokenKey(i,sa.ACCESS_TOKEN)},t.prototype.getRefreshTokenCredential=function(e){var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&WO.isRefreshTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),Jf.toObject(new WO,i)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,sa.REFRESH_TOKEN),null)},t.prototype.setRefreshTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");var i=e.generateCredentialKey();this.setItem(i,JSON.stringify(e)),this.addTokenKey(i,sa.REFRESH_TOKEN)},t.prototype.getAppMetadata=function(e){var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&sz.isAppMetadataEntity(e,i)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),Jf.toObject(new sz,i)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)},t.prototype.setAppMetadata=function(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");var i=e.generateAppMetadataKey();this.setItem(i,JSON.stringify(e))},t.prototype.getServerTelemetry=function(e){var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&Q6.isServerTelemetryEntity(e,i)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),Jf.toObject(new Q6,i)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)},t.prototype.setServerTelemetry=function(e,i){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(i))},t.prototype.getAuthorityMetadata=function(e){var i=this.internalStorage.getItem(e);return i?(i=this.validateAndParseJson(i))&&cz.isAuthorityMetadataEntity(e,i)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),Jf.toObject(new cz,i)):null:(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null)},t.prototype.getAuthorityMetadataKeys=function(){var e=this;return this.internalStorage.getKeys().filter(function(i){return e.isAuthorityMetadata(i)})},t.prototype.setWrapperMetadata=function(e,i){this.internalStorage.setItem(ZO.WRAPPER_SKU,e),this.internalStorage.setItem(ZO.WRAPPER_VER,i)},t.prototype.getWrapperMetadata=function(){return[this.internalStorage.getItem(ZO.WRAPPER_SKU)||Zt.EMPTY_STRING,this.internalStorage.getItem(ZO.WRAPPER_VER)||Zt.EMPTY_STRING]},t.prototype.setAuthorityMetadata=function(e,i){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(i))},t.prototype.getActiveAccount=function(){var e=this.generateCacheKey(ph.ACTIVE_ACCOUNT_FILTERS);return(e=this.getItem(e))?(e=this.validateAndParseJson(e))?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoByFilter({homeAccountId:e.homeAccountId,localAccountId:e.localAccountId})[0]||null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema"),e=this.generateCacheKey(ph.ACTIVE_ACCOUNT),(e=this.getItem(e))?(e=this.getAccountInfoByFilter({localAccountId:e})[0]||null)?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(e),e):null:(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null))},t.prototype.setActiveAccount=function(e){var o=this.generateCacheKey(ph.ACTIVE_ACCOUNT_FILTERS),s=this.generateCacheKey(ph.ACTIVE_ACCOUNT);e?(this.logger.verbose("setActiveAccount: Active account set"),this.browserStorage.setItem(o,JSON.stringify({homeAccountId:e.homeAccountId,localAccountId:e.localAccountId})),this.browserStorage.setItem(s,e.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(o),this.browserStorage.removeItem(s))},t.prototype.getAccountInfoByFilter=function(e){var i=this.getAllAccounts();return this.logger.trace("BrowserCacheManager.getAccountInfoByFilter: total "+i.length+" accounts found"),i.filter(function(o){return!(e.username&&e.username.toLowerCase()!==o.username.toLowerCase()||e.homeAccountId&&e.homeAccountId!==o.homeAccountId||e.localAccountId&&e.localAccountId!==o.localAccountId||e.tenantId&&e.tenantId!==o.tenantId||e.environment&&e.environment!==o.environment)})},t.prototype.getAccountInfoByHints=function(e,i){var o=this.getAllAccounts().filter(function(s){return i?i===(s.idTokenClaims&&s.idTokenClaims.sid):!!e&&e===s.username});if(1===o.length)return o[0];if(1<o.length)throw Ji.createMultipleMatchingAccountsInCacheError();return null},t.prototype.getThrottlingCache=function(e){var i=this.getItem(e);return(i=i&&this.validateAndParseJson(i))&&TV.isThrottlingEntity(e,i)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),Jf.toObject(new TV,i)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)},t.prototype.setThrottlingCache=function(e,i){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(i))},t.prototype.getTemporaryCache=function(e,i){return i=i?this.generateCacheKey(e):e,this.cacheConfig.storeAuthStateInCookie&&(e=this.getItemCookie(i))?(this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e):(e=this.temporaryCacheStorage.getItem(i))?(this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),e):this.cacheConfig.cacheLocation===Qd.LocalStorage&&(e=this.browserStorage.getItem(i))?(this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e):(this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null)},t.prototype.setTemporaryCache=function(e,i,o){o=o?this.generateCacheKey(e):e,this.temporaryCacheStorage.setItem(o,i),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,i))},t.prototype.removeItem=function(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))},t.prototype.containsKey=function(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)},t.prototype.getKeys=function(){return JB(this.browserStorage.getKeys(),this.temporaryCacheStorage.getKeys())},t.prototype.clear=function(){return Pr(this,void 0,void 0,function(){var e=this;return Rr(this,function(i){switch(i.label){case 0:return[4,this.removeAllAccounts()];case 1:return i.sent(),this.removeAppMetadata(),this.getKeys().forEach(function(o){!e.browserStorage.containsKey(o)&&!e.temporaryCacheStorage.containsKey(o)||-1===o.indexOf(Zt.CACHE_PREFIX)&&-1===o.indexOf(e.clientId)||e.removeItem(o)}),this.internalStorage.clear(),[2]}})})},t.prototype.clearTokensAndKeysWithClaims=function(){return Pr(this,void 0,void 0,function(){var e,i,o=this;return Rr(this,function(s){switch(s.label){case 0:return this.logger.trace("BrowserCacheManager.clearTokensAndKeysWithClaims called"),e=this.getTokenKeys(),i=[],e.accessToken.forEach(function(f){var v=o.getAccessTokenCredential(f);null!=v&&v.requestedClaimsHash&&f.includes(v.requestedClaimsHash.toLowerCase())&&i.push(o.removeAccessToken(f))}),[4,Promise.all(i)];case 1:return s.sent(),0<i.length&&this.logger.warning(i.length+" access tokens with claims in the cache keys have been removed from the cache."),[2]}})})},t.prototype.setItemCookie=function(e,i,o){e=encodeURIComponent(e)+"="+encodeURIComponent(i)+";path=/;SameSite=Lax;",o&&(e+="expires="+this.getCookieExpirationTime(o)+";"),this.cacheConfig.secureCookies&&(e+="Secure;"),document.cookie=e},t.prototype.getItemCookie=function(e){for(var i=encodeURIComponent(e)+"=",o=document.cookie.split(";"),s=0;s<o.length;s++){for(var f=o[s];" "===f.charAt(0);)f=f.substring(1);if(0===f.indexOf(i))return decodeURIComponent(f.substring(i.length,f.length))}return Zt.EMPTY_STRING},t.prototype.clearMsalCookies=function(){var e=this,i=Zt.CACHE_PREFIX+"."+this.clientId;document.cookie.split(";").forEach(function(o){for(;" "===o.charAt(0);)o=o.substring(1);var s;0===o.indexOf(i)&&(s=o.split("=")[0],e.clearItemCookie(s))})},t.prototype.clearItemCookie=function(e){this.setItemCookie(e,Zt.EMPTY_STRING,-1)},t.prototype.getCookieExpirationTime=function(e){return new Date((new Date).getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()},t.prototype.getCache=function(){return this.browserStorage},t.prototype.setCache=function(){},t.prototype.generateCacheKey=function(e){return this.validateAndParseJson(e)?JSON.stringify(e):Wi.startsWith(e,Zt.CACHE_PREFIX)||Wi.startsWith(e,ph.ADAL_ID_TOKEN)?e:Zt.CACHE_PREFIX+"."+this.clientId+"."+e},t.prototype.generateAuthorityKey=function(e){return e=C1.parseRequestState(this.cryptoImpl,e).libraryState.id,this.generateCacheKey(Lc.AUTHORITY+"."+e)},t.prototype.generateNonceKey=function(e){return e=C1.parseRequestState(this.cryptoImpl,e).libraryState.id,this.generateCacheKey(Lc.NONCE_IDTOKEN+"."+e)},t.prototype.generateStateKey=function(e){return e=C1.parseRequestState(this.cryptoImpl,e).libraryState.id,this.generateCacheKey(Lc.REQUEST_STATE+"."+e)},t.prototype.getCachedAuthority=function(i){return i=this.generateStateKey(i),(i=this.getTemporaryCache(i))?(i=this.generateAuthorityKey(i),this.getTemporaryCache(i)):null},t.prototype.updateCacheEntries=function(e,i,o,s,f){this.logger.trace("BrowserCacheManager.updateCacheEntries called");var v,I=this.generateStateKey(e);this.setTemporaryCache(I,e,!1),I=this.generateNonceKey(e),this.setTemporaryCache(I,i,!1),I=this.generateAuthorityKey(e),this.setTemporaryCache(I,o,!1),f?(v={credential:f.homeAccountId,type:$g.HOME_ACCOUNT_ID},this.setTemporaryCache(Lc.CCS_CREDENTIAL,JSON.stringify(v),!0)):Wi.isEmpty(s)||(v={credential:s,type:$g.UPN},this.setTemporaryCache(Lc.CCS_CREDENTIAL,JSON.stringify(v),!0))},t.prototype.resetRequestCache=function(e){var i=this;this.logger.trace("BrowserCacheManager.resetRequestCache called"),Wi.isEmpty(e)||this.getKeys().forEach(function(o){-1!==o.indexOf(e)&&i.removeItem(o)}),e&&(this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(Lc.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(Lc.ORIGIN_URI)),this.removeItem(this.generateCacheKey(Lc.URL_HASH)),this.removeItem(this.generateCacheKey(Lc.CORRELATION_ID)),this.removeItem(this.generateCacheKey(Lc.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(Lc.NATIVE_REQUEST)),this.setInteractionInProgress(!1)},t.prototype.cleanRequestByState=function(e){this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e&&(e=this.generateStateKey(e),e=this.temporaryCacheStorage.getItem(e),this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: "+e),this.resetRequestCache(e||Zt.EMPTY_STRING)),this.clearMsalCookies()},t.prototype.cleanRequestByInteractionType=function(e){var i=this;this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(function(o){var s;-1!==o.indexOf(Lc.REQUEST_STATE)&&(o=i.temporaryCacheStorage.getItem(o))&&(s=RV.extractBrowserRequestState(i.cryptoImpl,o))&&s.interactionType===e&&(i.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: "+o),i.resetRequestCache(o))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)},t.prototype.cacheCodeRequest=function(e,i){this.logger.trace("BrowserCacheManager.cacheCodeRequest called"),i=i.base64Encode(JSON.stringify(e)),this.setTemporaryCache(Lc.REQUEST_PARAMS,i,!0)},t.prototype.getCachedRequest=function(e,i){this.logger.trace("BrowserCacheManager.getCachedRequest called");var o=this.getTemporaryCache(Lc.REQUEST_PARAMS,!0);if(!o)throw ki.createNoTokenRequestCacheError();if(!(i=this.validateAndParseJson(i.base64Decode(o))))throw ki.createUnableToParseTokenRequestCacheError();if(this.removeItem(this.generateCacheKey(Lc.REQUEST_PARAMS)),Wi.isEmpty(i.authority)){if(o=this.generateAuthorityKey(e),!(e=this.getTemporaryCache(o)))throw ki.createNoCachedAuthorityError();i.authority=e}return i},t.prototype.getCachedNativeRequest=function(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");var e=this.getTemporaryCache(Lc.NATIVE_REQUEST,!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)},t.prototype.isInteractionInProgress=function(e){var i=this.getInteractionInProgress();return e?i===this.clientId:!!i},t.prototype.getInteractionInProgress=function(){return this.getTemporaryCache(Zt.CACHE_PREFIX+"."+Lc.INTERACTION_STATUS_KEY,!1)},t.prototype.setInteractionInProgress=function(e){var i=Zt.CACHE_PREFIX+"."+Lc.INTERACTION_STATUS_KEY;if(e){if(this.getInteractionInProgress())throw ki.createInteractionInProgressError();this.setTemporaryCache(i,this.clientId,!1)}else this.getInteractionInProgress()===this.clientId&&this.removeItem(i)},t.prototype.getLegacyLoginHint=function(){var i,e=this.getTemporaryCache(ph.ADAL_ID_TOKEN);if(e&&(this.browserStorage.removeItem(ph.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved.")),(i=this.getTemporaryCache(ph.ID_TOKEN,!0))&&(this.removeItem(this.generateCacheKey(ph.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved")),i=i||e){if((e=new mv(i,this.cryptoImpl)).claims&&e.claims.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),e.claims.preferred_username;if(e.claims&&e.claims.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),e.claims.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null},t.prototype.updateCredentialCacheKey=function(e,i){var o=i.generateCredentialKey();if(e!==o){var s=this.getItem(e);if(s)return this.removeItem(e),this.setItem(o,s),this.logger.verbose("Updated an outdated "+i.credentialType+" cache key"),o;this.logger.error("Attempted to update an outdated "+i.credentialType+" cache key but no item matching the outdated key was found in storage")}return e},t.prototype.getRedirectRequestContext=function(){return this.getTemporaryCache(Lc.REDIRECT_CONTEXT,!0)},t.prototype.setRedirectRequestContext=function(e){this.setTemporaryCache(Lc.REDIRECT_CONTEXT,e,!0)},t}(Jf),hz="@azure/msal-browser",JD="2.38.3",AY=function(){function n(){}return n.prototype.sendGetRequestAsync=function(t,e){return Pr(this,void 0,void 0,function(){var i,o,s;return Rr(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,fetch(t,{method:_v.GET,headers:this.getFetchHeaders(e)})];case 1:return i=f.sent(),[3,3];case 2:throw o=f.sent(),window.navigator.onLine?ki.createGetRequestFailedError(o,t):ki.createNoNetworkConnectivityError();case 3:return f.trys.push([3,5,,6]),s={headers:this.getHeaderDict(i.headers)},[4,i.json()];case 4:return[2,(s.body=f.sent(),s.status=i.status,s)];case 5:throw f.sent(),ki.createFailedToParseNetworkResponseError(t);case 6:return[2]}})})},n.prototype.sendPostRequestAsync=function(t,e){return Pr(this,void 0,void 0,function(){var i,o,s,f;return Rr(this,function(v){switch(v.label){case 0:i=e&&e.body||Zt.EMPTY_STRING,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,fetch(t,{method:_v.POST,headers:this.getFetchHeaders(e),body:i})];case 2:return o=v.sent(),[3,4];case 3:throw s=v.sent(),window.navigator.onLine?ki.createPostRequestFailedError(s,t):ki.createNoNetworkConnectivityError();case 4:return v.trys.push([4,6,,7]),f={headers:this.getHeaderDict(o.headers)},[4,o.json()];case 5:return[2,(f.body=v.sent(),f.status=o.status,f)];case 6:throw v.sent(),ki.createFailedToParseNetworkResponseError(t);case 7:return[2]}})})},n.prototype.getFetchHeaders=function(t){var e,i=new Headers;return t&&t.headers&&(e=t.headers,Object.keys(e).forEach(function(o){i.append(o,e[o])})),i},n.prototype.getHeaderDict=function(t){var e={};return t.forEach(function(i,o){e[o]=i}),e},n}(),IY=function(){function n(){}return n.prototype.sendGetRequestAsync=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,this.sendRequestAsync(t,_v.GET,e)]})})},n.prototype.sendPostRequestAsync=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,this.sendRequestAsync(t,_v.POST,e)]})})},n.prototype.sendRequestAsync=function(t,e,i){var o=this;return new Promise(function(s,f){var v=new XMLHttpRequest;if(v.open(e,t,!0),o.setXhrHeaders(v,i),v.onload=function(){(v.status<200||300<=v.status)&&f(e===_v.POST?ki.createPostRequestFailedError("Failed with status "+v.status,t):ki.createGetRequestFailedError("Failed with status "+v.status,t));try{var I=JSON.parse(v.responseText),D={headers:o.getHeaderDict(v),body:I,status:v.status};s(D)}catch{f(ki.createFailedToParseNetworkResponseError(t))}},v.onerror=function(){window.navigator.onLine?f(e===_v.POST?ki.createPostRequestFailedError("Failed with status "+v.status,t):ki.createGetRequestFailedError("Failed with status "+v.status,t)):f(ki.createNoNetworkConnectivityError())},e===_v.POST&&i&&i.body)v.send(i.body);else{if(e!==_v.GET)throw ki.createHttpMethodNotImplementedError(e);v.send()}})},n.prototype.setXhrHeaders=function(t,e){var i;e&&e.headers&&(i=e.headers,Object.keys(i).forEach(function(o){t.setRequestHeader(o,i[o])}))},n.prototype.getHeaderDict=function(e){e=e.getAllResponseHeaders().trim().split(/[\r\n]+/);var i={};return e.forEach(function(f){var s=(f=f.split(": ")).shift();f=f.join(": "),s&&f&&(i[s]=f)}),i},n}(),ld=function(){function n(){}return n.clearHash=function(t){t.location.hash=Zt.EMPTY_STRING,"function"==typeof t.history.replaceState&&t.history.replaceState(null,Zt.EMPTY_STRING,""+t.location.origin+t.location.pathname+t.location.search)},n.replaceHash=function(t){(t=t.split("#")).shift(),window.location.hash=0<t.length?t.join("#"):Zt.EMPTY_STRING},n.isInIframe=function(){return window.parent!==window},n.isInPopup=function(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf("msal.")},n.getCurrentUri=function(){return window.location.href.split("?")[0].split("#")[0]},n.getHomepage=function(){var t=new bc(window.location.href).getUrlComponents();return t.Protocol+"//"+t.HostNameAndPort+"/"},n.getBrowserNetworkClient=function(){return new(window.fetch&&window.Headers?AY:IY)},n.blockReloadInHiddenIframes=function(){if(bc.hashContainsKnownProperties(window.location.hash)&&n.isInIframe())throw ki.createBlockReloadInHiddenIframeError()},n.blockRedirectInIframe=function(t,e){var i=n.isInIframe();if(t===mo.Redirect&&i&&!e)throw ki.createRedirectInIframeError(i)},n.blockAcquireTokenInPopups=function(){if(n.isInPopup())throw ki.createBlockAcquireTokenInPopupsError()},n.blockNonBrowserEnvironment=function(t){if(!t)throw ki.createNonBrowserEnvironmentError()},n.blockNativeBrokerCalledBeforeInitialized=function(t,e){if(t&&!e)throw ki.createNativeBrokerCalledBeforeInitialize()},n.detectIEOrEdge=function(){var t=(i=window.navigator.userAgent).indexOf("MSIE "),e=i.indexOf("Trident/"),i=i.indexOf("Edge/");return 0<t||0<e||0<i},n}(),xV=function(){function n(t,e,i,o,s,f,v,I,D){this.config=t,this.browserStorage=e,this.browserCrypto=i,this.networkClient=this.config.system.networkClient,this.eventHandler=s,this.navigationClient=f,this.nativeMessageHandler=I,this.correlationId=D||this.browserCrypto.createNewGuid(),this.logger=o.clone("msal.js.browser",JD,this.correlationId),this.performanceClient=v}return n.prototype.clearCacheOnLogout=function(t){return Pr(this,void 0,void 0,function(){return Rr(this,function(e){switch(e.label){case 0:if(!t)return[3,5];lp.accountInfoIsEqual(t,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null)),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.browserStorage.removeAccount(lp.generateAccountCacheKey(t))];case 2:return e.sent(),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request."),[3,4];case 3:return e.sent(),this.logger.error("Account provided in logout request was not found. Local cache unchanged."),[3,4];case 4:return[3,9];case 5:return e.trys.push([5,8,,9]),this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),[4,this.browserStorage.clear()];case 6:return e.sent(),[4,this.browserCrypto.clearKeystore()];case 7:return e.sent(),[3,9];case 8:return e.sent(),this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged."),[3,9];case 9:return[2]}})})},n.prototype.initializeBaseRequest=function(t,e){return Pr(this,void 0,void 0,function(){var i,o,s;return Rr(this,function(f){switch(f.label){case 0:return this.performanceClient.addQueueMeasurement(ar.InitializeBaseRequest,t.correlationId),this.logger.verbose("Initializing BaseAuthRequest"),i=t.authority||this.config.auth.authority,e?[4,this.validateRequestAuthority(i,e)]:[3,2];case 1:f.sent(),f.label=2;case 2:if(o=JB(t&&t.scopes||[]),(o=bo(bo({},t),{correlationId:this.correlationId,authority:i,scopes:o})).authenticationScheme){if(o.authenticationScheme===Cl.SSH){if(!t.sshJwk)throw uu.createMissingSshJwkError();if(!t.sshKid)throw uu.createMissingSshKidError()}this.logger.verbose('Authentication Scheme set to "'+o.authenticationScheme+'" as configured in Auth request')}else o.authenticationScheme=Cl.BEARER,this.logger.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return this.config.cache.claimsBasedCachingEnabled&&t.claims&&!Wi.isEmptyObj(t.claims)?(s=o,[4,this.browserCrypto.hashString(t.claims)]):[3,4];case 3:s.requestedClaimsHash=f.sent(),f.label=4;case 4:return[2,o]}})})},n.prototype.getRedirectUri=function(t){return this.logger.verbose("getRedirectUri called"),t=t||this.config.auth.redirectUri||ld.getCurrentUri(),bc.getAbsoluteUrl(t,ld.getCurrentUri())},n.prototype.validateRequestAuthority=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){switch(i.label){case 0:return[4,this.getDiscoveredAuthority(t)];case 1:if(i.sent().isAlias(e.environment))return[2];throw uu.createAuthorityMismatchError()}})})},n.prototype.initializeServerTelemetryManager=function(t,e){return this.logger.verbose("initializeServerTelemetryManager called"),t={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:t,forceRefresh:e||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]},new bY(t,this.browserStorage)},n.prototype.getDiscoveredAuthority=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){switch(i.label){case 0:return this.logger.verbose("getDiscoveredAuthority called"),e={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},t?(this.logger.verbose("Creating discovered authority with request authority"),[4,W6.createDiscoveredInstance(t,this.config.system.networkClient,this.browserStorage,e,this.logger)]):[3,2];case 1:case 3:return[2,i.sent()];case 2:return this.logger.verbose("Creating discovered authority with configured authority"),[4,W6.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,e,this.logger)]}})})},n}(),eP=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return sp(t,n),t.prototype.initializeAuthorizationCodeRequest=function(e){return Pr(this,void 0,void 0,function(){var i,o;return Rr(this,function(s){switch(s.label){case 0:return this.performanceClient.addQueueMeasurement(ar.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),this.logger.verbose("initializeAuthorizationRequest called",e.correlationId),[4,this.browserCrypto.generatePkceCodes()];case 1:return i=s.sent(),o=bo(bo({},e),{redirectUri:e.redirectUri,code:Zt.EMPTY_STRING,codeVerifier:i.verifier}),e.codeChallenge=i.challenge,e.codeChallengeMethod=Zt.S256_CODE_CHALLENGE_METHOD,[2,o]}})})},t.prototype.initializeLogoutRequest=function(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);var i,o=bo({correlationId:this.correlationId||this.browserCrypto.createNewGuid()},e);return e?e.logoutHint?this.logger.verbose("logoutHint has already been set in logoutRequest"):e.account?(i=this.getLogoutHintFromIdTokenClaims(e.account))&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),o.logoutHint=i):this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set"):this.logger.verbose("logoutHint will not be set since no logout request was configured"),e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",o.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",o.correlationId),o.postLogoutRedirectUri=bc.getAbsoluteUrl(e.postLogoutRedirectUri,ld.getCurrentUri())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",o.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",o.correlationId),o.postLogoutRedirectUri=bc.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ld.getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",o.correlationId),o.postLogoutRedirectUri=bc.getAbsoluteUrl(ld.getCurrentUri(),ld.getCurrentUri())),o},t.prototype.getLogoutHintFromIdTokenClaims=function(e){if(e=e.idTokenClaims){if(e.login_hint)return e.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null},t.prototype.createAuthCodeClient=function(e,i,o){return Pr(this,void 0,void 0,function(){var s;return Rr(this,function(f){switch(f.label){case 0:return this.performanceClient.addQueueMeasurement(ar.StandardInteractionClientCreateAuthCodeClient,this.correlationId),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,i,o)];case 1:return s=f.sent(),[2,new yV(s,this.performanceClient)]}})})},t.prototype.getClientConfiguration=function(e,i,o){return Pr(this,void 0,void 0,function(){var s,f;return Rr(this,function(v){switch(v.label){case 0:return this.performanceClient.addQueueMeasurement(ar.StandardInteractionClientGetClientConfiguration,this.correlationId),this.logger.verbose("getClientConfiguration called",this.correlationId),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),[4,this.getDiscoveredAuthority(i,o)];case 1:return s=v.sent(),[2,{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:(f=this.config.system.loggerOptions).loggerCallback,piiLoggingEnabled:f.piiLoggingEnabled,logLevel:f.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:"msal.js.browser",version:JD,cpu:Zt.EMPTY_STRING,os:Zt.EMPTY_STRING},telemetry:this.config.telemetry}]}})})},t.prototype.validateAndExtractStateFromHash=function(e,i,o){if(this.logger.verbose("validateAndExtractStateFromHash called",o),!e.state)throw ki.createHashDoesNotContainStateError();var s=RV.extractBrowserRequestState(this.browserCrypto,e.state);if(!s)throw ki.createUnableToParseStateError();if(s.interactionType!==i)throw ki.createStateInteractionTypeMismatchError();return this.logger.verbose("Returning state from hash",o),e.state},t.prototype.getDiscoveredAuthority=function(e,i){var o;return Pr(this,void 0,void 0,function(){var s,f,v;return Rr(this,function(I){switch(I.label){case 0:return this.performanceClient.addQueueMeasurement(ar.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),this.logger.verbose("getDiscoveredAuthority called",this.correlationId),s=null==(o=this.performanceClient)?void 0:o.startMeasurement(ar.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),f={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},v=XD.generateAuthority(v=e||this.config.auth.authority,i||this.config.auth.azureCloudOptions),this.logger.verbose("Creating discovered authority with configured authority",this.correlationId),this.performanceClient.setPreQueueTime(ar.AuthorityFactoryCreateDiscoveredInstance,this.correlationId),[4,W6.createDiscoveredInstance(v,this.config.system.networkClient,this.browserStorage,f,this.logger,this.performanceClient,this.correlationId).then(function(D){return s.endMeasurement({success:!0}),D}).catch(function(D){throw s.endMeasurement({errorCode:D.errorCode,subErrorCode:D.subError,success:!1}),D})];case 1:return[2,I.sent()]}})})},t.prototype.initializeAuthorizationRequest=function(e,i){return Pr(this,void 0,void 0,function(){var o,s,f,v,I;return Rr(this,function(D){switch(D.label){case 0:return this.performanceClient.addQueueMeasurement(ar.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId),this.logger.verbose("initializeAuthorizationRequest called",this.correlationId),o=this.getRedirectUri(e.redirectUri),s=C1.setRequestState(this.browserCrypto,e&&e.state||Zt.EMPTY_STRING,s={interactionType:i}),this.performanceClient.setPreQueueTime(ar.InitializeBaseRequest,this.correlationId),v=[{}],[4,this.initializeBaseRequest(e)];case 1:return f=bo.apply(void 0,[bo.apply(void 0,v.concat([D.sent()])),{redirectUri:o,state:s,nonce:e.nonce||this.browserCrypto.createNewGuid(),responseMode:U6.FRAGMENT}]),(I=e.account||this.browserStorage.getActiveAccount())&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: "+I.homeAccountId,this.correlationId),f.account=I),Wi.isEmpty(f.loginHint)&&!I&&(I=this.browserStorage.getLegacyLoginHint())&&(f.loginHint=I),[2,f]}})})},t}(xV),pz=function(){function n(t,e,i,o,s){this.authModule=t,this.browserStorage=e,this.authCodeRequest=i,this.logger=o,this.performanceClient=s}return n.prototype.handleCodeResponseFromHash=function(t,e,i,o){return Pr(this,void 0,void 0,function(){var s,f;return Rr(this,function(v){if(this.performanceClient.addQueueMeasurement(ar.HandleCodeResponseFromHash,this.authCodeRequest.correlationId),this.logger.verbose("InteractionHandler.handleCodeResponse called"),Wi.isEmpty(t))throw ki.createEmptyHashError(t);if(s=this.browserStorage.generateStateKey(e),!(s=this.browserStorage.getTemporaryCache(s)))throw Ji.createStateNotFoundError("Cached State");try{f=this.authModule.handleFragmentResponse(t,s)}catch(I){throw I instanceof ET&&I.subError===ni_userCancelledError_code?ki.createUserCancelledError():I}return this.performanceClient.setPreQueueTime(ar.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),[2,this.handleCodeResponseFromServer(f,e,i,o)]})})},n.prototype.handleCodeResponseFromServer=function(t,e,i,o,s){return void 0===s&&(s=!0),Pr(this,void 0,void 0,function(){var f,v,I;return Rr(this,function(D){switch(D.label){case 0:if(this.performanceClient.addQueueMeasurement(ar.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),f=this.browserStorage.generateStateKey(e),f=this.browserStorage.getTemporaryCache(f))return v=this.browserStorage.generateNonceKey(f),v=this.browserStorage.getTemporaryCache(v),this.authCodeRequest.code=t.code,t.cloud_instance_host_name?(this.performanceClient.setPreQueueTime(ar.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),[4,this.updateTokenEndpointAuthority(t.cloud_instance_host_name,i,o)]):[3,2];throw Ji.createStateNotFoundError("Cached State");case 1:D.sent(),D.label=2;case 2:return s&&(t.nonce=v||void 0),t.state=f,t.client_info?this.authCodeRequest.clientInfo=t.client_info:(I=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=I),this.performanceClient.setPreQueueTime(ar.AuthClientAcquireToken,this.authCodeRequest.correlationId),[4,this.authModule.acquireToken(this.authCodeRequest,t)];case 3:return I=D.sent(),this.browserStorage.cleanRequestByState(e),[2,I]}})})},n.prototype.updateTokenEndpointAuthority=function(t,e,i){return Pr(this,void 0,void 0,function(){var o;return Rr(this,function(s){switch(s.label){case 0:return this.performanceClient.addQueueMeasurement(ar.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),[4,W6.createDiscoveredInstance(o="https://"+t+"/"+e.tenant+"/",i,this.browserStorage,e.options,this.logger,this.performanceClient,this.authCodeRequest.correlationId)];case 1:return o=s.sent(),this.authModule.updateAuthority(o),[2]}})})},n.prototype.checkCcsCredentials=function(){var t=this.browserStorage.getTemporaryCache(Lc.CCS_CREDENTIAL,!0);if(t)try{return JSON.parse(t)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: "+t)}return null},n}(),NV=function(n){function t(e,i,o,s,f,v){return(e=n.call(this,e,i,o,s,v)||this).browserCrypto=f,e}return sp(t,n),t.prototype.initiateAuthRequest=function(e,i){return Pr(this,void 0,void 0,function(){var o;return Rr(this,function(s){switch(s.label){case 0:return this.logger.verbose("RedirectHandler.initiateAuthRequest called"),Wi.isEmpty(e)?[3,7]:(i.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Lc.ORIGIN_URI,i.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Lc.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest,this.browserCrypto),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: "+e),o={apiId:du.acquireTokenRedirect,timeout:i.redirectTimeout,noHistory:!1},"function"!=typeof i.onRedirectNavigate?[3,4]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1===i.onRedirectNavigate(e)?[3,2]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),[4,i.navigationClient.navigateExternal(e,o)])));case 1:case 5:return s.sent(),[2];case 2:return this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation"),[2];case 3:return[3,6];case 4:return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),[4,i.navigationClient.navigateExternal(e,o)];case 6:return[3,8];case 7:throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),ki.createEmptyNavigationUriError();case 8:return[2]}})})},t.prototype.handleCodeResponseFromHash=function(e,i,o,s){return Pr(this,void 0,void 0,function(){var f,v,I,D;return Rr(this,function(k){switch(k.label){case 0:if(this.logger.verbose("RedirectHandler.handleCodeResponse called"),Wi.isEmpty(e))throw ki.createEmptyHashError(e);if(this.browserStorage.setInteractionInProgress(!1),f=this.browserStorage.generateStateKey(i),!(f=this.browserStorage.getTemporaryCache(f)))throw Ji.createStateNotFoundError("Cached State");try{v=this.authModule.handleFragmentResponse(e,f)}catch(X){throw X instanceof ET&&X.subError===ni_userCancelledError_code?ki.createUserCancelledError():X}return I=this.browserStorage.generateNonceKey(f),I=this.browserStorage.getTemporaryCache(I),this.authCodeRequest.code=v.code,v.cloud_instance_host_name?[4,this.updateTokenEndpointAuthority(v.cloud_instance_host_name,o,s)]:[3,2];case 1:k.sent(),k.label=2;case 2:return v.nonce=I||void 0,v.state=f,v.client_info?this.authCodeRequest.clientInfo=v.client_info:(D=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=D),[4,this.authModule.acquireToken(this.authCodeRequest,v)];case 3:return D=k.sent(),this.browserStorage.cleanRequestByState(i),[2,D]}})})},t}(pz),ek=(function(n){n.INITIALIZE_START="msal:initializeStart",n.INITIALIZE_END="msal:initializeEnd",n.ACCOUNT_ADDED="msal:accountAdded",n.ACCOUNT_REMOVED="msal:accountRemoved",n.LOGIN_START="msal:loginStart",n.LOGIN_SUCCESS="msal:loginSuccess",n.LOGIN_FAILURE="msal:loginFailure",n.ACQUIRE_TOKEN_START="msal:acquireTokenStart",n.ACQUIRE_TOKEN_SUCCESS="msal:acquireTokenSuccess",n.ACQUIRE_TOKEN_FAILURE="msal:acquireTokenFailure",n.ACQUIRE_TOKEN_NETWORK_START="msal:acquireTokenFromNetworkStart",n.SSO_SILENT_START="msal:ssoSilentStart",n.SSO_SILENT_SUCCESS="msal:ssoSilentSuccess",n.SSO_SILENT_FAILURE="msal:ssoSilentFailure",n.ACQUIRE_TOKEN_BY_CODE_START="msal:acquireTokenByCodeStart",n.ACQUIRE_TOKEN_BY_CODE_SUCCESS="msal:acquireTokenByCodeSuccess",n.ACQUIRE_TOKEN_BY_CODE_FAILURE="msal:acquireTokenByCodeFailure",n.HANDLE_REDIRECT_START="msal:handleRedirectStart",n.HANDLE_REDIRECT_END="msal:handleRedirectEnd",n.POPUP_OPENED="msal:popupOpened",n.LOGOUT_START="msal:logoutStart",n.LOGOUT_SUCCESS="msal:logoutSuccess",n.LOGOUT_FAILURE="msal:logoutFailure",n.LOGOUT_END="msal:logoutEnd",n.RESTORE_FROM_BFCACHE="msal:restoreFromBFCache"}(wa=wa||{}),function(n){n.USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",n.USER_CANCEL="USER_CANCEL",n.NO_NETWORK="NO_NETWORK",n.TRANSIENT_ERROR="TRANSIENT_ERROR",n.PERSISTENT_ERROR="PERSISTENT_ERROR",n.DISABLED="DISABLED",n.ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE"}(Bb=Bb||{}),{extensionError:{code:"ContentError"},userSwitch:{code:"user_switch",desc:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},tokensNotFoundInCache:{code:"tokens_not_found_in_internal_memory_cache",desc:"Tokens not cached in MSAL JS internal memory, please make the WAM request"}}),vv=function(n){function t(e,i,o){return e=n.call(this,e,i)||this,Object.setPrototypeOf(e,t.prototype),e.name="NativeAuthError",e.ext=o,e}return sp(t,n),t.prototype.isFatal=function(){return!(!this.ext||!this.ext.status||this.ext.status!==Bb.PERSISTENT_ERROR&&this.ext.status!==Bb.DISABLED)||this.errorCode===ek.extensionError.code},t.createError=function(e,i,o){if(o&&o.status)switch(o.status){case Bb.ACCOUNT_UNAVAILABLE:return km.createNativeAccountUnavailableError();case Bb.USER_INTERACTION_REQUIRED:return new km(e,i);case Bb.USER_CANCEL:return ki.createUserCancelledError();case Bb.NO_NETWORK:return ki.createNoNetworkConnectivityError()}return new t(e,i,o)},t.createUserSwitchError=function(){return new t(ek.userSwitch.code,ek.userSwitch.desc)},t.createTokensNotFoundInCacheError=function(){return new t(ek.tokensNotFoundInCache.code,ek.tokensNotFoundInCache.desc)},t}(Po),DV=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return sp(t,n),t.prototype.acquireToken=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f;return Rr(this,function(v){switch(v.label){case 0:return i=this.performanceClient.startMeasurement(ar.SilentCacheClientAcquireToken,e.correlationId),s=this.initializeServerTelemetryManager(du.acquireTokenSilent_silentFlow),[4,this.createSilentFlowClient(s,e.authority,e.azureCloudOptions)];case 1:o=v.sent(),this.logger.verbose("Silent auth client created"),v.label=2;case 2:return v.trys.push([2,4,,5]),[4,o.acquireCachedToken(e)];case 3:return s=v.sent(),i.endMeasurement({success:!0,fromCache:!0}),[2,s];case 4:throw(f=v.sent())instanceof ki&&f.errorCode===ni_signingKeyNotFoundInStorage_code&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i.endMeasurement({errorCode:f instanceof Po&&f.errorCode||void 0,subErrorCode:f instanceof Po&&f.subError||void 0,success:!1}),f;case 5:return[2]}})})},t.prototype.logout=function(){return Promise.reject(ki.createSilentLogoutUnsupportedError())},t.prototype.createSilentFlowClient=function(e,i,o){return Pr(this,void 0,void 0,function(){var s;return Rr(this,function(f){switch(f.label){case 0:return this.performanceClient.setPreQueueTime(ar.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,i,o)];case 1:return s=f.sent(),[2,new fY(s,this.performanceClient)]}})})},t.prototype.initializeSilentRequest=function(e,i){return Pr(this,void 0,void 0,function(){var o;return Rr(this,function(s){switch(s.label){case 0:return this.performanceClient.addQueueMeasurement(ar.InitializeSilentRequest,this.correlationId),this.performanceClient.setPreQueueTime(ar.InitializeBaseRequest,this.correlationId),o=[bo({},e)],[4,this.initializeBaseRequest(e,i)];case 1:return[2,bo.apply(void 0,[bo.apply(void 0,o.concat([s.sent()])),{account:i,forceRefresh:e.forceRefresh||!1}])]}})})},t}(eP),tP=function(n){function t(e,i,o,s,f,v,I,D,k,X,fe,Se){return(i=n.call(this,e,i,o,s,f,v,D,k,Se)||this).apiId=I,i.accountId=X,i.nativeMessageHandler=k,i.nativeStorageManager=fe,i.silentCacheClient=new DV(e,i.nativeStorageManager,o,s,f,v,D,k,Se),i}return sp(t,n),t.prototype.acquireToken=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v;return Rr(this,function(I){switch(I.label){case 0:return this.logger.trace("NativeInteractionClient - acquireToken called."),i=this.performanceClient.startMeasurement(ar.NativeInteractionClientAcquireToken,e.correlationId),o=Dm.nowSeconds(),[4,this.initializeNativeRequest(e)];case 1:s=I.sent(),I.label=2;case 2:return I.trys.push([2,4,,5]),[4,this.acquireTokensFromCache(this.accountId,s)];case 3:return f=I.sent(),i.endMeasurement({success:!0,isNativeBroker:!1,fromCache:!0}),[2,f];case 4:return I.sent(),this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call"),[3,5];case 5:return[4,this.nativeMessageHandler.sendMessage(f={method:b1.GetToken,request:s})];case 6:return v=I.sent(),v=this.validateNativeResponse(v),[2,this.handleNativeResponse(v,s,o).then(function(D){return i.endMeasurement({success:!0,isNativeBroker:!0,requestId:D.requestId}),D}).catch(function(D){throw i.endMeasurement({success:!1,errorCode:D.errorCode,subErrorCode:D.subError,isNativeBroker:!0}),D})]}})})},t.prototype.createSilentCacheRequest=function(e,i){return{authority:e.authority,correlationId:this.correlationId,scopes:Vp.fromString(e.scope).asArray(),account:i,forceRefresh:!1}},t.prototype.acquireTokensFromCache=function(e,i){return Pr(this,void 0,void 0,function(){var o,s;return Rr(this,function(f){switch(f.label){case 0:if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ji.createNoAccountFoundError();if(!(o=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:e})))throw Ji.createNoAccountFoundError();f.label=1;case 1:return f.trys.push([1,3,,4]),s=this.createSilentCacheRequest(i,o),[4,this.silentCacheClient.acquireToken(s)];case 2:return[2,f.sent()];case 3:throw f.sent();case 4:return[2]}})})},t.prototype.acquireTokenRedirect=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v;return Rr(this,function(I){switch(I.label){case 0:return this.logger.trace("NativeInteractionClient - acquireTokenRedirect called."),[4,this.initializeNativeRequest(e)];case 1:i=I.sent(),o={method:b1.GetToken,request:i},I.label=2;case 2:return I.trys.push([2,4,,5]),[4,this.nativeMessageHandler.sendMessage(o)];case 3:return s=I.sent(),this.validateNativeResponse(s),[3,5];case 4:if((s=I.sent())instanceof vv&&s.isFatal())throw s;return[3,5];case 5:return this.browserStorage.setTemporaryCache(Lc.NATIVE_REQUEST,JSON.stringify(i),!0),f={apiId:du.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri),[4,this.navigationClient.navigateExternal(v,f)];case 6:return I.sent(),[2]}})})},t.prototype.handleRedirectPromise=function(){return Pr(this,void 0,void 0,function(){var e,i,o,s;return Rr(this,function(f){switch(f.label){case 0:if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(e=this.browserStorage.getCachedNativeRequest()))return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),[2,null];i=e.prompt,e=uV(e,["prompt"]),i&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Lc.NATIVE_REQUEST)),i={method:b1.GetToken,request:e},o=Dm.nowSeconds(),f.label=1;case 1:return f.trys.push([1,3,,4]),this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker."),[4,this.nativeMessageHandler.sendMessage(i)];case 2:return s=f.sent(),this.validateNativeResponse(s),s=this.handleNativeResponse(s,e,o),this.browserStorage.setInteractionInProgress(!1),[2,s];case 3:throw s=f.sent(),this.browserStorage.setInteractionInProgress(!1),s;case 4:return[2]}})})},t.prototype.logout=function(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")},t.prototype.handleNativeResponse=function(e,i,o){return Pr(this,void 0,void 0,function(){var s,f,v,I;return Rr(this,function(D){switch(D.label){case 0:if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),e.account.id!==i.accountId)throw vv.createUserSwitchError();return[4,this.getDiscoveredAuthority(i.authority)];case 1:return I=D.sent(),v=I.getPreferredCache(),s=this.createIdTokenObj(e),f=this.createHomeAccountIdentifier(e,s),v=this.createAccountEntity(e,f,s,v),[4,this.generateAuthenticationResult(e,i,s,v,I.canonicalAuthority,o)];case 2:return I=D.sent(),this.cacheAccount(v),this.cacheNativeTokens(e,i,f,v,s,I.accessToken,I.tenantId,o),[2,I]}})})},t.prototype.createIdTokenObj=function(e){return new mv(e.id_token||Zt.EMPTY_STRING,this.browserCrypto)},t.prototype.createHomeAccountIdentifier=function(e,i){return lp.generateHomeAccountId(e.client_info||Zt.EMPTY_STRING,vf.Default,this.logger,this.browserCrypto,i)},t.prototype.createAccountEntity=function(e,i,o,s){return lp.createAccount(e.client_info,i,o,void 0,void 0,void 0,s,e.account.id)},t.prototype.generateScopes=function(e,i){return Vp.fromString(e.scope?e.scope:i.scope)},t.prototype.generatePopAccessToken=function(e,i){return Pr(this,void 0,void 0,function(){var o,s;return Rr(this,function(f){switch(f.label){case 0:if(i.tokenType!==Cl.POP)return[3,2];if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),[2,e.shr];if(o=new XO(this.browserCrypto),s={resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,shrNonce:i.shrNonce},i.keyId)return[4,o.signPopToken(e.access_token,i.keyId,s)];throw Ji.createKeyIdMissingError();case 1:return[2,f.sent()];case 2:return[2,e.access_token]}})})},t.prototype.generateAuthenticationResult=function(e,i,o,s,f,v){return Pr(this,void 0,void 0,function(){var I,D,k,X,fe,Se;return Rr(this,function(Ve){switch(Ve.label){case 0:return I=this.addTelemetryFromNativeResponse(e),D=Vp.fromString(e.scope?e.scope:i.scope),k=(X=e.account.properties||{}).UID||o.claims.oid||o.claims.sub||Zt.EMPTY_STRING,X=X.TenantId||o.claims.tid||Zt.EMPTY_STRING,[4,this.generatePopAccessToken(e,i)];case 1:return fe=Ve.sent(),Se=i.tokenType===Cl.POP?Cl.POP:Cl.BEARER,[2,{authority:f,uniqueId:k,tenantId:X,scopes:D.asArray(),account:s.getAccountInfo(),idToken:e.id_token,idTokenClaims:o.claims,accessToken:fe,fromCache:!!I&&this.isResponseFromCache(I),expiresOn:new Date(1e3*Number(v+e.expires_in)),tokenType:Se,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}]}})})},t.prototype.cacheAccount=function(e){var i=this;this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(function(o){i.logger.error("Error occurred while removing account context from browser storage. "+o)})},t.prototype.cacheNativeTokens=function(fe,i,Se,s,f,Ve,I,X){var k=wT.createIdTokenEntity(Se,i.authority,fe.id_token||Zt.EMPTY_STRING,i.clientId,f.claims.tid||Zt.EMPTY_STRING);X+=i.tokenType===Cl.POP?Zt.SHR_NONCE_VALIDITY:("string"==typeof fe.expires_in?parseInt(fe.expires_in,10):fe.expires_in)||0,fe=this.generateScopes(fe,i),Se=TT.createAccessTokenEntity(Se,i.authority,Ve,i.clientId,f?f.claims.tid||Zt.EMPTY_STRING:I,fe.printScopes(),X,0,this.browserCrypto),Ve=new K6(s,k,Se),this.nativeStorageManager.saveCacheRecord(Ve)},t.prototype.addTelemetryFromNativeResponse=function(e){return(e=this.getMATSFromResponse(e))?(this.performanceClient.addStaticFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:e.broker_version,matsAccountJoinOnStart:e.account_join_on_start,matsAccountJoinOnEnd:e.account_join_on_end,matsDeviceJoin:e.device_join,matsPromptBehavior:e.prompt_behavior,matsApiErrorCode:e.api_error_code,matsUiVisible:e.ui_visible,matsSilentCode:e.silent_code,matsSilentBiSubCode:e.silent_bi_sub_code,matsSilentMessage:e.silent_message,matsSilentStatus:e.silent_status,matsHttpStatus:e.http_status,matsHttpEventCount:e.http_event_count},this.correlationId),e):null},t.prototype.validateNativeResponse=function(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw vv.createUnexpectedError("Response missing expected properties.")},t.prototype.getMATSFromResponse=function(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null},t.prototype.isResponseFromCache=function(e){return void 0===e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached},t.prototype.initializeNativeRequest=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v,I=this;return Rr(this,function(D){switch(D.label){case 0:return this.logger.trace("NativeInteractionClient - initializeNativeRequest called"),i=e.authority||this.config.auth.authority,e.account?[4,this.validateRequestAuthority(i,e.account)]:[3,2];case 1:D.sent(),D.label=2;case 2:return(f=new bc(i)).validateAsUri(),v=e.scopes,s=uV(e,["scopes"]),(v=new Vp(v||[])).appendScopes(GD),o=function(){switch(I.apiId){case du.ssoSilent:case du.acquireTokenSilent_silentFlow:return I.logger.trace("initializeNativeRequest: silent request sets prompt to none"),$p.NONE}if(e.prompt)switch(e.prompt){case $p.NONE:case $p.CONSENT:case $p.LOGIN:return I.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw I.logger.trace("initializeNativeRequest: prompt = "+e.prompt+" is not compatible with native flow"),ki.createNativePromptParameterNotSupportedError()}else I.logger.trace("initializeNativeRequest: prompt was not provided")},s=bo(bo({},s),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:f.urlString,scope:v.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:o(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:bo(bo(bo({},e.extraQueryParameters),e.tokenQueryParameters),{telemetry:"MATS"}),extendedExpiryToken:!1}),e.authenticationScheme!==Cl.POP?[3,4]:(f={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},[4,new XO(this.browserCrypto).generateCnf(f)]);case 3:v=D.sent(),s.reqCnf=v.reqCnfString,s.keyId=v.kid,D.label=4;case 4:return[2,s]}})})},t}(xV),AT=function(){function n(t,e,i,o){this.logger=t,this.handshakeTimeoutMs=e,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.responseId=0,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=i,this.handshakeEvent=i.startMeasurement(ar.NativeMessageHandlerHandshake)}return n.prototype.sendMessage=function(t){return Pr(this,void 0,void 0,function(){var e,i=this;return Rr(this,function(o){return this.logger.trace("NativeMessageHandler - sendMessage called."),e={channel:ZD_CHANNEL_ID,extensionId:this.extensionId,responseId:this.responseId++,body:t},this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: "+JSON.stringify(e)),this.messageChannel.port1.postMessage(e),[2,new Promise(function(s,f){i.resolvers.set(e.responseId,{resolve:s,reject:f})})]})})},n.createProvider=function(t,e,i){return Pr(this,void 0,void 0,function(){var o,s;return Rr(this,function(f){switch(f.label){case 0:t.trace("NativeMessageHandler - createProvider called."),f.label=1;case 1:return f.trys.push([1,3,,5]),[4,(o=new n(t,e,i,"ppnbnpeolgkicgegkbkbjmhlideopiji")).sendHandshakeRequest()];case 2:return f.sent(),[2,o];case 3:return f.sent(),[4,(s=new n(t,e,i)).sendHandshakeRequest()];case 4:return f.sent(),[2,s];case 5:return[2]}})})},n.prototype.sendHandshakeRequest=function(){return Pr(this,void 0,void 0,function(){var t,e=this;return Rr(this,function(i){return this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1),t={channel:ZD_CHANNEL_ID,extensionId:this.extensionId,responseId:this.responseId++,body:{method:b1.HandshakeRequest}},this.handshakeEvent.addStaticFields({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=function(o){e.onChannelMessage(o)},window.postMessage(t,window.origin,[this.messageChannel.port2]),[2,new Promise(function(o,s){e.handshakeResolvers.set(t.responseId,{resolve:o,reject:s}),e.timeoutId=window.setTimeout(function(){window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.endMeasurement({extensionHandshakeTimedOut:!0,success:!1}),s(ki.createNativeHandshakeTimeoutError()),e.handshakeResolvers.delete(t.responseId)},e.handshakeTimeoutMs)})]})})},n.prototype.onWindowMessage=function(t){this.logger.trace("NativeMessageHandler - onWindowMessage called"),t.source!==window||!(t=t.data).channel||t.channel!==ZD_CHANNEL_ID||t.extensionId&&t.extensionId!==this.extensionId||t.body.method===b1.HandshakeRequest&&(this.logger.verbose(t.extensionId?"Extension with id: "+t.extensionId+" not installed":"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),t=this.handshakeResolvers.get(t.responseId))&&(this.handshakeEvent.endMeasurement({success:!1,extensionInstalled:!1}),t.reject(ki.createNativeExtensionNotInstalledError()))},n.prototype.onChannelMessage=function(t){this.logger.trace("NativeMessageHandler - onChannelMessage called.");var e=t.data,i=this.resolvers.get(e.responseId),o=this.handshakeResolvers.get(e.responseId);try{var s=e.body.method;if(s===b1.Response){if(i){var f=e.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: "+JSON.stringify(f)),"Success"!==f.status)i.reject(vv.createError(f.code,f.description,f.ext));else{if(!f.result)throw Po.createUnexpectedError("Event does not contain result.");f.result.code&&f.result.description?i.reject(vv.createError(f.result.code,f.result.description,f.result.ext)):i.resolve(f.result)}this.resolvers.delete(e.responseId)}}else s===b1.HandshakeResponse&&o&&(clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=e.extensionId,this.extensionVersion=e.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: "+this.extensionId),this.handshakeEvent.endMeasurement({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(e.responseId))}catch(v){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: "+v.toString()),this.logger.errorPii("Unable to parse "+t),i?i.reject(v):o&&o.reject(v)}},n.prototype.getExtensionId=function(){return this.extensionId},n.prototype.getExtensionVersion=function(){return this.extensionVersion},n.isNativeAvailable=function(t,e,i,o){if(e.trace("isNativeAvailable called"),!t.system.allowNativeBroker)return e.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!i)return e.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Cl.BEARER:case Cl.POP:return e.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return e.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0},n}(),MY=function(n){function t(e,i,o,s,f,v,I,D,k,X){return(e=n.call(this,e,i,o,s,f,v,I,k,X)||this).nativeStorage=D,e}return sp(t,n),t.prototype.acquireToken=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v,I,D,k=this;return Rr(this,function(X){switch(X.label){case 0:return this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,mo.Redirect)];case 1:i=X.sent(),this.browserStorage.updateCacheEntries(i.state,i.nonce,i.authority,i.loginHint||Zt.EMPTY_STRING,i.account||null),o=this.initializeServerTelemetryManager(du.acquireTokenRedirect),s=function(fe){fe.persisted&&(k.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),k.browserStorage.cleanRequestByState(i.state),k.eventHandler.emitEvent(wa.RESTORE_FROM_BFCACHE,mo.Redirect))},X.label=2;case 2:return X.trys.push([2,7,,8]),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),[4,this.initializeAuthorizationCodeRequest(i)];case 3:return f=X.sent(),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(o,i.authority,i.azureCloudOptions)];case 4:return I=X.sent(),this.logger.verbose("Auth code client created"),v=new NV(I,this.browserStorage,f,this.logger,this.browserCrypto,this.performanceClient),[4,I.getAuthCodeUrl(bo(bo({},i),{nativeBroker:AT.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}))];case 5:return I=X.sent(),D=this.getRedirectStartPage(e.redirectStartPage),this.logger.verbosePii("Redirect start page: "+D),window.addEventListener("pageshow",s),[4,v.initiateAuthRequest(I,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:D,onRedirectNavigate:e.onRedirectNavigate})];case 6:return[2,X.sent()];case 7:throw(D=X.sent())instanceof Po&&D.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",s),o.cacheFailedRequest(D),this.browserStorage.cleanRequestByState(i.state),D;case 8:return[2]}})})},t.prototype.handleRedirectPromise=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v,I,D,k,X,fe;return Rr(this,function(Se){switch(Se.label){case 0:i=this.initializeServerTelemetryManager(du.handleRedirectPromise),Se.label=1;case 1:if(Se.trys.push([1,10,,11]),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(o=this.getRedirectResponseHash(e||window.location.hash)))return this.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(mo.Redirect),[2,null];s=void 0;try{f=bc.getDeserializedHash(o),s=this.validateAndExtractStateFromHash(f,mo.Redirect),this.logger.verbose("State extracted from hash")}catch(Ve){return this.logger.info("handleRedirectPromise was unable to extract state due to: "+Ve),this.browserStorage.cleanRequestByInteractionType(mo.Redirect),[2,null]}return v=this.browserStorage.getTemporaryCache(Lc.ORIGIN_URI,!0)||Zt.EMPTY_STRING,I=bc.removeHashFromUrl(v),X=bc.removeHashFromUrl(window.location.href),I===X&&this.config.auth.navigateToLoginRequestUrl?(this.logger.verbose("Current page is loginRequestUrl, handling hash"),[4,this.handleHash(o,s,i)]):[3,3];case 2:return I=Se.sent(),-1<v.indexOf("#")&&ld.replaceHash(v),[2,I];case 3:return this.config.auth.navigateToLoginRequestUrl?[3,4]:(this.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),[2,this.handleHash(o,s,i)]);case 4:return ld.isInIframe()&&!this.config.system.allowRedirectInIframe?[3,9]:(this.browserStorage.setTemporaryCache(Lc.URL_HASH,o,!0),D={apiId:du.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},k=!0,v&&"null"!==v?[3,6]:(X=ld.getHomepage(),this.browserStorage.setTemporaryCache(Lc.ORIGIN_URI,X,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),[4,this.navigationClient.navigateInternal(X,D)]));case 5:return k=Se.sent(),[3,8];case 6:return this.logger.verbose("Navigating to loginRequestUrl: "+v),[4,this.navigationClient.navigateInternal(v,D)];case 7:k=Se.sent(),Se.label=8;case 8:if(!k)return[2,this.handleHash(o,s,i)];Se.label=9;case 9:return[2,null];case 10:throw(fe=Se.sent())instanceof Po&&fe.setCorrelationId(this.correlationId),i.cacheFailedRequest(fe),this.browserStorage.cleanRequestByInteractionType(mo.Redirect),fe;case 11:return[2]}})})},t.prototype.getRedirectResponseHash=function(e){return this.logger.verbose("getRedirectResponseHash called"),bc.hashContainsKnownProperties(e)?(ld.clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash")):(e=this.browserStorage.getTemporaryCache(Lc.URL_HASH,!0),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Lc.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash")),e},t.prototype.handleHash=function(e,i,o){return Pr(this,void 0,void 0,function(){var s,f,v,I=this;return Rr(this,function(D){switch(D.label){case 0:if(s=this.browserStorage.getCachedRequest(i,this.browserCrypto),this.logger.verbose("handleHash called, retrieved cached request"),(f=bc.getDeserializedHash(e)).accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),this.nativeMessageHandler)return f=new tP(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,du.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,f.accountId,this.nativeStorage,s.correlationId),v=C1.parseRequestState(this.browserCrypto,i).userRequestState,[2,f.acquireToken(bo(bo({},s),{state:v,prompt:void 0})).finally(function(){I.browserStorage.cleanRequestByState(i)})];throw ki.createNativeConnectionNotEstablishedError()}if(f=this.browserStorage.getCachedAuthority(i))return this.performanceClient.setPreQueueTime(ar.StandardInteractionClientCreateAuthCodeClient,s.correlationId),[4,this.createAuthCodeClient(o,f)];throw ki.createNoCachedAuthorityError();case 1:return v=D.sent(),this.logger.verbose("Auth code client created"),q6.removeThrottle(this.browserStorage,this.config.auth.clientId,s),[4,new NV(v,this.browserStorage,s,this.logger,this.browserCrypto,this.performanceClient).handleCodeResponseFromHash(e,i,v.authority,this.networkClient)];case 2:return[2,D.sent()]}})})},t.prototype.logout=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v;return Rr(this,function(I){switch(I.label){case 0:this.logger.verbose("logoutRedirect called"),i=this.initializeLogoutRequest(e),o=this.initializeServerTelemetryManager(du.logout),I.label=1;case 1:return I.trys.push([1,10,,11]),this.eventHandler.emitEvent(wa.LOGOUT_START,mo.Redirect,e),[4,this.clearCacheOnLogout(i.account)];case 2:return I.sent(),s={apiId:du.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},this.performanceClient.setPreQueueTime(ar.StandardInteractionClientCreateAuthCodeClient,i.correlationId),[4,this.createAuthCodeClient(o,e&&e.authority)];case 3:return f=I.sent(),this.logger.verbose("Auth code client created"),f=f.getLogoutUri(i),this.eventHandler.emitEvent(wa.LOGOUT_SUCCESS,mo.Redirect,i),e&&"function"==typeof e.onRedirectNavigate?!1===e.onRedirectNavigate(f)?[3,5]:(this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(f,s)]):[3,7];case 4:return I.sent(),[2];case 5:this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation"),I.label=6;case 6:return[3,9];case 7:return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(f,s)];case 8:return I.sent(),[2];case 9:return[3,11];case 10:throw(v=I.sent())instanceof Po&&v.setCorrelationId(this.correlationId),o.cacheFailedRequest(v),this.eventHandler.emitEvent(wa.LOGOUT_FAILURE,mo.Redirect,null,v),this.eventHandler.emitEvent(wa.LOGOUT_END,mo.Redirect),v;case 11:return this.eventHandler.emitEvent(wa.LOGOUT_END,mo.Redirect),[2]}})})},t.prototype.getRedirectStartPage=function(e){return e=e||window.location.href,bc.getAbsoluteUrl(e,ld.getCurrentUri())},t}(eP),OY=function(n){function t(e,i,o,s,f,v,I,D,k,X){return(e=n.call(this,e,i,o,s,f,v,I,k,X)||this).unloadWindow=e.unloadWindow.bind(e),e.nativeStorage=D,e}return sp(t,n),t.prototype.acquireToken=function(e){try{var i,o=this.generatePopupName(e.scopes||GD,e.authority||this.config.auth.authority),s=e.popupWindowAttributes||{};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,s)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),i=this.openSizedPopup("about:blank",o,s),this.acquireTokenPopupAsync(e,o,s,i))}catch(f){return Promise.reject(f)}},t.prototype.logout=function(e){try{this.logger.verbose("logoutPopup called");var i,o=this.initializeLogoutRequest(e),s=this.generateLogoutPopupName(o),f=e&&e.authority,v=e&&e.mainWindowRedirectUri,I=e?.popupWindowAttributes||{};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(o,s,I,f,void 0,v)):(this.logger.verbose("asyncPopup set to false, opening popup"),i=this.openSizedPopup("about:blank",s,I),this.logoutPopupAsync(o,s,I,f,i,v))}catch(D){return Promise.reject(D)}},t.prototype.acquireTokenPopupAsync=function(e,i,o,s){return Pr(this,void 0,void 0,function(){var f,v,I,D,k,X,fe,Se,Ve,Je,lt,mt=this;return Rr(this,function(_n){switch(_n.label){case 0:return this.logger.verbose("acquireTokenPopupAsync called"),f=this.initializeServerTelemetryManager(du.acquireTokenPopup),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,mo.Popup)];case 1:v=_n.sent(),this.browserStorage.updateCacheEntries(v.state,v.nonce,v.authority,v.loginHint||Zt.EMPTY_STRING,v.account||null),_n.label=2;case 2:return _n.trys.push([2,8,,9]),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),[4,this.initializeAuthorizationCodeRequest(v)];case 3:return I=_n.sent(),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(f,v.authority,v.azureCloudOptions)];case 4:return D=_n.sent(),this.logger.verbose("Auth code client created"),X=AT.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),k=void 0,X&&(k=this.performanceClient.startMeasurement(ar.FetchAccountIdWithNativeBroker,e.correlationId)),[4,D.getAuthCodeUrl(bo(bo({},v),{nativeBroker:X}))];case 5:return X=_n.sent(),fe=new pz(D,this.browserStorage,I,this.logger,this.performanceClient),Se=this.initiateAuthRequest(X,Se={popup:s,popupName:i,popupWindowAttributes:o}),this.eventHandler.emitEvent(wa.POPUP_OPENED,mo.Popup,{popupWindow:Se},null),[4,this.monitorPopupForHash(Se)];case 6:if(Se=_n.sent(),lt=bc.getDeserializedHash(Se),Ve=this.validateAndExtractStateFromHash(lt,mo.Popup,v.correlationId),q6.removeThrottle(this.browserStorage,this.config.auth.clientId,I),lt.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),k&&k.endMeasurement({success:!0,isNativeBroker:!0}),this.nativeMessageHandler)return lt=new tP(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,du.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,lt.accountId,this.nativeStorage,v.correlationId),Je=C1.parseRequestState(this.browserCrypto,Ve).userRequestState,[2,lt.acquireToken(bo(bo({},v),{state:Je,prompt:void 0})).finally(function(){mt.browserStorage.cleanRequestByState(Ve)})];throw ki.createNativeConnectionNotEstablishedError()}return[4,fe.handleCodeResponseFromHash(Se,Ve,D.authority,this.networkClient)];case 7:return[2,_n.sent()];case 8:throw lt=_n.sent(),s&&s.close(),lt instanceof Po&&lt.setCorrelationId(this.correlationId),f.cacheFailedRequest(lt),this.browserStorage.cleanRequestByState(v.state),lt;case 9:return[2]}})})},t.prototype.logoutPopupAsync=function(e,i,o,s,f,v){return Pr(this,void 0,void 0,function(){var I,D,k;return Rr(this,function(X){switch(X.label){case 0:this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(wa.LOGOUT_START,mo.Popup,e),I=this.initializeServerTelemetryManager(du.logoutPopup),X.label=1;case 1:return X.trys.push([1,5,,6]),[4,this.clearCacheOnLogout(e.account)];case 2:return X.sent(),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(I,s)];case 3:return D=X.sent(),this.logger.verbose("Auth code client created"),D=D.getLogoutUri(e),this.eventHandler.emitEvent(wa.LOGOUT_SUCCESS,mo.Popup,e),D=this.openPopup(D,{popupName:i,popupWindowAttributes:o,popup:f}),this.eventHandler.emitEvent(wa.POPUP_OPENED,mo.Popup,{popupWindow:D},null),[4,this.waitForLogoutPopup(D)];case 4:return X.sent(),v?(D={apiId:du.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},k=bc.getAbsoluteUrl(v,ld.getCurrentUri()),this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: "+k),this.navigationClient.navigateInternal(k,D)):this.logger.verbose("No main window navigation requested"),[3,6];case 5:throw k=X.sent(),f&&f.close(),k instanceof Po&&k.setCorrelationId(this.correlationId),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(wa.LOGOUT_FAILURE,mo.Popup,null,k),this.eventHandler.emitEvent(wa.LOGOUT_END,mo.Popup),I.cacheFailedRequest(k),k;case 6:return this.eventHandler.emitEvent(wa.LOGOUT_END,mo.Popup),[2]}})})},t.prototype.initiateAuthRequest=function(e,i){if(Wi.isEmpty(e))throw this.logger.error("Navigate url is empty"),ki.createEmptyNavigationUriError();return this.logger.infoPii("Navigate to: "+e),this.openPopup(e,i)},t.prototype.monitorPopupForHash=function(e){var i=this;return new Promise(function(o,s){var f=i.config.system.windowHashTimeout/i.config.system.pollIntervalMilliseconds,v=0,I=(i.logger.verbose("PopupHandler.monitorPopupForHash - polling started"),setInterval(function(){if(e.closed)i.logger.error("PopupHandler.monitorPopupForHash - window closed"),i.cleanPopup(),clearInterval(I),s(ki.createUserCancelledError());else{var D=Zt.EMPTY_STRING,k=Zt.EMPTY_STRING;try{D=e.location.href,k=e.location.hash}catch{}Wi.isEmpty(D)||"about:blank"===D||(i.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),v++,k?(i.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(I),i.cleanPopup(e),bc.hashContainsKnownProperties(k)?(i.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),o(k)):(i.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),i.logger.errorPii("PopupHandler.monitorPopupForHash - hash found: "+k),s(ki.createHashDoesNotContainKnownPropertiesError()))):f<v&&(i.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(I),s(ki.createMonitorPopupTimeoutError())))}},i.config.system.pollIntervalMilliseconds))})},t.prototype.waitForLogoutPopup=function(e){var i=this;return new Promise(function(o){i.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");var s=setInterval(function(){e.closed&&(i.logger.error("PopupHandler.waitForLogoutPopup - window closed"),i.cleanPopup(),clearInterval(s),o());var f=Zt.EMPTY_STRING;try{f=e.location.href}catch{}Wi.isEmpty(f)||"about:blank"===f||(i.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(s),i.cleanPopup(e),o())},i.config.system.pollIntervalMilliseconds)})},t.prototype.openPopup=function(e,i){try{var o=void 0;if(i.popup?(o=i.popup,this.logger.verbosePii("Navigating popup window to: "+e),o.location.assign(e)):void 0===i.popup&&(this.logger.verbosePii("Opening popup window to: "+e),o=this.openSizedPopup(e,i.popupName,i.popupWindowAttributes)),o)return o.focus&&o.focus(),this.currentWindow=o,window.addEventListener("beforeunload",this.unloadWindow),o;throw ki.createEmptyWindowCreatedError()}catch(s){throw this.logger.error("error opening popup "+s.message),this.browserStorage.setInteractionInProgress(!1),ki.createPopupWindowError(s.toString())}},t.prototype.openSizedPopup=function(e,i,fe){var s=window.screenLeft||window.screenX,f=window.screenTop||window.screenY,v=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,I=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,D=null==(D=fe.popupSize)?void 0:D.width,k=null==(k=fe.popupSize)?void 0:k.height,X=null==(X=fe.popupPosition)?void 0:X.top;return fe=null==(fe=fe.popupPosition)?void 0:fe.left,(!D||D<0||v<D)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),D=483),(!k||k<0||I<k)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),k=600),(!X||X<0||I<X)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),X=Math.max(0,I/2-300+f)),(!fe||fe<0||v<fe)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),fe=Math.max(0,v/2-241.5+s)),window.open(e,i,"width="+D+", height="+k+", top="+X+", left="+fe+", scrollbars=yes")},t.prototype.unloadWindow=function(e){this.browserStorage.cleanRequestByInteractionType(mo.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()},t.prototype.cleanPopup=function(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)},t.prototype.generatePopupName=function(e,i){return"msal."+this.config.auth.clientId+"."+e.join("-")+"."+i+"."+this.correlationId},t.prototype.generateLogoutPopupName=function(e){return"msal."+this.config.auth.clientId+"."+(e=e.account&&e.account.homeAccountId)+"."+this.correlationId},t}(eP),PY=function(){function n(){}return n.prototype.navigateInternal=function(t,e){return n.defaultNavigateWindow(t,e)},n.prototype.navigateExternal=function(t,e){return n.defaultNavigateWindow(t,e)},n.defaultNavigateWindow=function(t,e){return e.noHistory?window.location.replace(t):window.location.assign(t),new Promise(function(i){setTimeout(function(){i(!0)},e.timeout)})},n}(),kV=function(n){function t(e,i,o,s,f,v){return(e=n.call(this,e,i,o,s,v)||this).navigateFrameWait=f.navigateFrameWait,e.pollIntervalMilliseconds=f.pollIntervalMilliseconds,e}return sp(t,n),t.prototype.initiateAuthRequest=function(e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){switch(i.label){case 0:if(this.performanceClient.addQueueMeasurement(ar.SilentHandlerInitiateAuthRequest,this.authCodeRequest.correlationId),Wi.isEmpty(e))throw this.logger.info("Navigate url is empty"),ki.createEmptyNavigationUriError();return this.navigateFrameWait?(this.performanceClient.setPreQueueTime(ar.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),[4,this.loadFrame(e)]):[3,2];case 1:return[2,i.sent()];case 2:return[2,this.loadFrameSync(e)]}})})},t.prototype.monitorIframeForHash=function(e,i){var o=this;return this.performanceClient.addQueueMeasurement(ar.SilentHandlerMonitorIframeForHash,this.authCodeRequest.correlationId),new Promise(function(s,f){i<6e3&&o.logger.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower ("+i+"ms) than the default (6000ms). This may result in timeouts.");var v=window.performance.now()+i,I=setInterval(function(){if(window.performance.now()>v)o.removeHiddenIframe(e),clearInterval(I),f(ki.createMonitorIframeTimeoutError());else{var D=Zt.EMPTY_STRING,k=e.contentWindow;try{D=k?k.location.href:Zt.EMPTY_STRING}catch{}Wi.isEmpty(D)||bc.hashContainsKnownProperties(D=k?k.location.hash:Zt.EMPTY_STRING)&&(o.removeHiddenIframe(e),clearInterval(I),s(D))}},o.pollIntervalMilliseconds)})},t.prototype.loadFrame=function(e){var i=this;return this.performanceClient.addQueueMeasurement(ar.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),new Promise(function(o,s){var f=i.createHiddenIframe();setTimeout(function(){f?(f.src=e,o(f)):s("Unable to load iframe")},i.navigateFrameWait)})},t.prototype.loadFrameSync=function(e){var i=this.createHiddenIframe();return i.src=e,i},t.prototype.createHiddenIframe=function(){var e=document.createElement("iframe");return e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(e),e},t.prototype.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},t}(pz),kY=function(n){function t(e,i,o,s,f,v,I,D,k,X,fe){return(e=n.call(this,e,i,o,s,f,v,D,X,fe)||this).apiId=I,e.nativeStorage=k,e}return sp(t,n),t.prototype.acquireToken=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f;return Rr(this,function(v){switch(v.label){case 0:if(this.performanceClient.addQueueMeasurement(ar.SilentIframeClientAcquireToken,e.correlationId),this.logger.verbose("acquireTokenByIframe called"),i=this.performanceClient.startMeasurement(ar.SilentIframeClientAcquireToken,e.correlationId),Wi.isEmpty(e.loginHint)&&Wi.isEmpty(e.sid)&&(!e.account||Wi.isEmpty(e.account.username))&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),e.prompt&&e.prompt!==$p.NONE&&e.prompt!==$p.NO_SESSION)throw i.endMeasurement({success:!1}),ki.createSilentPromptValueError(e.prompt);return this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(bo(bo({},e),{prompt:e.prompt||$p.NONE}),mo.Silent)];case 1:o=v.sent(),this.browserStorage.updateCacheEntries(o.state,o.nonce,o.authority,o.loginHint||Zt.EMPTY_STRING,o.account||null),s=this.initializeServerTelemetryManager(this.apiId),v.label=2;case 2:return v.trys.push([2,5,,6]),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(s,o.authority,o.azureCloudOptions)];case 3:return f=v.sent(),this.logger.verbose("Auth code client created"),this.performanceClient.setPreQueueTime(ar.SilentIframeClientTokenHelper,e.correlationId),[4,this.silentTokenHelper(f,o).then(function(I){return i.endMeasurement({success:!0,fromCache:!1,requestId:I.requestId}),I})];case 4:return[2,v.sent()];case 5:throw(f=v.sent())instanceof Po&&f.setCorrelationId(this.correlationId),s.cacheFailedRequest(f),this.browserStorage.cleanRequestByState(o.state),i.endMeasurement({errorCode:f instanceof Po&&f.errorCode||void 0,subErrorCode:f instanceof Po&&f.subError||void 0,success:!1}),f;case 6:return[2]}})})},t.prototype.logout=function(){return Promise.reject(ki.createSilentLogoutUnsupportedError())},t.prototype.silentTokenHelper=function(e,i){return Pr(this,void 0,void 0,function(){var o,s,f,v,I,D,k,X=this;return Rr(this,function(fe){switch(fe.label){case 0:return this.performanceClient.addQueueMeasurement(ar.SilentIframeClientTokenHelper,i.correlationId),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationCodeRequest,i.correlationId),[4,this.initializeAuthorizationCodeRequest(i)];case 1:return o=fe.sent(),this.performanceClient.setPreQueueTime(ar.GetAuthCodeUrl,i.correlationId),[4,e.getAuthCodeUrl(bo(bo({},i),{nativeBroker:AT.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,i.authenticationScheme)}))];case 2:return f=fe.sent(),s=new kV(e,this.browserStorage,o,this.logger,this.config.system,this.performanceClient),this.performanceClient.setPreQueueTime(ar.SilentHandlerInitiateAuthRequest,i.correlationId),[4,s.initiateAuthRequest(f)];case 3:return f=fe.sent(),this.performanceClient.setPreQueueTime(ar.SilentHandlerMonitorIframeForHash,i.correlationId),[4,s.monitorIframeForHash(f,this.config.system.iframeHashTimeout)];case 4:if(v=fe.sent(),D=bc.getDeserializedHash(v),I=this.validateAndExtractStateFromHash(D,mo.Silent,o.correlationId),D.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),this.nativeMessageHandler)return D=new tP(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,D.accountId,this.browserStorage,this.correlationId),k=C1.parseRequestState(this.browserCrypto,I).userRequestState,[2,D.acquireToken(bo(bo({},i),{state:k,prompt:i.prompt||$p.NONE})).finally(function(){X.browserStorage.cleanRequestByState(I)})];throw ki.createNativeConnectionNotEstablishedError()}return this.performanceClient.setPreQueueTime(ar.HandleCodeResponseFromHash,i.correlationId),[2,s.handleCodeResponseFromHash(v,I,e.authority,this.networkClient)]}})})},t}(eP),LY=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return sp(t,n),t.prototype.acquireToken=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v,I=this;return Rr(this,function(D){switch(D.label){case 0:return this.performanceClient.addQueueMeasurement(ar.SilentRefreshClientAcquireToken,e.correlationId),this.performanceClient.setPreQueueTime(ar.InitializeBaseRequest,e.correlationId),o=[bo({},e)],[4,this.initializeBaseRequest(e,e.account)];case 1:return i=bo.apply(void 0,o.concat([D.sent()])),s=this.performanceClient.startMeasurement(ar.SilentRefreshClientAcquireToken,i.correlationId),f=this.initializeServerTelemetryManager(du.acquireTokenSilent_silentFlow),[4,this.createRefreshTokenClient(f,i.authority,i.azureCloudOptions)];case 2:return v=D.sent(),this.logger.verbose("Refresh token client created"),this.performanceClient.setPreQueueTime(ar.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),[2,v.acquireTokenByRefreshToken(i).then(function(k){return s.endMeasurement({success:!0,fromCache:k.fromCache,requestId:k.requestId}),k}).catch(function(k){throw k instanceof Po&&k.setCorrelationId(I.correlationId),f.cacheFailedRequest(k),s.endMeasurement({errorCode:k.errorCode,subErrorCode:k.subError,success:!1}),k})]}})})},t.prototype.logout=function(){return Promise.reject(ki.createSilentLogoutUnsupportedError())},t.prototype.createRefreshTokenClient=function(e,i,o){return Pr(this,void 0,void 0,function(){var s;return Rr(this,function(f){switch(f.label){case 0:return this.performanceClient.setPreQueueTime(ar.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,i,o)];case 1:return s=f.sent(),[2,new vV(s,this.performanceClient)]}})})},t}(eP),FY=function(){function n(t,e){this.eventCallbacks=new Map,this.logger=t,this.browserCrypto=e,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}return n.prototype.addEventCallback=function(t){var e;return typeof window<"u"?(e=this.browserCrypto.createNewGuid(),this.eventCallbacks.set(e,t),this.logger.verbose("Event callback registered with id: "+e),e):null},n.prototype.removeEventCallback=function(t){this.eventCallbacks.delete(t),this.logger.verbose("Event callback "+t+" removed.")},n.prototype.enableAccountStorageEvents=function(){typeof window<"u"&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))},n.prototype.disableAccountStorageEvents=function(){typeof window<"u"&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))},n.prototype.emitEvent=function(t,e,i,o){var s,f=this;typeof window<"u"&&(s={eventType:t,interactionType:e||null,payload:i||null,error:o||null,timestamp:Date.now()},this.logger.info("Emitting event: "+t),this.eventCallbacks.forEach(function(v,I){f.logger.verbose("Emitting event to callback "+I+": "+t),v.apply(null,[s])}))},n.prototype.handleAccountCacheChange=function(t){try{var e,i,o=t.newValue||t.oldValue;o&&"object"==typeof(e=JSON.parse(o))&&lp.isAccountEntity(e)&&(i=Jf.toObject(new lp,e).getAccountInfo(),!t.oldValue&&t.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(wa.ACCOUNT_ADDED,void 0,i)):!t.newValue&&t.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(wa.ACCOUNT_REMOVED,void 0,i)))}catch{}},n}(),Gp=function(){function n(){}return n.decimalToHex=function(t){for(var e=t.toString(16);e.length<2;)e="0"+e;return e},n}(),LV=function(){function n(t){this.cryptoObj=t}return n.prototype.generateGuid=function(){try{var t=new Uint8Array(16);return this.cryptoObj.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,Gp.decimalToHex(t[0])+Gp.decimalToHex(t[1])+Gp.decimalToHex(t[2])+Gp.decimalToHex(t[3])+"-"+Gp.decimalToHex(t[4])+Gp.decimalToHex(t[5])+"-"+Gp.decimalToHex(t[6])+Gp.decimalToHex(t[7])+"-"+Gp.decimalToHex(t[8])+Gp.decimalToHex(t[9])+"-"+Gp.decimalToHex(t[10])+Gp.decimalToHex(t[11])+Gp.decimalToHex(t[12])+Gp.decimalToHex(t[13])+Gp.decimalToHex(t[14])+Gp.decimalToHex(t[15])}catch{for(var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",i="0123456789abcdef",o=0,s=Zt.EMPTY_STRING,f=0;f<36;f++)"-"!==e[f]&&"4"!==e[f]&&(o=16*Math.random()|0),s+="x"===e[f]?i[o]:"y"===e[f]?i[o=3&o|8]:e[f];return s}},n.prototype.isGuid=function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},n}(),E1=function(){function n(){}return n.stringToUtf8Arr=function(t){for(var e,i=0,o=t.length,s=0;s<o;s++)i+=(e=t.charCodeAt(s))<128?1:e<2048?2:e<65536?3:e<2097152?4:e<67108864?5:6;for(var f=new Uint8Array(i),v=0,I=0;v<i;I++)(e=t.charCodeAt(I))<128?f[v++]=e:(e<2048?f[v++]=192+(e>>>6):(e<65536?f[v++]=224+(e>>>12):(e<2097152?f[v++]=240+(e>>>18):(e<67108864?f[v++]=248+(e>>>24):(f[v++]=252+(e>>>30),f[v++]=128+(e>>>24&63)),f[v++]=128+(e>>>18&63)),f[v++]=128+(e>>>12&63)),f[v++]=128+(e>>>6&63)),f[v++]=128+(63&e));return f},n.stringToArrayBuffer=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return e},n.utf8ArrToString=function(t){for(var e,i=Zt.EMPTY_STRING,o=t.length,s=0;s<o;s++)e=t[s],i+=String.fromCharCode(251<e&&e<254&&s+5<o?1073741824*(e-252)+(t[++s]-128<<24)+(t[++s]-128<<18)+(t[++s]-128<<12)+(t[++s]-128<<6)+t[++s]-128:247<e&&e<252&&s+4<o?(e-248<<24)+(t[++s]-128<<18)+(t[++s]-128<<12)+(t[++s]-128<<6)+t[++s]-128:239<e&&e<248&&s+3<o?(e-240<<18)+(t[++s]-128<<12)+(t[++s]-128<<6)+t[++s]-128:223<e&&e<240&&s+2<o?(e-224<<12)+(t[++s]-128<<6)+t[++s]-128:191<e&&e<224&&s+1<o?(e-192<<6)+t[++s]-128:e);return i},n.getSortedObjectString=function(t){return JSON.stringify(t,Object.keys(t).sort())},n}(),FV=function(){function n(){}return n.prototype.urlEncode=function(t){return encodeURIComponent(this.encode(t).replace(/=/g,Zt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_"))},n.prototype.urlEncodeArr=function(t){return this.base64EncArr(t).replace(/=/g,Zt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")},n.prototype.encode=function(t){return t=E1.stringToUtf8Arr(t),this.base64EncArr(t)},n.prototype.base64EncArr=function(t){for(var e,i=(3-t.length%3)%3,o=Zt.EMPTY_STRING,s=t.length,f=0,v=0;v<s;v++)f|=t[v]<<(16>>>(e=v%3)&24),2!=e&&t.length-v!=1||(o+=String.fromCharCode(this.uint6ToB64(f>>>18&63),this.uint6ToB64(f>>>12&63),this.uint6ToB64(f>>>6&63),this.uint6ToB64(63&f)),f=0);return 0==i?o:o.substring(0,o.length-i)+(1==i?"=":"==")},n.prototype.uint6ToB64=function(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65},n}(),HY=function(){function n(){}return n.prototype.decode=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Invalid base64 string")}return t=this.base64DecToArr(e),E1.utf8ArrToString(t)},n.prototype.base64DecToArr=function(t,e){for(var i,o=t.replace(/[^A-Za-z0-9\+\/]/g,Zt.EMPTY_STRING),s=o.length,f=e?Math.ceil((3*s+1>>>2)/e)*e:3*s+1>>>2,v=new Uint8Array(f),I=void 0,D=0,k=0,X=0;X<s;X++)if(i=3&X,D|=this.b64ToUint6(o.charCodeAt(X))<<18-6*i,3==i||s-X==1){for(I=0;I<3&&k<f;I++,k++)v[k]=D>>>(16>>>I&24)&255;D=0}return v},n.prototype.b64ToUint6=function(t){return 64<t&&t<91?t-65:96<t&&t<123?t-71:47<t&&t<58?t+4:43===t?62:47===t?63:0},n}(),BY=function(){function n(t){this.base64Encode=new FV,this.cryptoObj=t}return n.prototype.generateCodes=function(){return Pr(this,void 0,void 0,function(){var t,e;return Rr(this,function(i){switch(i.label){case 0:return t=this.generateCodeVerifier(),[4,this.generateCodeChallengeFromVerifier(t)];case 1:return e=i.sent(),[2,{verifier:t,challenge:e}]}})})},n.prototype.generateCodeVerifier=function(){try{var t=new Uint8Array(32);return this.cryptoObj.getRandomValues(t),this.base64Encode.urlEncodeArr(t)}catch(e){throw ki.createPkceNotGeneratedError(e)}},n.prototype.generateCodeChallengeFromVerifier=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.cryptoObj.sha256Digest(t)];case 1:return e=i.sent(),[2,this.base64Encode.urlEncodeArr(new Uint8Array(e))];case 2:throw e=i.sent(),ki.createPkceNotGeneratedError(e);case 3:return[2]}})})},n}(),zY=function(){function n(){}return n.prototype.getRandomValues=function(t){return window.crypto.getRandomValues(t)},n.prototype.generateKey=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,window.crypto.subtle.generateKey(t,e,i)]})})},n.prototype.exportKey=function(t){return Pr(this,void 0,void 0,function(){return Rr(this,function(e){return[2,window.crypto.subtle.exportKey(JO,t)]})})},n.prototype.importKey=function(t,e,i,o){return Pr(this,void 0,void 0,function(){return Rr(this,function(s){return[2,window.crypto.subtle.importKey(JO,t,e,i,o)]})})},n.prototype.sign=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,window.crypto.subtle.sign(t,e,i)]})})},n.prototype.digest=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,window.crypto.subtle.digest(t,e)]})})},n}(),jY=function(){function n(){}return n.prototype.initPrng=function(t){return window.msrCrypto.initPrng(JB(t))},n.prototype.getRandomValues=function(t){return window.msrCrypto.getRandomValues(t)},n.prototype.generateKey=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,window.msrCrypto.subtle.generateKey(t,e,i)]})})},n.prototype.exportKey=function(t){return Pr(this,void 0,void 0,function(){return Rr(this,function(e){return[2,window.msrCrypto.subtle.exportKey(JO,t)]})})},n.prototype.importKey=function(t,e,i,o){return Pr(this,void 0,void 0,function(){return Rr(this,function(s){return[2,window.msrCrypto.subtle.importKey(JO,t,e,i,o)]})})},n.prototype.sign=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,window.msrCrypto.subtle.sign(t,e,i)]})})},n.prototype.digest=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,window.msrCrypto.subtle.digest(t,e)]})})},n}(),$Y=function(){function n(){}return n.prototype.getRandomValues=function(t){return window.msCrypto.getRandomValues(t)},n.prototype.generateKey=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,new Promise(function(s,f){var v=window.msCrypto.subtle.generateKey(t,e,i);v.addEventListener("complete",function(I){s(I.target.result)}),v.addEventListener("error",function(I){f(I)})})]})})},n.prototype.exportKey=function(t){return Pr(this,void 0,void 0,function(){return Rr(this,function(e){return[2,new Promise(function(i,o){var s=window.msCrypto.subtle.exportKey(JO,t);s.addEventListener("complete",function(f){var v=f.target.result;v=E1.utf8ArrToString(new Uint8Array(v)).replace(/\r/g,Zt.EMPTY_STRING).replace(/\n/g,Zt.EMPTY_STRING).replace(/\t/g,Zt.EMPTY_STRING).split(" ").join(Zt.EMPTY_STRING).replace("\0",Zt.EMPTY_STRING);try{i(JSON.parse(v))}catch(I){o(I)}}),s.addEventListener("error",function(f){o(f)})})]})})},n.prototype.importKey=function(t,e,i,o){return Pr(this,void 0,void 0,function(){var s,f;return Rr(this,function(v){return s=E1.getSortedObjectString(t),f=E1.stringToArrayBuffer(s),[2,new Promise(function(I,D){var k=window.msCrypto.subtle.importKey(JO,f,e,i,o);k.addEventListener("complete",function(X){I(X.target.result)}),k.addEventListener("error",function(X){D(X)})})]})})},n.prototype.sign=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,new Promise(function(s,f){var v=window.msCrypto.subtle.sign(t,e,i);v.addEventListener("complete",function(I){s(I.target.result)}),v.addEventListener("error",function(I){f(I)})})]})})},n.prototype.digest=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,new Promise(function(o,s){var f=window.msCrypto.subtle.digest(t,e.buffer);f.addEventListener("complete",function(v){o(v.target.result)}),f.addEventListener("error",function(v){s(v)})})]})})},n}(),HV="SHA-256",qY=new Uint8Array([1,0,1]),UV=function(){function n(t,e){if(this.logger=t,this.cryptoOptions=e,this.hasBrowserCrypto())this.logger.verbose("BrowserCrypto: modern crypto interface available"),this.subtleCrypto=new zY;else if(this.hasIECrypto())this.logger.verbose("BrowserCrypto: MS crypto interface available"),this.subtleCrypto=new $Y;else{if(!this.hasMsrCrypto()||null==(t=this.cryptoOptions)||!t.useMsrCrypto)throw this.hasMsrCrypto()&&this.logger.info("BrowserCrypto: MSR Crypto interface available but system.cryptoOptions.useMsrCrypto not enabled"),this.logger.error("BrowserCrypto: No crypto interfaces available."),ki.createCryptoNotAvailableError("Browser crypto, msCrypto, or msrCrypto interfaces not available.");this.logger.verbose("BrowserCrypto: MSR crypto interface available"),this.subtleCrypto=new jY}if(this.subtleCrypto.initPrng){if(this.logger.verbose("BrowserCrypto: Interface requires entropy"),null==(e=this.cryptoOptions)||!e.entropy)throw this.logger.error("BrowserCrypto: Interface requires entropy but none provided."),Z6.createEntropyNotProvided();this.logger.verbose("BrowserCrypto: Entropy provided"),this.subtleCrypto.initPrng(this.cryptoOptions.entropy)}this.keygenAlgorithmOptions={name:"RSASSA-PKCS1-v1_5",hash:HV,modulusLength:2048,publicExponent:qY}}return n.prototype.hasIECrypto=function(){return"msCrypto"in window},n.prototype.hasBrowserCrypto=function(){return"crypto"in window},n.prototype.hasMsrCrypto=function(){return"msrCrypto"in window},n.prototype.sha256Digest=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){return e=E1.stringToUtf8Arr(t),[2,this.subtleCrypto.digest({name:HV},e)]})})},n.prototype.getRandomValues=function(t){return this.subtleCrypto.getRandomValues(t)},n.prototype.generateKeyPair=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,this.subtleCrypto.generateKey(this.keygenAlgorithmOptions,t,e)]})})},n.prototype.exportJwk=function(t){return Pr(this,void 0,void 0,function(){return Rr(this,function(e){return[2,this.subtleCrypto.exportKey(t)]})})},n.prototype.importJwk=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){return[2,this.subtleCrypto.importKey(t,this.keygenAlgorithmOptions,e,i)]})})},n.prototype.sign=function(t,e){return Pr(this,void 0,void 0,function(){return Rr(this,function(i){return[2,this.subtleCrypto.sign(this.keygenAlgorithmOptions,t,e)]})})},n}(),KY=function(){function n(){this.dbName=lz,this.version=1,this.tableName=wY,this.dbOpen=!1}return n.prototype.open=function(){return Pr(this,void 0,void 0,function(){var t=this;return Rr(this,function(e){return[2,new Promise(function(i,o){var s=window.indexedDB.open(t.dbName,t.version);s.addEventListener("upgradeneeded",function(f){f.target.result.createObjectStore(t.tableName)}),s.addEventListener("success",function(f){t.db=f.target.result,t.dbOpen=!0,i()}),s.addEventListener("error",function(){return o(ki.createDatabaseUnavailableError())})})]})})},n.prototype.closeConnection=function(){var t=this.db;t&&this.dbOpen&&(t.close(),this.dbOpen=!1)},n.prototype.validateDbIsOpen=function(){return Pr(this,void 0,void 0,function(){return Rr(this,function(t){switch(t.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:return[2,t.sent()];case 2:return[2]}})})},n.prototype.getItem=function(t){return Pr(this,void 0,void 0,function(){var e=this;return Rr(this,function(i){switch(i.label){case 0:return[4,this.validateDbIsOpen()];case 1:return i.sent(),[2,new Promise(function(o,s){if(!e.db)return s(ki.createDatabaseNotOpenError());var f=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).get(t);f.addEventListener("success",function(v){e.closeConnection(),o(v.target.result)}),f.addEventListener("error",function(v){e.closeConnection(),s(v)})})]}})})},n.prototype.setItem=function(t,e){return Pr(this,void 0,void 0,function(){var i=this;return Rr(this,function(o){switch(o.label){case 0:return[4,this.validateDbIsOpen()];case 1:return o.sent(),[2,new Promise(function(s,f){if(!i.db)return f(ki.createDatabaseNotOpenError());var v=i.db.transaction([i.tableName],"readwrite").objectStore(i.tableName).put(e,t);v.addEventListener("success",function(){i.closeConnection(),s()}),v.addEventListener("error",function(I){i.closeConnection(),f(I)})})]}})})},n.prototype.removeItem=function(t){return Pr(this,void 0,void 0,function(){var e=this;return Rr(this,function(i){switch(i.label){case 0:return[4,this.validateDbIsOpen()];case 1:return i.sent(),[2,new Promise(function(o,s){if(!e.db)return s(ki.createDatabaseNotOpenError());var f=e.db.transaction([e.tableName],"readwrite").objectStore(e.tableName).delete(t);f.addEventListener("success",function(){e.closeConnection(),o()}),f.addEventListener("error",function(v){e.closeConnection(),s(v)})})]}})})},n.prototype.getKeys=function(){return Pr(this,void 0,void 0,function(){var t=this;return Rr(this,function(e){switch(e.label){case 0:return[4,this.validateDbIsOpen()];case 1:return e.sent(),[2,new Promise(function(i,o){if(!t.db)return o(ki.createDatabaseNotOpenError());var s=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).getAllKeys();s.addEventListener("success",function(f){t.closeConnection(),i(f.target.result)}),s.addEventListener("error",function(f){t.closeConnection(),o(f)})})]}})})},n.prototype.containsKey=function(t){return Pr(this,void 0,void 0,function(){var e=this;return Rr(this,function(i){switch(i.label){case 0:return[4,this.validateDbIsOpen()];case 1:return i.sent(),[2,new Promise(function(o,s){if(!e.db)return s(ki.createDatabaseNotOpenError());var f=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).count(t);f.addEventListener("success",function(v){e.closeConnection(),o(1===v.target.result)}),f.addEventListener("error",function(v){e.closeConnection(),s(v)})})]}})})},n.prototype.deleteDatabase=function(){return Pr(this,void 0,void 0,function(){return Rr(this,function(t){return this.db&&this.dbOpen&&this.closeConnection(),[2,new Promise(function(e,i){var o=window.indexedDB.deleteDatabase(lz);o.addEventListener("success",function(){return e(!0)}),o.addEventListener("blocked",function(){return e(!0)}),o.addEventListener("error",function(){return i(!1)})})]})})},n}(),BV=function(){function n(t,e){this.inMemoryCache=new uz,this.indexedDBCache=new KY,this.logger=t,this.storeName=e}return n.prototype.handleDatabaseAccessError=function(t){if(!(t instanceof ki&&t.errorCode===ni_databaseUnavailable_code))throw t;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")},n.prototype.getItem=function(t){return Pr(this,void 0,void 0,function(){var e,i;return Rr(this,function(o){switch(o.label){case 0:if(e=this.inMemoryCache.getItem(t))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.getItem(t)];case 2:return[2,o.sent()];case 3:return i=o.sent(),this.handleDatabaseAccessError(i),[3,4];case 4:return[2,e]}})})},n.prototype.setItem=function(t,e){return Pr(this,void 0,void 0,function(){var i;return Rr(this,function(o){switch(o.label){case 0:this.inMemoryCache.setItem(t,e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.indexedDBCache.setItem(t,e)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),this.handleDatabaseAccessError(i),[3,4];case 4:return[2]}})})},n.prototype.removeItem=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){switch(i.label){case 0:this.inMemoryCache.removeItem(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.indexedDBCache.removeItem(t)];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),this.handleDatabaseAccessError(e),[3,4];case 4:return[2]}})})},n.prototype.getKeys=function(){return Pr(this,void 0,void 0,function(){var t,e;return Rr(this,function(i){switch(i.label){case 0:if(0!==(t=this.inMemoryCache.getKeys()).length)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),this.logger.verbose("In-memory cache is empty, now querying persistent storage."),[4,this.indexedDBCache.getKeys()];case 2:return[2,i.sent()];case 3:return e=i.sent(),this.handleDatabaseAccessError(e),[3,4];case 4:return[2,t]}})})},n.prototype.containsKey=function(t){return Pr(this,void 0,void 0,function(){var e,i;return Rr(this,function(o){switch(o.label){case 0:if(e=this.inMemoryCache.containsKey(t))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.containsKey(t)];case 2:return[2,o.sent()];case 3:return i=o.sent(),this.handleDatabaseAccessError(i),[3,4];case 4:return[2,e]}})})},n.prototype.clearInMemory=function(){this.logger.verbose("Deleting in-memory keystore "+this.storeName),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore "+this.storeName+" deleted")},n.prototype.clearPersistent=function(){return Pr(this,void 0,void 0,function(){var t;return Rr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.logger.verbose("Deleting persistent keystore"),[4,this.indexedDBCache.deleteDatabase()];case 1:return(t=e.sent())&&this.logger.verbose("Persistent keystore deleted"),[2,t];case 2:return t=e.sent(),this.handleDatabaseAccessError(t),[2,!1];case 3:return[2]}})})},n}(),YY=(function(n){n.asymmetricKeys="asymmetricKeys",n.symmetricKeys="symmetricKeys"}(J6=J6||{}),function(){function n(t){this.logger=t,this.asymmetricKeys=new BV(this.logger,J6.asymmetricKeys),this.symmetricKeys=new BV(this.logger,J6.symmetricKeys)}return n.prototype.clear=function(){return Pr(this,void 0,void 0,function(){var t;return Rr(this,function(e){switch(e.label){case 0:this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.asymmetricKeys.clearPersistent()];case 2:return e.sent(),[2,!0];case 3:return(t=e.sent())instanceof Error?this.logger.error("Clearing keystore failed with error: "+t.message):this.logger.error("Clearing keystore failed with unknown error"),[2,!1];case 4:return[2]}})})},n}()),WY=function(){function n(t,e,i){this.logger=t,this.browserCrypto=new UV(this.logger,i),this.b64Encode=new FV,this.b64Decode=new HY,this.guidGenerator=new LV(this.browserCrypto),this.pkceGenerator=new BY(this.browserCrypto),this.cache=new YY(this.logger),this.performanceClient=e}return n.prototype.createNewGuid=function(){return this.guidGenerator.generateGuid()},n.prototype.base64Encode=function(t){return this.b64Encode.encode(t)},n.prototype.base64Decode=function(t){return this.b64Decode.decode(t)},n.prototype.generatePkceCodes=function(){return Pr(this,void 0,void 0,function(){return Rr(this,function(t){return[2,this.pkceGenerator.generateCodes()]})})},n.prototype.getPublicKeyThumbprint=function(t){var e;return Pr(this,void 0,void 0,function(){var i,o,s,f,v;return Rr(this,function(I){switch(I.label){case 0:return i=null==(e=this.performanceClient)?void 0:e.startMeasurement(ar.CryptoOptsGetPublicKeyThumbprint,t.correlationId),[4,this.browserCrypto.generateKeyPair(n.EXTRACTABLE,n.POP_KEY_USAGES)];case 1:return o=I.sent(),[4,this.browserCrypto.exportJwk(o.publicKey)];case 2:return f=I.sent(),f=E1.getSortedObjectString(f={e:f.e,kty:f.kty,n:f.n}),[4,this.hashString(f)];case 3:return s=I.sent(),[4,this.browserCrypto.exportJwk(o.privateKey)];case 4:return f=I.sent(),[4,this.browserCrypto.importJwk(f,!1,["sign"])];case 5:return v=I.sent(),[4,this.cache.asymmetricKeys.setItem(s,{privateKey:v,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri})];case 6:return I.sent(),i&&i.endMeasurement({success:!0}),[2,s]}})})},n.prototype.removeTokenBindingKey=function(t){return Pr(this,void 0,void 0,function(){return Rr(this,function(e){switch(e.label){case 0:return[4,this.cache.asymmetricKeys.removeItem(t)];case 1:return e.sent(),[4,this.cache.asymmetricKeys.containsKey(t)];case 2:return[2,!e.sent()]}})})},n.prototype.clearKeystore=function(){return Pr(this,void 0,void 0,function(){return Rr(this,function(t){switch(t.label){case 0:return[4,this.cache.clear()];case 1:return[2,t.sent()]}})})},n.prototype.signJwt=function(t,e,i){var o;return Pr(this,void 0,void 0,function(){var s,f,v,I,D,k;return Rr(this,function(X){switch(X.label){case 0:return s=null==(o=this.performanceClient)?void 0:o.startMeasurement(ar.CryptoOptsSignJwt,i),[4,this.cache.asymmetricKeys.getItem(e)];case 1:if(f=X.sent())return[4,this.browserCrypto.exportJwk(f.publicKey)];throw ki.createSigningKeyNotFoundInStorageError(e);case 2:return D=X.sent(),v=E1.getSortedObjectString(D),I=this.b64Encode.urlEncode(JSON.stringify({kid:e})),I=CY.getShrHeaderString({kid:I,alg:D.alg}),D=this.b64Encode.urlEncode(I),t.cnf={jwk:JSON.parse(v)},I=this.b64Encode.urlEncode(JSON.stringify(t)),D=E1.stringToArrayBuffer(v=D+"."+I),[4,this.browserCrypto.sign(f.privateKey,D)];case 3:return I=X.sent(),D=this.b64Encode.urlEncodeArr(new Uint8Array(I)),k=v+"."+D,s&&s.endMeasurement({success:!0}),[2,k]}})})},n.prototype.hashString=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){switch(i.label){case 0:return[4,this.browserCrypto.sha256Digest(t)];case 1:return e=i.sent(),e=new Uint8Array(e),[2,this.b64Encode.urlEncodeArr(e)]}})})},n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n}(),zV=function(){function n(t,e){this.correlationId=e,this.measureName=n.makeMeasureName(t,e),this.startMark=n.makeStartMark(t,e),this.endMark=n.makeEndMark(t,e)}return n.makeMeasureName=function(t,e){return"msal.measure."+t+"."+e},n.makeStartMark=function(t,e){return"msal.start."+t+"."+e},n.makeEndMark=function(t,e){return"msal.end."+t+"."+e},n.supportsBrowserPerformance=function(){return typeof window<"u"&&void 0!==window.performance&&"function"==typeof window.performance.mark&&"function"==typeof window.performance.measure&&"function"==typeof window.performance.clearMarks&&"function"==typeof window.performance.clearMeasures&&"function"==typeof window.performance.getEntriesByName},n.flushMeasurements=function(t,e){if(n.supportsBrowserPerformance())try{e.forEach(function(i){i=n.makeMeasureName(i.name,t),0<window.performance.getEntriesByName(i,"measure").length&&(window.performance.clearMeasures(i),window.performance.clearMarks(n.makeStartMark(i,t)),window.performance.clearMarks(n.makeEndMark(i,t)))})}catch{}},n.prototype.startMeasurement=function(){if(n.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch{}},n.prototype.endMeasurement=function(){if(n.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch{}},n.prototype.flushMeasurement=function(){if(n.supportsBrowserPerformance())try{var t,e=window.performance.getEntriesByName(this.measureName,"measure");if(0<e.length)return t=e[0].duration,window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),t}catch{}return null},n}(),QY=function(n){function t(e,i,o,s,f,v,I){return(e=n.call(this,e,i,o,s,f,v)||this).browserCrypto=new UV(e.logger,I),e.guidGenerator=new LV(e.browserCrypto),e}return sp(t,n),t.prototype.startPerformanceMeasuremeant=function(e,i){return new zV(e,i)},t.prototype.generateId=function(){return this.guidGenerator.generateGuid()},t.prototype.getPageVisibility=function(){var e;return(null==(e=document.visibilityState)?void 0:e.toString())||null},t.prototype.deleteIncompleteSubMeasurements=function(e){var i=this.eventsByCorrelationId.get(e.event.correlationId),s=[];i&&i.eventId===e.event.eventId&&null!=i&&i.incompleteSubMeasurements&&i.incompleteSubMeasurements.forEach(function(f){s.push(bo({},f))}),0<s.length&&zV.flushMeasurements(e.event.correlationId,s)},t.prototype.supportsBrowserPerformanceNow=function(){return typeof window<"u"&&void 0!==window.performance&&"function"==typeof window.performance.now},t.prototype.startMeasurement=function(e,i){var o=this,s=this.getPageVisibility(),f=n.prototype.startMeasurement.call(this,e,i);return bo(bo({},f),{endMeasurement:function(v){return v=f.endMeasurement(bo({startPageVisibility:s,endPageVisibility:o.getPageVisibility()},v)),o.deleteIncompleteSubMeasurements(f),v},discardMeasurement:function(){f.discardMeasurement(),o.deleteIncompleteSubMeasurements(f),f.measurement.flushMeasurement()}})},t.prototype.setPreQueueTime=function(e,i){var o;this.supportsBrowserPerformanceNow()?i?((o=this.preQueueTimeByCorrelationId.get(i))&&(this.logger.trace("BrowserPerformanceClient: Incomplete pre-queue "+o.name+" found",i),this.addQueueMeasurement(o.name,i,void 0,!0)),this.preQueueTimeByCorrelationId.set(i,{name:e,time:window.performance.now()})):this.logger.trace("BrowserPerformanceClient: correlationId for "+e+" not provided, unable to set telemetry queue time"):this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for "+e)},t.prototype.addQueueMeasurement=function(e,i,o,s){if(this.supportsBrowserPerformanceNow())if(i){var f,v=n.prototype.getPreQueueTime.call(this,e,i);if(v)return f=window.performance.now(),o=o||n.prototype.calculateQueuedTime.call(this,v,f),n.prototype.addQueueMeasurement.call(this,e,i,o,s)}else this.logger.trace("BrowserPerformanceClient: correlationId for "+e+" not provided, unable to add queue measurement");else this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to add queue measurement for "+e)},t}(IV),XY=function(){function n(t,e,i,o){this.isBrowserEnvironment=typeof window<"u",this.config=t,this.storage=e,this.logger=i,this.cryptoObj=o}return n.prototype.loadExternalTokens=function(t,e,i){if(this.logger.info("TokenCache - loadExternalTokens called"),!e.id_token)throw ki.createUnableToLoadTokenError("Please ensure server response includes id token.");var o=new mv(e.id_token,this.cryptoObj);if(t.account)var s=this.loadAccount(o,t.account.environment,void 0,void 0,t.account.homeAccountId),f=new K6(s,this.loadIdToken(o,s.homeAccountId,t.account.environment,t.account.tenantId),this.loadAccessToken(t,e,s.homeAccountId,t.account.environment,t.account.tenantId,i),this.loadRefreshToken(t,e,s.homeAccountId,t.account.environment));else{if(!t.authority)throw ki.createUnableToLoadTokenError("Please provide a request with an account or a request with authority.");var I=XD.generateAuthority(t.authority,t.azureCloudOptions);if(I=new XD(I,this.config.system.networkClient,this.storage,{protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},this.logger),i.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),s=this.loadAccount(o,I.hostnameAndPort,i.clientInfo,I.authorityType);else{if(!e.client_info)throw ki.createUnableToLoadTokenError("Please provide clientInfo in the response or options.");this.logger.trace("TokenCache - homeAccountId from response"),s=this.loadAccount(o,I.hostnameAndPort,e.client_info,I.authorityType)}f=new K6(s,this.loadIdToken(o,s.homeAccountId,I.hostnameAndPort,I.tenant),this.loadAccessToken(t,e,s.homeAccountId,I.hostnameAndPort,I.tenant,i),this.loadRefreshToken(t,e,s.homeAccountId,I.hostnameAndPort))}return this.generateAuthenticationResult(t,o,f,I)},n.prototype.loadAccount=function(t,e,i,o,s){var f;if(s?f=s:void 0!==o&&i&&(f=lp.generateHomeAccountId(i,o,this.logger,this.cryptoObj,t)),!f)throw ki.createUnableToLoadTokenError("Unexpected missing homeAccountId");if(s=i?lp.createAccount(i,f,t,void 0,void 0,void 0,e):lp.createGenericAccount(f,t,void 0,void 0,void 0,e),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(s),s;throw ki.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},n.prototype.loadIdToken=function(t,e,i,o){if(e=wT.createIdTokenEntity(e,i,t.rawToken,this.config.auth.clientId,o),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(e),e;throw ki.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},n.prototype.loadAccessToken=function(v,e,k,o,s,D){if(!e.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!e.expires_in)throw ki.createUnableToLoadTokenError("Please ensure server response includes expires_in value.");if(!D.extendedExpiresOn)throw ki.createUnableToLoadTokenError("Please provide an extendedExpiresOn value in the options.");v=new Vp(v.scopes).printScopes();var I=D.expiresOn||e.expires_in+(new Date).getTime()/1e3;if(k=TT.createAccessTokenEntity(k,o,e.access_token,this.config.auth.clientId,s,v,I,D=D.extendedExpiresOn,this.cryptoObj),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(k),k;throw ki.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},n.prototype.loadRefreshToken=function(t,e,i,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;if(i=WO.createRefreshTokenEntity(i,o,e.refresh_token,this.config.auth.clientId),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(i),i;throw ki.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},n.prototype.generateAuthenticationResult=function(t,e,i,o){var s,f=Zt.EMPTY_STRING,v=[],I=null,D=(null!=i&&i.accessToken&&(f=i.accessToken.secret,v=Vp.fromString(i.accessToken.target).asArray(),I=new Date(1e3*Number(i.accessToken.expiresOn)),s=new Date(1e3*Number(i.accessToken.extendedExpiresOn))),e?.claims.oid||e?.claims.sub||Zt.EMPTY_STRING),k=e?.claims.tid||Zt.EMPTY_STRING;return{authority:o?o.canonicalAuthority:Zt.EMPTY_STRING,uniqueId:D,tenantId:k,scopes:v,account:null!=i&&i.account?i.account.getAccountInfo():null,idToken:e?e.rawToken:Zt.EMPTY_STRING,idTokenClaims:e?e.claims:{},accessToken:f,fromCache:!0,expiresOn:I,correlationId:t.correlationId||Zt.EMPTY_STRING,requestId:Zt.EMPTY_STRING,extExpiresOn:s,familyId:Zt.EMPTY_STRING,tokenType:(null==(o=i?.accessToken)?void 0:o.tokenType)||Zt.EMPTY_STRING,state:Zt.EMPTY_STRING,cloudGraphHostName:(null==(D=i?.account)?void 0:D.cloudGraphHostName)||Zt.EMPTY_STRING,msGraphHost:(null==(k=i?.account)?void 0:k.msGraphHost)||Zt.EMPTY_STRING,code:void 0,fromNativeBroker:!1}},n}(),ZY=function(n){function t(e){return(e=n.call(this,e)||this).includeRedirectUri=!1,e}return sp(t,n),t}(yV),JY=function(n){function t(e,i,o,s,f,v,I,D,k,X){return(e=n.call(this,e,i,o,s,f,v,D,k,X)||this).apiId=I,e}return sp(t,n),t.prototype.acquireToken=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f;return Rr(this,function(v){switch(v.label){case 0:if(this.logger.trace("SilentAuthCodeClient.acquireToken called"),e.code)return this.performanceClient.setPreQueueTime(ar.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,mo.Silent)];throw ki.createAuthCodeRequiredError();case 1:i=v.sent(),this.browserStorage.updateCacheEntries(i.state,i.nonce,i.authority,i.loginHint||Zt.EMPTY_STRING,i.account||null),o=this.initializeServerTelemetryManager(this.apiId),v.label=2;case 2:return v.trys.push([2,4,,5]),s=bo(bo({},i),{code:e.code}),this.performanceClient.setPreQueueTime(ar.StandardInteractionClientGetClientConfiguration,e.correlationId),[4,this.getClientConfiguration(o,i.authority)];case 3:return f=v.sent(),f=new ZY(f),this.logger.verbose("Auth code client created"),[2,new kV(f,this.browserStorage,s,this.logger,this.config.system,this.performanceClient).handleCodeResponseFromServer({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},i.state,f.authority,this.networkClient,!1)];case 4:throw(f=v.sent())instanceof Po&&f.setCorrelationId(this.correlationId),o.cacheFailedRequest(f),this.browserStorage.cleanRequestByState(i.state),f;case 5:return[2]}})})},t.prototype.logout=function(){return Promise.reject(ki.createSilentLogoutUnsupportedError())},t}(eP),eW=function(){function n(t){this.isBrowserEnvironment=typeof window<"u",this.config=function DY(o,v){var e=o.auth,i=o.cache,I=o.system,s=(o=o.telemetry,{clientId:Zt.EMPTY_STRING,authority:""+Zt.DEFAULT_AUTHORITY,knownAuthorities:[],cloudDiscoveryMetadata:Zt.EMPTY_STRING,authorityMetadata:Zt.EMPTY_STRING,redirectUri:Zt.EMPTY_STRING,postLogoutRedirectUri:Zt.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:QD.AAD,azureCloudOptions:{azureCloudInstance:VD.None,tenant:Zt.EMPTY_STRING},skipAuthorityMetadataCache:!1}),f={cacheLocation:Qd.SessionStorage,temporaryCacheLocation:Qd.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!i||i.cacheLocation!==Qd.LocalStorage),claimsBasedCachingEnabled:!0},D={loggerCallback:function(){},logLevel:Lh.Info,piiLoggingEnabled:!1};return v=bo(bo({},mV),{loggerOptions:D,networkClient:v?ld.getBrowserNetworkClient():vY,navigationClient:new PY,loadFrameTimeout:0,windowHashTimeout:I?.loadFrameTimeout||6e4,iframeHashTimeout:I?.loadFrameTimeout||6e3,navigateFrameWait:v&&ld.detectIEOrEdge()?500:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:I?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:30,cryptoOptions:{useMsrCrypto:!1,entropy:void 0}}),I=bo(bo({},I),{loggerOptions:I?.loggerOptions||D}),D={application:{appName:Zt.EMPTY_STRING,appVersion:Zt.EMPTY_STRING}},{auth:bo(bo({},s),e),cache:bo(bo({},f),i),system:bo(bo({},v),I),telemetry:bo(bo({},D),o)}}(t,this.isBrowserEnvironment),this.initialized=!1,this.logger=new nz(this.config.system.loggerOptions,hz,JD),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.isBrowserEnvironment?new QY(this.config.auth.clientId,this.config.auth.authority,this.logger,hz,JD,this.config.telemetry.application,this.config.system.cryptoOptions):new EY(this.config.auth.clientId,this.config.auth.authority,this.logger,hz,JD,this.config.telemetry.application),this.browserCrypto=this.isBrowserEnvironment?new WY(this.logger,this.performanceClient,this.config.system.cryptoOptions):$6,this.eventHandler=new FY(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new dz(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger):function(n,t){return new dz(n,{cacheLocation:Qd.MemoryStorage,temporaryCacheLocation:Qd.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0},$6,t)}(this.config.auth.clientId,this.logger),this.nativeInternalStorage=new dz(this.config.auth.clientId,t={cacheLocation:Qd.MemoryStorage,temporaryCacheLocation:Qd.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0},this.browserCrypto,this.logger),this.tokenCache=new XY(this.config,this.browserStorage,this.logger,this.browserCrypto),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}return n.prototype.initialize=function(){return Pr(this,void 0,void 0,function(){var t,e,i,o,s;return Rr(this,function(f){switch(f.label){case 0:if(this.logger.trace("initialize called"),this.initialized)return this.logger.info("initialize has already been called, exiting early."),[2];if(t=this.config.system.allowNativeBroker,e=this.performanceClient.startMeasurement(ar.InitializeClientApplication),this.eventHandler.emitEvent(wa.INITIALIZE_START),!t)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),i=this,[4,AT.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)];case 2:return i.nativeExtensionProvider=f.sent(),[3,4];case 3:return o=f.sent(),this.logger.verbose(o),[3,4];case 4:return this.config.cache.claimsBasedCachingEnabled?[3,6]:(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),s=this.performanceClient.startMeasurement(ar.ClearTokensAndKeysWithClaims),[4,this.browserStorage.clearTokensAndKeysWithClaims()]);case 5:f.sent(),s.endMeasurement({success:!0}),f.label=6;case 6:return this.initialized=!0,this.eventHandler.emitEvent(wa.INITIALIZE_END),e.endMeasurement({allowNativeBroker:t,success:!0}),[2]}})})},n.prototype.handleRedirectPromise=function(t){return Pr(this,void 0,void 0,function(){var e,i,o,s,f,v=this;return Rr(this,function(I){return this.logger.verbose("handleRedirectPromise called"),ld.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),e=this.getAllAccounts(),this.isBrowserEnvironment?(void 0===(o=this.redirectResponse.get(i=t||Zt.EMPTY_STRING))?(this.eventHandler.emitEvent(wa.HANDLE_REDIRECT_START,mo.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise"),f=this.browserStorage.getCachedNativeRequest(),s=void 0,s=f&&AT.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!t?(this.logger.trace("handleRedirectPromise - acquiring token from native platform"),new tP(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,du.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,f.accountId,this.nativeInternalStorage,f.correlationId).handleRedirectPromise()):(this.logger.trace("handleRedirectPromise - acquiring token from web flow"),f=this.browserStorage.getTemporaryCache(Lc.CORRELATION_ID,!0)||Zt.EMPTY_STRING,this.createRedirectClient(f).handleRedirectPromise(t)),o=s.then(function(D){return D&&(e.length<v.getAllAccounts().length?(v.eventHandler.emitEvent(wa.LOGIN_SUCCESS,mo.Redirect,D),v.logger.verbose("handleRedirectResponse returned result, login success")):(v.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_SUCCESS,mo.Redirect,D),v.logger.verbose("handleRedirectResponse returned result, acquire token success"))),v.eventHandler.emitEvent(wa.HANDLE_REDIRECT_END,mo.Redirect),D}).catch(function(D){throw v.eventHandler.emitEvent(0<e.length?wa.ACQUIRE_TOKEN_FAILURE:wa.LOGIN_FAILURE,mo.Redirect,null,D),v.eventHandler.emitEvent(wa.HANDLE_REDIRECT_END,mo.Redirect),D}),this.redirectResponse.set(i,o)):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),[2,o]):(this.logger.verbose("handleRedirectPromise returns null, not browser environment"),[2,null])})})},n.prototype.acquireTokenRedirect=function(t){return Pr(this,void 0,void 0,function(){var e,i,o=this;return Rr(this,function(s){return e=this.getRequestCorrelationId(t),this.logger.verbose("acquireTokenRedirect called",e),this.preflightBrowserEnvironmentCheck(mo.Redirect),(i=0<this.getAllAccounts().length)?this.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_START,mo.Redirect,t):this.eventHandler.emitEvent(wa.LOGIN_START,mo.Redirect,t),[2,(this.nativeExtensionProvider&&this.canUseNative(t)?new tP(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,du.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireTokenRedirect(t).catch(function(f){if(f instanceof vv&&f.isFatal())return o.nativeExtensionProvider=void 0,o.createRedirectClient(t.correlationId).acquireToken(t);if(f instanceof km)return o.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),o.createRedirectClient(t.correlationId).acquireToken(t);throw o.browserStorage.setInteractionInProgress(!1),f}):this.createRedirectClient(t.correlationId).acquireToken(t)).catch(function(f){throw o.eventHandler.emitEvent(i?wa.ACQUIRE_TOKEN_FAILURE:wa.LOGIN_FAILURE,mo.Redirect,null,f),f})]})})},n.prototype.acquireTokenPopup=function(t){var e=this,i=this.getRequestCorrelationId(t),o=this.performanceClient.startMeasurement(ar.AcquireTokenPopup,i);try{this.logger.verbose("acquireTokenPopup called",i),this.preflightBrowserEnvironmentCheck(mo.Popup)}catch(f){return Promise.reject(f)}var s=this.getAllAccounts();return this.eventHandler.emitEvent(0<s.length?wa.ACQUIRE_TOKEN_START:wa.LOGIN_START,mo.Popup,t),(this.canUseNative(t)?this.acquireTokenNative(t,du.acquireTokenPopup).then(function(f){return e.browserStorage.setInteractionInProgress(!1),o.endMeasurement({success:!0,isNativeBroker:!0,requestId:f.requestId}),f}).catch(function(f){if(f instanceof vv&&f.isFatal())return e.nativeExtensionProvider=void 0,e.createPopupClient(t.correlationId).acquireToken(t);if(f instanceof km)return e.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),e.createPopupClient(t.correlationId).acquireToken(t);throw e.browserStorage.setInteractionInProgress(!1),f}):this.createPopupClient(t.correlationId).acquireToken(t)).then(function(f){return s.length<e.getAllAccounts().length?e.eventHandler.emitEvent(wa.LOGIN_SUCCESS,mo.Popup,f):e.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_SUCCESS,mo.Popup,f),o.addStaticFields({accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length}),o.endMeasurement({success:!0,requestId:f.requestId}),f}).catch(function(f){return e.eventHandler.emitEvent(0<s.length?wa.ACQUIRE_TOKEN_FAILURE:wa.LOGIN_FAILURE,mo.Popup,null,f),o.endMeasurement({errorCode:f.errorCode,subErrorCode:f.subError,success:!1}),Promise.reject(f)})},n.prototype.trackPageVisibilityWithMeasurement=function(){var t=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;t&&(this.logger.info("Perf: Visibility change detected in ",t.event.name),t.increment({visibilityChangeCount:1}))},n.prototype.ssoSilent=function(t){var e;return Pr(this,void 0,void 0,function(){var i,o,s=this;return Rr(this,function(f){return i=this.getRequestCorrelationId(t),o=bo(bo({},t),{prompt:t.prompt,correlationId:i}),this.preflightBrowserEnvironmentCheck(mo.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(ar.SsoSilent,i),null!=(e=this.ssoSilentMeasurement)&&e.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",i),this.eventHandler.emitEvent(wa.SSO_SILENT_START,mo.Silent,o),[2,(this.canUseNative(o)?this.acquireTokenNative(o,du.ssoSilent).catch(function(v){if(v instanceof vv&&v.isFatal())return s.nativeExtensionProvider=void 0,s.createSilentIframeClient(o.correlationId).acquireToken(o);throw v}):this.createSilentIframeClient(o.correlationId).acquireToken(o)).then(function(v){var I;return s.eventHandler.emitEvent(wa.SSO_SILENT_SUCCESS,mo.Silent,v),null!=(I=s.ssoSilentMeasurement)&&I.addStaticFields({accessTokenSize:v.accessToken.length,idTokenSize:v.idToken.length}),null!=(I=s.ssoSilentMeasurement)&&I.endMeasurement({success:!0,isNativeBroker:v.fromNativeBroker,requestId:v.requestId}),v}).catch(function(v){var I;throw s.eventHandler.emitEvent(wa.SSO_SILENT_FAILURE,mo.Silent,null,v),null!=(I=s.ssoSilentMeasurement)&&I.endMeasurement({errorCode:v.errorCode,subErrorCode:v.subError,success:!1}),v}).finally(function(){document.removeEventListener("visibilitychange",s.trackPageVisibilityWithMeasurement)})]})})},n.prototype.acquireTokenByCode=function(t){return Pr(this,void 0,void 0,function(){var e,i,o,s,f=this;return Rr(this,function(v){e=this.getRequestCorrelationId(t),this.preflightBrowserEnvironmentCheck(mo.Silent),this.logger.trace("acquireTokenByCode called",e),this.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_BY_CODE_START,mo.Silent,t),i=this.performanceClient.startMeasurement(ar.AcquireTokenByCode,t.correlationId);try{if(t.code&&t.nativeAccountId)throw ki.createSpaCodeAndNativeAccountIdPresentError();if(t.code)return(s=this.hybridAuthCodeResponses.get(o=t.code))?(this.logger.verbose("Existing acquireTokenByCode request found",t.correlationId),i.discardMeasurement()):(this.logger.verbose("Initiating new acquireTokenByCode request",e),s=this.acquireTokenByCodeAsync(bo(bo({},t),{correlationId:e})).then(function(I){return f.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_BY_CODE_SUCCESS,mo.Silent,I),f.hybridAuthCodeResponses.delete(o),i.addStaticFields({accessTokenSize:I.accessToken.length,idTokenSize:I.idToken.length}),i.endMeasurement({success:!0,isNativeBroker:I.fromNativeBroker,requestId:I.requestId}),I}).catch(function(I){throw f.hybridAuthCodeResponses.delete(o),f.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_BY_CODE_FAILURE,mo.Silent,null,I),i.endMeasurement({errorCode:I.errorCode,subErrorCode:I.subError,success:!1}),I}),this.hybridAuthCodeResponses.set(o,s)),[2,s];if(t.nativeAccountId){if(this.canUseNative(t,t.nativeAccountId))return[2,this.acquireTokenNative(t,du.acquireTokenByCode,t.nativeAccountId).catch(function(I){throw I instanceof vv&&I.isFatal()&&(f.nativeExtensionProvider=void 0),I})];throw ki.createUnableToAcquireTokenFromNativePlatformError()}throw ki.createAuthCodeOrNativeAccountIdRequiredError()}catch(I){throw this.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_BY_CODE_FAILURE,mo.Silent,null,I),i.endMeasurement({errorCode:I instanceof Po&&I.errorCode||void 0,subErrorCode:I instanceof Po&&I.subError||void 0,success:!1}),I}return[2]})})},n.prototype.acquireTokenByCodeAsync=function(t){var e;return Pr(this,void 0,void 0,function(){var i=this;return Rr(this,function(o){switch(o.label){case 0:return this.logger.trace("acquireTokenByCodeAsync called",t.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ar.AcquireTokenByCodeAsync,t.correlationId),null!=(e=this.acquireTokenByCodeAsyncMeasurement)&&e.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),[4,this.createSilentAuthCodeClient(t.correlationId).acquireToken(t).then(function(s){var f;return null!=(f=i.acquireTokenByCodeAsyncMeasurement)&&f.endMeasurement({success:!0,fromCache:s.fromCache,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s}).catch(function(s){var f;throw null!=(f=i.acquireTokenByCodeAsyncMeasurement)&&f.endMeasurement({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}).finally(function(){document.removeEventListener("visibilitychange",i.trackPageVisibilityWithMeasurement)})];case 1:return[2,o.sent()]}})})},n.prototype.acquireTokenFromCache=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){switch(this.performanceClient.addQueueMeasurement(ar.AcquireTokenFromCache,e.correlationId),i.cacheLookupPolicy){case eg.Default:case eg.AccessToken:case eg.AccessTokenAndRefreshToken:return[2,t.acquireToken(e)];default:throw Ji.createRefreshRequiredError()}return[2]})})},n.prototype.acquireTokenByRefreshToken=function(t,e){return Pr(this,void 0,void 0,function(){var i;return Rr(this,function(o){switch(this.performanceClient.addQueueMeasurement(ar.AcquireTokenByRefreshToken,t.correlationId),e.cacheLookupPolicy){case eg.Default:case eg.AccessTokenAndRefreshToken:case eg.RefreshToken:case eg.RefreshTokenAndNetwork:return i=this.createSilentRefreshClient(t.correlationId),this.performanceClient.setPreQueueTime(ar.SilentRefreshClientAcquireToken,t.correlationId),[2,i.acquireToken(t)];default:throw Ji.createRefreshRequiredError()}return[2]})})},n.prototype.acquireTokenBySilentIframe=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){return this.performanceClient.addQueueMeasurement(ar.AcquireTokenBySilentIframe,t.correlationId),e=this.createSilentIframeClient(t.correlationId),this.performanceClient.setPreQueueTime(ar.SilentIframeClientAcquireToken,t.correlationId),[2,e.acquireToken(t)]})})},n.prototype.logout=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){return e=this.getRequestCorrelationId(t),this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",e),[2,this.logoutRedirect(bo({correlationId:e},t))]})})},n.prototype.logoutRedirect=function(t){return Pr(this,void 0,void 0,function(){var e;return Rr(this,function(i){return e=this.getRequestCorrelationId(t),this.preflightBrowserEnvironmentCheck(mo.Redirect),[2,this.createRedirectClient(e).logout(t)]})})},n.prototype.logoutPopup=function(t){try{var e=this.getRequestCorrelationId(t);return this.preflightBrowserEnvironmentCheck(mo.Popup),this.createPopupClient(e).logout(t)}catch(i){return Promise.reject(i)}},n.prototype.getAllAccounts=function(){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts():[]},n.prototype.getAccountByUsername=function(t){var e;return this.logger.trace("getAccountByUsername called"),t?(e=this.browserStorage.getAccountInfoFilteredBy({username:t}))?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: "+t),e):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null):(this.logger.warning("getAccountByUsername: No username provided"),null)},n.prototype.getAccountByHomeId=function(t){var e;return this.logger.trace("getAccountByHomeId called"),t?(e=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:t}))?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: "+t),e):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null):(this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null)},n.prototype.getAccountByLocalId=function(t){var e;return this.logger.trace("getAccountByLocalId called"),t?(e=this.browserStorage.getAccountInfoFilteredBy({localAccountId:t}))?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: "+t),e):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null):(this.logger.warning("getAccountByLocalId: No localAccountId provided"),null)},n.prototype.setActiveAccount=function(t){this.browserStorage.setActiveAccount(t)},n.prototype.getActiveAccount=function(){return this.browserStorage.getActiveAccount()},n.prototype.preflightBrowserEnvironmentCheck=function(t,e){if(void 0===e&&(e=!0),this.logger.verbose("preflightBrowserEnvironmentCheck started"),ld.blockNonBrowserEnvironment(this.isBrowserEnvironment),ld.blockRedirectInIframe(t,this.config.system.allowRedirectInIframe),ld.blockReloadInHiddenIframes(),ld.blockAcquireTokenInPopups(),ld.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),t===mo.Redirect&&this.config.cache.cacheLocation===Qd.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw Z6.createInMemoryRedirectUnavailableError();t!==mo.Redirect&&t!==mo.Popup||this.preflightInteractiveRequest(e)},n.prototype.preflightInteractiveRequest=function(t){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),ld.blockReloadInHiddenIframes(),t&&this.browserStorage.setInteractionInProgress(!0)},n.prototype.acquireTokenNative=function(t,e,i){return Pr(this,void 0,void 0,function(){return Rr(this,function(o){if(this.logger.trace("acquireTokenNative called"),this.nativeExtensionProvider)return[2,new tP(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,e,this.performanceClient,this.nativeExtensionProvider,i||this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireToken(t)];throw ki.createNativeConnectionNotEstablishedError()})})},n.prototype.canUseNative=function(t,e){if(this.logger.trace("canUseNative called"),!AT.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,t.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(t.prompt)switch(t.prompt){case $p.NONE:case $p.CONSENT:case $p.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = "+t.prompt+" is not compatible with native flow, returning false"),!1}return!(!e&&!this.getNativeAccountId(t)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))},n.prototype.getNativeAccountId=function(t){return(t=t.account||this.browserStorage.getAccountInfoByHints(t.loginHint,t.sid)||this.getActiveAccount())&&t.nativeAccountId||""},n.prototype.createPopupClient=function(t){return new OY(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)},n.prototype.createRedirectClient=function(t){return new MY(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)},n.prototype.createSilentIframeClient=function(t){return new kY(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,du.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)},n.prototype.createSilentCacheClient=function(t){return new DV(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)},n.prototype.createSilentRefreshClient=function(t){return new LY(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)},n.prototype.createSilentAuthCodeClient=function(t){return new JY(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,du.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,t)},n.prototype.addEventCallback=function(t){return this.eventHandler.addEventCallback(t)},n.prototype.removeEventCallback=function(t){this.eventHandler.removeEventCallback(t)},n.prototype.addPerformanceCallback=function(t){return this.performanceClient.addPerformanceCallback(t)},n.prototype.removePerformanceCallback=function(t){return this.performanceClient.removePerformanceCallback(t)},n.prototype.enableAccountStorageEvents=function(){this.eventHandler.enableAccountStorageEvents()},n.prototype.disableAccountStorageEvents=function(){this.eventHandler.disableAccountStorageEvents()},n.prototype.getTokenCache=function(){return this.tokenCache},n.prototype.getLogger=function(){return this.logger},n.prototype.setLogger=function(t){this.logger=t},n.prototype.initializeWrapperLibrary=function(t,e){this.browserStorage.setWrapperMetadata(t,e)},n.prototype.setNavigationClient=function(t){this.navigationClient=t},n.prototype.getConfiguration=function(){return this.config},n.prototype.getRequestCorrelationId=function(t){return null!=t&&t.correlationId?t.correlationId:this.isBrowserEnvironment?this.browserCrypto.createNewGuid():Zt.EMPTY_STRING},n}(),tW=function(n){function t(e){return(e=n.call(this,e)||this).astsAsyncMeasurement=void 0,e.activeSilentTokenRequests=new Map,e.trackPageVisibility=e.trackPageVisibility.bind(e),e}return sp(t,n),t.prototype.loginRedirect=function(e){return Pr(this,void 0,void 0,function(){var i;return Rr(this,function(o){return i=this.getRequestCorrelationId(e),this.logger.verbose("loginRedirect called",i),[2,this.acquireTokenRedirect(bo({correlationId:i},e||OV))]})})},t.prototype.loginPopup=function(e){var i=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",i),this.acquireTokenPopup(bo({correlationId:i},e||OV))},t.prototype.acquireTokenSilent=function(e){return Pr(this,void 0,void 0,function(){var i,o,s,f,v,I=this;return Rr(this,function(D){if(i=this.getRequestCorrelationId(e),(o=this.performanceClient.startMeasurement(ar.AcquireTokenSilent,i)).addStaticFields({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(mo.Silent),this.logger.verbose("acquireTokenSilent called",i),v=e.account||this.getActiveAccount())return f={clientId:this.config.auth.clientId,authority:e.authority||Zt.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:v.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},s=JSON.stringify(f),void 0===(f=this.activeSilentTokenRequests.get(s))?(this.logger.verbose("acquireTokenSilent called for the first time, storing active request",i),this.performanceClient.setPreQueueTime(ar.AcquireTokenSilentAsync,i),v=this.acquireTokenSilentAsync(bo(bo({},e),{correlationId:i}),v).then(function(k){return I.activeSilentTokenRequests.delete(s),o.addStaticFields({accessTokenSize:k.accessToken.length,idTokenSize:k.idToken.length}),o.endMeasurement({success:!0,fromCache:k.fromCache,isNativeBroker:k.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:k.requestId}),k}).catch(function(k){throw I.activeSilentTokenRequests.delete(s),o.endMeasurement({errorCode:k.errorCode,subErrorCode:k.subError,success:!1}),k}),this.activeSilentTokenRequests.set(s,v),[2,v]):(this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",i),o.discardMeasurement(),[2,f]);throw ki.createNoAccountError()})})},t.prototype.trackPageVisibility=function(){this.astsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.astsAsyncMeasurement.increment({visibilityChangeCount:1}))},t.prototype.acquireTokenSilentAsync=function(e,i){var o;return Pr(this,void 0,void 0,function(){var s,f,v,I,D=this;return Rr(this,function(k){switch(k.label){case 0:return this.performanceClient.addQueueMeasurement(ar.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_START,mo.Silent,e),this.astsAsyncMeasurement=this.performanceClient.startMeasurement(ar.AcquireTokenSilentAsync,e.correlationId),null!=(o=this.astsAsyncMeasurement)&&o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility),AT.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&i.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),s=bo(bo({},e),{account:i}),s=this.acquireTokenNative(s,du.acquireTokenSilent_silentFlow).catch(function(X){return Pr(D,void 0,void 0,function(){return Rr(this,function(fe){if(X instanceof vv&&X.isFatal())return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,[2,this.createSilentIframeClient(e.correlationId).acquireToken(e)];throw X})})}),[3,3]):[3,1];case 1:return this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),f=this.createSilentCacheClient(e.correlationId),this.performanceClient.setPreQueueTime(ar.InitializeSilentRequest,e.correlationId),[4,f.initializeSilentRequest(e,i)];case 2:v=k.sent(),I=bo(bo({},e),{cacheLookupPolicy:e.cacheLookupPolicy||eg.Default}),this.performanceClient.setPreQueueTime(ar.AcquireTokenFromCache,v.correlationId),s=this.acquireTokenFromCache(f,v,I).catch(function(X){if(I.cacheLookupPolicy===eg.AccessToken)throw X;return ld.blockReloadInHiddenIframes(),D.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_NETWORK_START,mo.Silent,v),D.performanceClient.setPreQueueTime(ar.AcquireTokenByRefreshToken,v.correlationId),D.acquireTokenByRefreshToken(v,I).catch(function(fe){if(fe instanceof ET&&"invalid_grant"===fe.errorCode&&!(fe instanceof km)&&I.cacheLookupPolicy!==eg.AccessTokenAndRefreshToken&&I.cacheLookupPolicy!==eg.RefreshToken||I.cacheLookupPolicy===eg.Skip||fe.errorCode===QO_noTokensFoundError_code)return D.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",e.correlationId),D.performanceClient.setPreQueueTime(ar.AcquireTokenBySilentIframe,v.correlationId),D.acquireTokenBySilentIframe(v);throw fe})}),k.label=3;case 3:return[2,s.then(function(X){var fe;return D.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_SUCCESS,mo.Silent,X),null!=(fe=D.astsAsyncMeasurement)&&fe.endMeasurement({success:!0,fromCache:X.fromCache,isNativeBroker:X.fromNativeBroker,requestId:X.requestId}),X}).catch(function(X){var fe;throw D.eventHandler.emitEvent(wa.ACQUIRE_TOKEN_FAILURE,mo.Silent,null,X),null!=(fe=D.astsAsyncMeasurement)&&fe.endMeasurement({errorCode:X.errorCode,subErrorCode:X.subError,success:!1}),X}).finally(function(){document.removeEventListener("visibilitychange",D.trackPageVisibility)})]}})})},t}(eW);function gz(n){this.message=n}(gz.prototype=new Error).name="InvalidCharacterError";var jV=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(n){var t=String(n).replace(/=+$/,"");if(t.length%4==1)throw new gz("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,i,o=0,s=0,f="";i=t.charAt(s++);~i&&(e=o%4?64*e+i:i,o++%4)&&(f+=String.fromCharCode(255&e>>(-2*o&6))))i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return f};function eF(n){this.message=n}(eF.prototype=new Error).name="InvalidTokenError";var iW=function(){function n(t){var e=this,i=(this.fallbackStorage={},this._triggerTokenFetch=function(o){return void 0===o&&(o=!1),new Promise(function(s,f){"function"!=typeof e.options.getToken?f(new Error("Token cannot be ".concat(o?"fetched":"renewed"," because getToken was not set or is not a function."))):e.options.getToken(function(v){try{var I=e._getTokenExpiry(v)-n.constants.tokenRefreshClockSkew;e._storeToken(v),e._setTimeoutTokenFetch(I),s()}catch{f(new Error("Invalid token returned by getToken function"))}},function(v){f(v)},e.map)})},this._setTimeoutTokenFetch=function(o){clearTimeout(e.tokenTimeOutHandle),e.tokenTimeOutHandle=setTimeout(e._triggerTokenFetch,Math.min(1e3*o,2147483647))},t.getServiceOptions());this.options=i.authOptions,this.sessionId=i.sessionId,this.map=t}return n.prototype.initialize=function(){var t=this;return this.initPromise||(this.initPromise=new Promise(function(e,i){if(t.options.authType===Y.subscriptionKey)e();else if(t.options.authType===Y.aad)t.options.authContext=t.options.authContext||n.getDefaultAuthContext(t.options),t.options.authContext.handleRedirectPromise().then(function(){setTimeout(function(){return t._loginAndAcquireTokenForAAD(e,i)})}).catch(function(s){i(new Error("Error logging in the AAD users: "+s))});else if(t.options.authType===Y.anonymous)e(t._triggerTokenFetch(!0));else if(t.options.authType===Y.sas){if(t.options.sasToken){var o=-1;try{o=t._getTokenExpiry(t.options.sasToken)}catch{return void i(new Error("An invalid sasToken was provided."))}if(o>n.constants.tokenRefreshClockSkew)return t._storeToken(t.options.sasToken),t._setTimeoutTokenFetch(o-n.constants.tokenRefreshClockSkew),void e()}e(t._triggerTokenFetch())}else i(new Error("An invalid authentication type was specified."))})),this.initPromise},n.prototype.dispose=function(){this.tokenTimeOutHandle&&(clearTimeout(this.tokenTimeOutHandle),this.tokenTimeOutHandle=null)},n.getDefaultAuthContext=function(t){if(!t.aadAppId)throw new Error("No AAD app ID was specified.");if(t.aadTenant)return this.defaultAuthContext||(this.defaultAuthContext=new tW({auth:{authority:"".concat(t.aadInstance||Ne.aadInstance).concat(t.aadTenant),clientId:t.aadAppId},cache:{cacheLocation:this.constants.preferredCacheLocation}})),this.defaultAuthContext;throw new Error("No AAD tenant was specified.")},n.prototype._loginAndAcquireTokenForAAD=function(t,e){var i=(null==(i=this.options.authContext)?void 0:i.getAllAccounts())||[];0===i.length?(this.options.authContext.loginRedirect(),t()):(this.options.authContext.setActiveAccount(i[0]),this._acquireTokenForAAD(t,e))},n.prototype._acquireTokenForAAD=function(t,e){var i=this,o={scopes:["https://atlas.microsoft.com/.default"]};this.options.authContext.acquireTokenSilent(o).then(function(s){i._saveItem(n.constants.storage.tokenKey,s.accessToken);var f=(i.map.events.invoke(n.constants.events.tokenAcquired,f={map:i.map,type:n.constants.events.tokenAcquired}),clearTimeout(i.tokenTimeOutHandle),new Date(s.expiresOn).getTime()-Date.now());i.tokenTimeOutHandle=setTimeout(function(){return i._acquireTokenForAAD()},f),t?.()}).catch(function(s){if(s instanceof km)return i.options.authContext.acquireTokenRedirect(o),t?.();e?.(s)})},n.prototype.getAuthType=function(){return this.options.authType},n.prototype.getClientId=function(){return this.options.clientId},n.prototype.getToken=function(){if(this.options.authType===Y.aad)return this._getItem(n.constants.storage.tokenKey);if(this.options.authType!==Y.anonymous&&this.options.authType!==Y.sas)return this.options.authType===Y.subscriptionKey?this.options.subscriptionKey:void 0;var t=this._getItem(n.constants.storage.tokenKey);if(t){var e=this._getTokenExpiry(t);if(e<300&&0<e)this._triggerTokenFetch();else if(e<=0)throw this._saveItem(n.constants.storage.tokenKey,""),new Error(n.constants.errors.tokenExpired)}else this._triggerTokenFetch();return t},n.prototype._getTokenExpiry=function(e){e=function rW(n,t){if("string"!=typeof n)throw new eF("Invalid token specified");t=!0===(t=t||{}).header?0:1;try{return JSON.parse(function nW(n){var t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(jV(t).replace(/(.)/g,function(e,i){return"%"+((i=i.charCodeAt(0).toString(16).toUpperCase()).length<2?"0"+i:i)}))}catch{return jV(t)}}(n.split(".")[t]))}catch(e){throw new eF("Invalid token specified: "+e.message)}}(e).exp;var i=this._getCurrentTime();return 0<e-i?e-i:-1},n.prototype._storeToken=function(t){this._saveItem(n.constants.storage.tokenKey,t),this.map.events.invoke(n.constants.events.tokenAcquired,t={map:this.map,type:n.constants.events.tokenAcquired})},n.prototype._saveItem=function(t,e){return this._supportsLocalStorage()?localStorage.setItem(t,e):this._supportsSessionStorage()?sessionStorage.setItem(t,e):this.fallbackStorage[t]=e,!0},n.prototype._getItem=function(t){return this._supportsLocalStorage()?localStorage.getItem(t):this._supportsSessionStorage()?sessionStorage.getItem(t):t in this.fallbackStorage?this.fallbackStorage[t]:null},n.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem(n.constants.storage.testStorageKey,"A"),"A"===window.localStorage.getItem(n.constants.storage.testStorageKey)&&(window.localStorage.removeItem(n.constants.storage.testStorageKey),!window.localStorage.getItem(n.constants.storage.testStorageKey)))}catch{return!1}},n.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(n.constants.storage.testStorageKey,"A"),"A"===window.sessionStorage.getItem(n.constants.storage.testStorageKey)&&(window.sessionStorage.removeItem(n.constants.storage.testStorageKey),!window.sessionStorage.getItem(n.constants.storage.testStorageKey)))}catch{return!1}},n.prototype._getCurrentTime=function(){return Math.round((new Date).getTime()/1e3)},n.prototype.signRequest=function(t){t.headers=t.headers||{},t.headers["Session-Id"]=this.sessionId,t.headers["Ms-Am-Request-Origin"]="MapControl",t.headers["Map-Agent"]="MapControl/".concat(In," (Web)");var e=this.getToken();switch(this.options.authType){case Y.aad:case Y.anonymous:t.headers["x-ms-client-id"]=this.options.clientId,t.headers.Authorization="Bearer "+e;break;case Y.sas:t.headers.Authorization="jwt-sas "+e;break;case Y.subscriptionKey:t.headers["subscription-key"]=e;break;default:throw new Error("An invalid authentication type was specified")}return t},n.constants={preferredCacheLocation:"localStorage",storage:{tokenKey:"access.token.key",testStorageKey:"testStorage"},events:{tokenAcquired:"tokenacquired"},tokenExpiresIn:3599,tokenRefreshClockSkew:300,errors:{tokenExpired:"Token Expired, Try again"}},n}(),$V=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oW=function(){function n(t){for(var e in this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("atlas-control-container"),Zo){var i;Zo.hasOwnProperty(e)&&((i=document.createElement("div")).classList.add(Zo[e]),i.classList.add("subcontrol-container"),this.controlContainer.appendChild(i))}this.map.getMapContainer().appendChild(this.controlContainer),this.controls=new Set}return n.prototype.add=function(t,e){var i,o;if(Array.isArray(t))try{for(var s=$V(t),f=s.next();!f.done;f=s.next())this._add(f.value,e)}catch(I){i={error:I}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}else this._add(t,e)},n.prototype.getControls=function(){return Array.from(this.controls)},n.prototype.remove=function(t){var e,i;if(Array.isArray(t))try{for(var o=$V(t),s=o.next();!s.done;s=o.next())this._remove(s.value)}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}else this._remove(t)},n.prototype._add=function(o,s){this.controls.add(o);var i=(new Jn).merge(s);if(o=o.onAdd(this.map,s),!(0<(s=this.controlContainer.getElementsByClassName(i.position)).length))throw new Error("Control position ".concat(i.position," does not exist."));s.item(0).appendChild(o)},n.prototype._remove=function(t){t.onRemove(),this.controls.delete(t)},n}(),nP=window&&window.__assign||function(){return(nP=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},aW=function(){function n(t){this.callbacks=new pr,this.map=t}return n.prototype.addCallback=function(t,e,i,o,s){var f,v,I=this;if(o)f=function(Se){var k=Se.lngLat?new ad(Se.lngLat.lng,Se.lngLat.lat):void 0,X=Se.point?[Se.point.x,Se.point.y]:void 0,fe=Se.features?Se.features.map(function(Ve){return new Ff(Ve.geometry,Ve.properties,Ve.id)}):[];i(Se={type:Se.type,originalEvent:Se.originalEvent,position:k,coordinate:X,features:fe})};else switch(t){case"data":case"sourcedata":case"styledata":f=function(D){D=nP(nP({dataType:D.dataType},"source"===D.dataType&&nP(nP(nP({isSourceLoaded:D.isSourceLoaded},D.sourceDataType&&{sourceDataType:D.sourceDataType}),{source:I.map.sources.getById(D.sourceId)}),D.tile&&{tile:{id:{x:D.tile.tileID.canonical.x,y:D.tile.tileID.canonical.y,z:D.tile.tileID.canonical.z},size:D.tile.tileSize,state:D.tile.state}})),{map:I.map,type:D.type}),s&&I.map.events._removeListener(t,e,i),i(D)};break;case"error":f=function(D){D={error:D.error,map:I.map,type:D.type},s&&I.map.events._removeListener(t,e,i),i(D)};break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":f=function(D){if(D.originalEvent){if(D.originalEvent===v)return;v=D.originalEvent}var Ve=D.point?new id(D.point.x,D.point.y):void 0,k=D.points?D.points.map(function(Je){return new id(Je.x,Je.y)}):[],X=D.lngLat?new ad(D.lngLat.lng,D.lngLat.lat):void 0,fe=D.lngLats?D.lngLats.map(function(Je){return new ad(Je.lng,Je.lat)}):[],Se=X?I.map.layers.getRenderedShapes(new Eg(X),e?[e]:void 0):[];Ve={map:I.map,originalEvent:D.originalEvent,pixel:Ve,pixels:k,position:X,positions:fe,shapes:Se,layerId:e||void 0,preventDefault:function(){return D.preventDefault()},type:D.type},s&&I.map.events._removeListener(t,e,i),i(Ve)};break;case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"click":case"dblclick":case"mouseout":case"mouseenter":case"mouseleave":case"contextmenu":f=function(D){if(D.originalEvent){if(D.originalEvent===v)return;v=D.originalEvent}var fe=D.lngLat?new ad(D.lngLat.lng,D.lngLat.lat):void 0,k=D.point?new id(D.point.x,D.point.y):void 0,X=fe?I.map.layers.getRenderedShapes(new Eg(fe),e?[e]:void 0):[];fe={map:I.map,originalEvent:D.originalEvent,position:fe,pixel:k,preventDefault:function(){return D.preventDefault()},shapes:X,layerId:e||void 0,type:D.type},s&&I.map.events._removeListener(t,e,i),i(fe)};break;case"styleimagemissing":f=function(D){s&&I.map.events._removeListener(t,e,i),i(D.id)};break;case"wheel":f=function(D){if(D.originalEvent){if(D.originalEvent===v)return;v=D.originalEvent}var k={map:I.map,originalEvent:D.originalEvent,preventDefault:function(){return D.preventDefault()},type:D.type};s&&I.map.events._removeListener(t,e,i),i(k)};break;case"resize":f=function(D){var k,X={map:I.map,type:D.type};for(k in D)"type"!==k&&"target"!==k&&(X[k]=D[k]);s&&I.map.events._removeListener(t,e,i),i(X)};break;default:f=function(D){var k={map:I.map,type:D.type};D.originalEvent&&(k.originalEvent=D.originalEvent),s&&I.map.events._removeListener(t,e,i),i(k)}}this.callbacks.has(e)||this.callbacks.set(e,new pr),this.callbacks.get(e).has(t)||this.callbacks.get(e).set(t,new Map),this.callbacks.get(e).get(t).set(i,[f,s])},n.prototype.removeCallback=function(t,e,i){this.callbacks.has(e)&&this.callbacks.get(e).has(t)&&this.callbacks.get(e).get(t).has(i)&&this.callbacks.get(e).get(t).delete(i)},n.prototype.getModifiedCallback=function(t,e,i){if(this.callbacks.has(e)&&this.callbacks.get(e).has(t)&&this.callbacks.get(e).get(t).has(i))return this.callbacks.get(e).get(t).get(i)[0]},n.prototype.getLayerCallbacks=function(t){if(this.callbacks.has(t))return this.callbacks.get(t)},n.prototype.getEventCallbacks=function(t,e){if(this.callbacks.has(e)&&(e=this.callbacks.get(e)).has(t))return e.get(t)},n}(),IT=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mz=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},VV=["maxzoomchanged","minzoomchanged","mapconfigurationchanged"],sW=function(){function n(t){this.map=t,this.mapCallbackHandler=new aW(this.map)}return n.prototype.add=function(t,e,i){var o,s;if("function"==typeof e)this._addGlobalListener(t,e,!1,!1);else{e=Array.isArray(e)?e:[e];try{for(var f=IT(e),v=f.next();!v.done;v=f.next()){var I=v.value;I instanceof vc&&vc._isMBoxEvent(t)?this._addLayerListener(t,I,i,!1,!1):I._addEventListener(t,i,!1)}}catch(D){o={error:D}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}},n.prototype.addOnce=function(t,e,i){"function"==typeof e?this._addGlobalListener(t,e,!1,!0):e instanceof vc&&vc._isMBoxEvent(t)?this._addLayerListener(t,e,i,!1,!0):e._addEventListener(t,i,!0)},n.prototype._addLegacy=function(t,e,i){"function"==typeof e?this._addGlobalListener(t,e,!0,!1):this._addLayerListener(t,e,i,!0,!1)},n.prototype._addLayerListener=function(t,k,i,o,s){k=k instanceof vc?k.getId():k;var f,v,I,D,X=this.map.layers.getLayerById(k),fe=this.mapCallbackHandler.getModifiedCallback(t,k,i);if(fe&&X)try{for(var Se=IT(X._getLayerIds()),Ve=Se.next();!Ve.done;Ve=Se.next()){var Je=Ve.value;this.map._getMap().off(t,Je,fe)}}catch(_n){f={error:_n}}finally{try{Ve&&!Ve.done&&(v=Se.return)&&v.call(Se)}finally{if(f)throw f.error}}if(this.mapCallbackHandler.addCallback(t,k,i,o,s),X){fe=this.mapCallbackHandler.getModifiedCallback(t,k,i);try{for(var lt=IT(X._getLayerIds()),mt=lt.next();!mt.done;mt=lt.next())Je=mt.value,this.map._getMap().on(t,Je,fe)}catch(_n){I={error:_n}}finally{try{mt&&!mt.done&&(D=lt.return)&&D.call(lt)}finally{if(I)throw I.error}}}},n.prototype._addGlobalListener=function(t,e,i,o){var s,f,v,I;VV.includes(t)?this.map._addEventListener(t,e,o):(s=this.mapCallbackHandler.getModifiedCallback(t,"",e),this.mapCallbackHandler.addCallback(t,"",e,i,o),f=this.mapCallbackHandler.getModifiedCallback(t,"",e),"load"===t&&this.map._isLoaded()?(v={type:"load",map:this.map},setTimeout(function(){return f(v)})):"ready"===t?this.map._isReady()&&(I={type:"ready",map:this.map},setTimeout(function(){return f(I)})):(s&&this.map._getMap().off(t,s),this.map._getMap().on(t,f)))},n.prototype.invoke=function(t,e,i){if(void 0===i)this._invokeListeners(t,"",e);else if(e instanceof vc&&vc._isMBoxEvent(t))this._invokeListeners(t,e.getId(),i);else{if(!(e instanceof Ai))throw new Error("The invoke target is invalid.");e._invokeEvent(t,i)}},n.prototype._invokeListeners=function(t,e,i){var o=this,s=new pr(this.mapCallbackHandler.getEventCallbacks(t,e));s?s.forEach(function(f,v){(f=mz(f,2))[1]&&o._removeListener(t,e,v),v(i)}):"error"===t&&console.error("error"in i?i.error:i)},n.prototype.remove=function(t,e,i){var o,s;if("function"==typeof e)this._removeListener(t,"",e);else{e=Array.isArray(e)?e:[e];try{for(var f=IT(e),v=f.next();!v.done;v=f.next()){var I=v.value;I instanceof vc&&vc._isMBoxEvent(t)?this._removeListener(t,I,i):I?._removeEventListener(t,i)}}catch(D){o={error:D}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}},n.prototype._removeLegacy=function(t,e,i){"function"==typeof e?this._removeListener(t,"",e):this._removeListener(t,e,i)},n.prototype._removeListener=function(t,e,i){var o,s;if(VV.includes(t))this.map._removeEventListener(t,i);else{e=e instanceof vc?e.getId():e;var f=this.mapCallbackHandler.getModifiedCallback(t,e,i);if(f)if(e){var v=this.map.layers.getLayerById(e);if(v)try{for(var I=IT(v._getLayerIds()),D=I.next();!D.done;D=I.next()){var k=D.value;this.map._getMap().off(t,k,f)}}catch(fe){o={error:fe}}finally{try{D&&!D.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}}else this.map._getMap().off(t,f);this.mapCallbackHandler.removeCallback(t,e,i)}},n.prototype._enableLayerEvents=function(t){var e=this,i=this.mapCallbackHandler.getLayerCallbacks(t.getId());i&&i.forEach(function(o,s){o.forEach(function(f){var v,I,D=mz(f,1)[0];try{for(var k=IT(t._getLayerIds()),X=k.next();!X.done;X=k.next()){var fe=X.value;e.map._getMap().on(s,fe,D)}}catch(Se){v={error:Se}}finally{try{X&&!X.done&&(I=k.return)&&I.call(k)}finally{if(v)throw v.error}}})})},n.prototype._disableLayerEvents=function(t){var e=this,i=this.mapCallbackHandler.getLayerCallbacks(t.getId());i&&i.forEach(function(o,s){o.forEach(function(f){var v,I,D=mz(f,1)[0];try{for(var k=IT(t._getLayerIds()),X=k.next();!X.done;X=k.next()){var fe=X.value;e.map._getMap().off(s,fe,D)}}catch(Se){v={error:Se}}finally{try{X&&!X.done&&(I=k.return)&&I.call(k)}finally{if(v)throw v.error}}})})},n}(),GV=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cW=function(){function n(t){this.markers=new Set,this.map=t}return n.prototype.add=function(t,e){var i,o;if(Array.isArray(t))try{for(var s=GV(t),f=s.next();!f.done;f=s.next())this._addMarker(f.value,e)}catch(I){i={error:I}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}else this._addMarker(t,e)},n.prototype._addMarker=function(t,e){t._addToMap(this.map,e),this.markers.add(t)},n.prototype.getMarkers=function(){return Array.from(this.markers)},n.prototype.remove=function(t){var e,i;if(Array.isArray(t))try{for(var o=GV(t),s=o.next();!s.done;s=o.next())this._removeMarker(s.value)}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}else this._removeMarker(t)},n.prototype._removeMarker=function(t){var e=this;t instanceof IS?(t._removeFromMap(),this.markers.delete(t)):this.markers.forEach(function(i){i._getId()===t&&(i._removeFromMap(),e.markers.delete(i))})},n.prototype.clear=function(){var t=this;this.markers.forEach(function(e){e._removeFromMap(),t.markers.delete(e)})},n}(),lW=function(){function n(t){this.userImages=new pr,this.imageLoadTimeout=5e3,this.map=t}return n.prototype.add=function(t,e,i){var o=this;return new Promise(function(s,f){var v,I,D;o.userImages.has(t)?s():e instanceof HTMLImageElement||e instanceof ImageData?(o.map._getMap().addImage(t,e,i),o.userImages.set(t,{image:e,meta:i}),s()):"string"==typeof e&&(I=/<svg/i.test(e)&&!/^data:/i.test(e)?"data:image/svg+xml;base64,"+window.btoa(e):e,D=!1,o.map._sendRequest(I,"Image").then(function(k){return D?void 0:k.blob()}).then(function(k){var X;!D&&k&&(clearTimeout(v),(X=new Image).onload=function(){o.map._getMap().addImage(t,X,i),o.userImages.set(t,{image:X,meta:i}),s()},X.onerror=X.onabort=function(){f("Failed to load image into HTML element.")},X.src=URL.createObjectURL(k))}).catch(function(){D||(clearTimeout(v),f("Failed to load image into HTML element."))}),v=setTimeout(function(){D=!0,f("Failed to load image within specified timeout: ".concat(o.imageLoadTimeout," ms."))},o.imageLoadTimeout))})},n.prototype.clear=function(){var t=this;this.userImages.forEach(function(e,i){t.map._getMap().removeImage(i)}),this.userImages.clear()},n.prototype.getImageIds=function(){var t=[];return this.userImages.forEach(function(e,i){t.push(i)}),t},n.prototype.createFromTemplate=function(t,e,i,o,s){return i=i||"#1A73AA",o=o||"#fff",e=(e=eu(e,s)).replace(/{color}/g,i).replace(/{secondaryColor}/g,o).replace(/{text}/g,""),this.add(t,e)},n.prototype.hasImage=function(t){return this.userImages.has(t)},n.prototype.remove=function(t){this.map._getMap().removeImage(t),this.userImages.delete(t)},n.prototype._restoreImages=function(){var t=this;this.userImages.forEach(function(e,i){t.map._getMap().hasImage(i)||t.map._getMap().addImage(i,e.image,e.meta)})},n}(),uW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dW=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zb=function(n){function t(e,i){return(i=n.call(this,i)||this).layers=e,i}return uW(t,n),t.prototype.getOptions=function(){return{}},t.prototype.setOptions=function(e){},t.prototype._buildLayers=function(){return this.layers},t.prototype._getLayerIds=function(){return this.layers.map(function(e){return e.id})},t.prototype._getSourceIds=function(){var e,i,o=new Set;try{for(var s=dW(this.layers),f=s.next();!f.done;f=s.next()){var v=f.value;"source"in v&&"string"==typeof v.source?o.add(v.source):"source"in v&&v.source&&o.add(v.id)}}catch(I){e={error:I}}finally{try{f&&!f.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return o},t.prototype._updateLayoutProperty=function(e,i,o,s){var f;Qh(i,o)||(f=this.map._getMap(),this.layers.forEach(function(v){f.getLayer(v.id)?f.setLayoutProperty(v.id,e,s||i):console.warn("Could not update layout property ".concat(e," for layer ").concat(v.id," to ").concat(s||i))}))},t}(vc),S1=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hW=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},pW=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},fW=function(){function n(t){this.layerIndex=[],this.userLayers=[],this.map=t}return n.prototype.add=function(t,e){var i,o,s=e instanceof vc?e.getId():e;if(Array.isArray(t))try{for(var f=S1(t),v=f.next();!v.done;v=f.next())this._addLayer(v.value,s)}catch(D){i={error:D}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else this._addLayer(t,s)},n.prototype._addLayer=function(t,e){if(!(this.map._isReady()||t instanceof zb))throw new Error("The layer '".concat(t.getId(),"' could not be added to the map because ")+"the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a layer to it.");var i,o,s,f;e!==t.getId()&&this.layerIndex.find(function(v){return e===v.getId()})?this._getMapboxLayerExists(t)?(o=this.layerIndex.findIndex(function(v){return v.getId()===t.getId()}),s=this.userLayers.findIndex(function(v){return v.layer.getId()===t.getId()}),this._removeMapboxLayers(t),this._addMapboxLayers(t,e),(f=this.layerIndex[o])&&this.map.events._disableLayerEvents(f),this.map.events._enableLayerEvents(t),this.layerIndex.splice(o,1),i=this.layerIndex.findIndex(function(v){return v.getId()===e}),this.layerIndex.splice(i,0,t),t instanceof zb||(this.userLayers[s]={layer:t,before:e}),f&&f.onRemove()):(this._addMapboxLayers(t,e),this.map.events._enableLayerEvents(t),i=this.layerIndex.findIndex(function(v){return v.getId()===e}),this.layerIndex.splice(i,0,t),t instanceof zb||this.userLayers.push({layer:t,before:e})):(o=this.layerIndex.findIndex(function(v){return v.getId()===t.getId()}),s=this.userLayers.findIndex(function(v){return v.layer.getId()===t.getId()}),0<=o&&0<=s?(this._removeMapboxLayers(f=this.layerIndex[o]),this._addMapboxLayers(t,o+1),this.map.events._disableLayerEvents(f),this.map.events._enableLayerEvents(t),(this.layerIndex[o]=t)instanceof zb||(this.userLayers[s]={layer:t,before:void 0}),f.onRemove()):(this._addMapboxLayers(t),this.map.events._enableLayerEvents(t),this.layerIndex.push(t),t instanceof zb||this.userLayers.push({layer:t,before:e}))),t.onAdd(this.map)},n.prototype._addMapboxLayers=function(t,e){var i,o;if(!(t instanceof SS)||t.getOptions().tileUrl){if(!(t instanceof zb)){t instanceof mS&&(this.map._getMap().addSource(t._getSourceId(),t._buildSource()),this.map.sources.setSourceState(t._getSourceWrapper()));var s=this._getMapboxBefore(e);try{for(var f=S1(t._buildLayers()),v=f.next();!v.done;v=f.next()){var I=v.value;this.map._getMap().addLayer(I,s)}}catch(D){i={error:D}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}this.map.events._enableLayerEvents(t)}},n.prototype._removeMapboxLayers=function(t,e){var i,o;if(t instanceof zb&&!e)this.map.events._disableLayerEvents(t);else{try{for(var s=S1(t._getLayerIds()),f=s.next();!f.done;f=s.next()){var v=f.value;this.map._getMap().getLayer(v)&&this.map._getMap().removeLayer(v)}}catch(I){i={error:I}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}this.map.events._disableLayerEvents(t),t instanceof mS&&this.map._getMap().getSource(t._getSourceId())&&this.map._getMap().removeSource(t._getSourceId())}},n.prototype._getMapboxLayerExists=function(t){var e=this,i=!1;return"string"==typeof t?!!(t=this.layerIndex.find(function(o){return o.getId()===t})):(t._getLayerIds().forEach(function(o){e.map._getMap().getLayer(o)&&(i=!0)}),i)},n.prototype._getMapboxBefore=function(t){var e,i,o,s;if("string"==typeof t){var f=this.layerIndex.find(function(Se){return Se.getId()===t});if(!f)return;try{for(var v=S1(f._getLayerIds()),I=v.next();!I.done;I=v.next()){var D=I.value;if(this.map._getMap().getLayer(D))return D}}catch(Se){e={error:Se}}finally{try{I&&!I.done&&(i=v.return)&&i.call(v)}finally{if(e)throw e.error}}t=this.layerIndex.findIndex(function(Se){return Se.getId()===t})+1}for(var k=t;k<this.layerIndex.length;k++)try{o=void 0;for(var X=S1(this.layerIndex[k]._getLayerIds()),fe=X.next();!fe.done;fe=X.next())if(D=fe.value,this.map._getMap().getLayer(D))return D}catch(Se){o={error:Se}}finally{try{fe&&!fe.done&&(s=X.return)&&s.call(X)}finally{if(o)throw o.error}}},n.prototype.clear=function(){for(var t=this.layerIndex.length-1;0<=t;t--){var e=this.layerIndex[t];e&&(this._removeMapboxLayers(e,!0),this.layerIndex.splice(t,1),e.onRemove())}this.userLayers=[]},n.prototype.getLayerById=function(t){var e=this.layerIndex.find(function(i){return i.getId()===t});if(e)return e},n.prototype.getLayers=function(){return this.layerIndex.slice(0)},n.prototype._getSourceIds=function(){var t,e,i=new Set;try{for(var o=S1(this.layerIndex),s=o.next();!s.done;s=o.next())s.value._getSourceIds().forEach(function(f){return i.add(f)})}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return i},n.prototype._getUserLayers=function(){return Array.from(this.userLayers)},n.prototype.move=function(t,e){var i=t instanceof vc?t.getId():t,o=e instanceof vc?e.getId():e;if(!this.layerIndex.find(function(s){return s.getId()===i}))throw new Error("The layer '".concat(i,"' has not been added to the map and cannot be moved."));e=this.layerIndex.findIndex(function(s){return s.getId()===i}),this._moveMapboxLayers(this.layerIndex[e],o),t=this.layerIndex[e],this.layerIndex.splice(e,1),-1<(e=this.layerIndex.findIndex(function(s){return s.getId()===o}))?this.layerIndex.splice(e,0,t):this.layerIndex.push(t),(e=this.userLayers.find(function(s){return s.layer.getId()===i}))&&(e.before=o)},n.prototype._moveMapboxLayers=function(t,e){var i,o,s=this._getMapboxBefore(e);try{for(var f=S1(t._getLayerIds()),v=f.next();!v.done;v=f.next()){var I=v.value;this.map._getMap().moveLayer(I,s)}}catch(D){i={error:D}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}},n.prototype.getRenderedShapes=function(t,e,i){var o,s,f,v=this;if(t=t||[-180,-85.0511,180,85.0511],Array.isArray(t)?4===t.length||6===t.length?f=this.map.positionsToPixels([es.getSouthWest(t),es.getNorthEast(t)]):2!==t.length&&3!==t.length||(f=this.map.positionsToPixels([t])[0]):f=this.map.positionsToPixels([t.coordinates])[0],e){e=Array.isArray(e)?e:[e];var I=[],D=this;try{for(var k=S1(e),X=k.next();!X.done;X=k.next())!function(Ve){var Se=Ve instanceof vc?Ve.getId():Ve;if(!(-1<(Ve=D.layerIndex.findIndex(function(Je){return Je.getId()===Se}))))throw new Error("The layer '".concat(Se,"' has not been added to the map ")+"and its rendered features cannot be retrieved.");I.push.apply(I,pW([],hW(D.layerIndex[Ve]._getLayerIds().filter(function(Je){return!!v.map._getMap().getLayer(Je)})),!1))}(X.value)}catch(fe){o={error:fe}}finally{try{X&&!X.done&&(s=k.return)&&s.call(k)}finally{if(o)throw o.error}}}return t=this.map._getMap().queryRenderedFeatures(f,{layers:I,filter:i}),this.map.sources._mapFeaturesToShapes(t)},n.prototype.remove=function(t){var e,i;if(Array.isArray(t))try{for(var o=S1(t),s=o.next();!s.done;s=o.next())this._removeLayer(s.value)}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}else this._removeLayer(t)},n.prototype._removeLayer=function(t){var e=t instanceof vc?t.getId():t;if(-1==(o=this.layerIndex.findIndex(function(s){return s.getId()===e})))throw new Error("The layer '".concat(e,"' has not been added to the map and cannot be removed."));var o,i=this.layerIndex[o];-1!=(this._removeMapboxLayers(i),this.layerIndex.splice(o,1),o=this.userLayers.findIndex(function(s){return s.layer.getId()===e}))&&this.userLayers.splice(o,1),t instanceof mS&&this.map.sources.unsetSourceState(t._getSourceId()),i.onRemove()},n}(),qV=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gW=function(){function n(t){var e=this;this._onDrag=function(i){var o,s;"mousemove"===i.type?(o=i.clientX,s=i.clientY):"touchmove"===i.type&&(o=i.touches[0].clientX,s=i.touches[0].clientY),e.draggedPopups.forEach(function(f){f._dragToPixel([o,s])})},this._onUp=function(){e.map.getMapContainer().removeEventListener("mousemove",e._onDrag),e.map.getMapContainer().removeEventListener("touchmove",e._onDrag),e.map.getMapContainer().removeEventListener("mouseup",e._onUp),e.map.getMapContainer().removeEventListener("touchend",e._onUp),e.draggedPopups.forEach(function(i){e.draggedPopups.delete(i),i._onUp()})},this.map=t,this.popups=new Set,this.draggedPopups=new Set}return n.prototype.add=function(t){var e,i;t=Array.isArray(t)?t:[t];try{for(var o=qV(t),s=o.next();!s.done;s=o.next()){var f=s.value;this.popups.has(f)||(this.popups.add(f),f.attach(this.map))}}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},n.prototype.clear=function(){var t=this;this.popups.forEach(function(e){t.popups.delete(e),e.remove()})},n.prototype.remove=function(t){var e,i;t=Array.isArray(t)?t:[t];try{for(var o=qV(t),s=o.next();!s.done;s=o.next()){var f=s.value;this.popups.has(f)&&(this.popups.delete(f),f.remove())}}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},n.prototype.getPopups=function(){return Array.from(this.popups)},n.prototype._getCollectionDiv=function(){var t=this.map.getMapContainer().querySelector(".".concat(n.Css.collection));return t||((t=document.createElement("div")).classList.add(n.Css.collection),t.setAttribute("aria-label","Map Information"),this.map.getMapContainer().appendChild(t)),t},n.prototype._addDraggedPopup=function(t){0===this.draggedPopups.size&&(this.map.getMapContainer().addEventListener("mousemove",this._onDrag),this.map.getMapContainer().addEventListener("touchmove",this._onDrag),this.map.getMapContainer().addEventListener("mouseup",this._onUp),this.map.getMapContainer().addEventListener("touchend",this._onUp)),this.draggedPopups.add(t)},n.Css={collection:"popup-collection-container"},n}(),_z=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mW=function(){function n(t){this.map=t,this.sources=new pr}return n.prototype.add=function(t,e){var i,o;if(void 0===e&&(e=!0),Array.isArray(t))try{for(var s=_z(t),f=s.next();!f.done;f=s.next())this._addSource(f.value,e)}catch(I){i={error:I}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}else this._addSource(t,e)},n.prototype.getRenderedShapes=function(t,e,i){return t="string"==typeof t?t:t.getId(),i=this.map._getMap().querySourceFeatures(t,{sourceLayer:i,filter:e}),this.map.sources._mapFeaturesToShapes(i,!0,this.sources.get(t))},n.prototype.getFeatureState=function(t,e,i){return t="string"==typeof t?t:t instanceof Bl?t.getId():t.id,e="string"==typeof e?e:e.getId(),this.map._getMap().getFeatureState({id:t,source:e,sourceLayer:i})},n.prototype.removeFeatureState=function(t,e,i,o){t="string"==typeof t?t:t instanceof Bl?t.getId():t.id,e="string"==typeof e?e:e.getId(),this.map._getMap().removeFeatureState({id:t,source:e,sourceLayer:i},o)},n.prototype.setFeatureState=function(t,e,i,o){t="string"==typeof t?t:t instanceof Bl?t.getId():t.id,e="string"==typeof e?e:e.getId(),this.map._getMap().setFeatureState({id:t,source:e,sourceLayer:o},i)},n.prototype._buildSources=function(){var t={};return this.sources.forEach(function(e){t[e.getId()]=e._buildSource()}),t},n.prototype.clear=function(){var t=this;this.sources.forEach(function(e){t.remove(e)})},n.prototype.getById=function(t){return this.sources.get(t)},n.prototype.getSources=function(){return Array.from(this.sources.values())},n.prototype.isSourceLoaded=function(t){return t=t instanceof zl?t.getId():t,this.map._getMap().isSourceLoaded(t)},n.prototype.remove=function(t,e){var i,o;if(void 0===e&&(e=!0),Array.isArray(t))try{for(var s=_z(t),f=s.next();!f.done;f=s.next())this._removeSource(f.value,e)}catch(I){i={error:I}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}else this._removeSource(t,e)},n.prototype.setSourceState=function(t,e){void 0===e&&(e=!0),this.sources.set(t.getId(),t),t._setMap(this.map,e)},n.prototype.unsetSourceState=function(t){this.sources.has(t)&&(this.sources.get(t)._setMap(null),this.sources.delete(t))},n.prototype._removeSource=function(t,e){if(t=t instanceof zl?t.getId():t,!this.sources.has(t))throw new Error("'".concat(t,"' is not added to the map"));if(this.map._getMap().getSource(t)&&e&&this.map._getMap().removeSource(t),this.map._getMap().getSource(t)&&e)throw new Error("One or more layers have a dependency on the source '".concat(t,"'"));this.unsetSourceState(t)},n.prototype._addSource=function(t,e){if(this.sources.has(t.getId())){if(e)throw new Error("'".concat(t.getId(),"' is already added to the map"));this.unsetSourceState(t.getId())}if(e){if(!this.map._isReady())throw new Error("The source '".concat(t.getId(),"' could not be added to the map because ")+"the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a source to it.");this.map._getMap().addSource(t.getId(),t._buildSource())}this.setSourceState(t)},n.prototype._mapFeaturesToShapes=function(t,e,i){var o,s,f=[];try{for(var v=_z(t),I=v.next();!I.done;I=v.next()){var D=I.value;if((i||"string"==typeof D.source)&&"string"==typeof D.properties[Bl._shapeIdPropName]){var k=i||this.sources.get(D.source);if(k instanceof lf){var X=k.getShapeById(D.properties[Bl._shapeIdPropName]);if(X instanceof Bl){f.push(X);continue}}}e||f.push(D)}}catch(fe){o={error:fe}}finally{try{I&&!I.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}return f},n.prototype._syncSources=function(t){var e=this;t?(Object.keys(t).map(function(i){var o,s=t[i];switch(s.type){case"vector":case"raster":case"raster-dem":o=new m4(i,{name:i,tiles:s.tiles,type:s.type,url:s.url,tileSize:"tileSize"in s?s.tileSize:void 0});break;case"canvas":o=new i4(i,s);break;case"geojson":var f=new lf(i,{maxZoom:s.maxzoom,cluster:s.cluster,clusterRadius:s.clusterRadius,tolerance:s.tolerance,lineMetrics:s.lineMetrics,clusterProperties:s.clusterProperties,buffer:s.buffer,clusterMinPoints:s.clusterMinPoints,generateId:s.generateId,promoteId:s.promoteId,filter:s.filter});"string"!=typeof s.data&&void 0!==s.data&&f._addNoUpdate(s.data),o=f;break;case"image":o=new SR(i,s);break;case"video":o=new wR(i,s);break;default:o=new Sg(i,s)}return o}).forEach(function(i){var o=e.sources.get(i.getId()),s=o&&i._isDeepEqual(o);!s&&o&&e.unsetSourceState(o.getId()),e.setSourceState(i,!s)}),Array.from(this.sources.keys()).filter(function(i){return!(i in t)}).forEach(function(i){return e.unsetSourceState(i)})):console.warn("syncSources called with no style sources which is unexpected.")},n}(),_W=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.duration=1e3,e.type="jump",e}return _W(t,n),t}(_t),vW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),CW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.bottom=0,e.left=0,e.right=0,e.top=0,e}return vW(t,n),t}(_t),bW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),EW=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SW=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},wW=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},TW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.bounds=[-180,-89,180,90],e.maxBounds=void 0,e.maxZoom=20,e.offset=new id(0,0),e.padding=new CW,e}return bW(t,n),t.prototype.merge=function(){for(var e,i,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];try{for(var f=EW(o),v=f.next();!v.done;v=f.next()){var I=v.value;I&&"number"==typeof I.padding&&(I.padding={top:I.padding,bottom:I.padding,left:I.padding,right:I.padding})}}catch(D){e={error:D}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(e)throw e.error}}return n.prototype.merge.apply(this,wW([],SW(o),!1))},t}(_t),AW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.zoom=1,e.center=new ad(0,0),e.centerOffset=new id(0,0),e.bearing=0,e.pitch=0,e.minZoom=1,e.maxZoom=20,e.minPitch=0,e.maxPitch=60,e.maxBounds=void 0,e}return AW(t,n),t}(_t),MW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tk=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.name=void 0,e.before=void 0,e.minZoom=1,e.maxZoom=20,e.overwrite=!1,e.opacity=1,e}return MW(t,n),t}(_t),OW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),PW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.color="rgba(0,0,0,.5)",e.outlineColor="#000",e.radius=1,e.outlineWidth=5,e.name="default-circles",e}return OW(t,n),t}(tk),RW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.cap="butt",e.join="miter",e.name="default-linestrings",e.color="#000",e.width=1,e}return RW(t,n),t}(tk),NW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),DW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.iconSize=1,e.fontSize=14,e.fontColor="#000",e.textFont="SegoeUi-Regular",e.cluster=!0,e.clusterIcon=void 0,e.textOffset=[0,0],e.name="default-pins",e.icon="pin-darkblue",e.title="",e}return NW(t,n),t}(tk),kW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),LW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.color="rgba(0,0,0,.5)",e.outlineColor="#000",e.name="default-polygons",e}return kW(t,n),t}(tk),FW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),HW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.name="default-raster",e}return FW(t,n),t}(tk),UW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),BW=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.anchor="map",e.color="#FFFFFF",e.intensity=.5,e.position=[1.15,210,30],e}return UW(t,n),t}(_t),zW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jW=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$W=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},VW=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},KV=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.antialias=void 0,e.autoResize=!0,e.language=Ds(),e.light=new BW,e.preserveDrawingBuffer=!1,e.progressiveLoading=!1,e.progressiveLoadingInitialLayerGroups=["base"],e.renderWorldCopies=!0,e.showBuildingModels=!1,e.showFeedbackLink=!0,e.showLogo=!0,e.showLabels=!0,e.customAttribution=void 0,e.showTileBoundaries=!1,e.style=void 0,e.view=Kt(),e.userRegion=e.view,e.customStyleTransform=void 0,e}return zW(t,n),t.prototype.merge=function(){for(var e,i,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];try{for(var f=jW(o),v=f.next();!v.done;v=f.next()){var I=v.value;I&&(I.hasOwnProperty("view")?I.userRegion=I.view:I.hasOwnProperty("userRegion")&&(I.view=I.userRegion),"string"==typeof I.language)&&(I.language=Yt.getCode(I.language))}}catch(D){e={error:D}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(e)throw e.error}}return n.prototype.merge.apply(this,VW([],$W(o),!1))},t}(_t),GW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nk=window&&window.__assign||function(){return(nk=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},qW=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rk=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},ik=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},yz=function(n){return 0==n.length?void 0:n.slice(1).reduce(function(t,e){return function(i,o){return i=t(i,o),nk(nk({},i),e(i.url,o))}},n[0])},vz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.authOptions=ua(),e.disableTelemetry="atlas.azure.us"===Aa(),e["disable-telemetry"]=e.disableTelemetry,e.domain=Aa(),e.staticAssetsDomain=Ho(),e.styleDefinitionsPath=oo(),e.styleDefinitionsVersion=so(),e.styleAPIVersion=Ci(),e.mapConfiguration=void 0,e.styleSet=void 0,e.enableAccessibility=!0,e["enable-accessibility"]=e.enableAccessibility,e.enableAccessibilityLocationFallback=!0,e.maxParallelImageRequests=Ns(),e.refreshExpiredTiles=!0,e.subscriptionKey=ba(),e["subscription-key"]=e.subscriptionKey,e.sessionId=ns(),e["session-id"]=e.sessionId,e._transformers=[],e.transformRequest=void 0,e.workerCount=Oc(),e.fadeDuration=300,e.localIdeographFontFamily="sans-serif",e.validateStyle=!1,e}return GW(t,n),t.prototype.merge=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this.styleDefinitionsVersion;try{for(var s=qW(e),f=s.next();!f.done;f=s.next()){var v=f.value;v&&(v.authOptions?"string"==typeof v.authOptions.subscriptionKey&&(v.subscriptionKey=v["subscription-key"]=v.authOptions.subscriptionKey):"string"==typeof v.subscriptionKey?(v["subscription-key"]=v.subscriptionKey,v.authOptions={authType:Y.subscriptionKey,subscriptionKey:v.subscriptionKey}):"string"==typeof v["subscription-key"]&&(v.subscriptionKey=v["subscription-key"],v.authOptions={authType:Y.subscriptionKey,subscriptionKey:v["subscription-key"]}),"string"==typeof v.sessionId?v["session-id"]=v.sessionId:"string"==typeof v["session-id"]&&(v.sessionId=v["session-id"]),"boolean"==typeof v.disableTelemetry?v["disable-telemetry"]=v.disableTelemetry:"boolean"==typeof v["disable-telemetry"]&&(v.disableTelemetry=v["disable-telemetry"]),"boolean"==typeof v.enableAccessibility?v["enable-accessibility"]=v.enableAccessibility:"boolean"==typeof v["enable-accessibility"]&&(v.enableAccessibility=v["enable-accessibility"]))}}catch(fe){D={error:fe}}finally{try{f&&!f.done&&(k=s.return)&&k.call(s)}finally{if(D)throw D.error}}var I=this._transformers,k=e?e.filter(function(fe){return void 0!==fe}).reduce(function(fe,Se){return ik(ik([],rk(fe),!1),rk(Se._transformers||[]),!1)},[]):[],D=n.prototype.merge.apply(this,ik([],rk(e),!1)),X=(D.authOptions.authType!==Y.subscriptionKey&&(D["subscription-key"]=D.subscriptionKey=void 0),void 0!==D.styleSet&&void 0===D.mapConfiguration&&(D.mapConfiguration=D.styleSet),D.mapConfiguration&&"string"!=typeof D.mapConfiguration&&(D.mapConfiguration=nk(nk({},D.mapConfiguration),{defaultConfiguration:D.mapConfiguration.defaultConfiguration||D.mapConfiguration.defaultStyle,configurations:D.mapConfiguration.configurations||D.mapConfiguration.styles})),this._transformers=ik(ik([],rk(I||[]),!1),rk(k.filter(function(fe){return!I.includes(fe)})),!1),this.transformRequest&&!this._transformers.includes(this.transformRequest)&&this._transformers.push(this.transformRequest),k=new Date(Date.UTC(2023,0)),new Date(this.styleDefinitionsVersion));return(isNaN(X.getTime())||X.getTime()<k.getTime())&&(console.warn("Style definition version ".concat(this.styleDefinitionsVersion," is invalid or deprecated, style definition version is unchanged (").concat(o,")")),this.styleDefinitionsVersion=o),this.transformRequest=yz(this._transformers),D},t.prototype.addTransformer=function(e){this._transformers||(this._transformers=[]),this._transformers.push(e),this.transformRequest=yz(this._transformers)},t.prototype.removeTransformer=function(e){this._transformers&&(this._transformers=this._transformers.filter(function(i){return e!==i}),this.transformRequest=yz(this._transformers))},t._cloneCustomizer=function(e){if("object"==typeof e)return Object.assign({},e)},t}(_t),KW=function(){function n(){}return n.getLayerGroup=function(t){return"string"!=typeof t&&t.metadata&&t.metadata["microsoft.maps:layerGroup"]?t.metadata["microsoft.maps:layerGroup"]:(t="string"!=typeof t?t.id:t).startsWith("microsoft.")&&4<=(t=t.split(".")).length?t[3]:void 0},n}(),tF=function(){function n(t){var e=this;this.isHijacked=function(){return void 0!==e._hijackedToResolve||void 0!==e._hijackedToReject},this.isResolved=function(){return void 0!==e._hijackedToResolve||void 0!==e._toResolve},this.isRejected=function(){return void 0!==e._hijackedToReject||void 0!==e._toReject},this.resultIfResolved=function(){return e._hijackedToResolve||e._toResolve},this.errorIfRejected=function(){return e._hijackedToReject||e._toReject},this._thenResolver=function(i,o){var s;e._hijackedToResolve?i(e._hijackedToResolve):e._hijackedToReject?o(e._hijackedToReject):(s=e.origin,e.origin.then(function(f){e.isHijacked()||(s!==e.origin?e._thenResolver(i,o):(e._toResolve=f,i(f)))}).catch(function(f){e.isHijacked()||(s!==e.origin?e._thenResolver(i,o):(e._toReject=f,o(f)))}))},this.origin=t,this[Symbol.toStringTag]=this.origin[Symbol.toStringTag]}return n.resolve=function(t){return new n(Promise.resolve(t))},n.reject=function(t){return new n(Promise.reject(t))},n.prototype.then=function(t,e){var i=this;return new Promise(function(o,s){i._resolve=o,i._reject=s,i._thenResolver(o,s)}).then(t,e)},n.prototype.catch=function(t){var e=this;return new Promise(function(i,o){e._resolve=i,e._reject=o,e._thenResolver(i,o)}).catch(t)},n.prototype.finally=function(t){var e=this;return new Promise(function(i,o){e._resolve=i,e._reject=o,e._thenResolver(i,o)}).finally(t)},n.prototype.hijackAndResolve=function(t){this._hijackedToResolve=t,this._resolve&&this._resolve(t)},n.prototype.hijackAndReject=function(t){this._hijackedToReject=t,this._reject&&this._reject(t)},n.prototype.switchWith=function(t){this.origin=t,this._toResolve=void 0,this._toReject=void 0},n}(),YV={road:"Road",satellite:"Satellite",satellite_road_labels:"Hybrid",grayscale_dark:"Grayscale (Dark)",grayscale_light:"Grayscale (Light)",night:"Night",road_shaded_relief:"Terra",blank:"Blank",blank_accessible:"Blank (Accessible)",high_contrast_dark:"High contrast (Dark)",high_contrast_light:"High contrast (Light)"},Q_=window&&window.__assign||function(){return(Q_=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},Cz=window&&window.__awaiter||function(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})},bz=window&&window.__generator||function(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s=f&&k[f=0]?0:s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},rP=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},Ez=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},YW=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},WW=function(){function n(t,e){var i=this;this.definitions=function(){return i.initPromise||i.initStyleset()},this.indoorState=void 0,this.preservedPreindoorMapConfiguration=void 0,this._progressiveLoadingState={mapStyle:void 0,pendingVisibilityChange:void 0},this._deferLayerGroupVisibilities=function(o,s){var f,v,I,D,k=s.filter(function(X){return X in o});0!==k.length&&(f=i.map._getMap(),v=f.getZoom(),I=i.map.getStyle().style,i._progressiveLoadingState.pendingVisibilityChange&&(i.map.events.remove("load",i._progressiveLoadingState.pendingVisibilityChange),i._progressiveLoadingState.pendingVisibilityChange=null),i._progressiveLoadingState.mapStyle=I,(D=Object.entries(o).reduce(function(X,Ve){var Se=(Ve=rP(Ve,2))[0],Je=(Ve=Ve[1],k.includes(Se));return Ez(Ez([],rP(X),!1),rP(Ve.filter(function(lt){if("custom"===lt.type)return!1;if(Je)if("number"==typeof lt.maxzoom&&"number"==typeof lt.minzoom){if(v<=lt.maxzoom&&v>=lt.minzoom)return!1}else if("number"==typeof lt.minzoom){if(v>=lt.minzoom)return!1}else if("number"!=typeof lt.maxzoom||v<=lt.maxzoom)return!1;return"none"!==(null==(lt=lt.layout)?void 0:lt.visibility)})),!1)},[])).forEach(function(X){X.layout=X.layout||{},X.layout.visibility="none"}),i._progressiveLoadingState.pendingVisibilityChange=function(){i._progressiveLoadingState.pendingVisibilityChange=null;var X=i.map.getStyle().style;I===X&&(D.forEach(function(fe){fe.layout.visibility="visible",f.setLayoutProperty(fe.id,"visibility","visible")}),null!=(X=i.map.copyrightDelegate))&&X.reloadAttribution()},i.map.events.addOnce("load",i._progressiveLoadingState.pendingVisibilityChange))},this._onStyleData=function(o){i.map.events.invoke("stylechanged",{style:o.name,map:i.map,type:"stylechanged"})},this._lookUp=function(o){var s,f,v=(D=i.definitions()).errorIfRejected(),I=D.resultIfResolved();if(v||!I)return null;var D=I.configurations,k=void 0;try{for(var X=YW(D),fe=X.next();!fe.done;fe=X.next()){var Se=fe.value;if(Se.name===o.style)return Se;Se.name===I.defaultConfiguration&&(k=k||Se)}}catch(Ve){s={error:Ve}}finally{try{fe&&!fe.done&&(f=X.return)&&f.call(X)}finally{if(s)throw s.error}}return k||D[0]},this._lookUpAsync=function(o){return Cz(i,void 0,void 0,function(){var s;return bz(this,function(f){switch(f.label){case 0:return[4,this.definitions()];case 1:return[2,(s=f.sent()).configurations.find(function(v){return v.name===(o.style||s.defaultConfiguration)})||s.configurations.find(function(v){return v.name===s.defaultConfiguration})||s.configurations[0]]}})})},this.map=t,this.serviceOptions=e}return n.prototype.updateIndoorState=function(t,e){var i,o,s=this,f=this.map.styles.getMapConfiguration();f?(this.preservedPreindoorMapConfiguration=f,i=this.map.getStyle().style?"".concat(this.map.getStyle().style,"_indoor").concat("dark"===t?"_dark":"","_tileset_").concat(e):void 0,this.map.styles.setMapConfiguration("defaultIndoor_".concat(e),"microsoft-maps:default"===f?i:void 0)):(o=(null==(f=this.indoorState)?void 0:f.tilesetId)!==e,this.indoorState={tilesetId:e,theme:t},this.initStyleset(),this.definitions().then(function(v){var D=(s.map.getStyle().style||v.defaultConfiguration).replace("_indoor_dark","").replace("_indoor",""),I="".concat(D,"_indoor");(D=v.configurations.find(function(k){return k.name.startsWith(I)}))&&s.map.setStyle({style:D.name},!o)}))},n.prototype.unsetIndoorState=function(){var t=this,e=this.preservedPreindoorMapConfiguration;e?this.map.styles.setMapConfiguration(e):(this.indoorState=void 0,this.initStyleset(),this.definitions().then(function(i){var o=t.map.getStyle().style;o.includes("_indoor")&&o.split("_indoor")[0]?t.map.setStyle({style:o.split("_indoor")[0]}):t.map.setStyle({style:void 0})}))},n.prototype.initStyleset=function(){var t,e=this;return t=this.serviceOptions.mapConfiguration?"string"==typeof this.serviceOptions.mapConfiguration?(t=this.map.authentication?this.map.authentication.initialize():Promise.resolve(),new tF(t.then(function(){return e._request(e.serviceOptions.domain,"".concat("styles","/mapconfigurations/metadata/").concat(e.serviceOptions.mapConfiguration),"StyleDefinitions").then(function(i){return Q_(Q_({},i),{defaultConfiguration:i.defaultConfiguration||i.defaultStyle,configurations:i.configurations||i.styles})})}))):tF.resolve(this.serviceOptions.mapConfiguration):(t=this.map.authentication?this.map.authentication.initialize():Promise.resolve(),new tF(t.then(function(){return e._request(e.serviceOptions.staticAssetsDomain,"".concat("styling","/").concat("styles"),"StyleDefinitions",{version:e.serviceOptions.styleDefinitionsVersion,mcv:In.replace(/\./g,"")}).then(function(i){return{version:isNaN(i.version)?0:parseFloat(i.version),defaultConfiguration:i.defaultStyle,configurations:i.styles.filter(function(o){return e.indoorState?o.name.endsWith("auto"===e.indoorState.theme?"dark"===o.theme?"_indoor_dark":"_indoor":"dark"===e.indoorState.theme?"_indoor_dark":"_indoor"):!o.name.includes("indoor")}).map(function(o){return{copyright:o.copyright.join(" "),name:o.name,displayName:(s=o.name,(s=e.indoorState&&s.includes("_indoor")?s.split("_indoor")[0]:s)in YV?YV[s]:s),theme:o.theme,thumbnail:new vt({domain:e.serviceOptions.staticAssetsDomain,path:o.thumbnail,protocol:"https"}).toString(),url:new vt({domain:e.serviceOptions.staticAssetsDomain,path:"".concat("styling","/").concat("styles","/").concat(o.name),queryParams:{styleVersion:null!=i.version?i.version:e.serviceOptions.styleDefinitionsVersion,mcv:In.replace(/\./g,"")},protocol:"https"}).toString()};var s})}})}))),this.initPromise&&this.initPromise.switchWith(t),this.initPromise=t,this.initPromise.then(function(i){return e.map._invokeEvent("mapconfigurationchanged",i)}),this.initPromise},n.prototype.getStyle=function(t){if(!(t=this._lookUp(t)))throw Error("Style definition is not available.");if(t.url)return t.url;if(t.style)return t.style;throw Error("Style definition neither contains URL nor style object.")},n.prototype.deriveNewStyleAndLayerGroups=function(t,e){for(var i,o,s=this.map.getStyle(),f=this.map.getTraffic(),v={},I=0;I<e.layers.length;I++){var D=e.layers[I],k=KW.getLayerGroup(D);k?(v[k]||(v[k]=[]),v[k].push(D),s.showBuildingModels||"fill-extrusion"!==D.type?"fill-extrusion"===D.type&&(D.layout=null!=(i=D.layout)?i:{},D.layout.visibility="visible"):(D.layout=null!=(i=D.layout)?i:{},D.layout.visibility="none"),"none"!==f.flow&&k&&k==="traffic_".concat(f.flow)&&"line"==D.type&&(D.layout=null!=(o=D.layout)?o:{},D.layout.visibility="visible"),"labels"!==k&&"labels_places"!==k&&"labels_indoor"!==k||"symbol"!==D.type||(s.showLabels&&"none"!==(null==(o=D.layout)?void 0:o.visibility)?(D.layout=null!=(k=D.layout)?k:{},D.layout.visibility="visible"):(D.layout=null!=(k=D.layout)?k:{},D.layout.visibility="none"))):v[D.id]=[D]}return[e,v]},n.prototype.injectUserLayersIntoStyle=function(t,e,i){return t?this.map.layers._getUserLayers().reduce(function(o,s){var f,v,I,D;return s.layer instanceof MC||(f=(null==(v=null==(v=i?.[s.before])?void 0:v[0])?void 0:v.id)||s.before,v=t.layers.find(function(k){return k.id===s.layer.getId()}),-1<(I=e.layers.findIndex(function(k){return k.id===s.layer.getId()}))&&e.layers.splice(I,1),v&&(I=new Set(Array.from(s.layer._getSourceIds()).map(function(k){var X;return!o.sources[k]&&(X=t.sources[k])?{source:X,id:k}:void 0}).filter(function(k){return void 0!==k})),-1<(D=f?o.layers.findIndex(function(k){return k.id===f}):-1)?o.layers.splice(D,0,v):o.layers.push(v),I.forEach(function(fe){var X=fe.source;o.sources[fe=fe.id]=X}))),o},Q_({},e)):e},n.prototype.setStyle=function(t,e){var i=this,o=(void 0===e&&(e=!0),this._lookUp(t));if(!o)throw Error("Style definition ".concat(t.style," is not available."));if(!o.url&&!o.style)throw Error("Style definition neither contains URL nor style object.");var s=function(){return i._onStyleData(o)},f=function(){i.map.events.remove("styledata",s),i.map.events.addOnce("styledata",s)},v=t&&t.customStyleTransform?function(I,D){return I=t.customStyleTransform(I,D),f(),I}:function(fe,k){var Se=Q_(Q_({},k),{layers:Ez([],rP(k.layers),!1),sources:Q_({},k.sources)}),X=(Se=((X=t.progressiveLoading&&!i.map._isLoaded())&&Array.isArray(k?.layers)&&((Se=Q_({},k)).layers=Se.layers.map(function(Ve){var Je=Q_({},Ve);return Ve.layout&&(Je.layout=Q_({},Ve.layout)),Je})),k=rP(i.deriveNewStyleAndLayerGroups(fe,Se),2))[0],k=k[1],X&&(X=t.progressiveLoadingInitialLayerGroups,Array.isArray(X))&&0<X.length&&i._deferLayerGroupVisibilities(k,X),i.injectUserLayersIntoStyle(fe,Se,k));return fe=Object.entries(k).map(function(lt){var Je=(lt=rP(lt,2))[0];return i._buildFundamentalLayerFrom(lt=lt[1],Je)}),Se=i.map.layers._getUserLayers().reduce(function(Ve,Je){var lt=Je.before?Ve.findIndex(function(mt){return mt.getId()===Je.before}):-1;return-1<lt?Ve.splice(lt,0,Je.layer):Ve.push(Je.layer),Ve},fe),i.map.layers.layerIndex=Se,i.map.sources._syncSources(X.sources),f(),X};this.map._getMap().setStyle(o.url||o.style,{diff:e,validate:this.serviceOptions.validateStyle,transformStyle:v})},n.prototype.getTheme=function(t){if(t=this._lookUp(t))return t.theme.toLowerCase()},n.prototype.getThemeAsync=function(t){return Cz(this,void 0,void 0,function(){return bz(this,function(e){switch(e.label){case 0:return[4,this._lookUpAsync(t)];case 1:return[2,e.sent().theme]}})})},n.prototype.setMapConfiguration=function(t,e){var i=this;"string"==typeof(this.serviceOptions.mapConfiguration=t)?this.initStyleset():this.initPromise?this.initPromise.hijackAndResolve(t):this.initPromise=tF.resolve(t),this.definitions().then(function(o){var s=o.defaultConfiguration;o.configurations.find(function(f){return f.name===e})&&(s=e),i.map.setStyle({style:s})})},n.prototype.getMapConfiguration=function(){return this.serviceOptions.mapConfiguration},n.prototype.setStyleSet=function(t){this.updateIndoorState("indoor_dark"===t?"dark":"light",null)},n.prototype.getStyleSet=function(){return void 0!==this.indoorState?"dark"===this.indoorState.theme?"indoor_dark":"indoor":"base"},n.prototype.clearStyleSet=function(){this.unsetIndoorState()},n.prototype._buildFundamentalLayerFrom=function(t,e){if(t&&0<t.length)return(t=new zb(t,e)).onAdd(this.map),t;throw new Error("Unable to construct fundamental map layer for ID: ".concat(e,"."))},n.prototype._transformStyleRequest=function(t,e){t.includes("{{azMapsDomain}}")&&(e.url=e.url.replace("{{azMapsDomain}}",this.serviceOptions.domain)),t.includes("{{azMapsStylingPath}}")&&(e.url=e.url.replace("{{azMapsStylingPath}}","styling")),t.includes("{{azMapsStylePath}}")&&(e.url=e.url.replace("{{azMapsStylePath}}","styles")),(e.url.toLocaleLowerCase().includes(this.serviceOptions.domain.toLocaleLowerCase())||e.url.toLocaleLowerCase().includes(this.serviceOptions.staticAssetsDomain.toLocaleLowerCase()))&&((t=new URL(e.url)).searchParams.get("api-version")||(t.searchParams.set("api-version",this.serviceOptions.styleAPIVersion),e.url=t.href),null!=(t=this.map.authentication)&&t.signRequest(e),this._deleteAuthTokenForStaticAssets(e))},n.prototype._request=function(t,e,i,o){var s;return void 0===o&&(o={}),Cz(this,void 0,void 0,function(){var f,v;return bz(this,function(I){switch(I.label){case 0:return v={url:new vt({protocol:"https",domain:t,path:e,queryParams:Q_(((v={})["api-version"]=this.serviceOptions.styleAPIVersion,v),o)}).toString()},"function"==typeof this.serviceOptions.transformRequest&&i&&(v=this.serviceOptions.transformRequest(v.url,i)),null!=(s=this.map.authentication)&&s.signRequest(v),this._deleteAuthTokenForStaticAssets(v),f={method:"GET",mode:"cors"},v.credentials&&(f.credentials=v.credentials),v.headers&&(f.headers=v.headers),[4,fetch(v.url,f).then(function(D){if(D.ok)return D.json();throw new Error("HTTP ".concat(D.status,": ").concat(D.statusText," "))})];case 1:return[2,I.sent()]}})})},n.prototype._deleteAuthTokenForStaticAssets=function(t){t.url.startsWith("https://".concat(this.serviceOptions.staticAssetsDomain,"/").concat("styling"))&&(delete t.headers["x-ms-client-id"],delete t.headers.Authorization)},n}(),WV=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},XW=function(){function n(t){this.map=t,this.indicators=new Set}return n.prototype.add=function(t){var e,i;t=Array.isArray(t)?t:[t];try{for(var o=WV(t),s=o.next();!s.done;s=o.next()){var f=s.value;this.indicators.has(f)||(this.indicators.add(f),f.attach(this.map))}}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},n.prototype.clear=function(){var t=this;this.indicators.forEach(function(e){t.indicators.delete(e),e.remove()})},n.prototype.remove=function(t){var e,i;t=Array.isArray(t)?t:[t];try{for(var o=WV(t),s=o.next();!s.done;s=o.next()){var f=s.value;this.indicators.has(f)&&(this.indicators.delete(f),f.remove())}}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},n.prototype.getIndicators=function(){return Array.from(this.indicators)},n.prototype._getCollectionDiv=function(){var t=this.map.getMapContainer().querySelector(".".concat(n.Css.collection));return t||((t=document.createElement("div")).setAttribute("aria-label","map data"),t.setAttribute("role","listbox"),t.classList.add(n.Css.collection),this.map.getMapContainer().appendChild(t)),t},n.Css={collection:"accessible-indicator-collection-container"},n}(),ZW=window&&window.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),w1=window&&window.__assign||function(){return(w1=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},JW=window&&window.__awaiter||function(n,t,e,i){return new(e=e||Promise)(function(o,s){function f(D){try{I(i.next(D))}catch(k){s(k)}}function v(D){try{I(i.throw(D))}catch(k){s(k)}}function I(D){var k;D.done?o(D.value):((k=D.value)instanceof e?k:new e(function(X){X(k)})).then(f,v)}I((i=i.apply(n,t||[])).next())})},eQ=window&&window.__generator||function(n,t){var e,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function v(I){return function(D){var k=[I,D];if(e)throw new TypeError("Generator is already executing.");for(;s=f&&k[f=0]?0:s;)try{if(e=1,i&&(o=2&k[0]?i.return:k[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,k[1])).done)return o;switch(i=0,(k=o?[2&k[0],o.value]:k)[0]){case 0:case 1:o=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,i=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!o||k[1]>o[0]&&k[1]<o[3]))s.label=k[1];else if(6===k[0]&&s.label<o[1])s.label=o[1],o=k;else{if(!(o&&s.label<o[2])){o[2]&&s.ops.pop(),s.trys.pop();continue}s.label=o[2],s.ops.push(k)}}k=t.call(n,s)}catch(X){k=[6,X],i=0}finally{e=o=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},tQ=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},nQ=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},nF=window&&window.__values||function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return{value:(n=n&&i>=n.length?void 0:n)&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sz=function(n){function t(e,i){var o,s,f=n.call(this)||this,v=(f.removed=!1,f.loaded=!1,f.ready=!1,f._windowResizeCallback=function(){return f.resize()},!0);f._updateGlobalDefaults(i),f.serviceOptions=(new vz).merge(i),f.styleOptions=(new KV).merge(i),f.trafficOptions=new WE,f.styles=new WW(f,f.serviceOptions),f.insights=new yK(f.serviceOptions),f.serviceOptions.authOptions.subscriptionKey&&(f.serviceOptions.authOptions.subscriptionKey=encodeURIComponent(f.serviceOptions.authOptions.subscriptionKey)),o=f.serviceOptions.authOptions.clientId||(f.serviceOptions.authOptions.subscriptionKey?f.serviceOptions.authOptions.subscriptionKey.replace(/.(?=.{3,}$)/g,"*"):"invalid-setting"),f.insights&&f.insights.setAuthenticatedUserContext(f.serviceOptions.sessionId,o),arguments[2]&&"ENVIRONMENT"in window&&window.ENVIRONMENT.hmr?(s=arguments[2],f.ready=!0,f.loaded=!0):s=new M.Map(o={antialias:f.styleOptions.antialias,attributionControl:!1,container:e,fadeDuration:f.serviceOptions.fadeDuration,localIdeographFontFamily:f.serviceOptions.localIdeographFontFamily,preserveDrawingBuffer:f.styleOptions.preserveDrawingBuffer,refreshExpiredTiles:f.serviceOptions.refreshExpiredTiles,renderWorldCopies:f.styleOptions.renderWorldCopies,trackResize:!1,transformRequest:function(X,fe){var Se={url:X};return"Tile"===fe||"Source"===fe?(X.includes("{azMapsDomain}")&&f.insights&&f.insights.trackEvent({name:"TileLoad"}),f._substituteDomainLanguageViewAndSignInRequest(X,Se)):"Style"!==fe&&"SpriteJSON"!==fe&&"SpriteImage"!==fe&&"Glyphs"!==fe||f.styles._transformStyleRequest(X,Se),f.serviceOptions.transformRequest&&K2(Se,f.serviceOptions.transformRequest(Se.url,fe)),Se}});try{f.map=s,f.authentication=new iW(f),f.controls=new oW(f),f.events=new sW(f),f.imageSprite=new lW(f),f.layers=new fW(f),f.markers=new cW(f),f.sources=new mW(f),f.popups=new gW(f),f.indicators=new XW(f),f.map.getContainer().classList.add(t.Css.container),f.map.getCanvasContainer().classList.add(t.Css.canvasContainer),f.map.getCanvas().classList.add(t.Css.canvas),f._detectHighContrast(),f.copyrightControl=new bK({showFeedbackLink:f.styleOptions.showFeedbackLink,showLogo:f.styleOptions.showLogo,customAttribution:f.styleOptions.customAttribution}),f.controls.add(f.copyrightControl,{position:Zo.NonFixed}),f.logoControl=new wK({showLogo:f.styleOptions.showLogo}),f.controls.add(f.logoControl,{position:Zo.BottomLeft});var I=f.authentication?f.authentication.initialize():Promise.resolve();if(f.removed)return f;var D=function(){f.loaded=!0,f.map.off("load",D)},k=(f.map.on("load",D),function(){f.ready=!0,f.map.off("styledata",k),f.events.invoke("ready",{map:f,type:"ready"})});f.map.on("styledata",k),f._setAutoResize(f.styleOptions.autoResize),f.map.showTileBoundaries=f.styleOptions.showTileBoundaries,f.localizedStringsPromise=Yt.getStrings(f.styleOptions.language),I.then(function(){return f.styles.definitions()}).then(function(X){if(!f.removed){if(f.authentication&&!f.authentication.getToken())throw new Error("AuthenticationManager finished initializing, but no token is available");f.serviceOptions["enable-accessibility"]&&f.accessibleMapDelegate.addToMap(),f._setStyleComponents(f.styleOptions),f.copyrightDelegate&&f.copyrightDelegate.addToMap()}}).catch(function(X){X=X instanceof Error?X:new Error(X),f.insights.trackException({error:X}),f.events.invoke("error",X={map:f,type:"error",error:X})}),f.setCamera(w1(w1({minZoom:1},i),{type:"jump",duration:0})),f.incidentDelegate=new kK(f),f.flowDelegate=new RK(f),f.accessibleMapDelegate=new PK(f),f.userInteractionDelegate=new UK(f,i),f.userInteractionDelegate.addToMap(),f.copyrightDelegate=new QK(f,f.copyrightControl,f.styleOptions)}catch(X){throw v=!1,f.insights.trackException({error:X instanceof Error?X:new Error(X)}),X}finally{f.insights.trackEvent({name:"MapLoad"},{success:v,supported:Nn(),supportedWithPerformance:Nn({failIfMajorPerformanceCaveat:!0})}),f.insights.flush()}return f}return ZW(t,n),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.removed},enumerable:!1,configurable:!0}),t.prototype.getCanvas=function(){return this.map.getCanvas()},t.prototype.getCanvasContainer=function(){return this.map.getCanvasContainer()},t.prototype.getMapContainer=function(){return this.map.getContainer()},t.prototype.getServiceOptions=function(){return uc(this.serviceOptions,vz._cloneCustomizer)},t.prototype.setServiceOptions=function(e){this.serviceOptions=(new vz).merge(this.serviceOptions,e),this.serviceOptions["enable-accessibility"]?this.accessibleMapDelegate.addToMap():this.accessibleMapDelegate.removeFromMap(),e=this.styles.serviceOptions.mapConfiguration!==this.serviceOptions.mapConfiguration||this.styles.serviceOptions.staticAssetsDomain!==this.serviceOptions.staticAssetsDomain||this.styles.serviceOptions.styleDefinitionsVersion!==this.serviceOptions.styleDefinitionsVersion||this.styles.serviceOptions.domain!==this.serviceOptions.domain||this.styles.serviceOptions.styleAPIVersion!==this.serviceOptions.styleAPIVersion,this.styles.serviceOptions=this.serviceOptions,e&&(this.styles.initPromise=null,this.setStyle({}))},t.prototype.addRequestTransformer=function(e){this.serviceOptions.addTransformer(e)},t.prototype.removeRequestTransformer=function(e){this.serviceOptions.removeTransformer(e)},t.prototype.setCamera=function(e,i){if(void 0===i&&(i=!1),"padding"in e||"offset"in e||"bounds"in e){var o,v=(new TW).merge({maxZoom:this.getCamera().maxZoom},e),s=this._generateSafeBounds(v.bounds);if(!(o=this.map.cameraForBounds(s,I={padding:v.padding,offset:v.offset,maxZoom:v.maxZoom})))throw f={message:"The map cannot be fit to the current canvas with the given CameraBoundsOptions.",containerWidth:null==(f=null==(f=this.map)?void 0:f.getContainer())?void 0:f.clientWidth,containerHeight:f?.clientHeight,safeBounds:s,cameraForBoundsOptions:I},new Error(JSON.stringify(f));"pitch"in e&&(o.pitch=e.pitch),"bearing"in e&&(o.bearing=e.bearing),"minPitch"in e&&this.map.setMinPitch(e.minPitch),"maxPitch"in e&&this.map.setMaxPitch(e.maxPitch),this.map.setMaxZoom(v.maxZoom),this._invokeEvent("maxzoomchanged",this.map.getMaxZoom()),s=this._generateSafeBounds(v.maxBounds)}else(I=(new IW).merge(this.getCamera(),e)).centerOffset&&2<=I.centerOffset.length&&(f=I.centerOffset,(v=t0([I.center],I.zoom))[0][0]+=f[0],v[0][1]+=f[1],I.center=CC(v,I.zoom)[0]),o={center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,around:void 0},I.minZoom<1&&console.warn("Setting minZoom below 1 may result in an empty map when the zoom level is less than 1."),this.map.setMinZoom(I.minZoom),this.map.setMaxZoom(I.maxZoom),I.minPitch&&this.map.setMinPitch(I.minPitch),I.maxPitch&&this.map.setMaxPitch(I.maxPitch),this._invokeEvent("minzoomchanged",this.map.getMinZoom()),this._invokeEvent("maxzoomchanged",this.map.getMaxZoom()),s=this._generateSafeBounds(I.maxBounds);this.map.setMaxBounds(s||null);var f=(new yW).merge(e),I=(v={duration:f.duration,easing:function(D){return D},offset:[0,0],animate:!0},{fromControl:i});"jump"===f.type?this.map.jumpTo(o,I):"ease"===f.type?this.map.easeTo(w1(w1({},o),v),I):"fly"===f.type&&this.map.flyTo(w1(w1({},o),v),I)},t.prototype.setCameraBounds=function(e){this.setCamera(e)},t.prototype.getCamera=function(){var e=this.map.getBounds().getSouthWest().toArray(),i=this.map.getBounds().getNorthEast().toArray();return{zoom:this.map.getZoom(),center:this.map.getCenter().toArray(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),bounds:new es(e,i),minZoom:this.map.getMinZoom(),maxZoom:this.map.getMaxZoom()}},t.prototype.setStyle=function(e,i){void 0===i&&(i=!0),delete e.preserveDrawingBuffer,(e=(new KV).merge(this.styleOptions,e)).autoResize!==this.styleOptions.autoResize&&this._setAutoResize(e.autoResize),e.language!==this.styleOptions.language&&(this.localizedStringsPromise=Yt.getStrings(e.language)),e.renderWorldCopies!==this.styleOptions.renderWorldCopies&&this.map.setRenderWorldCopies(e.renderWorldCopies),e.showFeedbackLink!==this.styleOptions.showFeedbackLink&&this.copyrightControl.setOptions({showFeedbackLink:e.showFeedbackLink}),e.customAttribution!==this.styleOptions.customAttribution&&this.copyrightControl.setOptions({customAttribution:e.customAttribution}),e.showLogo!==this.styleOptions.showLogo&&(this.copyrightControl.setOptions({showLogo:e.showLogo}),this.logoControl.setOptions({showLogo:e.showLogo})),e.showTileBoundaries!==this.styleOptions.showTileBoundaries&&(this.map.showTileBoundaries=e.showTileBoundaries),e.showBuildingModels&&console.warn("showBuildingModels is deprecated."),i=i&&this.styleOptions.language===e.language&&this.styleOptions.view===e.view,this.styleOptions=e,this._setStyleComponents(e,i)},t.prototype.getStyle=function(){return Yl(this.styleOptions)},t.prototype.addIcon=function(e,i){this.imageSprite.add(e,i)},t.prototype.addPins=function(e,o){o=(new DW).merge(o);var s=this.layers.getLayerById(o.name),f=!1;if(s||(f=!0,s=new aI("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,iconOptions:{anchor:"center",size:o.iconSize,image:["case",["has","icon"],["get","icon"],o.icon],ignorePlacement:!o.cluster,opacity:o.opacity},textOptions:{anchor:"center",textField:["case",["has","point_count"],["to-string",["get","point_count"]],["has","title"],["to-string",["get","title"]],o.title],font:["case",["has","point_count"],["literal",["StandardFontCondensed-Bold"]],["literal",[o.textFont]]],size:["case",["has","point_count"],20,o.fontSize],ignorePlacement:!o.cluster,opacity:o.opacity,offset:["case",["has","point_count"],["literal",[.5,-.45]],["literal",[o.textOffset[0]/16,o.textOffset[1]/16]]],color:o.fontColor}})),!(s instanceof aI))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a SymbolLayer.")+"A SymbolLayer should be used for rendering pins.");var v=s.getSource(),I=("string"==typeof v?v=this.sources.getById(D=v):D=v.getId(),!1);if(v||(I=!0,v=new lf(D,{cluster:o.cluster})),!(v instanceof lf))throw new Error("The source with name '".concat(D,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");I&&this.sources.add(v),f&&this.layers.add(s,o.before);var D=new Qo(e);o.overwrite?v.setShapes(D):v.add(D)},t.prototype.addCircles=function(e,o){o=(new PW).merge(o);var s=this.layers.getLayerById(o.name),f=!1;if(s||(f=!0,s=new o0("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,opacity:o.opacity,radius:["case",["has","radius"],["get","radius"],o.radius],color:["case",["has","color"],["get","color"],o.color],strokeColor:["case",["has","outlineColor"],["get","outlineColor"],o.outlineColor],strokeWidth:["case",["has","outlineWidth"],["get","outlineWidth"],o.outlineWidth]})),!(s instanceof o0))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a BubbleLayer.")+"A BubbleLayer should be used for rendering circles.");var v=s.getSource(),I=("string"==typeof v?v=this.sources.getById(D=v):D=v.getId(),!1);if(v||(I=!0,v=new lf(D)),!(v instanceof lf))throw new Error("The source with name '".concat(D,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");I&&this.sources.add(v),f&&this.layers.add(s,o.before);var D=new Qo(e);o.overwrite?v.setShapes(D):v.add(D)},t.prototype.addLinestrings=function(e,o){o=(new xW).merge(o);var s=this.layers.getLayerById(o.name),f=!1;if(s||(f=!0,s=new OR("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,lineCap:o.cap,lineJoin:o.join,strokeOpacity:o.opacity,strokeColor:["case",["has","color"],["get","color"],o.color],strokeWidth:["case",["has","width"],["get","width"],o.width]})),!(s instanceof OR))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a LineLayer.")+"A LineLayer should be used for rendering linestrings.");var v=s.getSource(),I=("string"==typeof v?v=this.sources.getById(D=v):D=v.getId(),!1);if(v||(I=!0,v=new lf(D)),!(v instanceof lf))throw new Error("The source with name '".concat(D,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");I&&this.sources.add(v),f&&this.layers.add(s,o.before);var D=new Qo(e);o.overwrite?v.setShapes(D):v.add(D)},t.prototype.addPolygons=function(e,o){o=(new LW).merge(o);var s=this.layers.getLayerById(o.name),f=!1;if(s||(f=!0,s=new PR("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,fillOpacity:o.opacity,fillColor:["case",["has","color"],["get","color"],o.color]})),!(s instanceof PR))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a PolygonLayer.")+"A PolygonLayer should be used for rendering linestrings.");var v=s.getSource(),I=("string"==typeof v?v=this.sources.getById(D=v):D=v.getId(),!1);if(v||(I=!0,v=new lf(D)),!(v instanceof lf))throw new Error("The source with name '".concat(D,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");I&&this.sources.add(v),f&&this.layers.add(s,o.before);var D=new Qo(e);o.overwrite?v.setShapes(D):v.add(D)},t.prototype.addRaster=function(e,s){s=(new HW).merge(s);var o,f=this.layers.getLayerById(s.name);if(!((f=f||new SS({maxZoom:s.maxZoom,minZoom:s.minZoom,opacity:s.opacity,tileSize:256,tileUrl:"{subdomain}"},s.name))instanceof SS))throw new Error("A layer with name '".concat(s.name,"' already exists but it is not a TileLayer.")+"A TileLayer should be used for rendering raster images.");if("{subdomain}"!==f.getOptions().tileUrl)throw new Error("A TileLayer with name '".concat(s.name,"' already exists but was configured ")+"for a single tile url [default for new TileLayer(...)].");(o=!s.overwrite&&f.getOptions().subdomains||[]).push.apply(o,nQ([],tQ(e),!1)),f._setOptionsNoUpdate({subdomains:o}),this.layers.add(f,s.before)},t.prototype.getLayers=function(){return this.layers.getLayers().map(function(e){return e.getId()})},t.prototype.removeLayers=function(e){var i,o;try{for(var s=nF(e),f=s.next();!f.done;f=s.next()){var v,I=f.value;this.layers.getLayerById(I)&&(this.layers.remove(I),v="".concat(I,"-source"),this.sources.getById(v))&&this.sources.remove(v)}}catch(D){i={error:D}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.addHtml=function(e,i){e.id||(e.id="marker_".concat(Ae()));var o=new IS({htmlContent:e});return this.markers.add(o,i),e.id},t.prototype.removeHtml=function(e){this.markers.remove(e)},t.prototype.addEventListener=function(e,i,o){this.events._addLegacy(e,i,o)},t.prototype.removeEventListener=function(e,i,o){this.events._removeLegacy(e,i,o)},t.prototype.setUserInteraction=function(e){this.userInteractionDelegate.setOptions(e)},t.prototype.getUserInteraction=function(){return this.userInteractionDelegate.getOptions()},t.prototype.addControl=function(e,i){this.controls.add(e,i)},t.prototype.removeControl=function(e){this.controls.remove(e)},t.prototype.setTraffic=function(e){var i=this.trafficOptions.incidents,o=this.trafficOptions.flow;if(this.trafficOptions=(new WE).merge(this.trafficOptions,e),this.controls.getControls().filter(function(s){return s instanceof W2}).forEach(function(s){return s.updateButtonState()}),this.incidentDelegate&&(this.trafficOptions.incidents?i||this.incidentDelegate.addToMap():this.incidentDelegate.removeFromMap()),this.trafficOptions.flow&&"none"!==this.trafficOptions.flow){["absolute","relative-delay"].includes(this.trafficOptions.flow)&&console.warn("The 'absolute' and 'relative-delay' flow options are deprecated. Please use 'relative' instead.");try{this.trafficOptions.flow!==o&&this.flowDelegate.addToMap()}catch(s){throw this.trafficOptions.flow=o,s}}else this.flowDelegate.removeFromMap()},t.prototype.getTraffic=function(){return Yl(this.trafficOptions)},t.prototype.remove=function(){this.dispose()},t.prototype.clear=function(){this.popups.clear(),this.layers.clear(),this.sources.clear(),this.markers.clear(),this.indicators.clear()},t.prototype.dispose=function(){var e;for(this.clear(),this.map.remove(),null!=(e=this.authentication)&&e.dispose(),this.removed=!0,window.removeEventListener("resize",this._windowResizeCallback);this.getMapContainer().firstChild;){var i=this.getMapContainer().firstChild;this.getMapContainer().removeChild(i)}},t.prototype.resize=function(e,i,o){"number"!=typeof e&&"string"!=typeof e||"number"!=typeof i&&"string"!=typeof i?o=e:(this.getMapContainer().style.height="number"==typeof e?"".concat(e,"px"):e,this.getMapContainer().style.width="number"==typeof i?"".concat(i,"px"):i),e=this.getMapContainer().style.overflow,this.getMapContainer().style.overflow="hidden",this.map.resize(o),this.getMapContainer().style.overflow=e},t.prototype.pixelsToPositions=function(e){var i,o,s=[];try{for(var f=nF(e),v=f.next();!v.done;v=f.next()){var D=this.map.unproject(v.value);s.push(new ad(D.lng,D.lat))}}catch(k){i={error:k}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return s},t.prototype.positionsToPixels=function(e){var i,o,s=[];try{for(var f=nF(e),v=f.next();!v.done;v=f.next()){var D=this.map.project(v.value);s.push(new id(D.x,D.y))}}catch(k){i={error:k}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return s},t.prototype.areTilesLoaded=function(){return this.map.areTilesLoaded()},t.prototype.stop=function(){this.map.stop()},t.prototype.triggerRepaint=function(){this.map.triggerRepaint()},t.prototype.enableElevation=function(e,i){this.map.setTerrain("string"==typeof e?{source:e,exaggeration:i}:{source:e.getId(),exaggeration:i})},t.prototype.disableElevation=function(){this.map.setTerrain(null)},t.prototype._getMap=function(){return this.map},t.prototype._rebuildStyle=function(e){return void 0===e&&(e=!0),JW(this,void 0,void 0,function(){return eQ(this,function(i){return this.styles.setStyle(this.styleOptions,e),this.imageSprite._restoreImages(),[2]})})},t.prototype._isLoaded=function(){return this.loaded},t.prototype._isReady=function(){return this.ready},t.prototype._getLocalizedStrings=function(){return this.localizedStringsPromise},t.prototype._sendRequest=function(e,i,o){var s;return(s="function"==typeof this.serviceOptions.transformRequest?this.serviceOptions.transformRequest(e,i):s)?fetch(s.url||e,{credentials:s.credentials,headers:w1(w1({},o),s.headers),method:"GET",mode:"cors"}):fetch(e,{headers:o,method:"GET",mode:"cors"})},t.prototype._substituteDomainLanguageViewAndSignInRequest=function(e,i){var o;(e.includes("{azMapsDomain}")||e.includes("{{azMapsDomain}}"))&&(o=new RegExp("[^{]".concat("{azMapsDomain}","[^}]")),e.match(o)&&(i.url=i.url.replace("{azMapsDomain}","{{azMapsDomain}}")),vt.protoRegEx.test(this.serviceOptions.domain)?(o=i.url.indexOf("{{azMapsDomain}}"),i.url=this.serviceOptions.domain+i.url.substring(o+16)):i.url=i.url.replace("{{azMapsDomain}}",this.serviceOptions.domain)),(i.url.toLocaleLowerCase().includes(this.serviceOptions.domain.toLocaleLowerCase())||i.url.toLocaleLowerCase().includes(this.serviceOptions.staticAssetsDomain.toLocaleLowerCase()))&&null!=(o=this.authentication)&&o.signRequest(i),e.includes("{{azMapsLanguage}}")&&(i.url=i.url.replace("{{azMapsLanguage}}",this.styleOptions.language)),e.includes("{{azMapsView}}")&&(i.url=this.styleOptions.view?i.url.replace("{{azMapsView}}",this.styleOptions.view):i.url.replace("{{azMapsView}}","").replace("&".concat("view","="),""))},t.prototype._setAutoResize=function(e){e?window.addEventListener("resize",this._windowResizeCallback):window.removeEventListener("resize",this._windowResizeCallback)},t.prototype._setStyleComponents=function(e,i){var o=this;void 0===i&&(i=!0),this.removed||this.styles.definitions().then(function(s){var f,v,I=!0;if(o.styleOptions.style)try{for(var D=nF(s.configurations),k=D.next();!k.done;k=D.next())if(o.styleOptions.style===k.value.name){I=!1;break}}catch(fe){f={error:fe}}finally{try{k&&!k.done&&(v=D.return)&&v.call(D)}finally{if(f)throw f.error}}I&&(o.styleOptions.style=s.defaultConfiguration),o.styleOptions=e,o._rebuildStyle(i)})},t.prototype._updateGlobalDefaults=function(e){e&&(e.authOptions&&!rs()&&Et(e.authOptions),e.domain&&!ks()&&wn(e.domain),e.styleDefinitionsPath&&!Ia()&&$n(e.styleDefinitionsPath),e.workerCount&&!cl()&&xn(e.workerCount),e.maxParallelImageRequests&&!ll()&&ia(e.maxParallelImageRequests),!e.subscriptionKey&&!e["subscription-key"]||rs()||jc(e.subscriptionKey||e["subscription-key"]),!e.sessionId&&!e["session-id"]||Cs()||ys(e.sessionId||e["session-id"]),e.language&&!ul()&&oa(e.language),!e.userRegion&&!e.view||Il()||Tl(e.userRegion||e.view))},t.prototype._generateSafeBounds=function(e){if(e){var i=es.getSouth(e),o=es.getWest(e),s=es.getNorth(e),f=es.getEast(e);if(!(isFinite(i)&&isFinite(o)&&isFinite(s)&&isFinite(f)))throw new Error("The bounds specified are invalid: [".concat(e,"]"));for(;f<o;)f+=360;return new es([o,i,f,s])}return e},t.prototype._detectHighContrast=function(){var e,i;switch(DR.getHighContrastMode()){case"invert":case"light":e=t.Css.hcLight,i="high_contrast_light";break;case"dark":e=t.Css.hcDark,i="high_contrast_dark"}e&&this.map.getContainer().classList.add(e),i&&"road"===this.styleOptions.style&&(this.styleOptions.style=i)},t.Css={canvasContainer:"atlas-map-canvas-container",canvas:"atlas-map-canvas",container:"atlas-map",hcDark:"high-contrast-dark",hcLight:"high-contrast-light"},t}(Ai),rQ=window&&window.__read||function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,o,s=e.call(n),f=[];try{for(;(void 0===t||0<t--)&&!(i=s.next()).done;)f.push(i.value)}catch(v){o={error:v}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return f},iQ=window&&window.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var i,o=0,s=t.length;o<s;o++)!i&&o in t||((i=i||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))},QV=function(){function n(){this.detectHyperlinks=!0,this.parsePropertyPaths=!0}return n.applyTemplate=function(t,e){var i,o,s,f=this,v=document.createElement("div");return v.classList.add(n.Css.template),t&&("boolean"!=typeof(e=e||{}).singleDescription&&(e.singleDescription=!0),e.sandboxContent="boolean"!=typeof e.sandboxContent||e.sandboxContent,e.title&&"string"==typeof e.content&&(e.content.includes("{title}")||e.content.includes("{name}"))||(t.title?e.title="{title}":t.name&&(e.title="{name}")),"boolean"!=typeof e.detectHyperlinks&&(e.detectHyperlinks=!0),"boolean"!=typeof e.parsePropertyPaths&&(e.parsePropertyPaths=!0),e.textColor&&(v.style.color=e.textColor),e.fillColor&&(v.style.backgroundColor=e.fillColor),e.title&&((s=this._applyStringTemplate(t,e.title,e)).innerText=s.textContent||s.innerText||"",this._appendChild(v,s,n.Css.title)),(i=document.createElement("div")).classList.add(n.Css.content),Array.isArray(e.content)?0<e.content.length&&e.content[0].propertyPath?this._appendChild(i,this._generateContent(t,e.content,e),n.Css.item):e.content.forEach(function(I){f._appendChild(i,f._generateContent(t,I,e),n.Css.item)}):(o=0,s=void(t.description&&Object.keys(t).forEach(function(I){f._ignoreProperty(I,t[I])||o++})),1===o||e.singleDescription&&t.description||2===o&&t.Snippet?(s=document.createElement("div")).innerHTML=t.description:s=this._generateContent(t,e.content,e),this._appendChild(i,s,n.Css.item)),""!==i.innerHTML)&&v.appendChild(e.sandboxContent?n._createSandboxedIframe(i,e):i),v},n._createSandboxedIframe=function(o,e){var i=document.createElement("iframe"),s=(i.sandbox.add("allow-popups"),o=o.innerHTML,!1),X=100,f=550,v=10,k=(document.body.scrollWidth<=340&&(f=300,X=50),o.split(/<(tr|div|br|li|h[0-9]|p>)/)),D=Math.max.apply(Math,iQ([],rQ(k.map(function(fe){return fe.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length})),!1))-1,I=Math.ceil(3.5*D);return I<f&&(f=I,X=D),o.includes("<img")||o.includes("<video")?(s=!0,i.width="550px"):(I=-1<o.indexOf(n.Css.table)?25:20,v+=Math.max(.5*k.length*I,Math.ceil(o.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length/X)*I)),i.width=f+"px",i.height=s||280<v?"280px":v+"px",D=e.textColor?"color:".concat(e.textColor,";"):"",k=e.fillColor?"background-color:".concat(e.fillColor,";"):"",X='<html><head><title></title><meta charset="utf-8" /><meta http-equiv="x-ua-compatible" content="IE=Edge" />'+'<link rel="stylesheet" href="'.concat(n._cssUrl,'" type="text/css"/>')+"<style>html, body{margin:0;padding:0;".concat(D).concat(k,"}</style></head>")+'<body><div class="'.concat(n.Css.template,'" style="padding:0;width:').concat(f-20,'px">').concat(o,"</div></body></html>"),void 0===i.srcdoc?i.src="data:text/html;charset=utf-8,"+encodeURI(X):i.srcdoc=X,i},n._appendChild=function(t,e,i){e&&(i&&(e.className=(e.className?e.className+" ":"")+i),t.appendChild(e))},n._generateContent=function(t,e,i){return e?Array.isArray(e)?this._generatePropertyInfoTable(t,e,i):this._applyStringTemplate(t,e,i):(e=this._generateDynamicTableHtml(t,null,i))?((t=document.createElement("div")).innerHTML=e,t):null},n._applyStringTemplate=function(t,e,i){if(e){for(var o,s,f=e,v=this._placeholderRx.exec(e);v;)2<=v.length&&(o=this._getPropertyValue(t,v[1],i),f=f.replace(v[0],o)),v=this._placeholderRx.exec(e);if(f)return(f=f.trim()).includes("<")&&(f=f.replace(/[\r\n]+/g,"<br/>")),(s=document.createElement("div")).innerHTML=f,s}return null},n._getPropertyValue=function(t,e,i,o){var s=i.parsePropertyPaths?e.split("/"):[e],f=s.length;if(0<f&&t){var v=s[0],I=t[v];if(i.detectHyperlinks&&"link"===e&&(!o||o.hyperlinkFormat)){var D,k,X,fe=[];if(Array.isArray(I)?I.forEach(function(mt){mt.href?fe.push(mt):"string"==typeof mt&&fe.push({href:mt})}):I.href&&fe.push(I),0<fe.length)return o&&o.hyperlinkFormat?D=o.hyperlinkFormat:i&&i.hyperlinkFormat&&(D=i.hyperlinkFormat),k=D&&D.target?D.target:"_blank",X=[],fe.forEach(function(mt){mt.title||D&&D.label||!mt.rel||X.push(mt.rel," - "),X.push('<a href="',mt.href,'" target="',k,'">'),X.push(mt.title?mt.title:D&&D.label?D.label:mt.href),X.push("</a>","<br/>")}),X.pop(),X.join("")}if(null!=I){var Se=void 0;for(Se=1;Se<f&&(v=s[Se],null!=(I=I[s[Se]]));Se++);if(Se===f&&null!=I){if(t=void 0,(t=void 0!==I.value?I.value:I)instanceof Date)return o&&o.dateFormat?t.toLocaleString(void 0,o.dateFormat):i.dateFormat?t.toLocaleString(void 0,i.dateFormat):t.toISOString();if("object"==typeof t)return(Ve=this._generateDynamicTableHtml(t,s.slice(1),i))||"";if("number"==typeof t){if(o){if(o.dateFormat)return new Date(t).toLocaleString(void 0,o.dateFormat);if(o.numberFormat)return t.toLocaleString(void 0,o.numberFormat)}else if(/(timestamp|date)/gi.test(v))return new Date(t).toISOString();return t.toLocaleString(void 0,i.numberFormat)}if("string"==typeof t&&""!==t&&!/[\n\r<>\s]/g.test(t)&&(i.detectHyperlinks||o&&o.hyperlinkFormat)){t=t.trim(),e=this._isUrlRx.test(t)||o&&o.hyperlinkFormat;var Ve,Je=this._isImageUrlRx.test(t)&&(e||t.startsWith("data:image")),lt=this._emailRx.test(t);if(e||Je||lt)return e=void 0,Ve=void(o&&o.hyperlinkFormat?e=o.hyperlinkFormat:i&&i.hyperlinkFormat&&(e=i.hyperlinkFormat)),Ve=e&&e.target?' target="'.concat(e.target,'"'):' target="_blank"',o="".concat(e&&e.label?e.label:t),e&&e.scheme?t=e.scheme+t:lt&&(t="mailto:"+t),i=e&&e.label?' alt="'.concat(e.label,'"'):"",(e&&e.isImage||Je)&&(o='<img src="'.concat(t,'" style="max-width:100%"').concat(i,'"/>')),'<a href="'.concat(t,'"').concat(Ve,">").concat(o,"</a>")}return t.toString()}}}return""},n._generatePropertyInfoTable=function(t,e,i){var o,s;return t&&e&&0<e.length?((o=[]).push('<table class="'.concat((s=this).Css.table,'">')),e.forEach(function(f){var v=s._getPropertyValue(t,f.propertyPath,i,f);f.hideLabel?o.push('<tr><td colspan="2">',v,"</td></tr>"):(f=f.label||f.propertyPath.split("/")[0],o.push("<tr><th>",f,"</th><td>",v,"</td></tr>"))}),o.push("</table>"),(e=document.createElement("div")).innerHTML=o.join(""),e):null},n._generateDynamicTableHtml=function(t,e,i){var o,s,f,v,I=this;return t&&((o=[]).push('<table class="'.concat((s=this).Css.table,'">')),f=e&&0<e.length?e.join("/")+"/":"",v=0,Object.keys(t).forEach(function(D){I._ignoreProperty(D,t[D])||(o.push("<tr><th>",D,"</th><td>",s._getPropertyValue(t,f+D,i),"</td></tr>"),v++)}),0!==v)?(o.push("</table>"),o.join("")):null},n._ignoreProperty=function(t,e){switch(t){case"title":case"name":case"base":case"popupTemplate":case"anchor":case"icon":case"image":case"imageUrl":case"rotation":case"color":case"size":case"offset":case"strokeColor":case"strokeWidth":case"strokeOpacity":case"subType":case"fillColor":case"fillOpacity":case"visibility":case"visible":return!0;default:if(0===t.indexOf("_")||null==e||""===e)return!0}return!1},n._placeholderRx=/\{([a-zA-Z0-9_\/\s]+)\}/gi,n._isUrlRx=/^(http|https|ftp|tel|mailto):\/\//i,n._isImageUrlRx=/(^data:image|.png$|.jpg$|.jpeg$|.gif$|.bmp$|.svg|.tif|.tiff$)/i,n._emailRx=/^[^\.\s@:](?:[^\s@:]*[^\s@:\.])?@[^\.\s@]+(?:\.[^\.\s@]+)*$/,n._cssUrl=new vt({domain:Ne.staticAssetsDomain,path:"sdk/javascript/mapcontrol/".concat(Rn.getEndpointVersion(),"/atlas.min.css")}).toString(),n.Css={template:"azure-maps-control-popup-template",title:"azure-maps-control-popup-template-title",content:"azure-maps-control-popup-template-content",item:"azure-maps-control-popup-template-content-item",table:"azure-maps-control-popup-template-table"},n}(),oQ=(dl(),Object.freeze({__proto__:null,get AuthenticationType(){return Y},get ControlPosition(){return Zo},get ControlStyle(){return Ga},HtmlMarker:IS,Map:Sz,Pixel:id,Popup:PC,PopupTemplate:QV,Shape:Bl,_enableRTLTextPlugin:dl,_getAssetDomain:jl,_getDomain:Dl,_hasMaxParallelImageRequests:ll,_hasSetAuthenticationOptions:rs,_hasSetDomain:ks,_hasSetLanguage:ul,_hasSetSessionId:Cs,_hasSetStyleDefinitionsPath:Ia,_hasSetStyleDefinitionsVersion:Al,_hasSetView:Il,_hasWorkerCount:cl,addImageTemplate:Wo,clearPrewarmedResources:Pc,control:vR,data:Sy,getAllImageTemplateNames:vs,getAuthenticationOptions:ua,getDomain:Aa,getImageTemplate:eu,getLanguage:Ds,getMaxParallelImageRequests:Ns,getSessionId:ns,getStaticAssetsDomain:Ho,getStyleAPIVersion:Ci,getStyleDefinitionsPath:oo,getStyleDefinitionsVersion:so,getSubscriptionKey:ba,getUserRegion:_s,getVersion:en,getView:Kt,getWorkerCount:Oc,internal:Ii,isSupported:Qe,layer:xR,math:yR,prewarm:Va,setAuthenticationOptions:Et,setDomain:wn,setLanguage:oa,setMaxParallelImageRequests:ia,setSessionId:ys,setStyleAPIVersion:ji,setStyleDefinitionsPath:$n,setStyleDefinitionsVersion:Ti,setSubscriptionKey:jc,setUserRegion:Tl,setView:qs,setWorkerCount:xn,source:pS}))},3184:(it,C,w)=>{"use strict";w.r(C),w.d(C,{intervalBackoff:()=>Gr,retryBackoff:()=>On});var z=w(9030),T=w(8750),V=w(1413),N=w(9974),R=w(4360),G=w(274),K=w(1985),J=w(8359);class se extends J.yU{constructor(Nn,br){super()}schedule(Nn,br=0){return this}}const U={setInterval(Tn,Nn,...br){const{delegate:bt}=U;return bt?.setInterval?bt.setInterval(Tn,Nn,...br):setInterval(Tn,Nn,...br)},clearInterval(Tn){const{delegate:Nn}=U;return(Nn?.clearInterval||clearInterval)(Tn)},delegate:void 0};var _e=w(7908),Ne=w(6129);class Le{constructor(Nn,br=Le.now){this.schedulerActionCtor=Nn,this.now=br}schedule(Nn,br=0,bt){return new this.schedulerActionCtor(this,Nn).schedule(bt,br)}}Le.now=Ne.U.now;const _t=new class tt extends Le{constructor(Nn,br=Le.now){super(Nn,br),this.actions=[],this._active=!1}flush(Nn){const{actions:br}=this;if(this._active)return void br.push(Nn);let bt;this._active=!0;do{if(bt=Nn.execute(Nn.state,Nn.delay))break}while(Nn=br.shift());if(this._active=!1,bt){for(;Nn=br.shift();)Nn.unsubscribe();throw bt}}}(class Ae extends se{constructor(Nn,br){super(Nn,br),this.scheduler=Nn,this.work=br,this.pending=!1}schedule(Nn,br=0){var bt;if(this.closed)return this;this.state=Nn;const qt=this.id,fn=this.scheduler;return null!=qt&&(this.id=this.recycleAsyncId(fn,qt,br)),this.pending=!0,this.delay=br,this.id=null!==(bt=this.id)&&void 0!==bt?bt:this.requestAsyncId(fn,this.id,br),this}requestAsyncId(Nn,br,bt=0){return U.setInterval(Nn.flush.bind(Nn,this),bt)}recycleAsyncId(Nn,br,bt=0){if(null!=bt&&this.delay===bt&&!1===this.pending)return br;null!=br&&U.clearInterval(br)}execute(Nn,br){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const bt=this._execute(Nn,br);if(bt)return bt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Nn,br){let qt,bt=!1;try{this.work(Nn)}catch(fn){bt=!0,qt=fn||new Error("Scheduled action threw falsy error")}if(bt)return this.unsubscribe(),qt}unsubscribe(){if(!this.closed){const{id:Nn,scheduler:br}=this,{actions:bt}=br;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_e.o)(bt,this),null!=Nn&&(this.id=this.recycleAsyncId(br,Nn,null)),this.delay=null,super.unsubscribe()}}}),Bt=_t;var yt=w(9470);function vt(Tn=0,Nn,br=Bt){let bt=-1;return null!=Nn&&((0,yt.m)(Nn)?br=Nn:bt=Nn),new K.c(qt=>{let fn=function Pt(Tn){return Tn instanceof Date&&!isNaN(Tn)}(Tn)?+Tn-br.now():Tn;fn<0&&(fn=0);let Ut=0;return br.schedule(function(){qt.closed||(qt.next(Ut++),0<=bt?this.schedule(void 0,bt):qt.complete())},fn)})}var Gt=w(8810),Ht=w(8141);function jt(Tn,Nn){return Math.min(Tn,Nn)}function Yt(Tn,Nn){return Math.pow(2,Tn)*Nn}function On(Tn){const{initialInterval:Nn,maxRetries:br=1/0,maxInterval:bt=1/0,shouldRetry:qt=(()=>!0),resetOnSuccess:fn=!1,backoffDelay:Ut=Yt}="number"==typeof Tn?{initialInterval:Tn}:Tn;return bn=>(0,z.v)(()=>{let Pn=0;return bn.pipe(function M(Tn){return(0,N.N)((Nn,br)=>{let bt,fn,qt=!1;const Ut=()=>{bt=Nn.subscribe((0,R._)(br,void 0,void 0,bn=>{fn||(fn=new V.B,(0,T.Tg)(Tn(fn)).subscribe((0,R._)(br,()=>bt?Ut():qt=!0))),fn&&fn.next(bn)})),qt&&(bt.unsubscribe(),bt=null,qt=!1,Ut())};Ut()})}(gr=>gr.pipe((0,G.H)(ui=>{const Oi=Pn++;return function Y(Tn,Nn,br){return(0,z.v)(()=>Tn()?Nn:br)}(()=>Oi<br&&qt(ui),vt(jt(Ut(Oi,Nn),bt)),(0,Gt.$)(ui))}))),(0,Ht.M)(()=>{fn&&(Pn=0)}))})}var In=w(7673),Rn=w(5412),wr=w(3703);function Gr(Tn,Nn=_t){let{initialInterval:br,maxInterval:bt=1/0,backoffDelay:qt=Yt}="number"==typeof Tn?{initialInterval:Tn}:Tn;return br=br<0?0:br,(0,In.of)(0,Nn).pipe(function Nr(Tn,Nn=1/0,br){return Nn=(Nn||0)<1?1/0:Nn,(0,N.N)((bt,qt)=>(0,Rn.h)(bt,qt,Tn,Nn,void 0,!0,br))}(fn=>vt(jt(qt(fn,br),bt)).pipe((0,wr.u)(fn+1))))}},5918:(it,C,w)=>{"use strict";function z(st){if(void 0===st)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st}function T(st,H){st.prototype=Object.create(H.prototype),st.prototype.constructor=st,st.__proto__=H}w.r(C),w.d(C,{Back:()=>If,Bounce:()=>iy,CSSPlugin:()=>wh,Circ:()=>To,Cubic:()=>vd,Elastic:()=>gp,Expo:()=>ql,Linear:()=>yd,Power0:()=>xi,Power1:()=>or,Power2:()=>qo,Power3:()=>ma,Power4:()=>_d,Quad:()=>Af,Quart:()=>Zp,Quint:()=>Ys,Sine:()=>jh,SteppedEase:()=>ry,Strong:()=>qm,TimelineLite:()=>Wa,TimelineMax:()=>Wa,TweenLite:()=>Qa,TweenMax:()=>rm,default:()=>Th,gsap:()=>Th});var R,M,G,Tn,Nn,br,bt,Ut,fo,jo,os,at,nt,ht,Xt,Cn,En,st,H,ee,ne,ce,Ce,Oe,De,Vn,V={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},N={duration:.5,overwrite:!1,delay:0},Y=1e8,K=1/Y,J=2*Math.PI,se=J/4,U=0,_e=Math.sqrt,Ae=Math.cos,Ne=Math.sin,Le=function(H){return"string"==typeof H},tt=function(H){return"function"==typeof H},_t=function(H){return"number"==typeof H},Bt=function(H){return typeof H>"u"},yt=function(H){return"object"==typeof H},Pt=function(H){return!1!==H},vt=function(){return typeof window<"u"},Gt=function(H){return tt(H)||Le(H)},Ht="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},jt=Array.isArray,Yt=/(?:-?\.?\d|\.)+/gi,On=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,In=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Rn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Nr=/[+-]=-?[.\d]+/,wr=/[^,'"\[\]\s]+/gi,Gr=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,qt={},fn={},bn=function(H){return(fn=Aa(H,qt))&&_r},Pn=function(H,ee){return console.warn("Invalid property",H,"set to",ee,"Missing plugin? gsap.registerPlugin()")},gr=function(H,ee){return!ee&&console.warn(H)},ui=function(H,ee){return H&&(qt[H]=ee)&&fn&&(fn[H]=ee)||qt},Oi=function(){return 0},Dr={suppressEvents:!0,isStart:!0,kill:!1},hr={suppressEvents:!0,kill:!1},ei={suppressEvents:!0},ra={},Hi=[],No={},jr={},Do={},_i=30,xs=[],tc="",gc=function(H){var ne,ce,ee=H[0];if(yt(ee)||tt(ee)||(H=[H]),!(ne=(ee._gsap||{}).harness)){for(ce=xs.length;ce--&&!xs[ce].targetTest(ee););ne=xs[ce]}for(ce=H.length;ce--;)H[ce]&&(H[ce]._gsap||(H[ce]._gsap=new Zu(H[ce],ne)))||H.splice(ce,1);return H},Vs=function(H){return H._gsap||gc(Cs(H))[0]._gsap},Fo=function(H,ee,ne){return(ne=H[ee])&&tt(ne)?H[ee]():Bt(ne)&&H.getAttribute&&H.getAttribute(ee)||ne},Ta=function(H,ee){return(H=H.split(",")).forEach(ee)||H},kr=function(H){return Math.round(1e5*H)/1e5||0},Ei=function(H){return Math.round(1e7*H)/1e7||0},dr=function(H,ee){var ne=ee.charAt(0),ce=parseFloat(ee.substr(2));return H=parseFloat(H),"+"===ne?H+ce:"-"===ne?H-ce:"*"===ne?H*ce:H/ce},Gs=function(H,ee){for(var ne=ee.length,ce=0;H.indexOf(ee[ce])<0&&++ce<ne;);return ce<ne},va=function(){var ne,ce,H=Hi.length,ee=Hi.slice(0);for(No={},Hi.length=0,ne=0;ne<H;ne++)(ce=ee[ne])&&ce._lazy&&(ce.render(ce._lazy[0],ce._lazy[1],!0)._lazy=0)},$a=function(H,ee,ne,ce){Hi.length&&!M&&va(),H.render(ee,ne,ce||M&&ee<0&&(H._initted||H._startAt)),Hi.length&&!M&&va()},ca=function(H){var ee=parseFloat(H);return(ee||0===ee)&&(H+"").match(wr).length<2?ee:Le(H)?H.trim():H},Xo=function(H){return H},ua=function(H,ee){for(var ne in ee)ne in H||(H[ne]=ee[ne]);return H},Aa=function(H,ee){for(var ne in ee)H[ne]=ee[ne];return H},oo=function st(H,ee){for(var ne in ee)"__proto__"!==ne&&"constructor"!==ne&&"prototype"!==ne&&(H[ne]=yt(ee[ne])?st(H[ne]||(H[ne]={}),ee[ne]):ee[ne]);return H},so=function(H,ee){var ce,ne={};for(ce in H)ce in ee||(ne[ce]=H[ce]);return ne},Ci=function(H){var ee=H.parent||Tn,ne=H.keyframes?function(H){return function(ee,ne){for(var ce in ne)ce in ee||"duration"===ce&&H||"ease"===ce||(ee[ce]=ne[ce])}}(jt(H.keyframes)):ua;if(Pt(H.inherit))for(;ee;)ne(H,ee.vars.defaults),ee=ee.parent||ee._dp;return H},Ns=function(H,ee,ne,ce,Ce){void 0===ne&&(ne="_first"),void 0===ce&&(ce="_last");var De,Oe=H[ce];if(Ce)for(De=ee[Ce];Oe&&Oe[Ce]>De;)Oe=Oe._prev;return Oe?(ee._next=Oe._next,Oe._next=ee):(ee._next=H[ne],H[ne]=ee),ee._next?ee._next._prev=ee:H[ce]=ee,ee._prev=Oe,ee.parent=ee._dp=H,ee},Ds=function(H,ee,ne,ce){void 0===ne&&(ne="_first"),void 0===ce&&(ce="_last");var Ce=ee._prev,Oe=ee._next;Ce?Ce._next=Oe:H[ne]===ee&&(H[ne]=Oe),Oe?Oe._prev=Ce:H[ce]===ee&&(H[ce]=Ce),ee._next=ee._prev=ee.parent=null},ns=function(H,ee){H.parent&&(!ee||H.parent.autoRemoveChildren)&&H.parent.remove&&H.parent.remove(H),H._act=0},ba=function(H,ee){if(H&&(!ee||ee._end>H._dur||ee._start<0))for(var ne=H;ne;)ne._dirty=1,ne=ne.parent;return H},Kt=function(H,ee,ne,ce){return H._startAt&&(M?H._startAt.revert(hr):H.vars.immediateRender&&!H.vars.autoRevert||H._startAt.render(ee,!0,ce))},en=function st(H){return!H||H._ts&&st(H.parent)},Qe=function(H){return H._repeat?Et(H._tTime,H=H.duration()+H._rDelay)*H:0},Et=function(H,ee){var ne=Math.floor(H/=ee);return H&&ne===H?ne-1:ne},wn=function(H,ee){return(H-ee._start)*ee._ts+(ee._ts>=0?0:ee._dirty?ee.totalDuration():ee._tDur)},$n=function(H){return H._end=Ei(H._start+(H._tDur/Math.abs(H._ts||H._rts||K)||0))},Ti=function(H,ee){var ne=H._dp;return ne&&ne.smoothChildTiming&&H._ts&&(H._start=Ei(ne._time-(H._ts>0?ee/H._ts:((H._dirty?H.totalDuration():H._tDur)-ee)/-H._ts)),$n(H),ne._dirty||ba(ne,H)),H},ji=function(H,ee){var ne;if((ee._time||!ee._dur&&ee._initted||ee._start<H._time&&(ee._dur||!ee.add))&&(ne=wn(H.rawTime(),ee),(!ee._dur||ks(0,ee.totalDuration(),ne)-ee._tTime>K)&&ee.render(ne,!0)),ba(H,ee)._dp&&H._initted&&H._time>=H._dur&&H._ts){if(H._dur<H.duration())for(ne=H;ne._dp;)ne.rawTime()>=0&&ne.totalTime(ne._tTime),ne=ne._dp;H._zTime=-K}},xn=function(H,ee,ne,ce){return ee.parent&&ns(ee),ee._start=Ei((_t(ne)?ne:ne||H!==Tn?Va(H,ne,ee):H._time)+ee._delay),ee._end=Ei(ee._start+(ee.totalDuration()/Math.abs(ee.timeScale())||0)),Ns(H,ee,"_first","_last",H._sort?"_start":0),jc(ee)||(H._recent=ee),ce||ji(H,ee),H._ts<0&&Ti(H,H._tTime),H},ia=function(H,ee){return(qt.ScrollTrigger||Pn("scrollTrigger",ee))&&qt.ScrollTrigger.create(ee,H)},oa=function(H,ee,ne,ce,Ce){return pd(H,ee,Ce),H._initted?!ne&&H._pt&&!M&&(H._dur&&!1!==H.vars.lazy||!H._dur&&H.vars.lazy)&&fo!==ka.frame?(Hi.push(H),H._lazy=[Ce,ce],1):void 0:1},ys=function st(H){var ee=H.parent;return ee&&ee._ts&&ee._initted&&!ee._lock&&(ee.rawTime()<0||st(ee))},jc=function(H){var ee=H.data;return"isFromStart"===ee||"isStart"===ee},Wo=function(H,ee,ne,ce){var Ce=H._repeat,Oe=Ei(ee)||0,De=H._tTime/H._tDur;return De&&!ce&&(H._time*=Oe/H._dur),H._dur=Oe,H._tDur=Ce?Ce<0?1e10:Ei(Oe*(Ce+1)+H._rDelay*Ce):Oe,De>0&&!ce&&Ti(H,H._tTime=H._tDur*De),H.parent&&$n(H),ne||ba(H.parent,H),H},eu=function(H){return H instanceof Wa?ba(H):Wo(H,H._dur)},vs={_start:0,endTime:Oi,totalDuration:Oi},Va=function st(H,ee,ne){var De,at,nt,ce=H.labels,Ce=H._recent||vs,Oe=H.duration()>=Y?Ce.endTime(!1):H._dur;return Le(ee)&&(isNaN(ee)||ee in ce)?(at=ee.charAt(0),nt="%"===ee.substr(-1),De=ee.indexOf("="),"<"===at||">"===at?(De>=0&&(ee=ee.replace(/=/,"")),("<"===at?Ce._start:Ce.endTime(Ce._repeat>=0))+(parseFloat(ee.substr(1))||0)*(nt?(De<0?Ce:ne).totalDuration()/100:1)):De<0?(ee in ce||(ce[ee]=Oe),ce[ee]):(at=parseFloat(ee.charAt(De-1)+ee.substr(De+1)),nt&&ne&&(at=at/100*(jt(ne)?ne[0]:ne).totalDuration()),De>1?st(H,ee.substr(0,De-1),ne)+at:Oe+at)):null==ee?Oe:+ee},Pc=function(H,ee,ne){var De,at,ce=_t(ee[1]),Ce=(ce?2:1)+(H<2?0:1),Oe=ee[Ce];if(ce&&(Oe.duration=ee[1]),Oe.parent=ne,H){for(De=Oe,at=ne;at&&!("immediateRender"in De);)De=at.vars.defaults||{},at=Pt(at.vars.inherit)&&at.parent;Oe.immediateRender=Pt(De.immediateRender),H<2?Oe.runBackwards=1:Oe.startAt=ee[Ce-1]}return new Qa(ee[0],Oe,ee[Ce+1])},rs=function(H,ee){return H||0===H?ee(H):ee},ks=function(H,ee,ne){return ne<H?H:ne>ee?ee:ne},Ia=function(H,ee){return Le(H)&&(ee=Gr.exec(H))?ee[1]:""},cl=[].slice,ll=function(H,ee){return H&&yt(H)&&"length"in H&&(!ee&&!H.length||H.length-1 in H&&yt(H[0]))&&!H.nodeType&&H!==Nn},Cs=function(H,ee,ne){return G&&!ee&&G.selector?G.selector(H):!Le(H)||ne||!br&&mc()?jt(H)?function(H,ee,ne){return void 0===ne&&(ne=[]),H.forEach(function(ce){var Ce;return Le(ce)&&!ee||ll(ce,1)?(Ce=ne).push.apply(Ce,Cs(ce)):ne.push(ce)})||ne}(H,ne):ll(H)?cl.call(H,0):H?[H]:[]:cl.call((ee||bt).querySelectorAll(H),0)},Il=function(H){return H=Cs(H)[0]||gr("Invalid scope")||{},function(ee){var ne=H.current||H.nativeElement||H;return Cs(ee,ne.querySelectorAll?ne:ne===H?gr("Invalid scope")||bt.createElement("div"):H)}},jl=function(H){return H.sort(function(){return.5-Math.random()})},Dl=function(H){if(tt(H))return H;var ee=yt(H)?H:{each:H},ne=_c(ee.ease),ce=ee.from||0,Ce=parseFloat(ee.base)||0,Oe={},De=ce>0&&ce<1,at=isNaN(ce)||De,nt=ee.axis,ht=ce,Xt=ce;return Le(ce)?ht=Xt={center:.5,edges:.5,end:1}[ce]||0:!De&&at&&(ht=ce[0],Xt=ce[1]),function(Cn,En,Vn){var Lr,Ir,Qr,Or,yr,di,Mi,Ni,qr,Nt=(Vn||ee).length,Gn=Oe[Nt];if(!Gn){if(!(qr="auto"===ee.grid?0:(ee.grid||[1,Y])[1])){for(Mi=-Y;Mi<(Mi=Vn[qr++].getBoundingClientRect().left)&&qr<Nt;);qr<Nt&&qr--}for(Gn=Oe[Nt]=[],Lr=at?Math.min(qr,Nt)*ht-.5:ce%qr,Ir=qr===Y?0:at?Nt*Xt/qr-.5:ce/qr|0,Mi=0,Ni=Y,di=0;di<Nt;di++)Qr=di%qr-Lr,Or=Ir-(di/qr|0),Gn[di]=yr=nt?Math.abs("y"===nt?Or:Qr):_e(Qr*Qr+Or*Or),yr>Mi&&(Mi=yr),yr<Ni&&(Ni=yr);"random"===ce&&jl(Gn),Gn.max=Mi-Ni,Gn.min=Ni,Gn.v=Nt=(parseFloat(ee.amount)||parseFloat(ee.each)*(qr>Nt?Nt-1:nt?"y"===nt?Nt/qr:qr:Math.max(qr,Nt/qr))||0)*("edges"===ce?-1:1),Gn.b=Nt<0?Ce-Nt:Ce,Gn.u=Ia(ee.amount||ee.each)||0,ne=ne&&Nt<0?kd(ne):ne}return Nt=(Gn[Cn]-Gn.min)/Gn.max||0,Ei(Gn.b+(ne?ne(Nt):Nt)*Gn.v)+Gn.u}},dl=function(H){var ee=Math.pow(10,((H+"").split(".")[1]||"").length);return function(ne){var ce=Ei(Math.round(parseFloat(ne)/H)*H*ee);return(ce-ce%1)/ee+(_t(ne)?0:Ia(ne))}},Zo=function(H,ee){var ce,Ce,ne=jt(H);return!ne&&yt(H)&&(ce=ne=H.radius||Y,H.values?(H=Cs(H.values),(Ce=!_t(H[0]))&&(ce*=ce)):H=dl(H.increment)),rs(ee,ne?tt(H)?function(Oe){return Ce=H(Oe),Math.abs(Ce-Oe)<=ce?Ce:Oe}:function(Oe){for(var Cn,En,De=parseFloat(Ce?Oe.x:Oe),at=parseFloat(Ce?Oe.y:0),nt=Y,ht=0,Xt=H.length;Xt--;)(Cn=Ce?(Cn=H[Xt].x-De)*Cn+(En=H[Xt].y-at)*En:Math.abs(H[Xt]-De))<nt&&(nt=Cn,ht=Xt);return ht=!ce||nt<=ce?H[ht]:Oe,Ce||ht===Oe||_t(Oe)?ht:ht+Ia(Oe)}:dl(H))},Ga=function(H,ee,ne,ce){return rs(jt(H)?!ee:!0===ne?!!(ne=0):!ce,function(){return jt(H)?H[~~(Math.random()*H.length)]:(ne=ne||1e-5)&&(ce=ne<1?Math.pow(10,(ne+"").length-2):1)&&Math.floor(Math.round((H-ne/2+Math.random()*(ee-H+.99*ne))/ne)*ne*ce)/ce})},ut=function(H,ee,ne){return rs(ne,function(ce){return H[~~ee(ce)]})},mr=function(H){for(var ce,Ce,Oe,De,ee=0,ne="";~(ce=H.indexOf("random(",ee));)Oe=H.indexOf(")",ce),De="["===H.charAt(ce+7),Ce=H.substr(ce+7,Oe-ce-7).match(De?wr:Yt),ne+=H.substr(ee,ce-ee)+Ga(De?Ce:+Ce[0],De?0:+Ce[1],+Ce[2]||1e-5),ee=Oe+1;return ne+H.substr(ee,H.length-ee)},pr=function(H,ee,ne,ce,Ce){var Oe=ee-H,De=ce-ne;return rs(Ce,function(at){return ne+((at-H)/Oe*De||0)})},Ii=function(H,ee,ne){var Oe,De,at,ce=H.labels,Ce=Y;for(Oe in ce)(De=ce[Oe]-ee)<0==!!ne&&De&&Ce>(De=Math.abs(De))&&(at=Oe,Ce=De);return at},co=function(H,ee,ne){var at,nt,ht,ce=H.vars,Ce=ce[ee],Oe=G,De=H._ctx;if(Ce)return at=ce[ee+"Params"],nt=ce.callbackScope||H,ne&&Hi.length&&va(),De&&(G=De),ht=at?Ce.apply(nt,at):Ce.call(nt),G=Oe,ht},ko=function(H){return ns(H),H.scrollTrigger&&H.scrollTrigger.kill(!!M),H.progress()<1&&co(H,"onInterrupt"),H},An=[],is=function(H){if(H)if(H=!H.name&&H.default||H,vt()||H.headless){var ee=H.name,ne=tt(H),ce=ee&&!ne&&H.init?function(){this._props=[]}:H,Ce={init:Oi,render:Xp,add:Ml,kill:Vl,modifier:yu,rawVars:0},Oe={targetTest:0,get:0,getSetter:Mr,aliases:{},register:0};if(mc(),H!==ce){if(jr[ee])return;ua(ce,ua(so(H,Ce),Oe)),Aa(ce.prototype,Aa(Ce,so(H,Oe))),jr[ce.prop=ee]=ce,H.targetTest&&(xs.push(ce),ra[ee]=1),ee=("css"===ee?"CSS":ee.charAt(0).toUpperCase()+ee.substr(1))+"Plugin"}ui(ee,ce),H.register&&H.register(_r,ce,rc)}else An.push(H)},ao=255,Jo={aqua:[0,ao,ao],lime:[0,ao,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ao],navy:[0,0,128],white:[ao,ao,ao],olive:[128,128,0],yellow:[ao,ao,0],orange:[ao,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ao,0,0],pink:[ao,192,203],cyan:[0,ao,ao],transparent:[ao,ao,ao,0]},la=function(H,ee,ne){return(6*(H+=H<0?1:H>1?-1:0)<1?ee+(ne-ee)*H*6:H<.5?ne:3*H<2?ee+(ne-ee)*(2/3-H)*6:ee)*ao+.5|0},$s=function(H,ee,ne){var Ce,Oe,De,at,nt,ht,Xt,Cn,En,Vn,ce=H?_t(H)?[H>>16,H>>8&ao,H&ao]:0:Jo.black;if(!ce){if(","===H.substr(-1)&&(H=H.substr(0,H.length-1)),Jo[H])ce=Jo[H];else if("#"===H.charAt(0)){if(H.length<6&&(Ce=H.charAt(1),Oe=H.charAt(2),De=H.charAt(3),H="#"+Ce+Ce+Oe+Oe+De+De+(5===H.length?H.charAt(4)+H.charAt(4):"")),9===H.length)return[(ce=parseInt(H.substr(1,6),16))>>16,ce>>8&ao,ce&ao,parseInt(H.substr(7),16)/255];ce=[(H=parseInt(H.substr(1),16))>>16,H>>8&ao,H&ao]}else if("hsl"===H.substr(0,3))if(ce=Vn=H.match(Yt),ee){if(~H.indexOf("="))return ce=H.match(On),ne&&ce.length<4&&(ce[3]=1),ce}else at=+ce[0]%360/360,nt=+ce[1]/100,Ce=2*(ht=+ce[2]/100)-(Oe=ht<=.5?ht*(nt+1):ht+nt-ht*nt),ce.length>3&&(ce[3]*=1),ce[0]=la(at+1/3,Ce,Oe),ce[1]=la(at,Ce,Oe),ce[2]=la(at-1/3,Ce,Oe);else ce=H.match(Yt)||Jo.transparent;ce=ce.map(Number)}return ee&&!Vn&&(Ce=ce[0]/ao,Oe=ce[1]/ao,De=ce[2]/ao,ht=((Xt=Math.max(Ce,Oe,De))+(Cn=Math.min(Ce,Oe,De)))/2,Xt===Cn?at=nt=0:(En=Xt-Cn,nt=ht>.5?En/(2-Xt-Cn):En/(Xt+Cn),at=Xt===Ce?(Oe-De)/En+(Oe<De?6:0):Xt===Oe?(De-Ce)/En+2:(Ce-Oe)/En+4,at*=60),ce[0]=~~(at+.5),ce[1]=~~(100*nt+.5),ce[2]=~~(100*ht+.5)),ne&&ce.length<4&&(ce[3]=1),ce},wc=function(H){var ee=[],ne=[],ce=-1;return H.split(Ma).forEach(function(Ce){var Oe=Ce.match(In)||[];ee.push.apply(ee,Oe),ne.push(ce+=Oe.length+1)}),ee.c=ne,ee},oi=function(H,ee,ne){var at,nt,ht,Xt,ce="",Ce=(H+ce).match(Ma),Oe=ee?"hsla(":"rgba(",De=0;if(!Ce)return H;if(Ce=Ce.map(function(Cn){return(Cn=$s(Cn,ee,1))&&Oe+(ee?Cn[0]+","+Cn[1]+"%,"+Cn[2]+"%,"+Cn[3]:Cn.join(","))+")"}),ne&&(ht=wc(H),(at=ne.c).join(ce)!==ht.c.join(ce)))for(Xt=(nt=H.replace(Ma,"1").split(In)).length-1;De<Xt;De++)ce+=nt[De]+(~at.indexOf(De)?Ce.shift()||Oe+"0,0,0,0)":(ht.length?ht:Ce.length?Ce:ne).shift());if(!nt)for(Xt=(nt=H.split(Ma)).length-1;De<Xt;De++)ce+=nt[De]+Ce[De];return ce+nt[Xt]},Ma=function(){var H,st="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(H in Jo)st+="|"+H+"\\b";return new RegExp(st+")","gi")}(),Wc=/hsl[a]?\(/,ls=function(H){var ne,ee=H.join(" ");if(Ma.lastIndex=0,Ma.test(ee))return ne=Wc.test(ee),H[1]=oi(H[1],ne),H[0]=oi(H[0],ne,wc(H[1])),!0},ka=(st=Date.now,H=500,ee=33,ne=st(),ce=ne,Oe=Ce=1e3/240,Vn=function Nt(Gn){var Qr,Or,yr,di,Lr=st()-ce,Ir=!0===Gn;if((Lr>H||Lr<0)&&(ne+=Lr-ee),((Qr=(yr=(ce+=Lr)-ne)-Oe)>0||Ir)&&(di=++Xt.frame,Cn=yr-1e3*Xt.time,Xt.time=yr/=1e3,Oe+=Qr+(Qr>=Ce?4:Ce-Qr),Or=1),Ir||(at=nt(Nt)),Or)for(En=0;En<De.length;En++)De[En](yr,Cn,di,Gn)},Xt={time:0,frame:0,tick:function(){Vn(!0)},deltaRatio:function(Gn){return Cn/(1e3/(Gn||60))},wake:function(){Ut&&(!br&&vt()&&(Nn=br=window,bt=Nn.document||{},qt.gsap=_r,(Nn.gsapVersions||(Nn.gsapVersions=[])).push(_r.version),bn(fn||Nn.GreenSockGlobals||!Nn.gsap&&Nn||{}),An.forEach(is)),ht=typeof requestAnimationFrame<"u"&&requestAnimationFrame,at&&Xt.sleep(),nt=ht||function(Gn){return setTimeout(Gn,Oe-1e3*Xt.time+1|0)},os=1,Vn(2))},sleep:function(){(ht?cancelAnimationFrame:clearTimeout)(at),os=0,nt=Oi},lagSmoothing:function(Gn,Lr){H=Gn||1/0,ee=Math.min(Lr||33,H)},fps:function(Gn){Oe=1e3*Xt.time+(Ce=1e3/(Gn||240))},add:function(Gn,Lr,Ir){var Qr=Lr?function(Or,yr,di,Mi){Gn(Or,yr,di,Mi),Xt.remove(Qr)}:Gn;return Xt.remove(Gn),De[Ir?"unshift":"push"](Qr),mc(),Qr},remove:function(Gn,Lr){~(Lr=De.indexOf(Gn))&&De.splice(Lr,1)&&En>=Lr&&En--},_listeners:De=[]}),mc=function(){return!os&&ka.wake()},Co={},tu=/^[\d.\-M][\d.\-,\s]/,Lu=/["']/g,Lo=function(H){for(var De,at,nt,ee={},ne=H.substr(1,H.length-3).split(":"),ce=ne[0],Ce=1,Oe=ne.length;Ce<Oe;Ce++)at=ne[Ce],De=Ce!==Oe-1?at.lastIndexOf(","):at.length,nt=at.substr(0,De),ee[ce]=isNaN(nt)?nt.replace(Lu,"").trim():+nt,ce=at.substr(De+1).trim();return ee},kd=function(H){return function(ee){return 1-H(1-ee)}},La=function st(H,ee){for(var ce,ne=H._first;ne;)ne instanceof Wa?st(ne,ee):ne.vars.yoyoEase&&(!ne._yoyo||!ne._repeat)&&ne._yoyo!==ee&&(ne.timeline?st(ne.timeline,ee):(ce=ne._ease,ne._ease=ne._yEase,ne._yEase=ce,ne._yoyo=ee)),ne=ne._next},_c=function(H,ee){return H&&(tt(H)?H:Co[H]||function(H){var ee=(H+"").split("("),ne=Co[ee[0]];return ne&&ee.length>1&&ne.config?ne.config.apply(null,~H.indexOf("{")?[Lo(ee[1])]:function(H){var ee=H.indexOf("(")+1,ne=H.indexOf(")"),ce=H.indexOf("(",ee);return H.substring(ee,~ce&&ce<ne?H.indexOf(")",ne+1):ne)}(H).split(",").map(ca)):Co._CE&&tu.test(H)?Co._CE("",H):ne}(H))||ee},Ca=function(H,ee,ne,ce){void 0===ne&&(ne=function(at){return 1-ee(1-at)}),void 0===ce&&(ce=function(at){return at<.5?ee(2*at)/2:1-ee(2*(1-at))/2});var Oe,Ce={easeIn:ee,easeOut:ne,easeInOut:ce};return Ta(H,function(De){for(var at in Co[De]=qt[De]=Ce,Co[Oe=De.toLowerCase()]=ne,Ce)Co[Oe+("easeIn"===at?".in":"easeOut"===at?".out":".inOut")]=Co[De+"."+at]=Ce[at]}),Ce},Ld=function(H){return function(ee){return ee<.5?(1-H(1-2*ee))/2:.5+H(2*(ee-.5))/2}},Fu=function st(H,ee,ne){var ce=ee>=1?ee:1,Ce=(ne||(H?.3:.45))/(ee<1?ee:1),Oe=Ce/J*(Math.asin(1/ce)||0),De=function(ht){return 1===ht?1:ce*Math.pow(2,-10*ht)*Ne((ht-Oe)*Ce)+1},at="out"===H?De:"in"===H?function(nt){return 1-De(1-nt)}:Ld(De);return Ce=J/Ce,at.config=function(nt,ht){return st(H,nt,ht)},at},Hu=function st(H,ee){void 0===ee&&(ee=1.70158);var ne=function(Oe){return Oe?--Oe*Oe*((ee+1)*Oe+ee)+1:0},ce="out"===H?ne:"in"===H?function(Ce){return 1-ne(1-Ce)}:Ld(ne);return ce.config=function(Ce){return st(H,Ce)},ce};Ta("Linear,Quad,Cubic,Quart,Quint,Strong",function(st,H){var ee=H<5?H+1:H;Ca(st+",Power"+(ee-1),H?function(ne){return Math.pow(ne,ee)}:function(ne){return ne},function(ne){return 1-Math.pow(1-ne,ee)},function(ne){return ne<.5?Math.pow(2*ne,ee)/2:1-Math.pow(2*(1-ne),ee)/2})}),Co.Linear.easeNone=Co.none=Co.Linear.easeIn,Ca("Elastic",Fu("in"),Fu("out"),Fu()),function(st,H){var ee=1/H,ne=2*ee,ce=2.5*ee,Ce=function(De){return De<ee?st*De*De:De<ne?st*Math.pow(De-1.5/H,2)+.75:De<ce?st*(De-=2.25/H)*De+.9375:st*Math.pow(De-2.625/H,2)+.984375};Ca("Bounce",function(Oe){return 1-Ce(1-Oe)},Ce)}(7.5625,2.75),Ca("Expo",function(st){return st?Math.pow(2,10*(st-1)):0}),Ca("Circ",function(st){return-(_e(1-st*st)-1)}),Ca("Sine",function(st){return 1===st?1:1-Ae(st*se)}),Ca("Back",Hu("in"),Hu("out"),Hu()),Co.SteppedEase=Co.steps=qt.SteppedEase={config:function(H,ee){void 0===H&&(H=1);var ne=1/H,ce=H+(ee?0:1),Ce=ee?1:0,Oe=1-K;return function(De){return((ce*ks(0,Oe,De)|0)+Ce)*ne}}},N.ease=Co["quad.out"],Ta("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(st){return tc+=st+","+st+"Params,"});var Zu=function(H,ee){this.id=U++,H._gsap=this,this.target=H,this.harness=ee,this.get=ee?ee.get:Fo,this.set=ee?ee.getSetter:Mr},Uu=function(){function st(ee){this.vars=ee,this._delay=+ee.delay||0,(this._repeat=ee.repeat===1/0?-2:ee.repeat||0)&&(this._rDelay=ee.repeatDelay||0,this._yoyo=!!ee.yoyo||!!ee.yoyoEase),this._ts=1,Wo(this,+ee.duration,1,1),this.data=ee.data,G&&(this._ctx=G,G.data.push(this)),os||ka.wake()}var H=st.prototype;return H.delay=function(ne){return ne||0===ne?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+ne-this._delay),this._delay=ne,this):this._delay},H.duration=function(ne){return arguments.length?this.totalDuration(this._repeat>0?ne+(ne+this._rDelay)*this._repeat:ne):this.totalDuration()&&this._dur},H.totalDuration=function(ne){return arguments.length?(this._dirty=0,Wo(this,this._repeat<0?ne:(ne-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},H.totalTime=function(ne,ce){if(mc(),!arguments.length)return this._tTime;var Ce=this._dp;if(Ce&&Ce.smoothChildTiming&&this._ts){for(Ti(this,ne),!Ce._dp||Ce.parent||ji(Ce,this);Ce&&Ce.parent;)Ce.parent._time!==Ce._start+(Ce._ts>=0?Ce._tTime/Ce._ts:(Ce.totalDuration()-Ce._tTime)/-Ce._ts)&&Ce.totalTime(Ce._tTime,!0),Ce=Ce.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&ne<this._tDur||this._ts<0&&ne>0||!this._tDur&&!ne)&&xn(this._dp,this,this._start-this._delay)}return(this._tTime!==ne||!this._dur&&!ce||this._initted&&Math.abs(this._zTime)===K||!ne&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=ne),$a(this,ne,ce)),this},H.time=function(ne,ce){return arguments.length?this.totalTime(Math.min(this.totalDuration(),ne+Qe(this))%(this._dur+this._rDelay)||(ne?this._dur:0),ce):this._time},H.totalProgress=function(ne,ce){return arguments.length?this.totalTime(this.totalDuration()*ne,ce):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},H.progress=function(ne,ce){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?ne:1-ne)+Qe(this),ce):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},H.iteration=function(ne,ce){var Ce=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(ne-1)*Ce,ce):this._repeat?Et(this._tTime,Ce)+1:1},H.timeScale=function(ne,ce){if(!arguments.length)return this._rts===-K?0:this._rts;if(this._rts===ne)return this;var Ce=this.parent&&this._ts?wn(this.parent._time,this):this._tTime;return this._rts=+ne||0,this._ts=this._ps||ne===-K?0:this._rts,this.totalTime(ks(-Math.abs(this._delay),this._tDur,Ce),!1!==ce),$n(this),function(H){for(var ee=H.parent;ee&&ee.parent;)ee._dirty=1,ee.totalDuration(),ee=ee.parent;return H}(this)},H.paused=function(ne){return arguments.length?(this._ps!==ne&&(this._ps=ne,ne?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(mc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==K&&(this._tTime-=K)))),this):this._ps},H.startTime=function(ne){if(arguments.length){this._start=ne;var ce=this.parent||this._dp;return ce&&(ce._sort||!this.parent)&&xn(ce,this,ne-this._delay),this}return this._start},H.endTime=function(ne){return this._start+(Pt(ne)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},H.rawTime=function(ne){var ce=this.parent||this._dp;return ce?ne&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wn(ce.rawTime(ne),this):this._tTime:this._tTime},H.revert=function(ne){void 0===ne&&(ne=ei);var ce=M;return M=ne,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(ne),this.totalTime(-.01,ne.suppressEvents)),"nested"!==this.data&&!1!==ne.kill&&this.kill(),M=ce,this},H.globalTime=function(ne){for(var ce=this,Ce=arguments.length?ne:ce.rawTime();ce;)Ce=ce._start+Ce/(Math.abs(ce._ts)||1),ce=ce._dp;return!this.parent&&this._sat?this._sat.globalTime(ne):Ce},H.repeat=function(ne){return arguments.length?(this._repeat=ne===1/0?-2:ne,eu(this)):-2===this._repeat?1/0:this._repeat},H.repeatDelay=function(ne){if(arguments.length){var ce=this._time;return this._rDelay=ne,eu(this),ce?this.time(ce):this}return this._rDelay},H.yoyo=function(ne){return arguments.length?(this._yoyo=ne,this):this._yoyo},H.seek=function(ne,ce){return this.totalTime(Va(this,ne),Pt(ce))},H.restart=function(ne,ce){return this.play().totalTime(ne?-this._delay:0,Pt(ce))},H.play=function(ne,ce){return null!=ne&&this.seek(ne,ce),this.reversed(!1).paused(!1)},H.reverse=function(ne,ce){return null!=ne&&this.seek(ne||this.totalDuration(),ce),this.reversed(!0).paused(!1)},H.pause=function(ne,ce){return null!=ne&&this.seek(ne,ce),this.paused(!0)},H.resume=function(){return this.paused(!1)},H.reversed=function(ne){return arguments.length?(!!ne!==this.reversed()&&this.timeScale(-this._rts||(ne?-K:0)),this):this._rts<0},H.invalidate=function(){return this._initted=this._act=0,this._zTime=-K,this},H.isActive=function(){var Ce,ne=this.parent||this._dp,ce=this._start;return!(ne&&!(this._ts&&this._initted&&ne.isActive()&&(Ce=ne.rawTime(!0))>=ce&&Ce<this.endTime(!0)-K))},H.eventCallback=function(ne,ce,Ce){var Oe=this.vars;return arguments.length>1?(ce?(Oe[ne]=ce,Ce&&(Oe[ne+"Params"]=Ce),"onUpdate"===ne&&(this._onUpdate=ce)):delete Oe[ne],this):Oe[ne]},H.then=function(ne){var ce=this;return new Promise(function(Ce){var Oe=tt(ne)?ne:Xo,De=function(){var nt=ce.then;ce.then=null,tt(Oe)&&(Oe=Oe(ce))&&(Oe.then||Oe===ce)&&(ce.then=nt),Ce(Oe),ce.then=nt};ce._initted&&1===ce.totalProgress()&&ce._ts>=0||!ce._tTime&&ce._ts<0?De():ce._prom=De})},H.kill=function(){ko(this)},st}();ua(Uu.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-K,_prom:0,_ps:!1,_rts:1});var Wa=function(st){function H(ne,ce){var Ce;return void 0===ne&&(ne={}),(Ce=st.call(this,ne)||this).labels={},Ce.smoothChildTiming=!!ne.smoothChildTiming,Ce.autoRemoveChildren=!!ne.autoRemoveChildren,Ce._sort=Pt(ne.sortChildren),Tn&&xn(ne.parent||Tn,z(Ce),ce),ne.reversed&&Ce.reverse(),ne.paused&&Ce.paused(!0),ne.scrollTrigger&&ia(z(Ce),ne.scrollTrigger),Ce}T(H,st);var ee=H.prototype;return ee.to=function(ce,Ce,Oe){return Pc(0,arguments,this),this},ee.from=function(ce,Ce,Oe){return Pc(1,arguments,this),this},ee.fromTo=function(ce,Ce,Oe,De){return Pc(2,arguments,this),this},ee.set=function(ce,Ce,Oe){return Ce.duration=0,Ce.parent=this,Ci(Ce).repeatDelay||(Ce.repeat=0),Ce.immediateRender=!!Ce.immediateRender,new Qa(ce,Ce,Va(this,Oe),1),this},ee.call=function(ce,Ce,Oe){return xn(this,Qa.delayedCall(0,ce,Ce),Oe)},ee.staggerTo=function(ce,Ce,Oe,De,at,nt,ht){return Oe.duration=Ce,Oe.stagger=Oe.stagger||De,Oe.onComplete=nt,Oe.onCompleteParams=ht,Oe.parent=this,new Qa(ce,Oe,Va(this,at)),this},ee.staggerFrom=function(ce,Ce,Oe,De,at,nt,ht){return Oe.runBackwards=1,Ci(Oe).immediateRender=Pt(Oe.immediateRender),this.staggerTo(ce,Ce,Oe,De,at,nt,ht)},ee.staggerFromTo=function(ce,Ce,Oe,De,at,nt,ht,Xt){return De.startAt=Oe,Ci(De).immediateRender=Pt(De.immediateRender),this.staggerTo(ce,Ce,De,at,nt,ht,Xt)},ee.render=function(ce,Ce,Oe){var Cn,En,Vn,Nt,Gn,Lr,Ir,Qr,Or,yr,di,Mi,De=this._time,at=this._dirty?this.totalDuration():this._tDur,nt=this._dur,ht=ce<=0?0:Ei(ce),Xt=this._zTime<0!=ce<0&&(this._initted||!nt);if(this!==Tn&&ht>at&&ce>=0&&(ht=at),ht!==this._tTime||Oe||Xt){if(De!==this._time&&nt&&(ht+=this._time-De,ce+=this._time-De),Cn=ht,Or=this._start,Lr=!(Qr=this._ts),Xt&&(nt||(De=this._zTime),(ce||!Ce)&&(this._zTime=ce)),this._repeat){if(di=this._yoyo,Gn=nt+this._rDelay,this._repeat<-1&&ce<0)return this.totalTime(100*Gn+ce,Ce,Oe);if(Cn=Ei(ht%Gn),ht===at?(Nt=this._repeat,Cn=nt):((Nt=~~(ht/Gn))&&Nt===ht/Gn&&(Cn=nt,Nt--),Cn>nt&&(Cn=nt)),yr=Et(this._tTime,Gn),!De&&this._tTime&&yr!==Nt&&this._tTime-yr*Gn-this._dur<=0&&(yr=Nt),di&&1&Nt&&(Cn=nt-Cn,Mi=1),Nt!==yr&&!this._lock){var Ni=di&&1&yr,qr=Ni===(di&&1&Nt);if(Nt<yr&&(Ni=!Ni),De=Ni?0:ht%nt?nt:ht,this._lock=1,this.render(De||(Mi?0:Ei(Nt*Gn)),Ce,!nt)._lock=0,this._tTime=ht,!Ce&&this.parent&&co(this,"onRepeat"),this.vars.repeatRefresh&&!Mi&&(this.invalidate()._lock=1),De&&De!==this._time||Lr!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(nt=this._dur,at=this._tDur,qr&&(this._lock=2,this.render(De=Ni?nt:-1e-4,!0),this.vars.repeatRefresh&&!Mi&&this.invalidate()),this._lock=0,!this._ts&&!Lr)return this;La(this,Mi)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(Ir=function(H,ee,ne){var ce;if(ne>ee)for(ce=H._first;ce&&ce._start<=ne;){if("isPause"===ce.data&&ce._start>ee)return ce;ce=ce._next}else for(ce=H._last;ce&&ce._start>=ne;){if("isPause"===ce.data&&ce._start<ee)return ce;ce=ce._prev}}(this,Ei(De),Ei(Cn)),Ir&&(ht-=Cn-(Cn=Ir._start))),this._tTime=ht,this._time=Cn,this._act=!Qr,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=ce,De=0),!De&&Cn&&!Ce&&!Nt&&(co(this,"onStart"),this._tTime!==ht))return this;if(Cn>=De&&ce>=0)for(En=this._first;En;){if(Vn=En._next,(En._act||Cn>=En._start)&&En._ts&&Ir!==En){if(En.parent!==this)return this.render(ce,Ce,Oe);if(En.render(En._ts>0?(Cn-En._start)*En._ts:(En._dirty?En.totalDuration():En._tDur)+(Cn-En._start)*En._ts,Ce,Oe),Cn!==this._time||!this._ts&&!Lr){Ir=0,Vn&&(ht+=this._zTime=-K);break}}En=Vn}else{En=this._last;for(var Fa=ce<0?ce:Cn;En;){if(Vn=En._prev,(En._act||Fa<=En._end)&&En._ts&&Ir!==En){if(En.parent!==this)return this.render(ce,Ce,Oe);if(En.render(En._ts>0?(Fa-En._start)*En._ts:(En._dirty?En.totalDuration():En._tDur)+(Fa-En._start)*En._ts,Ce,Oe||M&&(En._initted||En._startAt)),Cn!==this._time||!this._ts&&!Lr){Ir=0,Vn&&(ht+=this._zTime=Fa?-K:K);break}}En=Vn}}if(Ir&&!Ce&&(this.pause(),Ir.render(Cn>=De?0:-K)._zTime=Cn>=De?1:-1,this._ts))return this._start=Or,$n(this),this.render(ce,Ce,Oe);this._onUpdate&&!Ce&&co(this,"onUpdate",!0),(ht===at&&this._tTime>=this.totalDuration()||!ht&&De)&&(Or===this._start||Math.abs(Qr)!==Math.abs(this._ts))&&(this._lock||((ce||!nt)&&(ht===at&&this._ts>0||!ht&&this._ts<0)&&ns(this,1),!Ce&&(!(ce<0)||De)&&(ht||De||!at)&&(co(this,ht===at&&ce>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(ht<at&&this.timeScale()>0)&&this._prom())))}return this},ee.add=function(ce,Ce){var Oe=this;if(_t(Ce)||(Ce=Va(this,Ce,ce)),!(ce instanceof Uu)){if(jt(ce))return ce.forEach(function(De){return Oe.add(De,Ce)}),this;if(Le(ce))return this.addLabel(ce,Ce);if(!tt(ce))return this;ce=Qa.delayedCall(0,ce)}return this!==ce?xn(this,ce,Ce):this},ee.getChildren=function(ce,Ce,Oe,De){void 0===ce&&(ce=!0),void 0===Ce&&(Ce=!0),void 0===Oe&&(Oe=!0),void 0===De&&(De=-Y);for(var at=[],nt=this._first;nt;)nt._start>=De&&(nt instanceof Qa?Ce&&at.push(nt):(Oe&&at.push(nt),ce&&at.push.apply(at,nt.getChildren(!0,Ce,Oe)))),nt=nt._next;return at},ee.getById=function(ce){for(var Ce=this.getChildren(1,1,1),Oe=Ce.length;Oe--;)if(Ce[Oe].vars.id===ce)return Ce[Oe]},ee.remove=function(ce){return Le(ce)?this.removeLabel(ce):tt(ce)?this.killTweensOf(ce):(Ds(this,ce),ce===this._recent&&(this._recent=this._last),ba(this))},ee.totalTime=function(ce,Ce){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ei(ka.time-(this._ts>0?ce/this._ts:(this.totalDuration()-ce)/-this._ts))),st.prototype.totalTime.call(this,ce,Ce),this._forcing=0,this):this._tTime},ee.addLabel=function(ce,Ce){return this.labels[ce]=Va(this,Ce),this},ee.removeLabel=function(ce){return delete this.labels[ce],this},ee.addPause=function(ce,Ce,Oe){var De=Qa.delayedCall(0,Ce||Oi,Oe);return De.data="isPause",this._hasPause=1,xn(this,De,Va(this,ce))},ee.removePause=function(ce){var Ce=this._first;for(ce=Va(this,ce);Ce;)Ce._start===ce&&"isPause"===Ce.data&&ns(Ce),Ce=Ce._next},ee.killTweensOf=function(ce,Ce,Oe){for(var De=this.getTweensOf(ce,Oe),at=De.length;at--;)mu!==De[at]&&De[at].kill(ce,Ce);return this},ee.getTweensOf=function(ce,Ce){for(var ht,Oe=[],De=Cs(ce),at=this._first,nt=_t(Ce);at;)at instanceof Qa?Gs(at._targets,De)&&(nt?(!mu||at._initted&&at._ts)&&at.globalTime(0)<=Ce&&at.globalTime(at.totalDuration())>Ce:!Ce||at.isActive())&&Oe.push(at):(ht=at.getTweensOf(De,Ce)).length&&Oe.push.apply(Oe,ht),at=at._next;return Oe},ee.tweenTo=function(ce,Ce){Ce=Ce||{};var En,Oe=this,De=Va(Oe,ce),nt=Ce.startAt,ht=Ce.onStart,Xt=Ce.onStartParams,Cn=Ce.immediateRender,Vn=Qa.to(Oe,ua({ease:Ce.ease||"none",lazy:!1,immediateRender:!1,time:De,overwrite:"auto",duration:Ce.duration||Math.abs((De-(nt&&"time"in nt?nt.time:Oe._time))/Oe.timeScale())||K,onStart:function(){if(Oe.pause(),!En){var Gn=Ce.duration||Math.abs((De-(nt&&"time"in nt?nt.time:Oe._time))/Oe.timeScale());Vn._dur!==Gn&&Wo(Vn,Gn,0,1).render(Vn._time,!0,!0),En=1}ht&&ht.apply(Vn,Xt||[])}},Ce));return Cn?Vn.render(0):Vn},ee.tweenFromTo=function(ce,Ce,Oe){return this.tweenTo(Ce,ua({startAt:{time:Va(this,ce)}},Oe))},ee.recent=function(){return this._recent},ee.nextLabel=function(ce){return void 0===ce&&(ce=this._time),Ii(this,Va(this,ce))},ee.previousLabel=function(ce){return void 0===ce&&(ce=this._time),Ii(this,Va(this,ce),1)},ee.currentLabel=function(ce){return arguments.length?this.seek(ce,!0):this.previousLabel(this._time+K)},ee.shiftChildren=function(ce,Ce,Oe){void 0===Oe&&(Oe=0);for(var nt,De=this._first,at=this.labels;De;)De._start>=Oe&&(De._start+=ce,De._end+=ce),De=De._next;if(Ce)for(nt in at)at[nt]>=Oe&&(at[nt]+=ce);return ba(this)},ee.invalidate=function(ce){var Ce=this._first;for(this._lock=0;Ce;)Ce.invalidate(ce),Ce=Ce._next;return st.prototype.invalidate.call(this,ce)},ee.clear=function(ce){void 0===ce&&(ce=!0);for(var Oe,Ce=this._first;Ce;)Oe=Ce._next,this.remove(Ce),Ce=Oe;return this._dp&&(this._time=this._tTime=this._pTime=0),ce&&(this.labels={}),ba(this)},ee.totalDuration=function(ce){var nt,ht,Xt,Ce=0,Oe=this,De=Oe._last,at=Y;if(arguments.length)return Oe.timeScale((Oe._repeat<0?Oe.duration():Oe.totalDuration())/(Oe.reversed()?-ce:ce));if(Oe._dirty){for(Xt=Oe.parent;De;)nt=De._prev,De._dirty&&De.totalDuration(),(ht=De._start)>at&&Oe._sort&&De._ts&&!Oe._lock?(Oe._lock=1,xn(Oe,De,ht-De._delay,1)._lock=0):at=ht,ht<0&&De._ts&&(Ce-=ht,(!Xt&&!Oe._dp||Xt&&Xt.smoothChildTiming)&&(Oe._start+=ht/Oe._ts,Oe._time-=ht,Oe._tTime-=ht),Oe.shiftChildren(-ht,!1,-1/0),at=0),De._end>Ce&&De._ts&&(Ce=De._end),De=nt;Wo(Oe,Oe===Tn&&Oe._time>Ce?Oe._time:Ce,1,1),Oe._dirty=0}return Oe._tDur},H.updateRoot=function(ce){if(Tn._ts&&($a(Tn,wn(ce,Tn)),fo=ka.frame),ka.frame>=_i){_i+=V.autoSleep||120;var Ce=Tn._first;if((!Ce||!Ce._ts)&&V.autoSleep&&ka._listeners.length<2){for(;Ce&&!Ce._ts;)Ce=Ce._next;Ce||ka.sleep()}}},H}(Uu);ua(Wa.prototype,{_lock:0,_hasPause:0,_forcing:0});var mu,Go,Ju=function(H,ee,ne,ce,Ce,Oe,De){var Xt,Cn,En,Vn,Nt,Gn,Lr,Ir,at=new rc(this._pt,H,ee,0,1,Ol,null,Ce),nt=0,ht=0;for(at.b=ne,at.e=ce,ne+="",(Lr=~(ce+="").indexOf("random("))&&(ce=mr(ce)),Oe&&(Oe(Ir=[ne,ce],H,ee),ne=Ir[0],ce=Ir[1]),Cn=ne.match(Rn)||[];Xt=Rn.exec(ce);)Vn=Xt[0],Nt=ce.substring(nt,Xt.index),En?En=(En+1)%5:"rgba("===Nt.substr(-5)&&(En=1),Vn!==Cn[ht++]&&(Gn=parseFloat(Cn[ht-1])||0,at._pt={_next:at._pt,p:Nt||1===ht?Nt:",",s:Gn,c:"="===Vn.charAt(1)?dr(Gn,Vn)-Gn:parseFloat(Vn)-Gn,m:En&&En<4?Math.round:0},nt=Rn.lastIndex);return at.c=nt<ce.length?ce.substring(nt,ce.length):"",at.fp=De,(Nr.test(ce)||Lr)&&(at.e=0),this._pt=at,at},Ml=function(H,ee,ne,ce,Ce,Oe,De,at,nt,ht){tt(ce)&&(ce=ce(Ce||0,H,Oe));var Vn,Xt=H[ee],Cn="get"!==ne?ne:tt(Xt)?nt?H[ee.indexOf("set")||!tt(H["get"+ee.substr(3)])?ee:"get"+ee.substr(3)](nt):H[ee]():Xt,En=tt(Xt)?nt?Jd:Rc:Qc;if(Le(ce)&&(~ce.indexOf("random(")&&(ce=mr(ce)),"="===ce.charAt(1)&&((Vn=dr(Cn,ce)+(Ia(Cn)||0))||0===Vn)&&(ce=Vn)),!ht||Cn!==ce||Go)return isNaN(Cn*ce)||""===ce?(!Xt&&!(ee in H)&&Pn(ee,ce),Ju.call(this,H,ee,Cn,ce,En,at||V.stringFilter,nt)):(Vn=new rc(this._pt,H,ee,+Cn||0,ce-(Cn||0),"boolean"==typeof Xt?gd:$l,0,En),nt&&(Vn.fp=nt),De&&Vn.modifier(De,this,H),this._pt=Vn)},vh=function(H,ee,ne,ce,Ce,Oe){var De,at,nt,ht;if(jr[H]&&!1!==(De=new jr[H]).init(Ce,De.rawVars?ee[H]:function(H,ee,ne,ce,Ce){if(tt(H)&&(H=bs(H,Ce,ee,ne,ce)),!yt(H)||H.style&&H.nodeType||jt(H)||Ht(H))return Le(H)?bs(H,Ce,ee,ne,ce):H;var De,Oe={};for(De in H)Oe[De]=bs(H[De],Ce,ee,ne,ce);return Oe}(ee[H],ce,Ce,Oe,ne),ne,ce,Oe)&&(ne._pt=at=new rc(ne._pt,Ce,H,0,1,De.render,De,0,De.priority),ne!==jo))for(nt=ne._ptLookup[ne._targets.indexOf(Ce)],ht=De._props.length;ht--;)nt[De._props[ht]]=at;return De},pd=function st(H,ee,ne){var yr,di,Mi,Ni,qr,Fa,ss,ds,Ss,Vc,Gc,qc,Jc,ce=H.vars,Ce=ce.ease,Oe=ce.startAt,De=ce.immediateRender,at=ce.lazy,nt=ce.onUpdate,ht=ce.runBackwards,Xt=ce.yoyoEase,Cn=ce.keyframes,En=ce.autoRevert,Vn=H._dur,Nt=H._startAt,Gn=H._targets,Lr=H.parent,Ir=Lr&&"nested"===Lr.data?Lr.vars.targets:Gn,Qr="auto"===H._overwrite&&!R,Or=H.timeline;if(Or&&(!Cn||!Ce)&&(Ce="none"),H._ease=_c(Ce,N.ease),H._yEase=Xt?kd(_c(!0===Xt?Ce:Xt,N.ease)):0,Xt&&H._yoyo&&!H._repeat&&(Xt=H._yEase,H._yEase=H._ease,H._ease=Xt),H._from=!Or&&!!ce.runBackwards,!Or||Cn&&!ce.stagger){if(qc=(ds=Gn[0]?Vs(Gn[0]).harness:0)&&ce[ds.prop],yr=so(ce,ra),Nt&&(Nt._zTime<0&&Nt.progress(1),ee<0&&ht&&De&&!En?Nt.render(-1,!0):Nt.revert(ht&&Vn?hr:Dr),Nt._lazy=0),Oe){if(ns(H._startAt=Qa.set(Gn,ua({data:"isStart",overwrite:!1,parent:Lr,immediateRender:!0,lazy:!Nt&&Pt(at),startAt:null,delay:0,onUpdate:nt&&function(){return co(H,"onUpdate")},stagger:0},Oe))),H._startAt._dp=0,H._startAt._sat=H,ee<0&&(M||!De&&!En)&&H._startAt.revert(hr),De&&Vn&&ee<=0&&ne<=0)return void(ee&&(H._zTime=ee))}else if(ht&&Vn&&!Nt)if(ee&&(De=!1),Mi=ua({overwrite:!1,data:"isFromStart",lazy:De&&!Nt&&Pt(at),immediateRender:De,stagger:0,parent:Lr},yr),qc&&(Mi[ds.prop]=qc),ns(H._startAt=Qa.set(Gn,Mi)),H._startAt._dp=0,H._startAt._sat=H,ee<0&&(M?H._startAt.revert(hr):H._startAt.render(-1,!0)),H._zTime=ee,De){if(!ee)return}else st(H._startAt,K,K);for(H._pt=H._ptCache=0,at=Vn&&Pt(at)||at&&!Vn,di=0;di<Gn.length;di++){if(ss=(qr=Gn[di])._gsap||gc(Gn)[di]._gsap,H._ptLookup[di]=Vc={},No[ss.id]&&Hi.length&&va(),Gc=Ir===Gn?di:Ir.indexOf(qr),ds&&!1!==(Ss=new ds).init(qr,qc||yr,H,Gc,Ir)&&(H._pt=Ni=new rc(H._pt,qr,Ss.name,0,1,Ss.render,Ss,0,Ss.priority),Ss._props.forEach(function(Ws){Vc[Ws]=Ni}),Ss.priority&&(Fa=1)),!ds||qc)for(Mi in yr)jr[Mi]&&(Ss=vh(Mi,yr,H,Gc,qr,Ir))?Ss.priority&&(Fa=1):Vc[Mi]=Ni=Ml.call(H,qr,Mi,"get",yr[Mi],Gc,Ir,0,ce.stringFilter);H._op&&H._op[di]&&H.kill(qr,H._op[di]),Qr&&H._pt&&(mu=H,Tn.killTweensOf(qr,Vc,H.globalTime(ee)),Jc=!H.parent,mu=0),H._pt&&at&&(No[ss.id]=1)}Fa&&vu(H),H._onInit&&H._onInit(H)}H._onUpdate=nt,H._initted=(!H._op||H._pt)&&!Jc,Cn&&ee<=0&&Or.render(Y,!0,!0)},fd=function(H,ee,ne,ce){var Oe,De,Ce=ee.ease||ce||"power1.inOut";if(jt(ee))De=ne[H]||(ne[H]=[]),ee.forEach(function(at,nt){return De.push({t:nt/(ee.length-1)*100,v:at,e:Ce})});else for(Oe in ee)De=ne[Oe]||(ne[Oe]=[]),"ease"===Oe||De.push({t:parseFloat(H),v:ee[Oe],e:Ce})},bs=function(H,ee,ne,ce,Ce){return tt(H)?H.call(ee,ne,ce,Ce):Le(H)&&~H.indexOf("random(")?mr(H):H},zh=tc+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_u={};Ta(zh+",id,stagger,delay,duration,paused,scrollTrigger",function(st){return _u[st]=1});var Qa=function(st){function H(ne,ce,Ce,Oe){var De;"number"==typeof ce&&(Ce.duration=ce,ce=Ce,Ce=null);var Or,yr,di,Mi,Ni,qr,Fa,ss,at=(De=st.call(this,Oe?ce:Ci(ce))||this).vars,nt=at.duration,ht=at.delay,Xt=at.immediateRender,Cn=at.stagger,En=at.overwrite,Vn=at.keyframes,Nt=at.defaults,Gn=at.scrollTrigger,Lr=at.yoyoEase,Ir=ce.parent||Tn,Qr=(jt(ne)||Ht(ne)?_t(ne[0]):"length"in ce)?[ne]:Cs(ne);if(De._targets=Qr.length?gc(Qr):gr("GSAP target "+ne+" not found. https://gsap.com",!V.nullTargetWarn)||[],De._ptLookup=[],De._overwrite=En,Vn||Cn||Gt(nt)||Gt(ht)){if(ce=De.vars,(Or=De.timeline=new Wa({data:"nested",defaults:Nt||{},targets:Ir&&"nested"===Ir.data?Ir.vars.targets:Qr})).kill(),Or.parent=Or._dp=z(De),Or._start=0,Cn||Gt(nt)||Gt(ht)){if(Mi=Qr.length,Fa=Cn&&Dl(Cn),yt(Cn))for(Ni in Cn)~zh.indexOf(Ni)&&(ss||(ss={}),ss[Ni]=Cn[Ni]);for(yr=0;yr<Mi;yr++)(di=so(ce,_u)).stagger=0,Lr&&(di.yoyoEase=Lr),ss&&Aa(di,ss),qr=Qr[yr],di.duration=+bs(nt,z(De),yr,qr,Qr),di.delay=(+bs(ht,z(De),yr,qr,Qr)||0)-De._delay,!Cn&&1===Mi&&di.delay&&(De._delay=ht=di.delay,De._start+=ht,di.delay=0),Or.to(qr,di,Fa?Fa(yr,qr,Qr):0),Or._ease=Co.none;Or.duration()?nt=ht=0:De.timeline=0}else if(Vn){Ci(ua(Or.vars.defaults,{ease:"none"})),Or._ease=_c(Vn.ease||ce.ease||"none");var Ss,Vc,Gc,ds=0;if(jt(Vn))Vn.forEach(function(qc){return Or.to(Qr,qc,">")}),Or.duration();else{for(Ni in di={},Vn)"ease"===Ni||"easeEach"===Ni||fd(Ni,Vn[Ni],di,Vn.easeEach);for(Ni in di)for(Ss=di[Ni].sort(function(qc,Jc){return qc.t-Jc.t}),ds=0,yr=0;yr<Ss.length;yr++)(Gc={ease:(Vc=Ss[yr]).e,duration:(Vc.t-(yr?Ss[yr-1].t:0))/100*nt})[Ni]=Vc.v,Or.to(Qr,Gc,ds),ds+=Gc.duration;Or.duration()<nt&&Or.to({},{duration:nt-Or.duration()})}}nt||De.duration(nt=Or.duration())}else De.timeline=0;return!0===En&&!R&&(mu=z(De),Tn.killTweensOf(Qr),mu=0),xn(Ir,z(De),Ce),ce.reversed&&De.reverse(),ce.paused&&De.paused(!0),(Xt||!nt&&!Vn&&De._start===Ei(Ir._time)&&Pt(Xt)&&en(z(De))&&"nested"!==Ir.data)&&(De._tTime=-K,De.render(Math.max(0,-ht)||0)),Gn&&ia(z(De),Gn),De}T(H,st);var ee=H.prototype;return ee.render=function(ce,Ce,Oe){var Cn,En,Vn,Nt,Gn,Lr,Ir,Qr,Or,De=this._time,at=this._tDur,nt=this._dur,ht=ce<0,Xt=ce>at-K&&!ht?at:ce<K?0:ce;if(nt){if(Xt!==this._tTime||!ce||Oe||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==ht){if(Cn=Xt,Qr=this.timeline,this._repeat){if(Nt=nt+this._rDelay,this._repeat<-1&&ht)return this.totalTime(100*Nt+ce,Ce,Oe);if(Cn=Ei(Xt%Nt),Xt===at?(Vn=this._repeat,Cn=nt):((Vn=~~(Xt/Nt))&&Vn===Ei(Xt/Nt)&&(Cn=nt,Vn--),Cn>nt&&(Cn=nt)),(Lr=this._yoyo&&1&Vn)&&(Or=this._yEase,Cn=nt-Cn),Gn=Et(this._tTime,Nt),Cn===De&&!Oe&&this._initted&&Vn===Gn)return this._tTime=Xt,this;Vn!==Gn&&(Qr&&this._yEase&&La(Qr,Lr),this.vars.repeatRefresh&&!Lr&&!this._lock&&this._time!==Nt&&this._initted&&(this._lock=Oe=1,this.render(Ei(Nt*Vn),!0).invalidate()._lock=0))}if(!this._initted){if(oa(this,ht?ce:Cn,Oe,Ce,Xt))return this._tTime=0,this;if(!(De===this._time||Oe&&this.vars.repeatRefresh&&Vn!==Gn))return this;if(nt!==this._dur)return this.render(ce,Ce,Oe)}if(this._tTime=Xt,this._time=Cn,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=Ir=(Or||this._ease)(Cn/nt),this._from&&(this.ratio=Ir=1-Ir),Cn&&!De&&!Ce&&!Vn&&(co(this,"onStart"),this._tTime!==Xt))return this;for(En=this._pt;En;)En.r(Ir,En.d),En=En._next;Qr&&Qr.render(ce<0?ce:Qr._dur*Qr._ease(Cn/this._dur),Ce,Oe)||this._startAt&&(this._zTime=ce),this._onUpdate&&!Ce&&(ht&&Kt(this,ce,0,Oe),co(this,"onUpdate")),this._repeat&&Vn!==Gn&&this.vars.onRepeat&&!Ce&&this.parent&&co(this,"onRepeat"),(Xt===this._tDur||!Xt)&&this._tTime===Xt&&(ht&&!this._onUpdate&&Kt(this,ce,0,!0),(ce||!nt)&&(Xt===this._tDur&&this._ts>0||!Xt&&this._ts<0)&&ns(this,1),!Ce&&(!ht||De)&&(Xt||De||Lr)&&(co(this,Xt===at?"onComplete":"onReverseComplete",!0),this._prom&&!(Xt<at&&this.timeScale()>0)&&this._prom()))}}else!function(H,ee,ne,ce){var nt,ht,Xt,Ce=H.ratio,Oe=ee<0||!ee&&(!H._start&&ys(H)&&(H._initted||!jc(H))||(H._ts<0||H._dp._ts<0)&&!jc(H))?0:1,De=H._rDelay,at=0;if(De&&H._repeat&&(at=ks(0,H._tDur,ee),ht=Et(at,De),H._yoyo&&1&ht&&(Oe=1-Oe),ht!==Et(H._tTime,De)&&(Ce=1-Oe,H.vars.repeatRefresh&&H._initted&&H.invalidate())),Oe!==Ce||M||ce||H._zTime===K||!ee&&H._zTime){if(!H._initted&&oa(H,ee,ce,ne,at))return;for(Xt=H._zTime,H._zTime=ee||(ne?K:0),ne||(ne=ee&&!Xt),H.ratio=Oe,H._from&&(Oe=1-Oe),H._time=0,H._tTime=at,nt=H._pt;nt;)nt.r(Oe,nt.d),nt=nt._next;ee<0&&Kt(H,ee,0,!0),H._onUpdate&&!ne&&co(H,"onUpdate"),at&&H._repeat&&!ne&&H.parent&&co(H,"onRepeat"),(ee>=H._tDur||ee<0)&&H.ratio===Oe&&(Oe&&ns(H,1),!ne&&!M&&(co(H,Oe?"onComplete":"onReverseComplete",!0),H._prom&&H._prom()))}else H._zTime||(H._zTime=ee)}(this,ce,Ce,Oe);return this},ee.targets=function(){return this._targets},ee.invalidate=function(ce){return(!ce||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(ce),st.prototype.invalidate.call(this,ce)},ee.resetTo=function(ce,Ce,Oe,De,at){os||ka.wake(),this._ts||this.play();var nt=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||pd(this,nt),function(H,ee,ne,ce,Ce,Oe,De,at){var ht,Xt,Cn,En,nt=(H._pt&&H._ptCache||(H._ptCache={}))[ee];if(!nt)for(nt=H._ptCache[ee]=[],Cn=H._ptLookup,En=H._targets.length;En--;){if((ht=Cn[En][ee])&&ht.d&&ht.d._pt)for(ht=ht.d._pt;ht&&ht.p!==ee&&ht.fp!==ee;)ht=ht._next;if(!ht)return Go=1,H.vars[ee]="+=0",pd(H,De),Go=0,at?gr(ee+" not eligible for reset"):1;nt.push(ht)}for(En=nt.length;En--;)(ht=(Xt=nt[En])._pt||Xt).s=!ce&&0!==ce||Ce?ht.s+(ce||0)+Oe*ht.c:ce,ht.c=ne-ht.s,Xt.e&&(Xt.e=kr(ne)+Ia(Xt.e)),Xt.b&&(Xt.b=ht.s+Ia(Xt.b))}(this,ce,Ce,Oe,De,this._ease(nt/this._dur),nt,at)?this.resetTo(ce,Ce,Oe,De,1):(Ti(this,0),this.parent||Ns(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},ee.kill=function(ce,Ce){if(void 0===Ce&&(Ce="all"),!(ce||Ce&&"all"!==Ce))return this._lazy=this._pt=0,this.parent?ko(this):this;if(this.timeline){var Oe=this.timeline.totalDuration();return this.timeline.killTweensOf(ce,Ce,mu&&!0!==mu.vars.overwrite)._first||ko(this),this.parent&&Oe!==this.timeline.totalDuration()&&Wo(this,this._dur*this.timeline._tDur/Oe,0,1),this}var Xt,Cn,En,Vn,Nt,Gn,Lr,De=this._targets,at=ce?Cs(ce):De,nt=this._ptLookup,ht=this._pt;if((!Ce||"all"===Ce)&&function(H,ee){for(var ne=H.length,ce=ne===ee.length;ce&&ne--&&H[ne]===ee[ne];);return ne<0}(De,at))return"all"===Ce&&(this._pt=0),ko(this);for(Xt=this._op=this._op||[],"all"!==Ce&&(Le(Ce)&&(Nt={},Ta(Ce,function(Ir){return Nt[Ir]=1}),Ce=Nt),Ce=function(H,ee){var Ce,Oe,De,at,ne=H[0]?Vs(H[0]).harness:0,ce=ne&&ne.aliases;if(!ce)return ee;for(Oe in Ce=Aa({},ee),ce)if(Oe in Ce)for(De=(at=ce[Oe].split(",")).length;De--;)Ce[at[De]]=Ce[Oe];return Ce}(De,Ce)),Lr=De.length;Lr--;)if(~at.indexOf(De[Lr]))for(Nt in Cn=nt[Lr],"all"===Ce?(Xt[Lr]=Ce,Vn=Cn,En={}):(En=Xt[Lr]=Xt[Lr]||{},Vn=Ce),Vn)(Gn=Cn&&Cn[Nt])&&((!("kill"in Gn.d)||!0===Gn.d.kill(Nt))&&Ds(this,Gn,"_pt"),delete Cn[Nt]),"all"!==En&&(En[Nt]=1);return this._initted&&!this._pt&&ht&&ko(this),this},H.to=function(ce,Ce){return new H(ce,Ce,arguments[2])},H.from=function(ce,Ce){return Pc(1,arguments)},H.delayedCall=function(ce,Ce,Oe,De){return new H(Ce,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:ce,onComplete:Ce,onReverseComplete:Ce,onCompleteParams:Oe,onReverseCompleteParams:Oe,callbackScope:De})},H.fromTo=function(ce,Ce,Oe){return Pc(2,arguments)},H.set=function(ce,Ce){return Ce.duration=0,Ce.repeatDelay||(Ce.repeat=0),new H(ce,Ce)},H.killTweensOf=function(ce,Ce,Oe){return Tn.killTweensOf(ce,Ce,Oe)},H}(Uu);ua(Qa.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ta("staggerTo,staggerFrom,staggerFromTo",function(st){Qa[st]=function(){var H=new Wa,ee=cl.call(arguments,0);return ee.splice("staggerFromTo"===st?5:4,0,0),H[st].apply(H,ee)}});var Qc=function(H,ee,ne){return H[ee]=ne},Rc=function(H,ee,ne){return H[ee](ne)},Jd=function(H,ee,ne,ce){return H[ee](ce.fp,ne)},Tc=function(H,ee,ne){return H.setAttribute(ee,ne)},Mr=function(H,ee){return tt(H[ee])?Rc:Bt(H[ee])&&H.setAttribute?Tc:Qc},$l=function(H,ee){return ee.set(ee.t,ee.p,Math.round(1e6*(ee.s+ee.c*H))/1e6,ee)},gd=function(H,ee){return ee.set(ee.t,ee.p,!!(ee.s+ee.c*H),ee)},Ol=function(H,ee){var ne=ee._pt,ce="";if(!H&&ee.b)ce=ee.b;else if(1===H&&ee.e)ce=ee.e;else{for(;ne;)ce=ne.p+(ne.m?ne.m(ne.s+ne.c*H):Math.round(1e4*(ne.s+ne.c*H))/1e4)+ce,ne=ne._next;ce+=ee.c}ee.set(ee.t,ee.p,ce,ee)},Xp=function(H,ee){for(var ne=ee._pt;ne;)ne.r(H,ne.d),ne=ne._next},yu=function(H,ee,ne,ce){for(var Oe,Ce=this._pt;Ce;)Oe=Ce._next,Ce.p===ce&&Ce.modifier(H,ee,ne),Ce=Oe},Vl=function(H){for(var ne,ce,ee=this._pt;ee;)ce=ee._next,ee.p===H&&!ee.op||ee.op===H?Ds(this,ee,"_pt"):ee.dep||(ne=1),ee=ce;return!ne},Xc=function(H,ee,ne,ce){ce.mSet(H,ee,ce.m.call(ce.tween,ne,ce.mt),ce)},vu=function(H){for(var ne,ce,Ce,Oe,ee=H._pt;ee;){for(ne=ee._next,ce=Ce;ce&&ce.pr>ee.pr;)ce=ce._next;(ee._prev=ce?ce._prev:Oe)?ee._prev._next=ee:Ce=ee,(ee._next=ce)?ce._prev=ee:Oe=ee,ee=ne}H._pt=Ce},rc=function(){function st(ee,ne,ce,Ce,Oe,De,at,nt,ht){this.t=ne,this.s=Ce,this.c=Oe,this.p=ce,this.r=De||$l,this.d=at||this,this.set=nt||Qc,this.pr=ht||0,this._next=ee,ee&&(ee._prev=this)}return st.prototype.modifier=function(ne,ce,Ce){this.mSet=this.mSet||this.set,this.set=Xc,this.m=ne,this.mt=Ce,this.tween=ce},st}();Ta(tc+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(st){return ra[st]=1}),qt.TweenMax=qt.TweenLite=Qa,qt.TimelineLite=qt.TimelineMax=Wa,Tn=new Wa({sortChildren:!1,defaults:N,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),V.stringFilter=ls;var Gl=[],kl={},Fd=[],ic=0,Ac=0,oc=function(H){return(kl[H]||Fd).map(function(ee){return ee()})},Pl=function(){var H=Date.now(),ee=[];H-ic>2&&(oc("matchMediaInit"),Gl.forEach(function(ne){var Oe,De,at,nt,ce=ne.queries,Ce=ne.conditions;for(De in ce)(Oe=Nn.matchMedia(ce[De]).matches)&&(at=1),Oe!==Ce[De]&&(Ce[De]=Oe,nt=1);nt&&(ne.revert(),at&&ee.push(ne))}),oc("matchMediaRevert"),ee.forEach(function(ne){return ne.onMatch(ne,function(ce){return ne.add(null,ce)})}),ic=H,oc("matchMedia"))},Ch=function(){function st(ee,ne){this.selector=ne&&Il(ne),this.data=[],this._r=[],this.isReverted=!1,this.id=Ac++,ee&&this.add(ee)}var H=st.prototype;return H.add=function(ne,ce,Ce){tt(ne)&&(Ce=ce,ce=ne,ne=tt);var Oe=this,De=function(){var Xt,nt=G,ht=Oe.selector;return nt&&nt!==Oe&&nt.data.push(Oe),Ce&&(Oe.selector=Il(Ce)),G=Oe,Xt=ce.apply(Oe,arguments),tt(Xt)&&Oe._r.push(Xt),G=nt,Oe.selector=ht,Oe.isReverted=!1,Xt};return Oe.last=De,ne===tt?De(Oe,function(at){return Oe.add(null,at)}):ne?Oe[ne]=De:De},H.ignore=function(ne){var ce=G;G=null,ne(this),G=ce},H.getTweens=function(){var ne=[];return this.data.forEach(function(ce){return ce instanceof st?ne.push.apply(ne,ce.getTweens()):ce instanceof Qa&&!(ce.parent&&"nested"===ce.parent.data)&&ne.push(ce)}),ne},H.clear=function(){this._r.length=this.data.length=0},H.kill=function(ne,ce){var Ce=this;if(ne?function(){for(var nt,De=Ce.getTweens(),at=Ce.data.length;at--;)"isFlip"===(nt=Ce.data[at]).data&&(nt.revert(),nt.getChildren(!0,!0,!1).forEach(function(ht){return De.splice(De.indexOf(ht),1)}));for(De.map(function(ht){return{g:ht._dur||ht._delay||ht._sat&&!ht._sat.vars.immediateRender?ht.globalTime(0):-1/0,t:ht}}).sort(function(ht,Xt){return Xt.g-ht.g||-1/0}).forEach(function(ht){return ht.t.revert(ne)}),at=Ce.data.length;at--;)(nt=Ce.data[at])instanceof Wa?"nested"!==nt.data&&(nt.scrollTrigger&&nt.scrollTrigger.revert(),nt.kill()):!(nt instanceof Qa)&&nt.revert&&nt.revert(ne);Ce._r.forEach(function(ht){return ht(ne,Ce)}),Ce.isReverted=!0}():this.data.forEach(function(De){return De.kill&&De.kill()}),this.clear(),ce)for(var Oe=Gl.length;Oe--;)Gl[Oe].id===this.id&&Gl.splice(Oe,1)},H.revert=function(ne){this.kill(ne||{})},st}(),Es=function(){function st(ee){this.contexts=[],this.scope=ee,G&&G.data.push(this)}var H=st.prototype;return H.add=function(ne,ce,Ce){yt(ne)||(ne={matches:ne});var at,nt,ht,Oe=new Ch(0,Ce||this.scope),De=Oe.conditions={};for(nt in G&&!Oe.selector&&(Oe.selector=G.selector),this.contexts.push(Oe),ce=Oe.add("onMatch",ce),Oe.queries=ne,ne)"all"===nt?ht=1:(at=Nn.matchMedia(ne[nt]))&&(Gl.indexOf(Oe)<0&&Gl.push(Oe),(De[nt]=at.matches)&&(ht=1),at.addListener?at.addListener(Pl):at.addEventListener("change",Pl));return ht&&ce(Oe,function(Xt){return Oe.add(null,Xt)}),this},H.revert=function(ne){this.kill(ne||{})},H.kill=function(ne){this.contexts.forEach(function(ce){return ce.kill(ne,!0)})},st}(),md={registerPlugin:function(){for(var H=arguments.length,ee=new Array(H),ne=0;ne<H;ne++)ee[ne]=arguments[ne];ee.forEach(function(ce){return is(ce)})},timeline:function(H){return new Wa(H)},getTweensOf:function(H,ee){return Tn.getTweensOf(H,ee)},getProperty:function(H,ee,ne,ce){Le(H)&&(H=Cs(H)[0]);var Ce=Vs(H||{}).get,Oe=ne?Xo:ca;return"native"===ne&&(ne=""),H&&(ee?Oe((jr[ee]&&jr[ee].get||Ce)(H,ee,ne,ce)):function(De,at,nt){return Oe((jr[De]&&jr[De].get||Ce)(H,De,at,nt))})},quickSetter:function(H,ee,ne){if((H=Cs(H)).length>1){var ce=H.map(function(ht){return _r.quickSetter(ht,ee,ne)}),Ce=ce.length;return function(ht){for(var Xt=Ce;Xt--;)ce[Xt](ht)}}var Oe=jr[ee],De=Vs(H=H[0]||{}),at=De.harness&&(De.harness.aliases||{})[ee]||ee,nt=Oe?function(ht){var Xt=new Oe;jo._pt=0,Xt.init(H,ne?ht+ne:ht,jo,0,[H]),Xt.render(1,Xt),jo._pt&&Xp(1,jo)}:De.set(H,at);return Oe?nt:function(ht){return nt(H,at,ne?ht+ne:ht,De,1)}},quickTo:function(H,ee,ne){var ce,Ce=_r.to(H,Aa(((ce={})[ee]="+=0.1",ce.paused=!0,ce),ne||{})),Oe=function(at,nt,ht){return Ce.resetTo(ee,at,nt,ht)};return Oe.tween=Ce,Oe},isTweening:function(H){return Tn.getTweensOf(H,!0).length>0},defaults:function(H){return H&&H.ease&&(H.ease=_c(H.ease,N.ease)),oo(N,H||{})},config:function(H){return oo(V,H||{})},registerEffect:function(H){var ee=H.name,ne=H.effect,Ce=H.defaults,Oe=H.extendTimeline;(H.plugins||"").split(",").forEach(function(De){return De&&!jr[De]&&!qt[De]&&gr(ee+" effect requires "+De+" plugin.")}),Do[ee]=function(De,at,nt){return ne(Cs(De),ua(at||{},Ce),nt)},Oe&&(Wa.prototype[ee]=function(De,at,nt){return this.add(Do[ee](De,yt(at)?at:(nt=at)&&{},this),nt)})},registerEase:function(H,ee){Co[H]=_c(ee)},parseEase:function(H,ee){return arguments.length?_c(H,ee):Co},getById:function(H){return Tn.getById(H)},exportRoot:function(H,ee){void 0===H&&(H={});var ce,Ce,ne=new Wa(H);for(ne.smoothChildTiming=Pt(H.smoothChildTiming),Tn.remove(ne),ne._dp=0,ne._time=ne._tTime=Tn._time,ce=Tn._first;ce;)Ce=ce._next,(ee||!(!ce._dur&&ce instanceof Qa&&ce.vars.onComplete===ce._targets[0]))&&xn(ne,ce,ce._start-ce._delay),ce=Ce;return xn(Tn,ne,0),ne},context:function(H,ee){return H?new Ch(H,ee):G},matchMedia:function(H){return new Es(H)},matchMediaRefresh:function(){return Gl.forEach(function(H){var ne,ce,ee=H.conditions;for(ce in ee)ee[ce]&&(ee[ce]=!1,ne=1);ne&&H.revert()})||Pl()},addEventListener:function(H,ee){var ne=kl[H]||(kl[H]=[]);~ne.indexOf(ee)||ne.push(ee)},removeEventListener:function(H,ee){var ne=kl[H],ce=ne&&ne.indexOf(ee);ce>=0&&ne.splice(ce,1)},utils:{wrap:function st(H,ee,ne){var ce=ee-H;return jt(H)?ut(H,st(0,H.length),ee):rs(ne,function(Ce){return(ce+(Ce-H)%ce)%ce+H})},wrapYoyo:function st(H,ee,ne){var ce=ee-H,Ce=2*ce;return jt(H)?ut(H,st(0,H.length-1),ee):rs(ne,function(Oe){return H+((Oe=(Ce+(Oe-H)%Ce)%Ce||0)>ce?Ce-Oe:Oe)})},distribute:Dl,random:Ga,snap:Zo,normalize:function(H,ee,ne){return pr(H,ee,0,1,ne)},getUnit:Ia,clamp:function(H,ee,ne){return rs(ne,function(ce){return ks(H,ee,ce)})},splitColor:$s,toArray:Cs,selector:Il,mapRange:pr,pipe:function(){for(var H=arguments.length,ee=new Array(H),ne=0;ne<H;ne++)ee[ne]=arguments[ne];return function(ce){return ee.reduce(function(Ce,Oe){return Oe(Ce)},ce)}},unitize:function(H,ee){return function(ne){return H(parseFloat(ne))+(ee||Ia(ne))}},interpolate:function st(H,ee,ne,ce){var Ce=isNaN(H+ee)?0:function(En){return(1-En)*H+En*ee};if(!Ce){var at,nt,ht,Xt,Cn,Oe=Le(H),De={};if(!0===ne&&(ce=1)&&(ne=null),Oe)H={p:H},ee={p:ee};else if(jt(H)&&!jt(ee)){for(ht=[],Cn=(Xt=H.length)-2,nt=1;nt<Xt;nt++)ht.push(st(H[nt-1],H[nt]));Xt--,Ce=function(Vn){Vn*=Xt;var Nt=Math.min(Cn,~~Vn);return ht[Nt](Vn-Nt)},ne=ee}else ce||(H=Aa(jt(H)?[]:{},H));if(!ht){for(at in ee)Ml.call(De,H,at,"get",ee[at]);Ce=function(Vn){return Xp(Vn,De)||(Oe?H.p:H)}}}return rs(ne,Ce)},shuffle:jl},install:bn,effects:Do,ticker:ka,updateRoot:Wa.updateRoot,plugins:jr,globalTimeline:Tn,core:{PropTween:rc,globals:ui,Tween:Qa,Timeline:Wa,Animation:Uu,getCache:Vs,_removeLinkedListItem:Ds,reverting:function(){return M},context:function(H){return H&&G&&(G.data.push(H),H._ctx=G),G},suppressOverwrites:function(H){return R=H}}};Ta("to,from,fromTo,delayedCall,set,killTweensOf",function(st){return md[st]=Qa[st]}),ka.add(Wa.updateRoot),jo=md.to({},{duration:0});var rr=function(H,ee){for(var ne=H._pt;ne&&ne.p!==ee&&ne.op!==ee&&ne.fp!==ee;)ne=ne._next;return ne},$t=function(H,ee){return{name:H,rawVars:1,init:function(ce,Ce,Oe){Oe._onInit=function(De){var at,nt;if(Le(Ce)&&(at={},Ta(Ce,function(ht){return at[ht]=1}),Ce=at),ee){for(nt in at={},Ce)at[nt]=ee(Ce[nt]);Ce=at}!function(H,ee){var ce,Ce,Oe,ne=H._targets;for(ce in ee)for(Ce=ne.length;Ce--;)(Oe=H._ptLookup[Ce][ce])&&(Oe=Oe.d)&&(Oe._pt&&(Oe=rr(Oe,ce)),Oe&&Oe.modifier&&Oe.modifier(ee[ce],H,ne[Ce],ce))}(De,Ce)}}}},_r=md.registerPlugin({name:"attr",init:function(H,ee,ne,ce,Ce){var Oe,De,at;for(Oe in this.tween=ne,ee)at=H.getAttribute(Oe)||"",(De=this.add(H,"setAttribute",(at||0)+"",ee[Oe],ce,Ce,0,0,Oe)).op=Oe,De.b=at,this._props.push(Oe)},render:function(H,ee){for(var ne=ee._pt;ne;)M?ne.set(ne.t,ne.p,ne.b,ne):ne.r(H,ne.d),ne=ne._next}},{name:"endArray",init:function(H,ee){for(var ne=ee.length;ne--;)this.add(H,ne,H[ne]||0,ee[ne],0,0,0,0,0,1)}},$t("roundProps",dl),$t("modifiers"),$t("snap",Zo))||md;Qa.version=Wa.version=_r.version="3.12.5",Ut=1,vt()&&mc();var oy,$h,Jp,ug,bh,Eh,nu,go,xi=Co.Power0,or=Co.Power1,qo=Co.Power2,ma=Co.Power3,_d=Co.Power4,yd=Co.Linear,Af=Co.Quad,vd=Co.Cubic,Zp=Co.Quart,Ys=Co.Quint,qm=Co.Strong,gp=Co.Elastic,If=Co.Back,ry=Co.SteppedEase,iy=Co.Bounce,jh=Co.Sine,ql=Co.Expo,To=Co.Circ,eh={},Hd=180/Math.PI,Vh=Math.PI/180,th=Math.atan2,mp=1e8,tf=/([A-Z])/g,Mf=/(left|right|width|margin|padding|x)/i,Zg=/[\s,\(]\S/,no={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Cd=function(H,ee){return ee.set(ee.t,ee.p,Math.round(1e4*(ee.s+ee.c*H))/1e4+ee.u,ee)},dg=function(H,ee){return ee.set(ee.t,ee.p,1===H?ee.e:Math.round(1e4*(ee.s+ee.c*H))/1e4+ee.u,ee)},Ud=function(H,ee){return ee.set(ee.t,ee.p,H?Math.round(1e4*(ee.s+ee.c*H))/1e4+ee.u:ee.b,ee)},nf=function(H,ee){var ne=ee.s+ee.c*H;ee.set(ee.t,ee.p,~~(ne+(ne<0?-.5:.5))+ee.u,ee)},It=function(H,ee){return ee.set(ee.t,ee.p,H?ee.e:ee.b,ee)},nh=function(H,ee){return ee.set(ee.t,ee.p,1!==H?ee.b:ee.e,ee)},ay=function(H,ee,ne){return H.style[ee]=ne},j1=function(H,ee,ne){return H.style.setProperty(ee,ne)},_p=function(H,ee,ne){return H._gsap[ee]=ne},Wr=function(H,ee,ne){return H._gsap.scaleX=H._gsap.scaleY=ne},Jg=function(H,ee,ne,ce,Ce){var Oe=H._gsap;Oe.scaleX=Oe.scaleY=ne,Oe.renderTransform(Ce,Oe)},$c=function(H,ee,ne,ce,Ce){var Oe=H._gsap;Oe[ee]=ne,Oe.renderTransform(Ce,Oe)},Ls="transform",pl=Ls+"Origin",hg=function st(H,ee){var ne=this,ce=this.target,Ce=ce.style,Oe=ce._gsap;if(H in eh&&Ce){if(this.tfm=this.tfm||{},"transform"===H)return no.transform.split(",").forEach(function(De){return st.call(ne,De,ee)});if(~(H=no[H]||H).indexOf(",")?H.split(",").forEach(function(De){return ne.tfm[De]=xc(ce,De)}):this.tfm[H]=Oe.x?Oe[H]:xc(ce,H),H===pl&&(this.tfm.zOrigin=Oe.zOrigin),this.props.indexOf(Ls)>=0)return;Oe.svg&&(this.svgo=ce.getAttribute("data-svg-origin"),this.props.push(pl,ee,"")),H=Ls}(Ce||ee)&&this.props.push(H,ee,Ce[H])},bd=function(H){H.translate&&(H.removeProperty("translate"),H.removeProperty("scale"),H.removeProperty("rotate"))},Gh=function(){var Ce,Oe,H=this.props,ee=this.target,ne=ee.style,ce=ee._gsap;for(Ce=0;Ce<H.length;Ce+=3)H[Ce+1]?ee[H[Ce]]=H[Ce+2]:H[Ce+2]?ne[H[Ce]]=H[Ce+2]:ne.removeProperty("--"===H[Ce].substr(0,2)?H[Ce]:H[Ce].replace(tf,"-$1").toLowerCase());if(this.tfm){for(Oe in this.tfm)ce[Oe]=this.tfm[Oe];ce.svg&&(ce.renderTransform(),ee.setAttribute("data-svg-origin",this.svgo||"")),(!(Ce=nu())||!Ce.isStart)&&!ne[Ls]&&(bd(ne),ce.zOrigin&&ne[pl]&&(ne[pl]+=" "+ce.zOrigin+"px",ce.zOrigin=0,ce.renderTransform()),ce.uncache=1)}},rf=function(H,ee){var ne={target:H,props:[],revert:Gh,save:hg};return H._gsap||_r.core.getCache(H),ee&&ee.split(",").forEach(function(ce){return ne.save(ce)}),ne},Oa=function(H,ee){var ne=$h.createElementNS?$h.createElementNS((ee||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),H):$h.createElement(H);return ne&&ne.style?ne:$h.createElement(H)},Ed=function st(H,ee,ne){var ce=getComputedStyle(H);return ce[ee]||ce.getPropertyValue(ee.replace(tf,"-$1").toLowerCase())||ce.getPropertyValue(ee)||!ne&&st(H,yp(ee)||ee,1)||""},em="O,Moz,ms,Ms,Webkit".split(","),yp=function(H,ee,ne){var Ce=(ee||bh).style,Oe=5;if(H in Ce&&!ne)return H;for(H=H.charAt(0).toUpperCase()+H.substr(1);Oe--&&!(em[Oe]+H in Ce););return Oe<0?null:(3===Oe?"ms":Oe>=0?em[Oe]:"")+H},tm=function(){typeof window<"u"&&window.document&&(oy=window,Jp=($h=oy.document).documentElement,bh=Oa("div")||{style:{}},Oa("div"),Ls=yp(Ls),pl=Ls+"Origin",bh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",go=!!yp("perspective"),nu=_r.core.reverting,ug=1)},Sh=function st(H){var Oe,ee=Oa("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),ne=this.parentNode,ce=this.nextSibling,Ce=this.style.cssText;if(Jp.appendChild(ee),ee.appendChild(this),this.style.display="block",H)try{Oe=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=st}catch{}else this._gsapBBox&&(Oe=this._gsapBBox());return ne&&(ce?ne.insertBefore(this,ce):ne.appendChild(this)),Jp.removeChild(ee),this.style.cssText=Ce,Oe},pg=function(H,ee){for(var ne=ee.length;ne--;)if(H.hasAttribute(ee[ne]))return H.getAttribute(ee[ne])},_a=function(H){var ee;try{ee=H.getBBox()}catch{ee=Sh.call(H,!0)}return ee&&(ee.width||ee.height)||H.getBBox===Sh||(ee=Sh.call(H,!0)),!ee||ee.width||ee.x||ee.y?ee:{x:+pg(H,["x","cx","x1"])||0,y:+pg(H,["y","cy","y1"])||0,width:0,height:0}},nm=function(H){return!(!H.getCTM||H.parentNode&&!H.ownerSVGElement||!_a(H))},Bd=function(H,ee){if(ee){var ce,ne=H.style;ee in eh&&ee!==pl&&(ee=Ls),ne.removeProperty?(("ms"===(ce=ee.substr(0,2))||"webkit"===ee.substr(0,6))&&(ee="-"+ee),ne.removeProperty("--"===ce?ee:ee.replace(tf,"-$1").toLowerCase())):ne.removeAttribute(ee)}},Zc=function(H,ee,ne,ce,Ce,Oe){var De=new rc(H._pt,ee,ne,0,1,Oe?nh:It);return H._pt=De,De.b=ce,De.e=Ce,H._props.push(ne),De},Ll={deg:1,rad:1,turn:1},sy={grid:1,flex:1},ed=function st(H,ee,ne,ce){var Vn,Nt,Gn,Lr,Ce=parseFloat(ne)||0,Oe=(ne+"").trim().substr((Ce+"").length)||"px",De=bh.style,at=Mf.test(ee),nt="svg"===H.tagName.toLowerCase(),ht=(nt?"client":"offset")+(at?"Width":"Height"),Cn="px"===ce,En="%"===ce;if(ce===Oe||!Ce||Ll[ce]||Ll[Oe])return Ce;if("px"!==Oe&&!Cn&&(Ce=st(H,ee,ne,"px")),Lr=H.getCTM&&nm(H),(En||"%"===Oe)&&(eh[ee]||~ee.indexOf("adius")))return Vn=Lr?H.getBBox()[at?"width":"height"]:H[ht],kr(En?Ce/Vn*100:Ce/100*Vn);if(De[at?"width":"height"]=100+(Cn?Oe:ce),Nt=~ee.indexOf("adius")||"em"===ce&&H.appendChild&&!nt?H:H.parentNode,Lr&&(Nt=(H.ownerSVGElement||{}).parentNode),(!Nt||Nt===$h||!Nt.appendChild)&&(Nt=$h.body),(Gn=Nt._gsap)&&En&&Gn.width&&at&&Gn.time===ka.time&&!Gn.uncache)return kr(Ce/Gn.width*100);if(!En||"height"!==ee&&"width"!==ee)(En||"%"===Oe)&&!sy[Ed(Nt,"display")]&&(De.position=Ed(H,"position")),Nt===H&&(De.position="static"),Nt.appendChild(bh),Vn=bh[ht],Nt.removeChild(bh),De.position="absolute";else{var Ir=H.style[ee];H.style[ee]=100+ce,Vn=H[ht],Ir?H.style[ee]=Ir:Bd(H,ee)}return at&&En&&((Gn=Vs(Nt)).time=ka.time,Gn.width=Nt[ht]),kr(Cn?Vn*Ce/100:Vn&&Ce?100/Vn*Ce:0)},xc=function(H,ee,ne,ce){var Ce;return ug||tm(),ee in no&&"transform"!==ee&&~(ee=no[ee]).indexOf(",")&&(ee=ee.split(",")[0]),eh[ee]&&"transform"!==ee?(Ce=Xa(H,ce),Ce="transformOrigin"!==ee?Ce[ee]:Ce.svg?Ce.origin:Tr(Ed(H,pl))+" "+Ce.zOrigin+"px"):(!(Ce=H.style[ee])||"auto"===Ce||ce||~(Ce+"").indexOf("calc("))&&(Ce=Te[ee]&&Te[ee](H,ee,ne)||Ed(H,ee)||Fo(H,ee)||("opacity"===ee?1:0)),ne&&!~(Ce+"").trim().indexOf(" ")?ed(H,ee,Ce,ne)+ne:Ce},fg=function(H,ee,ne,ce){if(!ne||"none"===ne){var Ce=yp(ee,H,1),Oe=Ce&&Ed(H,Ce,1);Oe&&Oe!==ne?(ee=Ce,ne=Oe):"borderColor"===ee&&(ne=Ed(H,"borderTopColor"))}var ht,Xt,Cn,En,Vn,Nt,Gn,Lr,Ir,Qr,Or,De=new rc(this._pt,H.style,ee,0,1,Ol),at=0,nt=0;if(De.b=ne,De.e=ce,ne+="","auto"==(ce+="")&&(Nt=H.style[ee],H.style[ee]=ce,ce=Ed(H,ee)||ce,Nt?H.style[ee]=Nt:Bd(H,ee)),ls(ht=[ne,ce]),ce=ht[1],Cn=(ne=ht[0]).match(In)||[],(ce.match(In)||[]).length){for(;Xt=In.exec(ce);)Gn=Xt[0],Ir=ce.substring(at,Xt.index),Vn?Vn=(Vn+1)%5:("rgba("===Ir.substr(-5)||"hsla("===Ir.substr(-5))&&(Vn=1),Gn!==(Nt=Cn[nt++]||"")&&(En=parseFloat(Nt)||0,Or=Nt.substr((En+"").length),"="===Gn.charAt(1)&&(Gn=dr(En,Gn)+Or),Lr=parseFloat(Gn),Qr=Gn.substr((Lr+"").length),at=In.lastIndex-Qr.length,Qr||(Qr=Qr||V.units[ee]||Or,at===ce.length&&(ce+=Qr,De.e+=Qr)),Or!==Qr&&(En=ed(H,ee,Nt,Qr)||0),De._pt={_next:De._pt,p:Ir||1===nt?Ir:",",s:En,c:Lr-En,m:Vn&&Vn<4||"zIndex"===ee?Math.round:0});De.c=at<ce.length?ce.substring(at,ce.length):""}else De.r="display"===ee&&"none"===ce?nh:It;return Nr.test(ce)&&(De.e=0),this._pt=De,De},ie={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Fe=function(H){var ee=H.split(" "),ne=ee[0],ce=ee[1]||"50%";return("top"===ne||"bottom"===ne||"left"===ce||"right"===ce)&&(H=ne,ne=ce,ce=H),ee[0]=ie[ne]||ne,ee[1]=ie[ce]||ce,ee.join(" ")},pe=function(H,ee){if(ee.tween&&ee.tween._time===ee.tween._dur){var De,at,nt,ne=ee.t,ce=ne.style,Ce=ee.u,Oe=ne._gsap;if("all"===Ce||!0===Ce)ce.cssText="",at=1;else for(nt=(Ce=Ce.split(",")).length;--nt>-1;)eh[De=Ce[nt]]&&(at=1,De="transformOrigin"===De?pl:Ls),Bd(ne,De);at&&(Bd(ne,Ls),Oe&&(Oe.svg&&ne.removeAttribute("transform"),Xa(ne,1),Oe.uncache=1,bd(ce)))}},Te={clearProps:function(H,ee,ne,ce,Ce){if("isFromStart"!==Ce.data){var Oe=H._pt=new rc(H._pt,ee,ne,0,0,pe);return Oe.u=ce,Oe.pr=-10,Oe.tween=Ce,H._props.push(ne),1}}},ot=[1,0,0,1,0,0],gn={},qn=function(H){return"matrix(1, 0, 0, 1, 0, 0)"===H||"none"===H||!H},zr=function(H){var ee=Ed(H,Ls);return qn(ee)?ot:ee.substr(7).match(On).map(kr)},Fs=function(H,ee){var Oe,De,at,nt,ne=H._gsap||Vs(H),ce=H.style,Ce=zr(H);return ne.svg&&H.getAttribute("transform")?"1,0,0,1,0,0"===(Ce=[(at=H.transform.baseVal.consolidate().matrix).a,at.b,at.c,at.d,at.e,at.f]).join(",")?ot:Ce:(Ce===ot&&!H.offsetParent&&H!==Jp&&!ne.svg&&(at=ce.display,ce.display="block",(!(Oe=H.parentNode)||!H.offsetParent)&&(nt=1,De=H.nextElementSibling,Jp.appendChild(H)),Ce=zr(H),at?ce.display=at:Bd(H,"display"),nt&&(De?Oe.insertBefore(H,De):Oe?Oe.appendChild(H):Jp.removeChild(H))),ee&&Ce.length>6?[Ce[0],Ce[1],Ce[4],Ce[5],Ce[12],Ce[13]]:Ce)},$o=function(H,ee,ne,ce,Ce,Oe){var di,Mi,qr,De=H._gsap,at=Ce||Fs(H,!0),nt=De.xOrigin||0,ht=De.yOrigin||0,Xt=De.xOffset||0,Cn=De.yOffset||0,En=at[0],Vn=at[1],Nt=at[2],Gn=at[3],Lr=at[4],Ir=at[5],Qr=ee.split(" "),Or=parseFloat(Qr[0])||0,yr=parseFloat(Qr[1])||0;ne?at!==ot&&(Mi=En*Gn-Vn*Nt)&&(qr=Or*(-Vn/Mi)+yr*(En/Mi)-(En*Ir-Vn*Lr)/Mi,Or=Or*(Gn/Mi)+yr*(-Nt/Mi)+(Nt*Ir-Gn*Lr)/Mi,yr=qr):(Or=(di=_a(H)).x+(~Qr[0].indexOf("%")?Or/100*di.width:Or),yr=di.y+(~(Qr[1]||Qr[0]).indexOf("%")?yr/100*di.height:yr)),ce||!1!==ce&&De.smooth?(De.xOffset=Xt+((Lr=Or-nt)*En+(Ir=yr-ht)*Nt)-Lr,De.yOffset=Cn+(Lr*Vn+Ir*Gn)-Ir):De.xOffset=De.yOffset=0,De.xOrigin=Or,De.yOrigin=yr,De.smooth=!!ce,De.origin=ee,De.originIsAbsolute=!!ne,H.style[pl]="0px 0px",Oe&&(Zc(Oe,De,"xOrigin",nt,Or),Zc(Oe,De,"yOrigin",ht,yr),Zc(Oe,De,"xOffset",Xt,De.xOffset),Zc(Oe,De,"yOffset",Cn,De.yOffset)),H.setAttribute("data-svg-origin",Or+" "+yr)},Xa=function(H,ee){var ne=H._gsap||new Zu(H);if("x"in ne&&!ee&&!ne.uncache)return ne;var ht,Xt,Cn,En,Vn,Nt,Gn,Lr,Ir,Qr,Or,yr,di,Mi,Ni,qr,Fa,ss,ds,Ss,Vc,Gc,qc,Jc,Ws,Ah,jd,Ih,ih,of,Kl,$d,ce=H.style,Ce=ne.scaleX<0,De="deg",at=getComputedStyle(H),nt=Ed(H,pl)||"0";return ht=Xt=Cn=Nt=Gn=Lr=Ir=Qr=Or=0,En=Vn=1,ne.svg=!(!H.getCTM||!nm(H)),at.translate&&(("none"!==at.translate||"none"!==at.scale||"none"!==at.rotate)&&(ce[Ls]=("none"!==at.translate?"translate3d("+(at.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==at.rotate?"rotate("+at.rotate+") ":"")+("none"!==at.scale?"scale("+at.scale.split(" ").join(",")+") ":"")+("none"!==at[Ls]?at[Ls]:"")),ce.scale=ce.rotate=ce.translate="none"),Mi=Fs(H,ne.svg),ne.svg&&(ne.uncache?(Ws=H.getBBox(),nt=ne.xOrigin-Ws.x+"px "+(ne.yOrigin-Ws.y)+"px",Jc=""):Jc=!ee&&H.getAttribute("data-svg-origin"),$o(H,Jc||nt,!!Jc||ne.originIsAbsolute,!1!==ne.smooth,Mi)),yr=ne.xOrigin||0,di=ne.yOrigin||0,Mi!==ot&&(ss=Mi[0],ds=Mi[1],Ss=Mi[2],Vc=Mi[3],ht=Gc=Mi[4],Xt=qc=Mi[5],6===Mi.length?(En=Math.sqrt(ss*ss+ds*ds),Vn=Math.sqrt(Vc*Vc+Ss*Ss),Nt=ss||ds?th(ds,ss)*Hd:0,(Ir=Ss||Vc?th(Ss,Vc)*Hd+Nt:0)&&(Vn*=Math.abs(Math.cos(Ir*Vh))),ne.svg&&(ht-=yr-(yr*ss+di*Ss),Xt-=di-(yr*ds+di*Vc))):(of=Mi[7],jd=Mi[8],Ih=Mi[9],Kl=Mi[11],ht=Mi[12],Xt=Mi[13],Cn=Mi[14],Gn=(Ni=th($d=Mi[6],ih=Mi[10]))*Hd,Ni&&(Jc=Gc*(qr=Math.cos(-Ni))+jd*(Fa=Math.sin(-Ni)),Ws=qc*qr+Ih*Fa,Ah=$d*qr+ih*Fa,jd=Gc*-Fa+jd*qr,Ih=qc*-Fa+Ih*qr,ih=$d*-Fa+ih*qr,Kl=of*-Fa+Kl*qr,Gc=Jc,qc=Ws,$d=Ah),Lr=(Ni=th(-Ss,ih))*Hd,Ni&&(qr=Math.cos(-Ni),Kl=Vc*(Fa=Math.sin(-Ni))+Kl*qr,ss=Jc=ss*qr-jd*Fa,ds=Ws=ds*qr-Ih*Fa,Ss=Ah=Ss*qr-ih*Fa),Nt=(Ni=th(ds,ss))*Hd,Ni&&(Jc=ss*(qr=Math.cos(Ni))+ds*(Fa=Math.sin(Ni)),Ws=Gc*qr+qc*Fa,ds=ds*qr-ss*Fa,qc=qc*qr-Gc*Fa,ss=Jc,Gc=Ws),Gn&&Math.abs(Gn)+Math.abs(Nt)>359.9&&(Gn=Nt=0,Lr=180-Lr),En=kr(Math.sqrt(ss*ss+ds*ds+Ss*Ss)),Vn=kr(Math.sqrt(qc*qc+$d*$d)),Ni=th(Gc,qc),Ir=Math.abs(Ni)>2e-4?Ni*Hd:0,Or=Kl?1/(Kl<0?-Kl:Kl):0),ne.svg&&(Jc=H.getAttribute("transform"),ne.forceCSS=H.setAttribute("transform","")||!qn(Ed(H,Ls)),Jc&&H.setAttribute("transform",Jc))),Math.abs(Ir)>90&&Math.abs(Ir)<270&&(Ce?(En*=-1,Ir+=Nt<=0?180:-180,Nt+=Nt<=0?180:-180):(Vn*=-1,Ir+=Ir<=0?180:-180)),ee=ee||ne.uncache,ne.x=ht-((ne.xPercent=ht&&(!ee&&ne.xPercent||(Math.round(H.offsetWidth/2)===Math.round(-ht)?-50:0)))?H.offsetWidth*ne.xPercent/100:0)+"px",ne.y=Xt-((ne.yPercent=Xt&&(!ee&&ne.yPercent||(Math.round(H.offsetHeight/2)===Math.round(-Xt)?-50:0)))?H.offsetHeight*ne.yPercent/100:0)+"px",ne.z=Cn+"px",ne.scaleX=kr(En),ne.scaleY=kr(Vn),ne.rotation=kr(Nt)+De,ne.rotationX=kr(Gn)+De,ne.rotationY=kr(Lr)+De,ne.skewX=Ir+De,ne.skewY=Qr+De,ne.transformPerspective=Or+"px",(ne.zOrigin=parseFloat(nt.split(" ")[2])||!ee&&ne.zOrigin||0)&&(ce[pl]=Tr(nt)),ne.xOffset=ne.yOffset=0,ne.force3D=V.force3D,ne.renderTransform=ne.svg?Sd:go?zd:qa,ne.uncache=0,ne},Tr=function(H){return(H=H.split(" "))[0]+" "+H[1]},us=function(H,ee,ne){var ce=Ia(ee);return kr(parseFloat(ee)+parseFloat(ed(H,"x",ne+"px",ce)))+ce},qa=function(H,ee){ee.z="0px",ee.rotationY=ee.rotationX="0deg",ee.force3D=0,zd(H,ee)},Hs="0deg",Bu="0px",ru=") ",zd=function(H,ee){var ne=ee||this,ce=ne.xPercent,Ce=ne.yPercent,Oe=ne.x,De=ne.y,at=ne.z,nt=ne.rotation,ht=ne.rotationY,Xt=ne.rotationX,Cn=ne.skewX,En=ne.skewY,Vn=ne.scaleX,Nt=ne.scaleY,Gn=ne.transformPerspective,Lr=ne.force3D,Ir=ne.target,Qr=ne.zOrigin,Or="",yr="auto"===Lr&&H&&1!==H||!0===Lr;if(Qr&&(Xt!==Hs||ht!==Hs)){var qr,di=parseFloat(ht)*Vh,Mi=Math.sin(di),Ni=Math.cos(di);di=parseFloat(Xt)*Vh,qr=Math.cos(di),Oe=us(Ir,Oe,Mi*qr*-Qr),De=us(Ir,De,-Math.sin(di)*-Qr),at=us(Ir,at,Ni*qr*-Qr+Qr)}Gn!==Bu&&(Or+="perspective("+Gn+ru),(ce||Ce)&&(Or+="translate("+ce+"%, "+Ce+"%) "),(yr||Oe!==Bu||De!==Bu||at!==Bu)&&(Or+=at!==Bu||yr?"translate3d("+Oe+", "+De+", "+at+") ":"translate("+Oe+", "+De+ru),nt!==Hs&&(Or+="rotate("+nt+ru),ht!==Hs&&(Or+="rotateY("+ht+ru),Xt!==Hs&&(Or+="rotateX("+Xt+ru),(Cn!==Hs||En!==Hs)&&(Or+="skew("+Cn+", "+En+ru),(1!==Vn||1!==Nt)&&(Or+="scale("+Vn+", "+Nt+ru),Ir.style[Ls]=Or||"translate(0, 0)"},Sd=function(H,ee){var yr,di,Mi,Ni,qr,ne=ee||this,ce=ne.xPercent,Ce=ne.yPercent,Oe=ne.x,De=ne.y,at=ne.rotation,nt=ne.skewX,ht=ne.skewY,Xt=ne.scaleX,Cn=ne.scaleY,En=ne.target,Vn=ne.xOrigin,Nt=ne.yOrigin,Gn=ne.xOffset,Lr=ne.yOffset,Ir=ne.forceCSS,Qr=parseFloat(Oe),Or=parseFloat(De);at=parseFloat(at),nt=parseFloat(nt),(ht=parseFloat(ht))&&(nt+=ht=parseFloat(ht),at+=ht),at||nt?(at*=Vh,nt*=Vh,yr=Math.cos(at)*Xt,di=Math.sin(at)*Xt,Mi=Math.sin(at-nt)*-Cn,Ni=Math.cos(at-nt)*Cn,nt&&(ht*=Vh,qr=Math.tan(nt-ht),Mi*=qr=Math.sqrt(1+qr*qr),Ni*=qr,ht&&(qr=Math.tan(ht),yr*=qr=Math.sqrt(1+qr*qr),di*=qr)),yr=kr(yr),di=kr(di),Mi=kr(Mi),Ni=kr(Ni)):(yr=Xt,Ni=Cn,di=Mi=0),(Qr&&!~(Oe+"").indexOf("px")||Or&&!~(De+"").indexOf("px"))&&(Qr=ed(En,"x",Oe,"px"),Or=ed(En,"y",De,"px")),(Vn||Nt||Gn||Lr)&&(Qr=kr(Qr+Vn-(Vn*yr+Nt*Mi)+Gn),Or=kr(Or+Nt-(Vn*di+Nt*Ni)+Lr)),(ce||Ce)&&(qr=En.getBBox(),Qr=kr(Qr+ce/100*qr.width),Or=kr(Or+Ce/100*qr.height)),En.setAttribute("transform",qr="matrix("+yr+","+di+","+Mi+","+Ni+","+Qr+","+Or+")"),Ir&&(En.style[Ls]=qr)},Iu=function(H,ee,ne,ce,Ce){var Xt,Cn,Oe=360,De=Le(Ce),nt=parseFloat(Ce)*(De&&~Ce.indexOf("rad")?Hd:1)-ce,ht=ce+nt+"deg";return De&&("short"===(Xt=Ce.split("_")[1])&&(nt%=Oe)!=nt%180&&(nt+=nt<0?Oe:-Oe),"cw"===Xt&&nt<0?nt=(nt+Oe*mp)%Oe-~~(nt/Oe)*Oe:"ccw"===Xt&&nt>0&&(nt=(nt-Oe*mp)%Oe-~~(nt/Oe)*Oe)),H._pt=Cn=new rc(H._pt,ee,ne,ce,nt,dg),Cn.e=ht,Cn.u="deg",H._props.push(ne),Cn},rh=function(H,ee){for(var ne in ee)H[ne]=ee[ne];return H},td=function(H,ee,ne){var De,at,nt,ht,Xt,Cn,Vn,ce=rh({},ne._gsap),Oe=ne.style;for(at in ce.svg?(nt=ne.getAttribute("transform"),ne.setAttribute("transform",""),Oe[Ls]=ee,De=Xa(ne,1),Bd(ne,Ls),ne.setAttribute("transform",nt)):(nt=getComputedStyle(ne)[Ls],Oe[Ls]=ee,De=Xa(ne,1),Oe[Ls]=nt),eh)(nt=ce[at])!==(ht=De[at])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(at)<0&&(Xt=Ia(nt)!==(Vn=Ia(ht))?ed(ne,at,nt,Vn):parseFloat(nt),Cn=parseFloat(ht),H._pt=new rc(H._pt,De,at,Xt,Cn-Xt,Cd),H._pt.u=Vn||0,H._props.push(at));rh(De,ce)};Ta("padding,margin,Width,Radius",function(st,H){var ne="Right",ce="Bottom",Ce="Left",Oe=(H<3?["Top",ne,ce,Ce]:["Top"+Ce,"Top"+ne,ce+ne,ce+Ce]).map(function(De){return H<2?st+De:"border"+De+st});Te[H>1?"border"+st:st]=function(De,at,nt,ht,Xt){var Cn,En;if(arguments.length<4)return Cn=Oe.map(function(Vn){return xc(De,Vn,nt)}),5===(En=Cn.join(" ")).split(Cn[0]).length?Cn[0]:En;Cn=(ht+"").split(" "),En={},Oe.forEach(function(Vn,Nt){return En[Vn]=Cn[Nt]=Cn[Nt]||Cn[(Nt-1)/2|0]}),De.init(at,En,Xt)}});var wh={name:"css",register:tm,targetTest:function(H){return H.style&&H.nodeType},init:function(H,ee,ne,ce,Ce){var nt,ht,Xt,Cn,En,Vn,Nt,Gn,Lr,Ir,Qr,Or,yr,di,Mi,Ni,Oe=this._props,De=H.style,at=ne.vars.startAt;for(Nt in ug||tm(),this.styles=this.styles||rf(H),Ni=this.styles.props,this.tween=ne,ee)if("autoRound"!==Nt&&(ht=ee[Nt],!jr[Nt]||!vh(Nt,ee,ne,ce,H,Ce)))if(Vn=Te[Nt],"function"==(En=typeof ht)&&(En=typeof(ht=ht.call(ne,ce,H,Ce))),"string"===En&&~ht.indexOf("random(")&&(ht=mr(ht)),Vn)Vn(this,H,Nt,ht,ne)&&(Mi=1);else if("--"===Nt.substr(0,2))nt=(getComputedStyle(H).getPropertyValue(Nt)+"").trim(),ht+="",Ma.lastIndex=0,Ma.test(nt)||(Gn=Ia(nt),Lr=Ia(ht)),Lr?Gn!==Lr&&(nt=ed(H,Nt,nt,Lr)+Lr):Gn&&(ht+=Gn),this.add(De,"setProperty",nt,ht,ce,Ce,0,0,Nt),Oe.push(Nt),Ni.push(Nt,0,De[Nt]);else if("undefined"!==En){if(at&&Nt in at?(nt="function"==typeof at[Nt]?at[Nt].call(ne,ce,H,Ce):at[Nt],Le(nt)&&~nt.indexOf("random(")&&(nt=mr(nt)),Ia(nt+"")||"auto"===nt||(nt+=V.units[Nt]||Ia(xc(H,Nt))||""),"="===(nt+"").charAt(1)&&(nt=xc(H,Nt))):nt=xc(H,Nt),Cn=parseFloat(nt),(Ir="string"===En&&"="===ht.charAt(1)&&ht.substr(0,2))&&(ht=ht.substr(2)),Xt=parseFloat(ht),Nt in no&&("autoAlpha"===Nt&&(1===Cn&&"hidden"===xc(H,"visibility")&&Xt&&(Cn=0),Ni.push("visibility",0,De.visibility),Zc(this,De,"visibility",Cn?"inherit":"hidden",Xt?"inherit":"hidden",!Xt)),"scale"!==Nt&&"transform"!==Nt&&~(Nt=no[Nt]).indexOf(",")&&(Nt=Nt.split(",")[0])),Qr=Nt in eh)if(this.styles.save(Nt),Or||((yr=H._gsap).renderTransform&&!ee.parseTransform||Xa(H,ee.parseTransform),di=!1!==ee.smoothOrigin&&yr.smooth,(Or=this._pt=new rc(this._pt,De,Ls,0,1,yr.renderTransform,yr,0,-1)).dep=1),"scale"===Nt)this._pt=new rc(this._pt,yr,"scaleY",yr.scaleY,(Ir?dr(yr.scaleY,Ir+Xt):Xt)-yr.scaleY||0,Cd),this._pt.u=0,Oe.push("scaleY",Nt),Nt+="X";else{if("transformOrigin"===Nt){Ni.push(pl,0,De[pl]),ht=Fe(ht),yr.svg?$o(H,ht,0,di,0,this):((Lr=parseFloat(ht.split(" ")[2])||0)!==yr.zOrigin&&Zc(this,yr,"zOrigin",yr.zOrigin,Lr),Zc(this,De,Nt,Tr(nt),Tr(ht)));continue}if("svgOrigin"===Nt){$o(H,ht,1,di,0,this);continue}if(Nt in gn){Iu(this,yr,Nt,Cn,Ir?dr(Cn,Ir+ht):ht);continue}if("smoothOrigin"===Nt){Zc(this,yr,"smooth",yr.smooth,ht);continue}if("force3D"===Nt){yr[Nt]=ht;continue}if("transform"===Nt){td(this,ht,H);continue}}else Nt in De||(Nt=yp(Nt)||Nt);if(Qr||(Xt||0===Xt)&&(Cn||0===Cn)&&!Zg.test(ht)&&Nt in De)Xt||(Xt=0),(Gn=(nt+"").substr((Cn+"").length))!==(Lr=Ia(ht)||(Nt in V.units?V.units[Nt]:Gn))&&(Cn=ed(H,Nt,nt,Lr)),this._pt=new rc(this._pt,Qr?yr:De,Nt,Cn,(Ir?dr(Cn,Ir+Xt):Xt)-Cn,Qr||"px"!==Lr&&"zIndex"!==Nt||!1===ee.autoRound?Cd:nf),this._pt.u=Lr||0,Gn!==Lr&&"%"!==Lr&&(this._pt.b=nt,this._pt.r=Ud);else if(Nt in De)fg.call(this,H,Nt,nt,Ir?Ir+ht:ht);else if(Nt in H)this.add(H,Nt,nt||H[Nt],Ir?Ir+ht:ht,ce,Ce);else if("parseTransform"!==Nt){Pn(Nt,ht);continue}Qr||(Nt in De?Ni.push(Nt,0,De[Nt]):Ni.push(Nt,1,nt||H[Nt])),Oe.push(Nt)}Mi&&vu(this)},render:function(H,ee){if(ee.tween._time||!nu())for(var ne=ee._pt;ne;)ne.r(H,ne.d),ne=ne._next;else ee.styles.revert()},get:xc,aliases:no,getSetter:function(H,ee,ne){var ce=no[ee];return ce&&ce.indexOf(",")<0&&(ee=ce),ee in eh&&ee!==pl&&(H._gsap.x||xc(H,"x"))?ne&&Eh===ne?"scale"===ee?Wr:_p:(Eh=ne||{})&&("scale"===ee?Jg:$c):H.style&&!Bt(H.style[ee])?ay:~ee.indexOf("-")?j1:Mr(H,ee)},core:{_removeProperty:Bd,_getMatrix:Fs}};_r.utils.checkPrefix=yp,_r.core.getStyleSaver=rf,function(st,H,ee,ne){var ce=Ta(st+","+H+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(Ce){eh[Ce]=1});Ta(H,function(Ce){V.units[Ce]="deg",gn[Ce]=1}),no[ce[13]]=st+","+H,Ta("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(Ce){var Oe=Ce.split(":");no[Oe[1]]=ce[Oe[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Ta("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(st){V.units[st]="px"}),_r.registerPlugin(wh);var Th=_r.registerPlugin(wh)||_r,rm=Th.core.Tween},9091:function(it,C,w){"use strict";var z=this&&this.__createBinding||(Object.create?function(_u,Qa,Qc,Rc){void 0===Rc&&(Rc=Qc),Object.defineProperty(_u,Rc,{enumerable:!0,get:function(){return Qa[Qc]}})}:function(_u,Qa,Qc,Rc){void 0===Rc&&(Rc=Qc),_u[Rc]=Qa[Qc]}),T=this&&this.__exportStar||function(_u,Qa){for(var Qc in _u)"default"!==Qc&&!Object.prototype.hasOwnProperty.call(Qa,Qc)&&z(Qa,_u,Qc)};Object.defineProperty(C,"__esModule",{value:!0}),C.interval=C.iif=C.generate=C.fromEventPattern=C.fromEvent=C.from=C.forkJoin=C.empty=C.defer=C.connectable=C.concat=C.combineLatest=C.bindNodeCallback=C.bindCallback=C.UnsubscriptionError=C.TimeoutError=C.SequenceError=C.ObjectUnsubscribedError=C.NotFoundError=C.EmptyError=C.ArgumentOutOfRangeError=C.firstValueFrom=C.lastValueFrom=C.isObservable=C.identity=C.noop=C.pipe=C.NotificationKind=C.Notification=C.Subscriber=C.Subscription=C.Scheduler=C.VirtualAction=C.VirtualTimeScheduler=C.animationFrameScheduler=C.animationFrame=C.queueScheduler=C.queue=C.asyncScheduler=C.async=C.asapScheduler=C.asap=C.AsyncSubject=C.ReplaySubject=C.BehaviorSubject=C.Subject=C.animationFrames=C.observable=C.ConnectableObservable=C.Observable=void 0,C.filter=C.expand=C.exhaustMap=C.exhaustAll=C.exhaust=C.every=C.endWith=C.elementAt=C.distinctUntilKeyChanged=C.distinctUntilChanged=C.distinct=C.dematerialize=C.delayWhen=C.delay=C.defaultIfEmpty=C.debounceTime=C.debounce=C.count=C.connect=C.concatWith=C.concatMapTo=C.concatMap=C.concatAll=C.combineLatestWith=C.combineLatestAll=C.combineAll=C.catchError=C.bufferWhen=C.bufferToggle=C.bufferTime=C.bufferCount=C.buffer=C.auditTime=C.audit=C.config=C.NEVER=C.EMPTY=C.scheduled=C.zip=C.using=C.timer=C.throwError=C.range=C.race=C.partition=C.pairs=C.onErrorResumeNext=C.of=C.never=C.merge=void 0,C.switchMap=C.switchAll=C.subscribeOn=C.startWith=C.skipWhile=C.skipUntil=C.skipLast=C.skip=C.single=C.shareReplay=C.share=C.sequenceEqual=C.scan=C.sampleTime=C.sample=C.refCount=C.retryWhen=C.retry=C.repeatWhen=C.repeat=C.reduce=C.raceWith=C.publishReplay=C.publishLast=C.publishBehavior=C.publish=C.pluck=C.pairwise=C.onErrorResumeNextWith=C.observeOn=C.multicast=C.min=C.mergeWith=C.mergeScan=C.mergeMapTo=C.mergeMap=C.flatMap=C.mergeAll=C.max=C.materialize=C.mapTo=C.map=C.last=C.isEmpty=C.ignoreElements=C.groupBy=C.first=C.findIndex=C.find=C.finalize=void 0,C.zipWith=C.zipAll=C.withLatestFrom=C.windowWhen=C.windowToggle=C.windowTime=C.windowCount=C.window=C.toArray=C.timestamp=C.timeoutWith=C.timeout=C.timeInterval=C.throwIfEmpty=C.throttleTime=C.throttle=C.tap=C.takeWhile=C.takeUntil=C.takeLast=C.take=C.switchScan=C.switchMapTo=void 0;var V=w(2312);Object.defineProperty(C,"Observable",{enumerable:!0,get:function(){return V.Observable}});var N=w(7588);Object.defineProperty(C,"ConnectableObservable",{enumerable:!0,get:function(){return N.ConnectableObservable}});var R=w(8789);Object.defineProperty(C,"observable",{enumerable:!0,get:function(){return R.observable}});var M=w(7796);Object.defineProperty(C,"animationFrames",{enumerable:!0,get:function(){return M.animationFrames}});var G=w(6849);Object.defineProperty(C,"Subject",{enumerable:!0,get:function(){return G.Subject}});var Y=w(1851);Object.defineProperty(C,"BehaviorSubject",{enumerable:!0,get:function(){return Y.BehaviorSubject}});var K=w(6292);Object.defineProperty(C,"ReplaySubject",{enumerable:!0,get:function(){return K.ReplaySubject}});var J=w(6509);Object.defineProperty(C,"AsyncSubject",{enumerable:!0,get:function(){return J.AsyncSubject}});var se=w(1538);Object.defineProperty(C,"asap",{enumerable:!0,get:function(){return se.asap}}),Object.defineProperty(C,"asapScheduler",{enumerable:!0,get:function(){return se.asapScheduler}});var U=w(6939);Object.defineProperty(C,"async",{enumerable:!0,get:function(){return U.async}}),Object.defineProperty(C,"asyncScheduler",{enumerable:!0,get:function(){return U.asyncScheduler}});var _e=w(676);Object.defineProperty(C,"queue",{enumerable:!0,get:function(){return _e.queue}}),Object.defineProperty(C,"queueScheduler",{enumerable:!0,get:function(){return _e.queueScheduler}});var Ae=w(6204);Object.defineProperty(C,"animationFrame",{enumerable:!0,get:function(){return Ae.animationFrame}}),Object.defineProperty(C,"animationFrameScheduler",{enumerable:!0,get:function(){return Ae.animationFrameScheduler}});var Ne=w(8348);Object.defineProperty(C,"VirtualTimeScheduler",{enumerable:!0,get:function(){return Ne.VirtualTimeScheduler}}),Object.defineProperty(C,"VirtualAction",{enumerable:!0,get:function(){return Ne.VirtualAction}});var Le=w(6572);Object.defineProperty(C,"Scheduler",{enumerable:!0,get:function(){return Le.Scheduler}});var tt=w(1172);Object.defineProperty(C,"Subscription",{enumerable:!0,get:function(){return tt.Subscription}});var _t=w(6027);Object.defineProperty(C,"Subscriber",{enumerable:!0,get:function(){return _t.Subscriber}});var Bt=w(5234);Object.defineProperty(C,"Notification",{enumerable:!0,get:function(){return Bt.Notification}}),Object.defineProperty(C,"NotificationKind",{enumerable:!0,get:function(){return Bt.NotificationKind}});var yt=w(644);Object.defineProperty(C,"pipe",{enumerable:!0,get:function(){return yt.pipe}});var Pt=w(4884);Object.defineProperty(C,"noop",{enumerable:!0,get:function(){return Pt.noop}});var vt=w(4822);Object.defineProperty(C,"identity",{enumerable:!0,get:function(){return vt.identity}});var Gt=w(1085);Object.defineProperty(C,"isObservable",{enumerable:!0,get:function(){return Gt.isObservable}});var Ht=w(3056);Object.defineProperty(C,"lastValueFrom",{enumerable:!0,get:function(){return Ht.lastValueFrom}});var jt=w(5186);Object.defineProperty(C,"firstValueFrom",{enumerable:!0,get:function(){return jt.firstValueFrom}});var Yt=w(3891);Object.defineProperty(C,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return Yt.ArgumentOutOfRangeError}});var On=w(9417);Object.defineProperty(C,"EmptyError",{enumerable:!0,get:function(){return On.EmptyError}});var In=w(8049);Object.defineProperty(C,"NotFoundError",{enumerable:!0,get:function(){return In.NotFoundError}});var Rn=w(2440);Object.defineProperty(C,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Rn.ObjectUnsubscribedError}});var Nr=w(9963);Object.defineProperty(C,"SequenceError",{enumerable:!0,get:function(){return Nr.SequenceError}});var wr=w(2156);Object.defineProperty(C,"TimeoutError",{enumerable:!0,get:function(){return wr.TimeoutError}});var Gr=w(602);Object.defineProperty(C,"UnsubscriptionError",{enumerable:!0,get:function(){return Gr.UnsubscriptionError}});var Tn=w(5963);Object.defineProperty(C,"bindCallback",{enumerable:!0,get:function(){return Tn.bindCallback}});var Nn=w(3195);Object.defineProperty(C,"bindNodeCallback",{enumerable:!0,get:function(){return Nn.bindNodeCallback}});var br=w(9145);Object.defineProperty(C,"combineLatest",{enumerable:!0,get:function(){return br.combineLatest}});var bt=w(8819);Object.defineProperty(C,"concat",{enumerable:!0,get:function(){return bt.concat}});var qt=w(6265);Object.defineProperty(C,"connectable",{enumerable:!0,get:function(){return qt.connectable}});var fn=w(2527);Object.defineProperty(C,"defer",{enumerable:!0,get:function(){return fn.defer}});var Ut=w(6086);Object.defineProperty(C,"empty",{enumerable:!0,get:function(){return Ut.empty}});var bn=w(6415);Object.defineProperty(C,"forkJoin",{enumerable:!0,get:function(){return bn.forkJoin}});var Pn=w(8395);Object.defineProperty(C,"from",{enumerable:!0,get:function(){return Pn.from}});var gr=w(6019);Object.defineProperty(C,"fromEvent",{enumerable:!0,get:function(){return gr.fromEvent}});var ui=w(3409);Object.defineProperty(C,"fromEventPattern",{enumerable:!0,get:function(){return ui.fromEventPattern}});var Oi=w(8504);Object.defineProperty(C,"generate",{enumerable:!0,get:function(){return Oi.generate}});var Dr=w(283);Object.defineProperty(C,"iif",{enumerable:!0,get:function(){return Dr.iif}});var hr=w(6814);Object.defineProperty(C,"interval",{enumerable:!0,get:function(){return hr.interval}});var ei=w(6863);Object.defineProperty(C,"merge",{enumerable:!0,get:function(){return ei.merge}});var ra=w(713);Object.defineProperty(C,"never",{enumerable:!0,get:function(){return ra.never}});var Hi=w(998);Object.defineProperty(C,"of",{enumerable:!0,get:function(){return Hi.of}});var No=w(5336);Object.defineProperty(C,"onErrorResumeNext",{enumerable:!0,get:function(){return No.onErrorResumeNext}});var fo=w(5154);Object.defineProperty(C,"pairs",{enumerable:!0,get:function(){return fo.pairs}});var jr=w(2941);Object.defineProperty(C,"partition",{enumerable:!0,get:function(){return jr.partition}});var Do=w(2706);Object.defineProperty(C,"race",{enumerable:!0,get:function(){return Do.race}});var _i=w(1138);Object.defineProperty(C,"range",{enumerable:!0,get:function(){return _i.range}});var xs=w(6213);Object.defineProperty(C,"throwError",{enumerable:!0,get:function(){return xs.throwError}});var tc=w(5142);Object.defineProperty(C,"timer",{enumerable:!0,get:function(){return tc.timer}});var gc=w(9703);Object.defineProperty(C,"using",{enumerable:!0,get:function(){return gc.using}});var Vs=w(2008);Object.defineProperty(C,"zip",{enumerable:!0,get:function(){return Vs.zip}});var Fo=w(8418);Object.defineProperty(C,"scheduled",{enumerable:!0,get:function(){return Fo.scheduled}});var Ta=w(6086);Object.defineProperty(C,"EMPTY",{enumerable:!0,get:function(){return Ta.EMPTY}});var kr=w(713);Object.defineProperty(C,"NEVER",{enumerable:!0,get:function(){return kr.NEVER}}),T(w(2864),C);var Ei=w(6691);Object.defineProperty(C,"config",{enumerable:!0,get:function(){return Ei.config}});var dr=w(1328);Object.defineProperty(C,"audit",{enumerable:!0,get:function(){return dr.audit}});var Gs=w(4365);Object.defineProperty(C,"auditTime",{enumerable:!0,get:function(){return Gs.auditTime}});var va=w(5841);Object.defineProperty(C,"buffer",{enumerable:!0,get:function(){return va.buffer}});var $a=w(8974);Object.defineProperty(C,"bufferCount",{enumerable:!0,get:function(){return $a.bufferCount}});var ca=w(7636);Object.defineProperty(C,"bufferTime",{enumerable:!0,get:function(){return ca.bufferTime}});var Xo=w(953);Object.defineProperty(C,"bufferToggle",{enumerable:!0,get:function(){return Xo.bufferToggle}});var ua=w(6425);Object.defineProperty(C,"bufferWhen",{enumerable:!0,get:function(){return ua.bufferWhen}});var Ho=w(8408);Object.defineProperty(C,"catchError",{enumerable:!0,get:function(){return Ho.catchError}});var Aa=w(5779);Object.defineProperty(C,"combineAll",{enumerable:!0,get:function(){return Aa.combineAll}});var oo=w(1038);Object.defineProperty(C,"combineLatestAll",{enumerable:!0,get:function(){return oo.combineLatestAll}});var so=w(9013);Object.defineProperty(C,"combineLatestWith",{enumerable:!0,get:function(){return so.combineLatestWith}});var Ci=w(599);Object.defineProperty(C,"concatAll",{enumerable:!0,get:function(){return Ci.concatAll}});var Oc=w(4925);Object.defineProperty(C,"concatMap",{enumerable:!0,get:function(){return Oc.concatMap}});var Ns=w(972);Object.defineProperty(C,"concatMapTo",{enumerable:!0,get:function(){return Ns.concatMapTo}});var Ds=w(2563);Object.defineProperty(C,"concatWith",{enumerable:!0,get:function(){return Ds.concatWith}});var ns=w(2901);Object.defineProperty(C,"connect",{enumerable:!0,get:function(){return ns.connect}});var ba=w(6528);Object.defineProperty(C,"count",{enumerable:!0,get:function(){return ba.count}});var _s=w(9532);Object.defineProperty(C,"debounce",{enumerable:!0,get:function(){return _s.debounce}});var Kt=w(4369);Object.defineProperty(C,"debounceTime",{enumerable:!0,get:function(){return Kt.debounceTime}});var en=w(4748);Object.defineProperty(C,"defaultIfEmpty",{enumerable:!0,get:function(){return en.defaultIfEmpty}});var Qe=w(8800);Object.defineProperty(C,"delay",{enumerable:!0,get:function(){return Qe.delay}});var Et=w(1356);Object.defineProperty(C,"delayWhen",{enumerable:!0,get:function(){return Et.delayWhen}});var wn=w(2615);Object.defineProperty(C,"dematerialize",{enumerable:!0,get:function(){return wn.dematerialize}});var $n=w(2387);Object.defineProperty(C,"distinct",{enumerable:!0,get:function(){return $n.distinct}});var Ti=w(740);Object.defineProperty(C,"distinctUntilChanged",{enumerable:!0,get:function(){return Ti.distinctUntilChanged}});var ji=w(3466);Object.defineProperty(C,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return ji.distinctUntilKeyChanged}});var xn=w(2754);Object.defineProperty(C,"elementAt",{enumerable:!0,get:function(){return xn.elementAt}});var ia=w(4518);Object.defineProperty(C,"endWith",{enumerable:!0,get:function(){return ia.endWith}});var oa=w(6220);Object.defineProperty(C,"every",{enumerable:!0,get:function(){return oa.every}});var ys=w(3865);Object.defineProperty(C,"exhaust",{enumerable:!0,get:function(){return ys.exhaust}});var jc=w(8070);Object.defineProperty(C,"exhaustAll",{enumerable:!0,get:function(){return jc.exhaustAll}});var Tl=w(6103);Object.defineProperty(C,"exhaustMap",{enumerable:!0,get:function(){return Tl.exhaustMap}});var qs=w(4331);Object.defineProperty(C,"expand",{enumerable:!0,get:function(){return qs.expand}});var Wo=w(329);Object.defineProperty(C,"filter",{enumerable:!0,get:function(){return Wo.filter}});var eu=w(9745);Object.defineProperty(C,"finalize",{enumerable:!0,get:function(){return eu.finalize}});var vs=w(7668);Object.defineProperty(C,"find",{enumerable:!0,get:function(){return vs.find}});var Va=w(8654);Object.defineProperty(C,"findIndex",{enumerable:!0,get:function(){return Va.findIndex}});var Pc=w(1437);Object.defineProperty(C,"first",{enumerable:!0,get:function(){return Pc.first}});var rs=w(3197);Object.defineProperty(C,"groupBy",{enumerable:!0,get:function(){return rs.groupBy}});var ks=w(6756);Object.defineProperty(C,"ignoreElements",{enumerable:!0,get:function(){return ks.ignoreElements}});var Ia=w(3430);Object.defineProperty(C,"isEmpty",{enumerable:!0,get:function(){return Ia.isEmpty}});var Al=w(6963);Object.defineProperty(C,"last",{enumerable:!0,get:function(){return Al.last}});var cl=w(8341);Object.defineProperty(C,"map",{enumerable:!0,get:function(){return cl.map}});var ll=w(9588);Object.defineProperty(C,"mapTo",{enumerable:!0,get:function(){return ll.mapTo}});var ul=w(5374);Object.defineProperty(C,"materialize",{enumerable:!0,get:function(){return ul.materialize}});var Cs=w(2365);Object.defineProperty(C,"max",{enumerable:!0,get:function(){return Cs.max}});var Il=w(8056);Object.defineProperty(C,"mergeAll",{enumerable:!0,get:function(){return Il.mergeAll}});var jl=w(8e3);Object.defineProperty(C,"flatMap",{enumerable:!0,get:function(){return jl.flatMap}});var Dl=w(1081);Object.defineProperty(C,"mergeMap",{enumerable:!0,get:function(){return Dl.mergeMap}});var dl=w(1544);Object.defineProperty(C,"mergeMapTo",{enumerable:!0,get:function(){return dl.mergeMapTo}});var Zo=w(8530);Object.defineProperty(C,"mergeScan",{enumerable:!0,get:function(){return Zo.mergeScan}});var Ga=w(6031);Object.defineProperty(C,"mergeWith",{enumerable:!0,get:function(){return Ga.mergeWith}});var hl=w(1383);Object.defineProperty(C,"min",{enumerable:!0,get:function(){return hl.min}});var We=w(7037);Object.defineProperty(C,"multicast",{enumerable:!0,get:function(){return We.multicast}});var At=w(4042);Object.defineProperty(C,"observeOn",{enumerable:!0,get:function(){return At.observeOn}});var ut=w(4296);Object.defineProperty(C,"onErrorResumeNextWith",{enumerable:!0,get:function(){return ut.onErrorResumeNextWith}});var vn=w(9743);Object.defineProperty(C,"pairwise",{enumerable:!0,get:function(){return vn.pairwise}});var Jn=w(542);Object.defineProperty(C,"pluck",{enumerable:!0,get:function(){return Jn.pluck}});var mr=w(3911);Object.defineProperty(C,"publish",{enumerable:!0,get:function(){return mr.publish}});var pr=w(1010);Object.defineProperty(C,"publishBehavior",{enumerable:!0,get:function(){return pr.publishBehavior}});var Ai=w(9892);Object.defineProperty(C,"publishLast",{enumerable:!0,get:function(){return Ai.publishLast}});var Ii=w(5855);Object.defineProperty(C,"publishReplay",{enumerable:!0,get:function(){return Ii.publishReplay}});var co=w(3238);Object.defineProperty(C,"raceWith",{enumerable:!0,get:function(){return co.raceWith}});var ko=w(3629);Object.defineProperty(C,"reduce",{enumerable:!0,get:function(){return ko.reduce}});var jo=w(4736);Object.defineProperty(C,"repeat",{enumerable:!0,get:function(){return jo.repeat}});var An=w(3852);Object.defineProperty(C,"repeatWhen",{enumerable:!0,get:function(){return An.repeatWhen}});var is=w(5241);Object.defineProperty(C,"retry",{enumerable:!0,get:function(){return is.retry}});var ao=w(3665);Object.defineProperty(C,"retryWhen",{enumerable:!0,get:function(){return ao.retryWhen}});var Jo=w(2359);Object.defineProperty(C,"refCount",{enumerable:!0,get:function(){return Jo.refCount}});var la=w(9545);Object.defineProperty(C,"sample",{enumerable:!0,get:function(){return la.sample}});var $s=w(2620);Object.defineProperty(C,"sampleTime",{enumerable:!0,get:function(){return $s.sampleTime}});var wc=w(8086);Object.defineProperty(C,"scan",{enumerable:!0,get:function(){return wc.scan}});var oi=w(6344);Object.defineProperty(C,"sequenceEqual",{enumerable:!0,get:function(){return oi.sequenceEqual}});var Ma=w(9684);Object.defineProperty(C,"share",{enumerable:!0,get:function(){return Ma.share}});var Wc=w(2591);Object.defineProperty(C,"shareReplay",{enumerable:!0,get:function(){return Wc.shareReplay}});var ls=w(55);Object.defineProperty(C,"single",{enumerable:!0,get:function(){return ls.single}});var os=w(1384);Object.defineProperty(C,"skip",{enumerable:!0,get:function(){return os.skip}});var ka=w(3528);Object.defineProperty(C,"skipLast",{enumerable:!0,get:function(){return ka.skipLast}});var mc=w(7694);Object.defineProperty(C,"skipUntil",{enumerable:!0,get:function(){return mc.skipUntil}});var Co=w(9659);Object.defineProperty(C,"skipWhile",{enumerable:!0,get:function(){return Co.skipWhile}});var tu=w(271);Object.defineProperty(C,"startWith",{enumerable:!0,get:function(){return tu.startWith}});var Lu=w(6734);Object.defineProperty(C,"subscribeOn",{enumerable:!0,get:function(){return Lu.subscribeOn}});var Lo=w(5880);Object.defineProperty(C,"switchAll",{enumerable:!0,get:function(){return Lo.switchAll}});var Ks=w(5433);Object.defineProperty(C,"switchMap",{enumerable:!0,get:function(){return Ks.switchMap}});var Dd=w(7544);Object.defineProperty(C,"switchMapTo",{enumerable:!0,get:function(){return Dd.switchMapTo}});var kd=w(3730);Object.defineProperty(C,"switchScan",{enumerable:!0,get:function(){return kd.switchScan}});var La=w(924);Object.defineProperty(C,"take",{enumerable:!0,get:function(){return La.take}});var _c=w(4012);Object.defineProperty(C,"takeLast",{enumerable:!0,get:function(){return _c.takeLast}});var Ca=w(3690);Object.defineProperty(C,"takeUntil",{enumerable:!0,get:function(){return Ca.takeUntil}});var Ld=w(2972);Object.defineProperty(C,"takeWhile",{enumerable:!0,get:function(){return Ld.takeWhile}});var Fu=w(4890);Object.defineProperty(C,"tap",{enumerable:!0,get:function(){return Fu.tap}});var Hu=w(3023);Object.defineProperty(C,"throttle",{enumerable:!0,get:function(){return Hu.throttle}});var Zu=w(7098);Object.defineProperty(C,"throttleTime",{enumerable:!0,get:function(){return Zu.throttleTime}});var Uu=w(2084);Object.defineProperty(C,"throwIfEmpty",{enumerable:!0,get:function(){return Uu.throwIfEmpty}});var Wa=w(7471);Object.defineProperty(C,"timeInterval",{enumerable:!0,get:function(){return Wa.timeInterval}});var Ju=w(2156);Object.defineProperty(C,"timeout",{enumerable:!0,get:function(){return Ju.timeout}});var Ml=w(9988);Object.defineProperty(C,"timeoutWith",{enumerable:!0,get:function(){return Ml.timeoutWith}});var nc=w(1475);Object.defineProperty(C,"timestamp",{enumerable:!0,get:function(){return nc.timestamp}});var vh=w(7193);Object.defineProperty(C,"toArray",{enumerable:!0,get:function(){return vh.toArray}});var mu=w(7975);Object.defineProperty(C,"window",{enumerable:!0,get:function(){return mu.window}});var Go=w(4620);Object.defineProperty(C,"windowCount",{enumerable:!0,get:function(){return Go.windowCount}});var pd=w(8466);Object.defineProperty(C,"windowTime",{enumerable:!0,get:function(){return pd.windowTime}});var fp=w(8251);Object.defineProperty(C,"windowToggle",{enumerable:!0,get:function(){return fp.windowToggle}});var Zd=w(5095);Object.defineProperty(C,"windowWhen",{enumerable:!0,get:function(){return Zd.windowWhen}});var fd=w(7632);Object.defineProperty(C,"withLatestFrom",{enumerable:!0,get:function(){return fd.withLatestFrom}});var bs=w(1201);Object.defineProperty(C,"zipAll",{enumerable:!0,get:function(){return bs.zipAll}});var zh=w(5832);Object.defineProperty(C,"zipWith",{enumerable:!0,get:function(){return zh.zipWith}})},6509:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AsyncSubject=void 0;var V=function(N){function R(){var M=null!==N&&N.apply(this,arguments)||this;return M._value=null,M._hasValue=!1,M._isComplete=!1,M}return z(R,N),R.prototype._checkFinalizedStatuses=function(M){var G=this,K=G._hasValue,J=G._value,U=G.isStopped,_e=G._isComplete;G.hasError?M.error(G.thrownError):(U||_e)&&(K&&M.next(J),M.complete())},R.prototype.next=function(M){this.isStopped||(this._value=M,this._hasValue=!0)},R.prototype.complete=function(){var M=this,G=M._hasValue,Y=M._value;M._isComplete||(this._isComplete=!0,G&&N.prototype.next.call(this,Y),N.prototype.complete.call(this))},R}(w(6849).Subject);C.AsyncSubject=V},1851:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.BehaviorSubject=void 0;var V=function(N){function R(M){var G=N.call(this)||this;return G._value=M,G}return z(R,N),Object.defineProperty(R.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),R.prototype._subscribe=function(M){var G=N.prototype._subscribe.call(this,M);return!G.closed&&M.next(this._value),G},R.prototype.getValue=function(){var M=this,K=M._value;if(M.hasError)throw M.thrownError;return this._throwIfClosed(),K},R.prototype.next=function(M){N.prototype.next.call(this,this._value=M)},R}(w(6849).Subject);C.BehaviorSubject=V},5234:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.observeNotification=C.Notification=C.NotificationKind=void 0;var Y,z=w(6086),T=w(998),V=w(6213),N=w(4756);(Y=C.NotificationKind||(C.NotificationKind={})).NEXT="N",Y.ERROR="E",Y.COMPLETE="C";var M=function(){function Y(K,J,se){this.kind=K,this.value=J,this.error=se,this.hasValue="N"===K}return Y.prototype.observe=function(K){return G(this,K)},Y.prototype.do=function(K,J,se){var U=this,_e=U.kind,Ae=U.value,Ne=U.error;return"N"===_e?K?.(Ae):"E"===_e?J?.(Ne):se?.()},Y.prototype.accept=function(K,J,se){var U;return N.isFunction(null===(U=K)||void 0===U?void 0:U.next)?this.observe(K):this.do(K,J,se)},Y.prototype.toObservable=function(){var K=this,J=K.kind,U=K.error,_e="N"===J?T.of(K.value):"E"===J?V.throwError(function(){return U}):"C"===J?z.EMPTY:0;if(!_e)throw new TypeError("Unexpected notification kind "+J);return _e},Y.createNext=function(K){return new Y("N",K)},Y.createError=function(K){return new Y("E",void 0,K)},Y.createComplete=function(){return Y.completeNotification},Y.completeNotification=new Y("C"),Y}();function G(Y,K){var J,se,U,Ae=Y.kind,Ne=Y.value,Le=Y.error;if("string"!=typeof Ae)throw new TypeError('Invalid notification, missing "kind"');"N"===Ae?null===(J=K.next)||void 0===J||J.call(K,Ne):"E"===Ae?null===(se=K.error)||void 0===se||se.call(K,Le):null===(U=K.complete)||void 0===U||U.call(K)}C.Notification=M,C.observeNotification=G},8662:(it,C)=>{"use strict";function T(V,N,R){return{kind:V,value:N,error:R}}Object.defineProperty(C,"__esModule",{value:!0}),C.createNotification=C.nextNotification=C.errorNotification=C.COMPLETE_NOTIFICATION=void 0,C.COMPLETE_NOTIFICATION=T("C",void 0,void 0),C.errorNotification=function w(V){return T("E",void 0,V)},C.nextNotification=function z(V){return T("N",V,void 0)},C.createNotification=T},2312:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.Observable=void 0;var z=w(6027),T=w(1172),V=w(8789),N=w(644),R=w(6691),M=w(4756),G=w(6077),Y=function(){function U(_e){_e&&(this._subscribe=_e)}return U.prototype.lift=function(_e){var Ae=new U;return Ae.source=this,Ae.operator=_e,Ae},U.prototype.subscribe=function(_e,Ae,Ne){var Le=this,tt=function se(U){return U&&U instanceof z.Subscriber||function J(U){return U&&M.isFunction(U.next)&&M.isFunction(U.error)&&M.isFunction(U.complete)}(U)&&T.isSubscription(U)}(_e)?_e:new z.SafeSubscriber(_e,Ae,Ne);return G.errorContext(function(){var Bt=Le.operator,yt=Le.source;tt.add(Bt?Bt.call(tt,yt):yt?Le._subscribe(tt):Le._trySubscribe(tt))}),tt},U.prototype._trySubscribe=function(_e){try{return this._subscribe(_e)}catch(Ae){_e.error(Ae)}},U.prototype.forEach=function(_e,Ae){var Ne=this;return new(Ae=K(Ae))(function(Le,tt){var _t=new z.SafeSubscriber({next:function(Bt){try{_e(Bt)}catch(yt){tt(yt),_t.unsubscribe()}},error:tt,complete:Le});Ne.subscribe(_t)})},U.prototype._subscribe=function(_e){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(_e)},U.prototype[V.observable]=function(){return this},U.prototype.pipe=function(){for(var _e=[],Ae=0;Ae<arguments.length;Ae++)_e[Ae]=arguments[Ae];return N.pipeFromArray(_e)(this)},U.prototype.toPromise=function(_e){var Ae=this;return new(_e=K(_e))(function(Ne,Le){var tt;Ae.subscribe(function(_t){return tt=_t},function(_t){return Le(_t)},function(){return Ne(tt)})})},U.create=function(_e){return new U(_e)},U}();function K(U){var _e;return null!==(_e=U??R.config.Promise)&&void 0!==_e?_e:Promise}C.Observable=Y},6292:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var R=function(M,G){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Y[J]=K[J])})(M,G)};return function(M,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function Y(){this.constructor=M}R(M,G),M.prototype=null===G?Object.create(G):(Y.prototype=G.prototype,new Y)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.ReplaySubject=void 0;var T=w(6849),V=w(9090),N=function(R){function M(G,Y,K){void 0===G&&(G=1/0),void 0===Y&&(Y=1/0),void 0===K&&(K=V.dateTimestampProvider);var J=R.call(this)||this;return J._bufferSize=G,J._windowTime=Y,J._timestampProvider=K,J._buffer=[],J._infiniteTimeWindow=!0,J._infiniteTimeWindow=Y===1/0,J._bufferSize=Math.max(1,G),J._windowTime=Math.max(1,Y),J}return z(M,R),M.prototype.next=function(G){var Y=this,J=Y._buffer,se=Y._infiniteTimeWindow,U=Y._timestampProvider,_e=Y._windowTime;Y.isStopped||(J.push(G),!se&&J.push(U.now()+_e)),this._trimBuffer(),R.prototype.next.call(this,G)},M.prototype._subscribe=function(G){this._throwIfClosed(),this._trimBuffer();for(var Y=this._innerSubscribe(G),J=this._infiniteTimeWindow,U=this._buffer.slice(),_e=0;_e<U.length&&!G.closed;_e+=J?1:2)G.next(U[_e]);return this._checkFinalizedStatuses(G),Y},M.prototype._trimBuffer=function(){var G=this,Y=G._bufferSize,K=G._timestampProvider,J=G._buffer,se=G._infiniteTimeWindow,U=(se?1:2)*Y;if(Y<1/0&&U<J.length&&J.splice(0,J.length-U),!se){for(var _e=K.now(),Ae=0,Ne=1;Ne<J.length&&J[Ne]<=_e;Ne+=2)Ae=Ne;Ae&&J.splice(0,Ae+1)}},M}(T.Subject);C.ReplaySubject=N},6572:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.Scheduler=void 0;var z=w(9090),T=function(){function V(N,R){void 0===R&&(R=V.now),this.schedulerActionCtor=N,this.now=R}return V.prototype.schedule=function(N,R,M){return void 0===R&&(R=0),new this.schedulerActionCtor(this,N).schedule(M,R)},V.now=z.dateTimestampProvider.now,V}();C.Scheduler=T},6849:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var J=function(se,U){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,Ae){_e.__proto__=Ae}||function(_e,Ae){for(var Ne in Ae)Object.prototype.hasOwnProperty.call(Ae,Ne)&&(_e[Ne]=Ae[Ne])})(se,U)};return function(se,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function _e(){this.constructor=se}J(se,U),se.prototype=null===U?Object.create(U):(_e.prototype=U.prototype,new _e)}}(),T=this&&this.__values||function(J){var se="function"==typeof Symbol&&Symbol.iterator,U=se&&J[se],_e=0;if(U)return U.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&_e>=J.length&&(J=void 0),{value:J&&J[_e++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.AnonymousSubject=C.Subject=void 0;var V=w(2312),N=w(1172),R=w(2440),M=w(2713),G=w(6077),Y=function(J){function se(){var U=J.call(this)||this;return U.closed=!1,U.currentObservers=null,U.observers=[],U.isStopped=!1,U.hasError=!1,U.thrownError=null,U}return z(se,J),se.prototype.lift=function(U){var _e=new K(this,this);return _e.operator=U,_e},se.prototype._throwIfClosed=function(){if(this.closed)throw new R.ObjectUnsubscribedError},se.prototype.next=function(U){var _e=this;G.errorContext(function(){var Ae,Ne;if(_e._throwIfClosed(),!_e.isStopped){_e.currentObservers||(_e.currentObservers=Array.from(_e.observers));try{for(var Le=T(_e.currentObservers),tt=Le.next();!tt.done;tt=Le.next())tt.value.next(U)}catch(Bt){Ae={error:Bt}}finally{try{tt&&!tt.done&&(Ne=Le.return)&&Ne.call(Le)}finally{if(Ae)throw Ae.error}}}})},se.prototype.error=function(U){var _e=this;G.errorContext(function(){if(_e._throwIfClosed(),!_e.isStopped){_e.hasError=_e.isStopped=!0,_e.thrownError=U;for(var Ae=_e.observers;Ae.length;)Ae.shift().error(U)}})},se.prototype.complete=function(){var U=this;G.errorContext(function(){if(U._throwIfClosed(),!U.isStopped){U.isStopped=!0;for(var _e=U.observers;_e.length;)_e.shift().complete()}})},se.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(se.prototype,"observed",{get:function(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0},enumerable:!1,configurable:!0}),se.prototype._trySubscribe=function(U){return this._throwIfClosed(),J.prototype._trySubscribe.call(this,U)},se.prototype._subscribe=function(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)},se.prototype._innerSubscribe=function(U){var _e=this,tt=this.observers;return this.hasError||this.isStopped?N.EMPTY_SUBSCRIPTION:(this.currentObservers=null,tt.push(U),new N.Subscription(function(){_e.currentObservers=null,M.arrRemove(tt,U)}))},se.prototype._checkFinalizedStatuses=function(U){var Le=this.isStopped;this.hasError?U.error(this.thrownError):Le&&U.complete()},se.prototype.asObservable=function(){var U=new V.Observable;return U.source=this,U},se.create=function(U,_e){return new K(U,_e)},se}(V.Observable);C.Subject=Y;var K=function(J){function se(U,_e){var Ae=J.call(this)||this;return Ae.destination=U,Ae.source=_e,Ae}return z(se,J),se.prototype.next=function(U){var _e,Ae;null===(Ae=null===(_e=this.destination)||void 0===_e?void 0:_e.next)||void 0===Ae||Ae.call(_e,U)},se.prototype.error=function(U){var _e,Ae;null===(Ae=null===(_e=this.destination)||void 0===_e?void 0:_e.error)||void 0===Ae||Ae.call(_e,U)},se.prototype.complete=function(){var U,_e;null===(_e=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===_e||_e.call(U)},se.prototype._subscribe=function(U){var _e,Ae;return null!==(Ae=null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(U))&&void 0!==Ae?Ae:N.EMPTY_SUBSCRIPTION},se}(Y);C.AnonymousSubject=K},6027:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var _t=function(Bt,yt){return(_t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pt,vt){Pt.__proto__=vt}||function(Pt,vt){for(var Gt in vt)Object.prototype.hasOwnProperty.call(vt,Gt)&&(Pt[Gt]=vt[Gt])})(Bt,yt)};return function(Bt,yt){if("function"!=typeof yt&&null!==yt)throw new TypeError("Class extends value "+String(yt)+" is not a constructor or null");function Pt(){this.constructor=Bt}_t(Bt,yt),Bt.prototype=null===yt?Object.create(yt):(Pt.prototype=yt.prototype,new Pt)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.EMPTY_OBSERVER=C.SafeSubscriber=C.Subscriber=void 0;var T=w(4756),V=w(1172),N=w(6691),R=w(3145),M=w(4884),G=w(8662),Y=w(2829),K=w(6077),J=function(_t){function Bt(yt){var Pt=_t.call(this)||this;return Pt.isStopped=!1,yt?(Pt.destination=yt,V.isSubscription(yt)&&yt.add(Pt)):Pt.destination=C.EMPTY_OBSERVER,Pt}return z(Bt,_t),Bt.create=function(yt,Pt,vt){return new Ae(yt,Pt,vt)},Bt.prototype.next=function(yt){this.isStopped?tt(G.nextNotification(yt),this):this._next(yt)},Bt.prototype.error=function(yt){this.isStopped?tt(G.errorNotification(yt),this):(this.isStopped=!0,this._error(yt))},Bt.prototype.complete=function(){this.isStopped?tt(G.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},Bt.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_t.prototype.unsubscribe.call(this),this.destination=null)},Bt.prototype._next=function(yt){this.destination.next(yt)},Bt.prototype._error=function(yt){try{this.destination.error(yt)}finally{this.unsubscribe()}},Bt.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Bt}(V.Subscription);C.Subscriber=J;var se=Function.prototype.bind;function U(_t,Bt){return se.call(_t,Bt)}var _e=function(){function _t(Bt){this.partialObserver=Bt}return _t.prototype.next=function(Bt){var yt=this.partialObserver;if(yt.next)try{yt.next(Bt)}catch(Pt){Ne(Pt)}},_t.prototype.error=function(Bt){var yt=this.partialObserver;if(yt.error)try{yt.error(Bt)}catch(Pt){Ne(Pt)}else Ne(Bt)},_t.prototype.complete=function(){var Bt=this.partialObserver;if(Bt.complete)try{Bt.complete()}catch(yt){Ne(yt)}},_t}(),Ae=function(_t){function Bt(yt,Pt,vt){var Ht,jt,Gt=_t.call(this)||this;return T.isFunction(yt)||!yt?Ht={next:yt??void 0,error:Pt??void 0,complete:vt??void 0}:Gt&&N.config.useDeprecatedNextContext?((jt=Object.create(yt)).unsubscribe=function(){return Gt.unsubscribe()},Ht={next:yt.next&&U(yt.next,jt),error:yt.error&&U(yt.error,jt),complete:yt.complete&&U(yt.complete,jt)}):Ht=yt,Gt.destination=new _e(Ht),Gt}return z(Bt,_t),Bt}(J);function Ne(_t){N.config.useDeprecatedSynchronousErrorHandling?K.captureError(_t):R.reportUnhandledError(_t)}function tt(_t,Bt){var yt=N.config.onStoppedNotification;yt&&Y.timeoutProvider.setTimeout(function(){return yt(_t,Bt)})}C.SafeSubscriber=Ae,C.EMPTY_OBSERVER={closed:!0,next:M.noop,error:function Le(_t){throw _t},complete:M.noop}},1172:function(it,C,w){"use strict";var z=this&&this.__values||function(J){var se="function"==typeof Symbol&&Symbol.iterator,U=se&&J[se],_e=0;if(U)return U.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&_e>=J.length&&(J=void 0),{value:J&&J[_e++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")},T=this&&this.__read||function(J,se){var U="function"==typeof Symbol&&J[Symbol.iterator];if(!U)return J;var Ae,Le,_e=U.call(J),Ne=[];try{for(;(void 0===se||se-- >0)&&!(Ae=_e.next()).done;)Ne.push(Ae.value)}catch(tt){Le={error:tt}}finally{try{Ae&&!Ae.done&&(U=_e.return)&&U.call(_e)}finally{if(Le)throw Le.error}}return Ne},V=this&&this.__spreadArray||function(J,se){for(var U=0,_e=se.length,Ae=J.length;U<_e;U++,Ae++)J[Ae]=se[U];return J};Object.defineProperty(C,"__esModule",{value:!0}),C.isSubscription=C.EMPTY_SUBSCRIPTION=C.Subscription=void 0;var N=w(4756),R=w(602),M=w(2713),G=function(){function J(se){this.initialTeardown=se,this.closed=!1,this._parentage=null,this._finalizers=null}return J.prototype.unsubscribe=function(){var se,U,_e,Ae,Ne;if(!this.closed){this.closed=!0;var Le=this._parentage;if(Le)if(this._parentage=null,Array.isArray(Le))try{for(var tt=z(Le),_t=tt.next();!_t.done;_t=tt.next())_t.value.remove(this)}catch(jt){se={error:jt}}finally{try{_t&&!_t.done&&(U=tt.return)&&U.call(tt)}finally{if(se)throw se.error}}else Le.remove(this);var yt=this.initialTeardown;if(N.isFunction(yt))try{yt()}catch(jt){Ne=jt instanceof R.UnsubscriptionError?jt.errors:[jt]}var Pt=this._finalizers;if(Pt){this._finalizers=null;try{for(var vt=z(Pt),Gt=vt.next();!Gt.done;Gt=vt.next()){var Ht=Gt.value;try{K(Ht)}catch(jt){Ne=Ne??[],jt instanceof R.UnsubscriptionError?Ne=V(V([],T(Ne)),T(jt.errors)):Ne.push(jt)}}}catch(jt){_e={error:jt}}finally{try{Gt&&!Gt.done&&(Ae=vt.return)&&Ae.call(vt)}finally{if(_e)throw _e.error}}}if(Ne)throw new R.UnsubscriptionError(Ne)}},J.prototype.add=function(se){var U;if(se&&se!==this)if(this.closed)K(se);else{if(se instanceof J){if(se.closed||se._hasParent(this))return;se._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(se)}},J.prototype._hasParent=function(se){var U=this._parentage;return U===se||Array.isArray(U)&&U.includes(se)},J.prototype._addParent=function(se){var U=this._parentage;this._parentage=Array.isArray(U)?(U.push(se),U):U?[U,se]:se},J.prototype._removeParent=function(se){var U=this._parentage;U===se?this._parentage=null:Array.isArray(U)&&M.arrRemove(U,se)},J.prototype.remove=function(se){var U=this._finalizers;U&&M.arrRemove(U,se),se instanceof J&&se._removeParent(this)},J.EMPTY=((se=new J).closed=!0,se),J;var se}();function K(J){N.isFunction(J)?J():J.unsubscribe()}C.Subscription=G,C.EMPTY_SUBSCRIPTION=G.EMPTY,C.isSubscription=function Y(J){return J instanceof G||J&&"closed"in J&&N.isFunction(J.remove)&&N.isFunction(J.add)&&N.isFunction(J.unsubscribe)}},6691:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.config=void 0,C.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5186:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.firstValueFrom=void 0;var z=w(9417),T=w(6027);C.firstValueFrom=function V(N,R){var M="object"==typeof R;return new Promise(function(G,Y){var K=new T.SafeSubscriber({next:function(J){G(J),K.unsubscribe()},error:Y,complete:function(){M?G(R.defaultValue):Y(new z.EmptyError)}});N.subscribe(K)})}},3056:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.lastValueFrom=void 0;var z=w(9417);C.lastValueFrom=function T(V,N){var R="object"==typeof N;return new Promise(function(M,G){var K,Y=!1;V.subscribe({next:function(J){K=J,Y=!0},error:G,complete:function(){Y?M(K):R?M(N.defaultValue):G(new z.EmptyError)}})})}},7588:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var Y=function(K,J){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,U){se.__proto__=U}||function(se,U){for(var _e in U)Object.prototype.hasOwnProperty.call(U,_e)&&(se[_e]=U[_e])})(K,J)};return function(K,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function se(){this.constructor=K}Y(K,J),K.prototype=null===J?Object.create(J):(se.prototype=J.prototype,new se)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.ConnectableObservable=void 0;var T=w(2312),V=w(1172),N=w(2359),R=w(3709),M=w(1041),G=function(Y){function K(J,se){var U=Y.call(this)||this;return U.source=J,U.subjectFactory=se,U._subject=null,U._refCount=0,U._connection=null,M.hasLift(J)&&(U.lift=J.lift),U}return z(K,Y),K.prototype._subscribe=function(J){return this.getSubject().subscribe(J)},K.prototype.getSubject=function(){var J=this._subject;return(!J||J.isStopped)&&(this._subject=this.subjectFactory()),this._subject},K.prototype._teardown=function(){this._refCount=0;var J=this._connection;this._subject=this._connection=null,J?.unsubscribe()},K.prototype.connect=function(){var J=this,se=this._connection;if(!se){se=this._connection=new V.Subscription;var U=this.getSubject();se.add(this.source.subscribe(R.createOperatorSubscriber(U,void 0,function(){J._teardown(),U.complete()},function(_e){J._teardown(),U.error(_e)},function(){return J._teardown()}))),se.closed&&(this._connection=null,se=V.Subscription.EMPTY)}return se},K.prototype.refCount=function(){return N.refCount()(this)},K}(T.Observable);C.ConnectableObservable=G},5963:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.bindCallback=void 0;var z=w(6301);C.bindCallback=function T(V,N,R){return z.bindCallbackInternals(!1,V,N,R)}},6301:function(it,C,w){"use strict";var z=this&&this.__read||function(J,se){var U="function"==typeof Symbol&&J[Symbol.iterator];if(!U)return J;var Ae,Le,_e=U.call(J),Ne=[];try{for(;(void 0===se||se-- >0)&&!(Ae=_e.next()).done;)Ne.push(Ae.value)}catch(tt){Le={error:tt}}finally{try{Ae&&!Ae.done&&(U=_e.return)&&U.call(_e)}finally{if(Le)throw Le.error}}return Ne},T=this&&this.__spreadArray||function(J,se){for(var U=0,_e=se.length,Ae=J.length;U<_e;U++,Ae++)J[Ae]=se[U];return J};Object.defineProperty(C,"__esModule",{value:!0}),C.bindCallbackInternals=void 0;var V=w(7683),N=w(2312),R=w(6734),M=w(5837),G=w(4042),Y=w(6509);C.bindCallbackInternals=function K(J,se,U,_e){if(U){if(!V.isScheduler(U))return function(){for(var Ae=[],Ne=0;Ne<arguments.length;Ne++)Ae[Ne]=arguments[Ne];return K(J,se,_e).apply(this,Ae).pipe(M.mapOneOrManyArgs(U))};_e=U}return _e?function(){for(var Ae=[],Ne=0;Ne<arguments.length;Ne++)Ae[Ne]=arguments[Ne];return K(J,se).apply(this,Ae).pipe(R.subscribeOn(_e),G.observeOn(_e))}:function(){for(var Ae=this,Ne=[],Le=0;Le<arguments.length;Le++)Ne[Le]=arguments[Le];var tt=new Y.AsyncSubject,_t=!0;return new N.Observable(function(Bt){var yt=tt.subscribe(Bt);if(_t){_t=!1;var Pt=!1,vt=!1;se.apply(Ae,T(T([],z(Ne)),[function(){for(var Gt=[],Ht=0;Ht<arguments.length;Ht++)Gt[Ht]=arguments[Ht];if(J){var jt=Gt.shift();if(null!=jt)return void tt.error(jt)}tt.next(1<Gt.length?Gt:Gt[0]),vt=!0,Pt&&tt.complete()}])),vt&&tt.complete(),Pt=!0}return yt})}}},3195:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.bindNodeCallback=void 0;var z=w(6301);C.bindNodeCallback=function T(V,N,R){return z.bindCallbackInternals(!0,V,N,R)}},9145:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.combineLatestInit=C.combineLatest=void 0;var z=w(2312),T=w(9718),V=w(8395),N=w(4822),R=w(5837),M=w(2953),G=w(1591),Y=w(3709),K=w(5616);function se(_e,Ae,Ne){return void 0===Ne&&(Ne=N.identity),function(Le){U(Ae,function(){for(var tt=_e.length,_t=new Array(tt),Bt=tt,yt=tt,Pt=function(Gt){U(Ae,function(){var Ht=V.from(_e[Gt],Ae),jt=!1;Ht.subscribe(Y.createOperatorSubscriber(Le,function(Yt){_t[Gt]=Yt,jt||(jt=!0,yt--),yt||Le.next(Ne(_t.slice()))},function(){--Bt||Le.complete()}))},Le)},vt=0;vt<tt;vt++)Pt(vt)},Le)}}function U(_e,Ae,Ne){_e?K.executeSchedule(Ne,_e,Ae):Ae()}C.combineLatest=function J(){for(var _e=[],Ae=0;Ae<arguments.length;Ae++)_e[Ae]=arguments[Ae];var Ne=M.popScheduler(_e),Le=M.popResultSelector(_e),tt=T.argsArgArrayOrObject(_e),_t=tt.args,Bt=tt.keys;if(0===_t.length)return V.from([],Ne);var yt=new z.Observable(se(_t,Ne,Bt?function(Pt){return G.createObject(Bt,Pt)}:N.identity));return Le?yt.pipe(R.mapOneOrManyArgs(Le)):yt},C.combineLatestInit=se},8819:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.concat=void 0;var z=w(599),T=w(2953),V=w(8395);C.concat=function N(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return z.concatAll()(V.from(R,T.popScheduler(R)))}},6265:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.connectable=void 0;var z=w(6849),T=w(2312),V=w(2527),N={connector:function(){return new z.Subject},resetOnDisconnect:!0};C.connectable=function R(M,G){void 0===G&&(G=N);var Y=null,K=G.connector,J=G.resetOnDisconnect,se=void 0===J||J,U=K(),_e=new T.Observable(function(Ae){return U.subscribe(Ae)});return _e.connect=function(){return(!Y||Y.closed)&&(Y=V.defer(function(){return M}).subscribe(U),se&&Y.add(function(){return U=K()})),Y},_e}},2527:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.defer=void 0;var z=w(2312),T=w(5147);C.defer=function V(N){return new z.Observable(function(R){T.innerFrom(N()).subscribe(R)})}},7796:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.animationFrames=void 0;var z=w(2312),T=w(4936),V=w(5657);function R(G){return new z.Observable(function(Y){var K=G||T.performanceTimestampProvider,J=K.now(),se=0,U=function(){Y.closed||(se=V.animationFrameProvider.requestAnimationFrame(function(_e){se=0;var Ae=K.now();Y.next({timestamp:G?Ae:_e,elapsed:Ae-J}),U()}))};return U(),function(){se&&V.animationFrameProvider.cancelAnimationFrame(se)}})}C.animationFrames=function N(G){return G?R(G):M};var M=R()},6086:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.empty=C.EMPTY=void 0;var z=w(2312);C.EMPTY=new z.Observable(function(N){return N.complete()}),C.empty=function T(N){return N?function V(N){return new z.Observable(function(R){return N.schedule(function(){return R.complete()})})}(N):C.EMPTY}},6415:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.forkJoin=void 0;var z=w(2312),T=w(9718),V=w(5147),N=w(2953),R=w(3709),M=w(5837),G=w(1591);C.forkJoin=function Y(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];var se=N.popResultSelector(K),U=T.argsArgArrayOrObject(K),_e=U.args,Ae=U.keys,Ne=new z.Observable(function(Le){var tt=_e.length;if(tt)for(var _t=new Array(tt),Bt=tt,yt=tt,Pt=function(Gt){var Ht=!1;V.innerFrom(_e[Gt]).subscribe(R.createOperatorSubscriber(Le,function(jt){Ht||(Ht=!0,yt--),_t[Gt]=jt},function(){return Bt--},void 0,function(){(!Bt||!Ht)&&(yt||Le.next(Ae?G.createObject(Ae,_t):_t),Le.complete())}))},vt=0;vt<tt;vt++)Pt(vt);else Le.complete()});return se?Ne.pipe(M.mapOneOrManyArgs(se)):Ne}},8395:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.from=void 0;var z=w(8418),T=w(5147);C.from=function V(N,R){return R?z.scheduled(N,R):T.innerFrom(N)}},6019:function(it,C,w){"use strict";var z=this&&this.__read||function(Le,tt){var _t="function"==typeof Symbol&&Le[Symbol.iterator];if(!_t)return Le;var yt,vt,Bt=_t.call(Le),Pt=[];try{for(;(void 0===tt||tt-- >0)&&!(yt=Bt.next()).done;)Pt.push(yt.value)}catch(Gt){vt={error:Gt}}finally{try{yt&&!yt.done&&(_t=Bt.return)&&_t.call(Bt)}finally{if(vt)throw vt.error}}return Pt};Object.defineProperty(C,"__esModule",{value:!0}),C.fromEvent=void 0;var T=w(5147),V=w(2312),N=w(1081),R=w(7052),M=w(4756),G=w(5837),Y=["addListener","removeListener"],K=["addEventListener","removeEventListener"],J=["on","off"];function U(Le,tt){return function(_t){return function(Bt){return Le[_t](tt,Bt)}}}C.fromEvent=function se(Le,tt,_t,Bt){if(M.isFunction(_t)&&(Bt=_t,_t=void 0),Bt)return se(Le,tt,_t).pipe(G.mapOneOrManyArgs(Bt));var yt=z(function Ne(Le){return M.isFunction(Le.addEventListener)&&M.isFunction(Le.removeEventListener)}(Le)?K.map(function(Gt){return function(Ht){return Le[Gt](tt,Ht,_t)}}):function _e(Le){return M.isFunction(Le.addListener)&&M.isFunction(Le.removeListener)}(Le)?Y.map(U(Le,tt)):function Ae(Le){return M.isFunction(Le.on)&&M.isFunction(Le.off)}(Le)?J.map(U(Le,tt)):[],2),Pt=yt[0],vt=yt[1];if(!Pt&&R.isArrayLike(Le))return N.mergeMap(function(Gt){return se(Gt,tt,_t)})(T.innerFrom(Le));if(!Pt)throw new TypeError("Invalid event target");return new V.Observable(function(Gt){var Ht=function(){for(var jt=[],Yt=0;Yt<arguments.length;Yt++)jt[Yt]=arguments[Yt];return Gt.next(1<jt.length?jt:jt[0])};return Pt(Ht),function(){return vt(Ht)}})}},3409:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.fromEventPattern=void 0;var z=w(2312),T=w(4756),V=w(5837);C.fromEventPattern=function N(R,M,G){return G?N(R,M).pipe(V.mapOneOrManyArgs(G)):new z.Observable(function(Y){var K=function(){for(var se=[],U=0;U<arguments.length;U++)se[U]=arguments[U];return Y.next(1===se.length?se[0]:se)},J=R(K);return T.isFunction(M)?function(){return M(K,J)}:void 0})}},1242:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.fromSubscribable=void 0;var z=w(2312);C.fromSubscribable=function T(V){return new z.Observable(function(N){return V.subscribe(N)})}},8504:function(it,C,w){"use strict";var z=this&&this.__generator||function(G,Y){var J,se,U,_e,K={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return _e={next:Ae(0),throw:Ae(1),return:Ae(2)},"function"==typeof Symbol&&(_e[Symbol.iterator]=function(){return this}),_e;function Ae(Le){return function(tt){return function Ne(Le){if(J)throw new TypeError("Generator is already executing.");for(;K;)try{if(J=1,se&&(U=2&Le[0]?se.return:Le[0]?se.throw||((U=se.return)&&U.call(se),0):se.next)&&!(U=U.call(se,Le[1])).done)return U;switch(se=0,U&&(Le=[2&Le[0],U.value]),Le[0]){case 0:case 1:U=Le;break;case 4:return K.label++,{value:Le[1],done:!1};case 5:K.label++,se=Le[1],Le=[0];continue;case 7:Le=K.ops.pop(),K.trys.pop();continue;default:if(!(U=(U=K.trys).length>0&&U[U.length-1])&&(6===Le[0]||2===Le[0])){K=0;continue}if(3===Le[0]&&(!U||Le[1]>U[0]&&Le[1]<U[3])){K.label=Le[1];break}if(6===Le[0]&&K.label<U[1]){K.label=U[1],U=Le;break}if(U&&K.label<U[2]){K.label=U[2],K.ops.push(Le);break}U[2]&&K.ops.pop(),K.trys.pop();continue}Le=Y.call(G,K)}catch(tt){Le=[6,tt],se=0}finally{J=U=0}if(5&Le[0])throw Le[1];return{value:Le[0]?Le[1]:void 0,done:!0}}([Le,tt])}}};Object.defineProperty(C,"__esModule",{value:!0}),C.generate=void 0;var T=w(4822),V=w(7683),N=w(2527),R=w(766);C.generate=function M(G,Y,K,J,se){var U,_e,Ae,Ne;function Le(){var tt;return z(this,function(_t){switch(_t.label){case 0:tt=Ne,_t.label=1;case 1:return!Y||Y(tt)?[4,Ae(tt)]:[3,4];case 2:_t.sent(),_t.label=3;case 3:return tt=K(tt),[3,1];case 4:return[2]}})}return 1===arguments.length?(Ne=(U=G).initialState,Y=U.condition,K=U.iterate,Ae=void 0===(_e=U.resultSelector)?T.identity:_e,se=U.scheduler):(Ne=G,!J||V.isScheduler(J)?(Ae=T.identity,se=J):Ae=J),N.defer(se?function(){return R.scheduleIterable(Le(),se)}:Le)}},283:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.iif=void 0;var z=w(2527);C.iif=function T(V,N,R){return z.defer(function(){return V()?N:R})}},5147:function(it,C,w){"use strict";var z=this&&this.__awaiter||function(Ht,jt,Yt,On){return new(Yt||(Yt=Promise))(function(Rn,Nr){function wr(Nn){try{Tn(On.next(Nn))}catch(br){Nr(br)}}function Gr(Nn){try{Tn(On.throw(Nn))}catch(br){Nr(br)}}function Tn(Nn){Nn.done?Rn(Nn.value):function In(Rn){return Rn instanceof Yt?Rn:new Yt(function(Nr){Nr(Rn)})}(Nn.value).then(wr,Gr)}Tn((On=On.apply(Ht,jt||[])).next())})},T=this&&this.__generator||function(Ht,jt){var On,In,Rn,Nr,Yt={label:0,sent:function(){if(1&Rn[0])throw Rn[1];return Rn[1]},trys:[],ops:[]};return Nr={next:wr(0),throw:wr(1),return:wr(2)},"function"==typeof Symbol&&(Nr[Symbol.iterator]=function(){return this}),Nr;function wr(Tn){return function(Nn){return function Gr(Tn){if(On)throw new TypeError("Generator is already executing.");for(;Yt;)try{if(On=1,In&&(Rn=2&Tn[0]?In.return:Tn[0]?In.throw||((Rn=In.return)&&Rn.call(In),0):In.next)&&!(Rn=Rn.call(In,Tn[1])).done)return Rn;switch(In=0,Rn&&(Tn=[2&Tn[0],Rn.value]),Tn[0]){case 0:case 1:Rn=Tn;break;case 4:return Yt.label++,{value:Tn[1],done:!1};case 5:Yt.label++,In=Tn[1],Tn=[0];continue;case 7:Tn=Yt.ops.pop(),Yt.trys.pop();continue;default:if(!(Rn=(Rn=Yt.trys).length>0&&Rn[Rn.length-1])&&(6===Tn[0]||2===Tn[0])){Yt=0;continue}if(3===Tn[0]&&(!Rn||Tn[1]>Rn[0]&&Tn[1]<Rn[3])){Yt.label=Tn[1];break}if(6===Tn[0]&&Yt.label<Rn[1]){Yt.label=Rn[1],Rn=Tn;break}if(Rn&&Yt.label<Rn[2]){Yt.label=Rn[2],Yt.ops.push(Tn);break}Rn[2]&&Yt.ops.pop(),Yt.trys.pop();continue}Tn=jt.call(Ht,Yt)}catch(Nn){Tn=[6,Nn],In=0}finally{On=Rn=0}if(5&Tn[0])throw Tn[1];return{value:Tn[0]?Tn[1]:void 0,done:!0}}([Tn,Nn])}}},V=this&&this.__asyncValues||function(Ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Yt,jt=Ht[Symbol.asyncIterator];return jt?jt.call(Ht):(Ht="function"==typeof N?N(Ht):Ht[Symbol.iterator](),Yt={},On("next"),On("throw"),On("return"),Yt[Symbol.asyncIterator]=function(){return this},Yt);function On(Rn){Yt[Rn]=Ht[Rn]&&function(Nr){return new Promise(function(wr,Gr){!function In(Rn,Nr,wr,Gr){Promise.resolve(Gr).then(function(Tn){Rn({value:Tn,done:wr})},Nr)}(wr,Gr,(Nr=Ht[Rn](Nr)).done,Nr.value)})}}},N=this&&this.__values||function(Ht){var jt="function"==typeof Symbol&&Symbol.iterator,Yt=jt&&Ht[jt],On=0;if(Yt)return Yt.call(Ht);if(Ht&&"number"==typeof Ht.length)return{next:function(){return Ht&&On>=Ht.length&&(Ht=void 0),{value:Ht&&Ht[On++],done:!Ht}}};throw new TypeError(jt?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.fromReadableStreamLike=C.fromAsyncIterable=C.fromIterable=C.fromPromise=C.fromArrayLike=C.fromInteropObservable=C.innerFrom=void 0;var R=w(7052),M=w(5355),G=w(2312),Y=w(3562),K=w(8740),J=w(3856),se=w(8158),U=w(7635),_e=w(4756),Ae=w(3145),Ne=w(8789);function tt(Ht){return new G.Observable(function(jt){var Yt=Ht[Ne.observable]();if(_e.isFunction(Yt.subscribe))return Yt.subscribe(jt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _t(Ht){return new G.Observable(function(jt){for(var Yt=0;Yt<Ht.length&&!jt.closed;Yt++)jt.next(Ht[Yt]);jt.complete()})}function Bt(Ht){return new G.Observable(function(jt){Ht.then(function(Yt){jt.closed||(jt.next(Yt),jt.complete())},function(Yt){return jt.error(Yt)}).then(null,Ae.reportUnhandledError)})}function yt(Ht){return new G.Observable(function(jt){var Yt,On;try{for(var In=N(Ht),Rn=In.next();!Rn.done;Rn=In.next())if(jt.next(Rn.value),jt.closed)return}catch(wr){Yt={error:wr}}finally{try{Rn&&!Rn.done&&(On=In.return)&&On.call(In)}finally{if(Yt)throw Yt.error}}jt.complete()})}function Pt(Ht){return new G.Observable(function(jt){(function Gt(Ht,jt){var Yt,On,In,Rn;return z(this,void 0,void 0,function(){var wr;return T(this,function(Gr){switch(Gr.label){case 0:Gr.trys.push([0,5,6,11]),Yt=V(Ht),Gr.label=1;case 1:return[4,Yt.next()];case 2:if((On=Gr.sent()).done)return[3,4];if(jt.next(On.value),jt.closed)return[2];Gr.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return wr=Gr.sent(),In={error:wr},[3,11];case 6:return Gr.trys.push([6,,9,10]),On&&!On.done&&(Rn=Yt.return)?[4,Rn.call(Yt)]:[3,8];case 7:Gr.sent(),Gr.label=8;case 8:return[3,10];case 9:if(In)throw In.error;return[7];case 10:return[7];case 11:return jt.complete(),[2]}})})})(Ht,jt).catch(function(Yt){return jt.error(Yt)})})}function vt(Ht){return Pt(U.readableStreamLikeToAsyncGenerator(Ht))}C.innerFrom=function Le(Ht){if(Ht instanceof G.Observable)return Ht;if(null!=Ht){if(Y.isInteropObservable(Ht))return tt(Ht);if(R.isArrayLike(Ht))return _t(Ht);if(M.isPromise(Ht))return Bt(Ht);if(K.isAsyncIterable(Ht))return Pt(Ht);if(se.isIterable(Ht))return yt(Ht);if(U.isReadableStreamLike(Ht))return vt(Ht)}throw J.createInvalidObservableTypeError(Ht)},C.fromInteropObservable=tt,C.fromArrayLike=_t,C.fromPromise=Bt,C.fromIterable=yt,C.fromAsyncIterable=Pt,C.fromReadableStreamLike=vt},6814:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.interval=void 0;var z=w(6939),T=w(5142);C.interval=function V(N,R){return void 0===N&&(N=0),void 0===R&&(R=z.asyncScheduler),N<0&&(N=0),T.timer(N,N,R)}},6863:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.merge=void 0;var z=w(8056),T=w(5147),V=w(6086),N=w(2953),R=w(8395);C.merge=function M(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];var K=N.popScheduler(G),J=N.popNumber(G,1/0),se=G;return se.length?1===se.length?T.innerFrom(se[0]):z.mergeAll(J)(R.from(se,K)):V.EMPTY}},713:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.never=C.NEVER=void 0;var z=w(2312),T=w(4884);C.NEVER=new z.Observable(T.noop),C.never=function V(){return C.NEVER}},998:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.of=void 0;var z=w(2953),T=w(8395);C.of=function V(){for(var N=[],R=0;R<arguments.length;R++)N[R]=arguments[R];var M=z.popScheduler(N);return T.from(N,M)}},5336:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.onErrorResumeNext=void 0;var z=w(2312),T=w(365),V=w(3709),N=w(4884),R=w(5147);C.onErrorResumeNext=function M(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];var K=T.argsOrArgArray(G);return new z.Observable(function(J){var se=0,U=function(){if(se<K.length){var _e=void 0;try{_e=R.innerFrom(K[se++])}catch{return void U()}var Ae=new V.OperatorSubscriber(J,void 0,N.noop,N.noop);_e.subscribe(Ae),Ae.add(U)}else J.complete()};U()})}},5154:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.pairs=void 0;var z=w(8395);C.pairs=function T(V,N){return z.from(Object.entries(V),N)}},2941:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.partition=void 0;var z=w(9819),T=w(329),V=w(5147);C.partition=function N(R,M,G){return[T.filter(M,G)(V.innerFrom(R)),T.filter(z.not(M,G))(V.innerFrom(R))]}},2706:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.raceInit=C.race=void 0;var z=w(2312),T=w(5147),V=w(365),N=w(3709);function M(G){return function(Y){for(var K=[],J=function(U){K.push(T.innerFrom(G[U]).subscribe(N.createOperatorSubscriber(Y,function(_e){if(K){for(var Ae=0;Ae<K.length;Ae++)Ae!==U&&K[Ae].unsubscribe();K=null}Y.next(_e)})))},se=0;K&&!Y.closed&&se<G.length;se++)J(se)}}C.race=function R(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];return 1===(G=V.argsOrArgArray(G)).length?T.innerFrom(G[0]):new z.Observable(M(G))},C.raceInit=M},1138:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.range=void 0;var z=w(2312),T=w(6086);C.range=function V(N,R,M){if(null==R&&(R=N,N=0),R<=0)return T.EMPTY;var G=R+N;return new z.Observable(M?function(Y){var K=N;return M.schedule(function(){K<G?(Y.next(K++),this.schedule()):Y.complete()})}:function(Y){for(var K=N;K<G&&!Y.closed;)Y.next(K++);Y.complete()})}},6213:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.throwError=void 0;var z=w(2312),T=w(4756);C.throwError=function V(N,R){var M=T.isFunction(N)?N:function(){return N},G=function(Y){return Y.error(M())};return new z.Observable(R?function(Y){return R.schedule(G,0,Y)}:G)}},5142:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.timer=void 0;var z=w(2312),T=w(6939),V=w(7683),N=w(6128);C.timer=function R(M,G,Y){void 0===M&&(M=0),void 0===Y&&(Y=T.async);var K=-1;return null!=G&&(V.isScheduler(G)?Y=G:K=G),new z.Observable(function(J){var se=N.isValidDate(M)?+M-Y.now():M;se<0&&(se=0);var U=0;return Y.schedule(function(){J.closed||(J.next(U++),0<=K?this.schedule(void 0,K):J.complete())},se)})}},9703:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.using=void 0;var z=w(2312),T=w(5147),V=w(6086);C.using=function N(R,M){return new z.Observable(function(G){var Y=R(),K=M(Y);return(K?T.innerFrom(K):V.EMPTY).subscribe(G),function(){Y&&Y.unsubscribe()}})}},2008:function(it,C,w){"use strict";var z=this&&this.__read||function(J,se){var U="function"==typeof Symbol&&J[Symbol.iterator];if(!U)return J;var Ae,Le,_e=U.call(J),Ne=[];try{for(;(void 0===se||se-- >0)&&!(Ae=_e.next()).done;)Ne.push(Ae.value)}catch(tt){Le={error:tt}}finally{try{Ae&&!Ae.done&&(U=_e.return)&&U.call(_e)}finally{if(Le)throw Le.error}}return Ne},T=this&&this.__spreadArray||function(J,se){for(var U=0,_e=se.length,Ae=J.length;U<_e;U++,Ae++)J[Ae]=se[U];return J};Object.defineProperty(C,"__esModule",{value:!0}),C.zip=void 0;var V=w(2312),N=w(5147),R=w(365),M=w(6086),G=w(3709),Y=w(2953);C.zip=function K(){for(var J=[],se=0;se<arguments.length;se++)J[se]=arguments[se];var U=Y.popResultSelector(J),_e=R.argsOrArgArray(J);return _e.length?new V.Observable(function(Ae){var Ne=_e.map(function(){return[]}),Le=_e.map(function(){return!1});Ae.add(function(){Ne=Le=null});for(var tt=function(Bt){N.innerFrom(_e[Bt]).subscribe(G.createOperatorSubscriber(Ae,function(yt){if(Ne[Bt].push(yt),Ne.every(function(vt){return vt.length})){var Pt=Ne.map(function(vt){return vt.shift()});Ae.next(U?U.apply(void 0,T([],z(Pt))):Pt),Ne.some(function(vt,Gt){return!vt.length&&Le[Gt]})&&Ae.complete()}},function(){Le[Bt]=!0,!Ne[Bt].length&&Ae.complete()}))},_t=0;!Ae.closed&&_t<_e.length;_t++)tt(_t);return function(){Ne=Le=null}}):M.EMPTY}},3709:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var R=function(M,G){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Y[J]=K[J])})(M,G)};return function(M,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function Y(){this.constructor=M}R(M,G),M.prototype=null===G?Object.create(G):(Y.prototype=G.prototype,new Y)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.OperatorSubscriber=C.createOperatorSubscriber=void 0;var T=w(6027);C.createOperatorSubscriber=function V(R,M,G,Y,K){return new N(R,M,G,Y,K)};var N=function(R){function M(G,Y,K,J,se,U){var _e=R.call(this,G)||this;return _e.onFinalize=se,_e.shouldUnsubscribe=U,_e._next=Y?function(Ae){try{Y(Ae)}catch(Ne){G.error(Ne)}}:R.prototype._next,_e._error=J?function(Ae){try{J(Ae)}catch(Ne){G.error(Ne)}finally{this.unsubscribe()}}:R.prototype._error,_e._complete=K?function(){try{K()}catch(Ae){G.error(Ae)}finally{this.unsubscribe()}}:R.prototype._complete,_e}return z(M,R),M.prototype.unsubscribe=function(){var G;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var Y=this.closed;R.prototype.unsubscribe.call(this),!Y&&(null===(G=this.onFinalize)||void 0===G||G.call(this))}},M}(T.Subscriber);C.OperatorSubscriber=N},1328:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.audit=void 0;var z=w(1041),T=w(5147),V=w(3709);C.audit=function N(R){return z.operate(function(M,G){var Y=!1,K=null,J=null,se=!1,U=function(){if(J?.unsubscribe(),J=null,Y){Y=!1;var Ae=K;K=null,G.next(Ae)}se&&G.complete()},_e=function(){J=null,se&&G.complete()};M.subscribe(V.createOperatorSubscriber(G,function(Ae){Y=!0,K=Ae,J||T.innerFrom(R(Ae)).subscribe(J=V.createOperatorSubscriber(G,U,_e))},function(){se=!0,(!Y||!J||J.closed)&&G.complete()}))})}},4365:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.auditTime=void 0;var z=w(6939),T=w(1328),V=w(5142);C.auditTime=function N(R,M){return void 0===M&&(M=z.asyncScheduler),T.audit(function(){return V.timer(R,M)})}},5841:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.buffer=void 0;var z=w(1041),T=w(4884),V=w(3709),N=w(5147);C.buffer=function R(M){return z.operate(function(G,Y){var K=[];return G.subscribe(V.createOperatorSubscriber(Y,function(J){return K.push(J)},function(){Y.next(K),Y.complete()})),N.innerFrom(M).subscribe(V.createOperatorSubscriber(Y,function(){var J=K;K=[],Y.next(J)},T.noop)),function(){K=null}})}},8974:function(it,C,w){"use strict";var z=this&&this.__values||function(M){var G="function"==typeof Symbol&&Symbol.iterator,Y=G&&M[G],K=0;if(Y)return Y.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&K>=M.length&&(M=void 0),{value:M&&M[K++],done:!M}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.bufferCount=void 0;var T=w(1041),V=w(3709),N=w(2713);C.bufferCount=function R(M,G){return void 0===G&&(G=null),G=G??M,T.operate(function(Y,K){var J=[],se=0;Y.subscribe(V.createOperatorSubscriber(K,function(U){var _e,Ae,Ne,Le,tt=null;se++%G==0&&J.push([]);try{for(var _t=z(J),Bt=_t.next();!Bt.done;Bt=_t.next())(yt=Bt.value).push(U),M<=yt.length&&(tt=tt??[]).push(yt)}catch(Gt){_e={error:Gt}}finally{try{Bt&&!Bt.done&&(Ae=_t.return)&&Ae.call(_t)}finally{if(_e)throw _e.error}}if(tt)try{for(var Pt=z(tt),vt=Pt.next();!vt.done;vt=Pt.next()){var yt;N.arrRemove(J,yt=vt.value),K.next(yt)}}catch(Gt){Ne={error:Gt}}finally{try{vt&&!vt.done&&(Le=Pt.return)&&Le.call(Pt)}finally{if(Ne)throw Ne.error}}},function(){var U,_e;try{for(var Ae=z(J),Ne=Ae.next();!Ne.done;Ne=Ae.next())K.next(Ne.value)}catch(tt){U={error:tt}}finally{try{Ne&&!Ne.done&&(_e=Ae.return)&&_e.call(Ae)}finally{if(U)throw U.error}}K.complete()},void 0,function(){J=null}))})}},7636:function(it,C,w){"use strict";var z=this&&this.__values||function(J){var se="function"==typeof Symbol&&Symbol.iterator,U=se&&J[se],_e=0;if(U)return U.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&_e>=J.length&&(J=void 0),{value:J&&J[_e++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.bufferTime=void 0;var T=w(1172),V=w(1041),N=w(3709),R=w(2713),M=w(6939),G=w(2953),Y=w(5616);C.bufferTime=function K(J){for(var se,U,_e=[],Ae=1;Ae<arguments.length;Ae++)_e[Ae-1]=arguments[Ae];var Ne=null!==(se=G.popScheduler(_e))&&void 0!==se?se:M.asyncScheduler,Le=null!==(U=_e[0])&&void 0!==U?U:null,tt=_e[1]||1/0;return V.operate(function(_t,Bt){var yt=[],Pt=!1,vt=function(jt){var Yt=jt.buffer;jt.subs.unsubscribe(),R.arrRemove(yt,jt),Bt.next(Yt),Pt&&Gt()},Gt=function(){if(yt){var jt=new T.Subscription;Bt.add(jt);var On={buffer:[],subs:jt};yt.push(On),Y.executeSchedule(jt,Ne,function(){return vt(On)},J)}};null!==Le&&Le>=0?Y.executeSchedule(Bt,Ne,Gt,Le,!0):Pt=!0,Gt();var Ht=N.createOperatorSubscriber(Bt,function(jt){var Yt,On,In=yt.slice();try{for(var Rn=z(In),Nr=Rn.next();!Nr.done;Nr=Rn.next()){var wr=Nr.value,Gr=wr.buffer;Gr.push(jt),tt<=Gr.length&&vt(wr)}}catch(Tn){Yt={error:Tn}}finally{try{Nr&&!Nr.done&&(On=Rn.return)&&On.call(Rn)}finally{if(Yt)throw Yt.error}}},function(){for(;yt?.length;)Bt.next(yt.shift().buffer);Ht?.unsubscribe(),Bt.complete(),Bt.unsubscribe()},void 0,function(){return yt=null});_t.subscribe(Ht)})}},953:function(it,C,w){"use strict";var z=this&&this.__values||function(K){var J="function"==typeof Symbol&&Symbol.iterator,se=J&&K[J],U=0;if(se)return se.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&U>=K.length&&(K=void 0),{value:K&&K[U++],done:!K}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.bufferToggle=void 0;var T=w(1172),V=w(1041),N=w(5147),R=w(3709),M=w(4884),G=w(2713);C.bufferToggle=function Y(K,J){return V.operate(function(se,U){var _e=[];N.innerFrom(K).subscribe(R.createOperatorSubscriber(U,function(Ae){var Ne=[];_e.push(Ne);var Le=new T.Subscription;Le.add(N.innerFrom(J(Ae)).subscribe(R.createOperatorSubscriber(U,function(){G.arrRemove(_e,Ne),U.next(Ne),Le.unsubscribe()},M.noop)))},M.noop)),se.subscribe(R.createOperatorSubscriber(U,function(Ae){var Ne,Le;try{for(var tt=z(_e),_t=tt.next();!_t.done;_t=tt.next())_t.value.push(Ae)}catch(yt){Ne={error:yt}}finally{try{_t&&!_t.done&&(Le=tt.return)&&Le.call(tt)}finally{if(Ne)throw Ne.error}}},function(){for(;_e.length>0;)U.next(_e.shift());U.complete()}))})}},6425:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.bufferWhen=void 0;var z=w(1041),T=w(4884),V=w(3709),N=w(5147);C.bufferWhen=function R(M){return z.operate(function(G,Y){var K=null,J=null,se=function(){J?.unsubscribe();var U=K;K=[],U&&Y.next(U),N.innerFrom(M()).subscribe(J=V.createOperatorSubscriber(Y,se,T.noop))};se(),G.subscribe(V.createOperatorSubscriber(Y,function(U){return K?.push(U)},function(){K&&Y.next(K),Y.complete()},void 0,function(){return K=J=null}))})}},8408:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.catchError=void 0;var z=w(5147),T=w(3709),V=w(1041);C.catchError=function N(R){return V.operate(function(M,G){var J,Y=null,K=!1;Y=M.subscribe(T.createOperatorSubscriber(G,void 0,void 0,function(se){J=z.innerFrom(R(se,N(R)(M))),Y?(Y.unsubscribe(),Y=null,J.subscribe(G)):K=!0})),K&&(Y.unsubscribe(),Y=null,J.subscribe(G))})}},5779:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.combineAll=void 0;var z=w(1038);C.combineAll=z.combineLatestAll},7169:function(it,C,w){"use strict";var z=this&&this.__read||function(J,se){var U="function"==typeof Symbol&&J[Symbol.iterator];if(!U)return J;var Ae,Le,_e=U.call(J),Ne=[];try{for(;(void 0===se||se-- >0)&&!(Ae=_e.next()).done;)Ne.push(Ae.value)}catch(tt){Le={error:tt}}finally{try{Ae&&!Ae.done&&(U=_e.return)&&U.call(_e)}finally{if(Le)throw Le.error}}return Ne},T=this&&this.__spreadArray||function(J,se){for(var U=0,_e=se.length,Ae=J.length;U<_e;U++,Ae++)J[Ae]=se[U];return J};Object.defineProperty(C,"__esModule",{value:!0}),C.combineLatest=void 0;var V=w(9145),N=w(1041),R=w(365),M=w(5837),G=w(644),Y=w(2953);C.combineLatest=function K(){for(var J=[],se=0;se<arguments.length;se++)J[se]=arguments[se];var U=Y.popResultSelector(J);return U?G.pipe(K.apply(void 0,T([],z(J))),M.mapOneOrManyArgs(U)):N.operate(function(_e,Ae){V.combineLatestInit(T([_e],z(R.argsOrArgArray(J))))(Ae)})}},1038:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.combineLatestAll=void 0;var z=w(9145),T=w(7548);C.combineLatestAll=function V(N){return T.joinAllInternals(z.combineLatest,N)}},9013:function(it,C,w){"use strict";var z=this&&this.__read||function(R,M){var G="function"==typeof Symbol&&R[Symbol.iterator];if(!G)return R;var K,se,Y=G.call(R),J=[];try{for(;(void 0===M||M-- >0)&&!(K=Y.next()).done;)J.push(K.value)}catch(U){se={error:U}}finally{try{K&&!K.done&&(G=Y.return)&&G.call(Y)}finally{if(se)throw se.error}}return J},T=this&&this.__spreadArray||function(R,M){for(var G=0,Y=M.length,K=R.length;G<Y;G++,K++)R[K]=M[G];return R};Object.defineProperty(C,"__esModule",{value:!0}),C.combineLatestWith=void 0;var V=w(7169);C.combineLatestWith=function N(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return V.combineLatest.apply(void 0,T([],z(R)))}},1435:function(it,C,w){"use strict";var z=this&&this.__read||function(Y,K){var J="function"==typeof Symbol&&Y[Symbol.iterator];if(!J)return Y;var U,Ae,se=J.call(Y),_e=[];try{for(;(void 0===K||K-- >0)&&!(U=se.next()).done;)_e.push(U.value)}catch(Ne){Ae={error:Ne}}finally{try{U&&!U.done&&(J=se.return)&&J.call(se)}finally{if(Ae)throw Ae.error}}return _e},T=this&&this.__spreadArray||function(Y,K){for(var J=0,se=K.length,U=Y.length;J<se;J++,U++)Y[U]=K[J];return Y};Object.defineProperty(C,"__esModule",{value:!0}),C.concat=void 0;var V=w(1041),N=w(599),R=w(2953),M=w(8395);C.concat=function G(){for(var Y=[],K=0;K<arguments.length;K++)Y[K]=arguments[K];var J=R.popScheduler(Y);return V.operate(function(se,U){N.concatAll()(M.from(T([se],z(Y)),J)).subscribe(U)})}},599:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.concatAll=void 0;var z=w(8056);C.concatAll=function T(){return z.mergeAll(1)}},4925:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.concatMap=void 0;var z=w(1081),T=w(4756);C.concatMap=function V(N,R){return T.isFunction(R)?z.mergeMap(N,R,1):z.mergeMap(N,1)}},972:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.concatMapTo=void 0;var z=w(4925),T=w(4756);C.concatMapTo=function V(N,R){return T.isFunction(R)?z.concatMap(function(){return N},R):z.concatMap(function(){return N})}},2563:function(it,C,w){"use strict";var z=this&&this.__read||function(R,M){var G="function"==typeof Symbol&&R[Symbol.iterator];if(!G)return R;var K,se,Y=G.call(R),J=[];try{for(;(void 0===M||M-- >0)&&!(K=Y.next()).done;)J.push(K.value)}catch(U){se={error:U}}finally{try{K&&!K.done&&(G=Y.return)&&G.call(Y)}finally{if(se)throw se.error}}return J},T=this&&this.__spreadArray||function(R,M){for(var G=0,Y=M.length,K=R.length;G<Y;G++,K++)R[K]=M[G];return R};Object.defineProperty(C,"__esModule",{value:!0}),C.concatWith=void 0;var V=w(1435);C.concatWith=function N(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return V.concat.apply(void 0,T([],z(R)))}},2901:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.connect=void 0;var z=w(6849),T=w(5147),V=w(1041),N=w(1242),R={connector:function(){return new z.Subject}};C.connect=function M(G,Y){void 0===Y&&(Y=R);var K=Y.connector;return V.operate(function(J,se){var U=K();T.innerFrom(G(N.fromSubscribable(U))).subscribe(se),se.add(J.subscribe(U))})}},6528:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.count=void 0;var z=w(3629);C.count=function T(V){return z.reduce(function(N,R,M){return!V||V(R,M)?N+1:N},0)}},9532:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.debounce=void 0;var z=w(1041),T=w(4884),V=w(3709),N=w(5147);C.debounce=function R(M){return z.operate(function(G,Y){var K=!1,J=null,se=null,U=function(){if(se?.unsubscribe(),se=null,K){K=!1;var _e=J;J=null,Y.next(_e)}};G.subscribe(V.createOperatorSubscriber(Y,function(_e){se?.unsubscribe(),K=!0,J=_e,se=V.createOperatorSubscriber(Y,U,T.noop),N.innerFrom(M(_e)).subscribe(se)},function(){U(),Y.complete()},void 0,function(){J=se=null}))})}},4369:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.debounceTime=void 0;var z=w(6939),T=w(1041),V=w(3709);C.debounceTime=function N(R,M){return void 0===M&&(M=z.asyncScheduler),T.operate(function(G,Y){var K=null,J=null,se=null,U=function(){if(K){K.unsubscribe(),K=null;var Ae=J;J=null,Y.next(Ae)}};function _e(){var Ae=se+R,Ne=M.now();if(Ne<Ae)return K=this.schedule(void 0,Ae-Ne),void Y.add(K);U()}G.subscribe(V.createOperatorSubscriber(Y,function(Ae){J=Ae,se=M.now(),K||(K=M.schedule(_e,R),Y.add(K))},function(){U(),Y.complete()},void 0,function(){J=K=null}))})}},4748:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.defaultIfEmpty=void 0;var z=w(1041),T=w(3709);C.defaultIfEmpty=function V(N){return z.operate(function(R,M){var G=!1;R.subscribe(T.createOperatorSubscriber(M,function(Y){G=!0,M.next(Y)},function(){G||M.next(N),M.complete()}))})}},8800:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.delay=void 0;var z=w(6939),T=w(1356),V=w(5142);C.delay=function N(R,M){void 0===M&&(M=z.asyncScheduler);var G=V.timer(R,M);return T.delayWhen(function(){return G})}},1356:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.delayWhen=void 0;var z=w(8819),T=w(924),V=w(6756),N=w(9588),R=w(1081),M=w(5147);C.delayWhen=function G(Y,K){return K?function(J){return z.concat(K.pipe(T.take(1),V.ignoreElements()),J.pipe(G(Y)))}:R.mergeMap(function(J,se){return M.innerFrom(Y(J,se)).pipe(T.take(1),N.mapTo(J))})}},2615:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.dematerialize=void 0;var z=w(5234),T=w(1041),V=w(3709);C.dematerialize=function N(){return T.operate(function(R,M){R.subscribe(V.createOperatorSubscriber(M,function(G){return z.observeNotification(G,M)}))})}},2387:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.distinct=void 0;var z=w(1041),T=w(3709),V=w(4884),N=w(5147);C.distinct=function R(M,G){return z.operate(function(Y,K){var J=new Set;Y.subscribe(T.createOperatorSubscriber(K,function(se){var U=M?M(se):se;J.has(U)||(J.add(U),K.next(se))})),G&&N.innerFrom(G).subscribe(T.createOperatorSubscriber(K,function(){return J.clear()},V.noop))})}},740:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.distinctUntilChanged=void 0;var z=w(4822),T=w(1041),V=w(3709);function R(M,G){return M===G}C.distinctUntilChanged=function N(M,G){return void 0===G&&(G=z.identity),M=M??R,T.operate(function(Y,K){var J,se=!0;Y.subscribe(V.createOperatorSubscriber(K,function(U){var _e=G(U);(se||!M(J,_e))&&(se=!1,J=_e,K.next(U))}))})}},3466:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.distinctUntilKeyChanged=void 0;var z=w(740);C.distinctUntilKeyChanged=function T(V,N){return z.distinctUntilChanged(function(R,M){return N?N(R[V],M[V]):R[V]===M[V]})}},2754:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.elementAt=void 0;var z=w(3891),T=w(329),V=w(2084),N=w(4748),R=w(924);C.elementAt=function M(G,Y){if(G<0)throw new z.ArgumentOutOfRangeError;var K=arguments.length>=2;return function(J){return J.pipe(T.filter(function(se,U){return U===G}),R.take(1),K?N.defaultIfEmpty(Y):V.throwIfEmpty(function(){return new z.ArgumentOutOfRangeError}))}}},4518:function(it,C,w){"use strict";var z=this&&this.__read||function(M,G){var Y="function"==typeof Symbol&&M[Symbol.iterator];if(!Y)return M;var J,U,K=Y.call(M),se=[];try{for(;(void 0===G||G-- >0)&&!(J=K.next()).done;)se.push(J.value)}catch(_e){U={error:_e}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(U)throw U.error}}return se},T=this&&this.__spreadArray||function(M,G){for(var Y=0,K=G.length,J=M.length;Y<K;Y++,J++)M[J]=G[Y];return M};Object.defineProperty(C,"__esModule",{value:!0}),C.endWith=void 0;var V=w(8819),N=w(998);C.endWith=function R(){for(var M=[],G=0;G<arguments.length;G++)M[G]=arguments[G];return function(Y){return V.concat(Y,N.of.apply(void 0,T([],z(M))))}}},6220:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.every=void 0;var z=w(1041),T=w(3709);C.every=function V(N,R){return z.operate(function(M,G){var Y=0;M.subscribe(T.createOperatorSubscriber(G,function(K){N.call(R,K,Y++,M)||(G.next(!1),G.complete())},function(){G.next(!0),G.complete()}))})}},3865:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.exhaust=void 0;var z=w(8070);C.exhaust=z.exhaustAll},8070:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.exhaustAll=void 0;var z=w(6103),T=w(4822);C.exhaustAll=function V(){return z.exhaustMap(T.identity)}},6103:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.exhaustMap=void 0;var z=w(8341),T=w(5147),V=w(1041),N=w(3709);C.exhaustMap=function R(M,G){return G?function(Y){return Y.pipe(R(function(K,J){return T.innerFrom(M(K,J)).pipe(z.map(function(se,U){return G(K,se,J,U)}))}))}:V.operate(function(Y,K){var J=0,se=null,U=!1;Y.subscribe(N.createOperatorSubscriber(K,function(_e){se||(se=N.createOperatorSubscriber(K,void 0,function(){se=null,U&&K.complete()}),T.innerFrom(M(_e,J++)).subscribe(se))},function(){U=!0,!se&&K.complete()}))})}},4331:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.expand=void 0;var z=w(1041),T=w(3465);C.expand=function V(N,R,M){return void 0===R&&(R=1/0),R=(R||0)<1?1/0:R,z.operate(function(G,Y){return T.mergeInternals(G,Y,N,R,void 0,!0,M)})}},329:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.filter=void 0;var z=w(1041),T=w(3709);C.filter=function V(N,R){return z.operate(function(M,G){var Y=0;M.subscribe(T.createOperatorSubscriber(G,function(K){return N.call(R,K,Y++)&&G.next(K)}))})}},9745:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.finalize=void 0;var z=w(1041);C.finalize=function T(V){return z.operate(function(N,R){try{N.subscribe(R)}finally{R.add(V)}})}},7668:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.createFind=C.find=void 0;var z=w(1041),T=w(3709);function N(R,M,G){var Y="index"===G;return function(K,J){var se=0;K.subscribe(T.createOperatorSubscriber(J,function(U){var _e=se++;R.call(M,U,_e,K)&&(J.next(Y?_e:U),J.complete())},function(){J.next(Y?-1:void 0),J.complete()}))}}C.find=function V(R,M){return z.operate(N(R,M,"value"))},C.createFind=N},8654:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.findIndex=void 0;var z=w(1041),T=w(7668);C.findIndex=function V(N,R){return z.operate(T.createFind(N,R,"index"))}},1437:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.first=void 0;var z=w(9417),T=w(329),V=w(924),N=w(4748),R=w(2084),M=w(4822);C.first=function G(Y,K){var J=arguments.length>=2;return function(se){return se.pipe(Y?T.filter(function(U,_e){return Y(U,_e,se)}):M.identity,V.take(1),J?N.defaultIfEmpty(K):R.throwIfEmpty(function(){return new z.EmptyError}))}}},8e3:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.flatMap=void 0;var z=w(1081);C.flatMap=z.mergeMap},3197:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.groupBy=void 0;var z=w(2312),T=w(5147),V=w(6849),N=w(1041),R=w(3709);C.groupBy=function M(G,Y,K,J){return N.operate(function(se,U){var _e;Y&&"function"!=typeof Y?(K=Y.duration,_e=Y.element,J=Y.connector):_e=Y;var Ae=new Map,Ne=function(Pt){Ae.forEach(Pt),Pt(U)},Le=function(Pt){return Ne(function(vt){return vt.error(Pt)})},tt=0,_t=!1,Bt=new R.OperatorSubscriber(U,function(Pt){try{var vt=G(Pt),Gt=Ae.get(vt);if(!Gt){Ae.set(vt,Gt=J?J():new V.Subject);var Ht=function yt(Pt,vt){var Gt=new z.Observable(function(Ht){tt++;var jt=vt.subscribe(Ht);return function(){jt.unsubscribe(),0==--tt&&_t&&Bt.unsubscribe()}});return Gt.key=Pt,Gt}(vt,Gt);if(U.next(Ht),K){var jt=R.createOperatorSubscriber(Gt,function(){Gt.complete(),jt?.unsubscribe()},void 0,void 0,function(){return Ae.delete(vt)});Bt.add(T.innerFrom(K(Ht)).subscribe(jt))}}Gt.next(_e?_e(Pt):Pt)}catch(Yt){Le(Yt)}},function(){return Ne(function(Pt){return Pt.complete()})},Le,function(){return Ae.clear()},function(){return _t=!0,0===tt});se.subscribe(Bt)})}},6756:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.ignoreElements=void 0;var z=w(1041),T=w(3709),V=w(4884);C.ignoreElements=function N(){return z.operate(function(R,M){R.subscribe(T.createOperatorSubscriber(M,V.noop))})}},3430:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isEmpty=void 0;var z=w(1041),T=w(3709);C.isEmpty=function V(){return z.operate(function(N,R){N.subscribe(T.createOperatorSubscriber(R,function(){R.next(!1),R.complete()},function(){R.next(!0),R.complete()}))})}},7548:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.joinAllInternals=void 0;var z=w(4822),T=w(5837),V=w(644),N=w(1081),R=w(7193);C.joinAllInternals=function M(G,Y){return V.pipe(R.toArray(),N.mergeMap(function(K){return G(K)}),Y?T.mapOneOrManyArgs(Y):z.identity)}},6963:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.last=void 0;var z=w(9417),T=w(329),V=w(4012),N=w(2084),R=w(4748),M=w(4822);C.last=function G(Y,K){var J=arguments.length>=2;return function(se){return se.pipe(Y?T.filter(function(U,_e){return Y(U,_e,se)}):M.identity,V.takeLast(1),J?R.defaultIfEmpty(K):N.throwIfEmpty(function(){return new z.EmptyError}))}}},8341:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.map=void 0;var z=w(1041),T=w(3709);C.map=function V(N,R){return z.operate(function(M,G){var Y=0;M.subscribe(T.createOperatorSubscriber(G,function(K){G.next(N.call(R,K,Y++))}))})}},9588:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mapTo=void 0;var z=w(8341);C.mapTo=function T(V){return z.map(function(){return V})}},5374:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.materialize=void 0;var z=w(5234),T=w(1041),V=w(3709);C.materialize=function N(){return T.operate(function(R,M){R.subscribe(V.createOperatorSubscriber(M,function(G){M.next(z.Notification.createNext(G))},function(){M.next(z.Notification.createComplete()),M.complete()},function(G){M.next(z.Notification.createError(G)),M.complete()}))})}},2365:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.max=void 0;var z=w(3629),T=w(4756);C.max=function V(N){return z.reduce(T.isFunction(N)?function(R,M){return N(R,M)>0?R:M}:function(R,M){return R>M?R:M})}},1607:function(it,C,w){"use strict";var z=this&&this.__read||function(K,J){var se="function"==typeof Symbol&&K[Symbol.iterator];if(!se)return K;var _e,Ne,U=se.call(K),Ae=[];try{for(;(void 0===J||J-- >0)&&!(_e=U.next()).done;)Ae.push(_e.value)}catch(Le){Ne={error:Le}}finally{try{_e&&!_e.done&&(se=U.return)&&se.call(U)}finally{if(Ne)throw Ne.error}}return Ae},T=this&&this.__spreadArray||function(K,J){for(var se=0,U=J.length,_e=K.length;se<U;se++,_e++)K[_e]=J[se];return K};Object.defineProperty(C,"__esModule",{value:!0}),C.merge=void 0;var V=w(1041),N=w(365),R=w(8056),M=w(2953),G=w(8395);C.merge=function Y(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];var se=M.popScheduler(K),U=M.popNumber(K,1/0);return K=N.argsOrArgArray(K),V.operate(function(_e,Ae){R.mergeAll(U)(G.from(T([_e],z(K)),se)).subscribe(Ae)})}},8056:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mergeAll=void 0;var z=w(1081),T=w(4822);C.mergeAll=function V(N){return void 0===N&&(N=1/0),z.mergeMap(T.identity,N)}},3465:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mergeInternals=void 0;var z=w(5147),T=w(5616),V=w(3709);C.mergeInternals=function N(R,M,G,Y,K,J,se,U){var _e=[],Ae=0,Ne=0,Le=!1,tt=function(){Le&&!_e.length&&!Ae&&M.complete()},_t=function(yt){return Ae<Y?Bt(yt):_e.push(yt)},Bt=function(yt){J&&M.next(yt),Ae++;var Pt=!1;z.innerFrom(G(yt,Ne++)).subscribe(V.createOperatorSubscriber(M,function(vt){K?.(vt),J?_t(vt):M.next(vt)},function(){Pt=!0},void 0,function(){if(Pt)try{Ae--;for(var vt=function(){var Gt=_e.shift();se?T.executeSchedule(M,se,function(){return Bt(Gt)}):Bt(Gt)};_e.length&&Ae<Y;)vt();tt()}catch(Gt){M.error(Gt)}}))};return R.subscribe(V.createOperatorSubscriber(M,_t,function(){Le=!0,tt()})),function(){U?.()}}},1081:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mergeMap=void 0;var z=w(8341),T=w(5147),V=w(1041),N=w(3465),R=w(4756);C.mergeMap=function M(G,Y,K){return void 0===K&&(K=1/0),R.isFunction(Y)?M(function(J,se){return z.map(function(U,_e){return Y(J,U,se,_e)})(T.innerFrom(G(J,se)))},K):("number"==typeof Y&&(K=Y),V.operate(function(J,se){return N.mergeInternals(J,se,G,K)}))}},1544:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mergeMapTo=void 0;var z=w(1081),T=w(4756);C.mergeMapTo=function V(N,R,M){return void 0===M&&(M=1/0),T.isFunction(R)?z.mergeMap(function(){return N},R,M):("number"==typeof R&&(M=R),z.mergeMap(function(){return N},M))}},8530:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mergeScan=void 0;var z=w(1041),T=w(3465);C.mergeScan=function V(N,R,M){return void 0===M&&(M=1/0),z.operate(function(G,Y){var K=R;return T.mergeInternals(G,Y,function(J,se){return N(K,J,se)},M,function(J){K=J},!1,void 0,function(){return K=null})})}},6031:function(it,C,w){"use strict";var z=this&&this.__read||function(R,M){var G="function"==typeof Symbol&&R[Symbol.iterator];if(!G)return R;var K,se,Y=G.call(R),J=[];try{for(;(void 0===M||M-- >0)&&!(K=Y.next()).done;)J.push(K.value)}catch(U){se={error:U}}finally{try{K&&!K.done&&(G=Y.return)&&G.call(Y)}finally{if(se)throw se.error}}return J},T=this&&this.__spreadArray||function(R,M){for(var G=0,Y=M.length,K=R.length;G<Y;G++,K++)R[K]=M[G];return R};Object.defineProperty(C,"__esModule",{value:!0}),C.mergeWith=void 0;var V=w(1607);C.mergeWith=function N(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return V.merge.apply(void 0,T([],z(R)))}},1383:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.min=void 0;var z=w(3629),T=w(4756);C.min=function V(N){return z.reduce(T.isFunction(N)?function(R,M){return N(R,M)<0?R:M}:function(R,M){return R<M?R:M})}},7037:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.multicast=void 0;var z=w(7588),T=w(4756),V=w(2901);C.multicast=function N(R,M){var G=T.isFunction(R)?R:function(){return R};return T.isFunction(M)?V.connect(M,{connector:G}):function(Y){return new z.ConnectableObservable(Y,G)}}},4042:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.observeOn=void 0;var z=w(5616),T=w(1041),V=w(3709);C.observeOn=function N(R,M){return void 0===M&&(M=0),T.operate(function(G,Y){G.subscribe(V.createOperatorSubscriber(Y,function(K){return z.executeSchedule(Y,R,function(){return Y.next(K)},M)},function(){return z.executeSchedule(Y,R,function(){return Y.complete()},M)},function(K){return z.executeSchedule(Y,R,function(){return Y.error(K)},M)}))})}},4296:function(it,C,w){"use strict";var z=this&&this.__read||function(M,G){var Y="function"==typeof Symbol&&M[Symbol.iterator];if(!Y)return M;var J,U,K=Y.call(M),se=[];try{for(;(void 0===G||G-- >0)&&!(J=K.next()).done;)se.push(J.value)}catch(_e){U={error:_e}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(U)throw U.error}}return se},T=this&&this.__spreadArray||function(M,G){for(var Y=0,K=G.length,J=M.length;Y<K;Y++,J++)M[J]=G[Y];return M};Object.defineProperty(C,"__esModule",{value:!0}),C.onErrorResumeNext=C.onErrorResumeNextWith=void 0;var V=w(365),N=w(5336);function R(){for(var M=[],G=0;G<arguments.length;G++)M[G]=arguments[G];var Y=V.argsOrArgArray(M);return function(K){return N.onErrorResumeNext.apply(void 0,T([K],z(Y)))}}C.onErrorResumeNextWith=R,C.onErrorResumeNext=R},9743:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.pairwise=void 0;var z=w(1041),T=w(3709);C.pairwise=function V(){return z.operate(function(N,R){var M,G=!1;N.subscribe(T.createOperatorSubscriber(R,function(Y){var K=M;M=Y,G&&R.next([K,Y]),G=!0}))})}},3205:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.partition=void 0;var z=w(9819),T=w(329);C.partition=function V(N,R){return function(M){return[T.filter(N,R)(M),T.filter(z.not(N,R))(M)]}}},542:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.pluck=void 0;var z=w(8341);C.pluck=function T(){for(var V=[],N=0;N<arguments.length;N++)V[N]=arguments[N];var R=V.length;if(0===R)throw new Error("list of properties cannot be empty.");return z.map(function(M){for(var G=M,Y=0;Y<R;Y++){var K=G?.[V[Y]];if(!(typeof K<"u"))return;G=K}return G})}},3911:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.publish=void 0;var z=w(6849),T=w(7037),V=w(2901);C.publish=function N(R){return R?function(M){return V.connect(R)(M)}:function(M){return T.multicast(new z.Subject)(M)}}},1010:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.publishBehavior=void 0;var z=w(1851),T=w(7588);C.publishBehavior=function V(N){return function(R){var M=new z.BehaviorSubject(N);return new T.ConnectableObservable(R,function(){return M})}}},9892:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.publishLast=void 0;var z=w(6509),T=w(7588);C.publishLast=function V(){return function(N){var R=new z.AsyncSubject;return new T.ConnectableObservable(N,function(){return R})}}},5855:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.publishReplay=void 0;var z=w(6292),T=w(7037),V=w(4756);C.publishReplay=function N(R,M,G,Y){G&&!V.isFunction(G)&&(Y=G);var K=V.isFunction(G)?G:void 0;return function(J){return T.multicast(new z.ReplaySubject(R,M,Y),K)(J)}}},9546:function(it,C,w){"use strict";var z=this&&this.__read||function(M,G){var Y="function"==typeof Symbol&&M[Symbol.iterator];if(!Y)return M;var J,U,K=Y.call(M),se=[];try{for(;(void 0===G||G-- >0)&&!(J=K.next()).done;)se.push(J.value)}catch(_e){U={error:_e}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(U)throw U.error}}return se},T=this&&this.__spreadArray||function(M,G){for(var Y=0,K=G.length,J=M.length;Y<K;Y++,J++)M[J]=G[Y];return M};Object.defineProperty(C,"__esModule",{value:!0}),C.race=void 0;var V=w(365),N=w(3238);C.race=function R(){for(var M=[],G=0;G<arguments.length;G++)M[G]=arguments[G];return N.raceWith.apply(void 0,T([],z(V.argsOrArgArray(M))))}},3238:function(it,C,w){"use strict";var z=this&&this.__read||function(G,Y){var K="function"==typeof Symbol&&G[Symbol.iterator];if(!K)return G;var se,_e,J=K.call(G),U=[];try{for(;(void 0===Y||Y-- >0)&&!(se=J.next()).done;)U.push(se.value)}catch(Ae){_e={error:Ae}}finally{try{se&&!se.done&&(K=J.return)&&K.call(J)}finally{if(_e)throw _e.error}}return U},T=this&&this.__spreadArray||function(G,Y){for(var K=0,J=Y.length,se=G.length;K<J;K++,se++)G[se]=Y[K];return G};Object.defineProperty(C,"__esModule",{value:!0}),C.raceWith=void 0;var V=w(2706),N=w(1041),R=w(4822);C.raceWith=function M(){for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];return G.length?N.operate(function(K,J){V.raceInit(T([K],z(G)))(J)}):R.identity}},3629:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.reduce=void 0;var z=w(8914),T=w(1041);C.reduce=function V(N,R){return T.operate(z.scanInternals(N,R,arguments.length>=2,!1,!0))}},2359:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.refCount=void 0;var z=w(1041),T=w(3709);C.refCount=function V(){return z.operate(function(N,R){var M=null;N._refCount++;var G=T.createOperatorSubscriber(R,void 0,void 0,void 0,function(){if(!N||N._refCount<=0||0<--N._refCount)M=null;else{var Y=N._connection,K=M;M=null,Y&&(!K||Y===K)&&Y.unsubscribe(),R.unsubscribe()}});N.subscribe(G),G.closed||(M=N.connect())})}},4736:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.repeat=void 0;var z=w(6086),T=w(1041),V=w(3709),N=w(5147),R=w(5142);C.repeat=function M(G){var Y,J,K=1/0;return null!=G&&("object"==typeof G?(K=void 0===(Y=G.count)?1/0:Y,J=G.delay):K=G),K<=0?function(){return z.EMPTY}:T.operate(function(se,U){var Ae,_e=0,Ne=function(){if(Ae?.unsubscribe(),Ae=null,null!=J){var tt="number"==typeof J?R.timer(J):N.innerFrom(J(_e)),_t=V.createOperatorSubscriber(U,function(){_t.unsubscribe(),Le()});tt.subscribe(_t)}else Le()},Le=function(){var tt=!1;Ae=se.subscribe(V.createOperatorSubscriber(U,void 0,function(){++_e<K?Ae?Ne():tt=!0:U.complete()})),tt&&Ne()};Le()})}},3852:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.repeatWhen=void 0;var z=w(5147),T=w(6849),V=w(1041),N=w(3709);C.repeatWhen=function R(M){return V.operate(function(G,Y){var K,se,J=!1,U=!1,_e=!1,Ae=function(){return _e&&U&&(Y.complete(),!0)},Le=function(){_e=!1,K=G.subscribe(N.createOperatorSubscriber(Y,void 0,function(){_e=!0,!Ae()&&(se||(se=new T.Subject,z.innerFrom(M(se)).subscribe(N.createOperatorSubscriber(Y,function(){K?Le():J=!0},function(){U=!0,Ae()}))),se).next()})),J&&(K.unsubscribe(),K=null,J=!1,Le())};Le()})}},5241:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.retry=void 0;var z=w(1041),T=w(3709),V=w(4822),N=w(5142),R=w(5147);C.retry=function M(G){var Y;void 0===G&&(G=1/0);var K=(Y=G&&"object"==typeof G?G:{count:G}).count,J=void 0===K?1/0:K,se=Y.delay,U=Y.resetOnSuccess,_e=void 0!==U&&U;return J<=0?V.identity:z.operate(function(Ae,Ne){var tt,Le=0,_t=function(){var Bt=!1;tt=Ae.subscribe(T.createOperatorSubscriber(Ne,function(yt){_e&&(Le=0),Ne.next(yt)},void 0,function(yt){if(Le++<J){var Pt=function(){tt?(tt.unsubscribe(),tt=null,_t()):Bt=!0};if(null!=se){var vt="number"==typeof se?N.timer(se):R.innerFrom(se(yt,Le)),Gt=T.createOperatorSubscriber(Ne,function(){Gt.unsubscribe(),Pt()},function(){Ne.complete()});vt.subscribe(Gt)}else Pt()}else Ne.error(yt)})),Bt&&(tt.unsubscribe(),tt=null,_t())};_t()})}},3665:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.retryWhen=void 0;var z=w(5147),T=w(6849),V=w(1041),N=w(3709);C.retryWhen=function R(M){return V.operate(function(G,Y){var K,se,J=!1,U=function(){K=G.subscribe(N.createOperatorSubscriber(Y,void 0,void 0,function(_e){se||(se=new T.Subject,z.innerFrom(M(se)).subscribe(N.createOperatorSubscriber(Y,function(){return K?U():J=!0}))),se&&se.next(_e)})),J&&(K.unsubscribe(),K=null,J=!1,U())};U()})}},9545:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.sample=void 0;var z=w(5147),T=w(1041),V=w(4884),N=w(3709);C.sample=function R(M){return T.operate(function(G,Y){var K=!1,J=null;G.subscribe(N.createOperatorSubscriber(Y,function(se){K=!0,J=se})),z.innerFrom(M).subscribe(N.createOperatorSubscriber(Y,function(){if(K){K=!1;var se=J;J=null,Y.next(se)}},V.noop))})}},2620:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.sampleTime=void 0;var z=w(6939),T=w(9545),V=w(6814);C.sampleTime=function N(R,M){return void 0===M&&(M=z.asyncScheduler),T.sample(V.interval(R,M))}},8086:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scan=void 0;var z=w(1041),T=w(8914);C.scan=function V(N,R){return z.operate(T.scanInternals(N,R,arguments.length>=2,!0))}},8914:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scanInternals=void 0;var z=w(3709);C.scanInternals=function T(V,N,R,M,G){return function(Y,K){var J=R,se=N,U=0;Y.subscribe(z.createOperatorSubscriber(K,function(_e){var Ae=U++;se=J?V(se,_e,Ae):(J=!0,_e),M&&K.next(se)},G&&function(){J&&K.next(se),K.complete()}))}}},6344:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.sequenceEqual=void 0;var z=w(1041),T=w(3709),V=w(5147);C.sequenceEqual=function N(M,G){return void 0===G&&(G=function(Y,K){return Y===K}),z.operate(function(Y,K){var J={buffer:[],complete:!1},se={buffer:[],complete:!1},U=function(Ae){K.next(Ae),K.complete()},_e=function(Ae,Ne){var Le=T.createOperatorSubscriber(K,function(tt){var _t=Ne.buffer;0===_t.length?Ne.complete?U(!1):Ae.buffer.push(tt):!G(tt,_t.shift())&&U(!1)},function(){Ae.complete=!0,Ne.complete&&U(0===Ne.buffer.length),Le?.unsubscribe()});return Le};Y.subscribe(_e(J,se)),V.innerFrom(M).subscribe(_e(se,J))})}},9684:function(it,C,w){"use strict";var z=this&&this.__read||function(K,J){var se="function"==typeof Symbol&&K[Symbol.iterator];if(!se)return K;var _e,Ne,U=se.call(K),Ae=[];try{for(;(void 0===J||J-- >0)&&!(_e=U.next()).done;)Ae.push(_e.value)}catch(Le){Ne={error:Le}}finally{try{_e&&!_e.done&&(se=U.return)&&se.call(U)}finally{if(Ne)throw Ne.error}}return Ae},T=this&&this.__spreadArray||function(K,J){for(var se=0,U=J.length,_e=K.length;se<U;se++,_e++)K[_e]=J[se];return K};Object.defineProperty(C,"__esModule",{value:!0}),C.share=void 0;var V=w(5147),N=w(6849),R=w(6027),M=w(1041);function Y(K,J){for(var se=[],U=2;U<arguments.length;U++)se[U-2]=arguments[U];if(!0!==J){if(!1!==J){var _e=new R.SafeSubscriber({next:function(){_e.unsubscribe(),K()}});return V.innerFrom(J.apply(void 0,T([],z(se)))).subscribe(_e)}}else K()}C.share=function G(K){void 0===K&&(K={});var J=K.connector,se=void 0===J?function(){return new N.Subject}:J,U=K.resetOnError,_e=void 0===U||U,Ae=K.resetOnComplete,Ne=void 0===Ae||Ae,Le=K.resetOnRefCountZero,tt=void 0===Le||Le;return function(_t){var Bt,yt,Pt,vt=0,Gt=!1,Ht=!1,jt=function(){yt?.unsubscribe(),yt=void 0},Yt=function(){jt(),Bt=Pt=void 0,Gt=Ht=!1},On=function(){var In=Bt;Yt(),In?.unsubscribe()};return M.operate(function(In,Rn){vt++,!Ht&&!Gt&&jt();var Nr=Pt=Pt??se();Rn.add(function(){0==--vt&&!Ht&&!Gt&&(yt=Y(On,tt))}),Nr.subscribe(Rn),!Bt&&vt>0&&(Bt=new R.SafeSubscriber({next:function(wr){return Nr.next(wr)},error:function(wr){Ht=!0,jt(),yt=Y(Yt,_e,wr),Nr.error(wr)},complete:function(){Gt=!0,jt(),yt=Y(Yt,Ne),Nr.complete()}}),V.innerFrom(In).subscribe(Bt))})(_t)}}},2591:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.shareReplay=void 0;var z=w(6292),T=w(9684);C.shareReplay=function V(N,R,M){var G,Y,K,J,se=!1;return N&&"object"==typeof N?(J=void 0===(G=N.bufferSize)?1/0:G,R=void 0===(Y=N.windowTime)?1/0:Y,se=void 0!==(K=N.refCount)&&K,M=N.scheduler):J=N??1/0,T.share({connector:function(){return new z.ReplaySubject(J,R,M)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:se})}},55:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.single=void 0;var z=w(9417),T=w(9963),V=w(8049),N=w(1041),R=w(3709);C.single=function M(G){return N.operate(function(Y,K){var se,J=!1,U=!1,_e=0;Y.subscribe(R.createOperatorSubscriber(K,function(Ae){U=!0,(!G||G(Ae,_e++,Y))&&(J&&K.error(new T.SequenceError("Too many matching values")),J=!0,se=Ae)},function(){J?(K.next(se),K.complete()):K.error(U?new V.NotFoundError("No matching values"):new z.EmptyError)}))})}},1384:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.skip=void 0;var z=w(329);C.skip=function T(V){return z.filter(function(N,R){return V<=R})}},3528:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.skipLast=void 0;var z=w(4822),T=w(1041),V=w(3709);C.skipLast=function N(R){return R<=0?z.identity:T.operate(function(M,G){var Y=new Array(R),K=0;return M.subscribe(V.createOperatorSubscriber(G,function(J){var se=K++;if(se<R)Y[se]=J;else{var U=se%R,_e=Y[U];Y[U]=J,G.next(_e)}})),function(){Y=null}})}},7694:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.skipUntil=void 0;var z=w(1041),T=w(3709),V=w(5147),N=w(4884);C.skipUntil=function R(M){return z.operate(function(G,Y){var K=!1,J=T.createOperatorSubscriber(Y,function(){J?.unsubscribe(),K=!0},N.noop);V.innerFrom(M).subscribe(J),G.subscribe(T.createOperatorSubscriber(Y,function(se){return K&&Y.next(se)}))})}},9659:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.skipWhile=void 0;var z=w(1041),T=w(3709);C.skipWhile=function V(N){return z.operate(function(R,M){var G=!1,Y=0;R.subscribe(T.createOperatorSubscriber(M,function(K){return(G||(G=!N(K,Y++)))&&M.next(K)}))})}},271:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.startWith=void 0;var z=w(8819),T=w(2953),V=w(1041);C.startWith=function N(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];var G=T.popScheduler(R);return V.operate(function(Y,K){(G?z.concat(R,Y,G):z.concat(R,Y)).subscribe(K)})}},6734:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.subscribeOn=void 0;var z=w(1041);C.subscribeOn=function T(V,N){return void 0===N&&(N=0),z.operate(function(R,M){M.add(V.schedule(function(){return R.subscribe(M)},N))})}},5880:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.switchAll=void 0;var z=w(5433),T=w(4822);C.switchAll=function V(){return z.switchMap(T.identity)}},5433:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.switchMap=void 0;var z=w(5147),T=w(1041),V=w(3709);C.switchMap=function N(R,M){return T.operate(function(G,Y){var K=null,J=0,se=!1,U=function(){return se&&!K&&Y.complete()};G.subscribe(V.createOperatorSubscriber(Y,function(_e){K?.unsubscribe();var Ae=0,Ne=J++;z.innerFrom(R(_e,Ne)).subscribe(K=V.createOperatorSubscriber(Y,function(Le){return Y.next(M?M(_e,Le,Ne,Ae++):Le)},function(){K=null,U()}))},function(){se=!0,U()}))})}},7544:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.switchMapTo=void 0;var z=w(5433),T=w(4756);C.switchMapTo=function V(N,R){return T.isFunction(R)?z.switchMap(function(){return N},R):z.switchMap(function(){return N})}},3730:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.switchScan=void 0;var z=w(5433),T=w(1041);C.switchScan=function V(N,R){return T.operate(function(M,G){var Y=R;return z.switchMap(function(K,J){return N(Y,K,J)},function(K,J){return Y=J,J})(M).subscribe(G),function(){Y=null}})}},924:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.take=void 0;var z=w(6086),T=w(1041),V=w(3709);C.take=function N(R){return R<=0?function(){return z.EMPTY}:T.operate(function(M,G){var Y=0;M.subscribe(V.createOperatorSubscriber(G,function(K){++Y<=R&&(G.next(K),R<=Y&&G.complete())}))})}},4012:function(it,C,w){"use strict";var z=this&&this.__values||function(M){var G="function"==typeof Symbol&&Symbol.iterator,Y=G&&M[G],K=0;if(Y)return Y.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&K>=M.length&&(M=void 0),{value:M&&M[K++],done:!M}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.takeLast=void 0;var T=w(6086),V=w(1041),N=w(3709);C.takeLast=function R(M){return M<=0?function(){return T.EMPTY}:V.operate(function(G,Y){var K=[];G.subscribe(N.createOperatorSubscriber(Y,function(J){K.push(J),M<K.length&&K.shift()},function(){var J,se;try{for(var U=z(K),_e=U.next();!_e.done;_e=U.next())Y.next(_e.value)}catch(Ne){J={error:Ne}}finally{try{_e&&!_e.done&&(se=U.return)&&se.call(U)}finally{if(J)throw J.error}}Y.complete()},void 0,function(){K=null}))})}},3690:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.takeUntil=void 0;var z=w(1041),T=w(3709),V=w(5147),N=w(4884);C.takeUntil=function R(M){return z.operate(function(G,Y){V.innerFrom(M).subscribe(T.createOperatorSubscriber(Y,function(){return Y.complete()},N.noop)),!Y.closed&&G.subscribe(Y)})}},2972:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.takeWhile=void 0;var z=w(1041),T=w(3709);C.takeWhile=function V(N,R){return void 0===R&&(R=!1),z.operate(function(M,G){var Y=0;M.subscribe(T.createOperatorSubscriber(G,function(K){var J=N(K,Y++);(J||R)&&G.next(K),!J&&G.complete()}))})}},4890:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.tap=void 0;var z=w(4756),T=w(1041),V=w(3709),N=w(4822);C.tap=function R(M,G,Y){var K=z.isFunction(M)||G||Y?{next:M,error:G,complete:Y}:M;return K?T.operate(function(J,se){var U;null===(U=K.subscribe)||void 0===U||U.call(K);var _e=!0;J.subscribe(V.createOperatorSubscriber(se,function(Ae){var Ne;null===(Ne=K.next)||void 0===Ne||Ne.call(K,Ae),se.next(Ae)},function(){var Ae;_e=!1,null===(Ae=K.complete)||void 0===Ae||Ae.call(K),se.complete()},function(Ae){var Ne;_e=!1,null===(Ne=K.error)||void 0===Ne||Ne.call(K,Ae),se.error(Ae)},function(){var Ae,Ne;_e&&(null===(Ae=K.unsubscribe)||void 0===Ae||Ae.call(K)),null===(Ne=K.finalize)||void 0===Ne||Ne.call(K)}))}):N.identity}},3023:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.throttle=void 0;var z=w(1041),T=w(3709),V=w(5147);C.throttle=function N(R,M){return z.operate(function(G,Y){var K=M??{},J=K.leading,se=void 0===J||J,U=K.trailing,_e=void 0!==U&&U,Ae=!1,Ne=null,Le=null,tt=!1,_t=function(){Le?.unsubscribe(),Le=null,_e&&(Pt(),tt&&Y.complete())},Bt=function(){Le=null,tt&&Y.complete()},yt=function(vt){return Le=V.innerFrom(R(vt)).subscribe(T.createOperatorSubscriber(Y,_t,Bt))},Pt=function(){if(Ae){Ae=!1;var vt=Ne;Ne=null,Y.next(vt),!tt&&yt(vt)}};G.subscribe(T.createOperatorSubscriber(Y,function(vt){Ae=!0,Ne=vt,(!Le||Le.closed)&&(se?Pt():yt(vt))},function(){tt=!0,(!(_e&&Ae&&Le)||Le.closed)&&Y.complete()}))})}},7098:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.throttleTime=void 0;var z=w(6939),T=w(3023),V=w(5142);C.throttleTime=function N(R,M,G){void 0===M&&(M=z.asyncScheduler);var Y=V.timer(R,M);return T.throttle(function(){return Y},G)}},2084:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.throwIfEmpty=void 0;var z=w(9417),T=w(1041),V=w(3709);function R(){return new z.EmptyError}C.throwIfEmpty=function N(M){return void 0===M&&(M=R),T.operate(function(G,Y){var K=!1;G.subscribe(V.createOperatorSubscriber(Y,function(J){K=!0,Y.next(J)},function(){return K?Y.complete():Y.error(M())}))})}},7471:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.TimeInterval=C.timeInterval=void 0;var z=w(6939),T=w(1041),V=w(3709);C.timeInterval=function N(M){return void 0===M&&(M=z.asyncScheduler),T.operate(function(G,Y){var K=M.now();G.subscribe(V.createOperatorSubscriber(Y,function(J){var se=M.now(),U=se-K;K=se,Y.next(new R(J,U))}))})};var R=function(){return function M(G,Y){this.value=G,this.interval=Y}}();C.TimeInterval=R},2156:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.timeout=C.TimeoutError=void 0;var z=w(6939),T=w(6128),V=w(1041),N=w(5147),R=w(2750),M=w(3709),G=w(5616);function K(J){throw new C.TimeoutError(J)}C.TimeoutError=R.createErrorClass(function(J){return function(U){void 0===U&&(U=null),J(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=U}}),C.timeout=function Y(J,se){var U=T.isValidDate(J)?{first:J}:"number"==typeof J?{each:J}:J,_e=U.first,Ae=U.each,Ne=U.with,Le=void 0===Ne?K:Ne,tt=U.scheduler,_t=void 0===tt?se??z.asyncScheduler:tt,Bt=U.meta,yt=void 0===Bt?null:Bt;if(null==_e&&null==Ae)throw new TypeError("No timeout provided.");return V.operate(function(Pt,vt){var Gt,Ht,jt=null,Yt=0,On=function(In){Ht=G.executeSchedule(vt,_t,function(){try{Gt.unsubscribe(),N.innerFrom(Le({meta:yt,lastValue:jt,seen:Yt})).subscribe(vt)}catch(Rn){vt.error(Rn)}},In)};Gt=Pt.subscribe(M.createOperatorSubscriber(vt,function(In){Ht?.unsubscribe(),Yt++,vt.next(jt=In),Ae>0&&On(Ae)},void 0,void 0,function(){Ht?.closed||Ht?.unsubscribe(),jt=null})),!Yt&&On(null!=_e?"number"==typeof _e?_e:+_e-_t.now():Ae)})}},9988:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.timeoutWith=void 0;var z=w(6939),T=w(6128),V=w(2156);C.timeoutWith=function N(R,M,G){var Y,K,J;if(G=G??z.async,T.isValidDate(R)?Y=R:"number"==typeof R&&(K=R),!M)throw new TypeError("No observable provided to switch to");if(J=function(){return M},null==Y&&null==K)throw new TypeError("No timeout provided.");return V.timeout({first:Y,each:K,scheduler:G,with:J})}},1475:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.timestamp=void 0;var z=w(9090),T=w(8341);C.timestamp=function V(N){return void 0===N&&(N=z.dateTimestampProvider),T.map(function(R){return{value:R,timestamp:N.now()}})}},7193:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.toArray=void 0;var z=w(3629),T=w(1041),V=function(R,M){return R.push(M),R};C.toArray=function N(){return T.operate(function(R,M){z.reduce(V,[])(R).subscribe(M)})}},7975:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.window=void 0;var z=w(6849),T=w(1041),V=w(3709),N=w(4884),R=w(5147);C.window=function M(G){return T.operate(function(Y,K){var J=new z.Subject;K.next(J.asObservable());var se=function(U){J.error(U),K.error(U)};return Y.subscribe(V.createOperatorSubscriber(K,function(U){return J?.next(U)},function(){J.complete(),K.complete()},se)),R.innerFrom(G).subscribe(V.createOperatorSubscriber(K,function(){J.complete(),K.next(J=new z.Subject)},N.noop,se)),function(){J?.unsubscribe(),J=null}})}},4620:function(it,C,w){"use strict";var z=this&&this.__values||function(M){var G="function"==typeof Symbol&&Symbol.iterator,Y=G&&M[G],K=0;if(Y)return Y.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&K>=M.length&&(M=void 0),{value:M&&M[K++],done:!M}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.windowCount=void 0;var T=w(6849),V=w(1041),N=w(3709);C.windowCount=function R(M,G){void 0===G&&(G=0);var Y=G>0?G:M;return V.operate(function(K,J){var se=[new T.Subject],_e=0;J.next(se[0].asObservable()),K.subscribe(N.createOperatorSubscriber(J,function(Ae){var Ne,Le;try{for(var tt=z(se),_t=tt.next();!_t.done;_t=tt.next())_t.value.next(Ae)}catch(vt){Ne={error:vt}}finally{try{_t&&!_t.done&&(Le=tt.return)&&Le.call(tt)}finally{if(Ne)throw Ne.error}}var yt=_e-M+1;if(yt>=0&&yt%Y==0&&se.shift().complete(),++_e%Y==0){var Pt=new T.Subject;se.push(Pt),J.next(Pt.asObservable())}},function(){for(;se.length>0;)se.shift().complete();J.complete()},function(Ae){for(;se.length>0;)se.shift().error(Ae);J.error(Ae)},function(){se=null}))})}},8466:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.windowTime=void 0;var z=w(6849),T=w(6939),V=w(1172),N=w(1041),R=w(3709),M=w(2713),G=w(2953),Y=w(5616);C.windowTime=function K(J){for(var se,U,_e=[],Ae=1;Ae<arguments.length;Ae++)_e[Ae-1]=arguments[Ae];var Ne=null!==(se=G.popScheduler(_e))&&void 0!==se?se:T.asyncScheduler,Le=null!==(U=_e[0])&&void 0!==U?U:null,tt=_e[1]||1/0;return N.operate(function(_t,Bt){var yt=[],Pt=!1,vt=function(Yt){var In=Yt.subs;Yt.window.complete(),In.unsubscribe(),M.arrRemove(yt,Yt),Pt&&Gt()},Gt=function(){if(yt){var Yt=new V.Subscription;Bt.add(Yt);var On=new z.Subject,In={window:On,subs:Yt,seen:0};yt.push(In),Bt.next(On.asObservable()),Y.executeSchedule(Yt,Ne,function(){return vt(In)},J)}};null!==Le&&Le>=0?Y.executeSchedule(Bt,Ne,Gt,Le,!0):Pt=!0,Gt();var Ht=function(Yt){return yt.slice().forEach(Yt)},jt=function(Yt){Ht(function(On){return Yt(On.window)}),Yt(Bt),Bt.unsubscribe()};return _t.subscribe(R.createOperatorSubscriber(Bt,function(Yt){Ht(function(On){On.window.next(Yt),tt<=++On.seen&&vt(On)})},function(){return jt(function(Yt){return Yt.complete()})},function(Yt){return jt(function(On){return On.error(Yt)})})),function(){yt=null}})}},8251:function(it,C,w){"use strict";var z=this&&this.__values||function(J){var se="function"==typeof Symbol&&Symbol.iterator,U=se&&J[se],_e=0;if(U)return U.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&_e>=J.length&&(J=void 0),{value:J&&J[_e++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(C,"__esModule",{value:!0}),C.windowToggle=void 0;var T=w(6849),V=w(1172),N=w(1041),R=w(5147),M=w(3709),G=w(4884),Y=w(2713);C.windowToggle=function K(J,se){return N.operate(function(U,_e){var Ae=[],Ne=function(Le){for(;0<Ae.length;)Ae.shift().error(Le);_e.error(Le)};R.innerFrom(J).subscribe(M.createOperatorSubscriber(_e,function(Le){var tt=new T.Subject;Ae.push(tt);var yt,_t=new V.Subscription;try{yt=R.innerFrom(se(Le))}catch(Pt){return void Ne(Pt)}_e.next(tt.asObservable()),_t.add(yt.subscribe(M.createOperatorSubscriber(_e,function(){Y.arrRemove(Ae,tt),tt.complete(),_t.unsubscribe()},G.noop,Ne)))},G.noop)),U.subscribe(M.createOperatorSubscriber(_e,function(Le){var tt,_t,Bt=Ae.slice();try{for(var yt=z(Bt),Pt=yt.next();!Pt.done;Pt=yt.next())Pt.value.next(Le)}catch(Gt){tt={error:Gt}}finally{try{Pt&&!Pt.done&&(_t=yt.return)&&_t.call(yt)}finally{if(tt)throw tt.error}}},function(){for(;0<Ae.length;)Ae.shift().complete();_e.complete()},Ne,function(){for(;0<Ae.length;)Ae.shift().unsubscribe()}))})}},5095:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.windowWhen=void 0;var z=w(6849),T=w(1041),V=w(3709),N=w(5147);C.windowWhen=function R(M){return T.operate(function(G,Y){var K,J,se=function(_e){K.error(_e),Y.error(_e)},U=function(){var _e;J?.unsubscribe(),K?.complete(),K=new z.Subject,Y.next(K.asObservable());try{_e=N.innerFrom(M())}catch(Ae){return void se(Ae)}_e.subscribe(J=V.createOperatorSubscriber(Y,U,U,se))};U(),G.subscribe(V.createOperatorSubscriber(Y,function(_e){return K.next(_e)},function(){K.complete(),Y.complete()},se,function(){J?.unsubscribe(),K=null}))})}},7632:function(it,C,w){"use strict";var z=this&&this.__read||function(J,se){var U="function"==typeof Symbol&&J[Symbol.iterator];if(!U)return J;var Ae,Le,_e=U.call(J),Ne=[];try{for(;(void 0===se||se-- >0)&&!(Ae=_e.next()).done;)Ne.push(Ae.value)}catch(tt){Le={error:tt}}finally{try{Ae&&!Ae.done&&(U=_e.return)&&U.call(_e)}finally{if(Le)throw Le.error}}return Ne},T=this&&this.__spreadArray||function(J,se){for(var U=0,_e=se.length,Ae=J.length;U<_e;U++,Ae++)J[Ae]=se[U];return J};Object.defineProperty(C,"__esModule",{value:!0}),C.withLatestFrom=void 0;var V=w(1041),N=w(3709),R=w(5147),M=w(4822),G=w(4884),Y=w(2953);C.withLatestFrom=function K(){for(var J=[],se=0;se<arguments.length;se++)J[se]=arguments[se];var U=Y.popResultSelector(J);return V.operate(function(_e,Ae){for(var Ne=J.length,Le=new Array(Ne),tt=J.map(function(){return!1}),_t=!1,Bt=function(Pt){R.innerFrom(J[Pt]).subscribe(N.createOperatorSubscriber(Ae,function(vt){Le[Pt]=vt,!_t&&!tt[Pt]&&(tt[Pt]=!0,(_t=tt.every(M.identity))&&(tt=null))},G.noop))},yt=0;yt<Ne;yt++)Bt(yt);_e.subscribe(N.createOperatorSubscriber(Ae,function(Pt){if(_t){var vt=T([Pt],z(Le));Ae.next(U?U.apply(void 0,T([],z(vt))):vt)}}))})}},3760:function(it,C,w){"use strict";var z=this&&this.__read||function(M,G){var Y="function"==typeof Symbol&&M[Symbol.iterator];if(!Y)return M;var J,U,K=Y.call(M),se=[];try{for(;(void 0===G||G-- >0)&&!(J=K.next()).done;)se.push(J.value)}catch(_e){U={error:_e}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(U)throw U.error}}return se},T=this&&this.__spreadArray||function(M,G){for(var Y=0,K=G.length,J=M.length;Y<K;Y++,J++)M[J]=G[Y];return M};Object.defineProperty(C,"__esModule",{value:!0}),C.zip=void 0;var V=w(2008),N=w(1041);C.zip=function R(){for(var M=[],G=0;G<arguments.length;G++)M[G]=arguments[G];return N.operate(function(Y,K){V.zip.apply(void 0,T([Y],z(M))).subscribe(K)})}},1201:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.zipAll=void 0;var z=w(2008),T=w(7548);C.zipAll=function V(N){return T.joinAllInternals(z.zip,N)}},5832:function(it,C,w){"use strict";var z=this&&this.__read||function(R,M){var G="function"==typeof Symbol&&R[Symbol.iterator];if(!G)return R;var K,se,Y=G.call(R),J=[];try{for(;(void 0===M||M-- >0)&&!(K=Y.next()).done;)J.push(K.value)}catch(U){se={error:U}}finally{try{K&&!K.done&&(G=Y.return)&&G.call(Y)}finally{if(se)throw se.error}}return J},T=this&&this.__spreadArray||function(R,M){for(var G=0,Y=M.length,K=R.length;G<Y;G++,K++)R[K]=M[G];return R};Object.defineProperty(C,"__esModule",{value:!0}),C.zipWith=void 0;var V=w(3760);C.zipWith=function N(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return V.zip.apply(void 0,T([],z(R)))}},579:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scheduleArray=void 0;var z=w(2312);C.scheduleArray=function T(V,N){return new z.Observable(function(R){var M=0;return N.schedule(function(){M===V.length?R.complete():(R.next(V[M++]),R.closed||this.schedule())})})}},1892:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scheduleAsyncIterable=void 0;var z=w(2312),T=w(5616);C.scheduleAsyncIterable=function V(N,R){if(!N)throw new Error("Iterable cannot be null");return new z.Observable(function(M){T.executeSchedule(M,R,function(){var G=N[Symbol.asyncIterator]();T.executeSchedule(M,R,function(){G.next().then(function(Y){Y.done?M.complete():M.next(Y.value)})},0,!0)})})}},766:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scheduleIterable=void 0;var z=w(2312),T=w(9878),V=w(4756),N=w(5616);C.scheduleIterable=function R(M,G){return new z.Observable(function(Y){var K;return N.executeSchedule(Y,G,function(){K=M[T.iterator](),N.executeSchedule(Y,G,function(){var J,se,U;try{se=(J=K.next()).value,U=J.done}catch(_e){return void Y.error(_e)}U?Y.complete():Y.next(se)},0,!0)}),function(){return V.isFunction(K?.return)&&K.return()}})}},1181:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scheduleObservable=void 0;var z=w(5147),T=w(4042),V=w(6734);C.scheduleObservable=function N(R,M){return z.innerFrom(R).pipe(V.subscribeOn(M),T.observeOn(M))}},3675:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.schedulePromise=void 0;var z=w(5147),T=w(4042),V=w(6734);C.schedulePromise=function N(R,M){return z.innerFrom(R).pipe(V.subscribeOn(M),T.observeOn(M))}},3747:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scheduleReadableStreamLike=void 0;var z=w(1892),T=w(7635);C.scheduleReadableStreamLike=function V(N,R){return z.scheduleAsyncIterable(T.readableStreamLikeToAsyncGenerator(N),R)}},8418:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.scheduled=void 0;var z=w(1181),T=w(3675),V=w(579),N=w(766),R=w(1892),M=w(3562),G=w(5355),Y=w(7052),K=w(8158),J=w(8740),se=w(3856),U=w(7635),_e=w(3747);C.scheduled=function Ae(Ne,Le){if(null!=Ne){if(M.isInteropObservable(Ne))return z.scheduleObservable(Ne,Le);if(Y.isArrayLike(Ne))return V.scheduleArray(Ne,Le);if(G.isPromise(Ne))return T.schedulePromise(Ne,Le);if(J.isAsyncIterable(Ne))return R.scheduleAsyncIterable(Ne,Le);if(K.isIterable(Ne))return N.scheduleIterable(Ne,Le);if(U.isReadableStreamLike(Ne))return _e.scheduleReadableStreamLike(Ne,Le)}throw se.createInvalidObservableTypeError(Ne)}},453:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.Action=void 0;var V=function(N){function R(M,G){return N.call(this)||this}return z(R,N),R.prototype.schedule=function(M,G){return void 0===G&&(G=0),this},R}(w(1172).Subscription);C.Action=V},8270:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var R=function(M,G){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Y[J]=K[J])})(M,G)};return function(M,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function Y(){this.constructor=M}R(M,G),M.prototype=null===G?Object.create(G):(Y.prototype=G.prototype,new Y)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AnimationFrameAction=void 0;var T=w(7593),V=w(5657),N=function(R){function M(G,Y){var K=R.call(this,G,Y)||this;return K.scheduler=G,K.work=Y,K}return z(M,R),M.prototype.requestAsyncId=function(G,Y,K){return void 0===K&&(K=0),null!==K&&K>0?R.prototype.requestAsyncId.call(this,G,Y,K):(G.actions.push(this),G._scheduled||(G._scheduled=V.animationFrameProvider.requestAnimationFrame(function(){return G.flush(void 0)})))},M.prototype.recycleAsyncId=function(G,Y,K){var J;if(void 0===K&&(K=0),null!=K?K>0:this.delay>0)return R.prototype.recycleAsyncId.call(this,G,Y,K);var se=G.actions;null!=Y&&(null===(J=se[se.length-1])||void 0===J?void 0:J.id)!==Y&&(V.animationFrameProvider.cancelAnimationFrame(Y),G._scheduled=void 0)},M}(T.AsyncAction);C.AnimationFrameAction=N},6875:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AnimationFrameScheduler=void 0;var V=function(N){function R(){return null!==N&&N.apply(this,arguments)||this}return z(R,N),R.prototype.flush=function(M){this._active=!0;var G=this._scheduled;this._scheduled=void 0;var K,Y=this.actions;M=M||Y.shift();do{if(K=M.execute(M.state,M.delay))break}while((M=Y[0])&&M.id===G&&Y.shift());if(this._active=!1,K){for(;(M=Y[0])&&M.id===G&&Y.shift();)M.unsubscribe();throw K}},R}(w(9578).AsyncScheduler);C.AnimationFrameScheduler=V},7560:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var R=function(M,G){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Y[J]=K[J])})(M,G)};return function(M,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function Y(){this.constructor=M}R(M,G),M.prototype=null===G?Object.create(G):(Y.prototype=G.prototype,new Y)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AsapAction=void 0;var T=w(7593),V=w(7179),N=function(R){function M(G,Y){var K=R.call(this,G,Y)||this;return K.scheduler=G,K.work=Y,K}return z(M,R),M.prototype.requestAsyncId=function(G,Y,K){return void 0===K&&(K=0),null!==K&&K>0?R.prototype.requestAsyncId.call(this,G,Y,K):(G.actions.push(this),G._scheduled||(G._scheduled=V.immediateProvider.setImmediate(G.flush.bind(G,void 0))))},M.prototype.recycleAsyncId=function(G,Y,K){var J;if(void 0===K&&(K=0),null!=K?K>0:this.delay>0)return R.prototype.recycleAsyncId.call(this,G,Y,K);var se=G.actions;null!=Y&&(null===(J=se[se.length-1])||void 0===J?void 0:J.id)!==Y&&(V.immediateProvider.clearImmediate(Y),G._scheduled===Y&&(G._scheduled=void 0))},M}(T.AsyncAction);C.AsapAction=N},857:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AsapScheduler=void 0;var V=function(N){function R(){return null!==N&&N.apply(this,arguments)||this}return z(R,N),R.prototype.flush=function(M){this._active=!0;var G=this._scheduled;this._scheduled=void 0;var K,Y=this.actions;M=M||Y.shift();do{if(K=M.execute(M.state,M.delay))break}while((M=Y[0])&&M.id===G&&Y.shift());if(this._active=!1,K){for(;(M=Y[0])&&M.id===G&&Y.shift();)M.unsubscribe();throw K}},R}(w(9578).AsyncScheduler);C.AsapScheduler=V},7593:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var M=function(G,Y){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,J){K.__proto__=J}||function(K,J){for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&(K[se]=J[se])})(G,Y)};return function(G,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function K(){this.constructor=G}M(G,Y),G.prototype=null===Y?Object.create(Y):(K.prototype=Y.prototype,new K)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AsyncAction=void 0;var T=w(453),V=w(6759),N=w(2713),R=function(M){function G(Y,K){var J=M.call(this,Y,K)||this;return J.scheduler=Y,J.work=K,J.pending=!1,J}return z(G,M),G.prototype.schedule=function(Y,K){var J;if(void 0===K&&(K=0),this.closed)return this;this.state=Y;var se=this.id,U=this.scheduler;return null!=se&&(this.id=this.recycleAsyncId(U,se,K)),this.pending=!0,this.delay=K,this.id=null!==(J=this.id)&&void 0!==J?J:this.requestAsyncId(U,this.id,K),this},G.prototype.requestAsyncId=function(Y,K,J){return void 0===J&&(J=0),V.intervalProvider.setInterval(Y.flush.bind(Y,this),J)},G.prototype.recycleAsyncId=function(Y,K,J){if(void 0===J&&(J=0),null!=J&&this.delay===J&&!1===this.pending)return K;null!=K&&V.intervalProvider.clearInterval(K)},G.prototype.execute=function(Y,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var J=this._execute(Y,K);if(J)return J;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},G.prototype._execute=function(Y,K){var se,J=!1;try{this.work(Y)}catch(U){J=!0,se=U||new Error("Scheduled action threw falsy error")}if(J)return this.unsubscribe(),se},G.prototype.unsubscribe=function(){if(!this.closed){var K=this.id,J=this.scheduler,se=J.actions;this.work=this.state=this.scheduler=null,this.pending=!1,N.arrRemove(se,this),null!=K&&(this.id=this.recycleAsyncId(J,K,null)),this.delay=null,M.prototype.unsubscribe.call(this)}},G}(T.Action);C.AsyncAction=R},9578:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.AsyncScheduler=void 0;var T=w(6572),V=function(N){function R(M,G){void 0===G&&(G=T.Scheduler.now);var Y=N.call(this,M,G)||this;return Y.actions=[],Y._active=!1,Y}return z(R,N),R.prototype.flush=function(M){var G=this.actions;if(this._active)G.push(M);else{var Y;this._active=!0;do{if(Y=M.execute(M.state,M.delay))break}while(M=G.shift());if(this._active=!1,Y){for(;M=G.shift();)M.unsubscribe();throw Y}}},R}(T.Scheduler);C.AsyncScheduler=V},9094:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.QueueAction=void 0;var V=function(N){function R(M,G){var Y=N.call(this,M,G)||this;return Y.scheduler=M,Y.work=G,Y}return z(R,N),R.prototype.schedule=function(M,G){return void 0===G&&(G=0),G>0?N.prototype.schedule.call(this,M,G):(this.delay=G,this.state=M,this.scheduler.flush(this),this)},R.prototype.execute=function(M,G){return G>0||this.closed?N.prototype.execute.call(this,M,G):this._execute(M,G)},R.prototype.requestAsyncId=function(M,G,Y){return void 0===Y&&(Y=0),null!=Y&&Y>0||null==Y&&this.delay>0?N.prototype.requestAsyncId.call(this,M,G,Y):(M.flush(this),0)},R}(w(7593).AsyncAction);C.QueueAction=V},9571:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var N=function(R,M){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(G[K]=Y[K])})(R,M)};return function(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function G(){this.constructor=R}N(R,M),R.prototype=null===M?Object.create(M):(G.prototype=M.prototype,new G)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.QueueScheduler=void 0;var V=function(N){function R(){return null!==N&&N.apply(this,arguments)||this}return z(R,N),R}(w(9578).AsyncScheduler);C.QueueScheduler=V},8348:function(it,C,w){"use strict";var z=this&&this.__extends||function(){var G=function(Y,K){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,se){J.__proto__=se}||function(J,se){for(var U in se)Object.prototype.hasOwnProperty.call(se,U)&&(J[U]=se[U])})(Y,K)};return function(Y,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function J(){this.constructor=Y}G(Y,K),Y.prototype=null===K?Object.create(K):(J.prototype=K.prototype,new J)}}();Object.defineProperty(C,"__esModule",{value:!0}),C.VirtualAction=C.VirtualTimeScheduler=void 0;var T=w(7593),V=w(1172),R=function(G){function Y(K,J){void 0===K&&(K=M),void 0===J&&(J=1/0);var se=G.call(this,K,function(){return se.frame})||this;return se.maxFrames=J,se.frame=0,se.index=-1,se}return z(Y,G),Y.prototype.flush=function(){for(var U,_e,J=this.actions,se=this.maxFrames;(_e=J[0])&&_e.delay<=se&&(J.shift(),this.frame=_e.delay,!(U=_e.execute(_e.state,_e.delay))););if(U){for(;_e=J.shift();)_e.unsubscribe();throw U}},Y.frameTimeFactor=10,Y}(w(9578).AsyncScheduler);C.VirtualTimeScheduler=R;var M=function(G){function Y(K,J,se){void 0===se&&(se=K.index+=1);var U=G.call(this,K,J)||this;return U.scheduler=K,U.work=J,U.index=se,U.active=!0,U.index=K.index=se,U}return z(Y,G),Y.prototype.schedule=function(K,J){if(void 0===J&&(J=0),Number.isFinite(J)){if(!this.id)return G.prototype.schedule.call(this,K,J);this.active=!1;var se=new Y(this.scheduler,this.work);return this.add(se),se.schedule(K,J)}return V.Subscription.EMPTY},Y.prototype.requestAsyncId=function(K,J,se){void 0===se&&(se=0),this.delay=K.frame+se;var U=K.actions;return U.push(this),U.sort(Y.sortActions),1},Y.prototype.recycleAsyncId=function(K,J,se){void 0===se&&(se=0)},Y.prototype._execute=function(K,J){if(!0===this.active)return G.prototype._execute.call(this,K,J)},Y.sortActions=function(K,J){return K.delay===J.delay?K.index===J.index?0:K.index>J.index?1:-1:K.delay>J.delay?1:-1},Y}(T.AsyncAction);C.VirtualAction=M},6204:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.animationFrame=C.animationFrameScheduler=void 0;var z=w(8270),T=w(6875);C.animationFrameScheduler=new T.AnimationFrameScheduler(z.AnimationFrameAction),C.animationFrame=C.animationFrameScheduler},5657:function(it,C,w){"use strict";var z=this&&this.__read||function(N,R){var M="function"==typeof Symbol&&N[Symbol.iterator];if(!M)return N;var Y,J,G=M.call(N),K=[];try{for(;(void 0===R||R-- >0)&&!(Y=G.next()).done;)K.push(Y.value)}catch(se){J={error:se}}finally{try{Y&&!Y.done&&(M=G.return)&&M.call(G)}finally{if(J)throw J.error}}return K},T=this&&this.__spreadArray||function(N,R){for(var M=0,G=R.length,Y=N.length;M<G;M++,Y++)N[Y]=R[M];return N};Object.defineProperty(C,"__esModule",{value:!0}),C.animationFrameProvider=void 0;var V=w(1172);C.animationFrameProvider={schedule:function(N){var R=requestAnimationFrame,M=cancelAnimationFrame,G=C.animationFrameProvider.delegate;G&&(R=G.requestAnimationFrame,M=G.cancelAnimationFrame);var Y=R(function(K){M=void 0,N(K)});return new V.Subscription(function(){return M?.(Y)})},requestAnimationFrame:function(){for(var N=[],R=0;R<arguments.length;R++)N[R]=arguments[R];var M=C.animationFrameProvider.delegate;return(M?.requestAnimationFrame||requestAnimationFrame).apply(void 0,T([],z(N)))},cancelAnimationFrame:function(){for(var N=[],R=0;R<arguments.length;R++)N[R]=arguments[R];var M=C.animationFrameProvider.delegate;return(M?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,T([],z(N)))},delegate:void 0}},1538:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.asap=C.asapScheduler=void 0;var z=w(7560),T=w(857);C.asapScheduler=new T.AsapScheduler(z.AsapAction),C.asap=C.asapScheduler},6939:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.async=C.asyncScheduler=void 0;var z=w(7593),T=w(9578);C.asyncScheduler=new T.AsyncScheduler(z.AsyncAction),C.async=C.asyncScheduler},9090:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.dateTimestampProvider=void 0,C.dateTimestampProvider={now:function(){return(C.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},7179:function(it,C,w){"use strict";var z=this&&this.__read||function(M,G){var Y="function"==typeof Symbol&&M[Symbol.iterator];if(!Y)return M;var J,U,K=Y.call(M),se=[];try{for(;(void 0===G||G-- >0)&&!(J=K.next()).done;)se.push(J.value)}catch(_e){U={error:_e}}finally{try{J&&!J.done&&(Y=K.return)&&Y.call(K)}finally{if(U)throw U.error}}return se},T=this&&this.__spreadArray||function(M,G){for(var Y=0,K=G.length,J=M.length;Y<K;Y++,J++)M[J]=G[Y];return M};Object.defineProperty(C,"__esModule",{value:!0}),C.immediateProvider=void 0;var V=w(803),N=V.Immediate.setImmediate,R=V.Immediate.clearImmediate;C.immediateProvider={setImmediate:function(){for(var M=[],G=0;G<arguments.length;G++)M[G]=arguments[G];var Y=C.immediateProvider.delegate;return(Y?.setImmediate||N).apply(void 0,T([],z(M)))},clearImmediate:function(M){var G=C.immediateProvider.delegate;return(G?.clearImmediate||R)(M)},delegate:void 0}},6759:function(it,C){"use strict";var w=this&&this.__read||function(T,V){var N="function"==typeof Symbol&&T[Symbol.iterator];if(!N)return T;var M,Y,R=N.call(T),G=[];try{for(;(void 0===V||V-- >0)&&!(M=R.next()).done;)G.push(M.value)}catch(K){Y={error:K}}finally{try{M&&!M.done&&(N=R.return)&&N.call(R)}finally{if(Y)throw Y.error}}return G},z=this&&this.__spreadArray||function(T,V){for(var N=0,R=V.length,M=T.length;N<R;N++,M++)T[M]=V[N];return T};Object.defineProperty(C,"__esModule",{value:!0}),C.intervalProvider=void 0,C.intervalProvider={setInterval:function(T,V){for(var N=[],R=2;R<arguments.length;R++)N[R-2]=arguments[R];var M=C.intervalProvider.delegate;return M?.setInterval?M.setInterval.apply(M,z([T,V],w(N))):setInterval.apply(void 0,z([T,V],w(N)))},clearInterval:function(T){var V=C.intervalProvider.delegate;return(V?.clearInterval||clearInterval)(T)},delegate:void 0}},4936:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.performanceTimestampProvider=void 0,C.performanceTimestampProvider={now:function(){return(C.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},676:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.queue=C.queueScheduler=void 0;var z=w(9094),T=w(9571);C.queueScheduler=new T.QueueScheduler(z.QueueAction),C.queue=C.queueScheduler},2829:function(it,C){"use strict";var w=this&&this.__read||function(T,V){var N="function"==typeof Symbol&&T[Symbol.iterator];if(!N)return T;var M,Y,R=N.call(T),G=[];try{for(;(void 0===V||V-- >0)&&!(M=R.next()).done;)G.push(M.value)}catch(K){Y={error:K}}finally{try{M&&!M.done&&(N=R.return)&&N.call(R)}finally{if(Y)throw Y.error}}return G},z=this&&this.__spreadArray||function(T,V){for(var N=0,R=V.length,M=T.length;N<R;N++,M++)T[M]=V[N];return T};Object.defineProperty(C,"__esModule",{value:!0}),C.timeoutProvider=void 0,C.timeoutProvider={setTimeout:function(T,V){for(var N=[],R=2;R<arguments.length;R++)N[R-2]=arguments[R];var M=C.timeoutProvider.delegate;return M?.setTimeout?M.setTimeout.apply(M,z([T,V],w(N))):setTimeout.apply(void 0,z([T,V],w(N)))},clearTimeout:function(T){var V=C.timeoutProvider.delegate;return(V?.clearTimeout||clearTimeout)(T)},delegate:void 0}},9878:(it,C)=>{"use strict";function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(C,"__esModule",{value:!0}),C.iterator=C.getSymbolIterator=void 0,C.getSymbolIterator=w,C.iterator=w()},8789:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.observable=void 0,C.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},2864:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0})},3891:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.ArgumentOutOfRangeError=void 0;var z=w(2750);C.ArgumentOutOfRangeError=z.createErrorClass(function(T){return function(){T(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},9417:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.EmptyError=void 0;var z=w(2750);C.EmptyError=z.createErrorClass(function(T){return function(){T(this),this.name="EmptyError",this.message="no elements in sequence"}})},803:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.TestTools=C.Immediate=void 0;var z,w=1,T={};function V(N){return N in T&&(delete T[N],!0)}C.Immediate={setImmediate:function(N){var R=w++;return T[R]=!0,z||(z=Promise.resolve()),z.then(function(){return V(R)&&N()}),R},clearImmediate:function(N){V(N)}},C.TestTools={pending:function(){return Object.keys(T).length}}},8049:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.NotFoundError=void 0;var z=w(2750);C.NotFoundError=z.createErrorClass(function(T){return function(N){T(this),this.name="NotFoundError",this.message=N}})},2440:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.ObjectUnsubscribedError=void 0;var z=w(2750);C.ObjectUnsubscribedError=z.createErrorClass(function(T){return function(){T(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},9963:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.SequenceError=void 0;var z=w(2750);C.SequenceError=z.createErrorClass(function(T){return function(N){T(this),this.name="SequenceError",this.message=N}})},602:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.UnsubscriptionError=void 0;var z=w(2750);C.UnsubscriptionError=z.createErrorClass(function(T){return function(N){T(this),this.message=N?N.length+" errors occurred during unsubscription:\n"+N.map(function(R,M){return M+1+") "+R.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=N}})},2953:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.popNumber=C.popScheduler=C.popResultSelector=void 0;var z=w(4756),T=w(7683);function V(G){return G[G.length-1]}C.popResultSelector=function N(G){return z.isFunction(V(G))?G.pop():void 0},C.popScheduler=function R(G){return T.isScheduler(V(G))?G.pop():void 0},C.popNumber=function M(G,Y){return"number"==typeof V(G)?G.pop():Y}},9718:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.argsArgArrayOrObject=void 0;var w=Array.isArray,z=Object.getPrototypeOf,T=Object.prototype,V=Object.keys;C.argsArgArrayOrObject=function N(M){if(1===M.length){var G=M[0];if(w(G))return{args:G,keys:null};if(function R(M){return M&&"object"==typeof M&&z(M)===T}(G)){var Y=V(G);return{args:Y.map(function(K){return G[K]}),keys:Y}}}return{args:M,keys:null}}},365:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.argsOrArgArray=void 0;var w=Array.isArray;C.argsOrArgArray=function z(T){return 1===T.length&&w(T[0])?T[0]:T}},2713:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.arrRemove=void 0,C.arrRemove=function w(z,T){if(z){var V=z.indexOf(T);0<=V&&z.splice(V,1)}}},2750:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.createErrorClass=void 0,C.createErrorClass=function w(z){var V=z(function(N){Error.call(N),N.stack=(new Error).stack});return V.prototype=Object.create(Error.prototype),V.prototype.constructor=V,V}},1591:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.createObject=void 0,C.createObject=function w(z,T){return z.reduce(function(V,N,R){return V[N]=T[R],V},{})}},6077:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.captureError=C.errorContext=void 0;var z=w(6691),T=null;C.errorContext=function V(R){if(z.config.useDeprecatedSynchronousErrorHandling){var M=!T;if(M&&(T={errorThrown:!1,error:null}),R(),M){var G=T;if(T=null,G.errorThrown)throw G.error}}else R()},C.captureError=function N(R){z.config.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=R)}},5616:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.executeSchedule=void 0,C.executeSchedule=function w(z,T,V,N,R){void 0===N&&(N=0),void 0===R&&(R=!1);var M=T.schedule(function(){V(),R?z.add(this.schedule(null,N)):this.unsubscribe()},N);if(z.add(M),!R)return M}},4822:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.identity=void 0,C.identity=function w(z){return z}},7052:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isArrayLike=void 0,C.isArrayLike=function(w){return w&&"number"==typeof w.length&&"function"!=typeof w}},8740:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isAsyncIterable=void 0;var z=w(4756);C.isAsyncIterable=function T(V){return Symbol.asyncIterator&&z.isFunction(V?.[Symbol.asyncIterator])}},6128:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isValidDate=void 0,C.isValidDate=function w(z){return z instanceof Date&&!isNaN(z)}},4756:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isFunction=void 0,C.isFunction=function w(z){return"function"==typeof z}},3562:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isInteropObservable=void 0;var z=w(8789),T=w(4756);C.isInteropObservable=function V(N){return T.isFunction(N[z.observable])}},8158:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isIterable=void 0;var z=w(9878),T=w(4756);C.isIterable=function V(N){return T.isFunction(N?.[z.iterator])}},1085:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isObservable=void 0;var z=w(2312),T=w(4756);C.isObservable=function V(N){return!!N&&(N instanceof z.Observable||T.isFunction(N.lift)&&T.isFunction(N.subscribe))}},5355:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isPromise=void 0;var z=w(4756);C.isPromise=function T(V){return z.isFunction(V?.then)}},7635:function(it,C,w){"use strict";var z=this&&this.__generator||function(G,Y){var J,se,U,_e,K={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return _e={next:Ae(0),throw:Ae(1),return:Ae(2)},"function"==typeof Symbol&&(_e[Symbol.iterator]=function(){return this}),_e;function Ae(Le){return function(tt){return function Ne(Le){if(J)throw new TypeError("Generator is already executing.");for(;K;)try{if(J=1,se&&(U=2&Le[0]?se.return:Le[0]?se.throw||((U=se.return)&&U.call(se),0):se.next)&&!(U=U.call(se,Le[1])).done)return U;switch(se=0,U&&(Le=[2&Le[0],U.value]),Le[0]){case 0:case 1:U=Le;break;case 4:return K.label++,{value:Le[1],done:!1};case 5:K.label++,se=Le[1],Le=[0];continue;case 7:Le=K.ops.pop(),K.trys.pop();continue;default:if(!(U=(U=K.trys).length>0&&U[U.length-1])&&(6===Le[0]||2===Le[0])){K=0;continue}if(3===Le[0]&&(!U||Le[1]>U[0]&&Le[1]<U[3])){K.label=Le[1];break}if(6===Le[0]&&K.label<U[1]){K.label=U[1],U=Le;break}if(U&&K.label<U[2]){K.label=U[2],K.ops.push(Le);break}U[2]&&K.ops.pop(),K.trys.pop();continue}Le=Y.call(G,K)}catch(tt){Le=[6,tt],se=0}finally{J=U=0}if(5&Le[0])throw Le[1];return{value:Le[0]?Le[1]:void 0,done:!0}}([Le,tt])}}},T=this&&this.__await||function(G){return this instanceof T?(this.v=G,this):new T(G)},V=this&&this.__asyncGenerator||function(G,Y,K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,J=K.apply(G,Y||[]),U=[];return se={},_e("next"),_e("throw"),_e("return"),se[Symbol.asyncIterator]=function(){return this},se;function _e(Bt){J[Bt]&&(se[Bt]=function(yt){return new Promise(function(Pt,vt){U.push([Bt,yt,Pt,vt])>1||Ae(Bt,yt)})})}function Ae(Bt,yt){try{!function Ne(Bt){Bt.value instanceof T?Promise.resolve(Bt.value.v).then(Le,tt):_t(U[0][2],Bt)}(J[Bt](yt))}catch(Pt){_t(U[0][3],Pt)}}function Le(Bt){Ae("next",Bt)}function tt(Bt){Ae("throw",Bt)}function _t(Bt,yt){Bt(yt),U.shift(),U.length&&Ae(U[0][0],U[0][1])}};Object.defineProperty(C,"__esModule",{value:!0}),C.isReadableStreamLike=C.readableStreamLikeToAsyncGenerator=void 0;var N=w(4756);C.readableStreamLikeToAsyncGenerator=function R(G){return V(this,arguments,function(){var K,J,se;return z(this,function(_e){switch(_e.label){case 0:K=G.getReader(),_e.label=1;case 1:_e.trys.push([1,,9,10]),_e.label=2;case 2:return[4,T(K.read())];case 3:return J=_e.sent(),se=J.value,J.done?[4,T(void 0)]:[3,5];case 4:return[2,_e.sent()];case 5:return[4,T(se)];case 6:return[4,_e.sent()];case 7:return _e.sent(),[3,2];case 8:return[3,10];case 9:return K.releaseLock(),[7];case 10:return[2]}})})},C.isReadableStreamLike=function M(G){return N.isFunction(G?.getReader)}},7683:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isScheduler=void 0;var z=w(4756);C.isScheduler=function T(V){return V&&z.isFunction(V.schedule)}},1041:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.operate=C.hasLift=void 0;var z=w(4756);function T(N){return z.isFunction(N?.lift)}C.hasLift=T,C.operate=function V(N){return function(R){if(T(R))return R.lift(function(M){try{return N(M,this)}catch(G){this.error(G)}});throw new TypeError("Unable to lift unknown Observable type")}}},5837:function(it,C,w){"use strict";var z=this&&this.__read||function(G,Y){var K="function"==typeof Symbol&&G[Symbol.iterator];if(!K)return G;var se,_e,J=K.call(G),U=[];try{for(;(void 0===Y||Y-- >0)&&!(se=J.next()).done;)U.push(se.value)}catch(Ae){_e={error:Ae}}finally{try{se&&!se.done&&(K=J.return)&&K.call(J)}finally{if(_e)throw _e.error}}return U},T=this&&this.__spreadArray||function(G,Y){for(var K=0,J=Y.length,se=G.length;K<J;K++,se++)G[se]=Y[K];return G};Object.defineProperty(C,"__esModule",{value:!0}),C.mapOneOrManyArgs=void 0;var V=w(8341),N=Array.isArray;C.mapOneOrManyArgs=function M(G){return V.map(function(Y){return function R(G,Y){return N(Y)?G.apply(void 0,T([],z(Y))):G(Y)}(G,Y)})}},4884:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.noop=void 0,C.noop=function w(){}},9819:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.not=void 0,C.not=function w(z,T){return function(V,N){return!z.call(T,V,N)}}},644:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.pipeFromArray=C.pipe=void 0;var z=w(4822);function V(N){return 0===N.length?z.identity:1===N.length?N[0]:function(M){return N.reduce(function(G,Y){return Y(G)},M)}}C.pipe=function T(){for(var N=[],R=0;R<arguments.length;R++)N[R]=arguments[R];return V(N)},C.pipeFromArray=V},3145:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.reportUnhandledError=void 0;var z=w(6691),T=w(2829);C.reportUnhandledError=function V(N){T.timeoutProvider.setTimeout(function(){var R=z.config.onUnhandledError;if(!R)throw N;R(N)})}},3856:(it,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.createInvalidObservableTypeError=void 0,C.createInvalidObservableTypeError=function w(z){return new TypeError("You provided "+(null!==z&&"object"==typeof z?"an invalid object":"'"+z+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},3481:(it,C,w)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.mergeAll=C.merge=C.max=C.materialize=C.mapTo=C.map=C.last=C.isEmpty=C.ignoreElements=C.groupBy=C.first=C.findIndex=C.find=C.finalize=C.filter=C.expand=C.exhaustMap=C.exhaustAll=C.exhaust=C.every=C.endWith=C.elementAt=C.distinctUntilKeyChanged=C.distinctUntilChanged=C.distinct=C.dematerialize=C.delayWhen=C.delay=C.defaultIfEmpty=C.debounceTime=C.debounce=C.count=C.connect=C.concatWith=C.concatMapTo=C.concatMap=C.concatAll=C.concat=C.combineLatestWith=C.combineLatest=C.combineLatestAll=C.combineAll=C.catchError=C.bufferWhen=C.bufferToggle=C.bufferTime=C.bufferCount=C.buffer=C.auditTime=C.audit=void 0,C.timeInterval=C.throwIfEmpty=C.throttleTime=C.throttle=C.tap=C.takeWhile=C.takeUntil=C.takeLast=C.take=C.switchScan=C.switchMapTo=C.switchMap=C.switchAll=C.subscribeOn=C.startWith=C.skipWhile=C.skipUntil=C.skipLast=C.skip=C.single=C.shareReplay=C.share=C.sequenceEqual=C.scan=C.sampleTime=C.sample=C.refCount=C.retryWhen=C.retry=C.repeatWhen=C.repeat=C.reduce=C.raceWith=C.race=C.publishReplay=C.publishLast=C.publishBehavior=C.publish=C.pluck=C.partition=C.pairwise=C.onErrorResumeNext=C.observeOn=C.multicast=C.min=C.mergeWith=C.mergeScan=C.mergeMapTo=C.mergeMap=C.flatMap=void 0,C.zipWith=C.zipAll=C.zip=C.withLatestFrom=C.windowWhen=C.windowToggle=C.windowTime=C.windowCount=C.window=C.toArray=C.timestamp=C.timeoutWith=C.timeout=void 0;var z=w(1328);Object.defineProperty(C,"audit",{enumerable:!0,get:function(){return z.audit}});var T=w(4365);Object.defineProperty(C,"auditTime",{enumerable:!0,get:function(){return T.auditTime}});var V=w(5841);Object.defineProperty(C,"buffer",{enumerable:!0,get:function(){return V.buffer}});var N=w(8974);Object.defineProperty(C,"bufferCount",{enumerable:!0,get:function(){return N.bufferCount}});var R=w(7636);Object.defineProperty(C,"bufferTime",{enumerable:!0,get:function(){return R.bufferTime}});var M=w(953);Object.defineProperty(C,"bufferToggle",{enumerable:!0,get:function(){return M.bufferToggle}});var G=w(6425);Object.defineProperty(C,"bufferWhen",{enumerable:!0,get:function(){return G.bufferWhen}});var Y=w(8408);Object.defineProperty(C,"catchError",{enumerable:!0,get:function(){return Y.catchError}});var K=w(5779);Object.defineProperty(C,"combineAll",{enumerable:!0,get:function(){return K.combineAll}});var J=w(1038);Object.defineProperty(C,"combineLatestAll",{enumerable:!0,get:function(){return J.combineLatestAll}});var se=w(7169);Object.defineProperty(C,"combineLatest",{enumerable:!0,get:function(){return se.combineLatest}});var U=w(9013);Object.defineProperty(C,"combineLatestWith",{enumerable:!0,get:function(){return U.combineLatestWith}});var _e=w(1435);Object.defineProperty(C,"concat",{enumerable:!0,get:function(){return _e.concat}});var Ae=w(599);Object.defineProperty(C,"concatAll",{enumerable:!0,get:function(){return Ae.concatAll}});var Ne=w(4925);Object.defineProperty(C,"concatMap",{enumerable:!0,get:function(){return Ne.concatMap}});var Le=w(972);Object.defineProperty(C,"concatMapTo",{enumerable:!0,get:function(){return Le.concatMapTo}});var tt=w(2563);Object.defineProperty(C,"concatWith",{enumerable:!0,get:function(){return tt.concatWith}});var _t=w(2901);Object.defineProperty(C,"connect",{enumerable:!0,get:function(){return _t.connect}});var Bt=w(6528);Object.defineProperty(C,"count",{enumerable:!0,get:function(){return Bt.count}});var yt=w(9532);Object.defineProperty(C,"debounce",{enumerable:!0,get:function(){return yt.debounce}});var Pt=w(4369);Object.defineProperty(C,"debounceTime",{enumerable:!0,get:function(){return Pt.debounceTime}});var vt=w(4748);Object.defineProperty(C,"defaultIfEmpty",{enumerable:!0,get:function(){return vt.defaultIfEmpty}});var Gt=w(8800);Object.defineProperty(C,"delay",{enumerable:!0,get:function(){return Gt.delay}});var Ht=w(1356);Object.defineProperty(C,"delayWhen",{enumerable:!0,get:function(){return Ht.delayWhen}});var jt=w(2615);Object.defineProperty(C,"dematerialize",{enumerable:!0,get:function(){return jt.dematerialize}});var Yt=w(2387);Object.defineProperty(C,"distinct",{enumerable:!0,get:function(){return Yt.distinct}});var On=w(740);Object.defineProperty(C,"distinctUntilChanged",{enumerable:!0,get:function(){return On.distinctUntilChanged}});var In=w(3466);Object.defineProperty(C,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return In.distinctUntilKeyChanged}});var Rn=w(2754);Object.defineProperty(C,"elementAt",{enumerable:!0,get:function(){return Rn.elementAt}});var Nr=w(4518);Object.defineProperty(C,"endWith",{enumerable:!0,get:function(){return Nr.endWith}});var wr=w(6220);Object.defineProperty(C,"every",{enumerable:!0,get:function(){return wr.every}});var Gr=w(3865);Object.defineProperty(C,"exhaust",{enumerable:!0,get:function(){return Gr.exhaust}});var Tn=w(8070);Object.defineProperty(C,"exhaustAll",{enumerable:!0,get:function(){return Tn.exhaustAll}});var Nn=w(6103);Object.defineProperty(C,"exhaustMap",{enumerable:!0,get:function(){return Nn.exhaustMap}});var br=w(4331);Object.defineProperty(C,"expand",{enumerable:!0,get:function(){return br.expand}});var bt=w(329);Object.defineProperty(C,"filter",{enumerable:!0,get:function(){return bt.filter}});var qt=w(9745);Object.defineProperty(C,"finalize",{enumerable:!0,get:function(){return qt.finalize}});var fn=w(7668);Object.defineProperty(C,"find",{enumerable:!0,get:function(){return fn.find}});var Ut=w(8654);Object.defineProperty(C,"findIndex",{enumerable:!0,get:function(){return Ut.findIndex}});var bn=w(1437);Object.defineProperty(C,"first",{enumerable:!0,get:function(){return bn.first}});var Pn=w(3197);Object.defineProperty(C,"groupBy",{enumerable:!0,get:function(){return Pn.groupBy}});var gr=w(6756);Object.defineProperty(C,"ignoreElements",{enumerable:!0,get:function(){return gr.ignoreElements}});var ui=w(3430);Object.defineProperty(C,"isEmpty",{enumerable:!0,get:function(){return ui.isEmpty}});var Oi=w(6963);Object.defineProperty(C,"last",{enumerable:!0,get:function(){return Oi.last}});var Dr=w(8341);Object.defineProperty(C,"map",{enumerable:!0,get:function(){return Dr.map}});var hr=w(9588);Object.defineProperty(C,"mapTo",{enumerable:!0,get:function(){return hr.mapTo}});var ei=w(5374);Object.defineProperty(C,"materialize",{enumerable:!0,get:function(){return ei.materialize}});var ra=w(2365);Object.defineProperty(C,"max",{enumerable:!0,get:function(){return ra.max}});var Hi=w(1607);Object.defineProperty(C,"merge",{enumerable:!0,get:function(){return Hi.merge}});var No=w(8056);Object.defineProperty(C,"mergeAll",{enumerable:!0,get:function(){return No.mergeAll}});var fo=w(8e3);Object.defineProperty(C,"flatMap",{enumerable:!0,get:function(){return fo.flatMap}});var jr=w(1081);Object.defineProperty(C,"mergeMap",{enumerable:!0,get:function(){return jr.mergeMap}});var Do=w(1544);Object.defineProperty(C,"mergeMapTo",{enumerable:!0,get:function(){return Do.mergeMapTo}});var _i=w(8530);Object.defineProperty(C,"mergeScan",{enumerable:!0,get:function(){return _i.mergeScan}});var xs=w(6031);Object.defineProperty(C,"mergeWith",{enumerable:!0,get:function(){return xs.mergeWith}});var tc=w(1383);Object.defineProperty(C,"min",{enumerable:!0,get:function(){return tc.min}});var gc=w(7037);Object.defineProperty(C,"multicast",{enumerable:!0,get:function(){return gc.multicast}});var Vs=w(4042);Object.defineProperty(C,"observeOn",{enumerable:!0,get:function(){return Vs.observeOn}});var Fo=w(4296);Object.defineProperty(C,"onErrorResumeNext",{enumerable:!0,get:function(){return Fo.onErrorResumeNext}});var Ta=w(9743);Object.defineProperty(C,"pairwise",{enumerable:!0,get:function(){return Ta.pairwise}});var kr=w(3205);Object.defineProperty(C,"partition",{enumerable:!0,get:function(){return kr.partition}});var Ei=w(542);Object.defineProperty(C,"pluck",{enumerable:!0,get:function(){return Ei.pluck}});var dr=w(3911);Object.defineProperty(C,"publish",{enumerable:!0,get:function(){return dr.publish}});var Gs=w(1010);Object.defineProperty(C,"publishBehavior",{enumerable:!0,get:function(){return Gs.publishBehavior}});var va=w(9892);Object.defineProperty(C,"publishLast",{enumerable:!0,get:function(){return va.publishLast}});var $a=w(5855);Object.defineProperty(C,"publishReplay",{enumerable:!0,get:function(){return $a.publishReplay}});var ca=w(9546);Object.defineProperty(C,"race",{enumerable:!0,get:function(){return ca.race}});var Xo=w(3238);Object.defineProperty(C,"raceWith",{enumerable:!0,get:function(){return Xo.raceWith}});var ua=w(3629);Object.defineProperty(C,"reduce",{enumerable:!0,get:function(){return ua.reduce}});var Ho=w(4736);Object.defineProperty(C,"repeat",{enumerable:!0,get:function(){return Ho.repeat}});var Aa=w(3852);Object.defineProperty(C,"repeatWhen",{enumerable:!0,get:function(){return Aa.repeatWhen}});var oo=w(5241);Object.defineProperty(C,"retry",{enumerable:!0,get:function(){return oo.retry}});var so=w(3665);Object.defineProperty(C,"retryWhen",{enumerable:!0,get:function(){return so.retryWhen}});var Ci=w(2359);Object.defineProperty(C,"refCount",{enumerable:!0,get:function(){return Ci.refCount}});var Oc=w(9545);Object.defineProperty(C,"sample",{enumerable:!0,get:function(){return Oc.sample}});var Ns=w(2620);Object.defineProperty(C,"sampleTime",{enumerable:!0,get:function(){return Ns.sampleTime}});var Ds=w(8086);Object.defineProperty(C,"scan",{enumerable:!0,get:function(){return Ds.scan}});var ns=w(6344);Object.defineProperty(C,"sequenceEqual",{enumerable:!0,get:function(){return ns.sequenceEqual}});var ba=w(9684);Object.defineProperty(C,"share",{enumerable:!0,get:function(){return ba.share}});var _s=w(2591);Object.defineProperty(C,"shareReplay",{enumerable:!0,get:function(){return _s.shareReplay}});var Kt=w(55);Object.defineProperty(C,"single",{enumerable:!0,get:function(){return Kt.single}});var en=w(1384);Object.defineProperty(C,"skip",{enumerable:!0,get:function(){return en.skip}});var Qe=w(3528);Object.defineProperty(C,"skipLast",{enumerable:!0,get:function(){return Qe.skipLast}});var Et=w(7694);Object.defineProperty(C,"skipUntil",{enumerable:!0,get:function(){return Et.skipUntil}});var wn=w(9659);Object.defineProperty(C,"skipWhile",{enumerable:!0,get:function(){return wn.skipWhile}});var $n=w(271);Object.defineProperty(C,"startWith",{enumerable:!0,get:function(){return $n.startWith}});var Ti=w(6734);Object.defineProperty(C,"subscribeOn",{enumerable:!0,get:function(){return Ti.subscribeOn}});var ji=w(5880);Object.defineProperty(C,"switchAll",{enumerable:!0,get:function(){return ji.switchAll}});var xn=w(5433);Object.defineProperty(C,"switchMap",{enumerable:!0,get:function(){return xn.switchMap}});var ia=w(7544);Object.defineProperty(C,"switchMapTo",{enumerable:!0,get:function(){return ia.switchMapTo}});var oa=w(3730);Object.defineProperty(C,"switchScan",{enumerable:!0,get:function(){return oa.switchScan}});var ys=w(924);Object.defineProperty(C,"take",{enumerable:!0,get:function(){return ys.take}});var jc=w(4012);Object.defineProperty(C,"takeLast",{enumerable:!0,get:function(){return jc.takeLast}});var Tl=w(3690);Object.defineProperty(C,"takeUntil",{enumerable:!0,get:function(){return Tl.takeUntil}});var qs=w(2972);Object.defineProperty(C,"takeWhile",{enumerable:!0,get:function(){return qs.takeWhile}});var Wo=w(4890);Object.defineProperty(C,"tap",{enumerable:!0,get:function(){return Wo.tap}});var eu=w(3023);Object.defineProperty(C,"throttle",{enumerable:!0,get:function(){return eu.throttle}});var vs=w(7098);Object.defineProperty(C,"throttleTime",{enumerable:!0,get:function(){return vs.throttleTime}});var Va=w(2084);Object.defineProperty(C,"throwIfEmpty",{enumerable:!0,get:function(){return Va.throwIfEmpty}});var Pc=w(7471);Object.defineProperty(C,"timeInterval",{enumerable:!0,get:function(){return Pc.timeInterval}});var rs=w(2156);Object.defineProperty(C,"timeout",{enumerable:!0,get:function(){return rs.timeout}});var ks=w(9988);Object.defineProperty(C,"timeoutWith",{enumerable:!0,get:function(){return ks.timeoutWith}});var Ia=w(1475);Object.defineProperty(C,"timestamp",{enumerable:!0,get:function(){return Ia.timestamp}});var Al=w(7193);Object.defineProperty(C,"toArray",{enumerable:!0,get:function(){return Al.toArray}});var cl=w(7975);Object.defineProperty(C,"window",{enumerable:!0,get:function(){return cl.window}});var ll=w(4620);Object.defineProperty(C,"windowCount",{enumerable:!0,get:function(){return ll.windowCount}});var ul=w(8466);Object.defineProperty(C,"windowTime",{enumerable:!0,get:function(){return ul.windowTime}});var Cs=w(8251);Object.defineProperty(C,"windowToggle",{enumerable:!0,get:function(){return Cs.windowToggle}});var Il=w(5095);Object.defineProperty(C,"windowWhen",{enumerable:!0,get:function(){return Il.windowWhen}});var jl=w(7632);Object.defineProperty(C,"withLatestFrom",{enumerable:!0,get:function(){return jl.withLatestFrom}});var Dl=w(3760);Object.defineProperty(C,"zip",{enumerable:!0,get:function(){return Dl.zip}});var dl=w(1201);Object.defineProperty(C,"zipAll",{enumerable:!0,get:function(){return dl.zipAll}});var Zo=w(5832);Object.defineProperty(C,"zipWith",{enumerable:!0,get:function(){return Zo.zipWith}})},4412:(it,C,w)=>{"use strict";w.d(C,{t:()=>T});var z=w(1413);class T extends z.B{constructor(N){super(),this._value=N}get value(){return this.getValue()}_subscribe(N){const R=super._subscribe(N);return!R.closed&&N.next(this._value),R}getValue(){const{hasError:N,thrownError:R,_value:M}=this;if(N)throw R;return this._throwIfClosed(),M}next(N){super.next(this._value=N)}}},1985:(it,C,w)=>{"use strict";w.d(C,{c:()=>Y});var z=w(7707),T=w(8359),V=w(3494),N=w(1203),R=w(1026),M=w(8071),G=w(9786);let Y=(()=>{class U{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Ne=new U;return Ne.source=this,Ne.operator=Ae,Ne}subscribe(Ae,Ne,Le){const tt=function se(U){return U&&U instanceof z.vU||function J(U){return U&&(0,M.T)(U.next)&&(0,M.T)(U.error)&&(0,M.T)(U.complete)}(U)&&(0,T.Uv)(U)}(Ae)?Ae:new z.Ms(Ae,Ne,Le);return(0,G.Y)(()=>{const{operator:_t,source:Bt}=this;tt.add(_t?_t.call(tt,Bt):Bt?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ne){Ae.error(Ne)}}forEach(Ae,Ne){return new(Ne=K(Ne))((Le,tt)=>{const _t=new z.Ms({next:Bt=>{try{Ae(Bt)}catch(yt){tt(yt),_t.unsubscribe()}},error:tt,complete:Le});this.subscribe(_t)})}_subscribe(Ae){var Ne;return null===(Ne=this.source)||void 0===Ne?void 0:Ne.subscribe(Ae)}[V.s](){return this}pipe(...Ae){return(0,N.m)(Ae)(this)}toPromise(Ae){return new(Ae=K(Ae))((Ne,Le)=>{let tt;this.subscribe(_t=>tt=_t,_t=>Le(_t),()=>Ne(tt))})}}return U.create=_e=>new U(_e),U})();function K(U){var _e;return null!==(_e=U??R.$.Promise)&&void 0!==_e?_e:Promise}},1413:(it,C,w)=>{"use strict";w.d(C,{B:()=>G});var z=w(1985),T=w(8359);const N=(0,w(1853).L)(K=>function(){K(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var R=w(7908),M=w(9786);let G=(()=>{class K extends z.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const U=new Y(this,this);return U.operator=se,U}_throwIfClosed(){if(this.closed)throw new N}next(se){(0,M.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const U of this.currentObservers)U.next(se)}})}error(se){(0,M.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:U}=this;for(;U.length;)U.shift().error(se)}})}complete(){(0,M.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:U,isStopped:_e,observers:Ae}=this;return U||_e?T.Kn:(this.currentObservers=null,Ae.push(se),new T.yU(()=>{this.currentObservers=null,(0,R.o)(Ae,se)}))}_checkFinalizedStatuses(se){const{hasError:U,thrownError:_e,isStopped:Ae}=this;U?se.error(_e):Ae&&se.complete()}asObservable(){const se=new z.c;return se.source=this,se}}return K.create=(J,se)=>new Y(J,se),K})();class Y extends G{constructor(J,se){super(),this.destination=J,this.source=se}next(J){var se,U;null===(U=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===U||U.call(se,J)}error(J){var se,U;null===(U=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===U||U.call(se,J)}complete(){var J,se;null===(se=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===se||se.call(J)}_subscribe(J){var se,U;return null!==(U=null===(se=this.source)||void 0===se?void 0:se.subscribe(J))&&void 0!==U?U:T.Kn}}},7707:(it,C,w)=>{"use strict";w.d(C,{Ms:()=>Le,vU:()=>U});var z=w(8071),T=w(8359),V=w(1026),N=w(5334),R=w(5343);const M=K("C",void 0,void 0);function K(Pt,vt,Gt){return{kind:Pt,value:vt,error:Gt}}var J=w(9270),se=w(9786);class U extends T.yU{constructor(vt){super(),this.isStopped=!1,vt?(this.destination=vt,(0,T.Uv)(vt)&&vt.add(this)):this.destination=yt}static create(vt,Gt,Ht){return new Le(vt,Gt,Ht)}next(vt){this.isStopped?Bt(function Y(Pt){return K("N",Pt,void 0)}(vt),this):this._next(vt)}error(vt){this.isStopped?Bt(function G(Pt){return K("E",void 0,Pt)}(vt),this):(this.isStopped=!0,this._error(vt))}complete(){this.isStopped?Bt(M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(vt){this.destination.next(vt)}_error(vt){try{this.destination.error(vt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _e=Function.prototype.bind;function Ae(Pt,vt){return _e.call(Pt,vt)}class Ne{constructor(vt){this.partialObserver=vt}next(vt){const{partialObserver:Gt}=this;if(Gt.next)try{Gt.next(vt)}catch(Ht){tt(Ht)}}error(vt){const{partialObserver:Gt}=this;if(Gt.error)try{Gt.error(vt)}catch(Ht){tt(Ht)}else tt(vt)}complete(){const{partialObserver:vt}=this;if(vt.complete)try{vt.complete()}catch(Gt){tt(Gt)}}}class Le extends U{constructor(vt,Gt,Ht){let jt;if(super(),(0,z.T)(vt)||!vt)jt={next:vt??void 0,error:Gt??void 0,complete:Ht??void 0};else{let Yt;this&&V.$.useDeprecatedNextContext?(Yt=Object.create(vt),Yt.unsubscribe=()=>this.unsubscribe(),jt={next:vt.next&&Ae(vt.next,Yt),error:vt.error&&Ae(vt.error,Yt),complete:vt.complete&&Ae(vt.complete,Yt)}):jt=vt}this.destination=new Ne(jt)}}function tt(Pt){V.$.useDeprecatedSynchronousErrorHandling?(0,se.l)(Pt):(0,N.m)(Pt)}function Bt(Pt,vt){const{onStoppedNotification:Gt}=V.$;Gt&&J.f.setTimeout(()=>Gt(Pt,vt))}const yt={closed:!0,next:R.l,error:function _t(Pt){throw Pt},complete:R.l}},8359:(it,C,w)=>{"use strict";w.d(C,{Kn:()=>M,yU:()=>R,Uv:()=>G});var z=w(8071);const V=(0,w(1853).L)(K=>function(se){K(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((U,_e)=>`${_e+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var N=w(7908);class R{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const Ae of se)Ae.remove(this);else se.remove(this);const{initialTeardown:U}=this;if((0,z.T)(U))try{U()}catch(Ae){J=Ae instanceof V?Ae.errors:[Ae]}const{_finalizers:_e}=this;if(_e){this._finalizers=null;for(const Ae of _e)try{Y(Ae)}catch(Ne){J=J??[],Ne instanceof V?J=[...J,...Ne.errors]:J.push(Ne)}}if(J)throw new V(J)}}add(J){var se;if(J&&J!==this)if(this.closed)Y(J);else{if(J instanceof R){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(J)}}_hasParent(J){const{_parentage:se}=this;return se===J||Array.isArray(se)&&se.includes(J)}_addParent(J){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(J),se):se?[se,J]:J}_removeParent(J){const{_parentage:se}=this;se===J?this._parentage=null:Array.isArray(se)&&(0,N.o)(se,J)}remove(J){const{_finalizers:se}=this;se&&(0,N.o)(se,J),J instanceof R&&J._removeParent(this)}}R.EMPTY=(()=>{const K=new R;return K.closed=!0,K})();const M=R.EMPTY;function G(K){return K instanceof R||K&&"closed"in K&&(0,z.T)(K.remove)&&(0,z.T)(K.add)&&(0,z.T)(K.unsubscribe)}function Y(K){(0,z.T)(K)?K():K.unsubscribe()}},1026:(it,C,w)=>{"use strict";w.d(C,{$:()=>z});const z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9030:(it,C,w)=>{"use strict";w.d(C,{v:()=>V});var z=w(1985),T=w(8750);function V(N){return new z.c(R=>{(0,T.Tg)(N()).subscribe(R)})}},983:(it,C,w)=>{"use strict";w.d(C,{w:()=>T});const T=new(w(1985).c)(R=>R.complete())},6648:(it,C,w)=>{"use strict";w.d(C,{H:()=>Ht});var z=w(8750),T=w(5225),V=w(9974),N=w(4360);function R(jt,Yt=0){return(0,V.N)((On,In)=>{On.subscribe((0,N._)(In,Rn=>(0,T.N)(In,jt,()=>In.next(Rn),Yt),()=>(0,T.N)(In,jt,()=>In.complete(),Yt),Rn=>(0,T.N)(In,jt,()=>In.error(Rn),Yt)))})}function M(jt,Yt=0){return(0,V.N)((On,In)=>{In.add(jt.schedule(()=>On.subscribe(In),Yt))})}var K=w(1985),se=w(4761),U=w(8071);function Ae(jt,Yt){if(!jt)throw new Error("Iterable cannot be null");return new K.c(On=>{(0,T.N)(On,Yt,()=>{const In=jt[Symbol.asyncIterator]();(0,T.N)(On,Yt,()=>{In.next().then(Rn=>{Rn.done?On.complete():On.next(Rn.value)})},0,!0)})})}var Ne=w(5055),Le=w(9858),tt=w(7441),_t=w(5397),Bt=w(7953),yt=w(591),Pt=w(5196);function Ht(jt,Yt){return Yt?function Gt(jt,Yt){if(null!=jt){if((0,Ne.l)(jt))return function G(jt,Yt){return(0,z.Tg)(jt).pipe(M(Yt),R(Yt))}(jt,Yt);if((0,tt.X)(jt))return function J(jt,Yt){return new K.c(On=>{let In=0;return Yt.schedule(function(){In===jt.length?On.complete():(On.next(jt[In++]),On.closed||this.schedule())})})}(jt,Yt);if((0,Le.y)(jt))return function Y(jt,Yt){return(0,z.Tg)(jt).pipe(M(Yt),R(Yt))}(jt,Yt);if((0,Bt.T)(jt))return Ae(jt,Yt);if((0,_t.x)(jt))return function _e(jt,Yt){return new K.c(On=>{let In;return(0,T.N)(On,Yt,()=>{In=jt[se.l](),(0,T.N)(On,Yt,()=>{let Rn,Nr;try{({value:Rn,done:Nr}=In.next())}catch(wr){return void On.error(wr)}Nr?On.complete():On.next(Rn)},0,!0)}),()=>(0,U.T)(In?.return)&&In.return()})}(jt,Yt);if((0,Pt.U)(jt))return function vt(jt,Yt){return Ae((0,Pt.C)(jt),Yt)}(jt,Yt)}throw(0,yt.L)(jt)}(jt,Yt):(0,z.Tg)(jt)}},8750:(it,C,w)=>{"use strict";w.d(C,{Tg:()=>_e});var z=w(1635),T=w(7441),V=w(9858),N=w(1985),R=w(5055),M=w(7953),G=w(591),Y=w(5397),K=w(5196),J=w(8071),se=w(5334),U=w(3494);function _e(Pt){if(Pt instanceof N.c)return Pt;if(null!=Pt){if((0,R.l)(Pt))return function Ae(Pt){return new N.c(vt=>{const Gt=Pt[U.s]();if((0,J.T)(Gt.subscribe))return Gt.subscribe(vt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pt);if((0,T.X)(Pt))return function Ne(Pt){return new N.c(vt=>{for(let Gt=0;Gt<Pt.length&&!vt.closed;Gt++)vt.next(Pt[Gt]);vt.complete()})}(Pt);if((0,V.y)(Pt))return function Le(Pt){return new N.c(vt=>{Pt.then(Gt=>{vt.closed||(vt.next(Gt),vt.complete())},Gt=>vt.error(Gt)).then(null,se.m)})}(Pt);if((0,M.T)(Pt))return _t(Pt);if((0,Y.x)(Pt))return function tt(Pt){return new N.c(vt=>{for(const Gt of Pt)if(vt.next(Gt),vt.closed)return;vt.complete()})}(Pt);if((0,K.U)(Pt))return function Bt(Pt){return _t((0,K.C)(Pt))}(Pt)}throw(0,G.L)(Pt)}function _t(Pt){return new N.c(vt=>{(function yt(Pt,vt){var Gt,Ht,jt,Yt;return(0,z.__awaiter)(this,void 0,void 0,function*(){try{for(Gt=(0,z.__asyncValues)(Pt);!(Ht=yield Gt.next()).done;)if(vt.next(Ht.value),vt.closed)return}catch(On){jt={error:On}}finally{try{Ht&&!Ht.done&&(Yt=Gt.return)&&(yield Yt.call(Gt))}finally{if(jt)throw jt.error}}vt.complete()})})(Pt,vt).catch(Gt=>vt.error(Gt))})}},7673:(it,C,w)=>{"use strict";w.d(C,{of:()=>V});var z=w(9326),T=w(6648);function V(...N){const R=(0,z.lI)(N);return(0,T.H)(N,R)}},8810:(it,C,w)=>{"use strict";w.d(C,{$:()=>V});var z=w(1985),T=w(8071);function V(N,R){const M=(0,T.T)(N)?N:()=>N,G=Y=>Y.error(M());return new z.c(R?Y=>R.schedule(G,0,Y):G)}},4360:(it,C,w)=>{"use strict";w.d(C,{_:()=>T});var z=w(7707);function T(N,R,M,G,Y){return new V(N,R,M,G,Y)}class V extends z.vU{constructor(R,M,G,Y,K,J){super(R),this.onFinalize=K,this.shouldUnsubscribe=J,this._next=M?function(se){try{M(se)}catch(U){R.error(U)}}:super._next,this._error=Y?function(se){try{Y(se)}catch(U){R.error(U)}finally{this.unsubscribe()}}:super._error,this._complete=G?function(){try{G()}catch(se){R.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var R;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:M}=this;super.unsubscribe(),!M&&(null===(R=this.onFinalize)||void 0===R||R.call(this))}}}},9437:(it,C,w)=>{"use strict";w.d(C,{W:()=>N});var z=w(8750),T=w(4360),V=w(9974);function N(R){return(0,V.N)((M,G)=>{let J,Y=null,K=!1;Y=M.subscribe((0,T._)(G,void 0,void 0,se=>{J=(0,z.Tg)(R(se,N(R)(M))),Y?(Y.unsubscribe(),Y=null,J.subscribe(G)):K=!0})),K&&(Y.unsubscribe(),Y=null,J.subscribe(G))})}},274:(it,C,w)=>{"use strict";w.d(C,{H:()=>V});var z=w(3028),T=w(8071);function V(N,R){return(0,T.T)(R)?(0,z.Z)(N,R,1):(0,z.Z)(N,1)}},9901:(it,C,w)=>{"use strict";w.d(C,{U:()=>V});var z=w(9974),T=w(4360);function V(N){return(0,z.N)((R,M)=>{let G=!1;R.subscribe((0,T._)(M,Y=>{G=!0,M.next(Y)},()=>{G||M.next(N),M.complete()}))})}},5964:(it,C,w)=>{"use strict";w.d(C,{p:()=>V});var z=w(9974),T=w(4360);function V(N,R){return(0,z.N)((M,G)=>{let Y=0;M.subscribe((0,T._)(G,K=>N.call(R,K,Y++)&&G.next(K)))})}},980:(it,C,w)=>{"use strict";w.d(C,{j:()=>T});var z=w(9974);function T(V){return(0,z.N)((N,R)=>{try{N.subscribe(R)}finally{R.add(V)}})}},1594:(it,C,w)=>{"use strict";w.d(C,{$:()=>G});var z=w(9350),T=w(5964),V=w(6697),N=w(9901),R=w(3774),M=w(3669);function G(Y,K){const J=arguments.length>=2;return se=>se.pipe(Y?(0,T.p)((U,_e)=>Y(U,_e,se)):M.D,(0,V.s)(1),J?(0,N.U)(K):(0,R.v)(()=>new z.G))}},6354:(it,C,w)=>{"use strict";w.d(C,{T:()=>V});var z=w(9974),T=w(4360);function V(N,R){return(0,z.N)((M,G)=>{let Y=0;M.subscribe((0,T._)(G,K=>{G.next(N.call(R,K,Y++))}))})}},3703:(it,C,w)=>{"use strict";w.d(C,{u:()=>T});var z=w(6354);function T(V){return(0,z.T)(()=>V)}},5412:(it,C,w)=>{"use strict";w.d(C,{h:()=>N});var z=w(8750),T=w(5225),V=w(4360);function N(R,M,G,Y,K,J,se,U){const _e=[];let Ae=0,Ne=0,Le=!1;const tt=()=>{Le&&!_e.length&&!Ae&&M.complete()},_t=yt=>Ae<Y?Bt(yt):_e.push(yt),Bt=yt=>{J&&M.next(yt),Ae++;let Pt=!1;(0,z.Tg)(G(yt,Ne++)).subscribe((0,V._)(M,vt=>{K?.(vt),J?_t(vt):M.next(vt)},()=>{Pt=!0},void 0,()=>{if(Pt)try{for(Ae--;_e.length&&Ae<Y;){const vt=_e.shift();se?(0,T.N)(M,se,()=>Bt(vt)):Bt(vt)}tt()}catch(vt){M.error(vt)}}))};return R.subscribe((0,V._)(M,_t,()=>{Le=!0,tt()})),()=>{U?.()}}},3028:(it,C,w)=>{"use strict";w.d(C,{Z:()=>M});var z=w(6354),T=w(8750),V=w(9974),N=w(5412),R=w(8071);function M(G,Y,K=1/0){return(0,R.T)(Y)?M((J,se)=>(0,z.T)((U,_e)=>Y(J,U,se,_e))((0,T.Tg)(G(J,se))),K):("number"==typeof Y&&(K=Y),(0,V.N)((J,se)=>(0,N.h)(J,se,G,K)))}},5558:(it,C,w)=>{"use strict";w.d(C,{n:()=>N});var z=w(8750),T=w(9974),V=w(4360);function N(R,M){return(0,T.N)((G,Y)=>{let K=null,J=0,se=!1;const U=()=>se&&!K&&Y.complete();G.subscribe((0,V._)(Y,_e=>{K?.unsubscribe();let Ae=0;const Ne=J++;(0,z.Tg)(R(_e,Ne)).subscribe(K=(0,V._)(Y,Le=>Y.next(M?M(_e,Le,Ne,Ae++):Le),()=>{K=null,U()}))},()=>{se=!0,U()}))})}},6697:(it,C,w)=>{"use strict";w.d(C,{s:()=>N});var z=w(983),T=w(9974),V=w(4360);function N(R){return R<=0?()=>z.w:(0,T.N)((M,G)=>{let Y=0;M.subscribe((0,V._)(G,K=>{++Y<=R&&(G.next(K),R<=Y&&G.complete())}))})}},8141:(it,C,w)=>{"use strict";w.d(C,{M:()=>R});var z=w(8071),T=w(9974),V=w(4360),N=w(3669);function R(M,G,Y){const K=(0,z.T)(M)||G||Y?{next:M,error:G,complete:Y}:M;return K?(0,T.N)((J,se)=>{var U;null===(U=K.subscribe)||void 0===U||U.call(K);let _e=!0;J.subscribe((0,V._)(se,Ae=>{var Ne;null===(Ne=K.next)||void 0===Ne||Ne.call(K,Ae),se.next(Ae)},()=>{var Ae;_e=!1,null===(Ae=K.complete)||void 0===Ae||Ae.call(K),se.complete()},Ae=>{var Ne;_e=!1,null===(Ne=K.error)||void 0===Ne||Ne.call(K,Ae),se.error(Ae)},()=>{var Ae,Ne;_e&&(null===(Ae=K.unsubscribe)||void 0===Ae||Ae.call(K)),null===(Ne=K.finalize)||void 0===Ne||Ne.call(K)}))}):N.D}},3774:(it,C,w)=>{"use strict";w.d(C,{v:()=>N});var z=w(9350),T=w(9974),V=w(4360);function N(M=R){return(0,T.N)((G,Y)=>{let K=!1;G.subscribe((0,V._)(Y,J=>{K=!0,Y.next(J)},()=>K?Y.complete():Y.error(M())))})}function R(){return new z.G}},6129:(it,C,w)=>{"use strict";w.d(C,{U:()=>z});const z={now:()=>(z.delegate||Date).now(),delegate:void 0}},9270:(it,C,w)=>{"use strict";w.d(C,{f:()=>z});const z={setTimeout(T,V,...N){const{delegate:R}=z;return R?.setTimeout?R.setTimeout(T,V,...N):setTimeout(T,V,...N)},clearTimeout(T){const{delegate:V}=z;return(V?.clearTimeout||clearTimeout)(T)},delegate:void 0}},4761:(it,C,w)=>{"use strict";w.d(C,{l:()=>T});const T=function z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(it,C,w)=>{"use strict";w.d(C,{s:()=>z});const z="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(it,C,w)=>{"use strict";w.d(C,{G:()=>T});const T=(0,w(1853).L)(V=>function(){V(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(it,C,w)=>{"use strict";w.d(C,{lI:()=>R,ms:()=>N});var z=w(8071),T=w(9470);function V(G){return G[G.length-1]}function N(G){return(0,z.T)(V(G))?G.pop():void 0}function R(G){return(0,T.m)(V(G))?G.pop():void 0}},7908:(it,C,w)=>{"use strict";function z(T,V){if(T){const N=T.indexOf(V);0<=N&&T.splice(N,1)}}w.d(C,{o:()=>z})},1853:(it,C,w)=>{"use strict";function z(T){const N=T(R=>{Error.call(R),R.stack=(new Error).stack});return N.prototype=Object.create(Error.prototype),N.prototype.constructor=N,N}w.d(C,{L:()=>z})},9786:(it,C,w)=>{"use strict";w.d(C,{Y:()=>V,l:()=>N});var z=w(1026);let T=null;function V(R){if(z.$.useDeprecatedSynchronousErrorHandling){const M=!T;if(M&&(T={errorThrown:!1,error:null}),R(),M){const{errorThrown:G,error:Y}=T;if(T=null,G)throw Y}}else R()}function N(R){z.$.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=R)}},5225:(it,C,w)=>{"use strict";function z(T,V,N,R=0,M=!1){const G=V.schedule(function(){N(),M?T.add(this.schedule(null,R)):this.unsubscribe()},R);if(T.add(G),!M)return G}w.d(C,{N:()=>z})},3669:(it,C,w)=>{"use strict";function z(T){return T}w.d(C,{D:()=>z})},7441:(it,C,w)=>{"use strict";w.d(C,{X:()=>z});const z=T=>T&&"number"==typeof T.length&&"function"!=typeof T},7953:(it,C,w)=>{"use strict";w.d(C,{T:()=>T});var z=w(8071);function T(V){return Symbol.asyncIterator&&(0,z.T)(V?.[Symbol.asyncIterator])}},8071:(it,C,w)=>{"use strict";function z(T){return"function"==typeof T}w.d(C,{T:()=>z})},5055:(it,C,w)=>{"use strict";w.d(C,{l:()=>V});var z=w(3494),T=w(8071);function V(N){return(0,T.T)(N[z.s])}},5397:(it,C,w)=>{"use strict";w.d(C,{x:()=>V});var z=w(4761),T=w(8071);function V(N){return(0,T.T)(N?.[z.l])}},9858:(it,C,w)=>{"use strict";w.d(C,{y:()=>T});var z=w(8071);function T(V){return(0,z.T)(V?.then)}},5196:(it,C,w)=>{"use strict";w.d(C,{C:()=>V,U:()=>N});var z=w(1635),T=w(8071);function V(R){return(0,z.__asyncGenerator)(this,arguments,function*(){const G=R.getReader();try{for(;;){const{value:Y,done:K}=yield(0,z.__await)(G.read());if(K)return yield(0,z.__await)(void 0);yield yield(0,z.__await)(Y)}}finally{G.releaseLock()}})}function N(R){return(0,T.T)(R?.getReader)}},9470:(it,C,w)=>{"use strict";w.d(C,{m:()=>T});var z=w(8071);function T(V){return V&&(0,z.T)(V.schedule)}},9974:(it,C,w)=>{"use strict";w.d(C,{N:()=>V,S:()=>T});var z=w(8071);function T(N){return(0,z.T)(N?.lift)}function V(N){return R=>{if(T(R))return R.lift(function(M){try{return N(M,this)}catch(G){this.error(G)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(it,C,w)=>{"use strict";function z(){}w.d(C,{l:()=>z})},1203:(it,C,w)=>{"use strict";w.d(C,{F:()=>T,m:()=>V});var z=w(3669);function T(...N){return V(N)}function V(N){return 0===N.length?z.D:1===N.length?N[0]:function(M){return N.reduce((G,Y)=>Y(G),M)}}},5334:(it,C,w)=>{"use strict";w.d(C,{m:()=>V});var z=w(1026),T=w(9270);function V(N){T.f.setTimeout(()=>{const{onUnhandledError:R}=z.$;if(!R)throw N;R(N)})}},591:(it,C,w)=>{"use strict";function z(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}w.d(C,{L:()=>z})},2980:(it,C,w)=>{"use strict";var z=w(9293).default;const T={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},N=[T.OPENID_SCOPE,T.PROFILE_SCOPE,T.OFFLINE_ACCESS_SCOPE],R=[...N,T.EMAIL_SCOPE],G={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},J={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},se={PLAIN:"plain",S256:"S256"},U={QUERY:"query",FRAGMENT:"fragment"},_e={...U,FORM_POST:"form_post"},Le={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},tt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},_t="appmetadata",Gt={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ht={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Gr={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},Nn="unexpected_error",br="post_request_failed";var bt=Object.freeze({__proto__:null,postRequestFailed:br,unexpectedError:Nn});const qt={[Nn]:"Unexpected error in authentication.",[br]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},fn={unexpectedError:{code:Nn,desc:qt[Nn]},postRequestFailed:{code:br,desc:qt[br]}};class Ut extends Error{constructor(p,_,A){super(_?`${p}: ${_}`:p),Object.setPrototypeOf(this,Ut.prototype),this.errorCode=p||T.EMPTY_STRING,this.errorMessage=_||T.EMPTY_STRING,this.subError=A||T.EMPTY_STRING,this.name="AuthError"}setCorrelationId(p){this.correlationId=p}}function bn(ve,p){return new Ut(ve,p?`${qt[ve]} ${p}`:qt[ve])}const Pn="client_info_decoding_error",gr="client_info_empty_error",ui="token_parsing_error",Oi="null_or_empty_token",Dr="endpoints_resolution_error",hr="network_error",ei="openid_config_error",ra="hash_not_deserialized",Hi="invalid_state",No="state_mismatch",fo="state_not_found",jr="nonce_mismatch",Do="auth_time_not_found",_i="max_age_transpired",xs="multiple_matching_tokens",tc="multiple_matching_accounts",gc="multiple_matching_appMetadata",Vs="request_cannot_be_made",Fo="cannot_remove_empty_scope",Ta="cannot_append_scopeset",kr="empty_input_scopeset",Ei="device_code_polling_cancelled",dr="device_code_expired",Gs="device_code_unknown_error",va="no_account_in_silent_request",$a="invalid_cache_record",ca="invalid_cache_environment",Xo="no_account_found",ua="no_crypto_object",Ho="unexpected_credential_type",Aa="invalid_assertion",oo="invalid_client_credential",so="token_refresh_required",Ci="user_timeout_reached",Oc="token_claims_cnf_required_for_signedjwt",Ns="authorization_code_missing_from_server_response",Ds="binding_key_not_removed",ns="end_session_endpoint_not_supported",ba="key_id_missing",_s="no_network_connectivity",Kt="user_canceled",en="missing_tenant_id_error",Qe="method_not_implemented",Et="nested_app_auth_bridge_disabled";var wn=Object.freeze({__proto__:null,authTimeNotFound:Do,authorizationCodeMissingFromServerResponse:Ns,bindingKeyNotRemoved:Ds,cannotAppendScopeSet:Ta,cannotRemoveEmptyScope:Fo,clientInfoDecodingError:Pn,clientInfoEmptyError:gr,deviceCodeExpired:dr,deviceCodePollingCancelled:Ei,deviceCodeUnknownError:Gs,emptyInputScopeSet:kr,endSessionEndpointNotSupported:ns,endpointResolutionError:Dr,hashNotDeserialized:ra,invalidAssertion:Aa,invalidCacheEnvironment:ca,invalidCacheRecord:$a,invalidClientCredential:oo,invalidState:Hi,keyIdMissing:ba,maxAgeTranspired:_i,methodNotImplemented:Qe,missingTenantIdError:en,multipleMatchingAccounts:tc,multipleMatchingAppMetadata:gc,multipleMatchingTokens:xs,nestedAppAuthBridgeDisabled:Et,networkError:hr,noAccountFound:Xo,noAccountInSilentRequest:va,noCryptoObject:ua,noNetworkConnectivity:_s,nonceMismatch:jr,nullOrEmptyToken:Oi,openIdConfigError:ei,requestCannotBeMade:Vs,stateMismatch:No,stateNotFound:fo,tokenClaimsCnfRequiredForSignedJwt:Oc,tokenParsingError:ui,tokenRefreshRequired:so,unexpectedCredentialType:Ho,userCanceled:Kt,userTimeoutReached:Ci});const $n={[Pn]:"The client info could not be parsed/decoded correctly",[gr]:"The client info was empty",[ui]:"Token cannot be parsed",[Oi]:"The token is null or empty",[Dr]:"Endpoints cannot be resolved",[hr]:"Network request failed",[ei]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ra]:"The hash parameters could not be deserialized",[Hi]:"State was not the expected format",[No]:"State mismatch error",[fo]:"State not found",[jr]:"Nonce mismatch error",[Do]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[_i]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[xs]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[tc]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[gc]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Vs]:"Token request cannot be made without authorization code or refresh token.",[Fo]:"Cannot remove null or empty scope from ScopeSet",[Ta]:"Cannot append ScopeSet",[kr]:"Empty input ScopeSet cannot be processed",[Ei]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[dr]:"Device code is expired.",[Gs]:"Device code stopped polling for unknown reasons.",[va]:"Please pass an account object, silent flow is not supported without account information",[$a]:"Cache record object was null or undefined.",[ca]:"Invalid environment when attempting to create cache entry",[Xo]:"No account found in cache for given key.",[ua]:"No crypto object detected.",[Ho]:"Unexpected credential type.",[Aa]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[oo]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[so]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Ci]:"User defined timeout for device code polling reached",[Oc]:"Cannot generate a POP jwt if the token_claims are not populated",[Ns]:"Server response does not contain an authorization code to proceed",[Ds]:"Could not remove the credential's binding key from storage.",[ns]:"The provided authority does not support logout",[ba]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[_s]:"No network connectivity. Check your internet connection.",[Kt]:"User cancelled the flow.",[en]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Qe]:"This method has not been implemented",[Et]:"The nested app auth bridge is disabled"},Ti={clientInfoDecodingError:{code:Pn,desc:$n[Pn]},clientInfoEmptyError:{code:gr,desc:$n[gr]},tokenParsingError:{code:ui,desc:$n[ui]},nullOrEmptyToken:{code:Oi,desc:$n[Oi]},endpointResolutionError:{code:Dr,desc:$n[Dr]},networkError:{code:hr,desc:$n[hr]},unableToGetOpenidConfigError:{code:ei,desc:$n[ei]},hashNotDeserialized:{code:ra,desc:$n[ra]},invalidStateError:{code:Hi,desc:$n[Hi]},stateMismatchError:{code:No,desc:$n[No]},stateNotFoundError:{code:fo,desc:$n[fo]},nonceMismatchError:{code:jr,desc:$n[jr]},authTimeNotFoundError:{code:Do,desc:$n[Do]},maxAgeTranspired:{code:_i,desc:$n[_i]},multipleMatchingTokens:{code:xs,desc:$n[xs]},multipleMatchingAccounts:{code:tc,desc:$n[tc]},multipleMatchingAppMetadata:{code:gc,desc:$n[gc]},tokenRequestCannotBeMade:{code:Vs,desc:$n[Vs]},removeEmptyScopeError:{code:Fo,desc:$n[Fo]},appendScopeSetError:{code:Ta,desc:$n[Ta]},emptyInputScopeSetError:{code:kr,desc:$n[kr]},DeviceCodePollingCancelled:{code:Ei,desc:$n[Ei]},DeviceCodeExpired:{code:dr,desc:$n[dr]},DeviceCodeUnknownError:{code:Gs,desc:$n[Gs]},NoAccountInSilentRequest:{code:va,desc:$n[va]},invalidCacheRecord:{code:$a,desc:$n[$a]},invalidCacheEnvironment:{code:ca,desc:$n[ca]},noAccountFound:{code:Xo,desc:$n[Xo]},noCryptoObj:{code:ua,desc:$n[ua]},unexpectedCredentialType:{code:Ho,desc:$n[Ho]},invalidAssertion:{code:Aa,desc:$n[Aa]},invalidClientCredential:{code:oo,desc:$n[oo]},tokenRefreshRequired:{code:so,desc:$n[so]},userTimeoutReached:{code:Ci,desc:$n[Ci]},tokenClaimsRequired:{code:Oc,desc:$n[Oc]},noAuthorizationCodeFromServer:{code:Ns,desc:$n[Ns]},bindingKeyNotRemovedError:{code:Ds,desc:$n[Ds]},logoutNotSupported:{code:ns,desc:$n[ns]},keyIdMissing:{code:ba,desc:$n[ba]},noNetworkConnectivity:{code:_s,desc:$n[_s]},userCanceledError:{code:Kt,desc:$n[Kt]},missingTenantIdError:{code:en,desc:$n[en]},nestedAppAuthBridgeDisabled:{code:Et,desc:$n[Et]}};class ji extends Ut{constructor(p,_){super(p,_?`${$n[p]}: ${_}`:$n[p]),this.name="ClientAuthError",Object.setPrototypeOf(this,ji.prototype)}}function xn(ve,p){return new ji(ve,p)}const ia={createNewGuid:()=>{throw xn(Qe)},base64Decode:()=>{throw xn(Qe)},base64Encode:()=>{throw xn(Qe)},base64UrlEncode:()=>{throw xn(Qe)},encodeKid:()=>{throw xn(Qe)},getPublicKeyThumbprint:()=>z(function*(){throw xn(Qe)})(),removeTokenBindingKey:()=>z(function*(){throw xn(Qe)})(),clearKeystore:()=>z(function*(){throw xn(Qe)})(),signJwt:()=>z(function*(){throw xn(Qe)})(),hashString:()=>z(function*(){throw xn(Qe)})()};var ve;C.LogLevel=void 0,(ve=C.LogLevel||(C.LogLevel={}))[ve.Error=0]="Error",ve[ve.Warning=1]="Warning",ve[ve.Info=2]="Info",ve[ve.Verbose=3]="Verbose",ve[ve.Trace=4]="Trace";class oa{constructor(p,_,A){this.level=C.LogLevel.Info;const de=p||oa.createDefaultLoggerOptions();this.localCallback=de.loggerCallback||(()=>{}),this.piiLoggingEnabled=de.piiLoggingEnabled||!1,this.level="number"==typeof de.logLevel?de.logLevel:C.LogLevel.Info,this.correlationId=de.correlationId||T.EMPTY_STRING,this.packageName=_||T.EMPTY_STRING,this.packageVersion=A||T.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:C.LogLevel.Info}}clone(p,_,A){return new oa({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:A||this.correlationId},p,_)}logMessage(p,_){if(_.logLevel>this.level||!this.piiLoggingEnabled&&_.containsPii)return;const de=`[${(new Date).toUTCString()}] : [${_.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${C.LogLevel[_.logLevel]} - ${p}`;this.executeCallback(_.logLevel,de,_.containsPii||!1)}executeCallback(p,_,A){this.localCallback&&this.localCallback(p,_,A)}error(p,_){this.logMessage(p,{logLevel:C.LogLevel.Error,containsPii:!1,correlationId:_||T.EMPTY_STRING})}errorPii(p,_){this.logMessage(p,{logLevel:C.LogLevel.Error,containsPii:!0,correlationId:_||T.EMPTY_STRING})}warning(p,_){this.logMessage(p,{logLevel:C.LogLevel.Warning,containsPii:!1,correlationId:_||T.EMPTY_STRING})}warningPii(p,_){this.logMessage(p,{logLevel:C.LogLevel.Warning,containsPii:!0,correlationId:_||T.EMPTY_STRING})}info(p,_){this.logMessage(p,{logLevel:C.LogLevel.Info,containsPii:!1,correlationId:_||T.EMPTY_STRING})}infoPii(p,_){this.logMessage(p,{logLevel:C.LogLevel.Info,containsPii:!0,correlationId:_||T.EMPTY_STRING})}verbose(p,_){this.logMessage(p,{logLevel:C.LogLevel.Verbose,containsPii:!1,correlationId:_||T.EMPTY_STRING})}verbosePii(p,_){this.logMessage(p,{logLevel:C.LogLevel.Verbose,containsPii:!0,correlationId:_||T.EMPTY_STRING})}trace(p,_){this.logMessage(p,{logLevel:C.LogLevel.Trace,containsPii:!1,correlationId:_||T.EMPTY_STRING})}tracePii(p,_){this.logMessage(p,{logLevel:C.LogLevel.Trace,containsPii:!0,correlationId:_||T.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const ys="@azure/msal-common",jc="14.15.0",Tl={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};function qs(ve,p){const _=function Wo(ve){if(!ve)throw xn(Oi);const _=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(ve);if(!_||_.length<4)throw xn(ui);return _[2]}(ve);try{const A=p(_);return JSON.parse(A)}catch{throw xn(ui)}}function eu(ve,p){if(0===p||Date.now()-3e5>ve+p)throw xn(_i)}function vs(){return Math.round((new Date).getTime()/1e3)}function Va(ve,p){const _=Number(ve)||0;return vs()+p>_}function Pc(ve){return Number(ve)>vs()}function rs(ve){return[Il(ve),jl(ve),Dl(ve),dl(ve),Zo(ve)].join(Le.CACHE_KEY_SEPARATOR).toLowerCase()}function ks(ve,p,_,A,Q){return{credentialType:tt.ID_TOKEN,homeAccountId:ve,environment:p,clientId:A,secret:_,realm:Q}}function Ia(ve,p,_,A,Q,de,be,He,wt,Dt,dn,ti,ai,yo,Za){const Ja={homeAccountId:ve,credentialType:tt.ACCESS_TOKEN,secret:_,cachedAt:vs().toString(),expiresOn:be.toString(),extendedExpiresOn:He.toString(),environment:p,clientId:A,realm:Q,target:de,tokenType:dn||Ht.BEARER};if(ti&&(Ja.userAssertionHash=ti),Dt&&(Ja.refreshOn=Dt.toString()),yo&&(Ja.requestedClaims=yo,Ja.requestedClaimsHash=Za),Ja.tokenType?.toLowerCase()!==Ht.BEARER.toLowerCase())switch(Ja.credentialType=tt.ACCESS_TOKEN_WITH_AUTH_SCHEME,Ja.tokenType){case Ht.POP:const zu=qs(_,wt);if(!zu?.cnf?.kid)throw xn(Oc);Ja.keyId=zu.cnf.kid;break;case Ht.SSH:Ja.keyId=ai}return Ja}function Al(ve,p,_,A,Q,de,be){const He={credentialType:tt.REFRESH_TOKEN,homeAccountId:ve,environment:p,clientId:A,secret:_};return de&&(He.userAssertionHash=de),Q&&(He.familyId=Q),be&&(He.expiresOn=be.toString()),He}function cl(ve){return ve.hasOwnProperty("homeAccountId")&&ve.hasOwnProperty("environment")&&ve.hasOwnProperty("credentialType")&&ve.hasOwnProperty("clientId")&&ve.hasOwnProperty("secret")}function ll(ve){return!!ve&&cl(ve)&&ve.hasOwnProperty("realm")&&ve.hasOwnProperty("target")&&(ve.credentialType===tt.ACCESS_TOKEN||ve.credentialType===tt.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function ul(ve){return!!ve&&cl(ve)&&ve.hasOwnProperty("realm")&&ve.credentialType===tt.ID_TOKEN}function Cs(ve){return!!ve&&cl(ve)&&ve.credentialType===tt.REFRESH_TOKEN}function Il(ve){return[ve.homeAccountId,ve.environment].join(Le.CACHE_KEY_SEPARATOR).toLowerCase()}function jl(ve){return[ve.credentialType,ve.credentialType===tt.REFRESH_TOKEN&&ve.familyId||ve.clientId,ve.realm||""].join(Le.CACHE_KEY_SEPARATOR).toLowerCase()}function Dl(ve){return(ve.target||"").toLowerCase()}function dl(ve){return(ve.requestedClaimsHash||"").toLowerCase()}function Zo(ve){return ve.tokenType&&ve.tokenType.toLowerCase()!==Ht.BEARER.toLowerCase()?ve.tokenType.toLowerCase():""}function vn(){return vs()+86400}function Jn(ve,p,_){ve.authorization_endpoint=p.authorization_endpoint,ve.token_endpoint=p.token_endpoint,ve.end_session_endpoint=p.end_session_endpoint,ve.issuer=p.issuer,ve.endpointsFromNetwork=_,ve.jwks_uri=p.jwks_uri}function mr(ve,p,_){ve.aliases=p.aliases,ve.preferred_cache=p.preferred_cache,ve.preferred_network=p.preferred_network,ve.aliasesFromNetwork=_}function pr(ve){return ve.expiresAt<=vs()}const Ai="redirect_uri_empty",Ii="claims_request_parsing_error",co="authority_uri_insecure",ko="url_parse_error",jo="empty_url_error",An="empty_input_scopes_error",is="invalid_prompt_value",ao="invalid_claims",Jo="token_request_empty",la="logout_request_empty",$s="invalid_code_challenge_method",wc="pkce_params_missing",oi="invalid_cloud_discovery_metadata",Ma="invalid_authority_metadata",Wc="untrusted_authority",ls="missing_ssh_jwk",os="missing_ssh_kid",ka="missing_nonce_authentication_header",mc="invalid_authentication_header",Co="cannot_set_OIDCOptions",tu="cannot_allow_native_broker",Lu="authority_mismatch";var Lo=Object.freeze({__proto__:null,authorityMismatch:Lu,authorityUriInsecure:co,cannotAllowNativeBroker:tu,cannotSetOIDCOptions:Co,claimsRequestParsingError:Ii,emptyInputScopesError:An,invalidAuthenticationHeader:mc,invalidAuthorityMetadata:Ma,invalidClaims:ao,invalidCloudDiscoveryMetadata:oi,invalidCodeChallengeMethod:$s,invalidPromptValue:is,logoutRequestEmpty:la,missingNonceAuthenticationHeader:ka,missingSshJwk:ls,missingSshKid:os,pkceParamsMissing:wc,redirectUriEmpty:Ai,tokenRequestEmpty:Jo,untrustedAuthority:Wc,urlEmptyError:jo,urlParseError:ko});const Ks={[Ai]:"A redirect URI is required for all calls, and none has been set.",[Ii]:"Could not parse the given claims request object.",[co]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[ko]:"URL could not be parsed into appropriate segments.",[jo]:"URL was empty or null.",[An]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[is]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ao]:"Given claims parameter must be a stringified JSON object.",[Jo]:"Token request was empty and not found in cache.",[la]:"The logout request was null or undefined.",[$s]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[wc]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[oi]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ma]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Wc]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ls]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[os]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[ka]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[mc]:"Invalid authentication header provided",[Co]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[tu]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Lu]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Dd={redirectUriNotSet:{code:Ai,desc:Ks[Ai]},claimsRequestParsingError:{code:Ii,desc:Ks[Ii]},authorityUriInsecure:{code:co,desc:Ks[co]},urlParseError:{code:ko,desc:Ks[ko]},urlEmptyError:{code:jo,desc:Ks[jo]},emptyScopesError:{code:An,desc:Ks[An]},invalidPrompt:{code:is,desc:Ks[is]},invalidClaimsRequest:{code:ao,desc:Ks[ao]},tokenRequestEmptyError:{code:Jo,desc:Ks[Jo]},logoutRequestEmptyError:{code:la,desc:Ks[la]},invalidCodeChallengeMethod:{code:$s,desc:Ks[$s]},invalidCodeChallengeParams:{code:wc,desc:Ks[wc]},invalidCloudDiscoveryMetadata:{code:oi,desc:Ks[oi]},invalidAuthorityMetadata:{code:Ma,desc:Ks[Ma]},untrustedAuthority:{code:Wc,desc:Ks[Wc]},missingSshJwk:{code:ls,desc:Ks[ls]},missingSshKid:{code:os,desc:Ks[os]},missingNonceAuthenticationHeader:{code:ka,desc:Ks[ka]},invalidAuthenticationHeader:{code:mc,desc:Ks[mc]},cannotSetOIDCOptions:{code:Co,desc:Ks[Co]},cannotAllowNativeBroker:{code:tu,desc:Ks[tu]},authorityMismatch:{code:Lu,desc:Ks[Lu]}};class kd extends Ut{constructor(p){super(p,Ks[p]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,kd.prototype)}}function La(ve){return new kd(ve)}class _c{static isEmptyObj(p){if(p)try{const _=JSON.parse(p);return 0===Object.keys(_).length}catch{}return!0}static startsWith(p,_){return 0===p.indexOf(_)}static endsWith(p,_){return p.length>=_.length&&p.lastIndexOf(_)===p.length-_.length}static queryStringToObject(p){const _={},A=p.split("&"),Q=de=>decodeURIComponent(de.replace(/\+/g," "));return A.forEach(de=>{if(de.trim()){const[be,He]=de.split(/=(.+)/g,2);be&&He&&(_[Q(be)]=Q(He))}}),_}static trimArrayEntries(p){return p.map(_=>_.trim())}static removeEmptyStringsFromArray(p){return p.filter(_=>!!_)}static jsonParseHelper(p){try{return JSON.parse(p)}catch{return null}}static matchPattern(p,_){return new RegExp(p.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(_)}}class Ca{constructor(p){const _=p?_c.trimArrayEntries([...p]):[],A=_?_c.removeEmptyStringsFromArray(_):[];this.validateInputScopes(A),this.scopes=new Set,A.forEach(Q=>this.scopes.add(Q))}static fromString(p){const A=(p||T.EMPTY_STRING).split(" ");return new Ca(A)}static createSearchScopes(p){const _=new Ca(p);return _.containsOnlyOIDCScopes()?_.removeScope(T.OFFLINE_ACCESS_SCOPE):_.removeOIDCScopes(),_}validateInputScopes(p){if(!p||p.length<1)throw La(An)}containsScope(p){const _=this.printScopesLowerCase().split(" "),A=new Ca(_);return!!p&&A.scopes.has(p.toLowerCase())}containsScopeSet(p){return!(!p||p.scopes.size<=0)&&this.scopes.size>=p.scopes.size&&p.asArray().every(_=>this.containsScope(_))}containsOnlyOIDCScopes(){let p=0;return R.forEach(_=>{this.containsScope(_)&&(p+=1)}),this.scopes.size===p}appendScope(p){p&&this.scopes.add(p.trim())}appendScopes(p){try{p.forEach(_=>this.appendScope(_))}catch{throw xn(Ta)}}removeScope(p){if(!p)throw xn(Fo);this.scopes.delete(p.trim())}removeOIDCScopes(){R.forEach(p=>{this.scopes.delete(p)})}unionScopeSets(p){if(!p)throw xn(kr);const _=new Set;return p.scopes.forEach(A=>_.add(A.toLowerCase())),this.scopes.forEach(A=>_.add(A.toLowerCase())),_}intersectingScopeSets(p){if(!p)throw xn(kr);p.containsOnlyOIDCScopes()||p.removeOIDCScopes();const _=this.unionScopeSets(p),A=p.getScopeCount(),Q=this.getScopeCount();return _.size<Q+A}getScopeCount(){return this.scopes.size}asArray(){const p=[];return this.scopes.forEach(_=>p.push(_)),p}printScopes(){return this.scopes?this.asArray().join(" "):T.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Ld(ve,p){if(!ve)throw xn(gr);try{const _=p(ve);return JSON.parse(_)}catch{throw xn(Pn)}}function Fu(ve){if(!ve)throw xn(Pn);const p=ve.split(Le.CLIENT_INFO_SEPARATOR,2);return{uid:p[0],utid:p.length<2?T.EMPTY_STRING:p[1]}}function Hu(ve,p){return!!ve&&!!p&&ve===p.split(".")[1]}function Zu(ve,p,_,A){if(A){const{oid:Q,sub:de,tid:be,name:He,tfp:wt,acr:Dt}=A,dn=be||wt||Dt||"";return{tenantId:dn,localAccountId:Q||de||"",name:He,isHomeTenant:Hu(dn,ve)}}return{tenantId:_,localAccountId:p,isHomeTenant:Hu(_,ve)}}function Uu(ve,p,_,A){let Q=ve;if(p){const{isHomeTenant:de,...be}=p;Q={...ve,...be}}if(_){const{isHomeTenant:de,...be}=Zu(ve.homeAccountId,ve.localAccountId,ve.tenantId,_);return Q={...Q,...be,idTokenClaims:_,idToken:A},Q}return Q}function Ju(ve){return ve&&(ve.tid||ve.tfp||ve.acr)||null}const Ml={AAD:"AAD",OIDC:"OIDC"};class nc{generateAccountId(){return[this.homeAccountId,this.environment].join(Le.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return nc.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(p=>[p.tenantId,p]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(p){const _=p.homeAccountId.split(".")[1];return[p.homeAccountId,p.environment||"",_||p.tenantId||""].join(Le.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(p,_,A){const Q=new nc;let de;Q.authorityType=1===_.authorityType?"ADFS":_.protocolMode===Ml.AAD?"MSSTS":"Generic",p.clientInfo&&A&&(de=Ld(p.clientInfo,A)),Q.clientInfo=p.clientInfo,Q.homeAccountId=p.homeAccountId,Q.nativeAccountId=p.nativeAccountId;const be=p.environment||_&&_.getPreferredCache();if(!be)throw xn(ca);if(Q.environment=be,Q.realm=de?.utid||Ju(p.idTokenClaims)||"",Q.localAccountId=de?.uid||p.idTokenClaims?.oid||p.idTokenClaims?.sub||"",Q.username=p.idTokenClaims?.preferred_username||p.idTokenClaims?.upn||(p.idTokenClaims?.emails?p.idTokenClaims.emails[0]:null)||"",Q.name=p.idTokenClaims?.name||"",Q.cloudGraphHostName=p.cloudGraphHostName,Q.msGraphHost=p.msGraphHost,p.tenantProfiles)Q.tenantProfiles=p.tenantProfiles;else{const Dt=Zu(p.homeAccountId,Q.localAccountId,Q.realm,p.idTokenClaims);Q.tenantProfiles=[Dt]}return Q}static createFromAccountInfo(p,_,A){const Q=new nc;return Q.authorityType=p.authorityType||"Generic",Q.homeAccountId=p.homeAccountId,Q.localAccountId=p.localAccountId,Q.nativeAccountId=p.nativeAccountId,Q.realm=p.tenantId,Q.environment=p.environment,Q.username=p.username,Q.name=p.name,Q.cloudGraphHostName=_,Q.msGraphHost=A,Q.tenantProfiles=Array.from(p.tenantProfiles?.values()||[]),Q}static generateHomeAccountId(p,_,A,Q,de){if(1!==_&&2!==_){if(p)try{const be=Ld(p,Q.base64Decode);if(be.uid&&be.utid)return`${be.uid}.${be.utid}`}catch{}A.warning("No client info in response")}return de?.sub||""}static isAccountEntity(p){return!!p&&p.hasOwnProperty("homeAccountId")&&p.hasOwnProperty("environment")&&p.hasOwnProperty("realm")&&p.hasOwnProperty("localAccountId")&&p.hasOwnProperty("username")&&p.hasOwnProperty("authorityType")}static accountInfoIsEqual(p,_,A){if(!p||!_)return!1;let Q=!0;if(A){const de=p.idTokenClaims||{},be=_.idTokenClaims||{};Q=de.iat===be.iat&&de.nonce===be.nonce}return p.homeAccountId===_.homeAccountId&&p.localAccountId===_.localAccountId&&p.username===_.username&&p.tenantId===_.tenantId&&p.environment===_.environment&&p.nativeAccountId===_.nativeAccountId&&Q}}function vh(ve){return ve.startsWith("#/")?ve.substring(2):ve.startsWith("#")||ve.startsWith("?")?ve.substring(1):ve}function mu(ve){if(!ve||ve.indexOf("=")<0)return null;try{const p=vh(ve),_=Object.fromEntries(new URLSearchParams(p));if(_.code||_.error||_.error_description||_.state)return _}catch{throw xn(ra)}return null}class Go{get urlString(){return this._urlString}constructor(p){if(this._urlString=p,!this._urlString)throw La(jo);p.includes("#")||(this._urlString=Go.canonicalizeUri(p))}static canonicalizeUri(p){if(p){let _=p.toLowerCase();return _c.endsWith(_,"?")?_=_.slice(0,-1):_c.endsWith(_,"?/")&&(_=_.slice(0,-2)),_c.endsWith(_,"/")||(_+="/"),_}return p}validateAsUri(){let p;try{p=this.getUrlComponents()}catch{throw La(ko)}if(!p.HostNameAndPort||!p.PathSegments)throw La(ko);if(!p.Protocol||"https:"!==p.Protocol.toLowerCase())throw La(co)}static appendQueryString(p,_){return _?p.indexOf("?")<0?`${p}?${_}`:`${p}&${_}`:p}static removeHashFromUrl(p){return Go.canonicalizeUri(p.split("#")[0])}replaceTenantPath(p){const _=this.getUrlComponents(),A=_.PathSegments;return p&&0!==A.length&&("common"===A[0]||"organizations"===A[0])&&(A[0]=p),Go.constructAuthorityUriFromObject(_)}getUrlComponents(){const p=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),_=this.urlString.match(p);if(!_)throw La(ko);const A={Protocol:_[1],HostNameAndPort:_[4],AbsolutePath:_[5],QueryString:_[7]};let Q=A.AbsolutePath.split("/");return Q=Q.filter(de=>de&&de.length>0),A.PathSegments=Q,A.QueryString&&A.QueryString.endsWith("/")&&(A.QueryString=A.QueryString.substring(0,A.QueryString.length-1)),A}static getDomainFromUrl(p){const _=RegExp("^([^:/?#]+://)?([^/?#]*)"),A=p.match(_);if(!A)throw La(ko);return A[2]}static getAbsoluteUrl(p,_){if(p[0]===T.FORWARD_SLASH){const Q=new Go(_).getUrlComponents();return Q.Protocol+"//"+Q.HostNameAndPort+p}return p}static constructAuthorityUriFromObject(p){return new Go(p.Protocol+"//"+p.HostNameAndPort+"/"+p.PathSegments.join("/"))}static hashContainsKnownProperties(p){return!!mu(p)}}const fp={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Zd={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},fd=new Set;function zh(ve,p,_,A){if(A?.trace(`getAliasesFromMetadata called with source: ${_}`),ve&&p){const Q=Qa(p,ve);if(Q)return A?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${_}, returning aliases`),Q.aliases;A?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${_}`)}return null}function Qa(ve,p){for(let _=0;_<ve.length;_++){const A=ve[_];if(A.aliases.includes(p))return A}return null}Zd.metadata.forEach(ve=>{ve.aliases.forEach(p=>{fd.add(p)})});const Qc="cache_quota_exceeded",Rc="cache_error_unknown",Jd={[Qc]:"Exceeded cache storage capacity.",[Rc]:"Unexpected error occurred when using cache storage."};class Tc extends Error{constructor(p,_){const A=_||(Jd[p]?Jd[p]:Jd[Rc]);super(`${p}: ${A}`),Object.setPrototypeOf(this,Tc.prototype),this.name="CacheError",this.errorCode=p,this.errorMessage=A}}class Mr{constructor(p,_,A,Q){this.clientId=p,this.cryptoImpl=_,this.commonLogger=A.clone(ys,jc),this.staticAuthorityOptions=Q}getAllAccounts(p){return this.buildTenantProfiles(this.getAccountsFilteredBy(p||{}),p)}getAccountInfoFilteredBy(p){const _=this.getAllAccounts(p);return _.length>1?_.sort(Q=>Q.idTokenClaims?-1:1)[0]:1===_.length?_[0]:null}getBaseAccountInfo(p){const _=this.getAccountsFilteredBy(p);return _.length>0?_[0].getAccountInfo():null}buildTenantProfiles(p,_){return p.flatMap(A=>this.getTenantProfilesFromAccountEntity(A,_?.tenantId,_))}getTenantedAccountInfoByFilter(p,_,A,Q){let be,de=null;if(Q&&!this.tenantProfileMatchesFilter(A,Q))return null;const He=this.getIdToken(p,_,A.tenantId);return He&&(be=qs(He.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(be,Q))?null:(de=Uu(p,A,be,He?.secret),de)}getTenantProfilesFromAccountEntity(p,_,A){const Q=p.getAccountInfo();let de=Q.tenantProfiles||new Map;const be=this.getTokenKeys();if(_){const wt=de.get(_);if(!wt)return[];de=new Map([[_,wt]])}const He=[];return de.forEach(wt=>{const Dt=this.getTenantedAccountInfoByFilter(Q,be,wt,A);Dt&&He.push(Dt)}),He}tenantProfileMatchesFilter(p,_){return!(_.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(p,_.localAccountId)||_.name&&p.name!==_.name||void 0!==_.isHomeTenant&&p.isHomeTenant!==_.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(p,_){return!(_&&(_.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(p,_.localAccountId)||_.loginHint&&!this.matchLoginHintFromTokenClaims(p,_.loginHint)||_.username&&!this.matchUsername(p.preferred_username,_.username)||_.name&&!this.matchName(p,_.name)||_.sid&&!this.matchSid(p,_.sid)))}saveCacheRecord(p,_,A){var Q=this;return z(function*(){if(!p)throw xn($a);try{p.account&&Q.setAccount(p.account),p.idToken&&!1!==_?.idToken&&Q.setIdTokenCredential(p.idToken),p.accessToken&&!1!==_?.accessToken&&(yield Q.saveAccessToken(p.accessToken)),p.refreshToken&&!1!==_?.refreshToken&&Q.setRefreshTokenCredential(p.refreshToken),p.appMetadata&&Q.setAppMetadata(p.appMetadata)}catch(de){throw Q.commonLogger?.error("CacheManager.saveCacheRecord: failed"),de instanceof Error?(Q.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${de.message}`,A),"QuotaExceededError"===de.name||"NS_ERROR_DOM_QUOTA_REACHED"===de.name||de.message.includes("exceeded the quota")?(Q.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",A),new Tc(Qc)):new Tc(de.name,de.message)):(Q.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${de}`,A),new Tc(Rc))}})()}saveAccessToken(p){var _=this;return z(function*(){const A={clientId:p.clientId,credentialType:p.credentialType,environment:p.environment,homeAccountId:p.homeAccountId,realm:p.realm,tokenType:p.tokenType,requestedClaimsHash:p.requestedClaimsHash},Q=_.getTokenKeys(),de=Ca.fromString(p.target),be=[];Q.accessToken.forEach(He=>{if(!_.accessTokenKeyMatchesFilter(He,A,!1))return;const wt=_.getAccessTokenCredential(He);wt&&_.credentialMatchesFilter(wt,A)&&Ca.fromString(wt.target).intersectingScopeSets(de)&&be.push(_.removeAccessToken(He))}),yield Promise.all(be),_.setAccessTokenCredential(p)})()}getAccountsFilteredBy(p){const _=this.getAccountKeys(),A=[];return _.forEach(Q=>{if(!this.isAccountKey(Q,p.homeAccountId))return;const de=this.getAccount(Q,this.commonLogger);if(!de||p.homeAccountId&&!this.matchHomeAccountId(de,p.homeAccountId)||p.username&&!this.matchUsername(de.username,p.username)||p.environment&&!this.matchEnvironment(de,p.environment)||p.realm&&!this.matchRealm(de,p.realm)||p.nativeAccountId&&!this.matchNativeAccountId(de,p.nativeAccountId)||p.authorityType&&!this.matchAuthorityType(de,p.authorityType))return;const be={localAccountId:p?.localAccountId,name:p?.name},He=de.tenantProfiles?.filter(wt=>this.tenantProfileMatchesFilter(wt,be));He&&0===He.length||A.push(de)}),A}isAccountKey(p,_,A){return!(p.split(Le.CACHE_KEY_SEPARATOR).length<3||_&&!p.toLowerCase().includes(_.toLowerCase())||A&&!p.toLowerCase().includes(A.toLowerCase()))}isCredentialKey(p){if(p.split(Le.CACHE_KEY_SEPARATOR).length<6)return!1;const _=p.toLowerCase();if(-1===_.indexOf(tt.ID_TOKEN.toLowerCase())&&-1===_.indexOf(tt.ACCESS_TOKEN.toLowerCase())&&-1===_.indexOf(tt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===_.indexOf(tt.REFRESH_TOKEN.toLowerCase()))return!1;if(_.indexOf(tt.REFRESH_TOKEN.toLowerCase())>-1){const Q=`${tt.REFRESH_TOKEN}${Le.CACHE_KEY_SEPARATOR}1${Le.CACHE_KEY_SEPARATOR}`;if(-1===_.indexOf(`${tt.REFRESH_TOKEN}${Le.CACHE_KEY_SEPARATOR}${this.clientId}${Le.CACHE_KEY_SEPARATOR}`.toLowerCase())&&-1===_.indexOf(Q.toLowerCase()))return!1}else if(-1===_.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(p,_){return!(_.clientId&&!this.matchClientId(p,_.clientId)||_.userAssertionHash&&!this.matchUserAssertionHash(p,_.userAssertionHash)||"string"==typeof _.homeAccountId&&!this.matchHomeAccountId(p,_.homeAccountId)||_.environment&&!this.matchEnvironment(p,_.environment)||_.realm&&!this.matchRealm(p,_.realm)||_.credentialType&&!this.matchCredentialType(p,_.credentialType)||_.familyId&&!this.matchFamilyId(p,_.familyId)||_.target&&!this.matchTarget(p,_.target)||(_.requestedClaimsHash||p.requestedClaimsHash)&&p.requestedClaimsHash!==_.requestedClaimsHash||p.credentialType===tt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(_.tokenType&&!this.matchTokenType(p,_.tokenType)||_.tokenType===Ht.SSH&&_.keyId&&!this.matchKeyId(p,_.keyId)))}getAppMetadataFilteredBy(p){const _=this.getKeys(),A={};return _.forEach(Q=>{if(!this.isAppMetadata(Q))return;const de=this.getAppMetadata(Q);de&&(p.environment&&!this.matchEnvironment(de,p.environment)||p.clientId&&!this.matchClientId(de,p.clientId)||(A[Q]=de))}),A}getAuthorityMetadataByAlias(p){const _=this.getAuthorityMetadataKeys();let A=null;return _.forEach(Q=>{if(!this.isAuthorityMetadata(Q)||-1===Q.indexOf(this.clientId))return;const de=this.getAuthorityMetadata(Q);de&&-1!==de.aliases.indexOf(p)&&(A=de)}),A}removeAllAccounts(){var p=this;return z(function*(){const _=p.getAccountKeys(),A=[];_.forEach(Q=>{A.push(p.removeAccount(Q))}),yield Promise.all(A)})()}removeAccount(p){var _=this;return z(function*(){const A=_.getAccount(p,_.commonLogger);A&&(yield _.removeAccountContext(A),_.removeItem(p))})()}removeAccountContext(p){var _=this;return z(function*(){const A=_.getTokenKeys(),Q=p.generateAccountId(),de=[];A.idToken.forEach(be=>{0===be.indexOf(Q)&&_.removeIdToken(be)}),A.accessToken.forEach(be=>{0===be.indexOf(Q)&&de.push(_.removeAccessToken(be))}),A.refreshToken.forEach(be=>{0===be.indexOf(Q)&&_.removeRefreshToken(be)}),yield Promise.all(de)})()}updateOutdatedCachedAccount(p,_,A){if(_&&_.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const Q=this.getAccountKeys().filter(Dt=>Dt.startsWith(_.homeAccountId)),de=[];Q.forEach(Dt=>{const dn=this.getCachedAccountEntity(Dt);dn&&de.push(dn)});const be=de.find(Dt=>Hu(Dt.realm,Dt.homeAccountId))||de[0];be.tenantProfiles=de.map(Dt=>({tenantId:Dt.realm,localAccountId:Dt.localAccountId,name:Dt.name,isHomeTenant:Hu(Dt.realm,Dt.homeAccountId)}));const He=Mr.toObject(new nc,{...be}),wt=He.generateAccountKey();return Q.forEach(Dt=>{Dt!==wt&&this.removeOutdatedAccount(p)}),this.setAccount(He),A?.verbose("Updated an outdated account entity in the cache"),He}return _}removeAccessToken(p){var _=this;return z(function*(){const A=_.getAccessTokenCredential(p);if(A){if(A.credentialType.toLowerCase()===tt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&A.tokenType===Ht.POP){const de=A.keyId;if(de)try{yield _.cryptoImpl.removeTokenBindingKey(de)}catch{throw xn(Ds)}}return _.removeItem(p)}})()}removeAppMetadata(){return this.getKeys().forEach(_=>{this.isAppMetadata(_)&&this.removeItem(_)}),!0}readAccountFromCache(p){const _=nc.generateAccountCacheKey(p);return this.getAccount(_,this.commonLogger)}getIdToken(p,_,A,Q,de){this.commonLogger.trace("CacheManager - getIdToken called");const He=this.getIdTokensByFilter({homeAccountId:p.homeAccountId,environment:p.environment,credentialType:tt.ID_TOKEN,clientId:this.clientId,realm:A},_),wt=He.size;if(wt<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(wt>1){let Dt=He;if(!A){const dn=new Map;He.forEach((ai,yo)=>{ai.realm===p.tenantId&&dn.set(yo,ai)});const ti=dn.size;if(ti<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),He.values().next().value;if(1===ti)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),dn.values().next().value;Dt=dn}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),Dt.forEach((dn,ti)=>{this.removeIdToken(ti)}),Q&&de&&Q.addFields({multiMatchedID:He.size},de),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),He.values().next().value}getIdTokensByFilter(p,_){const A=_&&_.idToken||this.getTokenKeys().idToken,Q=new Map;return A.forEach(de=>{if(!this.idTokenKeyMatchesFilter(de,{clientId:this.clientId,...p}))return;const be=this.getIdTokenCredential(de);be&&this.credentialMatchesFilter(be,p)&&Q.set(de,be)}),Q}idTokenKeyMatchesFilter(p,_){const A=p.toLowerCase();return!(_.clientId&&-1===A.indexOf(_.clientId.toLowerCase())||_.homeAccountId&&-1===A.indexOf(_.homeAccountId.toLowerCase()))}removeIdToken(p){this.removeItem(p)}removeRefreshToken(p){this.removeItem(p)}getAccessToken(p,_,A,Q,de,be){this.commonLogger.trace("CacheManager - getAccessToken called");const He=Ca.createSearchScopes(_.scopes),wt=_.authenticationScheme||Ht.BEARER,Dt=wt&&wt.toLowerCase()!==Ht.BEARER.toLowerCase()?tt.ACCESS_TOKEN_WITH_AUTH_SCHEME:tt.ACCESS_TOKEN,dn={homeAccountId:p.homeAccountId,environment:p.environment,credentialType:Dt,clientId:this.clientId,realm:Q||p.tenantId,target:He,tokenType:wt,keyId:_.sshKid,requestedClaimsHash:_.requestedClaimsHash},ti=A&&A.accessToken||this.getTokenKeys().accessToken,ai=[];ti.forEach(Za=>{if(this.accessTokenKeyMatchesFilter(Za,dn,!0)){const Ja=this.getAccessTokenCredential(Za);Ja&&this.credentialMatchesFilter(Ja,dn)&&ai.push(Ja)}});const yo=ai.length;return yo<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):yo>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),ai.forEach(Za=>{this.removeAccessToken(rs(Za))}),de&&be&&de.addFields({multiMatchedAT:ai.length},be),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),ai[0])}accessTokenKeyMatchesFilter(p,_,A){const Q=p.toLowerCase();if(_.clientId&&-1===Q.indexOf(_.clientId.toLowerCase())||_.homeAccountId&&-1===Q.indexOf(_.homeAccountId.toLowerCase())||_.realm&&-1===Q.indexOf(_.realm.toLowerCase())||_.requestedClaimsHash&&-1===Q.indexOf(_.requestedClaimsHash.toLowerCase()))return!1;if(_.target){const de=_.target.asArray();for(let be=0;be<de.length;be++){if(A&&!Q.includes(de[be].toLowerCase()))return!1;if(!A&&Q.includes(de[be].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(p){const _=this.getTokenKeys(),A=[];return _.accessToken.forEach(Q=>{if(!this.accessTokenKeyMatchesFilter(Q,p,!0))return;const de=this.getAccessTokenCredential(Q);de&&this.credentialMatchesFilter(de,p)&&A.push(de)}),A}getRefreshToken(p,_,A,Q,de){this.commonLogger.trace("CacheManager - getRefreshToken called");const He={homeAccountId:p.homeAccountId,environment:p.environment,credentialType:tt.REFRESH_TOKEN,clientId:this.clientId,familyId:_?"1":void 0},wt=A&&A.refreshToken||this.getTokenKeys().refreshToken,Dt=[];wt.forEach(ti=>{if(this.refreshTokenKeyMatchesFilter(ti,He)){const ai=this.getRefreshTokenCredential(ti);ai&&this.credentialMatchesFilter(ai,He)&&Dt.push(ai)}});const dn=Dt.length;return dn<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(dn>1&&Q&&de&&Q.addFields({multiMatchedRT:dn},de),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),Dt[0])}refreshTokenKeyMatchesFilter(p,_){const A=p.toLowerCase();return!(_.familyId&&-1===A.indexOf(_.familyId.toLowerCase())||!_.familyId&&_.clientId&&-1===A.indexOf(_.clientId.toLowerCase())||_.homeAccountId&&-1===A.indexOf(_.homeAccountId.toLowerCase()))}readAppMetadataFromCache(p){const A=this.getAppMetadataFilteredBy({environment:p,clientId:this.clientId}),Q=Object.keys(A).map(be=>A[be]),de=Q.length;if(de<1)return null;if(de>1)throw xn(gc);return Q[0]}isAppMetadataFOCI(p){const _=this.readAppMetadataFromCache(p);return!(!_||"1"!==_.familyId)}matchHomeAccountId(p,_){return"string"==typeof p.homeAccountId&&_===p.homeAccountId}matchLocalAccountIdFromTokenClaims(p,_){return _===(p.oid||p.sub)}matchLocalAccountIdFromTenantProfile(p,_){return p.localAccountId===_}matchName(p,_){return _.toLowerCase()===p.name?.toLowerCase()}matchUsername(p,_){return!(!p||"string"!=typeof p||_?.toLowerCase()!==p.toLowerCase())}matchUserAssertionHash(p,_){return!(!p.userAssertionHash||_!==p.userAssertionHash)}matchEnvironment(p,_){if(this.staticAuthorityOptions){const Q=function bs(ve,p){let _;const A=ve.canonicalAuthority;if(A){const Q=new Go(A).getUrlComponents().HostNameAndPort;_=zh(Q,ve.cloudDiscoveryMetadata?.metadata,"config",p)||zh(Q,Zd.metadata,"hardcoded_values",p)||ve.knownAuthorities}return _||[]}(this.staticAuthorityOptions,this.commonLogger);if(Q.includes(_)&&Q.includes(p.environment))return!0}const A=this.getAuthorityMetadataByAlias(_);return!!(A&&A.aliases.indexOf(p.environment)>-1)}matchCredentialType(p,_){return p.credentialType&&_.toLowerCase()===p.credentialType.toLowerCase()}matchClientId(p,_){return!(!p.clientId||_!==p.clientId)}matchFamilyId(p,_){return!(!p.familyId||_!==p.familyId)}matchRealm(p,_){return p.realm?.toLowerCase()===_.toLowerCase()}matchNativeAccountId(p,_){return!(!p.nativeAccountId||_!==p.nativeAccountId)}matchLoginHintFromTokenClaims(p,_){return p.login_hint===_||p.preferred_username===_||p.upn===_}matchSid(p,_){return p.sid===_}matchAuthorityType(p,_){return!(!p.authorityType||_.toLowerCase()!==p.authorityType.toLowerCase())}matchTarget(p,_){return!(p.credentialType!==tt.ACCESS_TOKEN&&p.credentialType!==tt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!p.target)&&Ca.fromString(p.target).containsScopeSet(_)}matchTokenType(p,_){return!(!p.tokenType||p.tokenType!==_)}matchKeyId(p,_){return!(!p.keyId||p.keyId!==_)}isAppMetadata(p){return-1!==p.indexOf(_t)}isAuthorityMetadata(p){return-1!==p.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(p){return`authority-metadata-${this.clientId}-${p}`}static toObject(p,_){for(const A in _)p[A]=_[A];return p}}class $l extends Mr{setAccount(){throw xn(Qe)}getAccount(){throw xn(Qe)}getCachedAccountEntity(){throw xn(Qe)}setIdTokenCredential(){throw xn(Qe)}getIdTokenCredential(){throw xn(Qe)}setAccessTokenCredential(){throw xn(Qe)}getAccessTokenCredential(){throw xn(Qe)}setRefreshTokenCredential(){throw xn(Qe)}getRefreshTokenCredential(){throw xn(Qe)}setAppMetadata(){throw xn(Qe)}getAppMetadata(){throw xn(Qe)}setServerTelemetry(){throw xn(Qe)}getServerTelemetry(){throw xn(Qe)}setAuthorityMetadata(){throw xn(Qe)}getAuthorityMetadata(){throw xn(Qe)}getAuthorityMetadataKeys(){throw xn(Qe)}setThrottlingCache(){throw xn(Qe)}getThrottlingCache(){throw xn(Qe)}removeItem(){throw xn(Qe)}getKeys(){throw xn(Qe)}getAccountKeys(){throw xn(Qe)}getTokenKeys(){throw xn(Qe)}clear(){return z(function*(){throw xn(Qe)})()}updateCredentialCacheKey(){throw xn(Qe)}removeOutdatedAccount(){throw xn(Qe)}}const gd={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Ol={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:C.LogLevel.Info,correlationId:T.EMPTY_STRING},Xp={claimsBasedCachingEnabled:!1},yu={sendGetRequestAsync:()=>z(function*(){throw xn(Qe)})(),sendPostRequestAsync:()=>z(function*(){throw xn(Qe)})()},Vl={sku:T.SKU,version:jc,cpu:T.EMPTY_STRING,os:T.EMPTY_STRING},Xc={clientSecret:T.EMPTY_STRING,clientAssertion:void 0},vu={azureCloudInstance:Tl.None,tenant:`${T.DEFAULT_COMMON_TENANT}`},rc={application:{appName:"",appVersion:""}};function kl(ve){return{clientCapabilities:[],azureCloudOptions:vu,skipAuthorityMetadataCache:!1,instanceAware:!1,...ve}}function Fd(ve){return ve.authOptions.authority.options.protocolMode===Ml.OIDC}class ic extends Ut{constructor(p,_,A,Q,de){super(p,_,A),this.name="ServerError",this.errorNo=Q,this.status=de,Object.setPrototypeOf(this,ic.prototype)}}class Ac{static generateThrottlingStorageKey(p){return`throttling.${JSON.stringify(p)}`}static preProcess(p,_){const A=Ac.generateThrottlingStorageKey(_),Q=p.getThrottlingCache(A);if(Q){if(Q.throttleTime<Date.now())return void p.removeItem(A);throw new ic(Q.errorCodes?.join(" ")||T.EMPTY_STRING,Q.errorMessage,Q.subError)}}static postProcess(p,_,A){if(Ac.checkResponseStatus(A)||Ac.checkResponseForRetryAfter(A)){const Q={throttleTime:Ac.calculateThrottleTime(parseInt(A.headers["Retry-After"])),error:A.body.error,errorCodes:A.body.error_codes,errorMessage:A.body.error_description,subError:A.body.suberror};p.setThrottlingCache(Ac.generateThrottlingStorageKey(_),Q)}}static checkResponseStatus(p){return 429===p.status||p.status>=500&&p.status<600}static checkResponseForRetryAfter(p){return!!p.headers&&p.headers.hasOwnProperty("Retry-After")&&(p.status<200||p.status>=300)}static calculateThrottleTime(p){const _=p<=0?0:p,A=Date.now()/1e3;return Math.floor(1e3*Math.min(A+(_||60),A+3600))}static removeThrottle(p,_,A,Q){const be=this.generateThrottlingStorageKey({clientId:_,authority:A.authority,scopes:A.scopes,homeAccountIdentifier:Q,claims:A.claims,authenticationScheme:A.authenticationScheme,resourceRequestMethod:A.resourceRequestMethod,resourceRequestUri:A.resourceRequestUri,shrClaims:A.shrClaims,sshKid:A.sshKid});p.removeItem(be)}}class oc{constructor(p,_){this.networkClient=p,this.cacheManager=_}sendPostRequest(p,_,A){var Q=this;return z(function*(){let de;Ac.preProcess(Q.cacheManager,p);try{de=yield Q.networkClient.sendPostRequestAsync(_,A)}catch(be){throw be instanceof Ut?be:xn(hr)}return Ac.postProcess(Q.cacheManager,p,de),de})()}}const Ch="client_id",md="response_type",Eh="token_type",nu="req_cnf",Hd="return_spa_code";class no{static validateRedirectUri(p){if(!p)throw La(Ai)}static validatePrompt(p){const _=[];for(const A in J)_.push(J[A]);if(_.indexOf(p)<0)throw La(is)}static validateClaims(p){try{JSON.parse(p)}catch{throw La(ao)}}static validateCodeChallengeParams(p,_){if(!p||!_)throw La(wc);this.validateCodeChallengeMethod(_)}static validateCodeChallengeMethod(p){if([se.PLAIN,se.S256].indexOf(p)<0)throw La($s)}}class Cd{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(md,encodeURIComponent(T.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(md,encodeURIComponent(`${T.TOKEN_RESPONSE_TYPE} ${T.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(p){this.parameters.set("response_mode",encodeURIComponent(p||_e.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(p,_=!0,A=N){_&&!A.includes("openid")&&!p.includes("openid")&&A.push("openid");const Q=_?[...p||[],...A]:p||[],de=new Ca(Q);this.parameters.set("scope",encodeURIComponent(de.printScopes()))}addClientId(p){this.parameters.set(Ch,encodeURIComponent(p))}addRedirectUri(p){no.validateRedirectUri(p),this.parameters.set("redirect_uri",encodeURIComponent(p))}addPostLogoutRedirectUri(p){no.validateRedirectUri(p),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(p))}addIdTokenHint(p){this.parameters.set("id_token_hint",encodeURIComponent(p))}addDomainHint(p){this.parameters.set("domain_hint",encodeURIComponent(p))}addLoginHint(p){this.parameters.set("login_hint",encodeURIComponent(p))}addCcsUpn(p){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`UPN:${p}`))}addCcsOid(p){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`Oid:${p.uid}@${p.utid}`))}addSid(p){this.parameters.set("sid",encodeURIComponent(p))}addClaims(p,_){const A=this.addClientCapabilitiesToClaims(p,_);no.validateClaims(A),this.parameters.set("claims",encodeURIComponent(A))}addCorrelationId(p){this.parameters.set("client-request-id",encodeURIComponent(p))}addLibraryInfo(p){this.parameters.set("x-client-SKU",p.sku),this.parameters.set("x-client-VER",p.version),p.os&&this.parameters.set("x-client-OS",p.os),p.cpu&&this.parameters.set("x-client-CPU",p.cpu)}addApplicationTelemetry(p){p?.appName&&this.parameters.set("x-app-name",p.appName),p?.appVersion&&this.parameters.set("x-app-ver",p.appVersion)}addPrompt(p){no.validatePrompt(p),this.parameters.set("prompt",encodeURIComponent(p))}addState(p){p&&this.parameters.set("state",encodeURIComponent(p))}addNonce(p){this.parameters.set("nonce",encodeURIComponent(p))}addCodeChallengeParams(p,_){if(no.validateCodeChallengeParams(p,_),!p||!_)throw La(wc);this.parameters.set("code_challenge",encodeURIComponent(p)),this.parameters.set("code_challenge_method",encodeURIComponent(_))}addAuthorizationCode(p){this.parameters.set("code",encodeURIComponent(p))}addDeviceCode(p){this.parameters.set("device_code",encodeURIComponent(p))}addRefreshToken(p){this.parameters.set("refresh_token",encodeURIComponent(p))}addCodeVerifier(p){this.parameters.set("code_verifier",encodeURIComponent(p))}addClientSecret(p){this.parameters.set("client_secret",encodeURIComponent(p))}addClientAssertion(p){p&&this.parameters.set("client_assertion",encodeURIComponent(p))}addClientAssertionType(p){p&&this.parameters.set("client_assertion_type",encodeURIComponent(p))}addOboAssertion(p){this.parameters.set("assertion",encodeURIComponent(p))}addRequestTokenUse(p){this.parameters.set("requested_token_use",encodeURIComponent(p))}addGrantType(p){this.parameters.set("grant_type",encodeURIComponent(p))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(p){Object.entries(p).forEach(([_,A])=>{!this.parameters.has(_)&&A&&this.parameters.set(_,A)})}addClientCapabilitiesToClaims(p,_){let A;if(p)try{A=JSON.parse(p)}catch{throw La(ao)}else A={};return _&&_.length>0&&(A.hasOwnProperty("access_token")||(A.access_token={}),A.access_token.xms_cc={values:_}),JSON.stringify(A)}addUsername(p){this.parameters.set("username",encodeURIComponent(p))}addPassword(p){this.parameters.set("password",encodeURIComponent(p))}addPopToken(p){p&&(this.parameters.set(Eh,Ht.POP),this.parameters.set(nu,encodeURIComponent(p)))}addSshJwk(p){p&&(this.parameters.set(Eh,Ht.SSH),this.parameters.set(nu,encodeURIComponent(p)))}addServerTelemetry(p){this.parameters.set("x-client-current-telemetry",p.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",p.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(p){this.parameters.set("logout_hint",encodeURIComponent(p))}createQueryString(){const p=new Array;return this.parameters.forEach((_,A)=>{p.push(`${A}=${_}`)}),p.join("&")}}const It={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},nh=new Map([[It.AcquireTokenByCode,"ATByCode"],[It.AcquireTokenByRefreshToken,"ATByRT"],[It.AcquireTokenSilent,"ATS"],[It.AcquireTokenSilentAsync,"ATSAsync"],[It.AcquireTokenPopup,"ATPopup"],[It.AcquireTokenRedirect,"ATRedirect"],[It.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[It.CryptoOptsSignJwt,"CryptoSignJwt"],[It.SilentCacheClientAcquireToken,"SltCacheClientAT"],[It.SilentIframeClientAcquireToken,"SltIframeClientAT"],[It.SilentRefreshClientAcquireToken,"SltRClientAT"],[It.SsoSilent,"SsoSlt"],[It.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[It.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[It.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[It.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[It.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[It.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[It.BrokerHandhshake,"BrokerHandshake"],[It.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[It.AcquireTokenByBroker,"ATByBroker"],[It.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[It.RefreshTokenClientAcquireToken,"RTClientAT"],[It.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[It.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[It.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[It.AcquireTokenFromCache,"ATFromCache"],[It.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[It.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[It.AcquireTokenBySilentIframe,"ATBySltIframe"],[It.InitializeBaseRequest,"InitBaseReq"],[It.InitializeSilentRequest,"InitSltReq"],[It.InitializeClientApplication,"InitClientApplication"],[It.SilentIframeClientTokenHelper,"SIClientTHelper"],[It.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[It.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[It.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[It.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[It.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[It.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[It.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[It.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[It.GetAuthCodeUrl,"GetAuthCodeUrl"],[It.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[It.HandleCodeResponse,"HandleCodeResp"],[It.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[It.AuthClientAcquireToken,"AuthClientAT"],[It.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[It.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[It.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[It.PopTokenGenerateCnf,"PopTGenCnf"],[It.PopTokenGenerateKid,"PopTGenKid"],[It.HandleServerTokenResponse,"HandleServerTRes"],[It.DeserializeResponse,"DeserializeRes"],[It.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[It.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[It.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[It.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[It.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[It.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[It.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[It.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[It.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[It.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[It.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[It.AcquireTokenByCodeAsync,"ATByCodeAsync"],[It.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[It.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[It.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[It.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[It.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[It.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[It.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[It.NativeGenerateAuthResult,"NtvGenAuthRes"],[It.RemoveHiddenIframe,"RemoveHiddenIframe"],[It.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[It.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[It.GeneratePkceCodes,"GenPkceCodes"],[It.GenerateCodeVerifier,"GenCodeVerifier"],[It.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[It.Sha256Digest,"Sha256Digest"],[It.GetRandomValues,"GetRandomValues"]]),j1=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]),_p=(ve,p,_,A,Q)=>(...de)=>{_.trace(`Executing function ${p}`);const be=A?.startMeasurement(p,Q);if(Q){const He=p+"CallCount";A?.incrementFields({[He]:1},Q)}try{const He=ve(...de);return be?.end({success:!0}),_.trace(`Returning result from ${p}`),He}catch(He){_.trace(`Error occurred in ${p}`);try{_.trace(JSON.stringify(He))}catch{_.trace("Unable to print error message.")}throw be?.end({success:!1},He),He}},Wr=(ve,p,_,A,Q)=>(...de)=>{_.trace(`Executing function ${p}`);const be=A?.startMeasurement(p,Q);if(Q){const He=p+"CallCount";A?.incrementFields({[He]:1},Q)}return A?.setPreQueueTime(p,Q),ve(...de).then(He=>(_.trace(`Returning result from ${p}`),be?.end({success:!0}),He)).catch(He=>{_.trace(`Error occurred in ${p}`);try{_.trace(JSON.stringify(He))}catch{_.trace("Unable to print error message.")}throw be?.end({success:!1},He),He})};let Jg=(()=>{class ve{constructor(_,A,Q,de){this.networkInterface=_,this.logger=A,this.performanceClient=Q,this.correlationId=de}detectRegion(_,A){var Q=this;return z(function*(){Q.performanceClient?.addQueueMeasurement(It.RegionDiscoveryDetectRegion,Q.correlationId);let de=_;if(de)A.region_source="3";else{const be=ve.IMDS_OPTIONS;try{const He=yield Wr(Q.getRegionFromIMDS.bind(Q),It.RegionDiscoveryGetRegionFromIMDS,Q.logger,Q.performanceClient,Q.correlationId)(T.IMDS_VERSION,be);if(200===He.status&&(de=He.body,A.region_source="4"),400===He.status){const wt=yield Wr(Q.getCurrentVersion.bind(Q),It.RegionDiscoveryGetCurrentVersion,Q.logger,Q.performanceClient,Q.correlationId)(be);if(!wt)return A.region_source="1",null;const Dt=yield Wr(Q.getRegionFromIMDS.bind(Q),It.RegionDiscoveryGetRegionFromIMDS,Q.logger,Q.performanceClient,Q.correlationId)(wt,be);200===Dt.status&&(de=Dt.body,A.region_source="4")}}catch{return A.region_source="1",null}}return de||(A.region_source="1"),de||null})()}getRegionFromIMDS(_,A){var Q=this;return z(function*(){return Q.performanceClient?.addQueueMeasurement(It.RegionDiscoveryGetRegionFromIMDS,Q.correlationId),Q.networkInterface.sendGetRequestAsync(`${T.IMDS_ENDPOINT}?api-version=${_}&format=text`,A,T.IMDS_TIMEOUT)})()}getCurrentVersion(_){var A=this;return z(function*(){A.performanceClient?.addQueueMeasurement(It.RegionDiscoveryGetCurrentVersion,A.correlationId);try{const Q=yield A.networkInterface.sendGetRequestAsync(`${T.IMDS_ENDPOINT}?format=json`,_);return 400===Q.status&&Q.body&&Q.body["newest-versions"]&&Q.body["newest-versions"].length>0?Q.body["newest-versions"][0]:null}catch{return null}})()}}return ve.IMDS_OPTIONS={headers:{Metadata:"true"}},ve})();class $c{constructor(p,_,A,Q,de,be,He,wt){this.canonicalAuthority=p,this._canonicalAuthority.validateAsUri(),this.networkInterface=_,this.cacheManager=A,this.authorityOptions=Q,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=de,this.performanceClient=He,this.correlationId=be,this.managedIdentity=wt||!1,this.regionDiscovery=new Jg(_,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(p){if(p.HostNameAndPort.endsWith(T.CIAM_AUTH_URL))return 3;const _=p.PathSegments;if(_.length)switch(_[0].toLowerCase()){case T.ADFS:return 1;case T.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(p){this._canonicalAuthority=new Go(p),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw xn(Dr)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw xn(Dr)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw xn(Dr)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw xn(ns);return this.replacePath(this.metadata.end_session_endpoint)}throw xn(Dr)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw xn(Dr)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw xn(Dr)}canReplaceTenant(p){return 1===p.PathSegments.length&&!$c.reservedTenantDomains.has(p.PathSegments[0])&&0===this.getAuthorityType(p)&&this.protocolMode===Ml.AAD}replaceTenant(p){return p.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(p){let _=p;const Q=new Go(this.metadata.canonical_authority).getUrlComponents(),de=Q.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((He,wt)=>{let Dt=de[wt];if(0===wt&&this.canReplaceTenant(Q)){const dn=new Go(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];Dt!==dn&&(this.logger.verbose(`Replacing tenant domain name ${Dt} with id ${dn}`),Dt=dn)}He!==Dt&&(_=_.replace(`/${Dt}/`,`/${He}/`))}),this.replaceTenant(_)}get defaultOpenIdConfigurationEndpoint(){const p=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode!==Ml.AAD&&!this.isAliasOfKnownMicrosoftAuthority(p)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var p=this;return z(function*(){p.performanceClient?.addQueueMeasurement(It.AuthorityResolveEndpointsAsync,p.correlationId);const _=p.getCurrentMetadataEntity(),A=yield Wr(p.updateCloudDiscoveryMetadata.bind(p),It.AuthorityUpdateCloudDiscoveryMetadata,p.logger,p.performanceClient,p.correlationId)(_);p.canonicalAuthority=p.canonicalAuthority.replace(p.hostnameAndPort,_.preferred_network);const Q=yield Wr(p.updateEndpointMetadata.bind(p),It.AuthorityUpdateEndpointMetadata,p.logger,p.performanceClient,p.correlationId)(_);p.updateCachedMetadata(_,A,{source:Q}),p.performanceClient?.addFields({cloudDiscoverySource:A,authorityEndpointSource:Q},p.correlationId)})()}getCurrentMetadataEntity(){let p=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return p||(p={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:vn(),jwks_uri:""}),p}updateCachedMetadata(p,_,A){"cache"!==_&&"cache"!==A?.source&&(p.expiresAt=vn(),p.canonical_authority=this.canonicalAuthority);const Q=this.cacheManager.generateAuthorityMetadataCacheKey(p.preferred_cache);this.cacheManager.setAuthorityMetadata(Q,p),this.metadata=p}updateEndpointMetadata(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.AuthorityUpdateEndpointMetadata,_.correlationId);const A=_.updateEndpointMetadataFromLocalSources(p);if(A){if("hardcoded_values"===A.source&&_.authorityOptions.azureRegionConfiguration?.azureRegion&&A.metadata){const de=yield Wr(_.updateMetadataWithRegionalInformation.bind(_),It.AuthorityUpdateMetadataWithRegionalInformation,_.logger,_.performanceClient,_.correlationId)(A.metadata);Jn(p,de,!1),p.canonical_authority=_.canonicalAuthority}return A.source}let Q=yield Wr(_.getEndpointMetadataFromNetwork.bind(_),It.AuthorityGetEndpointMetadataFromNetwork,_.logger,_.performanceClient,_.correlationId)();if(Q)return _.authorityOptions.azureRegionConfiguration?.azureRegion&&(Q=yield Wr(_.updateMetadataWithRegionalInformation.bind(_),It.AuthorityUpdateMetadataWithRegionalInformation,_.logger,_.performanceClient,_.correlationId)(Q)),Jn(p,Q,!0),"network";throw xn(ei,_.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(p){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const _=this.getEndpointMetadataFromConfig();if(_)return this.logger.verbose("Found endpoint metadata in authority configuration"),Jn(p,_,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const Q=this.getEndpointMetadataFromHardcodedValues();if(Q)return Jn(p,Q,!1),{source:"hardcoded_values",metadata:Q};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const A=pr(p);return this.isAuthoritySameType(p)&&p.endpointsFromNetwork&&!A?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(A&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(p){return new Go(p.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw La(Ma)}return null}getEndpointMetadataFromNetwork(){var p=this;return z(function*(){p.performanceClient?.addQueueMeasurement(It.AuthorityGetEndpointMetadataFromNetwork,p.correlationId);const _={},A=p.defaultOpenIdConfigurationEndpoint;p.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${A}`);try{const Q=yield p.networkInterface.sendGetRequestAsync(A,_);return function dg(ve){return ve.hasOwnProperty("authorization_endpoint")&&ve.hasOwnProperty("token_endpoint")&&ve.hasOwnProperty("issuer")&&ve.hasOwnProperty("jwks_uri")}(Q.body)?Q.body:(p.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(Q){return p.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${Q}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in fp?fp[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.AuthorityUpdateMetadataWithRegionalInformation,_.correlationId);const A=_.authorityOptions.azureRegionConfiguration?.azureRegion;if(A){if(A!==T.AZURE_REGION_AUTO_DISCOVER_FLAG)return _.regionDiscoveryMetadata.region_outcome="2",_.regionDiscoveryMetadata.region_used=A,$c.replaceWithRegionalInformation(p,A);const Q=yield Wr(_.regionDiscovery.detectRegion.bind(_.regionDiscovery),It.RegionDiscoveryDetectRegion,_.logger,_.performanceClient,_.correlationId)(_.authorityOptions.azureRegionConfiguration?.environmentRegion,_.regionDiscoveryMetadata);if(Q)return _.regionDiscoveryMetadata.region_outcome="4",_.regionDiscoveryMetadata.region_used=Q,$c.replaceWithRegionalInformation(p,Q);_.regionDiscoveryMetadata.region_outcome="5"}return p})()}updateCloudDiscoveryMetadata(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.AuthorityUpdateCloudDiscoveryMetadata,_.correlationId);const A=_.updateCloudDiscoveryMetadataFromLocalSources(p);if(A)return A;const Q=yield Wr(_.getCloudDiscoveryMetadataFromNetwork.bind(_),It.AuthorityGetCloudDiscoveryMetadataFromNetwork,_.logger,_.performanceClient,_.correlationId)();if(Q)return mr(p,Q,!0),"network";throw La(Wc)})()}updateCloudDiscoveryMetadataFromLocalSources(p){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||T.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||T.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${p.canonical_authority||T.NOT_APPLICABLE}`);const _=this.getCloudDiscoveryMetadataFromConfig();if(_)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),mr(p,_,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const Q=function _u(ve){return Qa(Zd.metadata,ve)}(this.hostnameAndPort);if(Q)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),mr(p,Q,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const A=pr(p);return this.isAuthoritySameType(p)&&p.aliasesFromNetwork&&!A?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(A&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),$c.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const _=Qa(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),_)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),_;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),La(oi)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),$c.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var p=this;return z(function*(){p.performanceClient?.addQueueMeasurement(It.AuthorityGetCloudDiscoveryMetadataFromNetwork,p.correlationId);const _=`${T.AAD_INSTANCE_DISCOVERY_ENDPT}${p.canonicalAuthority}oauth2/v2.0/authorize`,A={};let Q=null;try{const de=yield p.networkInterface.sendGetRequestAsync(_,A);let be,He;if(function Ud(ve){return ve.hasOwnProperty("tenant_discovery_endpoint")&&ve.hasOwnProperty("metadata")}(de.body))be=de.body,He=be.metadata,p.logger.verbosePii(`tenant_discovery_endpoint is: ${be.tenant_discovery_endpoint}`);else{if(!function nf(ve){return ve.hasOwnProperty("error")&&ve.hasOwnProperty("error_description")}(de.body))return p.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(p.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${de.status}`),be=de.body,be.error===T.INVALID_INSTANCE)return p.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;p.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${be.error}`),p.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${be.error_description}`),p.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),He=[]}p.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),Q=Qa(He,p.hostnameAndPort)}catch(de){return p.logger.error(de instanceof Ut?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${de.errorCode}\nError Description: ${de.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${de.name}\nError Description: ${de.message}`),null}return Q||(p.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),p.logger.verbose("Creating custom Authority for custom domain scenario."),Q=$c.createCloudDiscoveryMetadataFromHost(p.hostnameAndPort)),Q})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(_=>_&&Go.getDomainFromUrl(_).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(p,_){let A;return _&&_.azureCloudInstance!==Tl.None&&(A=`${_.azureCloudInstance}/${_.tenant?_.tenant:T.DEFAULT_COMMON_TENANT}/`),A||p}static createCloudDiscoveryMetadataFromHost(p){return{preferred_network:p,preferred_cache:p,aliases:[p]}}getPreferredCache(){if(this.managedIdentity)return T.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw xn(Dr)}isAlias(p){return this.metadata.aliases.indexOf(p)>-1}isAliasOfKnownMicrosoftAuthority(p){return fd.has(p)}static isPublicCloudAuthority(p){return T.KNOWN_PUBLIC_CLOUDS.indexOf(p)>=0}static buildRegionalAuthorityString(p,_,A){const Q=new Go(p);Q.validateAsUri();const de=Q.getUrlComponents();let be=`${_}.${de.HostNameAndPort}`;this.isPublicCloudAuthority(de.HostNameAndPort)&&(be=`${_}.${T.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const He=Go.constructAuthorityUriFromObject({...Q.getUrlComponents(),HostNameAndPort:be}).urlString;return A?`${He}?${A}`:He}static replaceWithRegionalInformation(p,_){const A={...p};return A.authorization_endpoint=$c.buildRegionalAuthorityString(A.authorization_endpoint,_),A.token_endpoint=$c.buildRegionalAuthorityString(A.token_endpoint,_),A.end_session_endpoint&&(A.end_session_endpoint=$c.buildRegionalAuthorityString(A.end_session_endpoint,_)),A}static transformCIAMAuthority(p){let _=p;const Q=new Go(p).getUrlComponents();return 0===Q.PathSegments.length&&Q.HostNameAndPort.endsWith(T.CIAM_AUTH_URL)&&(_=`${_}${Q.HostNameAndPort.split(".")[0]}${T.AAD_TENANT_DOMAIN_SUFFIX}`),_}}function pl(ve){return ve.endsWith(T.FORWARD_SLASH)?ve:`${ve}${T.FORWARD_SLASH}`}function hg(ve){const p=ve.cloudDiscoveryMetadata;let _;if(p)try{_=JSON.parse(p)}catch{throw La(oi)}return{canonicalAuthority:ve.authority?pl(ve.authority):void 0,knownAuthorities:ve.knownAuthorities,cloudDiscoveryMetadata:_}}function bd(ve,p,_,A,Q,de,be){return Gh.apply(this,arguments)}function Gh(){return Gh=z(function*(ve,p,_,A,Q,de,be){be?.addQueueMeasurement(It.AuthorityFactoryCreateDiscoveredInstance,de);const He=$c.transformCIAMAuthority(pl(ve)),wt=new $c(He,p,_,A,Q,de,be);try{return yield Wr(wt.resolveEndpointsAsync.bind(wt),It.AuthorityResolveEndpointsAsync,Q,be,de)(),wt}catch{throw xn(Dr)}}),Gh.apply(this,arguments)}$c.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);class rf{constructor(p,_){this.config=function Gl({authOptions:ve,systemOptions:p,loggerOptions:_,cacheOptions:A,storageInterface:Q,networkInterface:de,cryptoInterface:be,clientCredentials:He,libraryInfo:wt,telemetry:Dt,serverTelemetryManager:dn,persistencePlugin:ti,serializableCache:ai}){const yo={...Ol,..._};return{authOptions:kl(ve),systemOptions:{...gd,...p},loggerOptions:yo,cacheOptions:{...Xp,...A},storageInterface:Q||new $l(ve.clientId,ia,new oa(yo)),networkInterface:de||yu,cryptoInterface:be||ia,clientCredentials:He||Xc,libraryInfo:{...Vl,...wt},telemetry:{...rc,...Dt},serverTelemetryManager:dn||null,persistencePlugin:ti||null,serializableCache:ai||null}}(p),this.logger=new oa(this.config.loggerOptions,ys,jc),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new oc(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=_}createTokenRequestHeaders(p){const _={};if(_["Content-Type"]=T.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&p)switch(p.type){case"home_account_id":try{const A=Fu(p.credential);_["X-AnchorMailbox"]=`Oid:${A.uid}@${A.utid}`}catch(A){this.logger.verbose("Could not parse home account ID for CCS Header: "+A)}break;case"UPN":_["X-AnchorMailbox"]=`UPN: ${p.credential}`}return _}executePostToTokenEndpoint(p,_,A,Q,de,be){var He=this;return z(function*(){be&&He.performanceClient?.addQueueMeasurement(be,de);const wt=yield He.networkManager.sendPostRequest(Q,p,{body:_,headers:A});return He.performanceClient?.addFields({refreshTokenSize:wt.body.refresh_token?.length||0,httpVerToken:wt.headers?.["x-ms-httpver"]||""},de),He.config.serverTelemetryManager&&wt.status<500&&429!==wt.status&&He.config.serverTelemetryManager.clearTelemetryCache(),wt})()}updateAuthority(p,_){var A=this;return z(function*(){A.performanceClient?.addQueueMeasurement(It.UpdateTokenEndpointAuthority,_);const Q=`https://${p}/${A.authority.tenant}/`,de=yield bd(Q,A.networkClient,A.cacheManager,A.authority.options,A.logger,_,A.performanceClient);A.authority=de})()}createTokenQueryParameters(p){const _=new Cd;return p.tokenQueryParameters&&_.addExtraQueryParameters(p.tokenQueryParameters),_.createQueryString()}}const go="no_tokens_found",Oa="native_account_unavailable",Ed="refresh_token_expired",em="interaction_required",yp="consent_required",tm="login_required",Sh="bad_token";var pg=Object.freeze({__proto__:null,badToken:Sh,consentRequired:yp,interactionRequired:em,loginRequired:tm,nativeAccountUnavailable:Oa,noTokensFound:go,refreshTokenExpired:Ed});const _a=[em,yp,tm,Sh],nm=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Bd={[go]:"No refresh token found in the cache. Please sign-in.",[Oa]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Ed]:"Refresh token has expired.",[Sh]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},Zc={noTokensFoundError:{code:go,desc:Bd[go]},native_account_unavailable:{code:Oa,desc:Bd[Oa]},bad_token:{code:Sh,desc:Bd[Sh]}};class Ll extends Ut{constructor(p,_,A,Q,de,be,He,wt){super(p,_,A),Object.setPrototypeOf(this,Ll.prototype),this.timestamp=Q||T.EMPTY_STRING,this.traceId=de||T.EMPTY_STRING,this.correlationId=be||T.EMPTY_STRING,this.claims=He||T.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=wt}}function sy(ve,p,_){const A=!!ve&&_a.indexOf(ve)>-1,Q=!!_&&nm.indexOf(_)>-1,de=!!p&&_a.some(be=>p.indexOf(be)>-1);return A||de||Q}function ed(ve){return new Ll(ve,Bd[ve])}class xc{static setRequestState(p,_,A){const Q=xc.generateLibraryState(p,A);return _?`${Q}${T.RESOURCE_DELIM}${_}`:Q}static generateLibraryState(p,_){if(!p)throw xn(ua);const A={id:p.createNewGuid()};_&&(A.meta=_);const Q=JSON.stringify(A);return p.base64Encode(Q)}static parseRequestState(p,_){if(!p)throw xn(ua);if(!_)throw xn(Hi);try{const A=_.split(T.RESOURCE_DELIM),Q=A[0],de=A.length>1?A.slice(1).join(T.RESOURCE_DELIM):T.EMPTY_STRING,be=p.base64Decode(Q),He=JSON.parse(be);return{userRequestState:de||T.EMPTY_STRING,libraryState:He}}catch{throw xn(Hi)}}}class ie{constructor(p,_){this.cryptoUtils=p,this.performanceClient=_}generateCnf(p,_){var A=this;return z(function*(){A.performanceClient?.addQueueMeasurement(It.PopTokenGenerateCnf,p.correlationId);const Q=yield Wr(A.generateKid.bind(A),It.PopTokenGenerateCnf,_,A.performanceClient,p.correlationId)(p),de=A.cryptoUtils.base64UrlEncode(JSON.stringify(Q));return{kid:Q.kid,reqCnfString:de}})()}generateKid(p){var _=this;return z(function*(){return _.performanceClient?.addQueueMeasurement(It.PopTokenGenerateKid,p.correlationId),{kid:yield _.cryptoUtils.getPublicKeyThumbprint(p),xms_ksl:"sw"}})()}signPopToken(p,_,A){var Q=this;return z(function*(){return Q.signPayload(p,_,A)})()}signPayload(p,_,A,Q){var de=this;return z(function*(){const{resourceRequestMethod:be,resourceRequestUri:He,shrClaims:wt,shrNonce:Dt,shrOptions:dn}=A,ai=(He?new Go(He):void 0)?.getUrlComponents();return de.cryptoUtils.signJwt({at:p,ts:vs(),m:be?.toUpperCase(),u:ai?.HostNameAndPort,nonce:Dt||de.cryptoUtils.createNewGuid(),p:ai?.AbsolutePath,q:ai?.QueryString?[[],ai.QueryString]:void 0,client_claims:wt||void 0,...Q},_,dn,A.correlationId)})()}}class Fe{constructor(p,_){this.cache=p,this.hasChanged=_}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Te{constructor(p,_,A,Q,de,be,He){this.clientId=p,this.cacheStorage=_,this.cryptoObj=A,this.logger=Q,this.serializableCache=de,this.persistencePlugin=be,this.performanceClient=He}validateServerAuthorizationCodeResponse(p,_){if(!p.state||!_)throw xn(fo,p.state?"Cached State":"Server State");let A,Q;try{A=decodeURIComponent(p.state)}catch{throw xn(Hi,p.state)}try{Q=decodeURIComponent(_)}catch{throw xn(Hi,p.state)}if(A!==Q)throw xn(No);if(p.error||p.error_description||p.suberror){const de=function pe(ve){const _=ve.error_uri?.lastIndexOf("code=");return _&&_>=0?ve.error_uri?.substring(_+5):void 0}(p);throw sy(p.error,p.error_description,p.suberror)?new Ll(p.error||"",p.error_description,p.suberror,p.timestamp||"",p.trace_id||"",p.correlation_id||"",p.claims||"",de):new ic(p.error||"",p.error_description,p.suberror,de)}}validateTokenResponse(p,_){if(p.error||p.error_description||p.suberror){const A=`Error(s): ${p.error_codes||T.NOT_AVAILABLE} - Timestamp: ${p.timestamp||T.NOT_AVAILABLE} - Description: ${p.error_description||T.NOT_AVAILABLE} - Correlation ID: ${p.correlation_id||T.NOT_AVAILABLE} - Trace ID: ${p.trace_id||T.NOT_AVAILABLE}`,Q=p.error_codes?.length?p.error_codes[0]:void 0,de=new ic(p.error,A,p.suberror,Q,p.status);if(_&&p.status&&p.status>=500&&p.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${de}`);if(_&&p.status&&p.status>=400&&p.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${de}`);throw sy(p.error,p.error_description,p.suberror)?new Ll(p.error,p.error_description,p.suberror,p.timestamp||T.EMPTY_STRING,p.trace_id||T.EMPTY_STRING,p.correlation_id||T.EMPTY_STRING,p.claims||T.EMPTY_STRING,Q):de}}handleServerTokenResponse(p,_,A,Q,de,be,He,wt,Dt){var dn=this;return z(function*(){let ti,ai;if(dn.performanceClient?.addQueueMeasurement(It.HandleServerTokenResponse,p.correlation_id),p.id_token){if(ti=qs(p.id_token||T.EMPTY_STRING,dn.cryptoObj.base64Decode),de&&de.nonce&&ti.nonce!==de.nonce)throw xn(jr);if(Q.maxAge||0===Q.maxAge){const Ja=ti.auth_time;if(!Ja)throw xn(Do);eu(Ja,Q.maxAge)}}dn.homeAccountIdentifier=nc.generateHomeAccountId(p.client_info||T.EMPTY_STRING,_.authorityType,dn.logger,dn.cryptoObj,ti),de&&de.state&&(ai=xc.parseRequestState(dn.cryptoObj,de.state)),p.key_id=p.key_id||Q.sshKid||void 0;const yo=dn.generateCacheRecord(p,_,A,Q,ti,be,de);let Za;try{if(dn.persistencePlugin&&dn.serializableCache&&(dn.logger.verbose("Persistence enabled, calling beforeCacheAccess"),Za=new Fe(dn.serializableCache,!0),yield dn.persistencePlugin.beforeCacheAccess(Za)),He&&!wt&&yo.account){const Ja=yo.account.generateAccountKey();if(!dn.cacheStorage.getAccount(Ja,dn.logger))return dn.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield Te.generateAuthenticationResult(dn.cryptoObj,_,yo,!1,Q,ti,ai,void 0,Dt)}yield dn.cacheStorage.saveCacheRecord(yo,Q.storeInCache,Q.correlationId)}finally{dn.persistencePlugin&&dn.serializableCache&&Za&&(dn.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield dn.persistencePlugin.afterCacheAccess(Za))}return Te.generateAuthenticationResult(dn.cryptoObj,_,yo,!1,Q,ti,ai,p,Dt)})()}generateCacheRecord(p,_,A,Q,de,be,He){const wt=_.getPreferredCache();if(!wt)throw xn(ca);const Dt=Ju(de);let dn,ti;p.id_token&&de&&(dn=ks(this.homeAccountIdentifier,wt,p.id_token,this.clientId,Dt||""),ti=ot(this.cacheStorage,_,this.homeAccountIdentifier,this.cryptoObj.base64Decode,de,p.client_info,wt,Dt,He,void 0,this.logger));let ai=null;if(p.access_token){const Ja=p.scope?Ca.fromString(p.scope):new Ca(Q.scopes||[]),zu=("string"==typeof p.expires_in?parseInt(p.expires_in,10):p.expires_in)||0,Dc=("string"==typeof p.ext_expires_in?parseInt(p.ext_expires_in,10):p.ext_expires_in)||0,Yh=("string"==typeof p.refresh_in?parseInt(p.refresh_in,10):p.refresh_in)||void 0,yc=A+zu,vy=yc+Dc,qv=Yh&&Yh>0?A+Yh:void 0;ai=Ia(this.homeAccountIdentifier,wt,p.access_token,this.clientId,Dt||_.tenant||"",Ja.printScopes(),yc,vy,this.cryptoObj.base64Decode,qv,p.token_type,be,p.key_id,Q.claims,Q.requestedClaimsHash)}let yo=null;if(p.refresh_token){let Ja;p.refresh_token_expires_in&&(Ja=A+("string"==typeof p.refresh_token_expires_in?parseInt(p.refresh_token_expires_in,10):p.refresh_token_expires_in)),yo=Al(this.homeAccountIdentifier,wt,p.refresh_token,this.clientId,p.foci,be,Ja)}let Za=null;return p.foci&&(Za={clientId:this.clientId,environment:wt,familyId:p.foci}),{account:ti,idToken:dn,accessToken:ai,refreshToken:yo,appMetadata:Za}}static generateAuthenticationResult(p,_,A,Q,de,be,He,wt,Dt){return z(function*(){let yo,Za,dn=T.EMPTY_STRING,ti=[],ai=null,Ja=T.EMPTY_STRING;if(A.accessToken){if(A.accessToken.tokenType!==Ht.POP||de.popKid)dn=A.accessToken.secret;else{const yc=new ie(p),{secret:vy,keyId:qv}=A.accessToken;if(!qv)throw xn(ba);dn=yield yc.signPopToken(vy,qv,de)}ti=Ca.fromString(A.accessToken.target).asArray(),ai=new Date(1e3*Number(A.accessToken.expiresOn)),yo=new Date(1e3*Number(A.accessToken.extendedExpiresOn)),A.accessToken.refreshOn&&(Za=new Date(1e3*Number(A.accessToken.refreshOn)))}A.appMetadata&&(Ja="1"===A.appMetadata.familyId?"1":"");const zu=be?.oid||be?.sub||"",Dc=be?.tid||"";wt?.spa_accountid&&A.account&&(A.account.nativeAccountId=wt?.spa_accountid);const Yh=A.account?Uu(A.account.getAccountInfo(),void 0,be,A.idToken?.secret):null;return{authority:_.canonicalAuthority,uniqueId:zu,tenantId:Dc,scopes:ti,account:Yh,idToken:A?.idToken?.secret||"",idTokenClaims:be||{},accessToken:dn,fromCache:Q,expiresOn:ai,extExpiresOn:yo,refreshOn:Za,correlationId:de.correlationId,requestId:Dt||T.EMPTY_STRING,familyId:Ja,tokenType:A.accessToken?.tokenType||T.EMPTY_STRING,state:He?He.userRequestState:T.EMPTY_STRING,cloudGraphHostName:A.account?.cloudGraphHostName||T.EMPTY_STRING,msGraphHost:A.account?.msGraphHost||T.EMPTY_STRING,code:wt?.spa_code,fromNativeBroker:!1}})()}}function ot(ve,p,_,A,Q,de,be,He,wt,Dt,dn){dn?.verbose("setCachedAccount called");const ai=ve.getAccountKeys().find(Dc=>Dc.startsWith(_));let yo=null;ai&&(yo=ve.getAccount(ai,dn));const Za=yo||nc.createAccount({homeAccountId:_,idTokenClaims:Q,clientInfo:de,environment:be,cloudGraphHostName:wt?.cloud_graph_host_name,msGraphHost:wt?.msgraph_host,nativeAccountId:Dt},p,A),Ja=Za.tenantProfiles||[],zu=He||Za.realm;if(zu&&!Ja.find(Dc=>Dc.tenantId===zu)){const Dc=Zu(_,Za.localAccountId,zu,Q);Ja.push(Dc)}return Za.tenantProfiles=Ja,Za}function gn(ve,p,_){return qn.apply(this,arguments)}function qn(){return qn=z(function*(ve,p,_){return"string"==typeof ve?ve:ve({clientId:p,tokenEndpoint:_})}),qn.apply(this,arguments)}class zr extends rf{constructor(p,_){super(p,_),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.GetAuthCodeUrl,p.correlationId);const A=yield Wr(_.createAuthCodeUrlQueryString.bind(_),It.AuthClientCreateQueryString,_.logger,_.performanceClient,p.correlationId)(p);return Go.appendQueryString(_.authority.authorizationEndpoint,A)})()}acquireToken(p,_){var A=this;return z(function*(){if(A.performanceClient?.addQueueMeasurement(It.AuthClientAcquireToken,p.correlationId),!p.code)throw xn(Vs);const Q=vs(),de=yield Wr(A.executeTokenRequest.bind(A),It.AuthClientExecuteTokenRequest,A.logger,A.performanceClient,p.correlationId)(A.authority,p),be=de.headers?.["x-ms-request-id"],He=new Te(A.config.authOptions.clientId,A.cacheManager,A.cryptoUtils,A.logger,A.config.serializableCache,A.config.persistencePlugin,A.performanceClient);return He.validateTokenResponse(de.body),Wr(He.handleServerTokenResponse.bind(He),It.HandleServerTokenResponse,A.logger,A.performanceClient,p.correlationId)(de.body,A.authority,Q,p,_,void 0,void 0,void 0,be)})()}handleFragmentResponse(p,_){if(new Te(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(p,_),!p.code)throw xn(Ns);return p}getLogoutUri(p){if(!p)throw La(la);const _=this.createLogoutUrlQueryString(p);return Go.appendQueryString(this.authority.endSessionEndpoint,_)}executeTokenRequest(p,_){var A=this;return z(function*(){A.performanceClient?.addQueueMeasurement(It.AuthClientExecuteTokenRequest,_.correlationId);const Q=A.createTokenQueryParameters(_),de=Go.appendQueryString(p.tokenEndpoint,Q),be=yield Wr(A.createTokenRequestBody.bind(A),It.AuthClientCreateTokenRequestBody,A.logger,A.performanceClient,_.correlationId)(_);let He;if(_.clientInfo)try{const dn=Ld(_.clientInfo,A.cryptoUtils.base64Decode);He={credential:`${dn.uid}${Le.CLIENT_INFO_SEPARATOR}${dn.utid}`,type:"home_account_id"}}catch(dn){A.logger.verbose("Could not parse client info for CCS Header: "+dn)}const wt=A.createTokenRequestHeaders(He||_.ccsCredential),Dt={clientId:_.tokenBodyParameters?.clientId||A.config.authOptions.clientId,authority:p.canonicalAuthority,scopes:_.scopes,claims:_.claims,authenticationScheme:_.authenticationScheme,resourceRequestMethod:_.resourceRequestMethod,resourceRequestUri:_.resourceRequestUri,shrClaims:_.shrClaims,sshKid:_.sshKid};return Wr(A.executePostToTokenEndpoint.bind(A),It.AuthorizationCodeClientExecutePostToTokenEndpoint,A.logger,A.performanceClient,_.correlationId)(de,be,wt,Dt,_.correlationId,It.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.AuthClientCreateTokenRequestBody,p.correlationId);const A=new Cd;if(A.addClientId(p.tokenBodyParameters?.[Ch]||_.config.authOptions.clientId),_.includeRedirectUri?A.addRedirectUri(p.redirectUri):no.validateRedirectUri(p.redirectUri),A.addScopes(p.scopes,!0,_.oidcDefaultScopes),A.addAuthorizationCode(p.code),A.addLibraryInfo(_.config.libraryInfo),A.addApplicationTelemetry(_.config.telemetry.application),A.addThrottling(),_.serverTelemetryManager&&!Fd(_.config)&&A.addServerTelemetry(_.serverTelemetryManager),p.codeVerifier&&A.addCodeVerifier(p.codeVerifier),_.config.clientCredentials.clientSecret&&A.addClientSecret(_.config.clientCredentials.clientSecret),_.config.clientCredentials.clientAssertion){const be=_.config.clientCredentials.clientAssertion;A.addClientAssertion(yield gn(be.assertion,_.config.authOptions.clientId,p.resourceRequestUri)),A.addClientAssertionType(be.assertionType)}if(A.addGrantType("authorization_code"),A.addClientInfo(),p.authenticationScheme===Ht.POP){const be=new ie(_.cryptoUtils,_.performanceClient);let He;He=p.popKid?_.cryptoUtils.encodeKid(p.popKid):(yield Wr(be.generateCnf.bind(be),It.PopTokenGenerateCnf,_.logger,_.performanceClient,p.correlationId)(p,_.logger)).reqCnfString,A.addPopToken(He)}else if(p.authenticationScheme===Ht.SSH){if(!p.sshJwk)throw La(ls);A.addSshJwk(p.sshJwk)}const Q=p.correlationId||_.config.cryptoInterface.createNewGuid();let de;if(A.addCorrelationId(Q),(!_c.isEmptyObj(p.claims)||_.config.authOptions.clientCapabilities&&_.config.authOptions.clientCapabilities.length>0)&&A.addClaims(p.claims,_.config.authOptions.clientCapabilities),p.clientInfo)try{const be=Ld(p.clientInfo,_.cryptoUtils.base64Decode);de={credential:`${be.uid}${Le.CLIENT_INFO_SEPARATOR}${be.utid}`,type:"home_account_id"}}catch(be){_.logger.verbose("Could not parse client info for CCS Header: "+be)}else de=p.ccsCredential;if(_.config.systemOptions.preventCorsPreflight&&de)switch(de.type){case"home_account_id":try{const be=Fu(de.credential);A.addCcsOid(be)}catch(be){_.logger.verbose("Could not parse home account ID for CCS Header: "+be)}break;case"UPN":A.addCcsUpn(de.credential)}return p.tokenBodyParameters&&A.addExtraQueryParameters(p.tokenBodyParameters),p.enableSpaAuthorizationCode&&(!p.tokenBodyParameters||!p.tokenBodyParameters[Hd])&&A.addExtraQueryParameters({[Hd]:"1"}),A.createQueryString()})()}createAuthCodeUrlQueryString(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.AuthClientCreateQueryString,p.correlationId);const A=new Cd;A.addClientId(p.extraQueryParameters?.[Ch]||_.config.authOptions.clientId);const Q=[...p.scopes||[],...p.extraScopesToConsent||[]];A.addScopes(Q,!0,_.oidcDefaultScopes),A.addRedirectUri(p.redirectUri);const de=p.correlationId||_.config.cryptoInterface.createNewGuid();if(A.addCorrelationId(de),A.addResponseMode(p.responseMode),A.addResponseTypeCode(),A.addLibraryInfo(_.config.libraryInfo),Fd(_.config)||A.addApplicationTelemetry(_.config.telemetry.application),A.addClientInfo(),p.codeChallenge&&p.codeChallengeMethod&&A.addCodeChallengeParams(p.codeChallenge,p.codeChallengeMethod),p.prompt&&A.addPrompt(p.prompt),p.domainHint&&A.addDomainHint(p.domainHint),p.prompt!==J.SELECT_ACCOUNT)if(p.sid&&p.prompt===J.NONE)_.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),A.addSid(p.sid);else if(p.account){const be=_.extractAccountSid(p.account);let He=_.extractLoginHint(p.account);if(He&&p.domainHint&&(_.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),He=null),He){_.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),A.addLoginHint(He);try{const wt=Fu(p.account.homeAccountId);A.addCcsOid(wt)}catch{_.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(be&&p.prompt===J.NONE){_.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),A.addSid(be);try{const wt=Fu(p.account.homeAccountId);A.addCcsOid(wt)}catch{_.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(p.loginHint)_.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),A.addLoginHint(p.loginHint),A.addCcsUpn(p.loginHint);else if(p.account.username){_.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),A.addLoginHint(p.account.username);try{const wt=Fu(p.account.homeAccountId);A.addCcsOid(wt)}catch{_.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else p.loginHint&&(_.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),A.addLoginHint(p.loginHint),A.addCcsUpn(p.loginHint));else _.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(p.nonce&&A.addNonce(p.nonce),p.state&&A.addState(p.state),(p.claims||_.config.authOptions.clientCapabilities&&_.config.authOptions.clientCapabilities.length>0)&&A.addClaims(p.claims,_.config.authOptions.clientCapabilities),_.addExtraQueryParams(p,A),p.nativeBroker&&(A.addNativeBroker(),p.authenticationScheme===Ht.POP)){const be=new ie(_.cryptoUtils);let He;He=p.popKid?_.cryptoUtils.encodeKid(p.popKid):(yield Wr(be.generateCnf.bind(be),It.PopTokenGenerateCnf,_.logger,_.performanceClient,p.correlationId)(p,_.logger)).reqCnfString,A.addPopToken(He)}return A.createQueryString()})()}createLogoutUrlQueryString(p){const _=new Cd;return p.postLogoutRedirectUri&&_.addPostLogoutRedirectUri(p.postLogoutRedirectUri),p.correlationId&&_.addCorrelationId(p.correlationId),p.idTokenHint&&_.addIdTokenHint(p.idTokenHint),p.state&&_.addState(p.state),p.logoutHint&&_.addLogoutHint(p.logoutHint),this.addExtraQueryParams(p,_),_.createQueryString()}addExtraQueryParams(p,_){!(p.extraQueryParameters&&p.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(p.extraQueryParameters=p.extraQueryParameters||{},p.extraQueryParameters.instance_aware="true"),p.extraQueryParameters&&_.addExtraQueryParameters(p.extraQueryParameters)}extractAccountSid(p){return p.idTokenClaims?.sid||null}extractLoginHint(p){return p.idTokenClaims?.login_hint||null}}class $o extends rf{constructor(p,_){super(p,_)}acquireToken(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.RefreshTokenClientAcquireToken,p.correlationId);const A=vs(),Q=yield Wr(_.executeTokenRequest.bind(_),It.RefreshTokenClientExecuteTokenRequest,_.logger,_.performanceClient,p.correlationId)(p,_.authority),de=Q.headers?.["x-ms-request-id"],be=new Te(_.config.authOptions.clientId,_.cacheManager,_.cryptoUtils,_.logger,_.config.serializableCache,_.config.persistencePlugin);return be.validateTokenResponse(Q.body),Wr(be.handleServerTokenResponse.bind(be),It.HandleServerTokenResponse,_.logger,_.performanceClient,p.correlationId)(Q.body,_.authority,A,p,void 0,void 0,!0,p.forceCache,de)})()}acquireTokenByRefreshToken(p){var _=this;return z(function*(){if(!p)throw La(Jo);if(_.performanceClient?.addQueueMeasurement(It.RefreshTokenClientAcquireTokenByRefreshToken,p.correlationId),!p.account)throw xn(va);if(_.cacheManager.isAppMetadataFOCI(p.account.environment))try{return yield Wr(_.acquireTokenWithCachedRefreshToken.bind(_),It.RefreshTokenClientAcquireTokenWithCachedRefreshToken,_.logger,_.performanceClient,p.correlationId)(p,!0)}catch(Q){if(Q instanceof Ll&&Q.errorCode===go||Q instanceof ic&&"invalid_grant"===Q.errorCode&&"client_mismatch"===Q.subError)return Wr(_.acquireTokenWithCachedRefreshToken.bind(_),It.RefreshTokenClientAcquireTokenWithCachedRefreshToken,_.logger,_.performanceClient,p.correlationId)(p,!1);throw Q}return Wr(_.acquireTokenWithCachedRefreshToken.bind(_),It.RefreshTokenClientAcquireTokenWithCachedRefreshToken,_.logger,_.performanceClient,p.correlationId)(p,!1)})()}acquireTokenWithCachedRefreshToken(p,_){var A=this;return z(function*(){A.performanceClient?.addQueueMeasurement(It.RefreshTokenClientAcquireTokenWithCachedRefreshToken,p.correlationId);const Q=_p(A.cacheManager.getRefreshToken.bind(A.cacheManager),It.CacheManagerGetRefreshToken,A.logger,A.performanceClient,p.correlationId)(p.account,_,void 0,A.performanceClient,p.correlationId);if(!Q)throw ed(go);if(Q.expiresOn&&Va(Q.expiresOn,p.refreshTokenExpirationOffsetSeconds||300))throw ed(Ed);const de={...p,refreshToken:Q.secret,authenticationScheme:p.authenticationScheme||Ht.BEARER,ccsCredential:{credential:p.account.homeAccountId,type:"home_account_id"}};try{return yield Wr(A.acquireToken.bind(A),It.RefreshTokenClientAcquireToken,A.logger,A.performanceClient,p.correlationId)(de)}catch(be){if(be instanceof Ll&&be.subError===Sh){A.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const He=rs(Q);A.cacheManager.removeRefreshToken(He)}throw be}})()}executeTokenRequest(p,_){var A=this;return z(function*(){A.performanceClient?.addQueueMeasurement(It.RefreshTokenClientExecuteTokenRequest,p.correlationId);const Q=A.createTokenQueryParameters(p),de=Go.appendQueryString(_.tokenEndpoint,Q),be=yield Wr(A.createTokenRequestBody.bind(A),It.RefreshTokenClientCreateTokenRequestBody,A.logger,A.performanceClient,p.correlationId)(p),He=A.createTokenRequestHeaders(p.ccsCredential),wt={clientId:p.tokenBodyParameters?.clientId||A.config.authOptions.clientId,authority:_.canonicalAuthority,scopes:p.scopes,claims:p.claims,authenticationScheme:p.authenticationScheme,resourceRequestMethod:p.resourceRequestMethod,resourceRequestUri:p.resourceRequestUri,shrClaims:p.shrClaims,sshKid:p.sshKid};return Wr(A.executePostToTokenEndpoint.bind(A),It.RefreshTokenClientExecutePostToTokenEndpoint,A.logger,A.performanceClient,p.correlationId)(de,be,He,wt,p.correlationId,It.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.RefreshTokenClientCreateTokenRequestBody,p.correlationId);const A=p.correlationId,Q=new Cd;if(Q.addClientId(p.tokenBodyParameters?.[Ch]||_.config.authOptions.clientId),p.redirectUri&&Q.addRedirectUri(p.redirectUri),Q.addScopes(p.scopes,!0,_.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Q.addGrantType("refresh_token"),Q.addClientInfo(),Q.addLibraryInfo(_.config.libraryInfo),Q.addApplicationTelemetry(_.config.telemetry.application),Q.addThrottling(),_.serverTelemetryManager&&!Fd(_.config)&&Q.addServerTelemetry(_.serverTelemetryManager),Q.addCorrelationId(A),Q.addRefreshToken(p.refreshToken),_.config.clientCredentials.clientSecret&&Q.addClientSecret(_.config.clientCredentials.clientSecret),_.config.clientCredentials.clientAssertion){const de=_.config.clientCredentials.clientAssertion;Q.addClientAssertion(yield gn(de.assertion,_.config.authOptions.clientId,p.resourceRequestUri)),Q.addClientAssertionType(de.assertionType)}if(p.authenticationScheme===Ht.POP){const de=new ie(_.cryptoUtils,_.performanceClient);let be;be=p.popKid?_.cryptoUtils.encodeKid(p.popKid):(yield Wr(de.generateCnf.bind(de),It.PopTokenGenerateCnf,_.logger,_.performanceClient,p.correlationId)(p,_.logger)).reqCnfString,Q.addPopToken(be)}else if(p.authenticationScheme===Ht.SSH){if(!p.sshJwk)throw La(ls);Q.addSshJwk(p.sshJwk)}if((!_c.isEmptyObj(p.claims)||_.config.authOptions.clientCapabilities&&_.config.authOptions.clientCapabilities.length>0)&&Q.addClaims(p.claims,_.config.authOptions.clientCapabilities),_.config.systemOptions.preventCorsPreflight&&p.ccsCredential)switch(p.ccsCredential.type){case"home_account_id":try{const de=Fu(p.ccsCredential.credential);Q.addCcsOid(de)}catch(de){_.logger.verbose("Could not parse home account ID for CCS Header: "+de)}break;case"UPN":Q.addCcsUpn(p.ccsCredential.credential)}return p.tokenBodyParameters&&Q.addExtraQueryParameters(p.tokenBodyParameters),Q.createQueryString()})()}}class Xa extends rf{constructor(p,_){super(p,_)}acquireToken(p){var _=this;return z(function*(){try{const[A,Q]=yield _.acquireCachedToken({...p,scopes:p.scopes?.length?p.scopes:[...N]});return"4"===Q&&(_.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new $o(_.config,_.performanceClient).acquireTokenByRefreshToken(p).catch(()=>{})),A}catch(A){if(A instanceof ji&&A.errorCode===so)return new $o(_.config,_.performanceClient).acquireTokenByRefreshToken(p);throw A}})()}acquireCachedToken(p){var _=this;return z(function*(){_.performanceClient?.addQueueMeasurement(It.SilentFlowClientAcquireCachedToken,p.correlationId);let A="0";if(p.forceRefresh||!_.config.cacheOptions.claimsBasedCachingEnabled&&!_c.isEmptyObj(p.claims))throw _.setCacheOutcome("1",p.correlationId),xn(so);if(!p.account)throw xn(va);const Q=p.account.tenantId||function Ls(ve){const A=new Go(ve).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(A){case"common":case"organizations":case"consumers":return;default:return A}}(p.authority),de=_.cacheManager.getTokenKeys(),be=_.cacheManager.getAccessToken(p.account,p,de,Q,_.performanceClient,p.correlationId);if(!be)throw _.setCacheOutcome("2",p.correlationId),xn(so);if(Pc(be.cachedAt)||Va(be.expiresOn,_.config.systemOptions.tokenRenewalOffsetSeconds))throw _.setCacheOutcome("3",p.correlationId),xn(so);be.refreshOn&&Va(be.refreshOn,0)&&(A="4");const He=p.authority||_.authority.getPreferredCache(),wt={account:_.cacheManager.readAccountFromCache(p.account),accessToken:be,idToken:_.cacheManager.getIdToken(p.account,de,Q,_.performanceClient,p.correlationId),refreshToken:null,appMetadata:_.cacheManager.readAppMetadataFromCache(He)};return _.setCacheOutcome(A,p.correlationId),_.config.serverTelemetryManager&&_.config.serverTelemetryManager.incrementCacheHits(),[yield Wr(_.generateResultFromCacheRecord.bind(_),It.SilentFlowClientGenerateResultFromCacheRecord,_.logger,_.performanceClient,p.correlationId)(wt,p),A]})()}setCacheOutcome(p,_){this.serverTelemetryManager?.setCacheOutcome(p),this.performanceClient?.addFields({cacheOutcome:p},_),"0"!==p&&this.logger.info(`Token refresh is required due to cache outcome: ${p}`)}generateResultFromCacheRecord(p,_){var A=this;return z(function*(){let Q;if(A.performanceClient?.addQueueMeasurement(It.SilentFlowClientGenerateResultFromCacheRecord,_.correlationId),p.idToken&&(Q=qs(p.idToken.secret,A.config.cryptoInterface.base64Decode)),_.maxAge||0===_.maxAge){const de=Q?.auth_time;if(!de)throw xn(Do);eu(de,_.maxAge)}return Te.generateAuthenticationResult(A.cryptoUtils,A.authority,p,!0,_,Q)})()}}const Tr={sendGetRequestAsync:()=>Promise.reject(xn(Qe)),sendPostRequestAsync:()=>Promise.reject(xn(Qe))};class zd{constructor(p,_){this.cacheOutcome="0",this.cacheManager=_,this.apiId=p.apiId,this.correlationId=p.correlationId,this.wrapperSKU=p.wrapperSKU||T.EMPTY_STRING,this.wrapperVer=p.wrapperVer||T.EMPTY_STRING,this.telemetryCacheKey=Gt.CACHE_KEY+Le.CACHE_KEY_SEPARATOR+p.clientId}generateCurrentRequestHeaderValue(){const p=`${this.apiId}${Gt.VALUE_SEPARATOR}${this.cacheOutcome}`,_=[this.wrapperSKU,this.wrapperVer],A=this.getNativeBrokerErrorCode();A?.length&&_.push(`broker_error=${A}`);const Q=_.join(Gt.VALUE_SEPARATOR),be=[p,this.getRegionDiscoveryFields()].join(Gt.VALUE_SEPARATOR);return[Gt.SCHEMA_VERSION,be,Q].join(Gt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const p=this.getLastRequests(),_=zd.maxErrorsToSend(p),A=p.failedRequests.slice(0,2*_).join(Gt.VALUE_SEPARATOR),Q=p.errors.slice(0,_).join(Gt.VALUE_SEPARATOR),de=p.errors.length,He=[de,_<de?Gt.OVERFLOW_TRUE:Gt.OVERFLOW_FALSE].join(Gt.VALUE_SEPARATOR);return[Gt.SCHEMA_VERSION,p.cacheHits,A,Q,He].join(Gt.CATEGORY_SEPARATOR)}cacheFailedRequest(p){const _=this.getLastRequests();_.errors.length>=Gt.MAX_CACHED_ERRORS&&(_.failedRequests.shift(),_.failedRequests.shift(),_.errors.shift()),_.failedRequests.push(this.apiId,this.correlationId),p instanceof Error&&p&&p.toString()?_.errors.push(p instanceof Ut?p.subError?p.subError:p.errorCode?p.errorCode:p.toString():p.toString()):_.errors.push(Gt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,_)}incrementCacheHits(){const p=this.getLastRequests();return p.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,p),p.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const p=this.getLastRequests(),_=zd.maxErrorsToSend(p);if(_===p.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const Q={failedRequests:p.failedRequests.slice(2*_),errors:p.errors.slice(_),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,Q)}}static maxErrorsToSend(p){let _,A=0,Q=0;const de=p.errors.length;for(_=0;_<de;_++){const He=p.failedRequests[2*_+1]||T.EMPTY_STRING,wt=p.errors[_]||T.EMPTY_STRING;if(Q+=(p.failedRequests[2*_]||T.EMPTY_STRING).toString().length+He.toString().length+wt.length+3,!(Q<Gt.MAX_LAST_HEADER_BYTES))break;A+=1}return A}getRegionDiscoveryFields(){const p=[];return p.push(this.regionUsed||T.EMPTY_STRING),p.push(this.regionSource||T.EMPTY_STRING),p.push(this.regionOutcome||T.EMPTY_STRING),p.join(",")}updateRegionDiscoveryMetadata(p){this.regionUsed=p.region_used,this.regionSource=p.region_source,this.regionOutcome=p.region_outcome}setCacheOutcome(p){this.cacheOutcome=p}setNativeBrokerErrorCode(p){const _=this.getLastRequests();_.nativeBrokerErrorCode=p,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,_)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const p=this.getLastRequests();delete p.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,p)}static makeExtraSkuString(p){return function Bu(ve){const{skus:p,libraryName:_,libraryVersion:A,extensionName:Q,extensionVersion:de}=ve,be=new Map([[0,[_,A]],[2,[Q,de]]]);let He=[];if(p?.length){if(He=p.split(","),He.length<4)return p}else He=Array.from({length:4},()=>"|");return be.forEach((wt,Dt)=>{2===wt.length&&wt[0]?.length&&wt[1]?.length&&function ru(ve){const{skuArr:p,index:_,skuName:A,skuVersion:Q}=ve;_>=p.length||(p[_]=[A,Q].join("|"))}({skuArr:He,index:Dt,skuName:wt[0],skuVersion:wt[1]})}),He.join(",")}(p)}}const Sd="missing_kid_error",Iu="missing_alg_error",rh={[Sd]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Iu]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class td extends Ut{constructor(p,_){super(p,_),this.name="JoseHeaderError",Object.setPrototypeOf(this,td.prototype)}}function wh(ve){return new td(ve,rh[ve])}class Th{constructor(p){this.typ=p.typ,this.alg=p.alg,this.kid=p.kid}static getShrHeaderString(p){if(!p.kid)throw wh(Sd);if(!p.alg)throw wh(Iu);const _=new Th({typ:p.typ||Gr.Pop,kid:p.kid,alg:p.alg});return JSON.stringify(_)}}class rm{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class st{generateId(){return"callback-id"}startMeasurement(p,_){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:p,startTimeMs:Date.now(),correlationId:_||""},measurement:new rm}}startPerformanceMeasurement(){return new rm}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}function Ce(ve){const p=ve.lastIndexOf(" ")+1;if(p<1)return ve;const _=ve.substring(p);let A=_.lastIndexOf("/");return A=A<0?_.lastIndexOf("\\"):A,A>=0?(ve.substring(0,p)+"("+_.substring(A+1)+(")"===_.charAt(_.length-1)?"":")")).trimStart():ve.trimStart()}class Oe{constructor(p,_,A,Q,de,be,He,wt){this.authority=_,this.libraryName=Q,this.libraryVersion=de,this.applicationTelemetry=be,this.clientId=p,this.logger=A,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=He||new Set;for(const Dt of j1)this.intFields.add(Dt);this.abbreviations=wt||new Map;for(const[Dt,dn]of nh)this.abbreviations.set(Dt,dn)}startPerformanceMeasurement(p,_){return{}}getPreQueueTime(p,_){const A=this.preQueueTimeByCorrelationId.get(_);if(A){if(A.name===p)return A.time;this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${p}, unable to add queue measurement`)}else this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${_}, unable to add queue measurement`)}calculateQueuedTime(p,_){return p<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${p}`),0):_<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${_}`),0):_<p?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):_-p}addQueueMeasurement(p,_,A,Q){if(!_)return void this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${p}, cannot add queue measurement`);if(0===A)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${p} is ${A}`);else if(!A)return void this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${p}`);const de={eventName:p,queueTime:Q?0:A,manuallyCompleted:Q},be=this.queueMeasurements.get(_);be?(be.push(de),this.queueMeasurements.set(_,be)):(this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${_} to queue measurements`),this.queueMeasurements.set(_,[de])),this.preQueueTimeByCorrelationId.delete(_)}startMeasurement(p,_){const A=_||this.generateId();_||this.logger.info(`PerformanceClient: No correlation id provided for ${p}, generating`,A),this.logger.trace(`PerformanceClient: Performance measurement started for ${p}`,A);const Q={eventId:this.generateId(),status:1,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:p,startTimeMs:Date.now(),correlationId:A,appName:this.applicationTelemetry?.appName,appVersion:this.applicationTelemetry?.appVersion};return this.cacheEventByCorrelationId(Q),function H(ve,p,_){_&&_.push({name:p.get(ve.name)||ve.name})}(Q,this.abbreviations,this.eventStack.get(A)),{end:(de,be)=>this.endMeasurement({...Q,...de},be),discard:()=>this.discardMeasurements(Q.correlationId),add:de=>this.addFields(de,Q.correlationId),increment:de=>this.incrementFields(de,Q.correlationId),event:Q,measurement:new rm}}endMeasurement(p,_){const A=this.eventsByCorrelationId.get(p.correlationId);if(!A)return this.logger.trace(`PerformanceClient: Measurement not found for ${p.eventId}`,p.correlationId),null;const Q=p.eventId===A.eventId;let de={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};p.durationMs=Math.round(p.durationMs||this.getDurationMs(p.startTimeMs));const be=JSON.stringify(function ee(ve,p,_,A){if(!_?.length)return;const Q=yo=>yo.length?yo[yo.length-1]:void 0,de=p.get(ve.name)||ve.name;if(Q(_)?.name!==de)return;const He=_?.pop();if(!He)return;const wt=A instanceof Ut?A.errorCode:A instanceof Error?A.name:void 0,Dt=A instanceof Ut?A.subError:void 0;wt&&He.childErr!==wt&&(He.err=wt,Dt&&(He.subErr=Dt)),delete He.name,delete He.childErr;const dn={...He,dur:ve.durationMs};ve.success||(dn.fail=1);const ti=Q(_);if(!ti)return{[de]:dn};let ai;if(wt&&(ti.childErr=wt),ti[de]){const yo=Object.keys(ti).filter(Za=>Za.startsWith(de)).length;ai=`${de}_${yo+1}`}else ai=de;return ti[ai]=dn,ti}(p,this.abbreviations,this.eventStack.get(A.correlationId),_));if(Q?(de=this.getQueueInfo(p.correlationId),this.discardMeasurements(A.correlationId)):A.incompleteSubMeasurements?.delete(p.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${p.name}: ${p.durationMs} ms`,p.correlationId),!Q)return A[p.name+"DurationMs"]=Math.floor(p.durationMs),{...A};_&&function ne(ve,p,_,A=5){if(ve instanceof Error)return ve instanceof Ut?(_.errorCode=ve.errorCode,_.subErrorCode=ve.subError,void((ve instanceof ic||ve instanceof Ll)&&(_.serverErrorNo=ve.errorNo))):void(ve instanceof Tc?_.errorCode=ve.errorCode:_.errorStack?.length?p.trace("PerformanceClient.addErrorStack: Stack already exist",_.correlationId):ve.stack?.length?(ve.stack&&(_.errorStack=function ce(ve,p){if(p<0)return[];const _=ve.split("\n")||[];if(_.length<2)return[];const A=[];for(let Q=Math.max(_.length-p-1,1);Q<_.length;Q++){const de=_[Q];if(A.length>=p)break;A.push(Ce(de))}return A}(ve.stack,A)),_.errorName=ve.name):p.trace("PerformanceClient.addErrorStack: Input stack is empty",_.correlationId));p.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",_.correlationId)}(_,this.logger,A);let He={...A,...p},wt=0;return He.incompleteSubMeasurements?.forEach(Dt=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${Dt.name} found for ${p.name}`,He.correlationId),wt++}),He.incompleteSubMeasurements=void 0,He={...He,queuedTimeMs:de.totalQueueTime,queuedCount:de.totalQueueCount,queuedManuallyCompletedCount:de.manuallyCompletedCount,status:2,incompleteSubsCount:wt,context:be},this.truncateIntegralFields(He),this.emitEvents([He],p.correlationId),He}addFields(p,_){this.logger.trace("PerformanceClient: Updating static fields");const A=this.eventsByCorrelationId.get(_);A?this.eventsByCorrelationId.set(_,{...A,...p}):this.logger.trace("PerformanceClient: Event not found for",_)}incrementFields(p,_){this.logger.trace("PerformanceClient: Updating counters");const A=this.eventsByCorrelationId.get(_);if(A)for(const Q in p){if(A.hasOwnProperty(Q)){if(isNaN(Number(A[Q])))return}else A[Q]=0;A[Q]+=p[Q]}else this.logger.trace("PerformanceClient: Event not found for",_)}cacheEventByCorrelationId(p){const _=this.eventsByCorrelationId.get(p.correlationId);_?(this.logger.trace(`PerformanceClient: Performance measurement for ${p.name} added/updated`,p.correlationId),_.incompleteSubMeasurements=_.incompleteSubMeasurements||new Map,_.incompleteSubMeasurements.set(p.eventId,{name:p.name,startTimeMs:p.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${p.name} started`,p.correlationId),this.eventsByCorrelationId.set(p.correlationId,{...p}),this.eventStack.set(p.correlationId,[]))}getQueueInfo(p){const _=this.queueMeasurements.get(p);_||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${p}`);let A=0,Q=0,de=0;return _?.forEach(be=>{A+=be.queueTime,Q++,de+=be.manuallyCompleted?1:0}),{totalQueueTime:A,totalQueueCount:Q,manuallyCompletedCount:de}}discardMeasurements(p){this.logger.trace("PerformanceClient: Performance measurements discarded",p),this.eventsByCorrelationId.delete(p),this.logger.trace("PerformanceClient: QueueMeasurements discarded",p),this.queueMeasurements.delete(p),this.logger.trace("PerformanceClient: Pre-queue times discarded",p),this.preQueueTimeByCorrelationId.delete(p),this.logger.trace("PerformanceClient: Event stack discarded",p),this.eventStack.delete(p)}addPerformanceCallback(p){for(const[A,Q]of this.callbacks)if(Q.toString()===p.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${A}`),A;const _=this.generateId();return this.callbacks.set(_,p),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${_}`),_}removePerformanceCallback(p){const _=this.callbacks.delete(p);return this.logger.verbose(_?`PerformanceClient: Performance callback ${p} removed.`:`PerformanceClient: Performance callback ${p} not removed.`),_}emitEvents(p,_){this.logger.verbose("PerformanceClient: Emitting performance events",_),this.callbacks.forEach((A,Q)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${Q}`,_),A.apply(null,[p])})}truncateIntegralFields(p){this.intFields.forEach(_=>{_ in p&&"number"==typeof p[_]&&(p[_]=Math.floor(p[_]))})}getDurationMs(p){const _=Date.now()-p;return _<0?_:0}}const De="pkce_not_created",at="crypto_nonexistent",nt="empty_navigate_uri",ht="hash_empty_error",Xt="no_state_in_hash",Cn="hash_does_not_contain_known_properties",En="unable_to_parse_state",Vn="state_interaction_type_mismatch",Nt="interaction_in_progress",Gn="popup_window_error",Lr="empty_window_error",Ir="user_cancelled",Qr="monitor_popup_timeout",Or="monitor_window_timeout",yr="redirect_in_iframe",di="block_iframe_reload",Mi="block_nested_popups",Ni="iframe_closed_prematurely",qr="silent_logout_unsupported",Fa="no_account_error",ss="silent_prompt_value_error",ds="no_token_request_cache_error",Ss="unable_to_parse_token_request_cache_error",Vc="no_cached_authority_error",Gc="auth_request_not_set_error",qc="invalid_cache_type",Jc="non_browser_environment",Ws="database_not_open",Ah="no_network_connectivity",jd="post_request_failed",Ih="get_request_failed",ih="failed_to_parse_response",of="unable_to_load_token",Kl="crypto_key_not_found",$d="auth_code_required",Km="auth_code_or_nativeAccountId_required",Ym="spa_code_and_nativeAccountId_present",Vd="database_unavailable",im="unable_to_acquire_token_from_native_platform",Wm="native_handshake_timeout",gg="native_extension_not_installed",vp="native_connection_not_established",Qm="uninitialized_public_client_application",mg="native_prompt_not_supported",om="invalid_base64_string",da="invalid_pop_token_request";var Cu=Object.freeze({__proto__:null,authCodeOrNativeAccountIdRequired:Km,authCodeRequired:$d,authRequestNotSetError:Gc,blockIframeReload:di,blockNestedPopups:Mi,cryptoKeyNotFound:Kl,cryptoNonExistent:at,databaseNotOpen:Ws,databaseUnavailable:Vd,emptyNavigateUri:nt,emptyWindowError:Lr,failedToParseResponse:ih,getRequestFailed:Ih,hashDoesNotContainKnownProperties:Cn,hashEmptyError:ht,iframeClosedPrematurely:Ni,interactionInProgress:Nt,invalidBase64String:om,invalidCacheType:qc,invalidPopTokenRequest:da,monitorPopupTimeout:Qr,monitorWindowTimeout:Or,nativeConnectionNotEstablished:vp,nativeExtensionNotInstalled:gg,nativeHandshakeTimeout:Wm,nativePromptNotSupported:mg,noAccountError:Fa,noCachedAuthorityError:Vc,noNetworkConnectivity:Ah,noStateInHash:Xt,noTokenRequestCacheError:ds,nonBrowserEnvironment:Jc,pkceNotCreated:De,popupWindowError:Gn,postRequestFailed:jd,redirectInIframe:yr,silentLogoutUnsupported:qr,silentPromptValueError:ss,spaCodeAndNativeAccountIdPresent:Ym,stateInteractionTypeMismatch:Vn,unableToAcquireTokenFromNativePlatform:im,unableToLoadToken:of,unableToParseState:En,unableToParseTokenRequestCacheError:Ss,uninitializedPublicClientApplication:Qm,userCancelled:Ir});const el="For more visit: aka.ms/msaljs/browser-errors",q={[De]:"The PKCE code challenge and verifier could not be generated.",[at]:"The crypto object or function is not available.",[nt]:"Navigation URI is empty. Please check stack trace for more info.",[ht]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${el}`,[Xt]:"Hash does not contain state. Please verify that the request originated from msal.",[Cn]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${el}`,[En]:"Unable to parse state. Please verify that the request originated from msal.",[Vn]:"Hash contains state but the interaction type does not match the caller.",[Nt]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${el}`,[Gn]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Lr]:"window.open returned null or undefined window object.",[Ir]:"User cancelled the flow.",[Qr]:`Token acquisition in popup failed due to timeout.  ${el}`,[Or]:`Token acquisition in iframe failed due to timeout.  ${el}`,[yr]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[di]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${el}`,[Mi]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Ni]:"The iframe being monitored was closed prematurely.",[qr]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Fa]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[ss]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[ds]:"No token request found in cache.",[Ss]:"The cached token request could not be parsed.",[Vc]:"No cached authority found.",[Gc]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[qc]:"Invalid cache type",[Jc]:"Login and token requests are not supported in non-browser environments.",[Ws]:"Database is not open!",[Ah]:"No network connectivity. Check your internet connection.",[jd]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Ih]:"Network request failed. Please check the network trace to determine root cause.",[ih]:"Failed to parse network response. Check network trace.",[of]:"Error loading token to cache.",[Kl]:"Cryptographic Key or Keypair not found in browser storage.",[$d]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Km]:"An authorization code or nativeAccountId must be provided to this flow.",[Ym]:"Request cannot contain both spa code and native account id.",[Vd]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[im]:`Unable to acquire token from native platform.  ${el}`,[Wm]:"Timed out while attempting to establish connection to browser extension",[gg]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[vp]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${el}`,[Qm]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${el}`,[mg]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[om]:"Invalid base64 encoded string.",[da]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true."},ue={pkceNotGenerated:{code:De,desc:q[De]},cryptoDoesNotExist:{code:at,desc:q[at]},emptyNavigateUriError:{code:nt,desc:q[nt]},hashEmptyError:{code:ht,desc:q[ht]},hashDoesNotContainStateError:{code:Xt,desc:q[Xt]},hashDoesNotContainKnownPropertiesError:{code:Cn,desc:q[Cn]},unableToParseStateError:{code:En,desc:q[En]},stateInteractionTypeMismatchError:{code:Vn,desc:q[Vn]},interactionInProgress:{code:Nt,desc:q[Nt]},popupWindowError:{code:Gn,desc:q[Gn]},emptyWindowError:{code:Lr,desc:q[Lr]},userCancelledError:{code:Ir,desc:q[Ir]},monitorPopupTimeoutError:{code:Qr,desc:q[Qr]},monitorIframeTimeoutError:{code:Or,desc:q[Or]},redirectInIframeError:{code:yr,desc:q[yr]},blockTokenRequestsInHiddenIframeError:{code:di,desc:q[di]},blockAcquireTokenInPopupsError:{code:Mi,desc:q[Mi]},iframeClosedPrematurelyError:{code:Ni,desc:q[Ni]},silentLogoutUnsupportedError:{code:qr,desc:q[qr]},noAccountError:{code:Fa,desc:q[Fa]},silentPromptValueError:{code:ss,desc:q[ss]},noTokenRequestCacheError:{code:ds,desc:q[ds]},unableToParseTokenRequestCacheError:{code:Ss,desc:q[Ss]},noCachedAuthorityError:{code:Vc,desc:q[Vc]},authRequestNotSet:{code:Gc,desc:q[Gc]},invalidCacheType:{code:qc,desc:q[qc]},notInBrowserEnvironment:{code:Jc,desc:q[Jc]},databaseNotOpen:{code:Ws,desc:q[Ws]},noNetworkConnectivity:{code:Ah,desc:q[Ah]},postRequestFailed:{code:jd,desc:q[jd]},getRequestFailed:{code:Ih,desc:q[Ih]},failedToParseNetworkResponse:{code:ih,desc:q[ih]},unableToLoadTokenError:{code:of,desc:q[of]},signingKeyNotFoundInStorage:{code:Kl,desc:q[Kl]},authCodeRequired:{code:$d,desc:q[$d]},authCodeOrNativeAccountRequired:{code:Km,desc:q[Km]},spaCodeAndNativeAccountPresent:{code:Ym,desc:q[Ym]},databaseUnavailable:{code:Vd,desc:q[Vd]},unableToAcquireTokenFromNativePlatform:{code:im,desc:q[im]},nativeHandshakeTimeout:{code:Wm,desc:q[Wm]},nativeExtensionNotInstalled:{code:gg,desc:q[gg]},nativeConnectionNotEstablished:{code:vp,desc:q[vp]},uninitializedPublicClientApplication:{code:Qm,desc:q[Qm]},nativePromptNotSupported:{code:mg,desc:q[mg]},invalidBase64StringError:{code:om,desc:q[om]},invalidPopTokenRequest:{code:da,desc:q[da]}};class te extends Ut{constructor(p){super(p,q[p]),Object.setPrototypeOf(this,te.prototype),this.name="BrowserAuthError"}}function le(ve){return new te(ve)}const we={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Ke_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836",an={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Ko={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};C.InteractionType=void 0,function(ve){ve.Redirect="redirect",ve.Popup="popup",ve.Silent="silent",ve.None="none"}(C.InteractionType||(C.InteractionType={}));const Kc={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Mu={scopes:N},qh="jwk",Of="msal.db",cy=`${Of}.keys`,Gd={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},$1=[Gd.Default,Gd.Skip,Gd.RefreshTokenAndNetwork];function oh(ve){return encodeURIComponent(kv(ve).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function yg(ve){return ZT(ve).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kv(ve){return ZT((new TextEncoder).encode(ve))}function ZT(ve){const p=Array.from(ve,_=>String.fromCodePoint(_)).join("");return btoa(p)}const lE="SHA-256",n2=new Uint8Array([1,0,1]),JT="0123456789abcdef",eA=new Uint32Array(1),Lv={name:"RSASSA-PKCS1-v1_5",hash:lE,modulusLength:2048,publicExponent:n2};function uE(ve,p,_){return uy.apply(this,arguments)}function uy(){return uy=z(function*(ve,p,_){p?.addQueueMeasurement(It.Sha256Digest,_);const Q=(new TextEncoder).encode(ve);return window.crypto.subtle.digest(lE,Q)}),uy.apply(this,arguments)}function Xm(ve){return window.crypto.getRandomValues(ve)}function dE(){return window.crypto.getRandomValues(eA),eA[0]}function Cp(){const ve=Date.now(),p=1024*dE()+(1023&dE()),_=new Uint8Array(16),A=Math.trunc(p/2**30),Q=p&2**30-1,de=dE();_[0]=ve/2**40,_[1]=ve/2**32,_[2]=ve/2**24,_[3]=ve/65536,_[4]=ve/256,_[5]=ve,_[6]=112|A>>>8,_[7]=A,_[8]=128|Q>>>24,_[9]=Q>>>16,_[10]=Q>>>8,_[11]=Q,_[12]=de>>>24,_[13]=de>>>16,_[14]=de>>>8,_[15]=de;let be="";for(let He=0;He<_.length;He++)be+=JT.charAt(_[He]>>>4),be+=JT.charAt(15&_[He]),(3===He||5===He||7===He||9===He)&&(be+="-");return be}function G1(){return G1=z(function*(ve,p){return window.crypto.subtle.generateKey(Lv,ve,p)}),G1.apply(this,arguments)}function q1(ve){return Zm.apply(this,arguments)}function Zm(){return Zm=z(function*(ve){return window.crypto.subtle.exportKey(qh,ve)}),Zm.apply(this,arguments)}function dy(){return dy=z(function*(ve,p,_){return window.crypto.subtle.importKey(qh,ve,Lv,p,_)}),dy.apply(this,arguments)}function pE(){return pE=z(function*(ve,p){return window.crypto.subtle.sign(Lv,ve,p)}),pE.apply(this,arguments)}function tA(ve){return fE.apply(this,arguments)}function fE(){return fE=z(function*(ve){const p=yield uE(ve);return yg(new Uint8Array(p))}),fE.apply(this,arguments)}const am="storage_not_supported",Fl="stubbed_public_client_application_called",Ic="in_mem_redirect_unavailable";var Kr=Object.freeze({__proto__:null,inMemRedirectUnavailable:Ic,storageNotSupported:am,stubbedPublicClientApplicationCalled:Fl});const Ao={[am]:"Given storage configuration option was not supported.",[Fl]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Ic]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},Ou={storageNotSupportedError:{code:am,desc:Ao[am]},stubPcaInstanceCalled:{code:Fl,desc:Ao[Fl]},inMemRedirectUnavailable:{code:Ic,desc:Ao[Ic]}};class Oh extends Ut{constructor(p,_){super(p,_),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Oh.prototype)}}function Us(ve){return new Oh(ve,Ao[ve])}function qd(ve){ve.location.hash="","function"==typeof ve.history.replaceState&&ve.history.replaceState(null,"",`${ve.location.origin}${ve.location.pathname}${ve.location.search}`)}function Jm(ve){const p=ve.split("#");p.shift(),window.location.hash=p.length>0?p.join("#"):""}function Nc(){return window.parent!==window}function bu(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${we.POPUP_NAME_PREFIX}.`)}function Pu(){return window.location.href.split("?")[0].split("#")[0]}function ea(){const p=new Go(window.location.href).getUrlComponents();return`${p.Protocol}//${p.HostNameAndPort}/`}function py(){if(Go.hashContainsKnownProperties(window.location.hash)&&Nc())throw le(di)}function Fv(ve){if(Nc()&&!ve)throw le(yr)}function e_(){if(bu())throw le(Mi)}function Uo(){if(typeof window>"u")throw le(Jc)}function ws(ve){if(!ve)throw le(Qm)}function vg(ve){Uo(),py(),e_(),ws(ve)}function Pf(ve,p){if(vg(ve),Fv(p.system.allowRedirectInIframe),p.cache.cacheLocation===an.MemoryStorage&&!p.cache.storeAuthStateInCookie)throw Us(Ic)}function sm(ve){const p=document.createElement("link");p.rel="preconnect",p.href=new URL(ve).origin,p.crossOrigin="anonymous",document.head.appendChild(p),window.setTimeout(()=>{try{document.head.removeChild(p)}catch{}},1e4)}var cm=Object.freeze({__proto__:null,blockAPICallsBeforeInitialize:ws,blockAcquireTokenInPopups:e_,blockNonBrowserEnvironment:Uo,blockRedirectInIframe:Fv,blockReloadInHiddenIframes:py,clearHash:qd,createGuid:function nA(){return Cp()},getCurrentUri:Pu,getHomepage:ea,invoke:_p,invokeAsync:Wr,isInIframe:Nc,isInPopup:bu,preconnect:sm,preflightCheck:vg,redirectPreflightCheck:Pf,replaceHash:Jm});class lm{navigateInternal(p,_){return lm.defaultNavigateWindow(p,_)}navigateExternal(p,_){return lm.defaultNavigateWindow(p,_)}static defaultNavigateWindow(p,_){return _.noHistory?window.location.replace(p):window.location.assign(p),new Promise(A=>{setTimeout(()=>{A(!0)},_.timeout)})}}class bp{sendGetRequestAsync(p,_){var A=this;return z(function*(){let Q;try{Q=yield fetch(p,{method:"GET",headers:A.getFetchHeaders(_)})}catch{throw window.navigator.onLine?le(Ih):le(Ah)}try{return{headers:A.getHeaderDict(Q.headers),body:yield Q.json(),status:Q.status}}catch{throw le(ih)}})()}sendPostRequestAsync(p,_){var A=this;return z(function*(){const Q=_&&_.body||T.EMPTY_STRING;let de;try{de=yield fetch(p,{method:"POST",headers:A.getFetchHeaders(_),body:Q})}catch{throw window.navigator.onLine?le(jd):le(Ah)}try{return{headers:A.getHeaderDict(de.headers),body:yield de.json(),status:de.status}}catch{throw le(ih)}})()}getFetchHeaders(p){const _=new Headers;if(!p||!p.headers)return _;const A=p.headers;return Object.keys(A).forEach(Q=>{_.append(Q,A[Q])}),_}getHeaderDict(p){const _={};return p.forEach((A,Q)=>{_[Q]=A}),_}}const fy=1e4,Cg="@azure/msal-browser",Mc="3.24.0";class um{static loggerCallback(p,_){switch(p){case C.LogLevel.Error:return void console.error(_);case C.LogLevel.Info:return void console.info(_);case C.LogLevel.Verbose:return void console.debug(_);case C.LogLevel.Warning:return void console.warn(_);default:return void console.log(_)}}constructor(p){let _;this.browserEnvironment=typeof window<"u",this.config=function t_({auth:ve,cache:p,system:_,telemetry:A},Q){const de={clientId:T.EMPTY_STRING,authority:`${T.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:T.EMPTY_STRING,authorityMetadata:T.EMPTY_STRING,redirectUri:T.EMPTY_STRING,postLogoutRedirectUri:T.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Ml.AAD,OIDCOptions:{serverResponseType:U.FRAGMENT,defaultScopes:[T.OPENID_SCOPE,T.PROFILE_SCOPE,T.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Tl.None,tenant:T.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},be={cacheLocation:an.SessionStorage,temporaryCacheLocation:an.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!p||p.cacheLocation!==an.LocalStorage),claimsBasedCachingEnabled:!1},He={loggerCallback:()=>{},logLevel:C.LogLevel.Info,piiLoggingEnabled:!1},Dt={...{...gd,loggerOptions:He,networkClient:Q?new bp:Tr,navigationClient:new lm,loadFrameTimeout:0,windowHashTimeout:_?.loadFrameTimeout||6e4,iframeHashTimeout:_?.loadFrameTimeout||fy,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:_?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:we.DEFAULT_POLL_INTERVAL_MS},..._,loggerOptions:_?.loggerOptions||He},dn={application:{appName:T.EMPTY_STRING,appVersion:T.EMPTY_STRING},client:new st};if(ve?.protocolMode!==Ml.OIDC&&ve?.OIDCOptions&&new oa(Dt.loggerOptions).warning(JSON.stringify(La(Co))),ve?.protocolMode&&ve.protocolMode!==Ml.AAD&&Dt?.allowNativeBroker)throw La(tu);return{auth:{...de,...ve,OIDCOptions:{...de.OIDCOptions,...ve?.OIDCOptions}},cache:{...be,...p},system:Dt,telemetry:{...dn,...A}}}(p,this.browserEnvironment);try{_=window[an.SessionStorage]}catch{}const A=_?.getItem("msal.browser.log.level"),Q=_?.getItem("msal.browser.log.pii")?.toLowerCase(),de="true"===Q||"false"!==Q&&void 0,be={...this.config.system.loggerOptions},He=A&&Object.keys(C.LogLevel).includes(A)?C.LogLevel[A]:void 0;He&&(be.loggerCallback=um.loggerCallback,be.logLevel=He),void 0!==de&&(be.piiLoggingEnabled=de),this.logger=new oa(be,Cg,Mc),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let nd=(()=>{class ve{static initializeNestedAppAuthBridge(){return z(function*(){if(void 0===window)throw new Error("window is undefined");if(void 0===window.nestedAppAuthBridge)throw new Error("window.nestedAppAuthBridge is undefined");try{window.nestedAppAuthBridge.addEventListener("message",A=>{const de=JSON.parse("string"==typeof A?A:A.data),be=ve.bridgeRequests.find(He=>He.requestId===de.requestId);void 0!==be&&(ve.bridgeRequests.splice(ve.bridgeRequests.indexOf(be),1),de.success?be.resolve(de):be.reject(de.error))});const _=yield new Promise((A,Q)=>{const de=ve.buildRequest("GetInitContext");ve.bridgeRequests.push({requestId:de.requestId,method:de.method,resolve:A,reject:Q}),window.nestedAppAuthBridge.postMessage(JSON.stringify(de))});return ve.validateBridgeResultOrThrow(_.initContext)}catch(_){throw window.console.log(_),_}})()}getTokenInteractive(_){return this.getToken("GetTokenPopup",_)}getTokenSilent(_){return this.getToken("GetToken",_)}getToken(_,A){var Q=this;return z(function*(){const de=yield Q.sendRequest(_,{tokenParams:A});return{token:ve.validateBridgeResultOrThrow(de.token),account:ve.validateBridgeResultOrThrow(de.account)}})()}getHostCapabilities(){return this.capabilities??null}getAccountContext(){return this.accountContext?this.accountContext:null}static buildRequest(_,A){return{messageType:"NestedAppAuthRequest",method:_,requestId:Cp(),sendTime:Date.now(),clientLibrary:we.MSAL_SKU,clientLibraryVersion:Mc,...A}}sendRequest(_,A){const Q=ve.buildRequest(_,A);return new Promise((be,He)=>{ve.bridgeRequests.push({requestId:Q.requestId,method:Q.method,resolve:be,reject:He}),window.nestedAppAuthBridge.postMessage(JSON.stringify(Q))})}static validateBridgeResultOrThrow(_){if(void 0===_)throw{status:"NESTED_APP_AUTH_UNAVAILABLE"};return _}constructor(_,A,Q,de){this.sdkName=_,this.sdkVersion=A,this.accountContext=Q,this.capabilities=de}static create(){return z(function*(){const _=yield ve.initializeNestedAppAuthBridge();return new ve(_.sdkName,_.sdkVersion,_.accountContext,_.capabilities)})()}}return ve.bridgeRequests=[],ve})(),K1=(()=>{class ve extends um{constructor(){super(...arguments),this.bridgeProxy=void 0,this.accountContext=null}getModuleName(){return ve.MODULE_NAME}getId(){return ve.ID}getBridgeProxy(){return this.bridgeProxy}initialize(){var _=this;return z(function*(){try{if(typeof window<"u"){"function"==typeof window.__initializeNestedAppAuth&&(yield window.__initializeNestedAppAuth());const A=yield nd.create();_.accountContext=A.getAccountContext(),_.bridgeProxy=A,_.available=void 0!==A}}catch(A){_.logger.infoPii(`Could not initialize Nested App Auth bridge (${A})`)}return _.logger.info(`Nested App Auth Bridge available: ${_.available}`),_.available})()}}return ve.MODULE_NAME="",ve.ID="NestedAppOperatingContext",ve})(),bg=(()=>{class ve extends um{getModuleName(){return ve.MODULE_NAME}getId(){return ve.ID}initialize(){var _=this;return z(function*(){return _.available=typeof window<"u",_.available})()}}return ve.MODULE_NAME="",ve.ID="StandardOperatingContext",ve})();function Kh(ve){return(new TextDecoder).decode(function af(ve){let p=ve.replace(/-/g,"+").replace(/_/g,"/");switch(p.length%4){case 0:break;case 2:p+="==";break;case 3:p+="=";break;default:throw le(om)}const _=atob(p);return Uint8Array.from(_,A=>A.codePointAt(0)||0)}(ve))}class Uv{constructor(){this.dbName=Of,this.version=1,this.tableName=cy,this.dbOpen=!1}open(){var p=this;return z(function*(){return new Promise((_,A)=>{const Q=window.indexedDB.open(p.dbName,p.version);Q.addEventListener("upgradeneeded",de=>{de.target.result.createObjectStore(p.tableName)}),Q.addEventListener("success",de=>{p.db=de.target.result,p.dbOpen=!0,_()}),Q.addEventListener("error",()=>A(le(Vd)))})})()}closeConnection(){const p=this.db;p&&this.dbOpen&&(p.close(),this.dbOpen=!1)}validateDbIsOpen(){var p=this;return z(function*(){if(!p.dbOpen)return p.open()})()}getItem(p){var _=this;return z(function*(){return yield _.validateDbIsOpen(),new Promise((A,Q)=>{if(!_.db)return Q(le(Ws));const He=_.db.transaction([_.tableName],"readonly").objectStore(_.tableName).get(p);He.addEventListener("success",wt=>{const Dt=wt;_.closeConnection(),A(Dt.target.result)}),He.addEventListener("error",wt=>{_.closeConnection(),Q(wt)})})})()}setItem(p,_){var A=this;return z(function*(){return yield A.validateDbIsOpen(),new Promise((Q,de)=>{if(!A.db)return de(le(Ws));const wt=A.db.transaction([A.tableName],"readwrite").objectStore(A.tableName).put(_,p);wt.addEventListener("success",()=>{A.closeConnection(),Q()}),wt.addEventListener("error",Dt=>{A.closeConnection(),de(Dt)})})})()}removeItem(p){var _=this;return z(function*(){return yield _.validateDbIsOpen(),new Promise((A,Q)=>{if(!_.db)return Q(le(Ws));const He=_.db.transaction([_.tableName],"readwrite").objectStore(_.tableName).delete(p);He.addEventListener("success",()=>{_.closeConnection(),A()}),He.addEventListener("error",wt=>{_.closeConnection(),Q(wt)})})})()}getKeys(){var p=this;return z(function*(){return yield p.validateDbIsOpen(),new Promise((_,A)=>{if(!p.db)return A(le(Ws));const be=p.db.transaction([p.tableName],"readonly").objectStore(p.tableName).getAllKeys();be.addEventListener("success",He=>{const wt=He;p.closeConnection(),_(wt.target.result)}),be.addEventListener("error",He=>{p.closeConnection(),A(He)})})})()}containsKey(p){var _=this;return z(function*(){return yield _.validateDbIsOpen(),new Promise((A,Q)=>{if(!_.db)return Q(le(Ws));const He=_.db.transaction([_.tableName],"readonly").objectStore(_.tableName).count(p);He.addEventListener("success",wt=>{const Dt=wt;_.closeConnection(),A(1===Dt.target.result)}),He.addEventListener("error",wt=>{_.closeConnection(),Q(wt)})})})()}deleteDatabase(){var p=this;return z(function*(){return p.db&&p.dbOpen&&p.closeConnection(),new Promise((_,A)=>{const Q=window.indexedDB.deleteDatabase(Of),de=setTimeout(()=>A(!1),200);Q.addEventListener("success",()=>(clearTimeout(de),_(!0))),Q.addEventListener("blocked",()=>(clearTimeout(de),_(!0))),Q.addEventListener("error",()=>(clearTimeout(de),A(!1)))})})()}}class Y1{constructor(){this.cache=new Map}getItem(p){return this.cache.get(p)||null}setItem(p,_){this.cache.set(p,_)}removeItem(p){this.cache.delete(p)}getKeys(){const p=[];return this.cache.forEach((_,A)=>{p.push(A)}),p}containsKey(p){return this.cache.has(p)}clear(){this.cache.clear()}}class i2{constructor(p){this.inMemoryCache=new Y1,this.indexedDBCache=new Uv,this.logger=p}handleDatabaseAccessError(p){if(!(p instanceof te&&p.errorCode===Vd))throw p;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(p){var _=this;return z(function*(){const A=_.inMemoryCache.getItem(p);if(!A)try{return _.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield _.indexedDBCache.getItem(p)}catch(Q){_.handleDatabaseAccessError(Q)}return A})()}setItem(p,_){var A=this;return z(function*(){A.inMemoryCache.setItem(p,_);try{yield A.indexedDBCache.setItem(p,_)}catch(Q){A.handleDatabaseAccessError(Q)}})()}removeItem(p){var _=this;return z(function*(){_.inMemoryCache.removeItem(p);try{yield _.indexedDBCache.removeItem(p)}catch(A){_.handleDatabaseAccessError(A)}})()}getKeys(){var p=this;return z(function*(){const _=p.inMemoryCache.getKeys();if(0===_.length)try{return p.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield p.indexedDBCache.getKeys()}catch(A){p.handleDatabaseAccessError(A)}return _})()}containsKey(p){var _=this;return z(function*(){const A=_.inMemoryCache.containsKey(p);if(!A)try{return _.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield _.indexedDBCache.containsKey(p)}catch(Q){_.handleDatabaseAccessError(Q)}return A})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var p=this;return z(function*(){try{p.logger.verbose("Deleting persistent keystore");const _=yield p.indexedDBCache.deleteDatabase();return _&&p.logger.verbose("Persistent keystore deleted"),_}catch(_){return p.handleDatabaseAccessError(_),!1}})()}}let gy=(()=>{class ve{constructor(_,A){this.logger=_,function r2(ve){if(!("crypto"in window))throw ve.error("BrowserCrypto: crypto interface is unavailable"),le(at);ve.verbose("BrowserCrypto: modern crypto interface available")}(_),this.cache=new i2(this.logger),this.performanceClient=A}createNewGuid(){return Cp()}base64Encode(_){return kv(_)}base64Decode(_){return Kh(_)}base64UrlEncode(_){return oh(_)}encodeKid(_){return this.base64UrlEncode(JSON.stringify({kid:_}))}getPublicKeyThumbprint(_){var A=this;return z(function*(){const Q=A.performanceClient?.startMeasurement(It.CryptoOptsGetPublicKeyThumbprint,_.correlationId),de=yield function Ea(ve,p){return G1.apply(this,arguments)}(ve.EXTRACTABLE,ve.POP_KEY_USAGES),be=yield q1(de.publicKey),wt=gE({e:be.e,kty:be.kty,n:be.n}),Dt=yield A.hashString(wt),dn=yield q1(de.privateKey),ti=yield function hE(ve,p,_){return dy.apply(this,arguments)}(dn,!1,["sign"]);return yield A.cache.setItem(Dt,{privateKey:ti,publicKey:de.publicKey,requestMethod:_.resourceRequestMethod,requestUri:_.resourceRequestUri}),Q&&Q.end({success:!0}),Dt})()}removeTokenBindingKey(_){var A=this;return z(function*(){return yield A.cache.removeItem(_),!(yield A.cache.containsKey(_))})()}clearKeystore(){var _=this;return z(function*(){_.cache.clearInMemory();try{return yield _.cache.clearPersistent(),!0}catch(A){return A instanceof Error?_.logger.error(`Clearing keystore failed with error: ${A.message}`):_.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(_,A,Q,de){var be=this;return z(function*(){const He=be.performanceClient?.startMeasurement(It.CryptoOptsSignJwt,de),wt=yield be.cache.getItem(A);if(!wt)throw le(Kl);const Dt=yield q1(wt.publicKey),dn=gE(Dt),ti=oh(JSON.stringify({kid:A})),yo=oh(Th.getShrHeaderString({...Q?.header,alg:Dt.alg,kid:ti}));_.cnf={jwk:JSON.parse(dn)};const Ja=`${yo}.${oh(JSON.stringify(_))}`,Dc=(new TextEncoder).encode(Ja),Yh=yield function hy(ve,p){return pE.apply(this,arguments)}(wt.privateKey,Dc),vy=`${Ja}.${yg(new Uint8Array(Yh))}`;return He&&He.end({success:!0}),vy})()}hashString(_){return z(function*(){return tA(_)})()}}return ve.POP_KEY_USAGES=["sign","verify"],ve.EXTRACTABLE=!0,ve})();function gE(ve){return JSON.stringify(ve,Object.keys(ve).sort())}class mE{constructor(p){this.validateWindowStorage(p),this.windowStorage=window[p]}validateWindowStorage(p){if(p!==an.LocalStorage&&p!==an.SessionStorage||!window[p])throw Us(am)}getItem(p){return this.windowStorage.getItem(p)}setItem(p,_){this.windowStorage.setItem(p,_)}removeItem(p){this.windowStorage.removeItem(p)}getKeys(){return Object.keys(this.windowStorage)}containsKey(p){return this.windowStorage.hasOwnProperty(p)}}function W1(ve,p){if(!p)return null;try{return xc.parseRequestState(ve,p).libraryState.meta}catch{throw xn(Hi)}}class Q1 extends Mr{constructor(p,_,A,Q,de,be){super(p,A,Q,de),this.COOKIE_LIFE_MULTIPLIER=864e5,this.cacheConfig=_,this.logger=Q,this.internalStorage=new Y1,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),_.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=be}setupBrowserStorage(p){switch(p){case an.LocalStorage:case an.SessionStorage:try{return new mE(p)}catch(_){this.logger.verbose(_);break}}return this.cacheConfig.cacheLocation=an.MemoryStorage,new Y1}setupTemporaryCacheStorage(p,_){switch(_){case an.LocalStorage:case an.SessionStorage:try{return new mE(p||an.SessionStorage)}catch(A){return this.logger.verbose(A),this.internalStorage}default:return this.internalStorage}}migrateCacheEntries(){const _=`${T.CACHE_PREFIX}.${G.CLIENT_INFO}`,A=`${T.CACHE_PREFIX}.${G.ERROR}`,Q=`${T.CACHE_PREFIX}.${G.ERROR_DESC}`,Dt=[this.browserStorage.getItem(`${T.CACHE_PREFIX}.${G.ID_TOKEN}`),this.browserStorage.getItem(_),this.browserStorage.getItem(A),this.browserStorage.getItem(Q)];[G.ID_TOKEN,G.CLIENT_INFO,G.ERROR,G.ERROR_DESC].forEach((ti,ai)=>{const yo=Dt[ai];yo&&this.setTemporaryCache(ti,yo,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const p=this.getItem("msal.account.keys"),_=this.getItem(`msal.token.keys.${this.clientId}`);p&&_?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(Q=>{if(this.isCredentialKey(Q)){const de=this.getItem(Q);if(de){const be=this.validateAndParseJson(de);if(be&&be.hasOwnProperty("credentialType"))switch(be.credentialType){case tt.ID_TOKEN:if(ul(be)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${Q} found, saving key to token key map`);const wt=this.updateCredentialCacheKey(Q,be);return void this.addTokenKey(wt,tt.ID_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${Q}`);break;case tt.ACCESS_TOKEN:case tt.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(ll(be)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${Q} found, saving key to token key map`);const wt=this.updateCredentialCacheKey(Q,be);return void this.addTokenKey(wt,tt.ACCESS_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${Q}`);break;case tt.REFRESH_TOKEN:if(Cs(be)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${Q} found, saving key to token key map`);const wt=this.updateCredentialCacheKey(Q,be);return void this.addTokenKey(wt,tt.REFRESH_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${Q}`)}}}if(this.isAccountKey(Q)){const de=this.getItem(Q);if(de){const be=this.validateAndParseJson(de);be&&nc.isAccountEntity(be)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${Q} found, saving key to account key map`),this.addAccountKeyToMap(Q))}}})}validateAndParseJson(p){try{const _=JSON.parse(p);return _&&"object"==typeof _?_:null}catch{return null}}getItem(p){return this.browserStorage.getItem(p)}setItem(p,_){this.browserStorage.setItem(p,_)}getAccount(p,_){this.logger.trace("BrowserCacheManager.getAccount called");const A=this.getCachedAccountEntity(p);return this.updateOutdatedCachedAccount(p,A,_)}getCachedAccountEntity(p){const _=this.getItem(p);if(!_)return this.removeAccountKeyFromMap(p),null;const A=this.validateAndParseJson(_);return A&&nc.isAccountEntity(A)?Mr.toObject(new nc,A):(this.removeAccountKeyFromMap(p),null)}setAccount(p){this.logger.trace("BrowserCacheManager.setAccount called");const _=p.generateAccountKey();this.setItem(_,JSON.stringify(p)),this.addAccountKeyToMap(_)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const p=this.getItem("msal.account.keys");return p?JSON.parse(p):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(p){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${p}`);const _=this.getAccountKeys();-1===_.indexOf(p)?(_.push(p),this.setItem("msal.account.keys",JSON.stringify(_)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(p){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${p}`);const _=this.getAccountKeys(),A=_.indexOf(p);A>-1?(_.splice(A,1),this.setItem("msal.account.keys",JSON.stringify(_)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(p){var _=()=>super.removeAccount,A=this;return z(function*(){_().call(A,p),A.removeAccountKeyFromMap(p)})()}removeOutdatedAccount(p){this.removeItem(p),this.removeAccountKeyFromMap(p)}removeIdToken(p){super.removeIdToken(p),this.removeTokenKey(p,tt.ID_TOKEN)}removeAccessToken(p){var _=()=>super.removeAccessToken,A=this;return z(function*(){_().call(A,p),A.removeTokenKey(p,tt.ACCESS_TOKEN)})()}removeRefreshToken(p){super.removeRefreshToken(p),this.removeTokenKey(p,tt.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const p=this.getItem(`msal.token.keys.${this.clientId}`);if(p){const _=this.validateAndParseJson(p);if(_&&_.hasOwnProperty("idToken")&&_.hasOwnProperty("accessToken")&&_.hasOwnProperty("refreshToken"))return _;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(p,_){this.logger.trace("BrowserCacheManager addTokenKey called");const A=this.getTokenKeys();switch(_){case tt.ID_TOKEN:-1===A.idToken.indexOf(p)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),A.idToken.push(p));break;case tt.ACCESS_TOKEN:-1===A.accessToken.indexOf(p)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),A.accessToken.push(p));break;case tt.REFRESH_TOKEN:-1===A.refreshToken.indexOf(p)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),A.refreshToken.push(p));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${_}`),xn(Ho)}this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(A))}removeTokenKey(p,_){this.logger.trace("BrowserCacheManager removeTokenKey called");const A=this.getTokenKeys();switch(_){case tt.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${p} from map`);const Q=A.idToken.indexOf(p);Q>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),A.idToken.splice(Q,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case tt.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${p} from map`);const de=A.accessToken.indexOf(p);de>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),A.accessToken.splice(de,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case tt.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${p} from map`);const be=A.refreshToken.indexOf(p);be>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),A.refreshToken.splice(be,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${_}`),xn(Ho)}this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(A))}getIdTokenCredential(p){const _=this.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(p,tt.ID_TOKEN),null;const A=this.validateAndParseJson(_);return A&&ul(A)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),A):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(p,tt.ID_TOKEN),null)}setIdTokenCredential(p){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const _=rs(p);this.setItem(_,JSON.stringify(p)),this.addTokenKey(_,tt.ID_TOKEN)}getAccessTokenCredential(p){const _=this.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(p,tt.ACCESS_TOKEN),null;const A=this.validateAndParseJson(_);return A&&ll(A)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),A):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(p,tt.ACCESS_TOKEN),null)}setAccessTokenCredential(p){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const _=rs(p);this.setItem(_,JSON.stringify(p)),this.addTokenKey(_,tt.ACCESS_TOKEN)}getRefreshTokenCredential(p){const _=this.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(p,tt.REFRESH_TOKEN),null;const A=this.validateAndParseJson(_);return A&&Cs(A)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),A):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(p,tt.REFRESH_TOKEN),null)}setRefreshTokenCredential(p){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const _=rs(p);this.setItem(_,JSON.stringify(p)),this.addTokenKey(_,tt.REFRESH_TOKEN)}getAppMetadata(p){const _=this.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const A=this.validateAndParseJson(_);return A&&function At(ve,p){return!!p&&0===ve.indexOf(_t)&&p.hasOwnProperty("clientId")&&p.hasOwnProperty("environment")}(p,A)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),A):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(p){this.logger.trace("BrowserCacheManager.setAppMetadata called");const _=function We({environment:ve,clientId:p}){return[_t,ve,p].join(Le.CACHE_KEY_SEPARATOR).toLowerCase()}(p);this.setItem(_,JSON.stringify(p))}getServerTelemetry(p){const _=this.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const A=this.validateAndParseJson(_);return A&&function Ga(ve,p){const _=0===ve.indexOf(Gt.CACHE_KEY);let A=!0;return p&&(A=p.hasOwnProperty("failedRequests")&&p.hasOwnProperty("errors")&&p.hasOwnProperty("cacheHits")),_&&A}(p,A)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),A):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(p,_){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(p,JSON.stringify(_))}getAuthorityMetadata(p){const _=this.internalStorage.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const A=this.validateAndParseJson(_);return A&&function ut(ve,p){return!!p&&0===ve.indexOf("authority-metadata")&&p.hasOwnProperty("aliases")&&p.hasOwnProperty("preferred_cache")&&p.hasOwnProperty("preferred_network")&&p.hasOwnProperty("canonical_authority")&&p.hasOwnProperty("authorization_endpoint")&&p.hasOwnProperty("token_endpoint")&&p.hasOwnProperty("issuer")&&p.hasOwnProperty("aliasesFromNetwork")&&p.hasOwnProperty("endpointsFromNetwork")&&p.hasOwnProperty("expiresAt")&&p.hasOwnProperty("jwks_uri")}(p,A)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),A):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(_=>this.isAuthorityMetadata(_))}setWrapperMetadata(p,_){this.internalStorage.setItem("wrapper.sku",p),this.internalStorage.setItem("wrapper.version",_)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||T.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||T.EMPTY_STRING]}setAuthorityMetadata(p,_){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(p,JSON.stringify(_))}getActiveAccount(){const p=this.generateCacheKey(G.ACTIVE_ACCOUNT_FILTERS),_=this.getItem(p);if(!_){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const Q=this.generateCacheKey(G.ACTIVE_ACCOUNT),de=this.getItem(Q);if(!de)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const be=this.getAccountInfoFilteredBy({localAccountId:de});return be?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(be),be):null}const A=this.validateAndParseJson(_);return A?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:A.homeAccountId,localAccountId:A.localAccountId,tenantId:A.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(p){const _=this.generateCacheKey(G.ACTIVE_ACCOUNT_FILTERS),A=this.generateCacheKey(G.ACTIVE_ACCOUNT);p?(this.logger.verbose("setActiveAccount: Active account set"),this.browserStorage.setItem(_,JSON.stringify({homeAccountId:p.homeAccountId,localAccountId:p.localAccountId,tenantId:p.tenantId})),this.browserStorage.setItem(A,p.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(_),this.browserStorage.removeItem(A))}getThrottlingCache(p){const _=this.getItem(p);if(!_)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const A=this.validateAndParseJson(_);return A&&function hl(ve,p){let _=!1;ve&&(_=0===ve.indexOf("throttling"));let A=!0;return p&&(A=p.hasOwnProperty("throttleTime")),_&&A}(p,A)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),A):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(p,_){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(p,JSON.stringify(_))}getTemporaryCache(p,_){const A=_?this.generateCacheKey(p):p;if(this.cacheConfig.storeAuthStateInCookie){const de=this.getItemCookie(A);if(de)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),de}const Q=this.temporaryCacheStorage.getItem(A);if(!Q){if(this.cacheConfig.cacheLocation===an.LocalStorage){const de=this.browserStorage.getItem(A);if(de)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),de}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),Q}setTemporaryCache(p,_,A){const Q=A?this.generateCacheKey(p):p;this.temporaryCacheStorage.setItem(Q,_),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(Q,_))}removeItem(p){this.browserStorage.removeItem(p)}removeTemporaryItem(p){this.temporaryCacheStorage.removeItem(p),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(p))}getKeys(){return this.browserStorage.getKeys()}clear(){var p=this;return z(function*(){yield p.removeAllAccounts(),p.removeAppMetadata(),p.temporaryCacheStorage.getKeys().forEach(_=>{(-1!==_.indexOf(T.CACHE_PREFIX)||-1!==_.indexOf(p.clientId))&&p.removeTemporaryItem(_)}),p.browserStorage.getKeys().forEach(_=>{(-1!==_.indexOf(T.CACHE_PREFIX)||-1!==_.indexOf(p.clientId))&&p.browserStorage.removeItem(_)}),p.internalStorage.clear()})()}clearTokensAndKeysWithClaims(p,_){var A=this;return z(function*(){p.addQueueMeasurement(It.ClearTokensAndKeysWithClaims,_);const Q=A.getTokenKeys(),de=[];Q.accessToken.forEach(be=>{const He=A.getAccessTokenCredential(be);He?.requestedClaimsHash&&be.includes(He.requestedClaimsHash.toLowerCase())&&de.push(A.removeAccessToken(be))}),yield Promise.all(de),de.length>0&&A.logger.warning(`${de.length} access tokens with claims in the cache keys have been removed from the cache.`)})()}setItemCookie(p,_,A){let Q=`${encodeURIComponent(p)}=${encodeURIComponent(_)};path=/;SameSite=Lax;`;A&&(Q+=`expires=${this.getCookieExpirationTime(A)};`),this.cacheConfig.secureCookies&&(Q+="Secure;"),document.cookie=Q}getItemCookie(p){const _=`${encodeURIComponent(p)}=`,A=document.cookie.split(";");for(let Q=0;Q<A.length;Q++){let de=A[Q];for(;" "===de.charAt(0);)de=de.substring(1);if(0===de.indexOf(_))return decodeURIComponent(de.substring(_.length,de.length))}return T.EMPTY_STRING}clearMsalCookies(){const p=`${T.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(A=>{for(;" "===A.charAt(0);)A=A.substring(1);if(0===A.indexOf(p)){const Q=A.split("=")[0];this.clearItemCookie(Q)}})}clearItemCookie(p){this.setItemCookie(p,T.EMPTY_STRING,-1)}getCookieExpirationTime(p){return new Date((new Date).getTime()+p*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(p){return this.validateAndParseJson(p)?JSON.stringify(p):_c.startsWith(p,T.CACHE_PREFIX)||_c.startsWith(p,G.ADAL_ID_TOKEN)?p:`${T.CACHE_PREFIX}.${this.clientId}.${p}`}generateAuthorityKey(p){const{libraryState:{id:_}}=xc.parseRequestState(this.cryptoImpl,p);return this.generateCacheKey(`authority.${_}`)}generateNonceKey(p){const{libraryState:{id:_}}=xc.parseRequestState(this.cryptoImpl,p);return this.generateCacheKey(`nonce.id_token.${_}`)}generateStateKey(p){const{libraryState:{id:_}}=xc.parseRequestState(this.cryptoImpl,p);return this.generateCacheKey(`request.state.${_}`)}getCachedAuthority(p){const _=this.generateStateKey(p),A=this.getTemporaryCache(_);if(!A)return null;const Q=this.generateAuthorityKey(A);return this.getTemporaryCache(Q)}updateCacheEntries(p,_,A,Q,de){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const be=this.generateStateKey(p);this.setTemporaryCache(be,p,!1);const He=this.generateNonceKey(p);this.setTemporaryCache(He,_,!1);const wt=this.generateAuthorityKey(p);this.setTemporaryCache(wt,A,!1),de?this.setTemporaryCache("ccs.credential",JSON.stringify({credential:de.homeAccountId,type:"home_account_id"}),!0):Q&&this.setTemporaryCache("ccs.credential",JSON.stringify({credential:Q,type:"UPN"}),!0)}resetRequestCache(p){this.logger.trace("BrowserCacheManager.resetRequestCache called"),p&&(this.temporaryCacheStorage.getKeys().forEach(_=>{-1!==_.indexOf(p)&&this.removeTemporaryItem(_)}),this.removeTemporaryItem(this.generateStateKey(p)),this.removeTemporaryItem(this.generateNonceKey(p)),this.removeTemporaryItem(this.generateAuthorityKey(p))),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.correlationId")),this.removeTemporaryItem(this.generateCacheKey("ccs.credential")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cleanRequestByState(p){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),p){const _=this.generateStateKey(p),A=this.temporaryCacheStorage.getItem(_);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${A}`),this.resetRequestCache(A||T.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(p){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(_=>{if(-1===_.indexOf("request.state"))return;const A=this.temporaryCacheStorage.getItem(_);if(!A)return;const Q=W1(this.cryptoImpl,A);Q&&Q.interactionType===p&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${A}`),this.resetRequestCache(A))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(p){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const _=kv(JSON.stringify(p));this.setTemporaryCache("request.params",_,!0)}getCachedRequest(p){this.logger.trace("BrowserCacheManager.getCachedRequest called");const _=this.getTemporaryCache("request.params",!0);if(!_)throw le(ds);let A;try{A=JSON.parse(Kh(_))}catch(Q){throw this.logger.errorPii(`Attempted to parse: ${_}`),this.logger.error(`Parsing cached token request threw with error: ${Q}`),le(Ss)}if(this.removeTemporaryItem(this.generateCacheKey("request.params")),!A.authority){const Q=this.generateAuthorityKey(p),de=this.getTemporaryCache(Q);if(!de)throw le(Vc);A.authority=de}return A}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const p=this.getTemporaryCache("request.native",!0);return p?this.validateAndParseJson(p)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(p){const _=this.getInteractionInProgress();return p?_===this.clientId:!!_}getInteractionInProgress(){return this.getTemporaryCache(`${T.CACHE_PREFIX}.interaction.status`,!1)}setInteractionInProgress(p){const _=`${T.CACHE_PREFIX}.interaction.status`;if(p){if(this.getInteractionInProgress())throw le(Nt);this.setTemporaryCache(_,this.clientId,!1)}else!p&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(_)}getLegacyLoginHint(){const p=this.getTemporaryCache(G.ADAL_ID_TOKEN);p&&(this.browserStorage.removeItem(G.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const _=this.getTemporaryCache(G.ID_TOKEN,!0);_&&(this.browserStorage.removeItem(this.generateCacheKey(G.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const A=_||p;if(A){const Q=qs(A,Kh);if(Q.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),Q.preferred_username;if(Q.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),Q.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(p,_){const A=rs(_);if(p!==A){const Q=this.getItem(p);if(Q)return this.browserStorage.removeItem(p),this.setItem(A,Q),this.logger.verbose(`Updated an outdated ${_.credentialType} cache key`),A;this.logger.error(`Attempted to update an outdated ${_.credentialType} cache key but no item matching the outdated key was found in storage`)}return p}hydrateCache(p,_){var A=this;return z(function*(){const Q=ks(p.account?.homeAccountId,p.account?.environment,p.idToken,A.clientId,p.tenantId);let de;_.claims&&(de=yield A.cryptoImpl.hashString(_.claims));const be=Ia(p.account?.homeAccountId,p.account.environment,p.accessToken,A.clientId,p.tenantId,p.scopes.join(" "),p.expiresOn?p.expiresOn.getTime()/1e3:0,p.extExpiresOn?p.extExpiresOn.getTime()/1e3:0,Kh,void 0,p.tokenType,void 0,_.sshKid,_.claims,de);return A.saveCacheRecord({idToken:Q,accessToken:be})})()}saveCacheRecord(p,_,A){var Q=()=>super.saveCacheRecord,de=this;return z(function*(){try{yield Q().call(de,p,_,A)}catch(be){if(be instanceof Tc&&de.performanceClient&&A)try{const He=de.getTokenKeys();de.performanceClient.addFields({cacheRtCount:He.refreshToken.length,cacheIdCount:He.idToken.length,cacheAtCount:He.accessToken.length},A)}catch{}throw be}})()}}const o2=(ve,p)=>new Q1(ve,{cacheLocation:an.MemoryStorage,temporaryCacheLocation:an.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},ia,p);function a2(ve,p,_,A){return ve.verbose("getAllAccounts called"),_?p.getAllAccounts(A):[]}function _E(ve,p,_){if(p.trace("getAccount called"),0===Object.keys(ve).length)return p.warning("getAccount: No accountFilter provided"),null;const A=_.getAccountInfoFilteredBy(ve);return A?(p.verbose("getAccount: Account matching provided filter found, returning"),A):(p.verbose("getAccount: No matching account found, returning null"),null)}function s2(ve,p,_){if(p.trace("getAccountByUsername called"),!ve)return p.warning("getAccountByUsername: No username provided"),null;const A=_.getAccountInfoFilteredBy({username:ve});return A?(p.verbose("getAccountByUsername: Account matching username found, returning"),p.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${ve}`),A):(p.verbose("getAccountByUsername: No matching account found, returning null"),null)}function c2(ve,p,_){if(p.trace("getAccountByHomeId called"),!ve)return p.warning("getAccountByHomeId: No homeAccountId provided"),null;const A=_.getAccountInfoFilteredBy({homeAccountId:ve});return A?(p.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),p.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${ve}`),A):(p.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function Bv(ve,p,_){if(p.trace("getAccountByLocalId called"),!ve)return p.warning("getAccountByLocalId: No localAccountId provided"),null;const A=_.getAccountInfoFilteredBy({localAccountId:ve});return A?(p.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),p.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${ve}`),A):(p.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function rA(ve,p){p.setActiveAccount(ve)}function l2(ve){return ve.getActiveAccount()}const $i={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};class iA{constructor(p,_){this.eventCallbacks=new Map,this.logger=p,this.browserCrypto=_,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(p){if(typeof window<"u"){const _=Cp();return this.eventCallbacks.set(_,p),this.logger.verbose(`Event callback registered with id: ${_}`),_}return null}removeEventCallback(p){this.eventCallbacks.delete(p),this.logger.verbose(`Event callback ${p} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(p,_,A,Q){if(typeof window<"u"){const de={eventType:p,interactionType:_||null,payload:A||null,error:Q||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${p}`),this.eventCallbacks.forEach((be,He)=>{this.logger.verbose(`Emitting event to callback ${He}: ${p}`),be.apply(null,[de])})}}handleAccountCacheChange(p){try{p.key?.includes(G.ACTIVE_ACCOUNT_FILTERS)&&this.emitEvent($i.ACTIVE_ACCOUNT_CHANGED);const _=p.newValue||p.oldValue;if(!_)return;const A=JSON.parse(_);if("object"!=typeof A||!nc.isAccountEntity(A))return;const de=Mr.toObject(new nc,A).getAccountInfo();!p.oldValue&&p.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent($i.ACCOUNT_ADDED,void 0,de)):!p.newValue&&p.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent($i.ACCOUNT_REMOVED,void 0,de))}catch{return}}}class X1{constructor(p,_,A,Q,de,be,He,wt,Dt){this.config=p,this.browserStorage=_,this.browserCrypto=A,this.networkClient=this.config.system.networkClient,this.eventHandler=de,this.navigationClient=be,this.nativeMessageHandler=wt,this.correlationId=Dt||Cp(),this.logger=Q.clone(we.MSAL_SKU,Mc,this.correlationId),this.performanceClient=He}clearCacheOnLogout(p){var _=this;return z(function*(){if(p){nc.accountInfoIsEqual(p,_.browserStorage.getActiveAccount(),!1)&&(_.logger.verbose("Setting active account to null"),_.browserStorage.setActiveAccount(null));try{yield _.browserStorage.removeAccount(nc.generateAccountCacheKey(p)),_.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{_.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{_.logger.verbose("No account provided in logout request, clearing all cache items.",_.correlationId),yield _.browserStorage.clear(),yield _.browserCrypto.clearKeystore()}catch{_.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(p){this.logger.verbose("getRedirectUri called");const _=p||this.config.auth.redirectUri||Pu();return Go.getAbsoluteUrl(_,Pu())}initializeServerTelemetryManager(p,_){this.logger.verbose("initializeServerTelemetryManager called");const A={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:p,forceRefresh:_||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new zd(A,this.browserStorage)}getDiscoveredAuthority(p){var _=this;return z(function*(){const{account:A}=p,Q=p.requestExtraQueryParameters&&p.requestExtraQueryParameters.hasOwnProperty("instance_aware")?p.requestExtraQueryParameters.instance_aware:void 0;_.performanceClient.addQueueMeasurement(It.StandardInteractionClientGetDiscoveredAuthority,_.correlationId);const de={protocolMode:_.config.auth.protocolMode,OIDCOptions:_.config.auth.OIDCOptions,knownAuthorities:_.config.auth.knownAuthorities,cloudDiscoveryMetadata:_.config.auth.cloudDiscoveryMetadata,authorityMetadata:_.config.auth.authorityMetadata,skipAuthorityMetadataCache:_.config.auth.skipAuthorityMetadataCache},be=p.requestAuthority||_.config.auth.authority,wt=A&&(Q?.length?"true"===Q:_.config.auth.instanceAware)?_.config.auth.authority.replace(Go.getDomainFromUrl(be),A.environment):be,Dt=$c.generateAuthority(wt,p.requestAzureCloudOptions||_.config.auth.azureCloudOptions),dn=yield Wr(bd,It.AuthorityFactoryCreateDiscoveredInstance,_.logger,_.performanceClient,_.correlationId)(Dt,_.config.system.networkClient,_.browserStorage,de,_.logger,_.correlationId,_.performanceClient);if(A&&!dn.isAlias(A.environment))throw La(Lu);return dn})()}}const yE=32;function oA(ve,p,_){return vE.apply(this,arguments)}function vE(){return vE=z(function*(ve,p,_){ve.addQueueMeasurement(It.GeneratePkceCodes,_);const A=_p(c3,It.GenerateCodeVerifier,p,ve,_)(ve,p,_);return{verifier:A,challenge:yield Wr(p7,It.GenerateCodeChallengeFromVerifier,p,ve,_)(A,ve,p,_)}}),vE.apply(this,arguments)}function c3(ve,p,_){try{const A=new Uint8Array(yE);return _p(Xm,It.GetRandomValues,p,ve,_)(A),yg(A)}catch{throw le(De)}}function p7(ve,p,_,A){return aA.apply(this,arguments)}function aA(){return aA=z(function*(ve,p,_,A){p.addQueueMeasurement(It.GenerateCodeChallengeFromVerifier,A);try{const Q=yield Wr(uE,It.Sha256Digest,_,p,A)(ve,p,A);return yg(new Uint8Array(Q))}catch{throw le(De)}}),aA.apply(this,arguments)}function zv(ve,p,_,A){return Z1.apply(this,arguments)}function Z1(){return Z1=z(function*(ve,p,_,A){_.addQueueMeasurement(It.InitializeBaseRequest,ve.correlationId);const Q=ve.authority||p.auth.authority,de=[...ve&&ve.scopes||[]],be={...ve,correlationId:ve.correlationId,authority:Q,scopes:de};if(be.authenticationScheme){if(be.authenticationScheme===Ht.SSH){if(!ve.sshJwk)throw La(ls);if(!ve.sshKid)throw La(os)}A.verbose(`Authentication Scheme set to "${be.authenticationScheme}" as configured in Auth request`)}else be.authenticationScheme=Ht.BEARER,A.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return p.cache.claimsBasedCachingEnabled&&ve.claims&&!_c.isEmptyObj(ve.claims)&&(be.requestedClaimsHash=yield tA(ve.claims)),be}),Z1.apply(this,arguments)}function CE(ve,p,_,A,Q){return J1.apply(this,arguments)}function J1(){return J1=z(function*(ve,p,_,A,Q){A.addQueueMeasurement(It.InitializeSilentRequest,ve.correlationId);const de=yield Wr(zv,It.InitializeBaseRequest,Q,A,ve.correlationId)(ve,_,A,Q);return{...ve,...de,account:p,forceRefresh:ve.forceRefresh||!1}}),J1.apply(this,arguments)}class my extends X1{initializeAuthorizationCodeRequest(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.StandardInteractionClientInitializeAuthorizationCodeRequest,_.correlationId);const A=yield Wr(oA,It.GeneratePkceCodes,_.logger,_.performanceClient,_.correlationId)(_.performanceClient,_.logger,_.correlationId),Q={...p,redirectUri:p.redirectUri,code:T.EMPTY_STRING,codeVerifier:A.verifier};return p.codeChallenge=A.challenge,p.codeChallengeMethod=T.S256_CODE_CHALLENGE_METHOD,Q})()}initializeLogoutRequest(p){this.logger.verbose("initializeLogoutRequest called",p?.correlationId);const _={correlationId:this.correlationId||Cp(),...p};if(p)if(p.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(p.account){const A=this.getLogoutHintFromIdTokenClaims(p.account);A&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),_.logoutHint=A)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return p&&null===p.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",_.correlationId):p&&p.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",_.correlationId),_.postLogoutRedirectUri=Go.getAbsoluteUrl(p.postLogoutRedirectUri,Pu())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",_.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",_.correlationId),_.postLogoutRedirectUri=Go.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Pu())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",_.correlationId),_.postLogoutRedirectUri=Go.getAbsoluteUrl(Pu(),Pu())),_}getLogoutHintFromIdTokenClaims(p){const _=p.idTokenClaims;if(_){if(_.login_hint)return _.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.StandardInteractionClientCreateAuthCodeClient,_.correlationId);const A=yield Wr(_.getClientConfiguration.bind(_),It.StandardInteractionClientGetClientConfiguration,_.logger,_.performanceClient,_.correlationId)(p);return new zr(A,_.performanceClient)})()}getClientConfiguration(p){var _=this;return z(function*(){const{serverTelemetryManager:A,requestAuthority:Q,requestAzureCloudOptions:de,requestExtraQueryParameters:be,account:He}=p;_.performanceClient.addQueueMeasurement(It.StandardInteractionClientGetClientConfiguration,_.correlationId);const wt=yield Wr(_.getDiscoveredAuthority.bind(_),It.StandardInteractionClientGetDiscoveredAuthority,_.logger,_.performanceClient,_.correlationId)({requestAuthority:Q,requestAzureCloudOptions:de,requestExtraQueryParameters:be,account:He}),Dt=_.config.system.loggerOptions;return{authOptions:{clientId:_.config.auth.clientId,authority:wt,clientCapabilities:_.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:_.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:Dt.loggerCallback,piiLoggingEnabled:Dt.piiLoggingEnabled,logLevel:Dt.logLevel,correlationId:_.correlationId},cacheOptions:{claimsBasedCachingEnabled:_.config.cache.claimsBasedCachingEnabled},cryptoInterface:_.browserCrypto,networkInterface:_.networkClient,storageInterface:_.browserStorage,serverTelemetryManager:A,libraryInfo:{sku:we.MSAL_SKU,version:Mc,cpu:T.EMPTY_STRING,os:T.EMPTY_STRING},telemetry:_.config.telemetry}})()}initializeAuthorizationRequest(p,_){var A=this;return z(function*(){A.performanceClient.addQueueMeasurement(It.StandardInteractionClientInitializeAuthorizationRequest,A.correlationId);const Q=A.getRedirectUri(p.redirectUri),be=xc.setRequestState(A.browserCrypto,p&&p.state||T.EMPTY_STRING,{interactionType:_}),wt={...yield Wr(zv,It.InitializeBaseRequest,A.logger,A.performanceClient,A.correlationId)({...p,correlationId:A.correlationId},A.config,A.performanceClient,A.logger),redirectUri:Q,state:be,nonce:p.nonce||Cp(),responseMode:A.config.auth.OIDCOptions.serverResponseType},Dt=p.account||A.browserStorage.getActiveAccount();if(Dt&&(A.logger.verbose("Setting validated request account",A.correlationId),A.logger.verbosePii(`Setting validated request account: ${Dt.homeAccountId}`,A.correlationId),wt.account=Dt),!wt.loginHint&&!Dt){const dn=A.browserStorage.getLegacyLoginHint();dn&&(wt.loginHint=dn)}return wt})()}}const bE="user_switch",ac={[bE]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Ep extends Ut{constructor(p,_,A){super(p,_),Object.setPrototypeOf(this,Ep.prototype),this.name="NativeAuthError",this.ext=A}}function Sp(ve){return!!(ve.ext&&ve.ext.status&&("PERSISTENT_ERROR"===ve.ext.status||"DISABLED"===ve.ext.status)||ve.ext&&ve.ext.error&&-2147186943===ve.ext.error)||"ContentError"===ve.errorCode}function wd(ve,p,_){if(_&&_.status)switch(_.status){case"ACCOUNT_UNAVAILABLE":return ed(Oa);case"USER_INTERACTION_REQUIRED":return new Ll(ve,p);case"USER_CANCEL":return le(Ir);case"NO_NETWORK":return le(Ah)}return new Ep(ve,ac[ve]||p,_)}class lA extends my{acquireToken(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.SilentCacheClientAcquireToken,p.correlationId);const A=_.initializeServerTelemetryManager(Ko.acquireTokenSilent_silentFlow),Q=yield Wr(_.getClientConfiguration.bind(_),It.StandardInteractionClientGetClientConfiguration,_.logger,_.performanceClient,_.correlationId)({serverTelemetryManager:A,requestAuthority:p.authority,requestAzureCloudOptions:p.azureCloudOptions,account:p.account}),de=new Xa(Q,_.performanceClient);_.logger.verbose("Silent auth client created");try{const He=(yield Wr(de.acquireCachedToken.bind(de),It.SilentFlowClientAcquireCachedToken,_.logger,_.performanceClient,p.correlationId)(p))[0];return _.performanceClient.addFields({fromCache:!0},p.correlationId),He}catch(be){throw be instanceof te&&be.errorCode===Kl&&_.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),be}})()}logout(p){this.logger.verbose("logoutRedirect called");const _=this.initializeLogoutRequest(p);return this.clearCacheOnLogout(_?.account)}}class wp extends X1{constructor(p,_,A,Q,de,be,He,wt,Dt,dn,ti,ai){super(p,_,A,Q,de,be,wt,Dt,ai),this.apiId=He,this.accountId=dn,this.nativeMessageHandler=Dt,this.nativeStorageManager=ti,this.silentCacheClient=new lA(p,this.nativeStorageManager,A,Q,de,be,wt,Dt,ai),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const yo="ppnbnpeolgkicgegkbkbjmhlideopiji"===this.nativeMessageHandler.getExtensionId()?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=zd.makeExtraSkuString({libraryName:we.MSAL_SKU,libraryVersion:Mc,extensionName:yo,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(p){p.extraParameters={...p.extraParameters,"x-client-xtra-sku":this.skus}}acquireToken(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.NativeInteractionClientAcquireToken,p.correlationId),_.logger.trace("NativeInteractionClient - acquireToken called.");const A=_.performanceClient.startMeasurement(It.NativeInteractionClientAcquireToken,p.correlationId),Q=vs();try{const de=yield _.initializeNativeRequest(p);try{const dn=yield _.acquireTokensFromCache(_.accountId,de);return A.end({success:!0,isNativeBroker:!1,fromCache:!0}),dn}catch{_.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...be}=de,He={method:"GetToken",request:be},wt=yield _.nativeMessageHandler.sendMessage(He),Dt=_.validateNativeResponse(wt);return yield _.handleNativeResponse(Dt,de,Q).then(dn=>(A.end({success:!0,isNativeBroker:!0,requestId:dn.requestId}),_.serverTelemetryManager.clearNativeBrokerErrorCode(),dn)).catch(dn=>{throw A.end({success:!1,errorCode:dn.errorCode,subErrorCode:dn.subError,isNativeBroker:!0}),dn})}catch(de){throw de instanceof Ep&&_.serverTelemetryManager.setNativeBrokerErrorCode(de.errorCode),de}})()}createSilentCacheRequest(p,_){return{authority:p.authority,correlationId:this.correlationId,scopes:Ca.fromString(p.scope).asArray(),account:_,forceRefresh:!1}}acquireTokensFromCache(p,_){var A=this;return z(function*(){if(!p)throw A.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),xn(Xo);const Q=A.browserStorage.getBaseAccountInfo({nativeAccountId:p});if(!Q)throw xn(Xo);try{const de=A.createSilentCacheRequest(_,Q),be=yield A.silentCacheClient.acquireToken(de),He={...Q,idTokenClaims:be?.idTokenClaims,idToken:be?.idToken};return{...be,account:He}}catch(de){throw de}})()}acquireTokenRedirect(p,_){var A=this;return z(function*(){A.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...Q}=p;delete Q.onRedirectNavigate;const de=yield A.initializeNativeRequest(Q),be={method:"GetToken",request:de};try{const Dt=yield A.nativeMessageHandler.sendMessage(be);A.validateNativeResponse(Dt)}catch(Dt){if(Dt instanceof Ep&&(A.serverTelemetryManager.setNativeBrokerErrorCode(Dt.errorCode),Sp(Dt)))throw Dt}A.browserStorage.setTemporaryCache("request.native",JSON.stringify(de),!0);const He={apiId:Ko.acquireTokenRedirect,timeout:A.config.system.redirectNavigationTimeout,noHistory:!1},wt=A.config.auth.navigateToLoginRequestUrl?window.location.href:A.getRedirectUri(p.redirectUri);_.end({success:!0}),yield A.navigationClient.navigateExternal(wt,He)})()}handleRedirectPromise(p,_){var A=this;return z(function*(){if(A.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!A.browserStorage.isInteractionInProgress(!0))return A.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const Q=A.browserStorage.getCachedNativeRequest();if(!Q)return A.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),p&&_&&p?.addFields({errorCode:"no_cached_request"},_),null;const{prompt:de,...be}=Q;de&&A.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),A.browserStorage.removeItem(A.browserStorage.generateCacheKey("request.native"));const He={method:"GetToken",request:be},wt=vs();try{A.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const Dt=yield A.nativeMessageHandler.sendMessage(He);A.validateNativeResponse(Dt);const dn=A.handleNativeResponse(Dt,be,wt);A.browserStorage.setInteractionInProgress(!1);const ti=yield dn;return A.serverTelemetryManager.clearNativeBrokerErrorCode(),ti}catch(Dt){throw A.browserStorage.setInteractionInProgress(!1),Dt}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(p,_,A){var Q=this;return z(function*(){Q.logger.trace("NativeInteractionClient - handleNativeResponse called.");const de=qs(p.id_token,Kh),be=Q.createHomeAccountIdentifier(p,de),He=Q.browserStorage.getAccountInfoFilteredBy({nativeAccountId:_.accountId})?.homeAccountId;if(be!==He&&p.account.id!==_.accountId)throw wd(bE);const wt=yield Q.getDiscoveredAuthority({requestAuthority:_.authority}),Dt=ot(Q.browserStorage,wt,be,Kh,de,p.client_info,void 0,de.tid,void 0,p.account.id,Q.logger),dn=yield Q.generateAuthenticationResult(p,_,de,Dt,wt.canonicalAuthority,A);return Q.cacheAccount(Dt),Q.cacheNativeTokens(p,_,be,de,p.access_token,dn.tenantId,A),dn})()}createHomeAccountIdentifier(p,_){return nc.generateHomeAccountId(p.client_info||T.EMPTY_STRING,0,this.logger,this.browserCrypto,_)}generateScopes(p,_){return Ca.fromString(p.scope?p.scope:_.scope)}generatePopAccessToken(p,_){var A=this;return z(function*(){if(_.tokenType===Ht.POP&&_.signPopToken){if(p.shr)return A.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),p.shr;const Q=new ie(A.browserCrypto),de={resourceRequestMethod:_.resourceRequestMethod,resourceRequestUri:_.resourceRequestUri,shrClaims:_.shrClaims,shrNonce:_.shrNonce};if(!_.keyId)throw xn(ba);return Q.signPopToken(p.access_token,_.keyId,de)}return p.access_token})()}generateAuthenticationResult(p,_,A,Q,de,be){var He=this;return z(function*(){const wt=He.addTelemetryFromNativeResponse(p),Dt=Ca.fromString(p.scope?p.scope:_.scope),dn=p.account.properties||{},ti=dn.UID||A.oid||A.sub||T.EMPTY_STRING,ai=dn.TenantId||A.tid||T.EMPTY_STRING,yo=Uu(Q.getAccountInfo(),void 0,A,p.id_token);yo.nativeAccountId!==p.account.id&&(yo.nativeAccountId=p.account.id);const Za=yield He.generatePopAccessToken(p,_),Ja=_.tokenType===Ht.POP?Ht.POP:Ht.BEARER;return{authority:de,uniqueId:ti,tenantId:ai,scopes:Dt.asArray(),account:yo,idToken:p.id_token,idTokenClaims:A,accessToken:Za,fromCache:!!wt&&He.isResponseFromCache(wt),expiresOn:new Date(1e3*Number(be+p.expires_in)),tokenType:Ja,correlationId:He.correlationId,state:p.state,fromNativeBroker:!0}})()}cacheAccount(p){this.browserStorage.setAccount(p),this.browserStorage.removeAccountContext(p).catch(_=>{this.logger.error(`Error occurred while removing account context from browser storage. ${_}`)})}cacheNativeTokens(p,_,A,Q,de,be,He){const wt=ks(A,_.authority,p.id_token||"",_.clientId,Q.tid||""),dn=He+(_.tokenType===Ht.POP?T.SHR_NONCE_VALIDITY:("string"==typeof p.expires_in?parseInt(p.expires_in,10):p.expires_in)||0),ti=this.generateScopes(p,_),ai=Ia(A,_.authority,de,_.clientId,Q.tid||be,ti.printScopes(),dn,0,Kh,void 0,_.tokenType,void 0,_.keyId);this.nativeStorageManager.saveCacheRecord({idToken:wt,accessToken:ai},_.storeInCache)}addTelemetryFromNativeResponse(p){const _=this.getMATSFromResponse(p);return _?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:_.broker_version,matsAccountJoinOnStart:_.account_join_on_start,matsAccountJoinOnEnd:_.account_join_on_end,matsDeviceJoin:_.device_join,matsPromptBehavior:_.prompt_behavior,matsApiErrorCode:_.api_error_code,matsUiVisible:_.ui_visible,matsSilentCode:_.silent_code,matsSilentBiSubCode:_.silent_bi_sub_code,matsSilentMessage:_.silent_message,matsSilentStatus:_.silent_status,matsHttpStatus:_.http_status,matsHttpEventCount:_.http_event_count},this.correlationId),_):null}validateNativeResponse(p){if(p.hasOwnProperty("access_token")&&p.hasOwnProperty("id_token")&&p.hasOwnProperty("client_info")&&p.hasOwnProperty("account")&&p.hasOwnProperty("scope")&&p.hasOwnProperty("expires_in"))return p;throw bn(Nn,"Response missing expected properties.")}getMATSFromResponse(p){if(p.properties.MATS)try{return JSON.parse(p.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(p){return typeof p.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!p.is_cached}initializeNativeRequest(p){var _=this;return z(function*(){_.logger.trace("NativeInteractionClient - initializeNativeRequest called");const A=p.authority||_.config.auth.authority;p.account&&(yield _.getDiscoveredAuthority({requestAuthority:A,requestAzureCloudOptions:p.azureCloudOptions,account:p.account}));const Q=new Go(A);Q.validateAsUri();const{scopes:de,...be}=p,He=new Ca(de||[]);He.appendScopes(N);const Dt={...be,accountId:_.accountId,clientId:_.config.auth.clientId,authority:Q.urlString,scope:He.printScopes(),redirectUri:_.getRedirectUri(p.redirectUri),prompt:(()=>{switch(_.apiId){case Ko.ssoSilent:case Ko.acquireTokenSilent_silentFlow:return _.logger.trace("initializeNativeRequest: silent request sets prompt to none"),J.NONE}if(p.prompt)switch(p.prompt){case J.NONE:case J.CONSENT:case J.LOGIN:return _.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),p.prompt;default:throw _.logger.trace(`initializeNativeRequest: prompt = ${p.prompt} is not compatible with native flow`),le(mg)}else _.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:_.correlationId,tokenType:p.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...p.extraQueryParameters,...p.tokenQueryParameters},extendedExpiryToken:!1,keyId:p.popKid};if(Dt.signPopToken&&p.popKid)throw le(da);if(_.handleExtraBrokerParams(Dt),Dt.extraParameters=Dt.extraParameters||{},Dt.extraParameters.telemetry="MATS",p.authenticationScheme===Ht.POP){const dn={resourceRequestUri:p.resourceRequestUri,resourceRequestMethod:p.resourceRequestMethod,shrClaims:p.shrClaims,shrNonce:p.shrNonce},ti=new ie(_.browserCrypto);let ai;if(Dt.keyId)ai=_.browserCrypto.base64UrlEncode(JSON.stringify({kid:Dt.keyId})),Dt.signPopToken=!1;else{const yo=yield Wr(ti.generateCnf.bind(ti),It.PopTokenGenerateCnf,_.logger,_.performanceClient,p.correlationId)(dn,_.logger);ai=yo.reqCnfString,Dt.keyId=yo.kid,Dt.signPopToken=!0}Dt.reqCnf=ai}return _.addRequestSKUs(Dt),Dt})()}handleExtraBrokerParams(p){if(p.extraParameters&&p.extraParameters.hasOwnProperty("brk_client_id")&&p.extraParameters.hasOwnProperty("brk_redirect_uri")&&p.extraParameters.hasOwnProperty(Ch)){const Q=p.extraParameters.brk_redirect_uri;p.extraParameters={child_client_id:p.extraParameters[Ch],child_redirect_uri:p.redirectUri},p.redirectUri=Q}}}class iu{constructor(p,_,A,Q){this.logger=p,this.handshakeTimeoutMs=_,this.extensionId=Q,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=A,this.handshakeEvent=A.startMeasurement(It.NativeMessageHandlerHandshake)}sendMessage(p){var _=this;return z(function*(){_.logger.trace("NativeMessageHandler - sendMessage called.");const A={channel:Ke_CHANNEL_ID,extensionId:_.extensionId,responseId:Cp(),body:p};return _.logger.trace("NativeMessageHandler - Sending request to browser extension"),_.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(A)}`),_.messageChannel.port1.postMessage(A),new Promise((Q,de)=>{_.resolvers.set(A.responseId,{resolve:Q,reject:de})})})()}static createProvider(p,_,A){return z(function*(){p.trace("NativeMessageHandler - createProvider called.");try{const Q=new iu(p,_,A,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield Q.sendHandshakeRequest(),Q}catch{const de=new iu(p,_,A);return yield de.sendHandshakeRequest(),de}})()}sendHandshakeRequest(){var p=this;return z(function*(){p.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",p.windowListener,!1);const _={channel:Ke_CHANNEL_ID,extensionId:p.extensionId,responseId:Cp(),body:{method:"Handshake"}};return p.handshakeEvent.add({extensionId:p.extensionId,extensionHandshakeTimeoutMs:p.handshakeTimeoutMs}),p.messageChannel.port1.onmessage=A=>{p.onChannelMessage(A)},window.postMessage(_,window.origin,[p.messageChannel.port2]),new Promise((A,Q)=>{p.handshakeResolvers.set(_.responseId,{resolve:A,reject:Q}),p.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",p.windowListener,!1),p.messageChannel.port1.close(),p.messageChannel.port2.close(),p.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),Q(le(Wm)),p.handshakeResolvers.delete(_.responseId)},p.handshakeTimeoutMs)})})()}onWindowMessage(p){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),p.source!==window)return;const _=p.data;if(_.channel&&_.channel===Ke_CHANNEL_ID&&(!_.extensionId||_.extensionId===this.extensionId)&&"Handshake"===_.body.method){const A=this.handshakeResolvers.get(_.responseId);if(!A)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${_.responseId}`);this.logger.verbose(_.extensionId?`Extension with id: ${_.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),A.reject(le(gg))}}onChannelMessage(p){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const _=p.data,A=this.resolvers.get(_.responseId),Q=this.handshakeResolvers.get(_.responseId);try{const de=_.body.method;if("Response"===de){if(!A)return;const be=_.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(be)}`),"Success"!==be.status)A.reject(wd(be.code,be.description,be.ext));else{if(!be.result)throw bn(Nn,"Event does not contain result.");be.result.code&&be.result.description?A.reject(wd(be.result.code,be.result.description,be.result.ext)):A.resolve(be.result)}this.resolvers.delete(_.responseId)}else if("HandshakeResponse"===de){if(!Q)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${_.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=_.extensionId,this.extensionVersion=_.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),Q.resolve(),this.handshakeResolvers.delete(_.responseId)}}catch(de){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${de}`),this.logger.errorPii(`Unable to parse ${p}`),A?A.reject(de):Q&&Q.reject(de)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(p,_,A,Q){if(_.trace("isNativeAvailable called"),!p.system.allowNativeBroker)return _.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!A)return _.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(Q)switch(Q){case Ht.BEARER:case Ht.POP:return _.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return _.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class tC{constructor(p,_,A,Q,de){this.authModule=p,this.browserStorage=_,this.authCodeRequest=A,this.logger=Q,this.performanceClient=de}handleCodeResponse(p,_){var A=this;return z(function*(){let Q;A.performanceClient.addQueueMeasurement(It.HandleCodeResponse,_.correlationId);try{Q=A.authModule.handleFragmentResponse(p,_.state)}catch(de){throw de instanceof ic&&de.subError===Ir?le(Ir):de}return Wr(A.handleCodeResponseFromServer.bind(A),It.HandleCodeResponseFromServer,A.logger,A.performanceClient,_.correlationId)(Q,_)})()}handleCodeResponseFromServer(p,_,A=!0){var Q=this;return z(function*(){if(Q.performanceClient.addQueueMeasurement(It.HandleCodeResponseFromServer,_.correlationId),Q.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),Q.authCodeRequest.code=p.code,p.cloud_instance_host_name&&(yield Wr(Q.authModule.updateAuthority.bind(Q.authModule),It.UpdateTokenEndpointAuthority,Q.logger,Q.performanceClient,_.correlationId)(p.cloud_instance_host_name,_.correlationId)),A&&(p.nonce=_.nonce||void 0),p.state=_.state,p.client_info)Q.authCodeRequest.clientInfo=p.client_info;else{const be=Q.createCcsCredentials(_);be&&(Q.authCodeRequest.ccsCredential=be)}return yield Wr(Q.authModule.acquireToken.bind(Q.authModule),It.AuthClientAcquireToken,Q.logger,Q.performanceClient,_.correlationId)(Q.authCodeRequest,p)})()}createCcsCredentials(p){return p.account?{credential:p.account.homeAccountId,type:"home_account_id"}:p.loginHint?{credential:p.loginHint,type:"UPN"}:null}}function wE(ve,p,_){const A=mu(ve);if(!A)throw vh(ve)?(_.error(`A ${p} is present in the iframe but it does not contain known properties. It's likely that the ${p} has been replaced by code running on the redirectUri page.`),_.errorPii(`The ${p} detected is: ${ve}`),le(Cn)):(_.error(`The request has returned to the redirectUri but a ${p} is not present. It's likely that the ${p} has been removed or the page has been redirected by code running on the redirectUri page.`),le(ht));return A}class Tp extends my{constructor(p,_,A,Q,de,be,He,wt,Dt,dn){super(p,_,A,Q,de,be,He,Dt,dn),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=wt}acquireToken(p){try{const A={popupName:this.generatePopupName(p.scopes||N,p.authority||this.config.auth.authority),popupWindowAttributes:p.popupWindowAttributes||{},popupWindowParent:p.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(p,A)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),A.popup=this.openSizedPopup("about:blank",A),this.acquireTokenPopupAsync(p,A))}catch(_){return Promise.reject(_)}}logout(p){try{this.logger.verbose("logoutPopup called");const _=this.initializeLogoutRequest(p),A={popupName:this.generateLogoutPopupName(_),popupWindowAttributes:p?.popupWindowAttributes||{},popupWindowParent:p?.popupWindowParent??window},Q=p&&p.authority,de=p&&p.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(_,A,Q,de)):(this.logger.verbose("asyncPopup set to false, opening popup"),A.popup=this.openSizedPopup("about:blank",A),this.logoutPopupAsync(_,A,Q,de))}catch(_){return Promise.reject(_)}}acquireTokenPopupAsync(p,_){var A=this;return z(function*(){A.logger.verbose("acquireTokenPopupAsync called");const Q=A.initializeServerTelemetryManager(Ko.acquireTokenPopup),de=yield Wr(A.initializeAuthorizationRequest.bind(A),It.StandardInteractionClientInitializeAuthorizationRequest,A.logger,A.performanceClient,A.correlationId)(p,C.InteractionType.Popup);sm(de.authority);try{const be=yield Wr(A.initializeAuthorizationCodeRequest.bind(A),It.StandardInteractionClientInitializeAuthorizationCodeRequest,A.logger,A.performanceClient,A.correlationId)(de),He=yield Wr(A.createAuthCodeClient.bind(A),It.StandardInteractionClientCreateAuthCodeClient,A.logger,A.performanceClient,A.correlationId)({serverTelemetryManager:Q,requestAuthority:de.authority,requestAzureCloudOptions:de.azureCloudOptions,requestExtraQueryParameters:de.extraQueryParameters,account:de.account}),wt=iu.isNativeAvailable(A.config,A.logger,A.nativeMessageHandler,p.authenticationScheme);let Dt;wt&&(Dt=A.performanceClient.startMeasurement(It.FetchAccountIdWithNativeBroker,p.correlationId));const dn=yield He.getAuthCodeUrl({...de,nativeBroker:wt}),ti=new tC(He,A.browserStorage,be,A.logger,A.performanceClient),ai=A.initiateAuthRequest(dn,_);A.eventHandler.emitEvent($i.POPUP_OPENED,C.InteractionType.Popup,{popupWindow:ai},null);const yo=yield A.monitorPopupForHash(ai,_.popupWindowParent),Za=_p(wE,It.DeserializeResponse,A.logger,A.performanceClient,A.correlationId)(yo,A.config.auth.OIDCOptions.serverResponseType,A.logger);if(Ac.removeThrottle(A.browserStorage,A.config.auth.clientId,be),Za.accountId){if(A.logger.verbose("Account id found in hash, calling WAM for token"),Dt&&Dt.end({success:!0,isNativeBroker:!0}),!A.nativeMessageHandler)throw le(vp);const zu=new wp(A.config,A.browserStorage,A.browserCrypto,A.logger,A.eventHandler,A.navigationClient,Ko.acquireTokenPopup,A.performanceClient,A.nativeMessageHandler,Za.accountId,A.nativeStorage,de.correlationId),{userRequestState:Dc}=xc.parseRequestState(A.browserCrypto,de.state);return yield zu.acquireToken({...de,state:Dc,prompt:void 0})}return yield ti.handleCodeResponse(Za,de)}catch(be){throw _.popup?.close(),be instanceof Ut&&(be.setCorrelationId(A.correlationId),Q.cacheFailedRequest(be)),be}})()}logoutPopupAsync(p,_,A,Q){var de=this;return z(function*(){de.logger.verbose("logoutPopupAsync called"),de.eventHandler.emitEvent($i.LOGOUT_START,C.InteractionType.Popup,p);const be=de.initializeServerTelemetryManager(Ko.logoutPopup);try{yield de.clearCacheOnLogout(p.account);const wt=(yield Wr(de.createAuthCodeClient.bind(de),It.StandardInteractionClientCreateAuthCodeClient,de.logger,de.performanceClient,de.correlationId)({serverTelemetryManager:be,requestAuthority:A,account:p.account||void 0})).getLogoutUri(p);de.eventHandler.emitEvent($i.LOGOUT_SUCCESS,C.InteractionType.Popup,p);const Dt=de.openPopup(wt,_);if(de.eventHandler.emitEvent($i.POPUP_OPENED,C.InteractionType.Popup,{popupWindow:Dt},null),yield de.monitorPopupForHash(Dt,_.popupWindowParent).catch(()=>{}),Q){const dn={apiId:Ko.logoutPopup,timeout:de.config.system.redirectNavigationTimeout,noHistory:!1},ti=Go.getAbsoluteUrl(Q,Pu());de.logger.verbose("Redirecting main window to url specified in the request"),de.logger.verbosePii(`Redirecting main window to: ${ti}`),yield de.navigationClient.navigateInternal(ti,dn)}else de.logger.verbose("No main window navigation requested")}catch(He){throw _.popup?.close(),He instanceof Ut&&(He.setCorrelationId(de.correlationId),be.cacheFailedRequest(He)),de.browserStorage.setInteractionInProgress(!1),de.eventHandler.emitEvent($i.LOGOUT_FAILURE,C.InteractionType.Popup,null,He),de.eventHandler.emitEvent($i.LOGOUT_END,C.InteractionType.Popup),He}de.eventHandler.emitEvent($i.LOGOUT_END,C.InteractionType.Popup)})()}initiateAuthRequest(p,_){if(p)return this.logger.infoPii(`Navigate to: ${p}`),this.openPopup(p,_);throw this.logger.error("Navigate url is empty"),le(nt)}monitorPopupForHash(p,_){return new Promise((A,Q)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const de=setInterval(()=>{if(p.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(de),void Q(le(Ir));let be="";try{be=p.location.href}catch{}if(!be||"about:blank"===be)return;clearInterval(de);let He="";p&&(He=this.config.auth.OIDCOptions.serverResponseType===U.QUERY?p.location.search:p.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),A(He)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(p,_)})}openPopup(p,_){try{let A;if(_.popup?(A=_.popup,this.logger.verbosePii(`Navigating popup window to: ${p}`),A.location.assign(p)):typeof _.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${p}`),A=this.openSizedPopup(p,_)),!A)throw le(Lr);return A.focus&&A.focus(),this.currentWindow=A,_.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),A}catch(A){throw this.logger.error("error opening popup "+A.message),this.browserStorage.setInteractionInProgress(!1),le(Gn)}}openSizedPopup(p,{popupName:_,popupWindowAttributes:A,popupWindowParent:Q}){const de=Q.screenLeft?Q.screenLeft:Q.screenX,be=Q.screenTop?Q.screenTop:Q.screenY,He=Q.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,wt=Q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let Dt=A.popupSize?.width,dn=A.popupSize?.height,ti=A.popupPosition?.top,ai=A.popupPosition?.left;return(!Dt||Dt<0||Dt>He)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),Dt=we.POPUP_WIDTH),(!dn||dn<0||dn>wt)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),dn=we.POPUP_HEIGHT),(!ti||ti<0||ti>wt)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),ti=Math.max(0,wt/2-we.POPUP_HEIGHT/2+be)),(!ai||ai<0||ai>He)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),ai=Math.max(0,He/2-we.POPUP_WIDTH/2+de)),Q.open(p,_,`width=${Dt}, height=${dn}, top=${ti}, left=${ai}, scrollbars=yes`)}unloadWindow(p){this.browserStorage.cleanRequestByInteractionType(C.InteractionType.Popup),this.currentWindow&&this.currentWindow.close(),p.preventDefault()}cleanPopup(p,_){p.close(),_.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(p,_){return`${we.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${p.join("-")}.${_}.${this.correlationId}`}generateLogoutPopupName(p){return`${we.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${p.account&&p.account.homeAccountId}.${this.correlationId}`}}class TE{constructor(p,_,A,Q,de){this.authModule=p,this.browserStorage=_,this.authCodeRequest=A,this.logger=Q,this.performanceClient=de}initiateAuthRequest(p,_){var A=this;return z(function*(){if(A.logger.verbose("RedirectHandler.initiateAuthRequest called"),p){_.redirectStartPage&&(A.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),A.browserStorage.setTemporaryCache("request.origin",_.redirectStartPage,!0)),A.browserStorage.setTemporaryCache("request.correlationId",A.authCodeRequest.correlationId,!0),A.browserStorage.cacheCodeRequest(A.authCodeRequest),A.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${p}`);const Q={apiId:Ko.acquireTokenRedirect,timeout:_.redirectTimeout,noHistory:!1};return"function"==typeof _.onRedirectNavigate?(A.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==_.onRedirectNavigate(p)?(A.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield _.navigationClient.navigateExternal(p,Q))):void A.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(A.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield _.navigationClient.navigateExternal(p,Q)))}throw A.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),le(nt)})()}handleCodeResponse(p,_){var A=this;return z(function*(){A.logger.verbose("RedirectHandler.handleCodeResponse called"),A.browserStorage.setInteractionInProgress(!1);const Q=A.browserStorage.generateStateKey(_),de=A.browserStorage.getTemporaryCache(Q);if(!de)throw xn(fo,"Cached State");let be;try{be=A.authModule.handleFragmentResponse(p,de)}catch(dn){throw dn instanceof ic&&dn.subError===Ir?le(Ir):dn}const He=A.browserStorage.generateNonceKey(de),wt=A.browserStorage.getTemporaryCache(He);if(A.authCodeRequest.code=be.code,be.cloud_instance_host_name&&(yield Wr(A.authModule.updateAuthority.bind(A.authModule),It.UpdateTokenEndpointAuthority,A.logger,A.performanceClient,A.authCodeRequest.correlationId)(be.cloud_instance_host_name,A.authCodeRequest.correlationId)),be.nonce=wt||void 0,be.state=de,be.client_info)A.authCodeRequest.clientInfo=be.client_info;else{const dn=A.checkCcsCredentials();dn&&(A.authCodeRequest.ccsCredential=dn)}const Dt=yield A.authModule.acquireToken(A.authCodeRequest,be);return A.browserStorage.cleanRequestByState(_),Dt})()}checkCcsCredentials(){const p=this.browserStorage.getTemporaryCache("ccs.credential",!0);if(p)try{return JSON.parse(p)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${p}`)}return null}}class uA extends my{constructor(p,_,A,Q,de,be,He,wt,Dt,dn){super(p,_,A,Q,de,be,He,Dt,dn),this.nativeStorage=wt}acquireToken(p){var _=this;return z(function*(){const A=yield Wr(_.initializeAuthorizationRequest.bind(_),It.StandardInteractionClientInitializeAuthorizationRequest,_.logger,_.performanceClient,_.correlationId)(p,C.InteractionType.Redirect);_.browserStorage.updateCacheEntries(A.state,A.nonce,A.authority,A.loginHint||"",A.account||null);const Q=_.initializeServerTelemetryManager(Ko.acquireTokenRedirect),de=be=>{be.persisted&&(_.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),_.browserStorage.cleanRequestByState(A.state),_.eventHandler.emitEvent($i.RESTORE_FROM_BFCACHE,C.InteractionType.Redirect))};try{const be=yield Wr(_.initializeAuthorizationCodeRequest.bind(_),It.StandardInteractionClientInitializeAuthorizationCodeRequest,_.logger,_.performanceClient,_.correlationId)(A),He=yield Wr(_.createAuthCodeClient.bind(_),It.StandardInteractionClientCreateAuthCodeClient,_.logger,_.performanceClient,_.correlationId)({serverTelemetryManager:Q,requestAuthority:A.authority,requestAzureCloudOptions:A.azureCloudOptions,requestExtraQueryParameters:A.extraQueryParameters,account:A.account}),wt=new TE(He,_.browserStorage,be,_.logger,_.performanceClient),Dt=yield He.getAuthCodeUrl({...A,nativeBroker:iu.isNativeAvailable(_.config,_.logger,_.nativeMessageHandler,p.authenticationScheme)}),dn=_.getRedirectStartPage(p.redirectStartPage);return _.logger.verbosePii(`Redirect start page: ${dn}`),window.addEventListener("pageshow",de),yield wt.initiateAuthRequest(Dt,{navigationClient:_.navigationClient,redirectTimeout:_.config.system.redirectNavigationTimeout,redirectStartPage:dn,onRedirectNavigate:p.onRedirectNavigate||_.config.auth.onRedirectNavigate})}catch(be){throw be instanceof Ut&&(be.setCorrelationId(_.correlationId),Q.cacheFailedRequest(be)),window.removeEventListener("pageshow",de),_.browserStorage.cleanRequestByState(A.state),be}})()}handleRedirectPromise(p="",_){var A=this;return z(function*(){const Q=A.initializeServerTelemetryManager(Ko.handleRedirectPromise);try{if(!A.browserStorage.isInteractionInProgress(!0))return A.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[de,be]=A.getRedirectResponse(p||"");if(!de)return A.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),A.browserStorage.cleanRequestByInteractionType(C.InteractionType.Redirect),_.event.errorCode="no_server_response",null;const He=A.browserStorage.getTemporaryCache("request.origin",!0)||T.EMPTY_STRING;if(Go.removeHashFromUrl(He)===Go.removeHashFromUrl(window.location.href)&&A.config.auth.navigateToLoginRequestUrl)return A.logger.verbose("Current page is loginRequestUrl, handling response"),He.indexOf("#")>-1&&Jm(He),yield A.handleResponse(de,Q);if(!A.config.auth.navigateToLoginRequestUrl)return A.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield A.handleResponse(de,Q);if(!Nc()||A.config.system.allowRedirectInIframe){A.browserStorage.setTemporaryCache("urlHash",be,!0);const dn={apiId:Ko.handleRedirectPromise,timeout:A.config.system.redirectNavigationTimeout,noHistory:!0};let ti=!0;if(He&&"null"!==He)A.logger.verbose(`Navigating to loginRequestUrl: ${He}`),ti=yield A.navigationClient.navigateInternal(He,dn);else{const ai=ea();A.browserStorage.setTemporaryCache("request.origin",ai,!0),A.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),ti=yield A.navigationClient.navigateInternal(ai,dn)}if(!ti)return yield A.handleResponse(de,Q)}return null}catch(de){throw de instanceof Ut&&(de.setCorrelationId(A.correlationId),Q.cacheFailedRequest(de)),A.browserStorage.cleanRequestByInteractionType(C.InteractionType.Redirect),de}})()}getRedirectResponse(p){this.logger.verbose("getRedirectResponseHash called");let _=p;_||(_=this.config.auth.OIDCOptions.serverResponseType===U.QUERY?window.location.search:window.location.hash);let A=mu(_);if(A){try{!function h2(ve,p,_){if(!ve.state)throw le(Xt);const A=W1(p,ve.state);if(!A)throw le(En);if(A.interactionType!==_)throw le(Vn)}(A,this.browserCrypto,C.InteractionType.Redirect)}catch(de){return de instanceof Ut&&this.logger.error(`Interaction type validation failed due to ${de.errorCode}: ${de.errorMessage}`),[null,""]}return qd(window),this.logger.verbose("Hash contains known properties, returning response hash"),[A,_]}const Q=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),Q&&(A=mu(Q),A)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[A,Q]):[null,""]}handleResponse(p,_){var A=this;return z(function*(){const Q=p.state;if(!Q)throw le(Xt);const de=A.browserStorage.getCachedRequest(Q);if(A.logger.verbose("handleResponse called, retrieved cached request"),p.accountId){if(A.logger.verbose("Account id found in hash, calling WAM for token"),!A.nativeMessageHandler)throw le(vp);const Dt=new wp(A.config,A.browserStorage,A.browserCrypto,A.logger,A.eventHandler,A.navigationClient,Ko.acquireTokenPopup,A.performanceClient,A.nativeMessageHandler,p.accountId,A.nativeStorage,de.correlationId),{userRequestState:dn}=xc.parseRequestState(A.browserCrypto,Q);return Dt.acquireToken({...de,state:dn,prompt:void 0}).finally(()=>{A.browserStorage.cleanRequestByState(Q)})}const be=A.browserStorage.getCachedAuthority(Q);if(!be)throw le(Vc);const He=yield Wr(A.createAuthCodeClient.bind(A),It.StandardInteractionClientCreateAuthCodeClient,A.logger,A.performanceClient,A.correlationId)({serverTelemetryManager:_,requestAuthority:be});return Ac.removeThrottle(A.browserStorage,A.config.auth.clientId,de),new TE(He,A.browserStorage,de,A.logger,A.performanceClient).handleCodeResponse(p,Q)})()}logout(p){var _=this;return z(function*(){_.logger.verbose("logoutRedirect called");const A=_.initializeLogoutRequest(p),Q=_.initializeServerTelemetryManager(Ko.logout);try{_.eventHandler.emitEvent($i.LOGOUT_START,C.InteractionType.Redirect,p),yield _.clearCacheOnLogout(A.account);const de={apiId:Ko.logout,timeout:_.config.system.redirectNavigationTimeout,noHistory:!1},He=(yield Wr(_.createAuthCodeClient.bind(_),It.StandardInteractionClientCreateAuthCodeClient,_.logger,_.performanceClient,_.correlationId)({serverTelemetryManager:Q,requestAuthority:p&&p.authority,requestExtraQueryParameters:p?.extraQueryParameters,account:p&&p.account||void 0})).getLogoutUri(A);if(_.eventHandler.emitEvent($i.LOGOUT_SUCCESS,C.InteractionType.Redirect,A),!p||"function"!=typeof p.onRedirectNavigate)return _.browserStorage.getInteractionInProgress()||_.browserStorage.setInteractionInProgress(!0),void(yield _.navigationClient.navigateExternal(He,de));if(!1!==p.onRedirectNavigate(He))return _.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),_.browserStorage.getInteractionInProgress()||_.browserStorage.setInteractionInProgress(!0),void(yield _.navigationClient.navigateExternal(He,de));_.browserStorage.setInteractionInProgress(!1),_.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(de){throw de instanceof Ut&&(de.setCorrelationId(_.correlationId),Q.cacheFailedRequest(de)),_.eventHandler.emitEvent($i.LOGOUT_FAILURE,C.InteractionType.Redirect,null,de),_.eventHandler.emitEvent($i.LOGOUT_END,C.InteractionType.Redirect),de}_.eventHandler.emitEvent($i.LOGOUT_END,C.InteractionType.Redirect)})()}getRedirectStartPage(p){const _=p||window.location.href;return Go.getAbsoluteUrl(_,Pu())}}function dA(ve,p,_,A,Q){return _y.apply(this,arguments)}function _y(){return _y=z(function*(ve,p,_,A,Q){if(p.addQueueMeasurement(It.SilentHandlerInitiateAuthRequest,A),!ve)throw _.info("Navigate url is empty"),le(nt);return Q?Wr(rC,It.SilentHandlerLoadFrame,_,p,A)(ve,Q,p,A):_p(AE,It.SilentHandlerLoadFrameSync,_,p,A)(ve)}),_y.apply(this,arguments)}function nC(ve,p,_,A,Q,de,be){return jv.apply(this,arguments)}function jv(){return jv=z(function*(ve,p,_,A,Q,de,be){return A.addQueueMeasurement(It.SilentHandlerMonitorIframeForHash,de),new Promise((He,wt)=>{p<fy&&Q.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${p}ms) than the default (${fy}ms). This may result in timeouts.`);const Dt=window.setTimeout(()=>{window.clearInterval(dn),wt(le(Or))},p),dn=window.setInterval(()=>{let ti="";const ai=ve.contentWindow;try{ti=ai?ai.location.href:""}catch{}if(!ti||"about:blank"===ti)return;let yo="";ai&&(yo=be===U.QUERY?ai.location.search:ai.location.hash),window.clearTimeout(Dt),window.clearInterval(dn),He(yo)},_)}).finally(()=>{_p(aa,It.RemoveHiddenIframe,Q,A,de)(ve)})}),jv.apply(this,arguments)}function rC(ve,p,_,A){return _.addQueueMeasurement(It.SilentHandlerLoadFrame,A),new Promise((Q,de)=>{const be=Nf();window.setTimeout(()=>{be?(be.src=ve,Q(be)):de("Unable to load iframe")},p)})}function AE(ve){const p=Nf();return p.src=ve,p}function Nf(){const ve=document.createElement("iframe");return ve.className="msalSilentIframe",ve.style.visibility="hidden",ve.style.position="absolute",ve.style.width=ve.style.height="0",ve.style.border="0",ve.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(ve),ve}function aa(ve){document.body===ve.parentNode&&document.body.removeChild(ve)}class $v extends my{constructor(p,_,A,Q,de,be,He,wt,Dt,dn,ti){super(p,_,A,Q,de,be,wt,dn,ti),this.apiId=He,this.nativeStorage=Dt}acquireToken(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.SilentIframeClientAcquireToken,p.correlationId),!p.loginHint&&!p.sid&&(!p.account||!p.account.username)&&_.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const A={...p};A.prompt?A.prompt!==J.NONE&&A.prompt!==J.NO_SESSION&&(_.logger.warning(`SilentIframeClient. Replacing invalid prompt ${A.prompt} with ${J.NONE}`),A.prompt=J.NONE):A.prompt=J.NONE;const Q=yield Wr(_.initializeAuthorizationRequest.bind(_),It.StandardInteractionClientInitializeAuthorizationRequest,_.logger,_.performanceClient,p.correlationId)(A,C.InteractionType.Silent);sm(Q.authority);const de=_.initializeServerTelemetryManager(_.apiId);let be;try{return be=yield Wr(_.createAuthCodeClient.bind(_),It.StandardInteractionClientCreateAuthCodeClient,_.logger,_.performanceClient,p.correlationId)({serverTelemetryManager:de,requestAuthority:Q.authority,requestAzureCloudOptions:Q.azureCloudOptions,requestExtraQueryParameters:Q.extraQueryParameters,account:Q.account}),yield Wr(_.silentTokenHelper.bind(_),It.SilentIframeClientTokenHelper,_.logger,_.performanceClient,p.correlationId)(be,Q)}catch(He){if(He instanceof Ut&&(He.setCorrelationId(_.correlationId),de.cacheFailedRequest(He)),!(be&&He instanceof Ut&&He.errorCode===we.INVALID_GRANT_ERROR))throw He;_.performanceClient.addFields({retryError:He.errorCode},_.correlationId);const wt=yield Wr(_.initializeAuthorizationRequest.bind(_),It.StandardInteractionClientInitializeAuthorizationRequest,_.logger,_.performanceClient,p.correlationId)(A,C.InteractionType.Silent);return yield Wr(_.silentTokenHelper.bind(_),It.SilentIframeClientTokenHelper,_.logger,_.performanceClient,_.correlationId)(be,wt)}})()}logout(){return Promise.reject(le(qr))}silentTokenHelper(p,_){var A=this;return z(function*(){const Q=_.correlationId;A.performanceClient.addQueueMeasurement(It.SilentIframeClientTokenHelper,Q);const de=yield Wr(A.initializeAuthorizationCodeRequest.bind(A),It.StandardInteractionClientInitializeAuthorizationCodeRequest,A.logger,A.performanceClient,Q)(_),be=yield Wr(p.getAuthCodeUrl.bind(p),It.GetAuthCodeUrl,A.logger,A.performanceClient,Q)({..._,nativeBroker:iu.isNativeAvailable(A.config,A.logger,A.nativeMessageHandler,_.authenticationScheme)}),He=new tC(p,A.browserStorage,de,A.logger,A.performanceClient),wt=yield Wr(dA,It.SilentHandlerInitiateAuthRequest,A.logger,A.performanceClient,Q)(be,A.performanceClient,A.logger,Q,A.config.system.navigateFrameWait),Dt=A.config.auth.OIDCOptions.serverResponseType,dn=yield Wr(nC,It.SilentHandlerMonitorIframeForHash,A.logger,A.performanceClient,Q)(wt,A.config.system.iframeHashTimeout,A.config.system.pollIntervalMilliseconds,A.performanceClient,A.logger,Q,Dt),ti=_p(wE,It.DeserializeResponse,A.logger,A.performanceClient,A.correlationId)(dn,Dt,A.logger);if(ti.accountId){if(A.logger.verbose("Account id found in hash, calling WAM for token"),!A.nativeMessageHandler)throw le(vp);const ai=new wp(A.config,A.browserStorage,A.browserCrypto,A.logger,A.eventHandler,A.navigationClient,A.apiId,A.performanceClient,A.nativeMessageHandler,ti.accountId,A.browserStorage,Q),{userRequestState:yo}=xc.parseRequestState(A.browserCrypto,_.state);return Wr(ai.acquireToken.bind(ai),It.NativeInteractionClientAcquireToken,A.logger,A.performanceClient,Q)({..._,state:yo,prompt:_.prompt||J.NONE})}return Wr(He.handleCodeResponse.bind(He),It.HandleCodeResponse,A.logger,A.performanceClient,Q)(ti,_)})()}}class IE extends my{acquireToken(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.SilentRefreshClientAcquireToken,p.correlationId);const A=yield Wr(zv,It.InitializeBaseRequest,_.logger,_.performanceClient,p.correlationId)(p,_.config,_.performanceClient,_.logger),Q={...p,...A};p.redirectUri&&(Q.redirectUri=_.getRedirectUri(p.redirectUri));const de=_.initializeServerTelemetryManager(Ko.acquireTokenSilent_silentFlow),be=yield _.createRefreshTokenClient({serverTelemetryManager:de,authorityUrl:Q.authority,azureCloudOptions:Q.azureCloudOptions,account:Q.account});return Wr(be.acquireTokenByRefreshToken.bind(be),It.RefreshTokenClientAcquireTokenByRefreshToken,_.logger,_.performanceClient,p.correlationId)(Q).catch(He=>{throw He.setCorrelationId(_.correlationId),de.cacheFailedRequest(He),He})})()}logout(){return Promise.reject(le(qr))}createRefreshTokenClient(p){var _=this;return z(function*(){const A=yield Wr(_.getClientConfiguration.bind(_),It.StandardInteractionClientGetClientConfiguration,_.logger,_.performanceClient,_.correlationId)({serverTelemetryManager:p.serverTelemetryManager,requestAuthority:p.authorityUrl,requestAzureCloudOptions:p.azureCloudOptions,requestExtraQueryParameters:p.extraQueryParameters,account:p.account});return new $o(A,_.performanceClient)})()}}class hA{constructor(p,_,A,Q){this.isBrowserEnvironment=typeof window<"u",this.config=p,this.storage=_,this.logger=A,this.cryptoObj=Q}loadExternalTokens(p,_,A){if(!this.isBrowserEnvironment)throw le(Jc);const Q=_.id_token?qs(_.id_token,Kh):void 0,de={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},be=p.authority?new $c($c.generateAuthority(p.authority,p.azureCloudOptions),this.config.system.networkClient,this.storage,de,this.logger,p.correlationId||Cp()):void 0,He=this.loadAccount(p,A.clientInfo||_.client_info||"",Q,be),wt=this.loadIdToken(_,He.homeAccountId,He.environment,He.realm),Dt=this.loadAccessToken(p,_,He.homeAccountId,He.environment,He.realm,A),dn=this.loadRefreshToken(_,He.homeAccountId,He.environment);return this.generateAuthenticationResult(p,{account:He,idToken:wt,accessToken:Dt,refreshToken:dn},Q,be)}loadAccount(p,_,A,Q){if(this.logger.verbose("TokenCache - loading account"),p.account){const wt=nc.createFromAccountInfo(p.account);return this.storage.setAccount(wt),wt}if(!Q||!_&&!A)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),le(of);const de=nc.generateHomeAccountId(_,Q.authorityType,this.logger,this.cryptoObj,A),be=A?.tid,He=ot(this.storage,Q,de,Kh,A,_,Q.hostnameAndPort,be,void 0,void 0,this.logger);return this.storage.setAccount(He),He}loadIdToken(p,_,A,Q){if(!p.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const de=ks(_,A,p.id_token,this.config.auth.clientId,Q);return this.storage.setIdTokenCredential(de),de}loadAccessToken(p,_,A,Q,de,be){if(!_.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!_.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(_.scope||p.scopes&&p.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const He=_.scope?Ca.fromString(_.scope):new Ca(p.scopes),wt=be.expiresOn||_.expires_in+(new Date).getTime()/1e3,Dt=be.extendedExpiresOn||(_.ext_expires_in||_.expires_in)+(new Date).getTime()/1e3,dn=Ia(A,Q,_.access_token,this.config.auth.clientId,de,He.printScopes(),wt,Dt,Kh);return this.storage.setAccessTokenCredential(dn),dn}loadRefreshToken(p,_,A){if(!p.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const Q=Al(_,A,p.refresh_token,this.config.auth.clientId,p.foci,void 0,p.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(Q),Q}generateAuthenticationResult(p,_,A,Q){let wt,de="",be=[],He=null;_?.accessToken&&(de=_.accessToken.secret,be=Ca.fromString(_.accessToken.target).asArray(),He=new Date(1e3*Number(_.accessToken.expiresOn)),wt=new Date(1e3*Number(_.accessToken.extendedExpiresOn)));const Dt=_.account;return{authority:Q?Q.canonicalAuthority:"",uniqueId:_.account.localAccountId,tenantId:_.account.realm,scopes:be,account:Dt.getAccountInfo(),idToken:_.idToken?.secret||"",idTokenClaims:A||{},accessToken:de,fromCache:!0,expiresOn:He,correlationId:p.correlationId||"",requestId:"",extExpiresOn:wt,familyId:_.refreshToken?.familyId||"",tokenType:_?.accessToken?.tokenType||"",state:p.state||"",cloudGraphHostName:Dt.cloudGraphHostName||"",msGraphHost:Dt.msGraphHost||"",fromNativeBroker:!1}}}class l3 extends zr{constructor(p){super(p),this.includeRedirectUri=!1}}class p2 extends my{constructor(p,_,A,Q,de,be,He,wt,Dt,dn){super(p,_,A,Q,de,be,wt,Dt,dn),this.apiId=He}acquireToken(p){var _=this;return z(function*(){if(!p.code)throw le($d);const A=yield Wr(_.initializeAuthorizationRequest.bind(_),It.StandardInteractionClientInitializeAuthorizationRequest,_.logger,_.performanceClient,p.correlationId)(p,C.InteractionType.Silent),Q=_.initializeServerTelemetryManager(_.apiId);try{const de={...A,code:p.code},be=yield Wr(_.getClientConfiguration.bind(_),It.StandardInteractionClientGetClientConfiguration,_.logger,_.performanceClient,p.correlationId)({serverTelemetryManager:Q,requestAuthority:A.authority,requestAzureCloudOptions:A.azureCloudOptions,requestExtraQueryParameters:A.extraQueryParameters,account:A.account}),He=new l3(be);_.logger.verbose("Auth code client created");const wt=new tC(He,_.browserStorage,de,_.logger,_.performanceClient);return yield Wr(wt.handleCodeResponseFromServer.bind(wt),It.HandleCodeResponseFromServer,_.logger,_.performanceClient,p.correlationId)({code:p.code,msgraph_host:p.msGraphHost,cloud_graph_host_name:p.cloudGraphHostName,cloud_instance_host_name:p.cloudInstanceHostName},A,!1)}catch(de){throw de instanceof Ut&&(de.setCorrelationId(_.correlationId),Q.cacheFailedRequest(de)),de}})()}logout(){return Promise.reject(le(qr))}}function Df(ve){const p=ve?.idTokenClaims;return p?.tfp||p?.acr?"B2C":p?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===p?.tid?"MSA":"AAD":void 0}function ME(ve,p){try{vg(ve)}catch(_){throw p.end({success:!1},_),_}}class Vv{constructor(p){this.operatingContext=p,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=p.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new gy(this.logger,this.performanceClient):ia,this.eventHandler=new iA(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new Q1(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,hg(this.config.auth),this.performanceClient):o2(this.config.auth.clientId,this.logger),this.nativeInternalStorage=new Q1(this.config.auth.clientId,{cacheLocation:an.MemoryStorage,temporaryCacheLocation:an.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new hA(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(p,_){return z(function*(){const A=new Vv(p);return yield A.initialize(_),A})()}trackPageVisibility(p){p&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},p))}initialize(p){var _=this;return z(function*(){if(_.logger.trace("initialize called"),_.initialized)return void _.logger.info("initialize has already been called, exiting early.");const A=p?.correlationId||_.getRequestCorrelationId(),Q=_.config.system.allowNativeBroker,de=_.performanceClient.startMeasurement(It.InitializeClientApplication,A);if(_.eventHandler.emitEvent($i.INITIALIZE_START),Q)try{_.nativeExtensionProvider=yield iu.createProvider(_.logger,_.config.system.nativeBrokerHandshakeTimeout,_.performanceClient)}catch(be){_.logger.verbose(be)}_.config.cache.claimsBasedCachingEnabled||(_.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield Wr(_.browserStorage.clearTokensAndKeysWithClaims.bind(_.browserStorage),It.ClearTokensAndKeysWithClaims,_.logger,_.performanceClient,A)(_.performanceClient,A)),_.initialized=!0,_.eventHandler.emitEvent($i.INITIALIZE_END),de.end({allowNativeBroker:Q,success:!0})})()}handleRedirectPromise(p){var _=this;return z(function*(){if(_.logger.verbose("handleRedirectPromise called"),ws(_.initialized),_.isBrowserEnvironment){const A=p||"";let Q=_.redirectResponse.get(A);return typeof Q>"u"?(Q=_.handleRedirectPromiseInternal(p),_.redirectResponse.set(A,Q),_.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):_.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),Q}return _.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(p){var _=this;return z(function*(){const A=_.getAllAccounts(),Q=_.browserStorage.getCachedNativeRequest(),de=Q&&iu.isNativeAvailable(_.config,_.logger,_.nativeExtensionProvider)&&_.nativeExtensionProvider&&!p,be=de?Q?.correlationId:_.browserStorage.getTemporaryCache("request.correlationId",!0)||"",He=_.performanceClient.startMeasurement(It.AcquireTokenRedirect,be);let wt;if(_.eventHandler.emitEvent($i.HANDLE_REDIRECT_START,C.InteractionType.Redirect),de&&_.nativeExtensionProvider){_.logger.trace("handleRedirectPromise - acquiring token from native platform");const Dt=new wp(_.config,_.browserStorage,_.browserCrypto,_.logger,_.eventHandler,_.navigationClient,Ko.handleRedirectPromise,_.performanceClient,_.nativeExtensionProvider,Q.accountId,_.nativeInternalStorage,Q.correlationId);wt=Wr(Dt.handleRedirectPromise.bind(Dt),It.HandleNativeRedirectPromiseMeasurement,_.logger,_.performanceClient,He.event.correlationId)(_.performanceClient,He.event.correlationId)}else{_.logger.trace("handleRedirectPromise - acquiring token from web flow");const Dt=_.createRedirectClient(be);wt=Wr(Dt.handleRedirectPromise.bind(Dt),It.HandleRedirectPromiseMeasurement,_.logger,_.performanceClient,He.event.correlationId)(p,He)}return wt.then(Dt=>(Dt?(A.length<_.getAllAccounts().length?(_.eventHandler.emitEvent($i.LOGIN_SUCCESS,C.InteractionType.Redirect,Dt),_.logger.verbose("handleRedirectResponse returned result, login success")):(_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Redirect,Dt),_.logger.verbose("handleRedirectResponse returned result, acquire token success")),He.end({success:!0,accountType:Df(Dt.account)})):He.event.errorCode?He.end({success:!1}):He.discard(),_.eventHandler.emitEvent($i.HANDLE_REDIRECT_END,C.InteractionType.Redirect),Dt)).catch(Dt=>{const dn=Dt;throw _.eventHandler.emitEvent(A.length>0?$i.ACQUIRE_TOKEN_FAILURE:$i.LOGIN_FAILURE,C.InteractionType.Redirect,null,dn),_.eventHandler.emitEvent($i.HANDLE_REDIRECT_END,C.InteractionType.Redirect),He.end({success:!1},dn),Dt})})()}acquireTokenRedirect(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p);_.logger.verbose("acquireTokenRedirect called",A);const Q=_.performanceClient.startMeasurement(It.AcquireTokenPreRedirect,A);Q.add({accountType:Df(p.account),scenarioId:p.scenarioId});const de=p.onRedirectNavigate;if(de)p.onRedirectNavigate=He=>{const wt="function"==typeof de?de(He):void 0;return!1!==wt?Q.end({success:!0}):Q.discard(),wt};else{const He=_.config.auth.onRedirectNavigate;_.config.auth.onRedirectNavigate=wt=>{const Dt="function"==typeof He?He(wt):void 0;return!1!==Dt?Q.end({success:!0}):Q.discard(),Dt}}const be=_.getAllAccounts().length>0;try{let He;return Pf(_.initialized,_.config),_.browserStorage.setInteractionInProgress(!0),_.eventHandler.emitEvent(be?$i.ACQUIRE_TOKEN_START:$i.LOGIN_START,C.InteractionType.Redirect,p),He=_.nativeExtensionProvider&&_.canUseNative(p)?new wp(_.config,_.browserStorage,_.browserCrypto,_.logger,_.eventHandler,_.navigationClient,Ko.acquireTokenRedirect,_.performanceClient,_.nativeExtensionProvider,_.getNativeAccountId(p),_.nativeInternalStorage,A).acquireTokenRedirect(p,Q).catch(Dt=>{if(Dt instanceof Ep&&Sp(Dt))return _.nativeExtensionProvider=void 0,_.createRedirectClient(A).acquireToken(p);if(Dt instanceof Ll)return _.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),_.createRedirectClient(A).acquireToken(p);throw _.browserStorage.setInteractionInProgress(!1),Dt}):_.createRedirectClient(A).acquireToken(p),yield He}catch(He){throw Q.end({success:!1},He),_.eventHandler.emitEvent(be?$i.ACQUIRE_TOKEN_FAILURE:$i.LOGIN_FAILURE,C.InteractionType.Redirect,null,He),He}})()}acquireTokenPopup(p){const _=this.getRequestCorrelationId(p),A=this.performanceClient.startMeasurement(It.AcquireTokenPopup,_);A.add({scenarioId:p.scenarioId,accountType:Df(p.account)});try{this.logger.verbose("acquireTokenPopup called",_),ME(this.initialized,A),this.browserStorage.setInteractionInProgress(!0)}catch(be){return Promise.reject(be)}const Q=this.getAllAccounts();let de;return this.eventHandler.emitEvent(Q.length>0?$i.ACQUIRE_TOKEN_START:$i.LOGIN_START,C.InteractionType.Popup,p),de=this.canUseNative(p)?this.acquireTokenNative({...p,correlationId:_},Ko.acquireTokenPopup).then(be=>(this.browserStorage.setInteractionInProgress(!1),A.end({success:!0,isNativeBroker:!0,requestId:be.requestId,accountType:Df(be.account)}),be)).catch(be=>{if(be instanceof Ep&&Sp(be))return this.nativeExtensionProvider=void 0,this.createPopupClient(_).acquireToken(p);if(be instanceof Ll)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(_).acquireToken(p);throw this.browserStorage.setInteractionInProgress(!1),be}):this.createPopupClient(_).acquireToken(p),de.then(be=>(Q.length<this.getAllAccounts().length?this.eventHandler.emitEvent($i.LOGIN_SUCCESS,C.InteractionType.Popup,be):this.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Popup,be),A.end({success:!0,requestId:be.requestId,accessTokenSize:be.accessToken.length,idTokenSize:be.idToken.length,accountType:Df(be.account)}),be)).catch(be=>(this.eventHandler.emitEvent(Q.length>0?$i.ACQUIRE_TOKEN_FAILURE:$i.LOGIN_FAILURE,C.InteractionType.Popup,null,be),A.end({success:!1},be),Promise.reject(be)))}trackPageVisibilityWithMeasurement(){const p=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;p&&(this.logger.info("Perf: Visibility change detected in ",p.event.name),p.increment({visibilityChangeCount:1}))}ssoSilent(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p),Q={...p,prompt:p.prompt,correlationId:A};let de;return _.ssoSilentMeasurement=_.performanceClient.startMeasurement(It.SsoSilent,A),_.ssoSilentMeasurement?.add({scenarioId:p.scenarioId,accountType:Df(p.account)}),ME(_.initialized,_.ssoSilentMeasurement),_.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",_.trackPageVisibilityWithMeasurement),_.logger.verbose("ssoSilent called",A),_.eventHandler.emitEvent($i.SSO_SILENT_START,C.InteractionType.Silent,Q),de=_.canUseNative(Q)?_.acquireTokenNative(Q,Ko.ssoSilent).catch(be=>{if(be instanceof Ep&&Sp(be))return _.nativeExtensionProvider=void 0,_.createSilentIframeClient(Q.correlationId).acquireToken(Q);throw be}):_.createSilentIframeClient(Q.correlationId).acquireToken(Q),de.then(be=>(_.eventHandler.emitEvent($i.SSO_SILENT_SUCCESS,C.InteractionType.Silent,be),_.ssoSilentMeasurement?.end({success:!0,isNativeBroker:be.fromNativeBroker,requestId:be.requestId,accessTokenSize:be.accessToken.length,idTokenSize:be.idToken.length,accountType:Df(be.account)}),be)).catch(be=>{throw _.eventHandler.emitEvent($i.SSO_SILENT_FAILURE,C.InteractionType.Silent,null,be),_.ssoSilentMeasurement?.end({success:!1},be),be}).finally(()=>{document.removeEventListener("visibilitychange",_.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p);_.logger.trace("acquireTokenByCode called",A);const Q=_.performanceClient.startMeasurement(It.AcquireTokenByCode,A);ME(_.initialized,Q),_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_BY_CODE_START,C.InteractionType.Silent,p),Q.add({scenarioId:p.scenarioId});try{if(p.code&&p.nativeAccountId)throw le(Ym);if(p.code){const de=p.code;let be=_.hybridAuthCodeResponses.get(de);return be?(_.logger.verbose("Existing acquireTokenByCode request found",A),Q.discard()):(_.logger.verbose("Initiating new acquireTokenByCode request",A),be=_.acquireTokenByCodeAsync({...p,correlationId:A}).then(He=>(_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_BY_CODE_SUCCESS,C.InteractionType.Silent,He),_.hybridAuthCodeResponses.delete(de),Q.end({success:!0,isNativeBroker:He.fromNativeBroker,requestId:He.requestId,accessTokenSize:He.accessToken.length,idTokenSize:He.idToken.length,accountType:Df(He.account)}),He)).catch(He=>{throw _.hybridAuthCodeResponses.delete(de),_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_BY_CODE_FAILURE,C.InteractionType.Silent,null,He),Q.end({success:!1},He),He}),_.hybridAuthCodeResponses.set(de,be)),yield be}if(p.nativeAccountId){if(_.canUseNative(p,p.nativeAccountId)){const de=yield _.acquireTokenNative({...p,correlationId:A},Ko.acquireTokenByCode,p.nativeAccountId).catch(be=>{throw be instanceof Ep&&Sp(be)&&(_.nativeExtensionProvider=void 0),be});return Q.end({accountType:Df(de.account),success:!0}),de}throw le(im)}throw le(Km)}catch(de){throw _.eventHandler.emitEvent($i.ACQUIRE_TOKEN_BY_CODE_FAILURE,C.InteractionType.Silent,null,de),Q.end({success:!1},de),de}})()}acquireTokenByCodeAsync(p){var _=this;return z(function*(){return _.logger.trace("acquireTokenByCodeAsync called",p.correlationId),_.acquireTokenByCodeAsyncMeasurement=_.performanceClient.startMeasurement(It.AcquireTokenByCodeAsync,p.correlationId),_.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",_.trackPageVisibilityWithMeasurement),yield _.createSilentAuthCodeClient(p.correlationId).acquireToken(p).then(de=>(_.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:de.fromCache,isNativeBroker:de.fromNativeBroker,requestId:de.requestId}),de)).catch(de=>{throw _.acquireTokenByCodeAsyncMeasurement?.end({success:!1},de),de}).finally(()=>{document.removeEventListener("visibilitychange",_.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(p,_){var A=this;return z(function*(){switch(A.performanceClient.addQueueMeasurement(It.AcquireTokenFromCache,p.correlationId),_){case Gd.Default:case Gd.AccessToken:case Gd.AccessTokenAndRefreshToken:const Q=A.createSilentCacheClient(p.correlationId);return Wr(Q.acquireToken.bind(Q),It.SilentCacheClientAcquireToken,A.logger,A.performanceClient,p.correlationId)(p);default:throw xn(so)}})()}acquireTokenByRefreshToken(p,_){var A=this;return z(function*(){switch(A.performanceClient.addQueueMeasurement(It.AcquireTokenByRefreshToken,p.correlationId),_){case Gd.Default:case Gd.AccessTokenAndRefreshToken:case Gd.RefreshToken:case Gd.RefreshTokenAndNetwork:const Q=A.createSilentRefreshClient(p.correlationId);return Wr(Q.acquireToken.bind(Q),It.SilentRefreshClientAcquireToken,A.logger,A.performanceClient,p.correlationId)(p);default:throw xn(so)}})()}acquireTokenBySilentIframe(p){var _=this;return z(function*(){_.performanceClient.addQueueMeasurement(It.AcquireTokenBySilentIframe,p.correlationId);const A=_.createSilentIframeClient(p.correlationId);return Wr(A.acquireToken.bind(A),It.SilentIframeClientAcquireToken,_.logger,_.performanceClient,p.correlationId)(p)})()}logout(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p);return _.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",A),_.logoutRedirect({correlationId:A,...p})})()}logoutRedirect(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p);return Pf(_.initialized,_.config),_.browserStorage.setInteractionInProgress(!0),_.createRedirectClient(A).logout(p)})()}logoutPopup(p){try{const _=this.getRequestCorrelationId(p);return vg(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(_).logout(p)}catch(_){return Promise.reject(_)}}clearCache(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p);return _.createSilentCacheClient(A).logout(p)})()}getAllAccounts(p){return a2(this.logger,this.browserStorage,this.isBrowserEnvironment,p)}getAccount(p){return _E(p,this.logger,this.browserStorage)}getAccountByUsername(p){return s2(p,this.logger,this.browserStorage)}getAccountByHomeId(p){return c2(p,this.logger,this.browserStorage)}getAccountByLocalId(p){return Bv(p,this.logger,this.browserStorage)}setActiveAccount(p){rA(p,this.browserStorage)}getActiveAccount(){return l2(this.browserStorage)}hydrateCache(p,_){var A=this;return z(function*(){A.logger.verbose("hydrateCache called");const Q=nc.createFromAccountInfo(p.account,p.cloudGraphHostName,p.msGraphHost);return A.browserStorage.setAccount(Q),p.fromNativeBroker?(A.logger.verbose("Response was from native broker, storing in-memory"),A.nativeInternalStorage.hydrateCache(p,_)):A.browserStorage.hydrateCache(p,_)})()}acquireTokenNative(p,_,A){var Q=this;return z(function*(){if(Q.logger.trace("acquireTokenNative called"),!Q.nativeExtensionProvider)throw le(vp);return new wp(Q.config,Q.browserStorage,Q.browserCrypto,Q.logger,Q.eventHandler,Q.navigationClient,_,Q.performanceClient,Q.nativeExtensionProvider,A||Q.getNativeAccountId(p),Q.nativeInternalStorage,p.correlationId).acquireToken(p)})()}canUseNative(p,_){if(this.logger.trace("canUseNative called"),!iu.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,p.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(p.prompt)switch(p.prompt){case J.NONE:case J.CONSENT:case J.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${p.prompt} is not compatible with native flow, returning false`),!1}return!(!_&&!this.getNativeAccountId(p)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(p){const _=p.account||this.getAccount({loginHint:p.loginHint,sid:p.sid})||this.getActiveAccount();return _&&_.nativeAccountId||""}createPopupClient(p){return new Tp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,p)}createRedirectClient(p){return new uA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,p)}createSilentIframeClient(p){return new $v(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ko.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,p)}createSilentCacheClient(p){return new lA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,p)}createSilentRefreshClient(p){return new IE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,p)}createSilentAuthCodeClient(p){return new p2(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ko.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,p)}addEventCallback(p){return this.eventHandler.addEventCallback(p)}removeEventCallback(p){this.eventHandler.removeEventCallback(p)}addPerformanceCallback(p){return this.performanceClient.addPerformanceCallback(p)}removePerformanceCallback(p){return this.performanceClient.removePerformanceCallback(p)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(p){this.logger=p}initializeWrapperLibrary(p,_){this.browserStorage.setWrapperMetadata(p,_)}setNavigationClient(p){this.navigationClient=p}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(p){return p?.correlationId?p.correlationId:this.isBrowserEnvironment?Cp():T.EMPTY_STRING}loginRedirect(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p);return _.logger.verbose("loginRedirect called",A),_.acquireTokenRedirect({correlationId:A,...p||Mu})})()}loginPopup(p){const _=this.getRequestCorrelationId(p);return this.logger.verbose("loginPopup called",_),this.acquireTokenPopup({correlationId:_,...p||Mu})}acquireTokenSilent(p){var _=this;return z(function*(){const A=_.getRequestCorrelationId(p),Q=_.performanceClient.startMeasurement(It.AcquireTokenSilent,A);Q.add({cacheLookupPolicy:p.cacheLookupPolicy,scenarioId:p.scenarioId}),ME(_.initialized,Q),_.logger.verbose("acquireTokenSilent called",A);const de=p.account||_.getActiveAccount();if(!de)throw le(Fa);Q.add({accountType:Df(de)});const He=JSON.stringify({clientId:_.config.auth.clientId,authority:p.authority||T.EMPTY_STRING,scopes:p.scopes,homeAccountIdentifier:de.homeAccountId,claims:p.claims,authenticationScheme:p.authenticationScheme,resourceRequestMethod:p.resourceRequestMethod,resourceRequestUri:p.resourceRequestUri,shrClaims:p.shrClaims,sshKid:p.sshKid,shrOptions:p.shrOptions}),wt=_.activeSilentTokenRequests.get(He);if(typeof wt>"u"){_.logger.verbose("acquireTokenSilent called for the first time, storing active request",A);const Dt=Wr(_.acquireTokenSilentAsync.bind(_),It.AcquireTokenSilentAsync,_.logger,_.performanceClient,A)({...p,correlationId:A},de).then(dn=>(_.activeSilentTokenRequests.delete(He),Q.end({success:!0,fromCache:dn.fromCache,isNativeBroker:dn.fromNativeBroker,cacheLookupPolicy:p.cacheLookupPolicy,requestId:dn.requestId,accessTokenSize:dn.accessToken.length,idTokenSize:dn.idToken.length}),dn)).catch(dn=>{throw _.activeSilentTokenRequests.delete(He),Q.end({success:!1},dn),dn});return _.activeSilentTokenRequests.set(He,Dt),{...yield Dt,state:p.state}}return _.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",A),Q.discard(),{...yield wt,state:p.state}})()}acquireTokenSilentAsync(p,_){var A=this;return z(function*(){const Q=()=>A.trackPageVisibility(p.correlationId);A.performanceClient.addQueueMeasurement(It.AcquireTokenSilentAsync,p.correlationId),A.eventHandler.emitEvent($i.ACQUIRE_TOKEN_START,C.InteractionType.Silent,p),p.correlationId&&A.performanceClient.incrementFields({visibilityChangeCount:0},p.correlationId),document.addEventListener("visibilitychange",Q);const de=yield Wr(CE,It.InitializeSilentRequest,A.logger,A.performanceClient,p.correlationId)(p,_,A.config,A.performanceClient,A.logger),be=p.cacheLookupPolicy||Gd.Default;return A.acquireTokenSilentNoIframe(de,be).catch(function(){var wt=z(function*(Dt){if(function r_(ve,p){const Q=!(ve instanceof Ll&&ve.subError!==Sh)&&(ve.errorCode===we.INVALID_GRANT_ERROR||ve.errorCode===so)||ve.errorCode===go||ve.errorCode===Ed,de=$1.includes(p);return Q&&de}(Dt,be)){if(A.activeIframeRequest){if(be!==Gd.Skip){const[ti,ai]=A.activeIframeRequest;A.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${ai}`,de.correlationId);const yo=A.performanceClient.startMeasurement(It.AwaitConcurrentIframe,de.correlationId);yo.add({awaitIframeCorrelationId:ai});const Za=yield ti;if(yo.end({success:Za}),Za)return A.logger.verbose(`Parallel iframe request with correlationId: ${ai} succeeded. Retrying cache and/or RT redemption`,de.correlationId),A.acquireTokenSilentNoIframe(de,be);throw A.logger.info(`Iframe request with correlationId: ${ai} failed. Interaction is required.`),Dt}return A.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",de.correlationId),Wr(A.acquireTokenBySilentIframe.bind(A),It.AcquireTokenBySilentIframe,A.logger,A.performanceClient,de.correlationId)(de)}{let ti;return A.activeIframeRequest=[new Promise(ai=>{ti=ai}),de.correlationId],A.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",de.correlationId),Wr(A.acquireTokenBySilentIframe.bind(A),It.AcquireTokenBySilentIframe,A.logger,A.performanceClient,de.correlationId)(de).then(ai=>(ti(!0),ai)).catch(ai=>{throw ti(!1),ai}).finally(()=>{A.activeIframeRequest=void 0})}}throw Dt});return function(Dt){return wt.apply(this,arguments)}}()).then(wt=>(A.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Silent,wt),p.correlationId&&A.performanceClient.addFields({fromCache:wt.fromCache,isNativeBroker:wt.fromNativeBroker,requestId:wt.requestId},p.correlationId),wt)).catch(wt=>{throw A.eventHandler.emitEvent($i.ACQUIRE_TOKEN_FAILURE,C.InteractionType.Silent,null,wt),wt}).finally(()=>{document.removeEventListener("visibilitychange",Q)})})()}acquireTokenSilentNoIframe(p,_){var A=this;return z(function*(){return iu.isNativeAvailable(A.config,A.logger,A.nativeExtensionProvider,p.authenticationScheme)&&p.account.nativeAccountId?(A.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),A.acquireTokenNative(p,Ko.acquireTokenSilent_silentFlow).catch(function(){var Q=z(function*(de){throw de instanceof Ep&&Sp(de)?(A.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),A.nativeExtensionProvider=void 0,xn(so)):de});return function(de){return Q.apply(this,arguments)}}())):(A.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),Wr(A.acquireTokenFromCache.bind(A),It.AcquireTokenFromCache,A.logger,A.performanceClient,p.correlationId)(p,_).catch(Q=>{if(_===Gd.AccessToken)throw Q;return A.eventHandler.emitEvent($i.ACQUIRE_TOKEN_NETWORK_START,C.InteractionType.Silent,p),Wr(A.acquireTokenByRefreshToken.bind(A),It.AcquireTokenByRefreshToken,A.logger,A.performanceClient,p.correlationId)(p,_)}))})()}}class g2{constructor(p,_,A,Q){this.clientId=p,this.clientCapabilities=_,this.crypto=A,this.logger=Q}toNaaTokenRequest(p){let _;_=void 0===p.extraQueryParameters?new Map:new Map(Object.entries(p.extraQueryParameters));const Q=(new Cd).addClientCapabilitiesToClaims(p.claims,this.clientCapabilities),de=p.scopes||N;return{platformBrokerId:p.account?.homeAccountId,clientId:this.clientId,authority:p.authority,scope:de.join(" "),correlationId:void 0!==p.correlationId?p.correlationId:this.crypto.createNewGuid(),claims:_c.isEmptyObj(Q)?void 0:Q,state:p.state,authenticationScheme:p.authenticationScheme||Ht.BEARER,extraParameters:_}}fromNaaTokenResponse(p,_,A){if(!_.token.id_token||!_.token.access_token)throw xn(Oi);const Q=new Date(1e3*(A+(_.token.expires_in||0))),de=qs(_.token.id_token,this.crypto.base64Decode),be=this.fromNaaAccountInfo(_.account,_.token.id_token,de);return{authority:_.token.authority||be.environment,uniqueId:be.localAccountId,tenantId:be.tenantId,scopes:(_.token.scope||p.scope).split(" "),account:be,idToken:_.token.id_token,idTokenClaims:de,accessToken:_.token.access_token,fromCache:!1,expiresOn:Q,tokenType:p.authenticationScheme||Ht.BEARER,correlationId:p.correlationId,extExpiresOn:Q,state:p.state}}fromNaaAccountInfo(p,_,A){const Q=A||p.idTokenClaims,de=p.localAccountId||Q?.oid||Q?.sub||"",be=p.tenantId||Q?.tid||"",He=p.homeAccountId||`${de}.${be}`,wt=p.username||Q?.preferred_username||"",Dt=p.name||Q?.name,dn=new Map,ti=Zu(He,de,be,Q);return dn.set(be,ti),{homeAccountId:He,environment:p.environment,tenantId:be,username:wt,localAccountId:de,name:Dt,idToken:_,idTokenClaims:Q,tenantProfiles:dn}}fromBridgeError(p){if(!function f2(ve){return void 0!==ve.status}(p))return new Ut("unknown_error","An unknown error occurred");switch(p.status){case"USER_CANCEL":return new ji(Kt);case"NO_NETWORK":return new ji(_s);case"ACCOUNT_UNAVAILABLE":return new ji(Xo);case"DISABLED":return new ji(Et);case"NESTED_APP_AUTH_UNAVAILABLE":return new ji(p.code||Et,p.description);case"TRANSIENT_ERROR":case"PERSISTENT_ERROR":return new ic(p.code,p.description);case"USER_INTERACTION_REQUIRED":return new Ll(p.code,p.description);default:return new Ut(p.code,p.description)}}toAuthenticationResultFromCache(p,_,A,Q,de){if(!_||!A)throw xn(Oi);const be=qs(_.secret,this.crypto.base64Decode),He=A.target||Q.scopes.join(" ");return{authority:A.environment||p.environment,uniqueId:p.localAccountId,tenantId:p.tenantId,scopes:He.split(" "),account:p,idToken:_.secret,idTokenClaims:be||{},accessToken:A.secret,fromCache:!0,expiresOn:new Date(1e3*Number(A.expiresOn)),tokenType:Q.authenticationScheme||Ht.BEARER,correlationId:de,extExpiresOn:new Date(1e3*Number(A.extendedExpiresOn)),state:Q.state}}}const m2_unsupportedMethod_code="unsupported_method",m2_unsupportedMethod_desc="This method is not supported in nested app environment.";class Ru extends Ut{constructor(p,_){super(p,_),Object.setPrototypeOf(this,Ru.prototype),this.name="NestedAppAuthError"}static createUnsupportedError(){return new Ru(m2_unsupportedMethod_code,m2_unsupportedMethod_desc)}}class iC{constructor(p){this.operatingContext=p;const _=this.operatingContext.getBridgeProxy();if(void 0===_)throw new Error("unexpected: bridgeProxy is undefined");this.bridgeProxy=_,this.config=p.getConfig(),this.logger=this.operatingContext.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=p.isBrowserEnvironment()?new gy(this.logger,this.performanceClient):ia,this.browserStorage=this.operatingContext.isBrowserEnvironment()?new Q1(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,hg(this.config.auth)):o2(this.config.auth.clientId,this.logger),this.eventHandler=new iA(this.logger,this.browserCrypto),this.nestedAppAuthAdapter=new g2(this.config.auth.clientId,this.config.auth.clientCapabilities,this.browserCrypto,this.logger);const A=this.bridgeProxy.getAccountContext();A&&rA(_E(A,this.logger,this.browserStorage),this.browserStorage)}getEventHandler(){return this.eventHandler}static createController(p){return z(function*(){const _=new iC(p);return Promise.resolve(_)})()}initialize(){return Promise.resolve()}ensureValidRequest(p){return p?.correlationId?p:{...p,correlationId:this.browserCrypto.createNewGuid()}}acquireTokenInteractive(p){var _=this;return z(function*(){const A=_.ensureValidRequest(p);_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_START,C.InteractionType.Popup,A);const Q=_.performanceClient.startMeasurement(It.AcquireTokenPopup,A.correlationId);Q?.add({nestedAppAuthRequest:!0});try{const de=_.nestedAppAuthAdapter.toNaaTokenRequest(A),be=vs(),He=yield _.bridgeProxy.getTokenInteractive(de),wt=_.nestedAppAuthAdapter.fromNaaTokenResponse(de,He,be);return yield _.hydrateCache(wt,p),_.browserStorage.setActiveAccount(wt.account),_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Popup,wt),Q.add({accessTokenSize:wt.accessToken.length,idTokenSize:wt.idToken.length}),Q.end({success:!0,requestId:wt.requestId}),wt}catch(de){const be=_.nestedAppAuthAdapter.fromBridgeError(de);throw _.eventHandler.emitEvent($i.ACQUIRE_TOKEN_FAILURE,C.InteractionType.Popup,null,de),Q.end({success:!1},de),be}})()}acquireTokenSilentInternal(p){var _=this;return z(function*(){const A=_.ensureValidRequest(p);_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_START,C.InteractionType.Silent,A);const Q=yield _.acquireTokenFromCache(A);if(Q)return _.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Silent,Q),Q;const de=_.performanceClient.startMeasurement(It.SsoSilent,A.correlationId);de?.increment({visibilityChangeCount:0}),de?.add({nestedAppAuthRequest:!0});try{const be=_.nestedAppAuthAdapter.toNaaTokenRequest(A),He=vs(),wt=yield _.bridgeProxy.getTokenSilent(be),Dt=_.nestedAppAuthAdapter.fromNaaTokenResponse(be,wt,He);return yield _.hydrateCache(Dt,p),_.browserStorage.setActiveAccount(Dt.account),_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Silent,Dt),de?.add({accessTokenSize:Dt.accessToken.length,idTokenSize:Dt.idToken.length}),de?.end({success:!0,requestId:Dt.requestId}),Dt}catch(be){const He=_.nestedAppAuthAdapter.fromBridgeError(be);throw _.eventHandler.emitEvent($i.ACQUIRE_TOKEN_FAILURE,C.InteractionType.Silent,null,be),de?.end({success:!1},be),He}})()}acquireTokenFromCache(p){var _=this;return z(function*(){const A=_.performanceClient.startMeasurement(It.AcquireTokenSilent,p.correlationId);A?.add({nestedAppAuthRequest:!0});const Q=yield _.acquireTokenFromCacheInternal(p);return Q?(_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_SUCCESS,C.InteractionType.Silent,Q),A?.add({accessTokenSize:Q?.accessToken.length,idTokenSize:Q?.idToken.length}),A?.end({success:!0}),Q):(_.logger.error("Cached tokens are not found for the account, proceeding with silent token request."),_.eventHandler.emitEvent($i.ACQUIRE_TOKEN_FAILURE,C.InteractionType.Silent,null),A?.end({success:!1}),null)})()}acquireTokenFromCacheInternal(p){var _=this;return z(function*(){const A=_.bridgeProxy.getAccountContext();let Q=null;if(A&&(Q=_E(A,_.logger,_.browserStorage)||p.account),!Q)return _.logger.verbose("No active account found, falling back to the host"),Promise.resolve(null);_.logger.verbose("active account found, attempting to acquire token silently");const de={...p,correlationId:p.correlationId||_.browserCrypto.createNewGuid(),authority:p.authority||Q.environment,scopes:p.scopes?.length?p.scopes:[...N]},be=_.browserStorage.getTokenKeys(),He=_.browserStorage.getAccessToken(Q,de,be,Q.tenantId,_.performanceClient,de.correlationId);if(!He)return _.logger.verbose("No cached access token found"),Promise.resolve(null);if(Pc(He.cachedAt)||Va(He.expiresOn,_.config.system.tokenRenewalOffsetSeconds)){_.logger.verbose("Cached access token has expired, deleting all related tokens from cache");const Dt=nc.createFromAccountInfo(Q);return yield _.browserStorage.removeAccountContext(Dt),Promise.resolve(null)}const wt=_.browserStorage.getIdToken(Q,be,Q.tenantId,_.performanceClient,de.correlationId);return wt?_.nestedAppAuthAdapter.toAuthenticationResultFromCache(Q,wt,He,de,de.correlationId):(_.logger.verbose("No cached id token found"),Promise.resolve(null))})()}acquireTokenPopup(p){var _=this;return z(function*(){return _.acquireTokenInteractive(p)})()}acquireTokenRedirect(p){throw Ru.createUnsupportedError()}acquireTokenSilent(p){var _=this;return z(function*(){return _.acquireTokenSilentInternal(p)})()}acquireTokenByCode(p){throw Ru.createUnsupportedError()}acquireTokenNative(p,_,A){throw Ru.createUnsupportedError()}acquireTokenByRefreshToken(p,_){throw Ru.createUnsupportedError()}addEventCallback(p){return this.eventHandler.addEventCallback(p)}removeEventCallback(p){this.eventHandler.removeEventCallback(p)}addPerformanceCallback(p){throw Ru.createUnsupportedError()}removePerformanceCallback(p){throw Ru.createUnsupportedError()}enableAccountStorageEvents(){throw Ru.createUnsupportedError()}disableAccountStorageEvents(){throw Ru.createUnsupportedError()}getAllAccounts(p){return a2(this.logger,this.browserStorage,this.isBrowserEnv(),p)}getAccount(p){return _E(p,this.logger,this.browserStorage)}getAccountByUsername(p){return s2(p,this.logger,this.browserStorage)}getAccountByHomeId(p){return c2(p,this.logger,this.browserStorage)}getAccountByLocalId(p){return Bv(p,this.logger,this.browserStorage)}setActiveAccount(p){return rA(p,this.browserStorage)}getActiveAccount(){return l2(this.browserStorage)}handleRedirectPromise(p){return Promise.resolve(null)}loginPopup(p){return this.acquireTokenInteractive(p||Mu)}loginRedirect(p){throw Ru.createUnsupportedError()}logout(p){throw Ru.createUnsupportedError()}logoutRedirect(p){throw Ru.createUnsupportedError()}logoutPopup(p){throw Ru.createUnsupportedError()}ssoSilent(p){return this.acquireTokenSilentInternal(p)}getTokenCache(){throw Ru.createUnsupportedError()}getLogger(){return this.logger}setLogger(p){this.logger=p}initializeWrapperLibrary(p,_){}setNavigationClient(p){this.logger.warning("setNavigationClient is not supported in nested app auth")}getConfiguration(){return this.config}isBrowserEnv(){return this.operatingContext.isBrowserEnvironment()}getBrowserCrypto(){return this.browserCrypto}getPerformanceClient(){throw Ru.createUnsupportedError()}getRedirectResponse(){throw Ru.createUnsupportedError()}clearCache(p){return z(function*(){throw Ru.createUnsupportedError()})()}hydrateCache(p,_){var A=this;return z(function*(){A.logger.verbose("hydrateCache called");const Q=nc.createFromAccountInfo(p.account,p.cloudGraphHostName,p.msGraphHost);return A.browserStorage.setAccount(Q),A.browserStorage.hydrateCache(p,_)})()}}function Ha(){return Ha=z(function*(ve,p){const _=new bg(ve);return yield _.initialize(),Vv.createController(_,p)}),Ha.apply(this,arguments)}function OE(ve){return oC.apply(this,arguments)}function oC(){return oC=z(function*(ve){const p=new bg(ve),_=new K1(ve),A=[p.initialize(),_.initialize()];return yield Promise.all(A),_.isAvailable()&&ve.auth.supportsNestedAppAuth?iC.createController(_):p.isAvailable()?Vv.createController(p):null}),oC.apply(this,arguments)}class sc{static createPublicClientApplication(p){return z(function*(){const _=yield function Xn(ve,p){return Ha.apply(this,arguments)}(p);return new sc(p,_)})()}constructor(p,_){this.controller=_||new Vv(new bg(p))}initialize(p){var _=this;return z(function*(){return _.controller.initialize(p)})()}acquireTokenPopup(p){var _=this;return z(function*(){return _.controller.acquireTokenPopup(p)})()}acquireTokenRedirect(p){return this.controller.acquireTokenRedirect(p)}acquireTokenSilent(p){return this.controller.acquireTokenSilent(p)}acquireTokenByCode(p){return this.controller.acquireTokenByCode(p)}addEventCallback(p){return this.controller.addEventCallback(p)}removeEventCallback(p){return this.controller.removeEventCallback(p)}addPerformanceCallback(p){return this.controller.addPerformanceCallback(p)}removePerformanceCallback(p){return this.controller.removePerformanceCallback(p)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(p){return this.controller.getAccount(p)}getAccountByHomeId(p){return this.controller.getAccountByHomeId(p)}getAccountByLocalId(p){return this.controller.getAccountByLocalId(p)}getAccountByUsername(p){return this.controller.getAccountByUsername(p)}getAllAccounts(p){return this.controller.getAllAccounts(p)}handleRedirectPromise(p){return this.controller.handleRedirectPromise(p)}loginPopup(p){return this.controller.loginPopup(p)}loginRedirect(p){return this.controller.loginRedirect(p)}logout(p){return this.controller.logout(p)}logoutRedirect(p){return this.controller.logoutRedirect(p)}logoutPopup(p){return this.controller.logoutPopup(p)}ssoSilent(p){return this.controller.ssoSilent(p)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(p){this.controller.setLogger(p)}setActiveAccount(p){this.controller.setActiveAccount(p)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(p,_){return this.controller.initializeWrapperLibrary(p,_)}setNavigationClient(p){this.controller.setNavigationClient(p)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(p,_){var A=this;return z(function*(){return A.controller.hydrateCache(p,_)})()}clearCache(p){return this.controller.clearCache(p)}}function i_(){return i_=z(function*(ve){const p=new K1(ve);if(yield p.initialize(),p.isAvailable()){const _=new iC(p);return new sc(ve,_)}return sf(ve)}),i_.apply(this,arguments)}function sf(ve){return o_.apply(this,arguments)}function o_(){return o_=z(function*(ve){const p=new sc(ve);return yield p.initialize(),p}),o_.apply(this,arguments)}class yy{constructor(p){this.initialized=!1,this.operatingContext=p,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=p.getConfig(),this.logger=p.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new gy(this.logger,this.performanceClient):ia,this.browserStorage=this.isBrowserEnvironment?new Q1(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,void 0,this.performanceClient):o2(this.config.auth.clientId,this.logger),this.eventHandler=new iA(this.logger,this.browserCrypto)}getBrowserStorage(){return this.browserStorage}getEventHandler(){return this.eventHandler}getAccount(p){return null}getAccountByHomeId(p){return null}getAccountByLocalId(p){return null}getAccountByUsername(p){return null}getAllAccounts(){return[]}initialize(){return this.initialized=!0,Promise.resolve()}acquireTokenPopup(p){return ws(this.initialized),Uo(),{}}acquireTokenRedirect(p){return ws(this.initialized),Uo(),Promise.resolve()}acquireTokenSilent(p){return ws(this.initialized),Uo(),{}}acquireTokenByCode(p){return ws(this.initialized),Uo(),{}}acquireTokenNative(p,_,A){return ws(this.initialized),Uo(),{}}acquireTokenByRefreshToken(p,_){return ws(this.initialized),Uo(),{}}addEventCallback(p){return this.eventHandler.addEventCallback(p)}removeEventCallback(p){this.eventHandler.removeEventCallback(p)}addPerformanceCallback(p){return ws(this.initialized),Uo(),""}removePerformanceCallback(p){return ws(this.initialized),Uo(),!0}enableAccountStorageEvents(){ws(this.initialized),Uo()}disableAccountStorageEvents(){ws(this.initialized),Uo()}handleRedirectPromise(p){return ws(this.initialized),Promise.resolve(null)}loginPopup(p){return ws(this.initialized),Uo(),{}}loginRedirect(p){return ws(this.initialized),Uo(),{}}logout(p){return ws(this.initialized),Uo(),{}}logoutRedirect(p){return ws(this.initialized),Uo(),{}}logoutPopup(p){return ws(this.initialized),Uo(),{}}ssoSilent(p){return ws(this.initialized),Uo(),{}}getTokenCache(){return ws(this.initialized),Uo(),{}}getLogger(){return this.logger}setLogger(p){ws(this.initialized),Uo()}setActiveAccount(p){ws(this.initialized),Uo()}getActiveAccount(){return ws(this.initialized),Uo(),null}initializeWrapperLibrary(p,_){this.browserStorage.setWrapperMetadata(p,_)}setNavigationClient(p){ws(this.initialized),Uo()}getConfiguration(){return this.config}isBrowserEnv(){return ws(this.initialized),Uo(),!0}getBrowserCrypto(){return ws(this.initialized),Uo(),{}}getPerformanceClient(){return ws(this.initialized),Uo(),{}}getRedirectResponse(){return ws(this.initialized),Uo(),{}}clearCache(p){var _=this;return z(function*(){ws(_.initialized),Uo()})()}hydrateCache(p,_){var A=this;return z(function*(){ws(A.initialized),Uo()})()}}let aC=(()=>{class ve extends um{getId(){return ve.ID}getModuleName(){return ve.MODULE_NAME}initialize(){return z(function*(){return!0})()}}return ve.MODULE_NAME="",ve.ID="UnknownOperatingContext",ve})();class Gv{static createPublicClientApplication(p){return z(function*(){const _=yield OE(p);let A;return A=null!==_?new Gv(p,_):new Gv(p),A})()}constructor(p,_){if(this.configuration=p,_)this.controller=_;else{const A=new aC(p);this.controller=new yy(A)}}initialize(){var p=this;return z(function*(){if(p.controller instanceof yy){const _=yield OE(p.configuration);return null!==_&&(p.controller=_),p.controller.initialize()}return Promise.resolve()})()}acquireTokenPopup(p){var _=this;return z(function*(){return _.controller.acquireTokenPopup(p)})()}acquireTokenRedirect(p){return this.controller.acquireTokenRedirect(p)}acquireTokenSilent(p){return this.controller.acquireTokenSilent(p)}acquireTokenByCode(p){return this.controller.acquireTokenByCode(p)}addEventCallback(p){return this.controller.addEventCallback(p)}removeEventCallback(p){return this.controller.removeEventCallback(p)}addPerformanceCallback(p){return this.controller.addPerformanceCallback(p)}removePerformanceCallback(p){return this.controller.removePerformanceCallback(p)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(p){return this.controller.getAccount(p)}getAccountByHomeId(p){return this.controller.getAccountByHomeId(p)}getAccountByLocalId(p){return this.controller.getAccountByLocalId(p)}getAccountByUsername(p){return this.controller.getAccountByUsername(p)}getAllAccounts(p){return this.controller.getAllAccounts(p)}handleRedirectPromise(p){return this.controller.handleRedirectPromise(p)}loginPopup(p){return this.controller.loginPopup(p)}loginRedirect(p){return this.controller.loginRedirect(p)}logout(p){return this.controller.logout(p)}logoutRedirect(p){return this.controller.logoutRedirect(p)}logoutPopup(p){return this.controller.logoutPopup(p)}ssoSilent(p){return this.controller.ssoSilent(p)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(p){this.controller.setLogger(p)}setActiveAccount(p){this.controller.setActiveAccount(p)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(p,_){return this.controller.initializeWrapperLibrary(p,_)}setNavigationClient(p){this.controller.setNavigationClient(p)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(p,_){var A=this;return z(function*(){return A.controller.hydrateCache(p,_)})()}clearCache(p){return this.controller.clearCache(p)}}const pA={initialize:()=>Promise.reject(Us(Fl)),acquireTokenPopup:()=>Promise.reject(Us(Fl)),acquireTokenRedirect:()=>Promise.reject(Us(Fl)),acquireTokenSilent:()=>Promise.reject(Us(Fl)),acquireTokenByCode:()=>Promise.reject(Us(Fl)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Us(Fl)),loginPopup:()=>Promise.reject(Us(Fl)),loginRedirect:()=>Promise.reject(Us(Fl)),logout:()=>Promise.reject(Us(Fl)),logoutRedirect:()=>Promise.reject(Us(Fl)),logoutPopup:()=>Promise.reject(Us(Fl)),ssoSilent:()=>Promise.reject(Us(Fl)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Us(Fl)},getLogger:()=>{throw Us(Fl)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Us(Fl)},hydrateCache:()=>Promise.reject(Us(Fl)),clearCache:()=>Promise.reject(Us(Fl))};function sC(){let ve;try{ve=window[an.SessionStorage];const p=ve?.getItem("msal.browser.performance.enabled");if(1===Number(p))return Promise.resolve().then(function(){return Lf})}catch{}}function rd(){return typeof window<"u"&&typeof window.performance<"u"&&"function"==typeof window.performance.now}function kf(ve){if(ve&&rd())return Math.round(window.performance.now()-ve)}class Hl{constructor(p,_){this.correlationId=_,this.measureName=Hl.makeMeasureName(p,_),this.startMark=Hl.makeStartMark(p,_),this.endMark=Hl.makeEndMark(p,_)}static makeMeasureName(p,_){return`msal.measure.${p}.${_}`}static makeStartMark(p,_){return`msal.start.${p}.${_}`}static makeEndMark(p,_){return`msal.end.${p}.${_}`}static supportsBrowserPerformance(){return typeof window<"u"&&typeof window.performance<"u"&&"function"==typeof window.performance.mark&&"function"==typeof window.performance.measure&&"function"==typeof window.performance.clearMarks&&"function"==typeof window.performance.clearMeasures&&"function"==typeof window.performance.getEntriesByName}static flushMeasurements(p,_){if(Hl.supportsBrowserPerformance())try{_.forEach(A=>{const Q=Hl.makeMeasureName(A.name,p);window.performance.getEntriesByName(Q,"measure").length>0&&(window.performance.clearMeasures(Q),window.performance.clearMarks(Hl.makeStartMark(Q,p)),window.performance.clearMarks(Hl.makeEndMark(Q,p)))})}catch{}}startMeasurement(){if(Hl.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch{}}endMeasurement(){if(Hl.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch{}}flushMeasurement(){if(Hl.supportsBrowserPerformance())try{const p=window.performance.getEntriesByName(this.measureName,"measure");if(p.length>0){const _=p[0].duration;return window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),_}}catch{}return null}}var Lf=Object.freeze({__proto__:null,BrowserPerformanceMeasurement:Hl});C.AccountEntity=nc,C.ApiId=Ko,C.AuthError=Ut,C.AuthErrorCodes=bt,C.AuthErrorMessage=fn,C.AuthenticationHeaderParser=class us{constructor(p){this.headers=p}getShrNonce(){const p=this.headers["Authentication-Info"];if(p){const A=this.parseChallenges(p);if(A.nextnonce)return A.nextnonce;throw La(mc)}const _=this.headers["WWW-Authenticate"];if(_){const A=this.parseChallenges(_);if(A.nonce)return A.nonce;throw La(mc)}throw La(ka)}parseChallenges(p){const _=p.indexOf(" "),A=p.substr(_+1).split(","),Q={};return A.forEach(de=>{const[be,He]=de.split("=");Q[be]=unescape(He.replace(/['"]+/g,T.EMPTY_STRING))}),Q}},C.AuthenticationScheme=Ht,C.AzureCloudInstance=Tl,C.BrowserAuthError=te,C.BrowserAuthErrorCodes=Cu,C.BrowserAuthErrorMessage=ue,C.BrowserCacheLocation=an,C.BrowserConfigurationAuthError=Oh,C.BrowserConfigurationAuthErrorCodes=Kr,C.BrowserConfigurationAuthErrorMessage=Ou,C.BrowserPerformanceClient=class RE extends Oe{constructor(p,_,A){super(p.auth.clientId,p.auth.authority||`${T.DEFAULT_AUTHORITY}`,new oa(p.system?.loggerOptions||{},Cg,Mc),Cg,Mc,p.telemetry?.application||{appName:"",appVersion:""},_,A)}generateId(){return Cp()}getPageVisibility(){return document.visibilityState?.toString()||null}deleteIncompleteSubMeasurements(p){sC()?.then(_=>{const A=this.eventsByCorrelationId.get(p.event.correlationId),de=[];A&&A.eventId===p.event.eventId&&A?.incompleteSubMeasurements&&A.incompleteSubMeasurements.forEach(be=>{de.push({...be})}),_.BrowserPerformanceMeasurement.flushMeasurements(p.event.correlationId,de)})}startMeasurement(p,_){const A=this.getPageVisibility(),Q=super.startMeasurement(p,_),de=rd()?window.performance.now():void 0,be=sC()?.then(He=>new He.BrowserPerformanceMeasurement(p,Q.event.correlationId));return be?.then(He=>He.startMeasurement()),{...Q,end:(He,wt)=>{const Dt=Q.end({...He,startPageVisibility:A,endPageVisibility:this.getPageVisibility(),durationMs:kf(de)},wt);return be?.then(dn=>dn.endMeasurement()),this.deleteIncompleteSubMeasurements(Q),Dt},discard:()=>{Q.discard(),be?.then(He=>He.flushMeasurement()),this.deleteIncompleteSubMeasurements(Q)}}}setPreQueueTime(p,_){if(!rd())return void this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for ${p}`);if(!_)return void this.logger.trace(`BrowserPerformanceClient: correlationId for ${p} not provided, unable to set telemetry queue time`);const A=this.preQueueTimeByCorrelationId.get(_);A&&(this.logger.trace(`BrowserPerformanceClient: Incomplete pre-queue ${A.name} found`,_),this.addQueueMeasurement(A.name,_,void 0,!0)),this.preQueueTimeByCorrelationId.set(_,{name:p,time:window.performance.now()})}addQueueMeasurement(p,_,A,Q){if(!rd())return void this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to add queue measurement for ${p}`);if(!_)return void this.logger.trace(`BrowserPerformanceClient: correlationId for ${p} not provided, unable to add queue measurement`);const de=super.getPreQueueTime(p,_);if(!de)return;const be=window.performance.now(),He=A||super.calculateQueuedTime(de,be);return super.addQueueMeasurement(p,_,He,Q)}},C.BrowserPerformanceMeasurement=Hl,C.BrowserStorage=mE,C.BrowserUtils=cm,C.CacheLookupPolicy=Gd,C.ClientAuthError=ji,C.ClientAuthErrorCodes=wn,C.ClientAuthErrorMessage=Ti,C.ClientConfigurationError=kd,C.ClientConfigurationErrorCodes=Lo,C.ClientConfigurationErrorMessage=Dd,C.DEFAULT_IFRAME_TIMEOUT_MS=fy,C.EventMessageUtils=class PE{static getInteractionStatusFromEvent(p,_){switch(p.eventType){case $i.LOGIN_START:return Kc.Login;case $i.SSO_SILENT_START:return Kc.SsoSilent;case $i.ACQUIRE_TOKEN_START:if(p.interactionType===C.InteractionType.Redirect||p.interactionType===C.InteractionType.Popup)return Kc.AcquireToken;break;case $i.HANDLE_REDIRECT_START:return Kc.HandleRedirect;case $i.LOGOUT_START:return Kc.Logout;case $i.SSO_SILENT_SUCCESS:case $i.SSO_SILENT_FAILURE:if(_&&_!==Kc.SsoSilent)break;return Kc.None;case $i.LOGOUT_END:if(_&&_!==Kc.Logout)break;return Kc.None;case $i.HANDLE_REDIRECT_END:if(_&&_!==Kc.HandleRedirect)break;return Kc.None;case $i.LOGIN_SUCCESS:case $i.LOGIN_FAILURE:case $i.ACQUIRE_TOKEN_SUCCESS:case $i.ACQUIRE_TOKEN_FAILURE:case $i.RESTORE_FROM_BFCACHE:if(p.interactionType===C.InteractionType.Redirect||p.interactionType===C.InteractionType.Popup){if(_&&_!==Kc.Login&&_!==Kc.AcquireToken)break;return Kc.None}}return null}},C.EventType=$i,C.InteractionRequiredAuthError=Ll,C.InteractionRequiredAuthErrorCodes=pg,C.InteractionRequiredAuthErrorMessage=Zc,C.InteractionStatus=Kc,C.JsonWebTokenTypes=Gr,C.Logger=oa,C.MemoryStorage=Y1,C.NavigationClient=lm,C.OIDC_DEFAULT_SCOPES=N,C.PerformanceEvents=It,C.PromptValue=J,C.ProtocolMode=Ml,C.PublicClientApplication=sc,C.PublicClientNext=Gv,C.ServerError=ic,C.ServerResponseType=U,C.SignedHttpRequest=class a_{constructor(p,_){this.logger=new oa(_&&_.loggerOptions||{},Cg,Mc),this.cryptoOps=new gy(this.logger),this.popTokenGenerator=new ie(this.cryptoOps),this.shrParameters=p}generatePublicKeyThumbprint(){var p=this;return z(function*(){const{kid:_}=yield p.popTokenGenerator.generateKid(p.shrParameters);return _})()}signRequest(p,_,A){var Q=this;return z(function*(){return Q.popTokenGenerator.signPayload(p,_,Q.shrParameters,A)})()}removeKeys(p){var _=this;return z(function*(){return _.cryptoOps.removeTokenBindingKey(p)})()}},C.StringUtils=_c,C.StubPerformanceClient=st,C.UrlString=Go,C.WrapperSKU={React:"@azure/msal-react",Angular:"@azure/msal-angular"},C.createNestablePublicClientApplication=function _2(ve){return i_.apply(this,arguments)},C.createStandardPublicClientApplication=sf,C.stubbedPublicClientApplication=pA,C.version=Mc},9293:it=>{function C(z,T,V,N,R,M,G){try{var Y=z[M](G),K=Y.value}catch(J){return void V(J)}Y.done?T(K):Promise.resolve(K).then(N,R)}it.exports=function w(z){return function(){var T=this,V=arguments;return new Promise(function(N,R){var M=z.apply(T,V);function G(K){C(M,N,R,G,Y,"next",K)}function Y(K){C(M,N,R,G,Y,"throw",K)}G(void 0)})}},it.exports.__esModule=!0,it.exports.default=it.exports},177:(it,C,w)=>{"use strict";w.r(C),w.d(C,{APP_BASE_HREF:()=>Le,AsyncPipe:()=>ka,BrowserPlatformLocation:()=>se,CommonModule:()=>Go,CurrencyPipe:()=>Ju,DATE_PIPE_DEFAULT_OPTIONS:()=>Dd,DATE_PIPE_DEFAULT_TIMEZONE:()=>Ks,DOCUMENT:()=>Y,DatePipe:()=>kd,DecimalPipe:()=>Uu,FormStyle:()=>On,FormatWidth:()=>Rn,HashLocationStrategy:()=>_t,I18nPluralPipe:()=>_c,I18nSelectPipe:()=>Ca,IMAGE_CONFIG:()=>T.\u0275IMAGE_CONFIG,IMAGE_LOADER:()=>Vl,JsonPipe:()=>Ld,KeyValuePipe:()=>Hu,LOCATION_INITIALIZED:()=>J,Location:()=>Bt,LocationStrategy:()=>Ne,LowerCasePipe:()=>mc,NgClass:()=>Ga,NgComponentOutlet:()=>hl,NgFor:()=>ut,NgForOf:()=>ut,NgForOfContext:()=>At,NgIf:()=>mr,NgIfContext:()=>pr,NgLocaleLocalization:()=>Il,NgLocalization:()=>ul,NgOptimizedImage:()=>It,NgPlural:()=>ao,NgPluralCase:()=>Jo,NgStyle:()=>la,NgSwitch:()=>co,NgSwitchCase:()=>ko,NgSwitchDefault:()=>jo,NgTemplateOutlet:()=>$s,NumberFormatStyle:()=>jt,NumberSymbol:()=>Nr,PRECONNECT_CHECK_BLOCKLIST:()=>jh,PathLocationStrategy:()=>tt,PercentPipe:()=>Wa,PlatformLocation:()=>K,Plural:()=>Yt,SlicePipe:()=>vh,TitleCasePipe:()=>tu,TranslationWidth:()=>In,UpperCasePipe:()=>Lu,VERSION:()=>bs,ViewportScroller:()=>zh,WeekDay:()=>wr,XhrFactory:()=>Rc,formatCurrency:()=>Va,formatDate:()=>Gs,formatNumber:()=>rs,formatPercent:()=>Pc,getCurrencySymbol:()=>xs,getLocaleCurrencyCode:()=>hr,getLocaleCurrencyName:()=>Dr,getLocaleCurrencySymbol:()=>Oi,getLocaleDateFormat:()=>Ut,getLocaleDateTimeFormat:()=>Pn,getLocaleDayNames:()=>Nn,getLocaleDayPeriods:()=>Tn,getLocaleDirection:()=>jr,getLocaleEraNames:()=>bt,getLocaleExtraDayPeriodRules:()=>No,getLocaleExtraDayPeriods:()=>fo,getLocaleFirstDayOfWeek:()=>qt,getLocaleId:()=>Gr,getLocaleMonthNames:()=>br,getLocaleNumberFormat:()=>ui,getLocaleNumberSymbol:()=>gr,getLocalePluralCase:()=>ra,getLocaleTimeFormat:()=>bn,getLocaleWeekEndRange:()=>fn,getNumberOfCurrencyDigits:()=>gc,isPlatformBrowser:()=>Zd,isPlatformServer:()=>fd,provideCloudflareLoader:()=>Gl,provideCloudinaryLoader:()=>oc,provideImageKitLoader:()=>rr,provideImgixLoader:()=>or,provideNetlifyLoader:()=>Af,registerLocaleData:()=>jl,\u0275DomAdapter:()=>M,\u0275NullViewportScroller:()=>Qc,\u0275PLATFORM_BROWSER_ID:()=>pd,\u0275PLATFORM_SERVER_ID:()=>fp,\u0275PlatformNavigation:()=>G,\u0275getDOM:()=>N,\u0275normalizeQueryParams:()=>Ae,\u0275parseCookieValue:()=>Dl,\u0275setRootDomAdapter:()=>R}),w(467);var T=w(3953);let V=null;function N(){return V}function R(ie){V??=ie}class M{}let G=(()=>{class ie{static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:()=>window.navigation,providedIn:"platform"})}}return ie})();const Y=new T.InjectionToken("");let K=(()=>{class ie{historyGo(pe){throw new Error("")}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:()=>(0,T.inject)(se),providedIn:"platform"})}}return ie})();const J=new T.InjectionToken("");let se=(()=>{class ie extends K{constructor(){super(),this._doc=(0,T.inject)(Y),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(pe){const Te=N().getGlobalEventTarget(this._doc,"window");return Te.addEventListener("popstate",pe,!1),()=>Te.removeEventListener("popstate",pe)}onHashChange(pe){const Te=N().getGlobalEventTarget(this._doc,"window");return Te.addEventListener("hashchange",pe,!1),()=>Te.removeEventListener("hashchange",pe)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(pe){this._location.pathname=pe}pushState(pe,Te,ot){this._history.pushState(pe,Te,ot)}replaceState(pe,Te,ot){this._history.replaceState(pe,Te,ot)}forward(){this._history.forward()}back(){this._history.back()}historyGo(pe=0){this._history.go(pe)}getState(){return this._history.state}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:()=>new ie,providedIn:"platform"})}}return ie})();function U(ie,Fe){if(0==ie.length)return Fe;if(0==Fe.length)return ie;let pe=0;return ie.endsWith("/")&&pe++,Fe.startsWith("/")&&pe++,2==pe?ie+Fe.substring(1):1==pe?ie+Fe:ie+"/"+Fe}function _e(ie){const Fe=ie.match(/#|\?|$/),pe=Fe&&Fe.index||ie.length;return ie.slice(0,pe-("/"===ie[pe-1]?1:0))+ie.slice(pe)}function Ae(ie){return ie&&"?"!==ie[0]?"?"+ie:ie}let Ne=(()=>{class ie{historyGo(pe){throw new Error("")}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:()=>(0,T.inject)(tt),providedIn:"root"})}}return ie})();const Le=new T.InjectionToken("");let tt=(()=>{class ie extends Ne{constructor(pe,Te){super(),this._platformLocation=pe,this._removeListenerFns=[],this._baseHref=Te??this._platformLocation.getBaseHrefFromDOM()??(0,T.inject)(Y).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(pe){this._removeListenerFns.push(this._platformLocation.onPopState(pe),this._platformLocation.onHashChange(pe))}getBaseHref(){return this._baseHref}prepareExternalUrl(pe){return U(this._baseHref,pe)}path(pe=!1){const Te=this._platformLocation.pathname+Ae(this._platformLocation.search),ot=this._platformLocation.hash;return ot&&pe?`${Te}${ot}`:Te}pushState(pe,Te,ot,gn){const qn=this.prepareExternalUrl(ot+Ae(gn));this._platformLocation.pushState(pe,Te,qn)}replaceState(pe,Te,ot,gn){const qn=this.prepareExternalUrl(ot+Ae(gn));this._platformLocation.replaceState(pe,Te,qn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(pe=0){this._platformLocation.historyGo?.(pe)}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275inject(K),T.\u0275\u0275inject(Le,8))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:ie.\u0275fac,providedIn:"root"})}}return ie})(),_t=(()=>{class ie extends Ne{constructor(pe,Te){super(),this._platformLocation=pe,this._baseHref="",this._removeListenerFns=[],null!=Te&&(this._baseHref=Te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(pe){this._removeListenerFns.push(this._platformLocation.onPopState(pe),this._platformLocation.onHashChange(pe))}getBaseHref(){return this._baseHref}path(pe=!1){const Te=this._platformLocation.hash??"#";return Te.length>0?Te.substring(1):Te}prepareExternalUrl(pe){const Te=U(this._baseHref,pe);return Te.length>0?"#"+Te:Te}pushState(pe,Te,ot,gn){let qn=this.prepareExternalUrl(ot+Ae(gn));0==qn.length&&(qn=this._platformLocation.pathname),this._platformLocation.pushState(pe,Te,qn)}replaceState(pe,Te,ot,gn){let qn=this.prepareExternalUrl(ot+Ae(gn));0==qn.length&&(qn=this._platformLocation.pathname),this._platformLocation.replaceState(pe,Te,qn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(pe=0){this._platformLocation.historyGo?.(pe)}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275inject(K),T.\u0275\u0275inject(Le,8))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:ie.\u0275fac})}}return ie})(),Bt=(()=>{class ie{constructor(pe){this._subject=new T.EventEmitter,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=pe;const Te=this._locationStrategy.getBaseHref();this._basePath=function Gt(ie){if(new RegExp("^(https?:)?//").test(ie)){const[,pe]=ie.split(/\/\/[^\/]+/);return pe}return ie}(_e(vt(Te))),this._locationStrategy.onPopState(ot=>{this._subject.emit({url:this.path(!0),pop:!0,state:ot.state,type:ot.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(pe=!1){return this.normalize(this._locationStrategy.path(pe))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(pe,Te=""){return this.path()==this.normalize(pe+Ae(Te))}normalize(pe){return ie.stripTrailingSlash(function Pt(ie,Fe){if(!ie||!Fe.startsWith(ie))return Fe;const pe=Fe.substring(ie.length);return""===pe||["/",";","?","#"].includes(pe[0])?pe:Fe}(this._basePath,vt(pe)))}prepareExternalUrl(pe){return pe&&"/"!==pe[0]&&(pe="/"+pe),this._locationStrategy.prepareExternalUrl(pe)}go(pe,Te="",ot=null){this._locationStrategy.pushState(ot,"",pe,Te),this._notifyUrlChangeListeners(this.prepareExternalUrl(pe+Ae(Te)),ot)}replaceState(pe,Te="",ot=null){this._locationStrategy.replaceState(ot,"",pe,Te),this._notifyUrlChangeListeners(this.prepareExternalUrl(pe+Ae(Te)),ot)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(pe=0){this._locationStrategy.historyGo?.(pe)}onUrlChange(pe){return this._urlChangeListeners.push(pe),this._urlChangeSubscription??=this.subscribe(Te=>{this._notifyUrlChangeListeners(Te.url,Te.state)}),()=>{const Te=this._urlChangeListeners.indexOf(pe);this._urlChangeListeners.splice(Te,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(pe="",Te){this._urlChangeListeners.forEach(ot=>ot(pe,Te))}subscribe(pe,Te,ot){return this._subject.subscribe({next:pe,error:Te,complete:ot})}static{this.normalizeQueryParams=Ae}static{this.joinWithSlash=U}static{this.stripTrailingSlash=_e}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275inject(Ne))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:()=>function yt(){return new Bt((0,T.\u0275\u0275inject)(Ne))}(),providedIn:"root"})}}return ie})();function vt(ie){return ie.replace(/\/index.html$/,"")}const Ht={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var jt=function(ie){return ie[ie.Decimal=0]="Decimal",ie[ie.Percent=1]="Percent",ie[ie.Currency=2]="Currency",ie[ie.Scientific=3]="Scientific",ie}(jt||{}),Yt=function(ie){return ie[ie.Zero=0]="Zero",ie[ie.One=1]="One",ie[ie.Two=2]="Two",ie[ie.Few=3]="Few",ie[ie.Many=4]="Many",ie[ie.Other=5]="Other",ie}(Yt||{}),On=function(ie){return ie[ie.Format=0]="Format",ie[ie.Standalone=1]="Standalone",ie}(On||{}),In=function(ie){return ie[ie.Narrow=0]="Narrow",ie[ie.Abbreviated=1]="Abbreviated",ie[ie.Wide=2]="Wide",ie[ie.Short=3]="Short",ie}(In||{}),Rn=function(ie){return ie[ie.Short=0]="Short",ie[ie.Medium=1]="Medium",ie[ie.Long=2]="Long",ie[ie.Full=3]="Full",ie}(Rn||{});const Nr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};var wr=function(ie){return ie[ie.Sunday=0]="Sunday",ie[ie.Monday=1]="Monday",ie[ie.Tuesday=2]="Tuesday",ie[ie.Wednesday=3]="Wednesday",ie[ie.Thursday=4]="Thursday",ie[ie.Friday=5]="Friday",ie[ie.Saturday=6]="Saturday",ie}(wr||{});function Gr(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.LocaleId]}function Tn(ie,Fe,pe){const Te=(0,T.\u0275findLocaleData)(ie),gn=Do([Te[T.\u0275LocaleDataIndex.DayPeriodsFormat],Te[T.\u0275LocaleDataIndex.DayPeriodsStandalone]],Fe);return Do(gn,pe)}function Nn(ie,Fe,pe){const Te=(0,T.\u0275findLocaleData)(ie),gn=Do([Te[T.\u0275LocaleDataIndex.DaysFormat],Te[T.\u0275LocaleDataIndex.DaysStandalone]],Fe);return Do(gn,pe)}function br(ie,Fe,pe){const Te=(0,T.\u0275findLocaleData)(ie),gn=Do([Te[T.\u0275LocaleDataIndex.MonthsFormat],Te[T.\u0275LocaleDataIndex.MonthsStandalone]],Fe);return Do(gn,pe)}function bt(ie,Fe){return Do((0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.Eras],Fe)}function qt(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.FirstDayOfWeek]}function fn(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.WeekendRange]}function Ut(ie,Fe){return Do((0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.DateFormat],Fe)}function bn(ie,Fe){return Do((0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.TimeFormat],Fe)}function Pn(ie,Fe){return Do((0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.DateTimeFormat],Fe)}function gr(ie,Fe){const pe=(0,T.\u0275findLocaleData)(ie),Te=pe[T.\u0275LocaleDataIndex.NumberSymbols][Fe];if(typeof Te>"u"){if(Fe===Nr.CurrencyDecimal)return pe[T.\u0275LocaleDataIndex.NumberSymbols][Nr.Decimal];if(Fe===Nr.CurrencyGroup)return pe[T.\u0275LocaleDataIndex.NumberSymbols][Nr.Group]}return Te}function ui(ie,Fe){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.NumberFormats][Fe]}function Oi(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.CurrencySymbol]||null}function Dr(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.CurrencyName]||null}function hr(ie){return(0,T.\u0275getLocaleCurrencyCode)(ie)}const ra=T.\u0275getLocalePluralCase;function Hi(ie){if(!ie[T.\u0275LocaleDataIndex.ExtraData])throw new Error(`Missing extra locale data for the locale "${ie[T.\u0275LocaleDataIndex.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function No(ie){const Fe=(0,T.\u0275findLocaleData)(ie);return Hi(Fe),(Fe[T.\u0275LocaleDataIndex.ExtraData][2]||[]).map(Te=>"string"==typeof Te?_i(Te):[_i(Te[0]),_i(Te[1])])}function fo(ie,Fe,pe){const Te=(0,T.\u0275findLocaleData)(ie);Hi(Te);const gn=Do([Te[T.\u0275LocaleDataIndex.ExtraData][0],Te[T.\u0275LocaleDataIndex.ExtraData][1]],Fe)||[];return Do(gn,pe)||[]}function jr(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.Directionality]}function Do(ie,Fe){for(let pe=Fe;pe>-1;pe--)if(typeof ie[pe]<"u")return ie[pe];throw new Error("Locale data API: locale data undefined")}function _i(ie){const[Fe,pe]=ie.split(":");return{hours:+Fe,minutes:+pe}}function xs(ie,Fe,pe="en"){const Te=function ei(ie){return(0,T.\u0275findLocaleData)(ie)[T.\u0275LocaleDataIndex.Currencies]}(pe)[ie]||Ht[ie]||[],ot=Te[1];return"narrow"===Fe&&"string"==typeof ot?ot:Te[0]||ie}const tc=2;function gc(ie){let Fe;const pe=Ht[ie];return pe&&(Fe=pe[2]),"number"==typeof Fe?Fe:tc}const Vs=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fo={},Ta=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var kr=function(ie){return ie[ie.Short=0]="Short",ie[ie.ShortGMT=1]="ShortGMT",ie[ie.Long=2]="Long",ie[ie.Extended=3]="Extended",ie}(kr||{}),Ei=function(ie){return ie[ie.FullYear=0]="FullYear",ie[ie.Month=1]="Month",ie[ie.Date=2]="Date",ie[ie.Hours=3]="Hours",ie[ie.Minutes=4]="Minutes",ie[ie.Seconds=5]="Seconds",ie[ie.FractionalSeconds=6]="FractionalSeconds",ie[ie.Day=7]="Day",ie}(Ei||{}),dr=function(ie){return ie[ie.DayPeriods=0]="DayPeriods",ie[ie.Days=1]="Days",ie[ie.Months=2]="Months",ie[ie.Eras=3]="Eras",ie}(dr||{});function Gs(ie,Fe,pe,Te){let ot=function $n(ie){if(ji(ie))return ie;if("number"==typeof ie&&!isNaN(ie))return new Date(ie);if("string"==typeof ie){if(ie=ie.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(ie)){const[ot,gn=1,qn=1]=ie.split("-").map(zr=>+zr);return va(ot,gn-1,qn)}const pe=parseFloat(ie);if(!isNaN(ie-pe))return new Date(pe);let Te;if(Te=ie.match(Vs))return function Ti(ie){const Fe=new Date(0);let pe=0,Te=0;const ot=ie[8]?Fe.setUTCFullYear:Fe.setFullYear,gn=ie[8]?Fe.setUTCHours:Fe.setHours;ie[9]&&(pe=Number(ie[9]+ie[10]),Te=Number(ie[9]+ie[11])),ot.call(Fe,Number(ie[1]),Number(ie[2])-1,Number(ie[3]));const qn=Number(ie[4]||0)-pe,zr=Number(ie[5]||0)-Te,Fs=Number(ie[6]||0),$o=Math.floor(1e3*parseFloat("0."+(ie[7]||0)));return gn.call(Fe,qn,zr,Fs,$o),Fe}(Te)}const Fe=new Date(ie);if(!ji(Fe))throw new Error(`Unable to convert "${ie}" into a date`);return Fe}(ie);Fe=$a(pe,Fe)||Fe;let zr,qn=[];for(;Fe;){if(zr=Ta.exec(Fe),!zr){qn.push(Fe);break}{qn=qn.concat(zr.slice(1));const Xa=qn.pop();if(!Xa)break;Fe=Xa}}let Fs=ot.getTimezoneOffset();Te&&(Fs=Qe(Te,Fs),ot=function wn(ie,Fe,pe){const Te=pe?-1:1,ot=ie.getTimezoneOffset();return function Et(ie,Fe){return(ie=new Date(ie.getTime())).setMinutes(ie.getMinutes()+Fe),ie}(ie,Te*(Qe(Fe,ot)-ot))}(ot,Te,!0));let $o="";return qn.forEach(Xa=>{const Tr=function en(ie){if(Kt[ie])return Kt[ie];let Fe;switch(ie){case"G":case"GG":case"GGG":Fe=oo(dr.Eras,In.Abbreviated);break;case"GGGG":Fe=oo(dr.Eras,In.Wide);break;case"GGGGG":Fe=oo(dr.Eras,In.Narrow);break;case"y":Fe=Ho(Ei.FullYear,1,0,!1,!0);break;case"yy":Fe=Ho(Ei.FullYear,2,0,!0,!0);break;case"yyy":Fe=Ho(Ei.FullYear,3,0,!1,!0);break;case"yyyy":Fe=Ho(Ei.FullYear,4,0,!1,!0);break;case"Y":Fe=_s(1);break;case"YY":Fe=_s(2,!0);break;case"YYY":Fe=_s(3);break;case"YYYY":Fe=_s(4);break;case"M":case"L":Fe=Ho(Ei.Month,1,1);break;case"MM":case"LL":Fe=Ho(Ei.Month,2,1);break;case"MMM":Fe=oo(dr.Months,In.Abbreviated);break;case"MMMM":Fe=oo(dr.Months,In.Wide);break;case"MMMMM":Fe=oo(dr.Months,In.Narrow);break;case"LLL":Fe=oo(dr.Months,In.Abbreviated,On.Standalone);break;case"LLLL":Fe=oo(dr.Months,In.Wide,On.Standalone);break;case"LLLLL":Fe=oo(dr.Months,In.Narrow,On.Standalone);break;case"w":Fe=ba(1);break;case"ww":Fe=ba(2);break;case"W":Fe=ba(1,!0);break;case"d":Fe=Ho(Ei.Date,1);break;case"dd":Fe=Ho(Ei.Date,2);break;case"c":case"cc":Fe=Ho(Ei.Day,1);break;case"ccc":Fe=oo(dr.Days,In.Abbreviated,On.Standalone);break;case"cccc":Fe=oo(dr.Days,In.Wide,On.Standalone);break;case"ccccc":Fe=oo(dr.Days,In.Narrow,On.Standalone);break;case"cccccc":Fe=oo(dr.Days,In.Short,On.Standalone);break;case"E":case"EE":case"EEE":Fe=oo(dr.Days,In.Abbreviated);break;case"EEEE":Fe=oo(dr.Days,In.Wide);break;case"EEEEE":Fe=oo(dr.Days,In.Narrow);break;case"EEEEEE":Fe=oo(dr.Days,In.Short);break;case"a":case"aa":case"aaa":Fe=oo(dr.DayPeriods,In.Abbreviated);break;case"aaaa":Fe=oo(dr.DayPeriods,In.Wide);break;case"aaaaa":Fe=oo(dr.DayPeriods,In.Narrow);break;case"b":case"bb":case"bbb":Fe=oo(dr.DayPeriods,In.Abbreviated,On.Standalone,!0);break;case"bbbb":Fe=oo(dr.DayPeriods,In.Wide,On.Standalone,!0);break;case"bbbbb":Fe=oo(dr.DayPeriods,In.Narrow,On.Standalone,!0);break;case"B":case"BB":case"BBB":Fe=oo(dr.DayPeriods,In.Abbreviated,On.Format,!0);break;case"BBBB":Fe=oo(dr.DayPeriods,In.Wide,On.Format,!0);break;case"BBBBB":Fe=oo(dr.DayPeriods,In.Narrow,On.Format,!0);break;case"h":Fe=Ho(Ei.Hours,1,-12);break;case"hh":Fe=Ho(Ei.Hours,2,-12);break;case"H":Fe=Ho(Ei.Hours,1);break;case"HH":Fe=Ho(Ei.Hours,2);break;case"m":Fe=Ho(Ei.Minutes,1);break;case"mm":Fe=Ho(Ei.Minutes,2);break;case"s":Fe=Ho(Ei.Seconds,1);break;case"ss":Fe=Ho(Ei.Seconds,2);break;case"S":Fe=Ho(Ei.FractionalSeconds,1);break;case"SS":Fe=Ho(Ei.FractionalSeconds,2);break;case"SSS":Fe=Ho(Ei.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Fe=Ci(kr.Short);break;case"ZZZZZ":Fe=Ci(kr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Fe=Ci(kr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Fe=Ci(kr.Long);break;default:return null}return Kt[ie]=Fe,Fe}(Xa);$o+=Tr?Tr(ot,pe,Fs):"''"===Xa?"'":Xa.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),$o}function va(ie,Fe,pe){const Te=new Date(0);return Te.setFullYear(ie,Fe,pe),Te.setHours(0,0,0),Te}function $a(ie,Fe){const pe=Gr(ie);if(Fo[pe]??={},Fo[pe][Fe])return Fo[pe][Fe];let Te="";switch(Fe){case"shortDate":Te=Ut(ie,Rn.Short);break;case"mediumDate":Te=Ut(ie,Rn.Medium);break;case"longDate":Te=Ut(ie,Rn.Long);break;case"fullDate":Te=Ut(ie,Rn.Full);break;case"shortTime":Te=bn(ie,Rn.Short);break;case"mediumTime":Te=bn(ie,Rn.Medium);break;case"longTime":Te=bn(ie,Rn.Long);break;case"fullTime":Te=bn(ie,Rn.Full);break;case"short":const ot=$a(ie,"shortTime"),gn=$a(ie,"shortDate");Te=ca(Pn(ie,Rn.Short),[ot,gn]);break;case"medium":const qn=$a(ie,"mediumTime"),zr=$a(ie,"mediumDate");Te=ca(Pn(ie,Rn.Medium),[qn,zr]);break;case"long":const Fs=$a(ie,"longTime"),$o=$a(ie,"longDate");Te=ca(Pn(ie,Rn.Long),[Fs,$o]);break;case"full":const Xa=$a(ie,"fullTime"),Tr=$a(ie,"fullDate");Te=ca(Pn(ie,Rn.Full),[Xa,Tr])}return Te&&(Fo[pe][Fe]=Te),Te}function ca(ie,Fe){return Fe&&(ie=ie.replace(/\{([^}]+)}/g,function(pe,Te){return null!=Fe&&Te in Fe?Fe[Te]:pe})),ie}function Xo(ie,Fe,pe="-",Te,ot){let gn="";(ie<0||ot&&ie<=0)&&(ot?ie=1-ie:(ie=-ie,gn=pe));let qn=String(ie);for(;qn.length<Fe;)qn="0"+qn;return Te&&(qn=qn.slice(qn.length-Fe)),gn+qn}function Ho(ie,Fe,pe=0,Te=!1,ot=!1){return function(gn,qn){let zr=function Aa(ie,Fe){switch(ie){case Ei.FullYear:return Fe.getFullYear();case Ei.Month:return Fe.getMonth();case Ei.Date:return Fe.getDate();case Ei.Hours:return Fe.getHours();case Ei.Minutes:return Fe.getMinutes();case Ei.Seconds:return Fe.getSeconds();case Ei.FractionalSeconds:return Fe.getMilliseconds();case Ei.Day:return Fe.getDay();default:throw new Error(`Unknown DateType value "${ie}".`)}}(ie,gn);if((pe>0||zr>-pe)&&(zr+=pe),ie===Ei.Hours)0===zr&&-12===pe&&(zr=12);else if(ie===Ei.FractionalSeconds)return function ua(ie,Fe){return Xo(ie,3).substring(0,Fe)}(zr,Fe);const Fs=gr(qn,Nr.MinusSign);return Xo(zr,Fe,Fs,Te,ot)}}function oo(ie,Fe,pe=On.Format,Te=!1){return function(ot,gn){return function so(ie,Fe,pe,Te,ot,gn){switch(pe){case dr.Months:return br(Fe,ot,Te)[ie.getMonth()];case dr.Days:return Nn(Fe,ot,Te)[ie.getDay()];case dr.DayPeriods:const qn=ie.getHours(),zr=ie.getMinutes();if(gn){const $o=No(Fe),Xa=fo(Fe,ot,Te),Tr=$o.findIndex(us=>{if(Array.isArray(us)){const[qa,Hs]=us,Bu=qn>=qa.hours&&zr>=qa.minutes,ru=qn<Hs.hours||qn===Hs.hours&&zr<Hs.minutes;if(qa.hours<Hs.hours){if(Bu&&ru)return!0}else if(Bu||ru)return!0}else if(us.hours===qn&&us.minutes===zr)return!0;return!1});if(-1!==Tr)return Xa[Tr]}return Tn(Fe,ot,Te)[qn<12?0:1];case dr.Eras:return bt(Fe,Te)[ie.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${pe}`)}}(ot,gn,ie,Fe,pe,Te)}}function Ci(ie){return function(Fe,pe,Te){const ot=-1*Te,gn=gr(pe,Nr.MinusSign),qn=ot>0?Math.floor(ot/60):Math.ceil(ot/60);switch(ie){case kr.Short:return(ot>=0?"+":"")+Xo(qn,2,gn)+Xo(Math.abs(ot%60),2,gn);case kr.ShortGMT:return"GMT"+(ot>=0?"+":"")+Xo(qn,1,gn);case kr.Long:return"GMT"+(ot>=0?"+":"")+Xo(qn,2,gn)+":"+Xo(Math.abs(ot%60),2,gn);case kr.Extended:return 0===Te?"Z":(ot>=0?"+":"")+Xo(qn,2,gn)+":"+Xo(Math.abs(ot%60),2,gn);default:throw new Error(`Unknown zone width "${ie}"`)}}}const Oc=0,Ns=4;function ns(ie){const Fe=ie.getDay(),pe=0===Fe?-3:Ns-Fe;return va(ie.getFullYear(),ie.getMonth(),ie.getDate()+pe)}function ba(ie,Fe=!1){return function(pe,Te){let ot;if(Fe){const gn=new Date(pe.getFullYear(),pe.getMonth(),1).getDay()-1,qn=pe.getDate();ot=1+Math.floor((qn+gn)/7)}else{const gn=ns(pe),qn=function Ds(ie){const Fe=va(ie,Oc,1).getDay();return va(ie,0,1+(Fe<=Ns?Ns:Ns+7)-Fe)}(gn.getFullYear()),zr=gn.getTime()-qn.getTime();ot=1+Math.round(zr/6048e5)}return Xo(ot,ie,gr(Te,Nr.MinusSign))}}function _s(ie,Fe=!1){return function(pe,Te){return Xo(ns(pe).getFullYear(),ie,gr(Te,Nr.MinusSign),Fe)}}const Kt={};function Qe(ie,Fe){ie=ie.replace(/:/g,"");const pe=Date.parse("Jan 01, 1970 00:00:00 "+ie)/6e4;return isNaN(pe)?Fe:pe}function ji(ie){return ie instanceof Date&&!isNaN(ie.valueOf())}const xn=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ia=22,oa=".",ys="0",jc=";",Tl=",",qs="#",Wo="\xa4",eu="%";function vs(ie,Fe,pe,Te,ot,gn,qn=!1){let zr="",Fs=!1;if(isFinite(ie)){let $o=function Al(ie){let Te,ot,gn,qn,zr,Fe=Math.abs(ie)+"",pe=0;for((ot=Fe.indexOf(oa))>-1&&(Fe=Fe.replace(oa,"")),(gn=Fe.search(/e/i))>0?(ot<0&&(ot=gn),ot+=+Fe.slice(gn+1),Fe=Fe.substring(0,gn)):ot<0&&(ot=Fe.length),gn=0;Fe.charAt(gn)===ys;gn++);if(gn===(zr=Fe.length))Te=[0],ot=1;else{for(zr--;Fe.charAt(zr)===ys;)zr--;for(ot-=gn,Te=[],qn=0;gn<=zr;gn++,qn++)Te[qn]=Number(Fe.charAt(gn))}return ot>ia&&(Te=Te.splice(0,ia-1),pe=ot-1,ot=1),{digits:Te,exponent:pe,integerLen:ot}}(ie);qn&&($o=function Ia(ie){if(0===ie.digits[0])return ie;const Fe=ie.digits.length-ie.integerLen;return ie.exponent?ie.exponent+=2:(0===Fe?ie.digits.push(0,0):1===Fe&&ie.digits.push(0),ie.integerLen+=2),ie}($o));let Xa=Fe.minInt,Tr=Fe.minFrac,us=Fe.maxFrac;if(gn){const Sd=gn.match(xn);if(null===Sd)throw new Error(`${gn} is not a valid digit info`);const Iu=Sd[1],rh=Sd[3],td=Sd[5];null!=Iu&&(Xa=ll(Iu)),null!=rh&&(Tr=ll(rh)),null!=td?us=ll(td):null!=rh&&Tr>us&&(us=Tr)}!function cl(ie,Fe,pe){if(Fe>pe)throw new Error(`The minimum number of digits after fraction (${Fe}) is higher than the maximum (${pe}).`);let Te=ie.digits,ot=Te.length-ie.integerLen;const gn=Math.min(Math.max(Fe,ot),pe);let qn=gn+ie.integerLen,zr=Te[qn];if(qn>0){Te.splice(Math.max(ie.integerLen,qn));for(let Tr=qn;Tr<Te.length;Tr++)Te[Tr]=0}else{ot=Math.max(0,ot),ie.integerLen=1,Te.length=Math.max(1,qn=gn+1),Te[0]=0;for(let Tr=1;Tr<qn;Tr++)Te[Tr]=0}if(zr>=5)if(qn-1<0){for(let Tr=0;Tr>qn;Tr--)Te.unshift(0),ie.integerLen++;Te.unshift(1),ie.integerLen++}else Te[qn-1]++;for(;ot<Math.max(0,gn);ot++)Te.push(0);let Fs=0!==gn;const $o=Fe+ie.integerLen,Xa=Te.reduceRight(function(Tr,us,qa,Hs){return Hs[qa]=(us+=Tr)<10?us:us-10,Fs&&(0===Hs[qa]&&qa>=$o?Hs.pop():Fs=!1),us>=10?1:0},0);Xa&&(Te.unshift(Xa),ie.integerLen++)}($o,Tr,us);let qa=$o.digits,Hs=$o.integerLen;const Bu=$o.exponent;let ru=[];for(Fs=qa.every(Sd=>!Sd);Hs<Xa;Hs++)qa.unshift(0);for(;Hs<0;Hs++)qa.unshift(0);Hs>0?ru=qa.splice(Hs,qa.length):(ru=qa,qa=[0]);const zd=[];for(qa.length>=Fe.lgSize&&zd.unshift(qa.splice(-Fe.lgSize,qa.length).join(""));qa.length>Fe.gSize;)zd.unshift(qa.splice(-Fe.gSize,qa.length).join(""));qa.length&&zd.unshift(qa.join("")),zr=zd.join(gr(pe,Te)),ru.length&&(zr+=gr(pe,ot)+ru.join("")),Bu&&(zr+=gr(pe,Nr.Exponential)+"+"+Bu)}else zr=gr(pe,Nr.Infinity);return zr=ie<0&&!Fs?Fe.negPre+zr+Fe.negSuf:Fe.posPre+zr+Fe.posSuf,zr}function Va(ie,Fe,pe,Te,ot){const qn=ks(ui(Fe,jt.Currency),gr(Fe,Nr.MinusSign));return qn.minFrac=gc(Te),qn.maxFrac=qn.minFrac,vs(ie,qn,Fe,Nr.CurrencyGroup,Nr.CurrencyDecimal,ot).replace(Wo,pe).replace(Wo,"").trim()}function Pc(ie,Fe,pe){return vs(ie,ks(ui(Fe,jt.Percent),gr(Fe,Nr.MinusSign)),Fe,Nr.Group,Nr.Decimal,pe,!0).replace(new RegExp(eu,"g"),gr(Fe,Nr.PercentSign))}function rs(ie,Fe,pe){return vs(ie,ks(ui(Fe,jt.Decimal),gr(Fe,Nr.MinusSign)),Fe,Nr.Group,Nr.Decimal,pe)}function ks(ie,Fe="-"){const pe={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Te=ie.split(jc),ot=Te[0],gn=Te[1],qn=-1!==ot.indexOf(oa)?ot.split(oa):[ot.substring(0,ot.lastIndexOf(ys)+1),ot.substring(ot.lastIndexOf(ys)+1)],zr=qn[0],Fs=qn[1]||"";pe.posPre=zr.substring(0,zr.indexOf(qs));for(let Xa=0;Xa<Fs.length;Xa++){const Tr=Fs.charAt(Xa);Tr===ys?pe.minFrac=pe.maxFrac=Xa+1:Tr===qs?pe.maxFrac=Xa+1:pe.posSuf+=Tr}const $o=zr.split(Tl);if(pe.gSize=$o[1]?$o[1].length:0,pe.lgSize=$o[2]||$o[1]?($o[2]||$o[1]).length:0,gn){const Xa=ot.length-pe.posPre.length-pe.posSuf.length,Tr=gn.indexOf(qs);pe.negPre=gn.substring(0,Tr).replace(/'/g,""),pe.negSuf=gn.slice(Tr+Xa).replace(/'/g,"")}else pe.negPre=Fe+pe.posPre,pe.negSuf=pe.posSuf;return pe}function ll(ie){const Fe=parseInt(ie);if(isNaN(Fe))throw new Error("Invalid integer literal when parsing "+ie);return Fe}let ul=(()=>{class ie{static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:function(Te){let ot=null;return Te?ot=new Te:(gn=T.\u0275\u0275inject(T.LOCALE_ID),ot=new Il(gn)),ot;var gn},providedIn:"root"})}}return ie})();function Cs(ie,Fe,pe,Te){let ot=`=${ie}`;if(Fe.indexOf(ot)>-1||(ot=pe.getPluralCategory(ie,Te),Fe.indexOf(ot)>-1))return ot;if(Fe.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${ie}"`)}let Il=(()=>{class ie extends ul{constructor(pe){super(),this.locale=pe}getPluralCategory(pe,Te){switch(ra(Te||this.locale)(pe)){case Yt.Zero:return"zero";case Yt.One:return"one";case Yt.Two:return"two";case Yt.Few:return"few";case Yt.Many:return"many";default:return"other"}}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275inject(T.LOCALE_ID))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:ie.\u0275fac})}}return ie})();function jl(ie,Fe,pe){return(0,T.\u0275registerLocaleData)(ie,Fe,pe)}function Dl(ie,Fe){Fe=encodeURIComponent(Fe);for(const pe of ie.split(";")){const Te=pe.indexOf("="),[ot,gn]=-1==Te?[pe,""]:[pe.slice(0,Te),pe.slice(Te+1)];if(ot.trim()===Fe)return decodeURIComponent(gn)}return null}const dl=/\s+/,Zo=[];let Ga=(()=>{class ie{constructor(pe,Te){this._ngEl=pe,this._renderer=Te,this.initialClasses=Zo,this.stateMap=new Map}set klass(pe){this.initialClasses=null!=pe?pe.trim().split(dl):Zo}set ngClass(pe){this.rawClass="string"==typeof pe?pe.trim().split(dl):pe}ngDoCheck(){for(const Te of this.initialClasses)this._updateState(Te,!0);const pe=this.rawClass;if(Array.isArray(pe)||pe instanceof Set)for(const Te of pe)this._updateState(Te,!0);else if(null!=pe)for(const Te of Object.keys(pe))this._updateState(Te,!!pe[Te]);this._applyStateDiff()}_updateState(pe,Te){const ot=this.stateMap.get(pe);void 0!==ot?(ot.enabled!==Te&&(ot.changed=!0,ot.enabled=Te),ot.touched=!0):this.stateMap.set(pe,{enabled:Te,changed:!0,touched:!0})}_applyStateDiff(){for(const pe of this.stateMap){const Te=pe[0],ot=pe[1];ot.changed?(this._toggleClass(Te,ot.enabled),ot.changed=!1):ot.touched||(ot.enabled&&this._toggleClass(Te,!1),this.stateMap.delete(Te)),ot.touched=!1}}_toggleClass(pe,Te){(pe=pe.trim()).length>0&&pe.split(dl).forEach(ot=>{Te?this._renderer.addClass(this._ngEl.nativeElement,ot):this._renderer.removeClass(this._ngEl.nativeElement,ot)})}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ElementRef),T.\u0275\u0275directiveInject(T.Renderer2))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return ie})(),hl=(()=>{class ie{constructor(pe){this._viewContainerRef=pe,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(pe){return void 0!==pe.ngComponentOutletNgModule||void 0!==pe.ngComponentOutletNgModuleFactory}_needToReCreateComponentInstance(pe){return void 0!==pe.ngComponentOutlet||void 0!==pe.ngComponentOutletContent||void 0!==pe.ngComponentOutletInjector||this._needToReCreateNgModuleInstance(pe)}ngOnChanges(pe){if(this._needToReCreateComponentInstance(pe)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){const Te=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(pe)&&(this._moduleRef?.destroy(),this._moduleRef=this.ngComponentOutletNgModule?(0,T.createNgModule)(this.ngComponentOutletNgModule,We(Te)):this.ngComponentOutletNgModuleFactory?this.ngComponentOutletNgModuleFactory.create(We(Te)):void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:Te,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(const pe of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(pe,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(pe){for(const[Te,ot]of this._inputsUsed)ot?(pe.setInput(Te,this.ngComponentOutletInputs[Te]),this._inputsUsed.set(Te,!1)):(pe.setInput(Te,void 0),this._inputsUsed.delete(Te))}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ViewContainerRef))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[T.\u0275\u0275NgOnChangesFeature]})}}return ie})();function We(ie){return ie.get(T.NgModuleRef).injector}class At{constructor(Fe,pe,Te,ot){this.$implicit=Fe,this.ngForOf=pe,this.index=Te,this.count=ot}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ut=(()=>{class ie{set ngForOf(pe){this._ngForOf=pe,this._ngForOfDirty=!0}set ngForTrackBy(pe){this._trackByFn=pe}get ngForTrackBy(){return this._trackByFn}constructor(pe,Te,ot){this._viewContainer=pe,this._template=Te,this._differs=ot,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(pe){pe&&(this._template=pe)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const pe=this._ngForOf;!this._differ&&pe&&(this._differ=this._differs.find(pe).create(this.ngForTrackBy))}if(this._differ){const pe=this._differ.diff(this._ngForOf);pe&&this._applyChanges(pe)}}_applyChanges(pe){const Te=this._viewContainer;pe.forEachOperation((ot,gn,qn)=>{if(null==ot.previousIndex)Te.createEmbeddedView(this._template,new At(ot.item,this._ngForOf,-1,-1),null===qn?void 0:qn);else if(null==qn)Te.remove(null===gn?void 0:gn);else if(null!==gn){const zr=Te.get(gn);Te.move(zr,qn),vn(zr,ot)}});for(let ot=0,gn=Te.length;ot<gn;ot++){const zr=Te.get(ot).context;zr.index=ot,zr.count=gn,zr.ngForOf=this._ngForOf}pe.forEachIdentityChange(ot=>{vn(Te.get(ot.currentIndex),ot)})}static ngTemplateContextGuard(pe,Te){return!0}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ViewContainerRef),T.\u0275\u0275directiveInject(T.TemplateRef),T.\u0275\u0275directiveInject(T.IterableDiffers))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return ie})();function vn(ie,Fe){ie.context.$implicit=Fe.item}let mr=(()=>{class ie{constructor(pe,Te){this._viewContainer=pe,this._context=new pr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Te}set ngIf(pe){this._context.$implicit=this._context.ngIf=pe,this._updateView()}set ngIfThen(pe){Ai("ngIfThen",pe),this._thenTemplateRef=pe,this._thenViewRef=null,this._updateView()}set ngIfElse(pe){Ai("ngIfElse",pe),this._elseTemplateRef=pe,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(pe,Te){return!0}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ViewContainerRef),T.\u0275\u0275directiveInject(T.TemplateRef))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return ie})();class pr{constructor(){this.$implicit=null,this.ngIf=null}}function Ai(ie,Fe){if(Fe&&!Fe.createEmbeddedView)throw new Error(`${ie} must be a TemplateRef, but received '${(0,T.\u0275stringify)(Fe)}'.`)}class Ii{constructor(Fe,pe){this._viewContainerRef=Fe,this._templateRef=pe,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Fe){Fe&&!this._created?this.create():!Fe&&this._created&&this.destroy()}}let co=(()=>{class ie{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(pe){this._ngSwitch=pe,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(pe){this._defaultViews.push(pe)}_matchCase(pe){const Te=pe===this._ngSwitch;return this._lastCasesMatched||=Te,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),Te}_updateDefaultCases(pe){if(this._defaultViews.length>0&&pe!==this._defaultUsed){this._defaultUsed=pe;for(const Te of this._defaultViews)Te.enforceState(pe)}}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return ie})(),ko=(()=>{class ie{constructor(pe,Te,ot){this.ngSwitch=ot,ot._addCase(),this._view=new Ii(pe,Te)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ViewContainerRef),T.\u0275\u0275directiveInject(T.TemplateRef),T.\u0275\u0275directiveInject(co,9))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return ie})(),jo=(()=>{class ie{constructor(pe,Te,ot){ot._addDefault(new Ii(pe,Te))}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ViewContainerRef),T.\u0275\u0275directiveInject(T.TemplateRef),T.\u0275\u0275directiveInject(co,9))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngSwitchDefault",""]],standalone:!0})}}return ie})(),ao=(()=>{class ie{constructor(pe){this._localization=pe,this._caseViews={}}set ngPlural(pe){this._updateView(pe)}addCase(pe,Te){this._caseViews[pe]=Te}_updateView(pe){this._clearViews();const ot=Cs(pe,Object.keys(this._caseViews),this._localization);this._activateView(this._caseViews[ot])}_clearViews(){this._activeView&&this._activeView.destroy()}_activateView(pe){pe&&(this._activeView=pe,this._activeView.create())}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(ul))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngPlural",""]],inputs:{ngPlural:"ngPlural"},standalone:!0})}}return ie})(),Jo=(()=>{class ie{constructor(pe,Te,ot,gn){this.value=pe;const qn=!isNaN(Number(pe));gn.addCase(qn?`=${pe}`:pe,new Ii(ot,Te))}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275injectAttribute("ngPluralCase"),T.\u0275\u0275directiveInject(T.TemplateRef),T.\u0275\u0275directiveInject(T.ViewContainerRef),T.\u0275\u0275directiveInject(ao,1))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngPluralCase",""]],standalone:!0})}}return ie})(),la=(()=>{class ie{constructor(pe,Te,ot){this._ngEl=pe,this._differs=Te,this._renderer=ot,this._ngStyle=null,this._differ=null}set ngStyle(pe){this._ngStyle=pe,!this._differ&&pe&&(this._differ=this._differs.find(pe).create())}ngDoCheck(){if(this._differ){const pe=this._differ.diff(this._ngStyle);pe&&this._applyChanges(pe)}}_setStyle(pe,Te){const[ot,gn]=pe.split("."),qn=-1===ot.indexOf("-")?void 0:T.RendererStyleFlags2.DashCase;null!=Te?this._renderer.setStyle(this._ngEl.nativeElement,ot,gn?`${Te}${gn}`:Te,qn):this._renderer.removeStyle(this._ngEl.nativeElement,ot,qn)}_applyChanges(pe){pe.forEachRemovedItem(Te=>this._setStyle(Te.key,null)),pe.forEachAddedItem(Te=>this._setStyle(Te.key,Te.currentValue)),pe.forEachChangedItem(Te=>this._setStyle(Te.key,Te.currentValue))}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ElementRef),T.\u0275\u0275directiveInject(T.KeyValueDiffers),T.\u0275\u0275directiveInject(T.Renderer2))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return ie})(),$s=(()=>{class ie{constructor(pe){this._viewContainerRef=pe,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(pe){if(this._shouldRecreateView(pe)){const Te=this._viewContainerRef;if(this._viewRef&&Te.remove(Te.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const ot=this._createContextForwardProxy();this._viewRef=Te.createEmbeddedView(this.ngTemplateOutlet,ot,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(pe){return!!pe.ngTemplateOutlet||!!pe.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(pe,Te,ot)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,Te,ot),get:(pe,Te,ot)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,Te,ot)}})}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ViewContainerRef))}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[T.\u0275\u0275NgOnChangesFeature]})}}return ie})();function oi(ie,Fe){return new T.\u0275RuntimeError(2100,!1)}class Ma{createSubscription(Fe,pe){return(0,T.untracked)(()=>Fe.subscribe({next:pe,error:Te=>{throw Te}}))}dispose(Fe){(0,T.untracked)(()=>Fe.unsubscribe())}}class Wc{createSubscription(Fe,pe){return Fe.then(pe,Te=>{throw Te})}dispose(Fe){}}const ls=new Wc,os=new Ma;let ka=(()=>{class ie{constructor(pe){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=pe}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(pe){if(!this._obj){if(pe)try{this.markForCheckOnValueUpdate=!1,this._subscribe(pe)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return pe!==this._obj?(this._dispose(),this.transform(pe)):this._latestValue}_subscribe(pe){this._obj=pe,this._strategy=this._selectStrategy(pe),this._subscription=this._strategy.createSubscription(pe,Te=>this._updateLatestValue(pe,Te))}_selectStrategy(pe){if((0,T.\u0275isPromise)(pe))return ls;if((0,T.\u0275isSubscribable)(pe))return os;throw oi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(pe,Te){pe===this._obj&&(this._latestValue=Te,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.ChangeDetectorRef,16))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"async",type:ie,pure:!1,standalone:!0})}}return ie})(),mc=(()=>{class ie{transform(pe){if(null==pe)return null;if("string"!=typeof pe)throw oi();return pe.toLowerCase()}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"lowercase",type:ie,pure:!0,standalone:!0})}}return ie})();const Co=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let tu=(()=>{class ie{transform(pe){if(null==pe)return null;if("string"!=typeof pe)throw oi();return pe.replace(Co,Te=>Te[0].toUpperCase()+Te.slice(1).toLowerCase())}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"titlecase",type:ie,pure:!0,standalone:!0})}}return ie})(),Lu=(()=>{class ie{transform(pe){if(null==pe)return null;if("string"!=typeof pe)throw oi();return pe.toUpperCase()}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"uppercase",type:ie,pure:!0,standalone:!0})}}return ie})();const Ks=new T.InjectionToken(""),Dd=new T.InjectionToken("");let kd=(()=>{class ie{constructor(pe,Te,ot){this.locale=pe,this.defaultTimezone=Te,this.defaultOptions=ot}transform(pe,Te,ot,gn){if(null==pe||""===pe||pe!=pe)return null;try{return Gs(pe,Te??this.defaultOptions?.dateFormat??"mediumDate",gn||this.locale,ot??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(qn){throw oi()}}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.LOCALE_ID,16),T.\u0275\u0275directiveInject(Ks,24),T.\u0275\u0275directiveInject(Dd,24))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"date",type:ie,pure:!0,standalone:!0})}}return ie})();const La=/#/g;let _c=(()=>{class ie{constructor(pe){this._localization=pe}transform(pe,Te,ot){if(null==pe)return"";if("object"!=typeof Te||null===Te)throw oi();return Te[Cs(pe,Object.keys(Te),this._localization,ot)].replace(La,pe.toString())}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(ul,16))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"i18nPlural",type:ie,pure:!0,standalone:!0})}}return ie})(),Ca=(()=>{class ie{transform(pe,Te){if(null==pe)return"";if("object"!=typeof Te||"string"!=typeof pe)throw oi();return Te.hasOwnProperty(pe)?Te[pe]:Te.hasOwnProperty("other")?Te.other:""}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"i18nSelect",type:ie,pure:!0,standalone:!0})}}return ie})(),Ld=(()=>{class ie{transform(pe){return JSON.stringify(pe,null,2)}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"json",type:ie,pure:!1,standalone:!0})}}return ie})(),Hu=(()=>{class ie{constructor(pe){this.differs=pe,this.keyValues=[],this.compareFn=Zu}transform(pe,Te=Zu){if(!pe||!(pe instanceof Map)&&"object"!=typeof pe)return null;this.differ??=this.differs.find(pe).create();const ot=this.differ.diff(pe),gn=Te!==this.compareFn;return ot&&(this.keyValues=[],ot.forEachItem(qn=>{this.keyValues.push(function Fu(ie,Fe){return{key:ie,value:Fe}}(qn.key,qn.currentValue))})),(ot||gn)&&(this.keyValues.sort(Te),this.compareFn=Te),this.keyValues}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.KeyValueDiffers,16))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"keyvalue",type:ie,pure:!1,standalone:!0})}}return ie})();function Zu(ie,Fe){const pe=ie.key,Te=Fe.key;if(pe===Te)return 0;if(void 0===pe)return 1;if(void 0===Te)return-1;if(null===pe)return 1;if(null===Te)return-1;if("string"==typeof pe&&"string"==typeof Te)return pe<Te?-1:1;if("number"==typeof pe&&"number"==typeof Te)return pe-Te;if("boolean"==typeof pe&&"boolean"==typeof Te)return pe<Te?-1:1;const ot=String(pe),gn=String(Te);return ot==gn?0:ot<gn?-1:1}let Uu=(()=>{class ie{constructor(pe){this._locale=pe}transform(pe,Te,ot){if(!Ml(pe))return null;ot||=this._locale;try{return rs(nc(pe),ot,Te)}catch(gn){throw oi()}}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.LOCALE_ID,16))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"number",type:ie,pure:!0,standalone:!0})}}return ie})(),Wa=(()=>{class ie{constructor(pe){this._locale=pe}transform(pe,Te,ot){if(!Ml(pe))return null;ot||=this._locale;try{return Pc(nc(pe),ot,Te)}catch(gn){throw oi()}}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.LOCALE_ID,16))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"percent",type:ie,pure:!0,standalone:!0})}}return ie})(),Ju=(()=>{class ie{constructor(pe,Te="USD"){this._locale=pe,this._defaultCurrencyCode=Te}transform(pe,Te=this._defaultCurrencyCode,ot="symbol",gn,qn){if(!Ml(pe))return null;qn||=this._locale,"boolean"==typeof ot&&(ot=ot?"symbol":"code");let zr=Te||this._defaultCurrencyCode;"code"!==ot&&(zr="symbol"===ot||"symbol-narrow"===ot?xs(zr,"symbol"===ot?"wide":"narrow",qn):ot);try{return Va(nc(pe),qn,zr,Te,gn)}catch(Fs){throw oi()}}static{this.\u0275fac=function(Te){return new(Te||ie)(T.\u0275\u0275directiveInject(T.LOCALE_ID,16),T.\u0275\u0275directiveInject(T.DEFAULT_CURRENCY_CODE,16))}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"currency",type:ie,pure:!0,standalone:!0})}}return ie})();function Ml(ie){return!(null==ie||""===ie||ie!=ie)}function nc(ie){if("string"==typeof ie&&!isNaN(Number(ie)-parseFloat(ie)))return Number(ie);if("number"!=typeof ie)throw new Error(`${ie} is not a number`);return ie}let vh=(()=>{class ie{transform(pe,Te,ot){if(null==pe)return null;if(!this.supports(pe))throw oi();return pe.slice(Te,ot)}supports(pe){return"string"==typeof pe||Array.isArray(pe)}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275pipe=T.\u0275\u0275definePipe({name:"slice",type:ie,pure:!1,standalone:!0})}}return ie})(),Go=(()=>{class ie{static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275mod=T.\u0275\u0275defineNgModule({type:ie})}static{this.\u0275inj=T.\u0275\u0275defineInjector({})}}return ie})();const pd="browser",fp="server";function Zd(ie){return ie===pd}function fd(ie){return ie===fp}const bs=new T.Version("18.2.5");let zh=(()=>{class ie{static{this.\u0275prov=(0,T.\u0275\u0275defineInjectable)({token:ie,providedIn:"root",factory:()=>Zd((0,T.inject)(T.PLATFORM_ID))?new _u((0,T.inject)(Y),window):new Qc})}}return ie})();class _u{constructor(Fe,pe){this.document=Fe,this.window=pe,this.offset=()=>[0,0]}setOffset(Fe){this.offset=Array.isArray(Fe)?()=>Fe:Fe}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(Fe){this.window.scrollTo(Fe[0],Fe[1])}scrollToAnchor(Fe){const pe=function Qa(ie,Fe){const pe=ie.getElementById(Fe)||ie.getElementsByName(Fe)[0];if(pe)return pe;if("function"==typeof ie.createTreeWalker&&ie.body&&"function"==typeof ie.body.attachShadow){const Te=ie.createTreeWalker(ie.body,NodeFilter.SHOW_ELEMENT);let ot=Te.currentNode;for(;ot;){const gn=ot.shadowRoot;if(gn){const qn=gn.getElementById(Fe)||gn.querySelector(`[name="${Fe}"]`);if(qn)return qn}ot=Te.nextNode()}}return null}(this.document,Fe);pe&&(this.scrollToElement(pe),pe.focus())}setHistoryScrollRestoration(Fe){this.window.history.scrollRestoration=Fe}scrollToElement(Fe){const pe=Fe.getBoundingClientRect(),Te=pe.left+this.window.pageXOffset,ot=pe.top+this.window.pageYOffset,gn=this.offset();this.window.scrollTo(Te-gn[0],ot-gn[1])}}class Qc{setOffset(Fe){}getScrollPosition(){return[0,0]}scrollToPosition(Fe){}scrollToAnchor(Fe){}setHistoryScrollRestoration(Fe){}}class Rc{}const Jd="20";function Mr(ie){return/^https?:\/\//.test(ie)}function gd(ie){if("string"!=typeof ie||""===ie.trim())return!1;try{return new URL(ie),!0}catch{return!1}}function Xp(ie){return ie.startsWith("/")?ie.slice(1):ie}const yu=ie=>ie.src,Vl=new T.InjectionToken("",{providedIn:"root",factory:()=>yu});function Xc(ie,Fe){return function(Te){return gd(Te)||function vu(ie,Fe){throw new T.\u0275RuntimeError(2959,!1)}(),Te=function Ol(ie){return ie.endsWith("/")?ie.slice(0,-1):ie}(Te),[{provide:Vl,useValue:qn=>(Mr(qn.src)&&function rc(ie,Fe){throw new T.\u0275RuntimeError(2959,!1)}(),ie(Te,{...qn,src:Xp(qn.src)}))}]}}const Gl=Xc(kl);function kl(ie,Fe){let pe="format=auto";return Fe.width&&(pe+=`,width=${Fe.width}`),Fe.isPlaceholder&&(pe+=`,quality=${Jd}`),`${ie}/cdn-cgi/image/${pe}/${Fe.src}`}const oc=Xc(Pl);function Pl(ie,Fe){let Te="f_auto,"+(Fe.isPlaceholder?"q_auto:low":"q_auto");return Fe.width&&(Te+=`,w_${Fe.width}`),`${ie}/image/upload/${Te}/${Fe.src}`}const rr=Xc(Ln);function Ln(ie,Fe){const{src:pe,width:Te}=Fe,ot=[];Te&&ot.push(`w-${Te}`),Fe.isPlaceholder&&ot.push(`q-${Jd}`);const gn=ot.length?[ie,`tr:${ot.join(",")}`,pe]:[ie,pe];return new URL(gn.join("/")).href}const or=Xc(qo);function qo(ie,Fe){const pe=new URL(`${ie}/${Fe.src}`);return pe.searchParams.set("auto","format"),Fe.width&&pe.searchParams.set("w",Fe.width.toString()),Fe.isPlaceholder&&pe.searchParams.set("q",Jd),pe.href}function Af(ie){if(ie&&!gd(ie))throw new T.\u0275RuntimeError(2959,!1);return ie&&(ie=new URL(ie).origin),[{provide:Vl,useValue:Te=>function Zp(ie,Fe){const pe=new URL(Fe??"https://a/");pe.pathname="/.netlify/images",!Mr(ie.src)&&!ie.src.startsWith("/")&&(ie.src="/"+ie.src),pe.searchParams.set("url",ie.src),ie.width&&pe.searchParams.set("w",ie.width.toString());ie.isPlaceholder&&!(ie.loaderParams?.quality??ie.loaderParams?.q)&&pe.searchParams.set("q",Jd);for(const[ot,gn]of Object.entries(ie.loaderParams??{}))vd.has(ot)&&pe.searchParams.set(vd.get(ot),gn.toString());return"a"===pe.hostname?pe.href.replace(pe.origin,""):pe.href}(Te,ie)}]}const vd=new Map([["height","h"],["fit","fit"],["quality","q"],["q","q"],["position","position"]]),jh=new T.InjectionToken(""),$h=new T.InjectionToken("NG_OPTIMIZED_PRELOADED_IMAGES",{providedIn:"root",factory:()=>new Set});let Jp=(()=>{class ie{constructor(){this.preloadedImages=(0,T.inject)($h),this.document=(0,T.inject)(Y)}createPreloadLinkTag(pe,Te,ot,gn){if(this.preloadedImages.has(Te))return;this.preloadedImages.add(Te);const qn=pe.createElement("link");pe.setAttribute(qn,"as","image"),pe.setAttribute(qn,"href",Te),pe.setAttribute(qn,"rel","preload"),pe.setAttribute(qn,"fetchpriority","high"),gn&&pe.setAttribute(qn,"imageSizes",gn),ot&&pe.setAttribute(qn,"imageSrcset",ot),pe.appendChild(this.document.head,qn)}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:ie,factory:ie.\u0275fac,providedIn:"root"})}}return ie})();const bh=/^((\s*\d+w\s*(,|$)){1,})$/,ef=[1,2];let It=(()=>{class ie{constructor(){this.imageLoader=(0,T.inject)(Vl),this.config=function nh(ie){let Fe={};return ie.breakpoints&&(Fe.breakpoints=ie.breakpoints.sort((pe,Te)=>pe-Te)),Object.assign({},T.\u0275IMAGE_CONFIG_DEFAULTS,ie,Fe)}((0,T.inject)(T.\u0275IMAGE_CONFIG)),this.renderer=(0,T.inject)(T.Renderer2),this.imgElement=(0,T.inject)(T.ElementRef).nativeElement,this.injector=(0,T.inject)(T.Injector),this.isServer=fd((0,T.inject)(T.PLATFORM_ID)),this.preloadLinkCreator=(0,T.inject)(Jp),this.lcpObserver=null,this._renderedSrc=null,this.priority=!1,this.disableOptimizedSrcset=!1,this.fill=!1}ngOnInit(){(0,T.\u0275performanceMarkFeature)("NgOptimizedImage"),this.placeholder&&this.removePlaceholderOnLoad(this.imgElement),this.setHostAttributes()}setHostAttributes(){this.fill?this.sizes||="100vw":(this.setHostAttribute("width",this.width.toString()),this.setHostAttribute("height",this.height.toString())),this.setHostAttribute("loading",this.getLoadingBehavior()),this.setHostAttribute("fetchpriority",this.getFetchPriority()),this.setHostAttribute("ng-img","true");const pe=this.updateSrcAndSrcset();this.sizes&&this.setHostAttribute("sizes",this.sizes),this.isServer&&this.priority&&this.preloadLinkCreator.createPreloadLinkTag(this.renderer,this.getRewrittenSrc(),pe,this.sizes)}ngOnChanges(pe){if(pe.ngSrc&&!pe.ngSrc.isFirstChange()){const Te=this._renderedSrc;this.updateSrcAndSrcset(!0);const ot=this._renderedSrc;null!==this.lcpObserver&&Te&&ot&&Te!==ot&&this.injector.get(T.NgZone).runOutsideAngular(()=>{this.lcpObserver?.updateImage(Te,ot)})}}callImageLoader(pe){let Te=pe;return this.loaderParams&&(Te.loaderParams=this.loaderParams),this.imageLoader(Te)}getLoadingBehavior(){return this.priority||void 0===this.loading?this.priority?"eager":"lazy":this.loading}getFetchPriority(){return this.priority?"high":"auto"}getRewrittenSrc(){return this._renderedSrc||(this._renderedSrc=this.callImageLoader({src:this.ngSrc})),this._renderedSrc}getRewrittenSrcset(){const pe=bh.test(this.ngSrcset);return this.ngSrcset.split(",").filter(ot=>""!==ot).map(ot=>{ot=ot.trim();const gn=pe?parseFloat(ot):parseFloat(ot)*this.width;return`${this.callImageLoader({src:this.ngSrc,width:gn})} ${ot}`}).join(", ")}getAutomaticSrcset(){return this.sizes?this.getResponsiveSrcset():this.getFixedSrcset()}getResponsiveSrcset(){const{breakpoints:pe}=this.config;let Te=pe;return"100vw"===this.sizes?.trim()&&(Te=pe.filter(gn=>gn>=640)),Te.map(gn=>`${this.callImageLoader({src:this.ngSrc,width:gn})} ${gn}w`).join(", ")}updateSrcAndSrcset(pe=!1){pe&&(this._renderedSrc=null);const Te=this.getRewrittenSrc();let ot;return this.setHostAttribute("src",Te),this.ngSrcset?ot=this.getRewrittenSrcset():this.shouldGenerateAutomaticSrcset()&&(ot=this.getAutomaticSrcset()),ot&&this.setHostAttribute("srcset",ot),ot}getFixedSrcset(){return ef.map(Te=>`${this.callImageLoader({src:this.ngSrc,width:this.width*Te})} ${Te}x`).join(", ")}shouldGenerateAutomaticSrcset(){let pe=!1;return this.sizes||(pe=this.width>1920||this.height>1080),!this.disableOptimizedSrcset&&!this.srcset&&this.imageLoader!==yu&&!pe}generatePlaceholder(pe){const{placeholderResolution:Te}=this.config;return!0===pe?`url(${this.callImageLoader({src:this.ngSrc,width:Te,isPlaceholder:!0})})`:"string"==typeof pe?`url(${pe})`:null}shouldBlurPlaceholder(pe){return!pe||!pe.hasOwnProperty("blur")||!!pe.blur}removePlaceholderOnLoad(pe){const Te=()=>{const qn=this.injector.get(T.ChangeDetectorRef);ot(),gn(),this.placeholder=!1,qn.markForCheck()},ot=this.renderer.listen(pe,"load",Te),gn=this.renderer.listen(pe,"error",Te)}ngOnDestroy(){}setHostAttribute(pe,Te){this.renderer.setAttribute(this.imgElement,pe,Te)}static{this.\u0275fac=function(Te){return new(Te||ie)}}static{this.\u0275dir=T.\u0275\u0275defineDirective({type:ie,selectors:[["img","ngSrc",""]],hostVars:18,hostBindings:function(Te,ot){2&Te&&T.\u0275\u0275styleProp("position",ot.fill?"absolute":null)("width",ot.fill?"100%":null)("height",ot.fill?"100%":null)("inset",ot.fill?"0":null)("background-size",ot.placeholder?"cover":null)("background-position",ot.placeholder?"50% 50%":null)("background-repeat",ot.placeholder?"no-repeat":null)("background-image",ot.placeholder?ot.generatePlaceholder(ot.placeholder):null)("filter",ot.placeholder&&ot.shouldBlurPlaceholder(ot.placeholderConfig)?"blur(15px)":null)},inputs:{ngSrc:[2,"ngSrc","ngSrc",xc],ngSrcset:"ngSrcset",sizes:"sizes",width:[2,"width","width",T.numberAttribute],height:[2,"height","height",T.numberAttribute],loading:"loading",priority:[2,"priority","priority",T.booleanAttribute],loaderParams:"loaderParams",disableOptimizedSrcset:[2,"disableOptimizedSrcset","disableOptimizedSrcset",T.booleanAttribute],fill:[2,"fill","fill",T.booleanAttribute],placeholder:[2,"placeholder","placeholder",fg],placeholderConfig:"placeholderConfig",src:"src",srcset:"srcset"},standalone:!0,features:[T.\u0275\u0275InputTransformsFeature,T.\u0275\u0275NgOnChangesFeature]})}}return ie})();function xc(ie){return"string"==typeof ie?ie:(0,T.\u0275unwrapSafeValue)(ie)}function fg(ie){return"string"==typeof ie&&"true"!==ie&&"false"!==ie&&""!==ie?ie:(0,T.booleanAttribute)(ie)}},1626:(it,C,w)=>{"use strict";w.r(C),w.d(C,{FetchBackend:()=>Dr,HTTP_INTERCEPTORS:()=>jr,HTTP_TRANSFER_CACHE_ORIGIN_MAP:()=>eu,HttpBackend:()=>Ae,HttpClient:()=>Pn,HttpClientJsonpModule:()=>Wo,HttpClientModule:()=>qs,HttpClientXsrfModule:()=>Tl,HttpContext:()=>jt,HttpContextToken:()=>Ht,HttpErrorResponse:()=>bt,HttpEventType:()=>Gr,HttpFeatureKind:()=>Qe,HttpHandler:()=>_e,HttpHeaderResponse:()=>Nn,HttpHeaders:()=>Ne,HttpParams:()=>Gt,HttpRequest:()=>wr,HttpResponse:()=>br,HttpResponseBase:()=>Tn,HttpStatusCode:()=>Ut,HttpUrlEncodingCodec:()=>tt,HttpXhrBackend:()=>so,HttpXsrfTokenExtractor:()=>ba,JsonpClientBackend:()=>Xo,JsonpInterceptor:()=>Ho,provideHttpClient:()=>wn,withFetch:()=>jc,withInterceptors:()=>$n,withInterceptorsFromDi:()=>ji,withJsonpSupport:()=>oa,withNoXsrfProtection:()=>ia,withRequestsMadeViaParent:()=>ys,withXsrfConfiguration:()=>xn,\u0275HTTP_ROOT_INTERCEPTOR_FNS:()=>_i,\u0275HttpInterceptingHandler:()=>Fo,\u0275HttpInterceptorHandler:()=>Fo,\u0275REQUESTS_CONTRIBUTE_TO_STABILITY:()=>xs,\u0275withHttpTransferCache:()=>dl});var z=w(467),T=w(3953),V=w(7673),N=w(1985),R=w(6648),M=w(274),G=w(5964),Y=w(6354),K=w(980),J=w(5558),se=w(8141),U=w(177);class _e{}class Ae{}class Ne{constructor(At){this.normalizedNames=new Map,this.lazyUpdate=null,At?"string"==typeof At?this.lazyInit=()=>{this.headers=new Map,At.split("\n").forEach(ut=>{const vn=ut.indexOf(":");if(vn>0){const Jn=ut.slice(0,vn),mr=Jn.toLowerCase(),pr=ut.slice(vn+1).trim();this.maybeSetNormalizedName(Jn,mr),this.headers.has(mr)?this.headers.get(mr).push(pr):this.headers.set(mr,[pr])}})}:typeof Headers<"u"&&At instanceof Headers?(this.headers=new Map,At.forEach((ut,vn)=>{this.setHeaderEntries(vn,ut)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(At).forEach(([ut,vn])=>{this.setHeaderEntries(ut,vn)})}:this.headers=new Map}has(At){return this.init(),this.headers.has(At.toLowerCase())}get(At){this.init();const ut=this.headers.get(At.toLowerCase());return ut&&ut.length>0?ut[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(At){return this.init(),this.headers.get(At.toLowerCase())||null}append(At,ut){return this.clone({name:At,value:ut,op:"a"})}set(At,ut){return this.clone({name:At,value:ut,op:"s"})}delete(At,ut){return this.clone({name:At,value:ut,op:"d"})}maybeSetNormalizedName(At,ut){this.normalizedNames.has(ut)||this.normalizedNames.set(ut,At)}init(){this.lazyInit&&(this.lazyInit instanceof Ne?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(At=>this.applyUpdate(At)),this.lazyUpdate=null))}copyFrom(At){At.init(),Array.from(At.headers.keys()).forEach(ut=>{this.headers.set(ut,At.headers.get(ut)),this.normalizedNames.set(ut,At.normalizedNames.get(ut))})}clone(At){const ut=new Ne;return ut.lazyInit=this.lazyInit&&this.lazyInit instanceof Ne?this.lazyInit:this,ut.lazyUpdate=(this.lazyUpdate||[]).concat([At]),ut}applyUpdate(At){const ut=At.name.toLowerCase();switch(At.op){case"a":case"s":let vn=At.value;if("string"==typeof vn&&(vn=[vn]),0===vn.length)return;this.maybeSetNormalizedName(At.name,ut);const Jn=("a"===At.op?this.headers.get(ut):void 0)||[];Jn.push(...vn),this.headers.set(ut,Jn);break;case"d":const mr=At.value;if(mr){let pr=this.headers.get(ut);if(!pr)return;pr=pr.filter(Ai=>-1===mr.indexOf(Ai)),0===pr.length?(this.headers.delete(ut),this.normalizedNames.delete(ut)):this.headers.set(ut,pr)}else this.headers.delete(ut),this.normalizedNames.delete(ut)}}setHeaderEntries(At,ut){const vn=(Array.isArray(ut)?ut:[ut]).map(mr=>mr.toString()),Jn=At.toLowerCase();this.headers.set(Jn,vn),this.maybeSetNormalizedName(At,Jn)}forEach(At){this.init(),Array.from(this.normalizedNames.keys()).forEach(ut=>At(this.normalizedNames.get(ut),this.headers.get(ut)))}}class tt{encodeKey(At){return Pt(At)}encodeValue(At){return Pt(At)}decodeKey(At){return decodeURIComponent(At)}decodeValue(At){return decodeURIComponent(At)}}const Bt=/%(\d[a-f0-9])/gi,yt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pt(We){return encodeURIComponent(We).replace(Bt,(At,ut)=>yt[ut]??At)}function vt(We){return`${We}`}class Gt{constructor(At={}){if(this.updates=null,this.cloneFrom=null,this.encoder=At.encoder||new tt,At.fromString){if(At.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _t(We,At){const ut=new Map;return We.length>0&&We.replace(/^\?/,"").split("&").forEach(Jn=>{const mr=Jn.indexOf("="),[pr,Ai]=-1==mr?[At.decodeKey(Jn),""]:[At.decodeKey(Jn.slice(0,mr)),At.decodeValue(Jn.slice(mr+1))],Ii=ut.get(pr)||[];Ii.push(Ai),ut.set(pr,Ii)}),ut}(At.fromString,this.encoder)}else At.fromObject?(this.map=new Map,Object.keys(At.fromObject).forEach(ut=>{const vn=At.fromObject[ut],Jn=Array.isArray(vn)?vn.map(vt):[vt(vn)];this.map.set(ut,Jn)})):this.map=null}has(At){return this.init(),this.map.has(At)}get(At){this.init();const ut=this.map.get(At);return ut?ut[0]:null}getAll(At){return this.init(),this.map.get(At)||null}keys(){return this.init(),Array.from(this.map.keys())}append(At,ut){return this.clone({param:At,value:ut,op:"a"})}appendAll(At){const ut=[];return Object.keys(At).forEach(vn=>{const Jn=At[vn];Array.isArray(Jn)?Jn.forEach(mr=>{ut.push({param:vn,value:mr,op:"a"})}):ut.push({param:vn,value:Jn,op:"a"})}),this.clone(ut)}set(At,ut){return this.clone({param:At,value:ut,op:"s"})}delete(At,ut){return this.clone({param:At,value:ut,op:"d"})}toString(){return this.init(),this.keys().map(At=>{const ut=this.encoder.encodeKey(At);return this.map.get(At).map(vn=>ut+"="+this.encoder.encodeValue(vn)).join("&")}).filter(At=>""!==At).join("&")}clone(At){const ut=new Gt({encoder:this.encoder});return ut.cloneFrom=this.cloneFrom||this,ut.updates=(this.updates||[]).concat(At),ut}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(At=>this.map.set(At,this.cloneFrom.map.get(At))),this.updates.forEach(At=>{switch(At.op){case"a":case"s":const ut=("a"===At.op?this.map.get(At.param):void 0)||[];ut.push(vt(At.value)),this.map.set(At.param,ut);break;case"d":if(void 0===At.value){this.map.delete(At.param);break}{let vn=this.map.get(At.param)||[];const Jn=vn.indexOf(vt(At.value));-1!==Jn&&vn.splice(Jn,1),vn.length>0?this.map.set(At.param,vn):this.map.delete(At.param)}}}),this.cloneFrom=this.updates=null)}}class Ht{constructor(At){this.defaultValue=At}}class jt{constructor(){this.map=new Map}set(At,ut){return this.map.set(At,ut),this}get(At){return this.map.has(At)||this.map.set(At,At.defaultValue()),this.map.get(At)}delete(At){return this.map.delete(At),this}has(At){return this.map.has(At)}keys(){return this.map.keys()}}function On(We){return typeof ArrayBuffer<"u"&&We instanceof ArrayBuffer}function In(We){return typeof Blob<"u"&&We instanceof Blob}function Rn(We){return typeof FormData<"u"&&We instanceof FormData}class wr{constructor(At,ut,vn,Jn){let mr;if(this.url=ut,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=At.toUpperCase(),function Yt(We){switch(We){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Jn?(this.body=void 0!==vn?vn:null,mr=Jn):mr=vn,mr&&(this.reportProgress=!!mr.reportProgress,this.withCredentials=!!mr.withCredentials,mr.responseType&&(this.responseType=mr.responseType),mr.headers&&(this.headers=mr.headers),mr.context&&(this.context=mr.context),mr.params&&(this.params=mr.params),this.transferCache=mr.transferCache),this.headers??=new Ne,this.context??=new jt,this.params){const pr=this.params.toString();if(0===pr.length)this.urlWithParams=ut;else{const Ai=ut.indexOf("?");this.urlWithParams=ut+(-1===Ai?"?":Ai<ut.length-1?"&":"")+pr}}else this.params=new Gt,this.urlWithParams=ut}serializeBody(){return null===this.body?null:"string"==typeof this.body||On(this.body)||In(this.body)||Rn(this.body)||function Nr(We){return typeof URLSearchParams<"u"&&We instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Gt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Rn(this.body)?null:In(this.body)?this.body.type||null:On(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(At={}){const ut=At.method||this.method,vn=At.url||this.url,Jn=At.responseType||this.responseType,mr=At.transferCache??this.transferCache,pr=void 0!==At.body?At.body:this.body,Ai=At.withCredentials??this.withCredentials,Ii=At.reportProgress??this.reportProgress;let co=At.headers||this.headers,ko=At.params||this.params;const jo=At.context??this.context;return void 0!==At.setHeaders&&(co=Object.keys(At.setHeaders).reduce((An,is)=>An.set(is,At.setHeaders[is]),co)),At.setParams&&(ko=Object.keys(At.setParams).reduce((An,is)=>An.set(is,At.setParams[is]),ko)),new wr(ut,vn,pr,{params:ko,headers:co,context:jo,reportProgress:Ii,responseType:Jn,withCredentials:Ai,transferCache:mr})}}var Gr=function(We){return We[We.Sent=0]="Sent",We[We.UploadProgress=1]="UploadProgress",We[We.ResponseHeader=2]="ResponseHeader",We[We.DownloadProgress=3]="DownloadProgress",We[We.Response=4]="Response",We[We.User=5]="User",We}(Gr||{});class Tn{constructor(At,ut=200,vn="OK"){this.headers=At.headers||new Ne,this.status=void 0!==At.status?At.status:ut,this.statusText=At.statusText||vn,this.url=At.url||null,this.ok=this.status>=200&&this.status<300}}class Nn extends Tn{constructor(At={}){super(At),this.type=Gr.ResponseHeader}clone(At={}){return new Nn({headers:At.headers||this.headers,status:void 0!==At.status?At.status:this.status,statusText:At.statusText||this.statusText,url:At.url||this.url||void 0})}}class br extends Tn{constructor(At={}){super(At),this.type=Gr.Response,this.body=void 0!==At.body?At.body:null}clone(At={}){return new br({body:void 0!==At.body?At.body:this.body,headers:At.headers||this.headers,status:void 0!==At.status?At.status:this.status,statusText:At.statusText||this.statusText,url:At.url||this.url||void 0})}}class bt extends Tn{constructor(At){super(At,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${At.url||"(unknown url)"}`:`Http failure response for ${At.url||"(unknown url)"}: ${At.status} ${At.statusText}`,this.error=At.error||null}}var Ut=function(We){return We[We.Continue=100]="Continue",We[We.SwitchingProtocols=101]="SwitchingProtocols",We[We.Processing=102]="Processing",We[We.EarlyHints=103]="EarlyHints",We[We.Ok=200]="Ok",We[We.Created=201]="Created",We[We.Accepted=202]="Accepted",We[We.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",We[We.NoContent=204]="NoContent",We[We.ResetContent=205]="ResetContent",We[We.PartialContent=206]="PartialContent",We[We.MultiStatus=207]="MultiStatus",We[We.AlreadyReported=208]="AlreadyReported",We[We.ImUsed=226]="ImUsed",We[We.MultipleChoices=300]="MultipleChoices",We[We.MovedPermanently=301]="MovedPermanently",We[We.Found=302]="Found",We[We.SeeOther=303]="SeeOther",We[We.NotModified=304]="NotModified",We[We.UseProxy=305]="UseProxy",We[We.Unused=306]="Unused",We[We.TemporaryRedirect=307]="TemporaryRedirect",We[We.PermanentRedirect=308]="PermanentRedirect",We[We.BadRequest=400]="BadRequest",We[We.Unauthorized=401]="Unauthorized",We[We.PaymentRequired=402]="PaymentRequired",We[We.Forbidden=403]="Forbidden",We[We.NotFound=404]="NotFound",We[We.MethodNotAllowed=405]="MethodNotAllowed",We[We.NotAcceptable=406]="NotAcceptable",We[We.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",We[We.RequestTimeout=408]="RequestTimeout",We[We.Conflict=409]="Conflict",We[We.Gone=410]="Gone",We[We.LengthRequired=411]="LengthRequired",We[We.PreconditionFailed=412]="PreconditionFailed",We[We.PayloadTooLarge=413]="PayloadTooLarge",We[We.UriTooLong=414]="UriTooLong",We[We.UnsupportedMediaType=415]="UnsupportedMediaType",We[We.RangeNotSatisfiable=416]="RangeNotSatisfiable",We[We.ExpectationFailed=417]="ExpectationFailed",We[We.ImATeapot=418]="ImATeapot",We[We.MisdirectedRequest=421]="MisdirectedRequest",We[We.UnprocessableEntity=422]="UnprocessableEntity",We[We.Locked=423]="Locked",We[We.FailedDependency=424]="FailedDependency",We[We.TooEarly=425]="TooEarly",We[We.UpgradeRequired=426]="UpgradeRequired",We[We.PreconditionRequired=428]="PreconditionRequired",We[We.TooManyRequests=429]="TooManyRequests",We[We.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",We[We.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",We[We.InternalServerError=500]="InternalServerError",We[We.NotImplemented=501]="NotImplemented",We[We.BadGateway=502]="BadGateway",We[We.ServiceUnavailable=503]="ServiceUnavailable",We[We.GatewayTimeout=504]="GatewayTimeout",We[We.HttpVersionNotSupported=505]="HttpVersionNotSupported",We[We.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",We[We.InsufficientStorage=507]="InsufficientStorage",We[We.LoopDetected=508]="LoopDetected",We[We.NotExtended=510]="NotExtended",We[We.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",We}(Ut||{});function bn(We,At){return{body:At,headers:We.headers,context:We.context,observe:We.observe,params:We.params,reportProgress:We.reportProgress,responseType:We.responseType,withCredentials:We.withCredentials,transferCache:We.transferCache}}let Pn=(()=>{class We{constructor(ut){this.handler=ut}request(ut,vn,Jn={}){let mr;if(ut instanceof wr)mr=ut;else{let Ii,co;Ii=Jn.headers instanceof Ne?Jn.headers:new Ne(Jn.headers),Jn.params&&(co=Jn.params instanceof Gt?Jn.params:new Gt({fromObject:Jn.params})),mr=new wr(ut,vn,void 0!==Jn.body?Jn.body:null,{headers:Ii,context:Jn.context,params:co,reportProgress:Jn.reportProgress,responseType:Jn.responseType||"json",withCredentials:Jn.withCredentials,transferCache:Jn.transferCache})}const pr=(0,V.of)(mr).pipe((0,M.H)(Ii=>this.handler.handle(Ii)));if(ut instanceof wr||"events"===Jn.observe)return pr;const Ai=pr.pipe((0,G.p)(Ii=>Ii instanceof br));switch(Jn.observe||"body"){case"body":switch(mr.responseType){case"arraybuffer":return Ai.pipe((0,Y.T)(Ii=>{if(null!==Ii.body&&!(Ii.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ii.body}));case"blob":return Ai.pipe((0,Y.T)(Ii=>{if(null!==Ii.body&&!(Ii.body instanceof Blob))throw new Error("Response is not a Blob.");return Ii.body}));case"text":return Ai.pipe((0,Y.T)(Ii=>{if(null!==Ii.body&&"string"!=typeof Ii.body)throw new Error("Response is not a string.");return Ii.body}));default:return Ai.pipe((0,Y.T)(Ii=>Ii.body))}case"response":return Ai;default:throw new Error(`Unreachable: unhandled observe type ${Jn.observe}}`)}}delete(ut,vn={}){return this.request("DELETE",ut,vn)}get(ut,vn={}){return this.request("GET",ut,vn)}head(ut,vn={}){return this.request("HEAD",ut,vn)}jsonp(ut,vn){return this.request("JSONP",ut,{params:(new Gt).append(vn,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ut,vn={}){return this.request("OPTIONS",ut,vn)}patch(ut,vn,Jn={}){return this.request("PATCH",ut,bn(Jn,vn))}post(ut,vn,Jn={}){return this.request("POST",ut,bn(Jn,vn))}put(ut,vn,Jn={}){return this.request("PUT",ut,bn(Jn,vn))}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject(_e))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();const gr=/^\)\]\}',?\n/;function Oi(We){if(We.url)return We.url;const At="X-Request-URL".toLocaleLowerCase();return We.headers.get(At)}let Dr=(()=>{class We{constructor(){this.fetchImpl=(0,T.inject)(hr,{optional:!0})?.fetch??((...ut)=>globalThis.fetch(...ut)),this.ngZone=(0,T.inject)(T.NgZone)}handle(ut){return new N.c(vn=>{const Jn=new AbortController;return this.doRequest(ut,Jn.signal,vn).then(ei,mr=>vn.error(new bt({error:mr}))),()=>Jn.abort()})}doRequest(ut,vn,Jn){var mr=this;return(0,z.A)(function*(){const pr=mr.createRequestInit(ut);let Ai;try{const ao=mr.ngZone.runOutsideAngular(()=>mr.fetchImpl(ut.urlWithParams,{signal:vn,...pr}));(function ra(We){We.then(ei,ei)})(ao),Jn.next({type:Gr.Sent}),Ai=yield ao}catch(ao){return void Jn.error(new bt({error:ao,status:ao.status??0,statusText:ao.statusText,url:ut.urlWithParams,headers:ao.headers}))}const Ii=new Ne(Ai.headers),co=Ai.statusText,ko=Oi(Ai)??ut.urlWithParams;let jo=Ai.status,An=null;if(ut.reportProgress&&Jn.next(new Nn({headers:Ii,status:jo,statusText:co,url:ko})),Ai.body){const ao=Ai.headers.get("content-length"),Jo=[],la=Ai.body.getReader();let wc,oi,$s=0;const Ma=typeof Zone<"u"&&Zone.current;yield mr.ngZone.runOutsideAngular((0,z.A)(function*(){for(;;){const{done:ls,value:os}=yield la.read();if(ls)break;if(Jo.push(os),$s+=os.length,ut.reportProgress){oi="text"===ut.responseType?(oi??"")+(wc??=new TextDecoder).decode(os,{stream:!0}):void 0;const ka=()=>Jn.next({type:Gr.DownloadProgress,total:ao?+ao:void 0,loaded:$s,partialText:oi});Ma?Ma.run(ka):ka()}}}));const Wc=mr.concatChunks(Jo,$s);try{const ls=Ai.headers.get("Content-Type")??"";An=mr.parseBody(ut,Wc,ls)}catch(ls){return void Jn.error(new bt({error:ls,headers:new Ne(Ai.headers),status:Ai.status,statusText:Ai.statusText,url:Oi(Ai)??ut.urlWithParams}))}}0===jo&&(jo=An?200:0),jo>=200&&jo<300?(Jn.next(new br({body:An,headers:Ii,status:jo,statusText:co,url:ko})),Jn.complete()):Jn.error(new bt({error:An,headers:Ii,status:jo,statusText:co,url:ko}))})()}parseBody(ut,vn,Jn){switch(ut.responseType){case"json":const mr=(new TextDecoder).decode(vn).replace(gr,"");return""===mr?null:JSON.parse(mr);case"text":return(new TextDecoder).decode(vn);case"blob":return new Blob([vn],{type:Jn});case"arraybuffer":return vn.buffer}}createRequestInit(ut){const vn={},Jn=ut.withCredentials?"include":void 0;if(ut.headers.forEach((mr,pr)=>vn[mr]=pr.join(",")),ut.headers.has("Accept")||(vn.Accept="application/json, text/plain, */*"),!ut.headers.has("Content-Type")){const mr=ut.detectContentTypeHeader();null!==mr&&(vn["Content-Type"]=mr)}return{body:ut.serializeBody(),method:ut.method,headers:vn,credentials:Jn}}concatChunks(ut,vn){const Jn=new Uint8Array(vn);let mr=0;for(const pr of ut)Jn.set(pr,mr),mr+=pr.length;return Jn}static{this.\u0275fac=function(vn){return new(vn||We)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();class hr{}function ei(){}function Hi(We,At){return At(We)}function No(We,At){return(ut,vn)=>At.intercept(ut,{handle:Jn=>We(Jn,vn)})}const jr=new T.InjectionToken(""),Do=new T.InjectionToken(""),_i=new T.InjectionToken(""),xs=new T.InjectionToken("",{providedIn:"root",factory:()=>!0});function tc(){let We=null;return(At,ut)=>{null===We&&(We=((0,T.inject)(jr,{optional:!0})??[]).reduceRight(No,Hi));const vn=(0,T.inject)(T.\u0275PendingTasks);if((0,T.inject)(xs)){const mr=vn.add();return We(At,ut).pipe((0,K.j)(()=>vn.remove(mr)))}return We(At,ut)}}let kr,Fo=(()=>{class We extends _e{constructor(ut,vn){super(),this.backend=ut,this.injector=vn,this.chain=null,this.pendingTasks=(0,T.inject)(T.\u0275PendingTasks),this.contributeToStability=(0,T.inject)(xs)}handle(ut){if(null===this.chain){const vn=Array.from(new Set([...this.injector.get(Do),...this.injector.get(_i,[])]));this.chain=vn.reduceRight((Jn,mr)=>function fo(We,At,ut){return(vn,Jn)=>(0,T.runInInjectionContext)(ut,()=>At(vn,mr=>We(mr,Jn)))}(Jn,mr,this.injector),Hi)}if(this.contributeToStability){const vn=this.pendingTasks.add();return this.chain(ut,Jn=>this.backend.handle(Jn)).pipe((0,K.j)(()=>this.pendingTasks.remove(vn)))}return this.chain(ut,vn=>this.backend.handle(vn))}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject(Ae),T.\u0275\u0275inject(T.EnvironmentInjector))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})(),Ta=0;class $a{}function ca(){return"object"==typeof window?window:{}}let Xo=(()=>{class We{constructor(ut,vn){this.callbackMap=ut,this.document=vn,this.resolvedPromise=Promise.resolve()}nextCallback(){return"ng_jsonp_callback_"+Ta++}handle(ut){if("JSONP"!==ut.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==ut.responseType)throw new Error("JSONP requests must use Json response type.");if(ut.headers.keys().length>0)throw new Error("JSONP requests do not support headers.");return new N.c(vn=>{const Jn=this.nextCallback(),mr=ut.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${Jn}$1`),pr=this.document.createElement("script");pr.src=mr;let Ai=null,Ii=!1;this.callbackMap[Jn]=An=>{delete this.callbackMap[Jn],Ai=An,Ii=!0};const co=()=>{pr.remove(),delete this.callbackMap[Jn]};return pr.addEventListener("load",An=>{this.resolvedPromise.then(()=>{co(),Ii?(vn.next(new br({body:Ai,status:200,statusText:"OK",url:mr})),vn.complete()):vn.error(new bt({url:mr,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})}),pr.addEventListener("error",An=>{co(),vn.error(new bt({error:An,status:0,statusText:"JSONP Error",url:mr}))}),this.document.body.appendChild(pr),vn.next({type:Gr.Sent}),()=>{Ii||this.removeListeners(pr),co()}})}removeListeners(ut){kr??=this.document.implementation.createHTMLDocument(),kr.adoptNode(ut)}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject($a),T.\u0275\u0275inject(U.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();function ua(We,At){return"JSONP"===We.method?(0,T.inject)(Xo).handle(We):At(We)}let Ho=(()=>{class We{constructor(ut){this.injector=ut}intercept(ut,vn){return(0,T.runInInjectionContext)(this.injector,()=>ua(ut,Jn=>vn.handle(Jn)))}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject(T.EnvironmentInjector))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();const Aa=/^\)\]\}',?\n/;let so=(()=>{class We{constructor(ut){this.xhrFactory=ut}handle(ut){if("JSONP"===ut.method)throw new T.\u0275RuntimeError(-2800,!1);const vn=this.xhrFactory;return(vn.\u0275loadImpl?(0,R.H)(vn.\u0275loadImpl()):(0,V.of)(null)).pipe((0,J.n)(()=>new N.c(mr=>{const pr=vn.build();if(pr.open(ut.method,ut.urlWithParams),ut.withCredentials&&(pr.withCredentials=!0),ut.headers.forEach((Jo,la)=>pr.setRequestHeader(Jo,la.join(","))),ut.headers.has("Accept")||pr.setRequestHeader("Accept","application/json, text/plain, */*"),!ut.headers.has("Content-Type")){const Jo=ut.detectContentTypeHeader();null!==Jo&&pr.setRequestHeader("Content-Type",Jo)}if(ut.responseType){const Jo=ut.responseType.toLowerCase();pr.responseType="json"!==Jo?Jo:"text"}const Ai=ut.serializeBody();let Ii=null;const co=()=>{if(null!==Ii)return Ii;const Jo=pr.statusText||"OK",la=new Ne(pr.getAllResponseHeaders()),$s=function oo(We){return"responseURL"in We&&We.responseURL?We.responseURL:/^X-Request-URL:/m.test(We.getAllResponseHeaders())?We.getResponseHeader("X-Request-URL"):null}(pr)||ut.url;return Ii=new Nn({headers:la,status:pr.status,statusText:Jo,url:$s}),Ii},ko=()=>{let{headers:Jo,status:la,statusText:$s,url:wc}=co(),oi=null;204!==la&&(oi=typeof pr.response>"u"?pr.responseText:pr.response),0===la&&(la=oi?200:0);let Ma=la>=200&&la<300;if("json"===ut.responseType&&"string"==typeof oi){const Wc=oi;oi=oi.replace(Aa,"");try{oi=""!==oi?JSON.parse(oi):null}catch(ls){oi=Wc,Ma&&(Ma=!1,oi={error:ls,text:oi})}}Ma?(mr.next(new br({body:oi,headers:Jo,status:la,statusText:$s,url:wc||void 0})),mr.complete()):mr.error(new bt({error:oi,headers:Jo,status:la,statusText:$s,url:wc||void 0}))},jo=Jo=>{const{url:la}=co(),$s=new bt({error:Jo,status:pr.status||0,statusText:pr.statusText||"Unknown Error",url:la||void 0});mr.error($s)};let An=!1;const is=Jo=>{An||(mr.next(co()),An=!0);let la={type:Gr.DownloadProgress,loaded:Jo.loaded};Jo.lengthComputable&&(la.total=Jo.total),"text"===ut.responseType&&pr.responseText&&(la.partialText=pr.responseText),mr.next(la)},ao=Jo=>{let la={type:Gr.UploadProgress,loaded:Jo.loaded};Jo.lengthComputable&&(la.total=Jo.total),mr.next(la)};return pr.addEventListener("load",ko),pr.addEventListener("error",jo),pr.addEventListener("timeout",jo),pr.addEventListener("abort",jo),ut.reportProgress&&(pr.addEventListener("progress",is),null!==Ai&&pr.upload&&pr.upload.addEventListener("progress",ao)),pr.send(Ai),mr.next({type:Gr.Sent}),()=>{pr.removeEventListener("error",jo),pr.removeEventListener("abort",jo),pr.removeEventListener("load",ko),pr.removeEventListener("timeout",jo),ut.reportProgress&&(pr.removeEventListener("progress",is),null!==Ai&&pr.upload&&pr.upload.removeEventListener("progress",ao)),pr.readyState!==pr.DONE&&pr.abort()}})))}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject(U.XhrFactory))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();const Ci=new T.InjectionToken(""),Oc="XSRF-TOKEN",Ns=new T.InjectionToken("",{providedIn:"root",factory:()=>Oc}),Ds="X-XSRF-TOKEN",ns=new T.InjectionToken("",{providedIn:"root",factory:()=>Ds});class ba{}let _s=(()=>{class We{constructor(ut,vn,Jn){this.doc=ut,this.platform=vn,this.cookieName=Jn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ut=this.doc.cookie||"";return ut!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,U.\u0275parseCookieValue)(ut,this.cookieName),this.lastCookieString=ut),this.lastToken}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject(U.DOCUMENT),T.\u0275\u0275inject(T.PLATFORM_ID),T.\u0275\u0275inject(Ns))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();function Kt(We,At){const ut=We.url.toLowerCase();if(!(0,T.inject)(Ci)||"GET"===We.method||"HEAD"===We.method||ut.startsWith("http://")||ut.startsWith("https://"))return At(We);const vn=(0,T.inject)(ba).getToken(),Jn=(0,T.inject)(ns);return null!=vn&&!We.headers.has(Jn)&&(We=We.clone({headers:We.headers.set(Jn,vn)})),At(We)}let en=(()=>{class We{constructor(ut){this.injector=ut}intercept(ut,vn){return(0,T.runInInjectionContext)(this.injector,()=>Kt(ut,Jn=>vn.handle(Jn)))}static{this.\u0275fac=function(vn){return new(vn||We)(T.\u0275\u0275inject(T.EnvironmentInjector))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac})}}return We})();var Qe=function(We){return We[We.Interceptors=0]="Interceptors",We[We.LegacyInterceptors=1]="LegacyInterceptors",We[We.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",We[We.NoXsrfProtection=3]="NoXsrfProtection",We[We.JsonpSupport=4]="JsonpSupport",We[We.RequestsMadeViaParent=5]="RequestsMadeViaParent",We[We.Fetch=6]="Fetch",We}(Qe||{});function Et(We,At){return{\u0275kind:We,\u0275providers:At}}function wn(...We){const At=[Pn,so,Fo,{provide:_e,useExisting:Fo},{provide:Ae,useFactory:()=>(0,T.inject)(Dr,{optional:!0})??(0,T.inject)(so)},{provide:Do,useValue:Kt,multi:!0},{provide:Ci,useValue:!0},{provide:ba,useClass:_s}];for(const ut of We)At.push(...ut.\u0275providers);return(0,T.makeEnvironmentProviders)(At)}function $n(We){return Et(Qe.Interceptors,We.map(At=>({provide:Do,useValue:At,multi:!0})))}const Ti=new T.InjectionToken("");function ji(){return Et(Qe.LegacyInterceptors,[{provide:Ti,useFactory:tc},{provide:Do,useExisting:Ti,multi:!0}])}function xn({cookieName:We,headerName:At}){const ut=[];return void 0!==We&&ut.push({provide:Ns,useValue:We}),void 0!==At&&ut.push({provide:ns,useValue:At}),Et(Qe.CustomXsrfConfiguration,ut)}function ia(){return Et(Qe.NoXsrfProtection,[{provide:Ci,useValue:!1}])}function oa(){return Et(Qe.JsonpSupport,[Xo,{provide:$a,useFactory:ca},{provide:Do,useValue:ua,multi:!0}])}function ys(){return Et(Qe.RequestsMadeViaParent,[{provide:Ae,useFactory:()=>(0,T.inject)(_e,{skipSelf:!0,optional:!0})}])}function jc(){return Et(Qe.Fetch,[Dr,{provide:Ae,useExisting:Dr}])}let Tl=(()=>{class We{static disable(){return{ngModule:We,providers:[ia().\u0275providers]}}static withOptions(ut={}){return{ngModule:We,providers:xn(ut).\u0275providers}}static{this.\u0275fac=function(vn){return new(vn||We)}}static{this.\u0275mod=T.\u0275\u0275defineNgModule({type:We})}static{this.\u0275inj=T.\u0275\u0275defineInjector({providers:[en,{provide:jr,useExisting:en,multi:!0},{provide:ba,useClass:_s},xn({cookieName:Oc,headerName:Ds}).\u0275providers,{provide:Ci,useValue:!0}]})}}return We})(),qs=(()=>{class We{static{this.\u0275fac=function(vn){return new(vn||We)}}static{this.\u0275mod=T.\u0275\u0275defineNgModule({type:We})}static{this.\u0275inj=T.\u0275\u0275defineInjector({providers:[wn(ji())]})}}return We})(),Wo=(()=>{class We{static{this.\u0275fac=function(vn){return new(vn||We)}}static{this.\u0275mod=T.\u0275\u0275defineNgModule({type:We})}static{this.\u0275inj=T.\u0275\u0275defineInjector({providers:[oa().\u0275providers]})}}return We})();const eu=new T.InjectionToken(""),vs="b",Va="h",Pc="s",rs="st",ks="u",Ia="rt",Al=new T.InjectionToken(""),cl=["GET","HEAD"];function ll(We,At){const{isCacheActive:ut,...vn}=(0,T.inject)(Al),{transferCache:Jn,method:mr}=We;if(!ut||!1===Jn||"POST"===mr&&!vn.includePostRequests&&!Jn||"POST"!==mr&&!cl.includes(mr)||!vn.includeRequestsWithAuthHeaders&&function ul(We){return We.headers.has("authorization")||We.headers.has("proxy-authorization")}(We)||!1===vn.filter?.(We))return At(We);const pr=(0,T.inject)(T.TransferState),Ai=(0,T.inject)(eu,{optional:!0}),Ii=(0,U.isPlatformServer)((0,T.inject)(T.PLATFORM_ID));if(Ai&&!Ii)throw new T.\u0275RuntimeError(2803,!1);const co=Ii&&Ai?function Ga(We,At){const ut=new URL(We,"resolve://").origin,vn=At[ut];return vn?We.replace(ut,vn):We}(We.url,Ai):We.url,ko=function jl(We,At){const{params:ut,method:vn,responseType:Jn}=We,mr=Il(ut);let pr=We.serializeBody();pr instanceof URLSearchParams?pr=Il(pr):"string"!=typeof pr&&(pr="");const Ii=function Dl(We){let At=0;for(const ut of We)At=Math.imul(31,At)+ut.charCodeAt(0)|0;return At+=2147483648,At.toString()}([vn,Jn,At,pr,mr].join("|"));return(0,T.makeStateKey)(Ii)}(We,co),jo=pr.get(ko,null);let An=vn.includeHeaders;if("object"==typeof Jn&&Jn.includeHeaders&&(An=Jn.includeHeaders),jo){const{[vs]:is,[Ia]:ao,[Va]:Jo,[Pc]:la,[rs]:$s,[ks]:wc}=jo;let oi=is;switch(ao){case"arraybuffer":oi=(new TextEncoder).encode(is).buffer;break;case"blob":oi=new Blob([is])}let Ma=new Ne(Jo);return(0,V.of)(new br({body:oi,headers:Ma,status:la,statusText:$s,url:wc}))}return At(We).pipe((0,se.M)(is=>{is instanceof br&&Ii&&pr.set(ko,{[vs]:is.body,[Va]:Cs(is.headers,An),[Pc]:is.status,[rs]:is.statusText,[ks]:co,[Ia]:We.responseType})}))}function Cs(We,At){if(!At)return{};const ut={};for(const vn of At){const Jn=We.getAll(vn);null!==Jn&&(ut[vn]=Jn)}return ut}function Il(We){return[...We.keys()].sort().map(At=>`${At}=${We.getAll(At)}`).join("&")}function dl(We){return[{provide:Al,useFactory:()=>((0,T.\u0275performanceMarkFeature)("NgHttpTransferCache"),{isCacheActive:!0,...We})},{provide:_i,useValue:ll,multi:!0,deps:[T.TransferState,Al]},{provide:T.APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:()=>{const At=(0,T.inject)(T.ApplicationRef),ut=(0,T.inject)(Al);return()=>{(0,T.\u0275whenStable)(At).then(()=>{ut.isCacheActive=!1})}}}]}},3953:(it,C,w)=>{"use strict";function z(r,a){return Object.is(r,a)}w.r(C),w.d(C,{ANIMATION_MODULE_TYPE:()=>Uj,APP_BOOTSTRAP_LISTENER:()=>lO,APP_ID:()=>PA,APP_INITIALIZER:()=>Cb,AfterRenderPhase:()=>O_,ApplicationInitStatus:()=>Mm,ApplicationModule:()=>dB,ApplicationRef:()=>yl,Attribute:()=>w3,COMPILER_OPTIONS:()=>iD,CSP_NONCE:()=>v9,CUSTOM_ELEMENTS_SCHEMA:()=>Ff,ChangeDetectionStrategy:()=>Or,ChangeDetectorRef:()=>l1,Compiler:()=>Gw,CompilerFactory:()=>rv,Component:()=>iO,ComponentFactory:()=>DC,ComponentFactoryResolver:()=>kC,ComponentRef:()=>O4,ContentChild:()=>SI,ContentChildren:()=>qH,DEFAULT_CURRENCY_CODE:()=>pO,DebugElement:()=>Tb,DebugEventListener:()=>ZU,DebugNode:()=>CO,DefaultIterableDiffer:()=>K5,DestroyRef:()=>hC,Directive:()=>E5,ENVIRONMENT_INITIALIZER:()=>Gn,ElementRef:()=>Yl,EmbeddedViewRef:()=>vO,EnvironmentInjector:()=>oh,ErrorHandler:()=>l_,EventEmitter:()=>hm,ExperimentalPendingTasks:()=>B7,HOST_TAG_NAME:()=>O3,Host:()=>wh,HostAttributeToken:()=>F7,HostBinding:()=>Qy,HostListener:()=>Xy,INJECTOR:()=>Lr,Inject:()=>Sd,InjectFlags:()=>_a,Injectable:()=>L7,InjectionToken:()=>no,Injector:()=>ah,Input:()=>WN,IterableDiffers:()=>iv,KeyValueDiffers:()=>SO,LOCALE_ID:()=>V_,MissingTranslationStrategy:()=>c1,ModuleWithComponentFactories:()=>nv,NO_ERRORS_SCHEMA:()=>DL,NgModule:()=>S5,NgModuleFactory:()=>Rh,NgModuleRef:()=>Vf,NgProbeToken:()=>bb,NgZone:()=>ou,Optional:()=>Iu,Output:()=>Uw,OutputEmitterRef:()=>fl,PACKAGE_ROOT_URL:()=>y9,PLATFORM_ID:()=>RA,PLATFORM_INITIALIZER:()=>oL,Pipe:()=>Bp,PlatformRef:()=>Qw,Query:()=>HC,QueryList:()=>AA,Renderer2:()=>io,RendererFactory2:()=>$R,RendererStyleFlags2:()=>yC,Sanitizer:()=>RS,SecurityContext:()=>Zv,Self:()=>rh,SimpleChange:()=>zv,SkipSelf:()=>td,TRANSLATIONS:()=>aD,TRANSLATIONS_FORMAT:()=>s1,TemplateRef:()=>yS,Testability:()=>tD,TestabilityRegistry:()=>gf,TransferState:()=>jE,Type:()=>q1,VERSION:()=>aO,Version:()=>oO,ViewChild:()=>b_,ViewChildren:()=>KH,ViewContainerRef:()=>v_,ViewEncapsulation:()=>yr,ViewRef:()=>yO,afterNextRender:()=>YC,afterRender:()=>Tx,asNativeElements:()=>JU,assertInInjectionContext:()=>uy,assertNotInReactiveContext:()=>Sx,assertPlatform:()=>L5,booleanAttribute:()=>m6,computed:()=>fv,contentChild:()=>q4,contentChildren:()=>VH,createComponent:()=>zg,createEnvironmentInjector:()=>mm,createNgModule:()=>gx,createNgModuleRef:()=>$S,createPlatform:()=>uD,createPlatformFactory:()=>gO,defineInjectable:()=>Eh,destroyPlatform:()=>F5,effect:()=>mT,enableProdMode:()=>j5,forwardRef:()=>xi,getDebugNode:()=>Ab,getModuleFactory:()=>mO,getNgModuleById:()=>hD,getPlatform:()=>Jw,importProvidersFrom:()=>nn,inject:()=>Tr,input:()=>Q7,isDevMode:()=>z5,isSignal:()=>CI,isStandalone:()=>q,makeEnvironmentProviders:()=>an,makeStateKey:()=>b9,mergeApplicationConfig:()=>MD,model:()=>Q4,numberAttribute:()=>TB,output:()=>F3,platformCore:()=>Q5,provideExperimentalCheckNoChangesForDebug:()=>H5,provideExperimentalZonelessChangeDetection:()=>a1,provideZoneChangeDetection:()=>dO,reflectComponentType:()=>ID,resolveForwardRef:()=>or,runInInjectionContext:()=>r2,setTestabilityGetter:()=>nD,signal:()=>ix,untracked:()=>Xf,viewChild:()=>$H,viewChildren:()=>V4,\u0275ALLOW_MULTIPLE_PLATFORMS:()=>Xw,\u0275AfterRenderManager:()=>wx,\u0275CONTAINER_HEADER_OFFSET:()=>Mc,\u0275ChangeDetectionScheduler:()=>Uf,\u0275ChangeDetectionSchedulerImpl:()=>mf,\u0275ComponentFactory:()=>DC,\u0275Console:()=>T5,\u0275DEFAULT_LOCALE_ID:()=>k0,\u0275DEFER_BLOCK_CONFIG:()=>$I,\u0275DEFER_BLOCK_DEPENDENCY_INTERCEPTOR:()=>XH,\u0275DeferBlockBehavior:()=>qS,\u0275DeferBlockState:()=>Su,\u0275EffectScheduler:()=>m1,\u0275GLOBAL_EVENT_DELEGATION:()=>c6,\u0275IMAGE_CONFIG:()=>C9,\u0275IMAGE_CONFIG_DEFAULTS:()=>U2,\u0275INJECTOR_SCOPE:()=>Gd,\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE:()=>yu,\u0275INTERNAL_APPLICATION_ERROR_HANDLER:()=>L3,\u0275IS_HYDRATION_DOM_REUSE_ENABLED:()=>QE,\u0275JSACTION_EVENT_CONTRACT:()=>Nb,\u0275LContext:()=>$3,\u0275LifecycleHooksFeature:()=>KR,\u0275LocaleDataIndex:()=>rb,\u0275NG_COMP_DEF:()=>$c,\u0275NG_DIR_DEF:()=>Ls,\u0275NG_ELEMENT_ID:()=>Gh,\u0275NG_INJ_DEF:()=>tf,\u0275NG_MOD_DEF:()=>hg,\u0275NG_PIPE_DEF:()=>pl,\u0275NG_PROV_DEF:()=>mp,\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR:()=>mA,\u0275NO_CHANGE:()=>Qo,\u0275NgModuleFactory:()=>_0,\u0275NoopNgZone:()=>wA,\u0275PROVIDED_NG_ZONE:()=>oD,\u0275PendingTasks:()=>c_,\u0275ReflectionCapabilities:()=>fE,\u0275Render3ComponentFactory:()=>au,\u0275Render3ComponentRef:()=>y_,\u0275Render3NgModuleRef:()=>m0,\u0275RuntimeError:()=>Mr,\u0275SSR_CONTENT_INTEGRITY_MARKER:()=>cL,\u0275TESTABILITY:()=>N5,\u0275TESTABILITY_GETTER:()=>jw,\u0275USE_RUNTIME_DEPS_TRACKER_FOR_JIT:()=>LC,\u0275ViewRef:()=>wC,\u0275XSS_SECURITY_URL:()=>Tc,\u0275ZONELESS_ENABLED:()=>Oy,\u0275_sanitizeHtml:()=>eR,\u0275_sanitizeUrl:()=>HA,\u0275allowSanitizationBypassAndThrow:()=>XE,\u0275annotateForHydration:()=>f1,\u0275bypassSanitizationTrustHtml:()=>Gj,\u0275bypassSanitizationTrustResourceUrl:()=>k9,\u0275bypassSanitizationTrustScript:()=>wL,\u0275bypassSanitizationTrustStyle:()=>qj,\u0275bypassSanitizationTrustUrl:()=>D9,\u0275clearResolutionOfComponentResourcesQueue:()=>TI,\u0275compileComponent:()=>zN,\u0275compileDirective:()=>z_,\u0275compileNgModule:()=>fb,\u0275compileNgModuleDefs:()=>JM,\u0275compileNgModuleFactory:()=>jp,\u0275compilePipe:()=>YN,\u0275convertToBitFlags:()=>us,\u0275createInjector:()=>I2,\u0275defaultIterableDiffers:()=>lB,\u0275defaultKeyValueDiffers:()=>uB,\u0275depsTracker:()=>FC,\u0275detectChangesInViewIfRequired:()=>$_,\u0275devModeEqual:()=>Dy,\u0275findLocaleData:()=>cM,\u0275flushModuleScopingQueueAsMuchAsPossible:()=>Y0,\u0275formatRuntimeError:()=>$l,\u0275generateStandaloneInDeclarationsError:()=>eO,\u0275getAsyncClassMetadataFn:()=>d5,\u0275getDebugNode:()=>Ab,\u0275getDeferBlocks:()=>MO,\u0275getDirectives:()=>u9,\u0275getHostElement:()=>H2,\u0275getInjectableDef:()=>ef,\u0275getLContext:()=>Wh,\u0275getLocaleCurrencyCode:()=>sN,\u0275getLocalePluralCase:()=>lM,\u0275getOutputDestroyRef:()=>TA,\u0275getSanitizationBypassType:()=>SL,\u0275getUnknownElementStrictMode:()=>tS,\u0275getUnknownPropertyStrictMode:()=>Z9,\u0275global:()=>oc,\u0275injectChangeDetectorRef:()=>$5,\u0275internalCreateApplication:()=>s6,\u0275internalProvideZoneChangeDetection:()=>uO,\u0275isBoundToModule:()=>n1,\u0275isComponentDefPendingResolution:()=>kp,\u0275isEnvironmentProviders:()=>Jg,\u0275isInjectable:()=>eh,\u0275isNgModule:()=>Py,\u0275isPromise:()=>rD,\u0275isSubscribable:()=>Jy,\u0275noSideEffects:()=>Xc,\u0275patchComponentDefWithScope:()=>rO,\u0275performanceMarkFeature:()=>Ph,\u0275provideGlobalEventDelegation:()=>wB,\u0275readHydrationInfo:()=>K2,\u0275registerLocaleData:()=>sM,\u0275renderDeferBlockState:()=>x_,\u0275resetCompiledComponents:()=>mb,\u0275resetJitOptions:()=>f5,\u0275resolveComponentResources:()=>lx,\u0275restoreComponentResolutionQueue:()=>ux,\u0275setAllowDuplicateNgModuleIdsForTest:()=>AI,\u0275setAlternateWeakRefImpl:()=>a6,\u0275setClassDebugInfo:()=>UN,\u0275setClassMetadata:()=>xw,\u0275setClassMetadataAsync:()=>VM,\u0275setCurrentInjector:()=>zr,\u0275setDocument:()=>_9,\u0275setInjectorProfilerContext:()=>Ud,\u0275setLocaleId:()=>x8,\u0275setUnknownElementStrictMode:()=>Eg,\u0275setUnknownPropertyStrictMode:()=>jA,\u0275store:()=>OM,\u0275stringify:()=>rr,\u0275transitiveScopesFor:()=>Wy,\u0275triggerResourceLoading:()=>Og,\u0275truncateMiddle:()=>$t,\u0275unregisterLocaleData:()=>O8,\u0275unwrapSafeValue:()=>u_,\u0275unwrapWritableSignal:()=>z4,\u0275whenStable:()=>Vw,\u0275withDomHydration:()=>EB,\u0275withEventReplay:()=>gB,\u0275withI18nSupport:()=>SB,\u0275\u0275CopyDefinitionFeature:()=>px,\u0275\u0275FactoryTarget:()=>Xm,\u0275\u0275HostDirectivesFeature:()=>jC,\u0275\u0275InheritDefinitionFeature:()=>BC,\u0275\u0275InputTransformsFeature:()=>w_,\u0275\u0275NgOnChangesFeature:()=>CE,\u0275\u0275ProvidersFeature:()=>Pw,\u0275\u0275StandaloneFeature:()=>$M,\u0275\u0275advance:()=>QL,\u0275\u0275attribute:()=>Bs,\u0275\u0275attributeInterpolate1:()=>M0,\u0275\u0275attributeInterpolate2:()=>XC,\u0275\u0275attributeInterpolate3:()=>L_,\u0275\u0275attributeInterpolate4:()=>nw,\u0275\u0275attributeInterpolate5:()=>rw,\u0275\u0275attributeInterpolate6:()=>iw,\u0275\u0275attributeInterpolate7:()=>ZC,\u0275\u0275attributeInterpolate8:()=>ow,\u0275\u0275attributeInterpolateV:()=>aw,\u0275\u0275classMap:()=>lw,\u0275\u0275classMapInterpolate1:()=>b8,\u0275\u0275classMapInterpolate2:()=>E8,\u0275\u0275classMapInterpolate3:()=>S8,\u0275\u0275classMapInterpolate4:()=>x0,\u0275\u0275classMapInterpolate5:()=>dw,\u0275\u0275classMapInterpolate6:()=>dh,\u0275\u0275classMapInterpolate7:()=>N0,\u0275\u0275classMapInterpolate8:()=>Cc,\u0275\u0275classMapInterpolateV:()=>_l,\u0275\u0275classProp:()=>P0,\u0275\u0275componentInstance:()=>Nh,\u0275\u0275conditional:()=>pw,\u0275\u0275contentQuery:()=>qy,\u0275\u0275contentQuerySignal:()=>H_,\u0275\u0275declareLet:()=>BM,\u0275\u0275defer:()=>a8,\u0275\u0275deferEnableTimerScheduling:()=>o8,\u0275\u0275deferOnHover:()=>xx,\u0275\u0275deferOnIdle:()=>Rl,\u0275\u0275deferOnImmediate:()=>Px,\u0275\u0275deferOnInteraction:()=>qI,\u0275\u0275deferOnTimer:()=>GI,\u0275\u0275deferOnViewport:()=>Nx,\u0275\u0275deferPrefetchOnHover:()=>l8,\u0275\u0275deferPrefetchOnIdle:()=>I0,\u0275\u0275deferPrefetchOnImmediate:()=>c8,\u0275\u0275deferPrefetchOnInteraction:()=>ew,\u0275\u0275deferPrefetchOnTimer:()=>Rx,\u0275\u0275deferPrefetchOnViewport:()=>u8,\u0275\u0275deferPrefetchWhen:()=>VI,\u0275\u0275deferWhen:()=>s8,\u0275\u0275defineComponent:()=>im,\u0275\u0275defineDirective:()=>mg,\u0275\u0275defineInjectable:()=>as,\u0275\u0275defineInjector:()=>nu,\u0275\u0275defineNgModule:()=>vp,\u0275\u0275definePipe:()=>om,\u0275\u0275directiveInject:()=>bC,\u0275\u0275disableBindings:()=>Ru,\u0275\u0275element:()=>nM,\u0275\u0275elementContainer:()=>nN,\u0275\u0275elementContainerEnd:()=>aM,\u0275\u0275elementContainerStart:()=>oM,\u0275\u0275elementEnd:()=>kg,\u0275\u0275elementStart:()=>gw,\u0275\u0275enableBindings:()=>g2,\u0275\u0275getComponentDepsFactory:()=>XM,\u0275\u0275getCurrentView:()=>iN,\u0275\u0275getInheritedFactory:()=>A7,\u0275\u0275hostProperty:()=>oN,\u0275\u0275i18n:()=>Sw,\u0275\u0275i18nApply:()=>yM,\u0275\u0275i18nAttributes:()=>V8,\u0275\u0275i18nEnd:()=>Ew,\u0275\u0275i18nExp:()=>wm,\u0275\u0275i18nPostprocess:()=>G8,\u0275\u0275i18nStart:()=>yN,\u0275\u0275inject:()=>$o,\u0275\u0275injectAttribute:()=>FE,\u0275\u0275invalidFactory:()=>ZL,\u0275\u0275invalidFactoryDep:()=>Xa,\u0275\u0275listener:()=>z0,\u0275\u0275loadQuery:()=>wN,\u0275\u0275namespaceHTML:()=>u3,\u0275\u0275namespaceMathML:()=>qv,\u0275\u0275namespaceSVG:()=>vy,\u0275\u0275nextContext:()=>q8,\u0275\u0275ngDeclareClassMetadata:()=>AB,\u0275\u0275ngDeclareClassMetadataAsync:()=>IB,\u0275\u0275ngDeclareComponent:()=>MB,\u0275\u0275ngDeclareDirective:()=>_6,\u0275\u0275ngDeclareFactory:()=>y6,\u0275\u0275ngDeclareInjectable:()=>Bg,\u0275\u0275ngDeclareInjector:()=>fT,\u0275\u0275ngDeclareNgModule:()=>q_,\u0275\u0275ngDeclarePipe:()=>K_,\u0275\u0275pipe:()=>Ba,\u0275\u0275pipeBind1:()=>Fw,\u0275\u0275pipeBind2:()=>WM,\u0275\u0275pipeBind3:()=>Qf,\u0275\u0275pipeBind4:()=>B_,\u0275\u0275pipeBindV:()=>q0,\u0275\u0275projection:()=>SM,\u0275\u0275projectionDef:()=>bN,\u0275\u0275property:()=>$x,\u0275\u0275propertyInterpolate:()=>wM,\u0275\u0275propertyInterpolate1:()=>TM,\u0275\u0275propertyInterpolate2:()=>AM,\u0275\u0275propertyInterpolate3:()=>IM,\u0275\u0275propertyInterpolate4:()=>MM,\u0275\u0275propertyInterpolate5:()=>EN,\u0275\u0275propertyInterpolate6:()=>ww,\u0275\u0275propertyInterpolate7:()=>ff,\u0275\u0275propertyInterpolate8:()=>sb,\u0275\u0275propertyInterpolateV:()=>Tw,\u0275\u0275pureFunction0:()=>h5,\u0275\u0275pureFunction1:()=>GM,\u0275\u0275pureFunction2:()=>p5,\u0275\u0275pureFunction3:()=>LN,\u0275\u0275pureFunction4:()=>qM,\u0275\u0275pureFunction5:()=>Nw,\u0275\u0275pureFunction6:()=>Dw,\u0275\u0275pureFunction7:()=>FN,\u0275\u0275pureFunction8:()=>KM,\u0275\u0275pureFunctionV:()=>HN,\u0275\u0275queryAdvance:()=>$0,\u0275\u0275queryRefresh:()=>SN,\u0275\u0275readContextLet:()=>NN,\u0275\u0275reference:()=>W8,\u0275\u0275registerNgModuleType:()=>hx,\u0275\u0275repeater:()=>I8,\u0275\u0275repeaterCreate:()=>A8,\u0275\u0275repeaterTrackByIdentity:()=>Xx,\u0275\u0275repeaterTrackByIndex:()=>fw,\u0275\u0275resetView:()=>oC,\u0275\u0275resolveBody:()=>GA,\u0275\u0275resolveDocument:()=>uR,\u0275\u0275resolveWindow:()=>lR,\u0275\u0275restoreView:()=>OE,\u0275\u0275sanitizeHtml:()=>tR,\u0275\u0275sanitizeResourceUrl:()=>rR,\u0275\u0275sanitizeScript:()=>iR,\u0275\u0275sanitizeStyle:()=>nR,\u0275\u0275sanitizeUrl:()=>mC,\u0275\u0275sanitizeUrlOrResourceUrl:()=>oR,\u0275\u0275setComponentScope:()=>c5,\u0275\u0275setNgModuleScope:()=>l5,\u0275\u0275storeLet:()=>zM,\u0275\u0275styleMap:()=>pf,\u0275\u0275styleMapInterpolate1:()=>Ky,\u0275\u0275styleMapInterpolate2:()=>Q8,\u0275\u0275styleMapInterpolate3:()=>TN,\u0275\u0275styleMapInterpolate4:()=>X8,\u0275\u0275styleMapInterpolate5:()=>AN,\u0275\u0275styleMapInterpolate6:()=>Z8,\u0275\u0275styleMapInterpolate7:()=>PM,\u0275\u0275styleMapInterpolate8:()=>J8,\u0275\u0275styleMapInterpolateV:()=>e5,\u0275\u0275styleProp:()=>XI,\u0275\u0275stylePropInterpolate1:()=>RM,\u0275\u0275stylePropInterpolate2:()=>Aw,\u0275\u0275stylePropInterpolate3:()=>xM,\u0275\u0275stylePropInterpolate4:()=>IN,\u0275\u0275stylePropInterpolate5:()=>MN,\u0275\u0275stylePropInterpolate6:()=>ON,\u0275\u0275stylePropInterpolate7:()=>Wf,\u0275\u0275stylePropInterpolate8:()=>PN,\u0275\u0275stylePropInterpolateV:()=>NM,\u0275\u0275syntheticHostListener:()=>vM,\u0275\u0275syntheticHostProperty:()=>aN,\u0275\u0275template:()=>GS,\u0275\u0275templateRefExtractor:()=>QM,\u0275\u0275text:()=>DM,\u0275\u0275textInterpolate:()=>kM,\u0275\u0275textInterpolate1:()=>Iw,\u0275\u0275textInterpolate2:()=>LM,\u0275\u0275textInterpolate3:()=>Mw,\u0275\u0275textInterpolate4:()=>Ow,\u0275\u0275textInterpolate5:()=>cb,\u0275\u0275textInterpolate6:()=>FM,\u0275\u0275textInterpolate7:()=>HM,\u0275\u0275textInterpolate8:()=>UM,\u0275\u0275textInterpolateV:()=>RN,\u0275\u0275trustConstantHtml:()=>NL,\u0275\u0275trustConstantResourceUrl:()=>Y9,\u0275\u0275twoWayBindingSet:()=>i5,\u0275\u0275twoWayListener:()=>lb,\u0275\u0275twoWayProperty:()=>xN,\u0275\u0275validateIframeAttribute:()=>Ua,\u0275\u0275viewQuery:()=>K8,\u0275\u0275viewQuerySignal:()=>Y8});let T=null,V=!1,N=1;const R=Symbol("SIGNAL");function M(r){const a=T;return T=r,a}function G(){return T}const J={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function se(r){if(V)throw new Error("");if(null===T)return;T.consumerOnSignalRead(r);const a=T.nextProducerIndex++;Ht(T),a<T.producerNode.length&&T.producerNode[a]!==r&&Gt(T)&&vt(T.producerNode[a],T.producerIndexOfThis[a]),T.producerNode[a]!==r&&(T.producerNode[a]=r,T.producerIndexOfThis[a]=Gt(T)?Pt(r,T,a):0),T.producerLastReadVersion[a]=r.version}function _e(r){if((!Gt(r)||r.dirty)&&(r.dirty||r.lastCleanEpoch!==N)){if(!r.producerMustRecompute(r)&&!Bt(r))return r.dirty=!1,void(r.lastCleanEpoch=N);r.producerRecomputeValue(r),r.dirty=!1,r.lastCleanEpoch=N}}function Ae(r){if(void 0===r.liveConsumerNode)return;const a=V;V=!0;try{for(const l of r.liveConsumerNode)l.dirty||Le(l)}finally{V=a}}function Ne(){return!1!==T?.consumerAllowSignalWrites}function Le(r){r.dirty=!0,Ae(r),r.consumerMarkedDirty?.(r)}function tt(r){return r&&(r.nextProducerIndex=0),M(r)}function _t(r,a){if(M(a),r&&void 0!==r.producerNode&&void 0!==r.producerIndexOfThis&&void 0!==r.producerLastReadVersion){if(Gt(r))for(let l=r.nextProducerIndex;l<r.producerNode.length;l++)vt(r.producerNode[l],r.producerIndexOfThis[l]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function Bt(r){Ht(r);for(let a=0;a<r.producerNode.length;a++){const l=r.producerNode[a],h=r.producerLastReadVersion[a];if(h!==l.version||(_e(l),h!==l.version))return!0}return!1}function yt(r){if(Ht(r),Gt(r))for(let a=0;a<r.producerNode.length;a++)vt(r.producerNode[a],r.producerIndexOfThis[a]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function Pt(r,a,l){if(jt(r),0===r.liveConsumerNode.length&&Yt(r))for(let h=0;h<r.producerNode.length;h++)r.producerIndexOfThis[h]=Pt(r.producerNode[h],r,h);return r.liveConsumerIndexOfThis.push(l),r.liveConsumerNode.push(a)-1}function vt(r,a){if(jt(r),1===r.liveConsumerNode.length&&Yt(r))for(let h=0;h<r.producerNode.length;h++)vt(r.producerNode[h],r.producerIndexOfThis[h]);const l=r.liveConsumerNode.length-1;if(r.liveConsumerNode[a]=r.liveConsumerNode[l],r.liveConsumerIndexOfThis[a]=r.liveConsumerIndexOfThis[l],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,a<r.liveConsumerNode.length){const h=r.liveConsumerIndexOfThis[a],y=r.liveConsumerNode[a];Ht(y),y.producerIndexOfThis[h]=a}}function Gt(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function Ht(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}function jt(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}function Yt(r){return void 0!==r.producerNode}function On(r){const a=Object.create(wr);a.computation=r;const l=()=>{if(_e(a),se(a),a.value===Nr)throw a.error;return a.value};return l[R]=a,l}const In=Symbol("UNSET"),Rn=Symbol("COMPUTING"),Nr=Symbol("ERRORED"),wr={...J,value:In,dirty:!0,error:null,equal:z,producerMustRecompute:r=>r.value===In||r.value===Rn,producerRecomputeValue(r){if(r.value===Rn)throw new Error("Detected cycle in computations.");const a=r.value;r.value=Rn;const l=tt(r);let h;try{h=r.computation()}catch(y){h=Nr,r.error=y}finally{_t(r,l)}a!==In&&a!==Nr&&h!==Nr&&r.equal(a,h)?r.value=a:(r.value=h,r.version++)}};let Tn=function Gr(){throw new Error};function Nn(){Tn()}let bt=null;function bn(r,a){Ne()||Nn(),r.equal(r.value,a)||(r.value=a,function Oi(r){r.version++,function U(){N++}(),Ae(r),bt?.()}(r))}const ui={...J,equal:z,value:void 0};const hr=()=>{},ei={...J,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:r=>{null!==r.schedule&&r.schedule(r.ref)},hasRun:!1,cleanupFn:hr};var Hi=w(4412),No=w(1413),fo=w(8359),jr=w(6354),Do=w(1594);const _i={JSACTION:"jsaction"},xs={JSACTION:"__jsaction",OWNER:"__owner"},tc={};function gc(r){return r[xs.JSACTION]}function Vs(r){const a=gc(r)??{};return Fo(r,a),a}function Fo(r,a){r[xs.JSACTION]=a}const Gs=["mouseenter","mouseleave","pointerenter","pointerleave"],$a=["focus","blur","error","load","toggle"],ca=r=>$a.indexOf(r)>=0,Xo=["click","dblclick","focusin","focusout","keydown","keyup","keypress","mouseover","mouseout","submit","touchstart","touchend","touchmove","touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"].concat($a),ua=r=>Xo.indexOf(r)>=0;function Ns(r,a){r.removeEventListener?r.removeEventListener(a.eventType,a.handler,a.capture):r.detachEvent&&r.detachEvent(`on${a.eventType}`,a.handler)}let _s=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator;const jl=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent);class Dl{constructor(a){this.element=a,this.handlerInfos=[]}addEventListener(a,l){jl&&(this.element.style.cursor="pointer"),this.handlerInfos.push(function Oc(r,a,l){let h=!1;return ca(a)&&(h=!0),r.addEventListener(a,l,h),{eventType:a,handler:l,capture:h}}(this.element,a,l(this.element)))}cleanUp(){for(let a=0;a<this.handlerInfos.length;a++)Ns(this.element,this.handlerInfos[a]);this.handlerInfos=[]}}function Zo(r){return r.eventType}function Ga(r,a){r.eventType=a}function hl(r){return r.event}function We(r,a){r.event=a}function At(r){return r.targetElement}function ut(r,a){r.targetElement=a}function vn(r){return r.eic}function Ai(r){return r.eia}function Ii(r,a,l){r.eia=[a,l]}function co(r){r.eia=void 0}function jo(r){return r[1]}function is(r,a){r.eirp=a}function la(r){return r.eir}function $s(r,a){r.eir=a}function wc(r){return{eventType:r.eventType,event:r.event,targetElement:r.targetElement,eic:r.eic,eia:r.eia,timeStamp:r.timeStamp,eirp:r.eirp,eiack:r.eiack,eir:r.eir}}class Wc{constructor(a){this.eventInfo=a}getEventType(){return Zo(this.eventInfo)}setEventType(a){Ga(this.eventInfo,a)}getEvent(){return hl(this.eventInfo)}setEvent(a){We(this.eventInfo,a)}getTargetElement(){return At(this.eventInfo)}setTargetElement(a){ut(this.eventInfo,a)}getContainer(){return vn(this.eventInfo)}setContainer(a){!function Jn(r,a){r.eic=a}(this.eventInfo,a)}getTimestamp(){return function mr(r){return r.timeStamp}(this.eventInfo)}setTimestamp(a){!function pr(r,a){r.timeStamp=a}(this.eventInfo,a)}getAction(){const a=Ai(this.eventInfo);if(a)return{name:a[0],element:a[1]}}setAction(a){a?Ii(this.eventInfo,a.name,a.element):co(this.eventInfo)}getIsReplay(){return function An(r){return r.eirp}(this.eventInfo)}setIsReplay(a){is(this.eventInfo,a)}getResolved(){return la(this.eventInfo)}setResolved(a){$s(this.eventInfo,a)}clone(){return new Wc(wc(this.eventInfo))}}const ls={},os=/\s*;\s*/;class mc{constructor({syntheticMouseEventSupport:a=!1,clickModSupport:l=!0}={}){this.a11yClickSupport=!1,this.clickModSupport=!0,this.updateEventInfoForA11yClick=void 0,this.preventDefaultForA11yClick=void 0,this.populateClickOnlyAction=void 0,this.syntheticMouseEventSupport=a,this.clickModSupport=l}resolveEventType(a){this.clickModSupport&&"click"===Zo(a)&&function en(r){return _s&&r.metaKey||!_s&&r.ctrlKey||function Kt(r){return 2===r.which||null==r.which&&4===r.button}(r)||r.shiftKey}(hl(a))?Ga(a,"clickmod"):this.a11yClickSupport&&this.updateEventInfoForA11yClick(a)}resolveAction(a){la(a)||(this.populateAction(a,At(a)),$s(a,!0))}resolveParentAction(a){const l=Ai(a),h=l&&jo(l);co(a);const y=h&&this.getParentNode(h);y&&this.populateAction(a,y)}populateAction(a,l){let h=l;for(;h&&h!==vn(a)&&(h.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(h,a),!Ai(a));)h=this.getParentNode(h);const y=Ai(a);if(y&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(a),this.syntheticMouseEventSupport&&("mouseenter"===Zo(a)||"mouseleave"===Zo(a)||"pointerenter"===Zo(a)||"pointerleave"===Zo(a))))if(function Tl(r,a,l){const h=r.relatedTarget;return("mouseover"===r.type&&"mouseenter"===a||"mouseout"===r.type&&"mouseleave"===a||"pointerover"===r.type&&"pointerenter"===a||"pointerout"===r.type&&"pointerleave"===a)&&(!h||h!==l&&!l.contains(h))}(hl(a),Zo(a),jo(y))){const S=function qs(r,a){const l={};for(const h in r){if("srcElement"===h||"target"===h)continue;const S=r[h];"function"!=typeof S&&(l[h]=S)}return l.type="mouseover"===r.type?"mouseenter":"mouseout"===r.type?"mouseleave":"pointerover"===r.type?"pointerenter":"pointerleave",l.target=l.srcElement=a,l.bubbles=!1,l}(hl(a),jo(y));We(a,S),ut(a,jo(y))}else co(a)}getParentNode(a){const l=a[xs.OWNER];if(l)return l;const h=a.parentNode;return"#document-fragment"===h?.nodeName?h?.host??null:h}populateActionOnElement(a,l){const h=this.parseActions(a),y=h[Zo(l)];void 0!==y&&Ii(l,y,a),this.a11yClickSupport&&this.populateClickOnlyAction(a,l,h)}parseActions(a){let l=gc(a);if(!l){const h=a.getAttribute(_i.JSACTION);if(h){if(l=function Ta(r){return tc[r]}(h),!l){l={};const y=h.split(os);for(let S=0;S<y.length;S++){const L=y[S];if(!L)continue;const W=L.indexOf(":"),oe=-1!==W,ye=oe?L.substr(0,W).trim():"click",Me=oe?L.substr(W+1).trim():L;l[ye]=Me}!function kr(r,a){tc[r]=a}(h,l)}Fo(a,l)}else l=ls,Fo(a,l)}return l}addA11yClickSupport(a,l,h){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=a,this.preventDefaultForA11yClick=l,this.populateClickOnlyAction=h}}var Co=function(r){return r[r.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",r}(Co||{});class tu{constructor(a,{actionResolver:l,eventReplayer:h}={}){this.dispatchDelegate=a,this.eventReplayScheduled=!1,this.replayEventInfoWrappers=[],this.actionResolver=l,this.eventReplayer=h}dispatch(a){const l=new Wc(a);this.actionResolver?.resolveEventType(a),this.actionResolver?.resolveAction(a);const h=l.getAction();h&&function Lo(r,a){return"A"===r.tagName&&("click"===a.getEventType()||"clickmod"===a.getEventType())}(h.element,l)&&function ns(r){r.preventDefault?r.preventDefault():r.returnValue=!1}(l.getEvent()),this.eventReplayer&&l.getIsReplay()?this.scheduleEventInfoWrapperReplay(l):this.dispatchDelegate(l)}scheduleEventInfoWrapperReplay(a){this.replayEventInfoWrappers.push(a),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}}const Dd=Symbol.for("propagationStopped");class Fu{constructor(a,l=!0){this.dispatchDelegate=a,this.clickModSupport=l,this.actionResolver=new mc({clickModSupport:l}),this.dispatcher=new tu(h=>{this.dispatchToDelegate(h)},{actionResolver:this.actionResolver})}dispatch(a){this.dispatcher.dispatch(a)}dispatchToDelegate(a){for(a.getIsReplay()&&function Uu(r){const a=r.getEvent(),l=r.getTargetElement(),h=a.preventDefault.bind(a);Ju(a,"target",l),Ju(a,"eventPhase",101),Ju(a,"preventDefault",()=>{throw h(),new Error("`preventDefault` called during event replay.")}),Ju(a,"composedPath",()=>{throw new Error("`composedPath` called during event replay.")})}(a),function Hu(r){const a=r.getEvent(),l=r.getEvent().stopPropagation.bind(a),h=()=>{a[Dd]=!0,l()};Ju(a,"stopPropagation",h),Ju(a,"stopImmediatePropagation",h)}(a);a.getAction();){if(Wa(a),ca(a.getEventType())&&a.getAction().element!==a.getTargetElement()||(this.dispatchDelegate(a.getEvent(),a.getAction().name),a.getEvent()[Dd]))return;this.actionResolver.resolveParentAction(a.eventInfo)}}}function Wa(r){const a=r.getEvent(),l=r.getAction()?.element;l&&Ju(a,"currentTarget",l,{configurable:!0})}function Ju(r,a,l,{configurable:h=!1}={}){Object.defineProperty(r,a,{value:l,configurable:h})}function Ml(r,a){r.ecrd(l=>{a.dispatch(l)},Co.I_AM_THE_JSACTION_FRAMEWORK)}function Zd(r,a,l,h){for(let y=0;y<a.length;y++)r.removeEventListener(a[y],l,h)}let bs=(()=>{class r{static{this.MOUSE_SPECIAL_SUPPORT=!1}constructor(l){this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[],this.containerManager=l}handleEvent(l,h,y){const S=function oi(r,a,l,h,y,S,L,W){return{eventType:r,event:a,targetElement:l,eic:h,timeStamp:y,eia:S,eirp:L,eiack:W}}(l,h,h.target,y,Date.now());this.handleEventInfo(S)}handleEventInfo(l){if(!this.dispatcher)return is(l,!0),void this.queuedEventInfos?.push(l);this.dispatcher(l)}addEvent(l,h){if(l in this.eventHandlers||!this.containerManager||!r.MOUSE_SPECIAL_SUPPORT&&Gs.indexOf(l)>=0)return;const y=(L,W,oe)=>{this.handleEvent(L,W,oe)};this.eventHandlers[l]=y;const S=function Ci(r){return"mouseenter"===r?"mouseover":"mouseleave"===r?"mouseout":"pointerenter"===r?"pointerover":"pointerleave"===r?"pointerout":r}(h||l);if(S!==l){const L=this.browserEventTypeToExtraEventTypes[S]||[];L.push(l),this.browserEventTypeToExtraEventTypes[S]=L}this.containerManager.addEventListener(S,L=>W=>{y(l,W,L)})}replayEarlyEvents(l=window._ejsa){l&&(this.replayEarlyEventInfos(l.q),function fp(r){r&&(Zd(r.c,r.et,r.h),Zd(r.c,r.etc,r.h,!0))}(l),delete window._ejsa)}replayEarlyEventInfos(l){for(let h=0;h<l.length;h++){const y=l[h],S=this.getEventTypesForBrowserEventType(y.eventType);for(let L=0;L<S.length;L++){const W=wc(y);Ga(W,S[L]),this.handleEventInfo(W)}}}getEventTypesForBrowserEventType(l){const h=[];return this.eventHandlers[l]&&h.push(l),this.browserEventTypeToExtraEventTypes[l]&&h.push(...this.browserEventTypeToExtraEventTypes[l]),h}handler(l){return this.eventHandlers[l]}cleanUp(){this.containerManager.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(l,h){this.ecrd(l,h)}ecrd(l,h){if(this.dispatcher=l,this.queuedEventInfos?.length){for(let y=0;y<this.queuedEventInfos.length;y++)this.handleEventInfo(this.queuedEventInfos[y]);this.queuedEventInfos=null}}}return r})();const Tc="https://g.co/ng/security#xss";class Mr extends Error{constructor(a,l){super($l(a,l)),this.code=a}}function $l(r,a){return`NG0${Math.abs(r)}${a?": "+a:""}`}const gd=Symbol("InputSignalNode#UNSET"),Ol={...ui,transformFn:void 0,applyValueToInputSignal(r,a){bn(r,a)}},yu=Symbol();function Vl(r,a){const l=Object.create(Ol);function h(){if(se(l),l.value===gd)throw new Mr(-950,!1);return l.value}return l.value=r,l.transformFn=a?.transform,h[R]=l,h}function Xc(r){return{toString:r}.toString()}const vu="__annotations__",rc="__parameters__",Gl="__prop__metadata__";function kl(r,a,l,h,y){return Xc(()=>{const S=Fd(a);function L(...W){if(this instanceof L)return S.call(this,...W),this;const oe=new L(...W);return function(Me){return y&&y(Me,...W),(Me.hasOwnProperty(vu)?Me[vu]:Object.defineProperty(Me,vu,{value:[]})[vu]).push(oe),h&&h(Me),Me}}return l&&(L.prototype=Object.create(l.prototype)),L.prototype.ngMetadataName=r,L.annotationCls=L,L})}function Fd(r){return function(...l){if(r){const h=r(...l);for(const y in h)this[y]=h[y]}}}function ic(r,a,l){return Xc(()=>{const h=Fd(a);function y(...S){if(this instanceof y)return h.apply(this,S),this;const L=new y(...S);return W.annotation=L,W;function W(oe,ye,Me){const et=oe.hasOwnProperty(rc)?oe[rc]:Object.defineProperty(oe,rc,{value:[]})[rc];for(;et.length<=Me;)et.push(null);return(et[Me]=et[Me]||[]).push(L),oe}}return l&&(y.prototype=Object.create(l.prototype)),y.prototype.ngMetadataName=r,y.annotationCls=y,y})}function Ac(r,a,l,h){return Xc(()=>{const y=Fd(a);function S(...L){if(this instanceof S)return y.apply(this,L),this;const W=new S(...L);return function oe(ye,Me){if(void 0===ye)throw new Error("Standard Angular field decorators are not supported in JIT mode.");const et=ye.constructor,Ot=et.hasOwnProperty(Gl)?et[Gl]:Object.defineProperty(et,Gl,{value:{}})[Gl];Ot[Me]=Ot.hasOwnProperty(Me)&&Ot[Me]||[],Ot[Me].unshift(W),h&&h(ye,Me,...L)}}return l&&(S.prototype=Object.create(l.prototype)),S.prototype.ngMetadataName=r,S.annotationCls=S,S})}const oc=globalThis;function Es(r){for(let a in r)if(r[a]===Es)return a;throw Error("Could not find renamed property on target object.")}function md(r,a){for(const l in a)a.hasOwnProperty(l)&&!r.hasOwnProperty(l)&&(r[l]=a[l])}function rr(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(rr).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const a=r.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Ln(r,a){return null==r||""===r?null===a?"":a:null==a||""===a?r:r+" "+a}function $t(r,a=100){if(!r||a<1||r.length<=a)return r;if(1==a)return r.substring(0,1)+"...";const l=Math.round(a/2);return r.substring(0,l)+"..."+r.substring(r.length-l)}const _r=Es({__forward_ref__:Es});function xi(r){return r.__forward_ref__=xi,r.toString=function(){return rr(this())},r}function or(r){return qo(r)?r():r}function qo(r){return"function"==typeof r&&r.hasOwnProperty(_r)&&r.__forward_ref__===xi}function To(r,a,l,h){throw new Error(`ASSERTION ERROR: ${r}`+(null==h?"":` [Expected=> ${l} ${h} ${a} <=Actual]`))}function as(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}const Eh=as;function nu(r){return{providers:r.providers||[],imports:r.imports||[]}}function ef(r){return Hd(r,mp)||Hd(r,Mf)}function eh(r){return null!==ef(r)}function Hd(r,a){return r.hasOwnProperty(a)?r[a]:null}function th(r){return r&&(r.hasOwnProperty(tf)||r.hasOwnProperty(Zg))?r[tf]:null}const mp=Es({\u0275prov:Es}),tf=Es({\u0275inj:Es}),Mf=Es({ngInjectableDef:Es}),Zg=Es({ngInjectorDef:Es});class no{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=as({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}let Cd;function Ud(r){To("setInjectorProfilerContext should never be called in production mode");const a=Cd;return Cd=r,a}function Jg(r){return r&&!!r.\u0275providers}const $c=Es({\u0275cmp:Es}),Ls=Es({\u0275dir:Es}),pl=Es({\u0275pipe:Es}),hg=Es({\u0275mod:Es}),bd=Es({\u0275fac:Es}),Gh=Es({__NG_ELEMENT_ID__:Es}),rf=Es({__NG_ENV_ID__:Es});function go(r){return"string"==typeof r?r:null==r?"":String(r)}function Oa(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():go(r)}function pg(r,a){throw new Mr(-201,!1)}var _a=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(_a||{});let nm;function Bd(){return nm}function Zc(r){const a=nm;return nm=r,a}function Ll(r,a,l){const h=ef(r);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&_a.Optional?null:void 0!==a?a:void pg()}const xc={},fg="__NG_DI_FLAG__",ie="ngTempTokenPath",pe=/\n/gm,ot="__source";let gn;function zr(r){const a=gn;return gn=r,a}function Fs(r,a=_a.Default){if(void 0===gn)throw new Mr(-203,!1);return null===gn?Ll(r,void 0,a):gn.get(r,a&_a.Optional?null:void 0,a)}function $o(r,a=_a.Default){return(Bd()||Fs)(or(r),a)}function Xa(r){throw new Mr(202,!1)}function Tr(r,a=_a.Default){return $o(r,us(a))}function us(r){return typeof r>"u"||"number"==typeof r?r:(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function qa(r){const a=[];for(let l=0;l<r.length;l++){const h=or(r[l]);if(Array.isArray(h)){if(0===h.length)throw new Mr(900,!1);let y,S=_a.Default;for(let L=0;L<h.length;L++){const W=h[L],oe=Bu(W);"number"==typeof oe?-1===oe?y=W.token:S|=oe:y=W}a.push($o(y,S))}else a.push($o(h))}return a}function Hs(r,a){return r[fg]=a,r.prototype[fg]=a,r}function Bu(r){return r[fg]}const Sd=Hs(ic("Inject",r=>({token:r})),-1),Iu=Hs(ic("Optional"),8),rh=Hs(ic("Self"),2),td=Hs(ic("SkipSelf"),4),wh=Hs(ic("Host"),1);function Th(r,a){return r.hasOwnProperty(bd)?r[bd]:null}function st(r){return r.flat(Number.POSITIVE_INFINITY)}function H(r,a){r.forEach(l=>Array.isArray(l)?H(l,a):a(l))}function ee(r,a,l){a>=r.length?r.push(l):r.splice(a,0,l)}function ne(r,a){return a>=r.length-1?r.pop():r.splice(a,1)[0]}function ce(r,a){const l=[];for(let h=0;h<r;h++)l.push(a);return l}function Ce(r,a,l){const h=r.length-l;for(;a<h;)r[a]=r[a+l],a++;for(;l--;)r.pop()}function De(r,a,l,h){let y=r.length;if(y==a)r.push(l,h);else if(1===y)r.push(h,r[0]),r[0]=l;else{for(y--,r.push(r[y-1],r[y]);y>a;)r[y]=r[y-2],y--;r[a]=l,r[a+1]=h}}function nt(r,a,l){let h=Xt(r,a);return h>=0?r[1|h]=l:(h=~h,De(r,h,a,l)),h}function ht(r,a){const l=Xt(r,a);if(l>=0)return r[1|l]}function Xt(r,a){return function En(r,a,l){let h=0,y=r.length>>l;for(;y!==h;){const S=h+(y-h>>1),L=r[S<<l];if(a===L)return S<<l;L>a?y=S:h=S+1}return~(y<<l)}(r,a,1)}const Vn={},Nt=[],Gn=new no(""),Lr=new no("",-1),Ir=new no("");class Qr{get(a,l=xc){if(l===xc){const h=new Error(`NullInjectorError: No provider for ${rr(a)}!`);throw h.name="NullInjectorError",h}return l}}var Or=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(Or||{}),yr=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(yr||{}),di=function(r){return r[r.None=0]="None",r[r.SignalBased=1]="SignalBased",r[r.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",r}(di||{});function Mi(r,a,l){let h=r.length;for(;;){const y=r.indexOf(a,l);if(-1===y)return y;if(0===y||r.charCodeAt(y-1)<=32){const S=a.length;if(y+S===h||r.charCodeAt(y+S)<=32)return y}l=y+1}}function Ni(r,a,l){let h=0;for(;h<l.length;){const y=l[h];if("number"==typeof y){if(0!==y)break;h++;const S=l[h++],L=l[h++],W=l[h++];r.setAttribute(a,L,W,S)}else{const S=y,L=l[++h];Fa(S)?r.setProperty(a,S,L):r.setAttribute(a,S,L),h++}}return h}function qr(r){return 3===r||4===r||6===r}function Fa(r){return 64===r.charCodeAt(0)}function ss(r,a){if(null!==a&&0!==a.length)if(null===r||0===r.length)r=a.slice();else{let l=-1;for(let h=0;h<a.length;h++){const y=a[h];"number"==typeof y?l=y:0===l||ds(r,l,y,null,-1===l||2===l?a[++h]:null)}}return r}function ds(r,a,l,h,y){let S=0,L=r.length;if(-1===a)L=-1;else for(;S<r.length;){const W=r[S++];if("number"==typeof W){if(W===a){L=-1;break}if(W>a){L=S-1;break}}}for(;S<r.length;){const W=r[S];if("number"==typeof W)break;if(W===l){if(null===h)return void(null!==y&&(r[S+1]=y));if(h===r[S+1])return void(r[S+2]=y)}S++,null!==h&&S++,null!==y&&S++}-1!==L&&(r.splice(L,0,a),S=L+1),r.splice(S++,0,l),null!==h&&r.splice(S++,0,h),null!==y&&r.splice(S++,0,y)}const Ss="ng-template";function Vc(r,a,l,h){let y=0;if(h){for(;y<a.length&&"string"==typeof a[y];y+=2)if("class"===a[y]&&-1!==Mi(a[y+1].toLowerCase(),l,0))return!0}else if(Gc(r))return!1;if(y=a.indexOf(1,y),y>-1){let S;for(;++y<a.length&&"string"==typeof(S=a[y]);)if(S.toLowerCase()===l)return!0}return!1}function Gc(r){return 4===r.type&&r.value!==Ss}function qc(r,a,l){return a===(4!==r.type||l?r.value:Ss)}function Jc(r,a,l){let h=4;const y=r.attrs,S=null!==y?function ih(r){for(let a=0;a<r.length;a++)if(qr(r[a]))return a;return r.length}(y):0;let L=!1;for(let W=0;W<a.length;W++){const oe=a[W];if("number"!=typeof oe){if(!L)if(4&h){if(h=2|1&h,""!==oe&&!qc(r,oe,l)||""===oe&&1===a.length){if(Ws(h))return!1;L=!0}}else if(8&h){if(null===y||!Vc(r,y,oe,l)){if(Ws(h))return!1;L=!0}}else{const ye=a[++W],Me=Ah(oe,y,Gc(r),l);if(-1===Me){if(Ws(h))return!1;L=!0;continue}if(""!==ye){let et;if(et=Me>S?"":y[Me+1].toLowerCase(),2&h&&ye!==et){if(Ws(h))return!1;L=!0}}}}else{if(!L&&!Ws(h)&&!Ws(oe))return!1;if(L&&Ws(oe))continue;L=!1,h=oe|1&h}}return Ws(h)||L}function Ws(r){return!(1&r)}function Ah(r,a,l,h){if(null===a)return-1;let y=0;if(h||!l){let S=!1;for(;y<a.length;){const L=a[y];if(L===r)return y;if(3===L||6===L)S=!0;else{if(1===L||2===L){let W=a[++y];for(;"string"==typeof W;)W=a[++y];continue}if(4===L)break;if(0===L){y+=4;continue}}y+=S?1:2}return-1}return function of(r,a){let l=r.indexOf(4);if(l>-1)for(l++;l<r.length;){const h=r[l];if("number"==typeof h)return-1;if(h===a)return l;l++}return-1}(a,r)}function jd(r,a,l=!1){for(let h=0;h<a.length;h++)if(Jc(r,a[h],l))return!0;return!1}function Kl(r,a){e:for(let l=0;l<a.length;l++){const h=a[l];if(r.length===h.length){for(let y=0;y<r.length;y++)if(r[y]!==h[y])continue e;return!0}}return!1}function $d(r,a){return r?":not("+a.trim()+")":a}function Km(r){let a=r[0],l=1,h=2,y="",S=!1;for(;l<r.length;){let L=r[l];if("string"==typeof L)if(2&h){const W=r[++l];y+="["+L+(W.length>0?'="'+W+'"':"")+"]"}else 8&h?y+="."+L:4&h&&(y+=" "+L);else""!==y&&!Ws(L)&&(a+=$d(S,y),y=""),h=L,S=S||!Ws(h);l++}return""!==y&&(a+=$d(S,y)),a}function im(r){return Xc(()=>{const a=te(r),l={...a,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Or.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||yr.Emulated,styles:r.styles||Nt,_:null,schemas:r.schemas||null,tView:null,id:""};le(l);const h=r.dependencies;return l.directiveDefs=we(h,!1),l.pipeDefs=we(h,!0),l.id=function pt(r){let a=0;const l=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const y of l)a=Math.imul(31,a)+y.charCodeAt(0)|0;return a+=2147483648,"c"+a}(l),l})}function Wm(r){return da(r)||Cu(r)}function gg(r){return null!==r}function vp(r){return Xc(()=>({type:r.type,bootstrap:r.bootstrap||Nt,declarations:r.declarations||Nt,imports:r.imports||Nt,exports:r.exports||Nt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Qm(r,a){if(null==r)return Vn;const l={};for(const h in r)if(r.hasOwnProperty(h)){const y=r[h];let S,L,W=di.None;Array.isArray(y)?(W=y[0],S=y[1],L=y[2]??S):(S=y,L=y),a?(l[S]=W!==di.None?[h,W]:h,a[S]=L):l[S]=h}return l}function mg(r){return Xc(()=>{const a=te(r);return le(a),a})}function om(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function da(r){return r[$c]||null}function Cu(r){return r[Ls]||null}function el(r){return r[pl]||null}function q(r){const a=da(r)||Cu(r)||el(r);return null!==a&&a.standalone}function ue(r,a){const l=r[hg]||null;if(!l&&!0===a)throw new Error(`Type ${rr(r)} does not have '\u0275mod' property.`);return l}function te(r){const a={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:r.inputs||Vn,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||Nt,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qm(r.inputs,a),outputs:Qm(r.outputs),debugInfo:null}}function le(r){r.features?.forEach(a=>a(r))}function we(r,a){if(!r)return null;const l=a?el:Wm;return()=>("function"==typeof r?r():r).map(h=>l(h)).filter(gg)}const Ke=new Map;function an(r){return{\u0275providers:r}}function nn(...r){return{\u0275providers:lr(0,r),\u0275fromNgModule:!0}}function lr(r,...a){const l=[],h=new Set;let y;const S=L=>{l.push(L)};return H(a,L=>{const W=L;Oo(W,S,[],h)&&(y||=[],y.push(W))}),void 0!==y&&ro(y,S),l}function ro(r,a){for(let l=0;l<r.length;l++){const{ngModule:h,providers:y}=r[l];Kc(y,S=>{a(S,h)})}}function Oo(r,a,l,h){if(!(r=or(r)))return!1;let y=null,S=th(r);const L=!S&&da(r);if(S||L){if(L&&!L.standalone)return!1;y=r}else{const oe=r.ngModule;if(S=th(oe),!S)return!1;y=oe}const W=h.has(y);if(L){if(W)return!1;if(h.add(y),L.dependencies){const oe="function"==typeof L.dependencies?L.dependencies():L.dependencies;for(const ye of oe)Oo(ye,a,l,h)}}else{if(!S)return!1;{if(null!=S.imports&&!W){let ye;h.add(y);try{H(S.imports,Me=>{Oo(Me,a,l,h)&&(ye||=[],ye.push(Me))})}finally{}void 0!==ye&&ro(ye,a)}if(!W){const ye=Th(y)||(()=>new y);a({provide:y,useFactory:ye,deps:Nt},y),a({provide:Ir,useValue:y,multi:!0},y),a({provide:Gn,useValue:()=>$o(y),multi:!0},y)}const oe=S.providers;if(null!=oe&&!W){const ye=r;Kc(oe,Me=>{a(Me,ye)})}}}return y!==r&&void 0!==r.providers}function Kc(r,a){for(let l of r)Jg(l)&&(l=l.\u0275providers),Array.isArray(l)?Kc(l,a):a(l)}const Mu=Es({provide:String,useValue:Es});function qh(r){return null!==r&&"object"==typeof r&&Mu in r}function _g(r){return"function"==typeof r}const Gd=new no(""),$1={},e2={};let cE;function V1(){return void 0===cE&&(cE=new Qr),cE}class oh{}class yg extends oh{get destroyed(){return this._destroyed}constructor(a,l,h,y){super(),this.parent=l,this.source=h,this.scopes=y,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lv(a,L=>this.processProvider(L)),this.records.set(Lr,ly(void 0,this)),y.has("environment")&&this.records.set(oh,ly(void 0,this));const S=this.records.get(Gd);null!=S&&"string"==typeof S.value&&this.scopes.add(S.value),this.injectorDefTypes=new Set(this.get(Ir,Nt,_a.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const a=M(null);try{for(const h of this._ngOnDestroyHooks)h.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const h of l)h()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),M(a)}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const l=zr(this),h=Zc(void 0);try{return a()}finally{zr(l),Zc(h)}}get(a,l=xc,h=_a.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(rf))return a[rf](this);h=us(h);const S=zr(this),L=Zc(void 0);try{if(!(h&_a.SkipSelf)){let oe=this.records.get(a);if(void 0===oe){const ye=function eA(r){return"function"==typeof r||"object"==typeof r&&r instanceof no}(a)&&ef(a);oe=ye&&this.injectableDefInScope(ye)?ly(kv(a),$1):null,this.records.set(a,oe)}if(null!=oe)return this.hydrate(a,oe)}return(h&_a.Self?V1():this.parent).get(a,l=h&_a.Optional&&l===xc?null:l)}catch(W){if("NullInjectorError"===W.name){if((W[ie]=W[ie]||[]).unshift(rr(a)),S)throw W;return function ru(r,a,l,h){const y=r[ie];throw a[ot]&&y.unshift(a[ot]),r.message=function zd(r,a,l,h=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let y=rr(a);if(Array.isArray(a))y=a.map(rr).join(" -> ");else if("object"==typeof a){let S=[];for(let L in a)if(a.hasOwnProperty(L)){let W=a[L];S.push(L+":"+("string"==typeof W?JSON.stringify(W):rr(W)))}y=`{${S.join(", ")}}`}return`${l}${h?"("+h+")":""}[${y}]: ${r.replace(pe,"\n  ")}`}("\n"+r.message,y,l,h),r.ngTokenPath=y,r[ie]=null,r}(W,a,"R3InjectorError",this.source)}throw W}finally{Zc(L),zr(S)}}resolveInjectorInitializers(){const a=M(null),l=zr(this),h=Zc(void 0);try{const S=this.get(Gn,Nt,_a.Self);for(const L of S)L()}finally{zr(l),Zc(h),M(a)}}toString(){const a=[],l=this.records;for(const h of l.keys())a.push(rr(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Mr(205,!1)}processProvider(a){let l=_g(a=or(a))?a:or(a&&a.provide);const h=function t2(r){return qh(r)?ly(void 0,r.useValue):ly(lE(r),$1)}(a);if(!_g(a)&&!0===a.multi){let y=this.records.get(l);y||(y=ly(void 0,$1,!0),y.factory=()=>qa(y.multi),this.records.set(l,y)),l=a,y.multi.push(a)}this.records.set(l,h)}hydrate(a,l){const h=M(null);try{return l.value===$1&&(l.value=e2,l.value=l.factory()),"object"==typeof l.value&&l.value&&function JT(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}finally{M(h)}}injectableDefInScope(a){if(!a.providedIn)return!1;const l=or(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(a){const l=this._onDestroyHooks.indexOf(a);-1!==l&&this._onDestroyHooks.splice(l,1)}}function kv(r){const a=ef(r),l=null!==a?a.factory:Th(r);if(null!==l)return l;if(r instanceof no)throw new Mr(204,!1);if(r instanceof Function)return function ZT(r){if(r.length>0)throw new Mr(204,!1);const l=function Vh(r){return r&&(r[mp]||r[Mf])||null}(r);return null!==l?()=>l.factory(r):()=>new r}(r);throw new Mr(204,!1)}function lE(r,a,l){let h;if(_g(r)){const y=or(r);return Th(y)||kv(y)}if(qh(r))h=()=>or(r.useValue);else if(function Of(r){return!(!r||!r.useFactory)}(r))h=()=>r.useFactory(...qa(r.deps||[]));else if(function Mh(r){return!(!r||!r.useExisting)}(r))h=()=>$o(or(r.useExisting));else{const y=or(r&&(r.useClass||r.provide));if(!function n2(r){return!!r.deps}(r))return Th(y)||kv(y);h=()=>new y(...qa(r.deps))}return h}function ly(r,a,l=!1){return{factory:r,value:a,multi:l?[]:void 0}}function Lv(r,a){for(const l of r)Array.isArray(l)?Lv(l,a):l&&Jg(l)?Lv(l.\u0275providers,a):a(l)}function r2(r,a){r instanceof yg&&r.assertNotDestroyed();const h=zr(r),y=Zc(void 0);try{return a()}finally{zr(h),Zc(y)}}function uE(){return void 0!==Bd()||null!=function qn(){return gn}()}function uy(r){if(!uE())throw new Mr(-203,!1)}var Xm=function(r){return r[r.Directive=0]="Directive",r[r.Component=1]="Component",r[r.Injectable=2]="Injectable",r[r.Pipe=3]="Pipe",r[r.NgModule=4]="NgModule",r}(Xm||{});function Ea(r){const a=oc.ng;if(a&&a.\u0275compilerFacade)return a.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const G1={\u0275\u0275defineInjectable:as,\u0275\u0275defineInjector:nu,\u0275\u0275inject:$o,\u0275\u0275invalidFactoryDep:Xa,resolveForwardRef:or},q1=Function;function Zm(r){return"function"==typeof r}const hE=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,dy=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,hy=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,pE=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class fE{constructor(a){this._reflect=a||oc.Reflect}factory(a){return(...l)=>new a(...l)}_zipTypesAndAnnotations(a,l){let h;h=ce(typeof a>"u"?l.length:a.length);for(let y=0;y<h.length;y++)h[y]=typeof a>"u"?[]:a[y]&&a[y]!=Object?[a[y]]:[],l&&null!=l[y]&&(h[y]=h[y].concat(l[y]));return h}_ownParameters(a,l){if(function tA(r){return hE.test(r)||pE.test(r)||dy.test(r)&&!hy.test(r)}(a.toString()))return null;if(a.parameters&&a.parameters!==l.parameters)return a.parameters;const y=a.ctorParameters;if(y&&y!==l.ctorParameters){const W="function"==typeof y?y():y,oe=W.map(Me=>Me&&Me.type),ye=W.map(Me=>Me&&am(Me.decorators));return this._zipTypesAndAnnotations(oe,ye)}const S=a.hasOwnProperty(rc)&&a[rc],L=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",a);return L||S?this._zipTypesAndAnnotations(L,S):ce(a.length)}parameters(a){if(!Zm(a))return[];const l=Fl(a);let h=this._ownParameters(a,l);return!h&&l!==Object&&(h=this.parameters(l)),h||[]}_ownAnnotations(a,l){if(a.annotations&&a.annotations!==l.annotations){let h=a.annotations;return"function"==typeof h&&h.annotations&&(h=h.annotations),h}return a.decorators&&a.decorators!==l.decorators?am(a.decorators):a.hasOwnProperty(vu)?a[vu]:null}annotations(a){if(!Zm(a))return[];const l=Fl(a),h=this._ownAnnotations(a,l)||[];return(l!==Object?this.annotations(l):[]).concat(h)}_ownPropMetadata(a,l){if(a.propMetadata&&a.propMetadata!==l.propMetadata){let h=a.propMetadata;return"function"==typeof h&&h.propMetadata&&(h=h.propMetadata),h}if(a.propDecorators&&a.propDecorators!==l.propDecorators){const h=a.propDecorators,y={};return Object.keys(h).forEach(S=>{y[S]=am(h[S])}),y}return a.hasOwnProperty(Gl)?a[Gl]:null}propMetadata(a){if(!Zm(a))return{};const l=Fl(a),h={};if(l!==Object){const S=this.propMetadata(l);Object.keys(S).forEach(L=>{h[L]=S[L]})}const y=this._ownPropMetadata(a,l);return y&&Object.keys(y).forEach(S=>{const L=[];h.hasOwnProperty(S)&&L.push(...h[S]),L.push(...y[S]),h[S]=L}),h}ownPropMetadata(a){return Zm(a)&&this._ownPropMetadata(a,Fl(a))||{}}hasLifecycleHook(a,l){return a instanceof q1&&l in a.prototype}}function am(r){return r?r.map(a=>new(0,a.type.annotationCls)(...a.args?a.args:[])):[]}function Fl(r){const a=r.prototype?Object.getPrototypeOf(r.prototype):null;return(a?a.constructor:null)||Object}const Ic=0,Kr=1,Ao=2,Ou=3,Oh=4,Us=5,qd=6,Jm=7,Nc=8,bu=9,Pu=10,ea=11,py=12,Fv=13,e_=14,Uo=15,ws=16,vg=17,Pf=18,sm=19,nA=20,cm=21,lm=22,bp=23,_o=25,fy=1,Hv=6,Rf=7,Cg=9,Mc=10;var um=function(r){return r[r.None=0]="None",r[r.HasTransplantedViews=2]="HasTransplantedViews",r}(um||{});function tl(r){return Array.isArray(r)&&"object"==typeof r[fy]}function nd(r){return Array.isArray(r)&&!0===r[fy]}function K1(r){return!!(4&r.flags)}function bg(r){return r.componentOffset>-1}function Kh(r){return!(1&~r.flags)}function af(r){return!!r.template}function Uv(r){return!!(512&r[Ao])}function Y1(r){return!(16&~r.type)}function gy(r){return!(256&~r[Ao])}class zv{constructor(a,l,h){this.previousValue=a,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function Z1(r,a,l,h){null!==a?a.applyValueToInputSignal(a,h):r[l]=h}function CE(){return J1}function J1(r){return r.type.prototype.ngOnChanges&&(r.setInput=sA),my}function my(){const r=eC(this),a=r?.current;if(a){const l=r.previous;if(l===Vn)r.previous=a;else for(let h in a)l[h]=a[h];r.current=null,this.ngOnChanges(a)}}function sA(r,a,l,h,y){const S=this.declaredInputs[h],L=eC(r)||function u2(r,a){return r[bE]=a}(r,{previous:Vn,current:null}),W=L.current||(L.current={}),oe=L.previous,ye=oe[S];W[S]=new zv(ye&&ye.currentValue,l,oe===Vn),Z1(r,a,y,l)}CE.ngInherit=!0;const bE="__ngSimpleChanges__";function eC(r){return r[bE]||null}const xf=function(r,a,l){},cA="svg",SE="math";function ac(r){for(;Array.isArray(r);)r=r[Ic];return r}function Ep(r){for(;Array.isArray(r);){if("object"==typeof r[fy])return r;r=r[Ic]}return null}function Sp(r,a){return ac(a[r])}function wd(r,a){return ac(a[r.index])}function n_(r,a){return r.data[a]}function wp(r,a){return r[a]}function iu(r,a){const l=a[r];return tl(l)?l:l[Ic]}function wE(r){return!(128&~r[Ao])}function Tp(r,a){return null==a?null:r[a]}function TE(r){r[vg]=0}function uA(r){1024&r[Ao]||(r[Ao]|=1024,wE(r)&&jv(r))}function dA(r,a){for(;r>0;)a=a[e_],r--;return a}function _y(r){return!!(9216&r[Ao]||r[bp]?.dirty)}function nC(r){r[Pu].changeDetectionScheduler?.notify(8),64&r[Ao]&&(r[Ao]|=1024),_y(r)&&jv(r)}function jv(r){r[Pu].changeDetectionScheduler?.notify(0);let a=Nf(r);for(;null!==a&&!(8192&a[Ao])&&(a[Ao]|=8192,wE(a));)a=Nf(a)}function rC(r,a){if(!(256&~r[Ao]))throw new Mr(911,!1);null===r[cm]&&(r[cm]=[]),r[cm].push(a)}function AE(r,a){if(null===r[cm])return;const l=r[cm].indexOf(a);-1!==l&&r[cm].splice(l,1)}function Nf(r){const a=r[Ou];return nd(a)?a[Ou]:a}const aa={lFrame:ai(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let hA=!1;function Vv(){return aa.bindingsEnabled}function r_(){return null!==aa.skipHydrationRootTNode}function g2(){aa.bindingsEnabled=!0}function Ru(){aa.bindingsEnabled=!1}function Xn(){return aa.lFrame.lView}function Ha(){return aa.lFrame.tView}function OE(r){return aa.lFrame.contextLView=r,r[Nc]}function oC(r){return aa.lFrame.contextLView=null,r}function sc(){let r=_2();for(;null!==r&&64===r.type;)r=r.parent;return r}function _2(){return aa.lFrame.currentTNode}function i_(){const r=aa.lFrame,a=r.currentTNode;return r.isParent?a:a.parent}function sf(r,a){const l=aa.lFrame;l.currentTNode=r,l.isParent=a}function o_(){return aa.lFrame.isParent}function yy(){aa.lFrame.isParent=!1}function aC(){return aa.lFrame.contextLView}function a_(){return hA}function sC(r){hA=r}function rd(){const r=aa.lFrame;let a=r.bindingRootIndex;return-1===a&&(a=r.bindingRootIndex=r.tView.bindingStartIndex),a}function kf(){return aa.lFrame.bindingIndex}function RE(r){return aa.lFrame.bindingIndex=r}function Hl(){return aa.lFrame.bindingIndex++}function Lf(r){const a=aa.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+r,l}function p(r){aa.lFrame.inI18n=r}function _(r,a){const l=aa.lFrame;l.bindingIndex=l.bindingRootIndex=r,Q(a)}function Q(r){aa.lFrame.currentDirectiveIndex=r}function de(r){const a=aa.lFrame.currentDirectiveIndex;return-1===a?null:r[a]}function be(){return aa.lFrame.currentQueryIndex}function He(r){aa.lFrame.currentQueryIndex=r}function wt(r){const a=r[Kr];return 2===a.type?a.declTNode:1===a.type?r[Us]:null}function Dt(r,a,l){if(l&_a.SkipSelf){let y=a,S=r;for(;!(y=y.parent,null!==y||l&_a.Host||(y=wt(S),null===y||(S=S[e_],10&y.type))););if(null===y)return!1;a=y,r=S}const h=aa.lFrame=ti();return h.currentTNode=a,h.lView=r,!0}function dn(r){const a=ti(),l=r[Kr];aa.lFrame=a,a.currentTNode=l.firstChild,a.lView=r,a.tView=l,a.contextLView=r,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function ti(){const r=aa.lFrame,a=null===r?null:r.child;return null===a?ai(r):a}function ai(r){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=a),a}function yo(){const r=aa.lFrame;return aa.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Za=yo;function Ja(){const r=yo();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Dc(){return aa.lFrame.selectedIndex}function Yh(r){aa.lFrame.selectedIndex=r}function yc(){const r=aa.lFrame;return n_(r.tView,r.selectedIndex)}function vy(){aa.lFrame.currentNamespace=cA}function qv(){aa.lFrame.currentNamespace=SE}function u3(){!function Ij(){aa.lFrame.currentNamespace=null}()}function y2(){return aa.lFrame.currentNamespace}let v2=!0;function xE(){return v2}function s_(r){v2=r}function fA(r,a){for(let l=a.directiveStart,h=a.directiveEnd;l<h;l++){const S=r.data[l].type.prototype,{ngAfterContentInit:L,ngAfterContentChecked:W,ngAfterViewInit:oe,ngAfterViewChecked:ye,ngOnDestroy:Me}=S;L&&(r.contentHooks??=[]).push(-l,L),W&&((r.contentHooks??=[]).push(l,W),(r.contentCheckHooks??=[]).push(l,W)),oe&&(r.viewHooks??=[]).push(-l,oe),ye&&((r.viewHooks??=[]).push(l,ye),(r.viewCheckHooks??=[]).push(l,ye)),null!=Me&&(r.destroyHooks??=[]).push(l,Me)}}function NE(r,a,l){d3(r,a,3,l)}function gA(r,a,l,h){(3&r[Ao])===l&&d3(r,a,l,h)}function C2(r,a){let l=r[Ao];(3&l)===a&&(l&=16383,l+=1,r[Ao]=l)}function d3(r,a,l,h){const S=h??-1,L=a.length-1;let W=0;for(let oe=void 0!==h?65535&r[vg]:0;oe<L;oe++)if("number"==typeof a[oe+1]){if(W=a[oe],null!=h&&W>=h)break}else a[oe]<0&&(r[vg]+=65536),(W<S||-1==S)&&(g7(r,l,a,oe),r[vg]=(4294901760&r[vg])+oe+2),oe++}function h3(r,a){xf(4,r,a);const l=M(null);try{a.call(r)}finally{M(l),xf(5,r,a)}}function g7(r,a,l,h){const y=l[h]<0,S=l[h+1],W=r[y?-l[h]:l[h]];y?r[Ao]>>14<r[vg]>>16&&(3&r[Ao])===a&&(r[Ao]+=16384,h3(W,S)):h3(W,S)}const cC=-1;class DE{constructor(a,l,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function p3(r){return null!=r&&"object"==typeof r&&(null===r.insertBeforeIndex||"number"==typeof r.insertBeforeIndex||Array.isArray(r.insertBeforeIndex))}function _7(r){return!!(128&r.type)}const mA={};class Kv{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,h){h=us(h);const y=this.injector.get(a,mA,h);return y!==mA||l===mA?y:this.parentInjector.get(a,l,h)}}function E2(r){return r!==cC}function kE(r){return 32767&r}function LE(r,a){let l=function C7(r){return r>>16}(r),h=a;for(;l>0;)h=h[e_],l--;return h}let S2=!0;function _A(r){const a=S2;return S2=r,a}const f3=255,g3=5;let m3=0;const dm={};function yA(r,a){const l=_3(r,a);if(-1!==l)return l;const h=a[Kr];h.firstCreatePass&&(r.injectorIndex=a.length,w2(h.data,r),w2(a,null),w2(h.blueprint,null));const y=vA(r,a),S=r.injectorIndex;if(E2(y)){const L=kE(y),W=LE(y,a),oe=W[Kr].data;for(let ye=0;ye<8;ye++)a[S+ye]=W[L+ye]|oe[L+ye]}return a[S+8]=y,S}function w2(r,a){r.push(0,0,0,0,0,0,0,0,a)}function _3(r,a){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===a[r.injectorIndex+8]?-1:r.injectorIndex}function vA(r,a){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let l=0,h=null,y=a;for(;null!==y;){if(h=M7(y),null===h)return cC;if(l++,y=y[e_],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return cC}function CA(r,a,l){!function Rj(r,a,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(Gh)&&(h=l[Gh]),null==h&&(h=l[Gh]=m3++);const y=h&f3;a.data[r+(y>>g3)]|=1<<y}(r,a,l)}function y3(r,a,l){if(l&_a.Optional||void 0!==r)return r;pg()}function v3(r,a,l,h){if(l&_a.Optional&&void 0===h&&(h=null),!(l&(_a.Self|_a.Host))){const y=r[bu],S=Zc(void 0);try{return y?y.get(a,h,l&_a.Optional):Ll(a,h,l&_a.Optional)}finally{Zc(S)}}return y3(h,0,l)}function C3(r,a,l,h=_a.Default,y){if(null!==r){if(2048&a[Ao]&&!(h&_a.Self)){const L=function I7(r,a,l,h,y){let S=r,L=a;for(;null!==S&&null!==L&&2048&L[Ao]&&!(512&L[Ao]);){const W=S7(S,L,l,h|_a.Self,dm);if(W!==dm)return W;let oe=S.parent;if(!oe){const ye=L[nA];if(ye){const Me=ye.get(l,dm,h);if(Me!==dm)return Me}oe=M7(L),L=L[e_]}S=oe}return y}(r,a,l,h,dm);if(L!==dm)return L}const S=S7(r,a,l,h,dm);if(S!==dm)return S}return v3(a,l,h,y)}function S7(r,a,l,h,y){const S=function b3(r){if("string"==typeof r)return r.charCodeAt(0)||0;const a=r.hasOwnProperty(Gh)?r[Gh]:void 0;return"number"==typeof a?a>=0?a&f3:T7:a}(l);if("function"==typeof S){if(!Dt(a,r,h))return h&_a.Host?y3(y,0,h):v3(a,l,h,y);try{let L;if(L=S(h),null!=L||h&_a.Optional)return L;pg()}finally{Za()}}else if("number"==typeof S){let L=null,W=_3(r,a),oe=cC,ye=h&_a.Host?a[Uo][Us]:null;for((-1===W||h&_a.SkipSelf)&&(oe=-1===W?vA(r,a):a[W+8],oe!==cC&&S3(h,!1)?(L=a[Kr],W=kE(oe),a=LE(oe,a)):W=-1);-1!==W;){const Me=a[Kr];if(E3(S,W,Me.data)){const et=w7(W,a,l,L,h,ye);if(et!==dm)return et}oe=a[W+8],oe!==cC&&S3(h,a[Kr].data[W+8]===ye)&&E3(S,W,a)?(L=Me,W=kE(oe),a=LE(oe,a)):W=-1}}return y}function w7(r,a,l,h,y,S){const L=a[Kr],W=L.data[r+8],Me=bA(W,L,l,null==h?bg(W)&&S2:h!=L&&!!(3&W.type),y&_a.Host&&S===W);return null!==Me?lC(a,L,Me,W):dm}function bA(r,a,l,h,y){const S=r.providerIndexes,L=a.data,W=1048575&S,oe=r.directiveStart,Me=S>>20,Ot=y?W+Me:r.directiveEnd;for(let Ft=h?W:W+Me;Ft<Ot;Ft++){const ln=L[Ft];if(Ft<oe&&l===ln||Ft>=oe&&ln.type===l)return Ft}if(y){const Ft=L[oe];if(Ft&&af(Ft)&&Ft.type===l)return oe}return null}function lC(r,a,l,h){let y=r[l];const S=a.data;if(function m7(r){return r instanceof DE}(y)){const L=y;L.resolving&&function yp(r,a){throw a&&a.join(" > "),new Mr(-200,r)}(Oa(S[l]));const W=_A(L.canSeeViewProviders);L.resolving=!0;const ye=L.injectImpl?Zc(L.injectImpl):null;Dt(r,h,_a.Default);try{y=r[l]=L.factory(void 0,S,r,h),a.firstCreatePass&&l>=h.directiveStart&&function f7(r,a,l){const{ngOnChanges:h,ngOnInit:y,ngDoCheck:S}=a.type.prototype;if(h){const L=J1(a);(l.preOrderHooks??=[]).push(r,L),(l.preOrderCheckHooks??=[]).push(r,L)}y&&(l.preOrderHooks??=[]).push(0-r,y),S&&((l.preOrderHooks??=[]).push(r,S),(l.preOrderCheckHooks??=[]).push(r,S))}(l,S[l],a)}finally{null!==ye&&Zc(ye),_A(W),L.resolving=!1,Za()}}return y}function E3(r,a,l){return!!(l[a+(r>>g3)]&1<<r)}function S3(r,a){return!(r&_a.Self||r&_a.Host&&a)}class Td{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,h){return C3(this._tNode,this._lView,a,us(h),l)}}function T7(){return new Td(sc(),Xn())}function A7(r){return Xc(()=>{const a=r.prototype.constructor,l=a[bd]||T2(a),h=Object.prototype;let y=Object.getPrototypeOf(r.prototype).constructor;for(;y&&y!==h;){const S=y[bd]||T2(y);if(S&&S!==l)return S;y=Object.getPrototypeOf(y)}return S=>new S})}function T2(r){return qo(r)?()=>{const a=T2(or(r));return a&&a()}:Th(r)}function M7(r){const a=r[Kr],l=a.type;return 2===l?a.declTNode:1===l?r[Us]:null}function FE(r){return function E7(r,a){if("class"===a)return r.classes;if("style"===a)return r.styles;const l=r.attrs;if(l){const h=l.length;let y=0;for(;y<h;){const S=l[y];if(qr(S))break;if(0===S)y+=2;else if("number"==typeof S)for(y++;y<h&&"string"==typeof l[y];)y++;else{if(S===a)return l[y+1];y+=2}}}return null}(sc(),r)}const w3=ic("Attribute",r=>({attributeName:r,__NG_ELEMENT_ID__:()=>FE(r)}));let O7=null;function A2(){return O7=O7||new fE}function EA(r){return T3(A2().parameters(r))}function T3(r){return r.map(a=>function P7(r){const a={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(r)&&r.length>0)for(let l=0;l<r.length;l++){const h=r[l];if(void 0===h)continue;const y=Object.getPrototypeOf(h);if(h instanceof Iu||"Optional"===y.ngMetadataName)a.optional=!0;else if(h instanceof td||"SkipSelf"===y.ngMetadataName)a.skipSelf=!0;else if(h instanceof rh||"Self"===y.ngMetadataName)a.self=!0;else if(h instanceof wh||"Host"===y.ngMetadataName)a.host=!0;else if(h instanceof Sd)a.token=h.token;else if(h instanceof w3){if(void 0===h.attributeName)throw new Mr(204,!1);a.attribute=h.attributeName}else a.token=h}else a.token=void 0===r||Array.isArray(r)&&0===r.length?null:r;return a}(a))}const x7=Es({provide:String,useValue:Es});function A3(r){return void 0!==r.useClass}function I3(r){return void 0!==r.useFactory}const L7=kl("Injectable",void 0,void 0,void 0,(r,a)=>function R7(r,a){let l=null,h=null;r.hasOwnProperty(mp)||Object.defineProperty(r,mp,{get:()=>(null===l&&(l=Ea().compileInjectable(G1,`ng:///${r.name}/\u0275prov.js`,function k7(r,a){const l=a||{providedIn:null},h={name:r.name,type:r,typeArgumentCount:0,providedIn:l.providedIn};return(A3(l)||I3(l))&&void 0!==l.deps&&(h.deps=T3(l.deps)),A3(l)?h.useClass=l.useClass:function N7(r){return x7 in r}(l)?h.useValue=l.useValue:I3(l)?h.useFactory=l.useFactory:function D7(r){return void 0!==r.useExisting}(l)&&(h.useExisting=l.useExisting),h}(r,a))),l)}),r.hasOwnProperty(bd)||Object.defineProperty(r,bd,{get:()=>{if(null===h){const y=Ea();h=y.compileFactory(G1,`ng:///${r.name}/\u0275fac.js`,{name:r.name,type:r,typeArgumentCount:0,deps:EA(r),target:y.FactoryTarget.Injectable})}return h},configurable:!0})}(r,a));function I2(r,a=null,l=null,h){const y=M3(r,a,l,h);return y.resolveInjectorInitializers(),y}function M3(r,a=null,l=null,h,y=new Set){const S=[l||Nt,nn(r)];return h=h||("object"==typeof r?void 0:rr(r)),new yg(S,a||V1(),h||null,y)}class ah{static{this.THROW_IF_NOT_FOUND=xc}static{this.NULL=new Qr}static create(a,l){if(Array.isArray(a))return I2({name:""},l,a,"");{const h=a.name??"";return I2({name:h},a.parent,a.providers,h)}}static{this.\u0275prov=as({token:ah,providedIn:"any",factory:()=>$o(Lr)})}static{this.__NG_ELEMENT_ID__=-1}}class F7{constructor(a){this.attributeName=a,this.__NG_ELEMENT_ID__=()=>FE(this.attributeName)}toString(){return`HostAttributeToken ${this.attributeName}`}}const O3=new no("");O3.__NG_ELEMENT_ID__=r=>{const a=sc();if(null===a)throw new Mr(204,!1);if(2&a.type)return a.value;if(r&_a.Optional)return null;throw new Mr(204,!1)};function M2(r){return r.ngOriginalError}const R3=!0;let hC=(()=>{class r{static{this.__NG_ELEMENT_ID__=U7}static{this.__NG_ENV_ID__=l=>l}}return r})();class H7 extends hC{constructor(a){super(),this._lView=a}onDestroy(a){return rC(this._lView,a),()=>AE(this._lView,a)}}function U7(){return new H7(Xn())}let c_=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Hi.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>new r})}}return r})(),B7=(()=>{class r{constructor(){this.internalPendingTasks=Tr(c_)}add(){const l=this.internalPendingTasks.add();return()=>this.internalPendingTasks.remove(l)}static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>new r})}}return r})();const hm=class z7 extends No.B{constructor(a=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=a,uE()&&(this.destroyRef=Tr(hC,{optional:!0})??void 0,this.pendingTasks=Tr(c_,{optional:!0})??void 0)}emit(a){const l=M(null);try{super.next(a)}finally{M(l)}}subscribe(a,l,h){let y=a,S=l||(()=>null),L=h;if(a&&"object"==typeof a){const oe=a;y=oe.next?.bind(oe),S=oe.error?.bind(oe),L=oe.complete?.bind(oe)}this.__isAsync&&(S=this.wrapInTimeout(S),y&&(y=this.wrapInTimeout(y)),L&&(L=this.wrapInTimeout(L)));const W=super.subscribe({next:y,error:S,complete:L});return a instanceof fo.yU&&a.add(W),W}wrapInTimeout(a){return l=>{const h=this.pendingTasks?.add();setTimeout(()=>{a(l),void 0!==h&&this.pendingTasks?.remove(h)})}}};function SA(...r){}function O2(r){let a,l;function h(){r=SA;try{void 0!==l&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(l),void 0!==a&&clearTimeout(a)}catch{}}return a=setTimeout(()=>{r(),h()}),"function"==typeof requestAnimationFrame&&(l=requestAnimationFrame(()=>{r(),h()})),()=>h()}function x3(r){return queueMicrotask(()=>r()),()=>{r=SA}}const P2="isAngularZone",HE=P2+"_ID";let j7=0;class ou{constructor(a){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hm(!1),this.onMicrotaskEmpty=new hm(!1),this.onStable=new hm(!1),this.onError=new hm(!1);const{enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:y=!1,scheduleInRootZone:S=R3}=a;if(typeof Zone>"u")throw new Mr(908,!1);Zone.assertZonePatched();const L=this;L._nesting=0,L._outer=L._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(L._inner=L._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(L._inner=L._inner.fork(Zone.longStackTraceZoneSpec)),L.shouldCoalesceEventChangeDetection=!y&&h,L.shouldCoalesceRunChangeDetection=y,L.callbackScheduled=!1,L.scheduleInRootZone=S,function G7(r){const a=()=>{!function V7(r){function a(){O2(()=>{r.callbackScheduled=!1,x2(r),r.isCheckStableRunning=!0,R2(r),r.isCheckStableRunning=!1})}r.isCheckStableRunning||r.callbackScheduled||(r.callbackScheduled=!0,r.scheduleInRootZone?Zone.root.run(()=>{a()}):r._outer.run(()=>{a()}),x2(r))}(r)},l=j7++;r._inner=r._inner.fork({name:"angular",properties:{[P2]:!0,[HE]:l,[HE+l]:!0},onInvokeTask:(h,y,S,L,W,oe)=>{if(function q7(r){return k3(r,"__ignore_ng_zone__")}(oe))return h.invokeTask(S,L,W,oe);try{return N3(r),h.invokeTask(S,L,W,oe)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===L.type||r.shouldCoalesceRunChangeDetection)&&a(),D3(r)}},onInvoke:(h,y,S,L,W,oe,ye)=>{try{return N3(r),h.invoke(S,L,W,oe,ye)}finally{r.shouldCoalesceRunChangeDetection&&!r.callbackScheduled&&!function K7(r){return k3(r,"__scheduler_tick__")}(oe)&&a(),D3(r)}},onHasTask:(h,y,S,L)=>{h.hasTask(S,L),y===S&&("microTask"==L.change?(r._hasPendingMicrotasks=L.microTask,x2(r),R2(r)):"macroTask"==L.change&&(r.hasPendingMacrotasks=L.macroTask))},onHandleError:(h,y,S,L)=>(h.handleError(S,L),r.runOutsideAngular(()=>r.onError.emit(L)),!1)})}(L)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(P2)}static assertInAngularZone(){if(!ou.isInAngularZone())throw new Mr(909,!1)}static assertNotInAngularZone(){if(ou.isInAngularZone())throw new Mr(909,!1)}run(a,l,h){return this._inner.run(a,l,h)}runTask(a,l,h,y){const S=this._inner,L=S.scheduleEventTask("NgZoneEvent: "+y,a,$7,SA,SA);try{return S.runTask(L,l,h)}finally{S.cancelTask(L)}}runGuarded(a,l,h){return this._inner.runGuarded(a,l,h)}runOutsideAngular(a){return this._outer.run(a)}}const $7={};function R2(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function x2(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&!0===r.callbackScheduled)}function N3(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function D3(r){r._nesting--,R2(r)}class wA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hm,this.onMicrotaskEmpty=new hm,this.onStable=new hm,this.onError=new hm}run(a,l,h){return a.apply(l,h)}runGuarded(a,l,h){return a.apply(l,h)}runOutsideAngular(a){return a()}runTask(a,l,h,y){return a.apply(l,h)}}function k3(r,a){return!(!Array.isArray(r)||1!==r.length)&&!0===r[0]?.data?.[a]}class l_{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&M2(a);for(;l&&M2(l);)l=M2(l);return l||null}}const L3=new no("",{providedIn:"root",factory:()=>{const r=Tr(ou),a=Tr(l_);return l=>r.runOutsideAngular(()=>a.handleError(l))}});class fl{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=Tr(l_,{optional:!0}),this.destroyRef=Tr(hC),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(a){if(this.destroyed)throw new Mr(953,!1);return(this.listeners??=[]).push(a),{unsubscribe:()=>{const l=this.listeners?.indexOf(a);void 0!==l&&-1!==l&&this.listeners?.splice(l,1)}}}emit(a){if(this.destroyed)throw new Mr(953,!1);if(null===this.listeners)return;const l=M(null);try{for(const h of this.listeners)try{h(a)}catch(y){this.errorHandler?.handleError(y)}}finally{M(l)}}}function TA(r){return r.destroyRef}function F3(r){return new fl}function H3(r,a){return Vl(r,a)}const Q7=(H3.required=function W7(r){return Vl(gd,r)},H3);function X7(){return UE(sc(),Xn())}function UE(r,a){return new Yl(wd(r,a))}let Yl=(()=>{class r{constructor(l){this.nativeElement=l}static{this.__NG_ELEMENT_ID__=X7}}return r})();function U3(r){return r instanceof Yl?r.nativeElement:r}function Z7(){return this._results[Symbol.iterator]()}class AA{get changes(){return this._changes??=new hm}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const l=AA.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=Z7)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){this.dirty=!1;const h=st(a);(this._changesDetected=!function rm(r,a,l){if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++){let y=r[h],S=a[h];if(l&&(y=l(y),S=l(S)),S!==y)return!1}return!0}(this._results,h,l))&&(this._results=h,this.length=h.length,this.last=h[this.length-1],this.first=h[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(a){this._onDirty=a}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}const pC="ngSkipHydration",J7="ngskiphydration";function B3(r){const a=r.mergedAttrs;if(null===a)return!1;for(let l=0;l<a.length;l+=2){const h=a[l];if("number"==typeof h)return!1;if("string"==typeof h&&h.toLowerCase()===J7)return!0}return!1}function e9(r){return r.hasAttribute(pC)}function BE(r){return!(128&~r.flags)}function zE(r){if(BE(r))return!0;let a=r.parent;for(;a;){if(BE(r)||B3(a))return!0;a=a.parent}return!1}function z3(r){return BE(r)||B3(r)||zE(r)}const N2=new Map;let t9=0;function j3(r){return N2.get(r)||null}function D2(r){N2.delete(r[sm])}class $3{get lView(){return j3(this.lViewId)}constructor(a,l,h){this.lViewId=a,this.nodeIndex=l,this.native=h}}function Wh(r){let a=Yv(r);if(a){if(tl(a)){const l=a;let h,y,S;if(V3(r)){if(h=function q3(r,a){const l=r[Kr].components;if(l)for(let h=0;h<l.length;h++){const y=l[h];if(iu(y,r)[Nc]===a)return y}else if(iu(_o,r)[Nc]===a)return _o;return-1}(l,r),-1==h)throw new Error("The provided component was not found in the application");y=r}else if(function o9(r){return r&&r.constructor&&r.constructor.\u0275dir}(r)){if(h=function a9(r,a){let l=r[Kr].firstChild;for(;l;){const y=l.directiveEnd;for(let S=l.directiveStart;S<y;S++)if(r[S]===a)return l.index;l=Fj(l)}return-1}(l,r),-1==h)throw new Error("The provided directive was not found in the application");S=K3(h,l)}else if(h=G3(l,r),-1==h)return null;const L=ac(l[h]),W=Yv(L),oe=W&&!Array.isArray(W)?W:k2(l,h,L);if(y&&void 0===oe.component&&(oe.component=y,sh(oe.component,oe)),S&&void 0===oe.directives){oe.directives=S;for(let ye=0;ye<S.length;ye++)sh(S[ye],oe)}sh(oe.native,oe),a=oe}}else{const l=r;let h=l;for(;h=h.parentNode;){const y=Yv(h);if(y){const S=Array.isArray(y)?y:y.lView;if(!S)return null;const L=G3(S,l);if(L>=0){const W=ac(S[L]),oe=k2(S,L,W);sh(W,oe),a=oe;break}}}}return a||null}function k2(r,a,l){return new $3(r[sm],a,l)}const IA="__ngContext__";function sh(r,a){tl(a)?(r[IA]=a[sm],function r9(r){N2.set(r[sm],r)}(a)):r[IA]=a}function Yv(r){const a=r[IA];return"number"==typeof a?j3(a):a||null}function V3(r){return r&&r.constructor&&r.constructor.\u0275cmp}function G3(r,a){const l=r[Kr];for(let h=_o;h<l.bindingStartIndex;h++)if(ac(r[h])===a)return h;return-1}function Fj(r){if(r.child)return r.child;if(r.next)return r.next;for(;r.parent&&!r.parent.next;)r=r.parent;return r.parent&&r.parent.next}function K3(r,a){const l=a[Kr].data[r];if(0===l.directiveStart)return Nt;const h=[];for(let y=l.directiveStart;y<l.directiveEnd;y++){const S=a[y];V3(S)||h.push(S)}return h}function Q3(r){return Z3(r[py])}function X3(r){return Z3(r[Oh])}function Z3(r){for(;null!==r&&!nd(r);)r=r[Oh];return r}function MA(r){const a=Wh(r);if(null===a)return null;if(void 0===a.component){const l=a.lView;if(null===l)return null;a.component=function s9(r,a){const l=a[Kr].data[r],{directiveStart:h,componentOffset:y}=l;return y>-1?a[h+y]:null}(a.nodeIndex,l)}return a.component}function u9(r){if(r instanceof Text)return[];const a=Wh(r),l=a?a.lView:null;if(null===l)return[];const h=l[Kr],y=a.nodeIndex;return h?.data[y]?(void 0===a.directives&&(a.directives=K3(y,l)),null===a.directives?[]:[...a.directives]):[]}function H2(r){return Wh(r).native}function p9(r,a){return r.name==a.name?0:r.name<a.name?-1:1}function f9(r){return void 0!==r.type&&void 0!==r.declaredInputs&&void 0!==r.findHostDirectiveDefs}let OA;function _9(r){OA=r}function Wv(){if(void 0!==OA)return OA;if(typeof document<"u")return document;throw new Mr(210,!1)}const PA=new no("",{providedIn:"root",factory:()=>iL}),iL="ng",oL=new no(""),RA=new no("",{providedIn:"platform",factory:()=>"unknown"}),y9=new no(""),Uj=new no(""),v9=new no("",{providedIn:"root",factory:()=>Wv().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),U2={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840],placeholderResolution:30,disableImageSizeWarning:!1,disableImageLazyLoadWarning:!1},C9=new no("",{providedIn:"root",factory:()=>U2});function b9(r){return r}function E9(){const r=new jE;return"browser"===Tr(RA)&&(r.store=function S9(r,a){const l=r.getElementById(a+"-state");if(l?.textContent)try{return JSON.parse(l.textContent)}catch(h){console.warn("Exception while restoring TransferState for app "+a,h)}return{}}(Wv(),Tr(PA))),r}let jE=(()=>{class r{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=as({token:r,providedIn:"root",factory:E9})}get(l,h){return void 0!==this.store[l]?this.store[l]:h}set(l,h){this.store[l]=h}remove(l){delete this.store[l]}hasKey(l){return this.store.hasOwnProperty(l)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(l,h){this.onSerializeCallbacks[l]=h}toJson(){for(const l in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(l))try{this.store[l]=this.onSerializeCallbacks[l]()}catch(h){console.warn("Exception in onSerialize callback: ",h)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return r})();const B2="h",z2="b";var $E=function(r){return r.FirstChild="f",r.NextSibling="n",r}($E||{});const j2="e",aL="t",VE="c",$2="x",fC="r",V2="i",xA="n",GE="d",sL="l",G2="__nghData__",qE="ngh",cL="nghm";let lL=()=>null;function zj(r,a,l=!1){let h=r.getAttribute(qE);if(null==h)return null;const[y,S]=h.split("|");if(h=l?S:y,!h)return null;const W=l?y:S?`|${S}`:"";let oe={};if(""!==h){const Me=a.get(jE,null,{optional:!0});null!==Me&&(oe=Me.get(G2,[])[Number(h)])}const ye={data:oe,firstChild:r.firstChild??null};return l&&(ye.firstChild=r,DA(ye,0,r.nextSibling)),W?r.setAttribute(qE,W):r.removeAttribute(qE),ye}function q2(r,a,l=!1){return lL(r,a,l)}function uL(r){let a=r._lView;return 2===a[Kr].type?null:(Uv(a)&&(a=a[_o]),a)}const dL="__ngDebugHydrationInfo__";function K2(r){return r[dL]??null}function DA(r,a,l){r.segmentHeads??={},r.segmentHeads[a]=l}function YE(r,a){return r.segmentHeads?.[a]??null}function pL(r,a){const l=r.data;let h=l[j2]?.[a]??null;return null===h&&l[VE]?.[a]&&(h=Y2(r,a)),h}function WE(r,a){return r.data[VE]?.[a]??null}function Y2(r,a){const l=WE(r,a)??[];let h=0;for(let y of l)h+=y[fC]*(y[$2]??1);return h}function fL(r){if(typeof r.disconnectedNodes>"u"){const a=r.data[GE];r.disconnectedNodes=a?new Set(a):null}return r.disconnectedNodes}function Qv(r,a){if(typeof r.disconnectedNodes>"u"){const l=r.data[GE];r.disconnectedNodes=l?new Set(l):null}return!!fL(r)?.has(a)}function W2(r,a){const l=a,h=r.corruptedTextNodes;""===l.textContent?h.set(l,"ngetn"):l.nextSibling?.nodeType===Node.TEXT_NODE&&h.set(l,"ngtns")}const QE=new no(""),gL=new no("",{providedIn:"root",factory:()=>!1}),mL=new no(""),kA=new no(""),_L=!1,yL=new no("");let X2,FA;function Z2(){if(void 0===X2&&(X2=null,oc.trustedTypes))try{X2=oc.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return X2}function gC(r){return Z2()?.createHTML(r)||r}function vL(){if(void 0===FA&&(FA=null,oc.trustedTypes))try{FA=oc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return FA}function CL(r){return vL()?.createHTML(r)||r}function O9(r){return vL()?.createScript(r)||r}function bL(r){return vL()?.createScriptURL(r)||r}class Xv{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tc})`}}class P9 extends Xv{getTypeName(){return"HTML"}}class R9 extends Xv{getTypeName(){return"Style"}}class x9 extends Xv{getTypeName(){return"Script"}}class N9 extends Xv{getTypeName(){return"URL"}}class EL extends Xv{getTypeName(){return"ResourceURL"}}function u_(r){return r instanceof Xv?r.changingThisBreaksApplicationSecurity:r}function XE(r,a){const l=SL(r);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${Tc})`)}return l===a}function SL(r){return r instanceof Xv&&r.getTypeName()||null}function Gj(r){return new P9(r)}function qj(r){return new R9(r)}function wL(r){return new x9(r)}function D9(r){return new N9(r)}function k9(r){return new EL(r)}function TL(r){const a=new F9(r);return function H9(){try{return!!(new window.DOMParser).parseFromString(gC(""),"text/html")}catch{return!1}}()?new L9(a):a}class L9{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(gC(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.firstChild?.remove(),l)}catch{return null}}}class F9{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const l=this.inertDocument.createElement("template");return l.innerHTML=gC(a),l}}const U9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HA(r){return(r=String(r)).match(U9)?r:"unsafe:"+r}function d_(r){const a={};for(const l of r.split(","))a[l]=!0;return a}function ZE(...r){const a={};for(const l of r)for(const h in l)l.hasOwnProperty(h)&&(a[h]=!0);return a}const AL=d_("area,br,col,hr,img,wbr"),IL=d_("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ML=d_("rp,rt"),J2=ZE(AL,ZE(IL,d_("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ZE(ML,d_("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ZE(ML,IL)),UA=d_("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),PL=ZE(UA,d_("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),d_("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),RL=d_("script,style,template");class B9{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,h=!0,y=[];for(;l;)if(l.nodeType===Node.ELEMENT_NODE?h=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,h&&l.firstChild)y.push(l),l=$9(l);else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let S=j9(l);if(S){l=S;break}l=y.pop()}return this.buf.join("")}startElement(a){const l=V9(a).toLowerCase();if(!J2.hasOwnProperty(l))return this.sanitizedSomething=!0,!RL.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const h=a.attributes;for(let y=0;y<h.length;y++){const S=h.item(y),L=S.name,W=L.toLowerCase();if(!PL.hasOwnProperty(W)){this.sanitizedSomething=!0;continue}let oe=S.value;UA[W]&&(oe=HA(oe)),this.buf.push(" ",L,'="',xL(oe),'"')}return this.buf.push(">"),!0}endElement(a){const l=V9(a).toLowerCase();J2.hasOwnProperty(l)&&!AL.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(xL(a))}}function j9(r){const a=r.nextSibling;if(a&&r!==a.previousSibling)throw BA(a);return a}function $9(r){const a=r.firstChild;if(a&&function z9(r,a){return(r.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(r,a))throw BA(a);return a}function V9(r){const a=r.nodeName;return"string"==typeof a?a:"FORM"}function BA(r){return new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`)}const G9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,q9=/([^\#-~ |!])/g;function xL(r){return r.replace(/&/g,"&amp;").replace(G9,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(q9,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let JE;function eR(r,a){let l=null;try{JE=JE||TL(r);let h=a?String(a):"";l=JE.getInertBodyElement(h);let y=5,S=h;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,h=S,S=l.innerHTML,l=JE.getInertBodyElement(h)}while(h!==S);return gC((new B9).sanitizeChildren(zA(l)||l))}finally{if(l){const h=zA(l)||l;for(;h.firstChild;)h.firstChild.remove()}}}function zA(r){return"content"in r&&function K9(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Zv=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(Zv||{});function tR(r){const a=eS();return a?CL(a.sanitize(Zv.HTML,r)||""):XE(r,"HTML")?CL(u_(r)):eR(Wv(),go(r))}function nR(r){const a=eS();return a?a.sanitize(Zv.STYLE,r)||"":XE(r,"Style")?u_(r):go(r)}function mC(r){const a=eS();return a?a.sanitize(Zv.URL,r)||"":XE(r,"URL")?u_(r):HA(go(r))}function rR(r){const a=eS();if(a)return bL(a.sanitize(Zv.RESOURCE_URL,r)||"");if(XE(r,"ResourceURL"))return bL(u_(r));throw new Mr(904,!1)}function iR(r){const a=eS();if(a)return O9(a.sanitize(Zv.SCRIPT,r)||"");if(XE(r,"Script"))return O9(u_(r));throw new Mr(905,!1)}function NL(r){return gC(r[0])}function Y9(r){return function LA(r){return Z2()?.createScriptURL(r)||r}(r[0])}function oR(r,a,l){return function W9(r,a){return"src"===a&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===a&&("base"===r||"link"===r)?rR:mC}(a,l)(r)}function eS(){const r=Xn();return r&&r[Pu].sanitizer}const X9=/^>|^->|<!--|-->|--!>|<!-$/g,Ul=/(<|>)/g,cc="\u200b$1\u200b";const Ff={name:"custom-elements"},DL={name:"no-errors-schema"};let id=!1;function Eg(r){id=r}function tS(){return id}let aR=!1;function jA(r){aR=r}function Z9(){return aR}function lR(r){return r.ownerDocument.defaultView}function uR(r){return r.ownerDocument}function GA(r){return r.ownerDocument.body}function Ap(r){return r instanceof Function?r():r}function Ip(r){return"browser"===(r??Tr(ah)).get(RA)}var yC=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(yC||{});let qA;function nS(r,a){return qA(r,a)}function vC(r,a,l,h,y){if(null!=h){let S,L=!1;nd(h)?S=h:tl(h)&&(L=!0,h=h[Ic]);const W=ac(h);0===r&&null!==l?null==y?pR(a,l,W):Ey(a,l,W,y||null,!0):1===r&&null!==l?Ey(a,l,W,y||null,!0):2===r?sS(a,W,L):3===r&&a.destroyNode(W),null!=S&&function YL(r,a,l,h,y){const S=l[Rf];S!==ac(l)&&vC(a,r,h,S,y);for(let W=Mc;W<l.length;W++){const oe=l[W];ad(oe[Kr],oe,r,a,h,S)}}(a,r,S,l,y)}}function dR(r,a){return r.createText(a)}function h_(r,a,l){r.setValue(a,l)}function rS(r,a){return r.createComment(function nl(r){return r.replace(X9,a=>a.replace(Ul,cc))}(a))}function iS(r,a,l){return r.createElement(a,l)}function BL(r,a){a[Pu].changeDetectionScheduler?.notify(9),ad(r,a,a[ea],2,null,null)}function Eu(r,a){const l=r[Cg],h=a[Ou];(tl(h)||a[Uo]!==h[Ou][Uo])&&(r[Ao]|=um.HasTransplantedViews),null===l?r[Cg]=[a]:l.push(a)}function KA(r,a){const l=r[Cg],h=l.indexOf(a);l.splice(h,1)}function oS(r,a){if(r.length<=Mc)return;const l=Mc+a,h=r[l];if(h){const y=h[ws];null!==y&&y!==r&&KA(y,h),a>0&&(r[l-1][Oh]=h[Oh]);const S=ne(r,Mc+a);!function HL(r,a){BL(r,a),a[Ic]=null,a[Us]=null}(h[Kr],h);const L=S[Pf];null!==L&&L.detachView(S[Kr]),h[Ou]=null,h[Oh]=null,h[Ao]&=-129}return h}function CC(r,a){if(!(256&a[Ao])){const l=a[ea];l.destroyNode&&ad(r,a,l,3,null,null),function hR(r){let a=r[py];if(!a)return t0(r[Kr],r);for(;a;){let l=null;if(tl(a))l=a[py];else{const h=a[Mc];h&&(l=h)}if(!l){for(;a&&!a[Oh]&&a!==r;)tl(a)&&t0(a[Kr],a),a=a[Ou];null===a&&(a=r),tl(a)&&t0(a[Kr],a),l=a&&a[Oh]}a=l}}(a)}}function t0(r,a){if(256&a[Ao])return;const l=M(null);try{a[Ao]&=-129,a[Ao]|=256,a[bp]&&yt(a[bp]),function zL(r,a){let l;if(null!=r&&null!=(l=r.destroyHooks))for(let h=0;h<l.length;h+=2){const y=a[l[h]];if(!(y instanceof DE)){const S=l[h+1];if(Array.isArray(S))for(let L=0;L<S.length;L+=2){const W=y[S[L]],oe=S[L+1];xf(4,W,oe);try{oe.call(W)}finally{xf(5,W,oe)}}else{xf(4,y,S);try{S.call(y)}finally{xf(5,y,S)}}}}}(r,a),function YA(r,a){const l=r.cleanup,h=a[Jm];if(null!==l)for(let S=0;S<l.length-1;S+=2)if("string"==typeof l[S]){const L=l[S+3];L>=0?h[L]():h[-L].unsubscribe(),S+=2}else l[S].call(h[l[S+1]]);null!==h&&(a[Jm]=null);const y=a[cm];if(null!==y){a[cm]=null;for(let S=0;S<y.length;S++)(0,y[S])()}}(r,a),1===a[Kr].type&&a[ea].destroy();const h=a[ws];if(null!==h&&nd(a[Ou])){h!==a[Ou]&&KA(h,a);const y=a[Pf];null!==y&&y.detachView(r)}D2(a)}finally{M(l)}}function p_(r,a,l){return n0(r,a.parent,l)}function n0(r,a,l){let h=a;for(;null!==h&&168&h.type;)h=(a=h).parent;if(null===h)return l[Ic];{const{componentOffset:y}=h;if(y>-1){const{encapsulation:S}=r.data[h.directiveStart+y];if(S===yr.None||S===yr.Emulated)return null}return wd(h,l)}}function Ey(r,a,l,h,y){r.insertBefore(a,l,h,y)}function pR(r,a,l){r.appendChild(a,l)}function jL(r,a,l,h,y){null!==h?Ey(r,a,l,h,y):pR(r,a,l)}function WA(r,a){return r.parentNode(a)}function $L(r,a,l){return VL(r,a,l)}function QA(r,a,l){return 40&r.type?wd(r,l):null}let aS,VL=QA;function GL(r,a){VL=r,aS=a}function pm(r,a,l,h){const y=p_(r,h,a),S=a[ea],W=$L(h.parent||a[Us],h,a);if(null!=y)if(Array.isArray(l))for(let oe=0;oe<l.length;oe++)jL(S,y,l[oe],W,!1);else jL(S,y,l,W,!1);void 0!==aS&&aS(S,h,a,l,y)}function ju(r,a){if(null!==a){const l=a.type;if(3&l)return wd(a,r);if(4&l)return XA(-1,r[a.index]);if(8&l){const h=a.child;if(null!==h)return ju(r,h);{const y=r[a.index];return nd(y)?XA(-1,y):ac(y)}}if(128&l)return ju(r,a.next);if(32&l)return nS(a,r)()||ac(r[a.index]);{const h=qL(r,a);return null!==h?Array.isArray(h)?h[0]:ju(Nf(r[Uo]),h):ju(r,a.next)}}return null}function qL(r,a){return null!==a?r[Uo][Us].projection[a.projection]:null}function XA(r,a){const l=Mc+r+1;if(l<a.length){const h=a[l],y=h[Kr].firstChild;if(null!==y)return ju(h,y)}return a[Rf]}function sS(r,a,l){r.removeChild(null,a,l)}function cS(r){r.textContent=""}function fR(r,a,l,h,y,S,L){for(;null!=l;){if(128===l.type){l=l.next;continue}const W=h[l.index],oe=l.type;if(L&&0===a&&(W&&sh(ac(W),h),l.flags|=2),32&~l.flags)if(8&oe)fR(r,a,l.child,h,y,S,!1),vC(a,r,y,W,S);else if(32&oe){const ye=nS(l,h);let Me;for(;Me=ye();)vC(a,r,y,Me,S);vC(a,r,y,W,S)}else 16&oe?KL(r,a,h,l,y,S):vC(a,r,y,W,S);l=L?l.projectionNext:l.next}}function ad(r,a,l,h,y,S){fR(l,h,r.firstChild,a,y,S,!1)}function KL(r,a,l,h,y,S){const L=l[Uo],oe=L[Us].projection[h.projection];if(Array.isArray(oe))for(let ye=0;ye<oe.length;ye++)vC(a,r,y,oe[ye],S);else{let ye=oe;const Me=L[Ou];BE(h)&&(ye.flags|=128),fR(r,a,ye,Me,y,S,!0)}}function WL(r,a,l){""===l?r.removeAttribute(a,"class"):r.setAttribute(a,"class",l)}function es(r,a,l){const{mergedAttrs:h,classes:y,styles:S}=l;null!==h&&Ni(r,a,h),null!==y&&WL(r,a,y),null!==S&&function nH(r,a,l){r.setAttribute(a,"style",l)}(r,a,S)}const Qo={};function QL(r=1){XL(Ha(),Xn(),Dc()+r,!1)}function XL(r,a,l,h){if(!h)if(3&~a[Ao]){const S=r.preOrderHooks;null!==S&&gA(a,S,0,l)}else{const S=r.preOrderCheckHooks;null!==S&&NE(a,S,l)}Yh(l)}function bC(r,a=_a.Default){const l=Xn();return null===l?$o(r,a):C3(sc(),l,or(r),a)}function ZL(){throw new Error("invalid")}function JL(r,a,l,h,y,S){const L=M(null);try{let W=null;y&di.SignalBased&&(W=a[h][R]),null!==W&&void 0!==W.transformFn&&(S=W.transformFn(S)),y&di.HasDecoratorInputTransform&&(S=r.inputTransforms[h].call(a,S)),null!==r.setInput?r.setInput(a,W,S,l,h):Z1(a,W,h,S)}finally{M(L)}}function JA(r,a,l,h,y,S,L,W,oe,ye,Me){const et=a.blueprint.slice();return et[Ic]=y,et[Ao]=204|h,(null!==ye||r&&2048&r[Ao])&&(et[Ao]|=2048),TE(et),et[Ou]=et[e_]=r,et[Nc]=l,et[Pu]=L||r&&r[Pu],et[ea]=W||r&&r[ea],et[bu]=oe||r&&r[bu]||null,et[Us]=S,et[sm]=function n9(){return t9++}(),et[qd]=Me,et[nA]=ye,et[Uo]=2==a.type?r[Uo]:et,et}function Sy(r,a,l,h,y){let S=r.data[a];if(null===S)S=lS(r,a,l,h,y),function ve(){return aa.lFrame.inI18n}()&&(S.flags|=32);else if(64&S.type){S.type=l,S.value=h,S.attrs=y;const L=i_();S.injectorIndex=null===L?-1:L.injectorIndex}return sf(S,!0),S}function lS(r,a,l,h,y){const S=_2(),L=o_(),oe=r.data[a]=function lH(r,a,l,h,y,S){let L=a?a.injectorIndex:-1,W=0;return r_()&&(W|=128),{type:l,index:h,insertBeforeIndex:null,injectorIndex:L,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:W,providerIndexes:0,value:y,attrs:S,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,L?S:S&&S.parent,l,a,h,y);return null===r.firstChild&&(r.firstChild=oe),null!==S&&(L?null==S.child&&null!==oe.parent&&(S.child=oe):null===S.next&&(S.next=oe,oe.prev=S)),oe}function uS(r,a,l,h){if(0===l)return-1;const y=a.length;for(let S=0;S<l;S++)a.push(h),r.blueprint.push(h),r.data.push(null);return y}function e4(r,a,l,h,y){const S=Dc(),L=2&h;try{Yh(-1),L&&a.length>_o&&XL(r,a,_o,!1),xf(L?2:0,y),l(h,y)}finally{Yh(S),xf(L?3:1,y)}}function gR(r,a,l){if(K1(a)){const h=M(null);try{const S=a.directiveEnd;for(let L=a.directiveStart;L<S;L++){const W=r.data[L];W.contentQueries&&W.contentQueries(1,l[L],L)}}finally{M(h)}}}function dS(r,a,l){Vv()&&(function pH(r,a,l,h){const y=l.directiveStart,S=l.directiveEnd;bg(l)&&function _H(r,a,l){const h=wd(a,r),y=t4(l);let L=16;l.signals?L=4096:l.onPush&&(L=64);const W=nI(r,JA(r,y,null,L,h,a,null,r[Pu].rendererFactory.createRenderer(h,l),null,null,null));r[a.index]=W}(a,l,r.data[y+l.componentOffset]),r.firstCreatePass||yA(l,a),sh(h,a);const L=l.initialInputs;for(let W=y;W<S;W++){const oe=r.data[W],ye=lC(a,r,W,l);sh(ye,a),null!==L&&SR(0,W-y,ye,oe,0,L),af(oe)&&(iu(l.index,a)[Nc]=lC(a,r,W,l))}}(r,a,l,wd(l,a)),!(64&~l.flags)&&hS(r,a,l))}function mR(r,a,l=wd){const h=a.localNames;if(null!==h){let y=a.index+1;for(let S=0;S<h.length;S+=2){const L=h[S+1],W=-1===L?l(a,r):r[L];r[y++]=W}}}function t4(r){const a=r.tView;return null===a||a.incompleteFirstPass?r.tView=_R(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):a}function _R(r,a,l,h,y,S,L,W,oe,ye,Me){const et=_o+h,Ot=et+y,Ft=function iH(r,a){const l=[];for(let h=0;h<a;h++)l.push(h<r?null:Qo);return l}(et,Ot),ln="function"==typeof ye?ye():ye;return Ft[Kr]={type:r,blueprint:Ft,template:l,queries:null,viewQuery:W,declTNode:a,data:Ft.slice().fill(null,et),bindingStartIndex:et,expandoStartIndex:Ot,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof S?S():S,pipeRegistry:"function"==typeof L?L():L,firstChild:null,schemas:oe,consts:ln,incompleteFirstPass:!1,ssrId:Me}}let yR=()=>null;function aH(r){e9(r)?cS(r):function T9(r){const a=Wv(),l=a.createNodeIterator(r,NodeFilter.SHOW_COMMENT,{acceptNode(S){const L=function jj(r){return r.textContent?.replace(/\s/gm,"")}(S);return"ngetn"===L||"ngtns"===L?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let h;const y=[];for(;h=l.nextNode();)y.push(h);for(const S of y)"ngetn"===S.textContent?S.replaceWith(a.createTextNode("")):S.remove()}(r)}function vR(r,a,l,h,y){for(let S in a){if(!a.hasOwnProperty(S))continue;const L=a[S];if(void 0===L)continue;h??={};let W,oe=di.None;Array.isArray(L)?(W=L[0],oe=L[1]):W=L;let ye=S;if(null!==y){if(!y.hasOwnProperty(S))continue;ye=y[S]}0===r?n4(h,l,ye,W,oe):n4(h,l,ye,W)}return h}function n4(r,a,l,h,y){let S;r.hasOwnProperty(l)?(S=r[l]).push(a,h):S=r[l]=[a,h],void 0!==y&&S.push(y)}function Op(r,a,l,h,y,S,L,W){const oe=wd(a,l);let Me,ye=a.inputs;!W&&null!=ye&&(Me=ye[h])?(IR(r,l,Me,h,y),bg(a)&&function e$(r,a){const l=iu(a,r);16&l[Ao]||(l[Ao]|=64)}(l,a.index)):3&a.type&&(h=function dH(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(h),y=null!=L?L(y,a.value||"",h):y,S.setProperty(oe,h,y))}function CR(r,a,l,h){if(Vv()){const y=null===h?null:{"":-1},S=function fH(r,a){const l=r.directiveRegistry;let h=null,y=null;if(l)for(let S=0;S<l.length;S++){const L=l[S];if(jd(a,L.selectors,!1))if(h||(h=[]),af(L))if(null!==L.findHostDirectiveDefs){const W=[];y=y||new Map,L.findHostDirectiveDefs(L,W,y),h.unshift(...W,L),tI(r,a,W.length)}else h.unshift(L),tI(r,a,0);else y=y||new Map,L.findHostDirectiveDefs?.(L,h,y),h.push(L)}return null===h?null:[h,y]}(r,l);let L,W;null===S?L=W=null:[L,W]=S,null!==L&&bR(r,a,l,L,y,W),y&&function gH(r,a,l){if(a){const h=r.localNames=[];for(let y=0;y<a.length;y+=2){const S=l[a[y+1]];if(null==S)throw new Mr(-301,!1);h.push(a[y],S)}}}(l,h,y)}l.mergedAttrs=ss(l.mergedAttrs,l.attrs)}function bR(r,a,l,h,y,S){for(let ye=0;ye<h.length;ye++)CA(yA(l,a),r,h[ye].type);!function mH(r,a,l){r.flags|=1,r.directiveStart=a,r.directiveEnd=a+l,r.providerIndexes=a}(l,r.data.length,h.length);for(let ye=0;ye<h.length;ye++){const Me=h[ye];Me.providersResolver&&Me.providersResolver(Me)}let L=!1,W=!1,oe=uS(r,a,h.length,null);for(let ye=0;ye<h.length;ye++){const Me=h[ye];l.mergedAttrs=ss(l.mergedAttrs,Me.hostAttrs),i4(r,l,a,oe,Me),r4(oe,Me,y),null!==Me.contentQueries&&(l.flags|=4),(null!==Me.hostBindings||null!==Me.hostAttrs||0!==Me.hostVars)&&(l.flags|=64);const et=Me.type.prototype;!L&&(et.ngOnChanges||et.ngOnInit||et.ngDoCheck)&&((r.preOrderHooks??=[]).push(l.index),L=!0),!W&&(et.ngOnChanges||et.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(l.index),W=!0),oe++}!function uH(r,a,l){const y=a.directiveEnd,S=r.data,L=a.attrs,W=[];let oe=null,ye=null;for(let Me=a.directiveStart;Me<y;Me++){const et=S[Me],Ot=l?l.get(et):null,ln=Ot?Ot.outputs:null;oe=vR(0,et.inputs,Me,oe,Ot?Ot.inputs:null),ye=vR(1,et.outputs,Me,ye,ln);const cr=null===oe||null===L||Gc(a)?null:yH(oe,Me,L);W.push(cr)}null!==oe&&(oe.hasOwnProperty("class")&&(a.flags|=8),oe.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=W,a.inputs=oe,a.outputs=ye}(r,l,S)}function hS(r,a,l){const h=l.directiveStart,y=l.directiveEnd,S=l.index,L=function A(){return aa.lFrame.currentDirectiveIndex}();try{Yh(S);for(let W=h;W<y;W++){const oe=r.data[W],ye=a[W];Q(W),(null!==oe.hostBindings||0!==oe.hostVars||null!==oe.hostAttrs)&&lf(oe,ye)}}finally{Yh(-1),Q(L)}}function lf(r,a){null!==r.hostBindings&&r.hostBindings(1,a)}function tI(r,a,l){a.componentOffset=l,(r.components??=[]).push(a.index)}function r4(r,a,l){if(l){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)l[a.exportAs[h]]=r;af(a)&&(l[""]=r)}}function i4(r,a,l,h,y){r.data[h]=y;const S=y.factory||(y.factory=Th(y.type)),L=new DE(S,af(y),bC);r.blueprint[h]=L,l[h]=L,function hH(r,a,l,h,y){const S=y.hostBindings;if(S){let L=r.hostBindingOpCodes;null===L&&(L=r.hostBindingOpCodes=[]);const W=~a.index;(function zl(r){let a=r.length;for(;a>0;){const l=r[--a];if("number"==typeof l&&l<0)return l}return 0})(L)!=W&&L.push(W),L.push(l,h,S)}}(r,a,h,uS(r,l,y.hostVars,Qo),y)}function Sg(r,a,l,h,y,S){const L=wd(r,a);ER(a[ea],L,S,r.value,l,h,y)}function ER(r,a,l,h,y,S,L){if(null==S)r.removeAttribute(a,y,l);else{const W=null==L?go(S):L(S,h||"",y);r.setAttribute(a,y,W,l)}}function SR(r,a,l,h,y,S){const L=S[a];if(null!==L)for(let W=0;W<L.length;)JL(h,l,L[W++],L[W++],L[W++],L[W++])}function yH(r,a,l){let h=null,y=0;for(;y<l.length;){const S=l[y];if(0!==S)if(5!==S){if("number"==typeof S)break;if(r.hasOwnProperty(S)){null===h&&(h=[]);const L=r[S];for(let W=0;W<L.length;W+=3)if(L[W]===a){h.push(S,L[W+1],L[W+2],l[y+1]);break}}y+=2}else y+=2;else y+=4}return h}function wR(r,a,l,h){return[r,!0,0,a,null,h,null,l,null,null]}function o4(r,a){const l=r.contentQueries;if(null!==l){const h=M(null);try{for(let y=0;y<l.length;y+=2){const L=l[y+1];if(-1!==L){const W=r.data[L];He(l[y]),W.contentQueries(2,a[L],L)}}}finally{M(h)}}}function nI(r,a){return r[py]?r[Fv][Oh]=a:r[py]=a,r[Fv]=a,a}function TR(r,a,l){He(0);const h=M(null);try{a(r,l)}finally{M(h)}}function a4(r){return r[Jm]??=[]}function AR(r){return r.cleanup??=[]}function s4(r,a,l){return(null===r||af(r))&&(l=Ep(l[a.index])),l[ea]}function pS(r,a){const l=r[bu],h=l?l.get(l_,null):null;h&&h.handleError(a)}function IR(r,a,l,h,y){for(let S=0;S<l.length;){const L=l[S++],W=l[S++],oe=l[S++];JL(r.data[L],a[L],h,W,oe,y)}}function vc(r,a,l){const h=Sp(a,r);h_(r[ea],h,l)}function vH(r,a){const l=iu(a,r),h=l[Kr];!function wy(r,a){for(let l=a.length;l<r.blueprint.length;l++)a.push(r.blueprint[l])}(h,l);const y=l[Ic];null!==y&&null===l[qd]&&(l[qd]=q2(y,l[bu])),MR(h,l,l[Nc])}function MR(r,a,l){dn(a);try{const h=r.viewQuery;null!==h&&TR(1,h,l);const y=r.template;null!==y&&e4(r,a,y,1,l),r.firstCreatePass&&(r.firstCreatePass=!1),a[Pf]?.finishViewCreation(r),r.staticContentQueries&&o4(r,a),r.staticViewQueries&&TR(2,r.viewQuery,l);const S=r.components;null!==S&&function fS(r,a){for(let l=0;l<a.length;l++)vH(r,a[l])}(a,S)}catch(h){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),h}finally{a[Ao]&=-5,Ja()}}function EC(r,a,l,h){const y=M(null);try{const S=a.tView,oe=JA(r,S,l,4096&r[Ao]?4096:16,null,a,null,null,h?.injector??null,h?.embeddedViewInjector??null,h?.dehydratedView??null);oe[ws]=r[a.index];const Me=r[Pf];return null!==Me&&(oe[Pf]=Me.createEmbeddedView(S)),MR(S,oe,l),oe}finally{M(y)}}function c4(r,a){const l=Mc+a;if(l<r.length)return r[l]}function r0(r,a){return!a||null===a.firstChild||BE(r)}function i0(r,a,l,h=!0){const y=a[Kr];if(function od(r,a,l,h){const y=Mc+h,S=l.length;h>0&&(l[y-1][Oh]=a),h<S-Mc?(a[Oh]=l[y],ee(l,Mc+h,a)):(l.push(a),a[Oh]=null),a[Ou]=l;const L=a[ws];null!==L&&l!==L&&Eu(L,a);const W=a[Pf];null!==W&&W.insertView(r),nC(a),a[Ao]|=128}(y,a,r,l),h){const L=XA(l,r),W=a[ea],oe=WA(W,r[Rf]);null!==oe&&function UL(r,a,l,h,y,S){h[Ic]=y,h[Us]=a,ad(r,h,l,1,y,S)}(y,r[Us],W,a,oe,L)}const S=a[qd];null!==S&&null!==S.firstChild&&(S.firstChild=null)}function rI(r,a){const l=oS(r,a);return void 0!==l&&CC(l[Kr],l),l}function o0(r,a,l,h,y=!1){for(;null!==l;){if(128===l.type){l=y?l.projectionNext:l.next;continue}const S=a[l.index];null!==S&&h.push(ac(S)),nd(S)&&l4(S,h);const L=l.type;if(8&L)o0(r,a,l.child,h);else if(32&L){const W=nS(l,a);let oe;for(;oe=W();)h.push(oe)}else if(16&L){const W=qL(a,l);if(Array.isArray(W))h.push(...W);else{const oe=Nf(a[Uo]);o0(oe[Kr],oe,W,h,!0)}}l=y?l.projectionNext:l.next}return h}function l4(r,a){for(let l=Mc;l<r.length;l++){const h=r[l],y=h[Kr].firstChild;null!==y&&o0(h[Kr],h,y,a)}r[Rf]!==r[Ic]&&a.push(r[Rf])}let SC=[];const u4={...J,consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{jv(r.lView)},consumerOnSignalRead(){this.lView[bp]=this}},gS={...J,consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{let a=Nf(r.lView);for(;a&&!d4(a[Kr]);)a=Nf(a);a&&uA(a)},consumerOnSignalRead(){this.lView[bp]=this}};function d4(r){return 2!==r.type}const mS=100;function iI(r,a=!0,l=0){const h=r[Pu],y=h.rendererFactory;y.begin?.();try{!function wH(r,a){const l=a_();try{sC(!0),a0(r,a);let h=0;for(;_y(r);){if(h===mS)throw new Mr(103,!1);h++,a0(r,1)}}finally{sC(l)}}(r,l)}catch(L){throw a&&pS(r,L),L}finally{y.end?.(),h.inlineEffectRunner?.flush()}}function _S(r,a,l,h){const y=a[Ao];if(!(256&~y))return;a[Pu].inlineEffectRunner?.flush(),dn(a);let W=!0,oe=null,ye=null;d4(r)?(ye=function CH(r){return r[bp]??function bH(r){const a=SC.pop()??Object.create(u4);return a.lView=r,a}(r)}(a),oe=tt(ye)):null===G()?(W=!1,ye=function SH(r){const a=r[bp]??Object.create(gS);return a.lView=r,a}(a),oe=tt(ye)):a[bp]&&(yt(a[bp]),a[bp]=null);try{TE(a),RE(r.bindingStartIndex),null!==l&&e4(r,a,l,2,h);const Me=!(3&~y);if(Me){const Ft=r.preOrderCheckHooks;null!==Ft&&NE(a,Ft,null)}else{const Ft=r.preOrderHooks;null!==Ft&&gA(a,Ft,0,null),C2(a,0)}if(function Ty(r){for(let a=Q3(r);null!==a;a=X3(a)){if(!(a[Ao]&um.HasTransplantedViews))continue;const l=a[Cg];for(let h=0;h<l.length;h++)uA(l[h])}}(a),p4(a,0),null!==r.contentQueries&&o4(r,a),Me){const Ft=r.contentCheckHooks;null!==Ft&&NE(a,Ft)}else{const Ft=r.contentHooks;null!==Ft&&gA(a,Ft,1),C2(a,1)}!function rH(r,a){const l=r.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const y=l[h];if(y<0)Yh(~y);else{const S=y,L=l[++h],W=l[++h];_(L,S),W(2,a[S])}}}finally{Yh(-1)}}(r,a);const et=r.components;null!==et&&g4(a,et,0);const Ot=r.viewQuery;if(null!==Ot&&TR(2,Ot,h),Me){const Ft=r.viewCheckHooks;null!==Ft&&NE(a,Ft)}else{const Ft=r.viewHooks;null!==Ft&&gA(a,Ft,2),C2(a,2)}if(!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),a[lm]){for(const Ft of a[lm])Ft();a[lm]=null}a[Ao]&=-73}catch(Me){throw jv(a),Me}finally{null!==ye&&(_t(ye,oe),W&&function EH(r){r.lView[bp]!==r&&(r.lView=null,SC.push(r))}(ye)),Ja()}}function p4(r,a){for(let l=Q3(r);null!==l;l=X3(l))for(let h=Mc;h<l.length;h++)f4(l[h],a)}function OR(r,a,l){f4(iu(a,r),l)}function f4(r,a){wE(r)&&a0(r,a)}function a0(r,a){const h=r[Kr],y=r[Ao],S=r[bp];let L=!!(0===a&&16&y);if(L||=!!(64&y&&0===a),L||=!!(1024&y),L||=!(!S?.dirty||!Bt(S)),L||=!1,S&&(S.dirty=!1),r[Ao]&=-9217,L)_S(h,r,h.template,r[Nc]);else if(8192&y){p4(r,1);const W=h.components;null!==W&&g4(r,W,1)}}function g4(r,a,l){for(let h=0;h<a.length;h++)OR(r,a[h],l)}function wg(r,a){const l=a_()?64:1088;for(r[Pu].changeDetectionScheduler?.notify(a);r;){r[Ao]|=l;const h=Nf(r);if(Uv(r)&&!h)return r;r=h}return null}class wC{get rootNodes(){const a=this._lView,l=a[Kr];return o0(l,a,l.firstChild,[])}constructor(a,l,h=!0){this._lView=a,this._cdRefInjectingView=l,this.notifyErrorHandler=h,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nc]}set context(a){this._lView[Nc]=a}get destroyed(){return!(256&~this._lView[Ao])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Ou];if(nd(a)){const l=a[8],h=l?l.indexOf(this):-1;h>-1&&(oS(a,h),ne(l,h))}this._attachedToViewContainer=!1}CC(this._lView[Kr],this._lView)}onDestroy(a){rC(this._lView,a)}markForCheck(){wg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ao]&=-129}reattach(){nC(this._lView),this._lView[Ao]|=128}detectChanges(){this._lView[Ao]|=1024,iI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Mr(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const a=Uv(this._lView),l=this._lView[ws];null!==l&&!a&&KA(l,this._lView),BL(this._lView[Kr],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Mr(902,!1);this._appRef=a;const l=Uv(this._lView),h=this._lView[ws];null!==h&&!l&&Eu(h,this._lView),nC(this._lView)}}let yS=(()=>{class r{static{this.__NG_ELEMENT_ID__=PR}}return r})();const vS=yS,TH=class extends vS{constructor(a,l,h){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,l){return this.createEmbeddedViewImpl(a,l)}createEmbeddedViewImpl(a,l,h){const y=EC(this._declarationLView,this._declarationTContainer,a,{embeddedViewInjector:l,dehydratedView:h});return new wC(y)}};function PR(){return oI(sc(),Xn())}function oI(r,a){return 4&r.type?new TH(a,r,UE(r,a)):null}const RR="<-- AT THIS LOCATION";function aI(r){const h=`During serialization, Angular detected DOM nodes that were created outside of Angular context and provided as projectable nodes (likely via \`ViewContainerRef.createComponent\` or \`createComponent\` APIs). Hydration is not supported for such cases, consider refactoring the code to avoid this pattern or using \`ngSkipHydration\` on the host element of the component.\n\n${function sI(r){const a="  ";let l="";const h=r;return h.previousSibling&&(l+="  \u2026\n",l+=a+ES(h.previousSibling)+"\n"),l+=a+ES(h)+`  ${RR}\n`,r.nextSibling&&(l+="  \u2026\n"),r.parentNode&&(l=ES(h.parentNode,"\n"+l)),l}(r)}\n\nNote: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.\n\n`;return new Mr(-503,h)}const m4=new Set(["ngh","ng-version","ng-server-context"]);function s0(r,a="\u2026"){switch(r.type){case 1:return"#text"+(r.value?`(${r.value})`:"");case 2:const h=function bS(r){const a=[];if(r.attrs)for(let l=0;l<r.attrs.length;){const h=r.attrs[l++];if("number"==typeof h)break;const y=r.attrs[l++];a.push(`${h}="${MC(y)}"`)}return a.join(" ")}(r),y=r.value.toLowerCase();return`<${y}${h?" "+h:""}>${a}</${y}>`;case 8:return"\x3c!-- ng-container --\x3e";case 4:return"\x3c!-- container --\x3e";default:return`#node(${function AH(r){switch(r){case 4:return"view container";case 2:return"element";case 8:return"ng-container";case 32:return"icu";case 64:return"i18n";case 16:return"projection";case 1:return"text";case 128:return"@let";default:return"<unknown>"}}(r.type)})`}}function ES(r,a="\u2026"){const l=r;switch(l.nodeType){case Node.ELEMENT_NODE:const h=l.tagName.toLowerCase(),y=function MH(r){const a=[];for(let l=0;l<r.attributes.length;l++){const h=r.attributes[l];m4.has(h.name)||a.push(`${h.name}="${MC(h.value)}"`)}return a.join(" ")}(l);return`<${h}${y?" "+y:""}>${a}</${h}>`;case Node.TEXT_NODE:const S=l.textContent?MC(l.textContent):"";return"#text"+(S?`(${S})`:"");case Node.COMMENT_NODE:return`\x3c!-- ${MC(l.textContent??"")} --\x3e`;default:return`#node(${l.nodeType})`}}function MC(r,a=50){return r?(r=function OH(r){return r.replace(/\s+/gm,"")}(r)).length>a?`${r.substring(0,a-1)}\u2026`:r:""}function xR(r,a,l){const h=a.insertBeforeIndex,y=Array.isArray(h)?h[0]:h;return null===y?QA(r,0,l):ac(l[y])}function TS(r,a,l,h,y){const S=a.insertBeforeIndex;if(Array.isArray(S)){let L=h,W=null;if(3&a.type||(W=L,L=y),null!==L&&-1===a.componentOffset)for(let oe=1;oe<S.length;oe++)Ey(r,L,l[S[oe]],W,!1)}}function _4(r,a){if(r.push(a),r.length>1)for(let l=r.length-2;l>=0;l--){const h=r[l];y4(h)||PH(h,a)&&null===NR(h)&&a$(h,a.index)}}function y4(r){return!(64&r.type)}function PH(r,a){return y4(a)||r.index>a.index}function NR(r){const a=r.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function a$(r,a){const l=r.insertBeforeIndex;Array.isArray(l)?l[0]=a:(GL(xR,TS),r.insertBeforeIndex=a)}function OC(r,a){const l=r.data[a];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function xH(r,a,l){const h=lS(r,l,64,null,null);return _4(a,h),h}function c0(r,a){const l=a[r.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function PC(r){return r>>>17}function v4(r){return(131070&r)>>>1}function IS(r){return-1===r}function DR(r,a,l){r.index=0;const h=c0(a,l);r.removes=null!==h?a.remove[h]:Nt}function lh(r){if(r.index<r.removes.length){const a=r.removes[r.index++];return a>0?r.lView[a]:(r.stack.push(r.index,r.removes),DR(r,r.lView[Kr].data[~a],r.lView),lh(r))}return 0===r.stack.length?null:(r.removes=r.stack.pop(),r.index=r.stack.pop(),lh(r))}function Pp(){const r={stack:[],index:-1};return function a(l,h){for(r.lView=h;r.stack.length;)r.stack.pop();return DR(r,l.value,h),lh.bind(null,r)}}const cI=new RegExp(`^(\\d+)*(${z2}|${B2})*(.*)`);function g_(r){return r.index-_o}function l0(r,a){return!(144&r.type)&&!!a[r.index]&&lI(ac(a[r.index]))}function lI(r){return!!r&&!r.isConnected}function C4(r,a){const l=r.i18nNodes;if(l)return l.get(a)}function xC(r,a,l){const y=r.data[xA]?.[l];return y?uI(y,a):null}function Ay(r,a,l,h){const y=g_(h);let S=C4(r,y);if(void 0===S){const L=r.data[xA];if(L?.[y])S=uI(L[y],l);else if(a.firstChild===h)S=r.firstChild;else{const W=null===h.prev,oe=h.prev??h.parent;if(function LR(r){return!r.prev&&8===r.parent?.type}(h))S=YE(r,g_(h.parent));else{let ye=wd(oe,l);if(W)S=ye.firstChild;else{const Me=g_(oe),et=YE(r,Me);S=2===oe.type&&et?sd(Y2(r,Me)+1,et):ye.nextSibling}}}}return S}function sd(r,a){let l=a;for(let h=0;h<r;h++)l=l.nextSibling;return l}function uI(r,a){const[l,...h]=function f_(r){const a=r.match(cI),[l,h,y,S]=a,L=h?parseInt(h,10):y,W=[];for(const[oe,ye,Me]of S.matchAll(/(f|n)(\d*)/g)){const et=parseInt(Me,10)||1;W.push(ye,et)}return[L,...W]}(r);let y;return y=l===B2?a[Uo][Ic]:l===z2?GA(a[Uo][Ic]):ac(a[Number(l)+_o]),function Tg(r,a){let l=r;for(let h=0;h<a.length;h+=2){const y=a[h],S=a[h+1];for(let L=0;L<S;L++)switch(y){case $E.FirstChild:l=l.firstChild;break;case $E.NextSibling:l=l.nextSibling}}return l}(y,h)}function dI(r,a){if(r===a)return[];if(null==r.parentElement||null==a.parentElement)return null;if(r.parentElement===a.parentElement)return function u0(r,a){const l=[];let h=null;for(h=r;null!=h&&h!==a;h=h.nextSibling)l.push($E.NextSibling);return null==h?null:l}(r,a);{const l=a.parentElement,h=dI(r,l),y=dI(l.firstChild,a);return h&&y?[...h,$E.FirstChild,...y]:null}}function E4(r,a,l){const h=dI(r,a);return null===h?null:function MS(r,a){const l=[r];for(const h of a){const y=l.length-1;y>0&&l[y-1]===h?l[y]=(l[y]||1)+1:l.push(h,"")}return l.join("")}(l,h)}function S4(r,a,l){let y,S,L,h=r.parent;for(;null!==h&&(l0(h,a)||l?.has(h.index));)h=h.parent;null!==h&&3&h.type?(y=h.index,S=ac(a[y]),L=go(y-_o)):(y=L=B2,S=a[Uo][Ic]);let W=ac(a[r.index]);if(44&r.type){const ye=ju(a,r);ye&&(W=ye)}let oe=E4(S,W,L);if(null===oe&&S!==W&&(oe=E4(S.ownerDocument.body,W,z2),null===oe))throw function IH(r,a){const h=`${function AC(r,a,l){const h="  ";let y="";a.prev?(y+="  \u2026\n",y+=h+s0(a.prev)+"\n"):a.type&&12&a.type&&(y+="  \u2026\n"),l?(y+=h+s0(a)+"\n",y+=h+`\x3c!-- container --\x3e  ${RR}\n`):y+=h+s0(a)+`  ${RR}\n`,y+="  \u2026\n";const S=a.type?p_(r[Kr],a,r):null;return S&&(y=ES(S,"\n"+y)),y}(r,a,!1)}\n\n`,y=function wS(r){return`To fix this problem:\n  * check ${r?`the "${r}"`:"corresponding"} component for hydration-related issues\n  * check to see if your template has valid HTML structure\n  * or skip hydration by adding the \`ngSkipHydration\` attribute to its host node in a template\n\n`}();throw new Mr(-502,"During serialization, Angular was unable to find an element in the DOM:\n\n"+h+y)}(a,r);return oe}let OS=!1,fm=()=>{};function uf(r){OS=r}function FR(){return OS}function kH(r,a,l){if(!l.isI18nHydrationEnabled)return null;const h=r[Kr],y=h.data[a];if(!y||!y.ast)return null;const S=h.data[y.parentTNodeIndex];if(S&&z3(S))return null;const L={caseQueue:[],disconnectedNodes:new Set,disjointNodes:new Set};return pI(r,L,l,y.ast),0===L.caseQueue.length&&0===L.disconnectedNodes.size&&0===L.disjointNodes.size?null:L}function pI(r,a,l,h){let y=null;for(const S of h){const L=ha(r,a,l,S);L&&(LH(y,L)&&a.disjointNodes.add(S.index-_o),y=L)}return y}function LH(r,a){return r&&r.nextSibling!==a}function ha(r,a,l,h){const y=ac(r[h.index]);if(!y||lI(y))return a.disconnectedNodes.add(h.index-_o),null;const S=y;switch(h.kind){case 0:W2(l,S);break;case 1:case 2:pI(r,a,l,h.children);break;case 3:{const L=r[h.currentCaseLViewIndex];if(null!=L){const W=L<0?~L:L;a.caseQueue.push(W),pI(r,a,l,h.cases[W])}break}}return function Sa(r,a){const h=r[Kr].data[a.index];return p3(h)?ju(r,h):3===a.kind?function kR(r,a){const l={stack:[],index:-1,lView:a};return DR(l,r,a),lh.bind(null,l)}(h,r)()??ac(r[a.index]):ac(r[a.index])??null}(r,h)}function cd(r,a){r.currentNode=a}function ts(r,a,l){const h=l.index-_o,{disconnectedNodes:y}=r,S=a.currentNode;return a.isConnected?(r.i18nNodes.set(h,S),y.delete(h)):y.add(h),S}function HR(r,a){let l=r.currentNode;for(let h=0;h<a&&l;h++)l=l?.nextSibling??null;return l}function NC(r,a){return{currentNode:a,isConnected:r.isConnected}}function T4(r,a,l,h){const y=r[qd];if(!y||!FR()||l&&(z3(l)||Qv(y,l.index-_o)))return;const S=r[Kr],L=S.data[a],oe=function W(){if(IS(h)){const Ft=Ay(y,S,r,l);return 8&l.type?Ft:Ft.firstChild}return y?.firstChild}(),ye=fL(y)??new Set,Me=y.i18nNodes??=new Map,et=y.data[sL]?.[a-_o]??[],Ot=y.dehydratedIcuData??=new Map;Iy({hydrationInfo:y,lView:r,i18nNodes:Me,disconnectedNodes:ye,caseQueue:et,dehydratedIcuData:Ot},{currentNode:oe,isConnected:!0},L.ast),y.disconnectedNodes=0===ye.size?null:ye}function Iy(r,a,l){if(Array.isArray(l)){let h=a;for(const y of l){const S=xC(r.hydrationInfo,r.lView,y.index-_o);S&&(h=NC(a,S)),Iy(r,h,y)}}else{if(r.disconnectedNodes.has(l.index-_o))return;switch(l.kind){case 0:{const h=ts(r,a,l);cd(a,h?.nextSibling??null);break}case 1:{Iy(r,NC(a,a.currentNode?.firstChild??null),l.children);const h=ts(r,a,l);cd(a,h?.nextSibling??null);break}case 2:{const h=l.index-_o,{hydrationInfo:y}=r,S=pL(y,h);switch(l.type){case 0:{const L=ts(r,a,l);!function I9(r,a){return void 0!==r.data[j2]?.[a]}(y,h)?(Iy(r,NC(a,a.currentNode?.firstChild??null),l.children),cd(a,L?.nextSibling??null),null!==S&&cd(a,HR(a,S+1))):(Iy(r,a,l.children),cd(a,HR(a,1)));break}case 1:ts(r,a,l),cd(a,HR(a,S+1))}break}case 3:{const h=a.isConnected?r.caseQueue.shift():null,y={currentNode:null,isConnected:!1};for(let L=0;L<l.cases.length;L++)Iy(r,L===h?a:y,l.cases[L]);null!==h&&r.dehydratedIcuData.set(l.index,{case:h,node:l});const S=ts(r,a,l);cd(a,S?.nextSibling??null);break}}}}let PS=()=>{};function Hf(r,a,l){const h=r[qd]?.dehydratedIcuData;h&&h.get(a)?.case===l&&h.delete(a)}function FH(r,a,l){for(const h of l.node.cases[l.case]){const y=a.get(h.index-_o);y&&sS(r,y,!1)}}function hs(r){const a=r[Hv]??[],h=r[Ou][ea];for(const y of a)A4(y,h);r[Hv]=Nt}function A4(r,a){let l=0,h=r.firstChild;if(h){const y=r.data[fC];for(;l<y;){const S=h.nextSibling;sS(a,h,!1),h=S,l++}}}function Rp(r){hs(r);const a=r[Ic];tl(a)&&df(a);for(let l=Mc;l<r.length;l++)df(r[l])}function df(r){!function My(r){const a=r[qd];if(a){const{i18nNodes:l,dehydratedIcuData:h}=a;if(l&&h){const y=r[ea];for(const S of h.values())FH(y,l,S)}a.i18nNodes=void 0,a.dehydratedIcuData=void 0}}(r);const a=r[Kr];for(let l=_o;l<a.bindingStartIndex;l++)nd(r[l])?Rp(r[l]):tl(r[l])&&df(r[l])}let I4=()=>null;function zR(r,a){const l=r[Hv];return a&&null!==l&&0!==l.length?l[0].data[V2]===a?l.shift():(hs(r),null):null}function xp(r,a){return I4(r,a)}class Uf{}const Oy=new no("",{providedIn:"root",factory:()=>!1}),M4=new no(""),jR=new no("");class O4{}class DC{}class R4{resolveComponentFactory(a){throw function P4(r){const a=Error(`No component factory found for ${rr(r)}.`);return a.ngComponent=r,a}(a)}}class kC{static{this.NULL=new R4}}class $R{}let io=(()=>{class r{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function d0(){const r=Xn(),l=iu(sc().index,r);return(tl(l)?l:r)[ea]}()}}return r})(),RS=(()=>{class r{static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>null})}}return r})();function VR(r){return void 0!==r.ngModule}function Py(r){return!!ue(r)}function xS(r){return!!el(r)}function Bf(r){return!!Cu(r)}function zf(r){return!!da(r)}function GR(r,a){if(qo(r)&&!(r=or(r)))throw new Error(`Expected forwardRef function, imported from "${Oa(a)}", to return a standalone entity or NgModule but got "${Oa(r)||r}".`);if(null==ue(r)){const l=da(r)||Cu(r)||el(r);if(null==l)throw VR(r)?new Error(`A module with providers was imported from "${Oa(a)}". Modules with providers are not supported in standalone components imports.`):new Error(`The "${Oa(r)}" type, imported from "${Oa(a)}", must be a standalone component / directive / pipe or an NgModule. Did you forget to add the required @Component / @Directive / @Pipe or @NgModule annotation?`);if(!l.standalone)throw new Error(`The "${Oa(r)}" ${function BH(r){return da(r)?"component":Cu(r)?"directive":el(r)?"pipe":"type"}(r)}, imported from "${Oa(a)}", is not standalone. Did you forget to add the standalone: true flag?`)}}const LC=!0;class NS{constructor(){this.ownerNgModule=new Map,this.ngModulesWithSomeUnresolvedDecls=new Set,this.ngModulesScopeCache=new Map,this.standaloneComponentsScopeCache=new Map}resolveNgModulesDecls(){if(0!==this.ngModulesWithSomeUnresolvedDecls.size){for(const a of this.ngModulesWithSomeUnresolvedDecls){const l=ue(a);if(l?.declarations)for(const h of Ap(l.declarations))zf(h)&&this.ownerNgModule.set(h,a)}this.ngModulesWithSomeUnresolvedDecls.clear()}}getComponentDependencies(a,l){this.resolveNgModulesDecls();const h=da(a);if(null===h)throw new Error(`Attempting to get component dependencies for a type that is not a component: ${a}`);if(h.standalone){const y=this.getStandaloneComponentScope(a,l);return y.compilation.isPoisoned?{dependencies:[]}:{dependencies:[...y.compilation.directives,...y.compilation.pipes,...y.compilation.ngModules]}}{if(!this.ownerNgModule.has(a))return{dependencies:[]};const y=this.getNgModuleScope(this.ownerNgModule.get(a));return y.compilation.isPoisoned?{dependencies:[]}:{dependencies:[...y.compilation.directives,...y.compilation.pipes]}}}registerNgModule(a,l){if(!Py(a))throw new Error(`Attempting to register a Type which is not NgModule as NgModule: ${a}`);this.ngModulesWithSomeUnresolvedDecls.add(a)}clearScopeCacheFor(a){this.ngModulesScopeCache.delete(a),this.standaloneComponentsScopeCache.delete(a)}getNgModuleScope(a){if(this.ngModulesScopeCache.has(a))return this.ngModulesScopeCache.get(a);const l=this.computeNgModuleScope(a);return this.ngModulesScopeCache.set(a,l),l}computeNgModuleScope(a){const l=ue(a,!0),h={exported:{directives:new Set,pipes:new Set},compilation:{directives:new Set,pipes:new Set}};for(const y of Ap(l.imports))if(Py(y)){const S=this.getNgModuleScope(y);__(S.exported.directives,h.compilation.directives),__(S.exported.pipes,h.compilation.pipes)}else{if(!q(y)){h.compilation.isPoisoned=!0;break}if(Bf(y)||zf(y))h.compilation.directives.add(y);else{if(!xS(y))throw new Mr(1e3,"The standalone imported type is neither a component nor a directive nor a pipe");h.compilation.pipes.add(y)}}if(!h.compilation.isPoisoned)for(const y of Ap(l.declarations)){if(Py(y)||q(y)){h.compilation.isPoisoned=!0;break}xS(y)?h.compilation.pipes.add(y):h.compilation.directives.add(y)}for(const y of Ap(l.exports))if(Py(y)){const S=this.getNgModuleScope(y);__(S.exported.directives,h.exported.directives),__(S.exported.pipes,h.exported.pipes),__(S.exported.directives,h.compilation.directives),__(S.exported.pipes,h.compilation.pipes)}else xS(y)?h.exported.pipes.add(y):h.exported.directives.add(y);return h}getStandaloneComponentScope(a,l){if(this.standaloneComponentsScopeCache.has(a))return this.standaloneComponentsScopeCache.get(a);const h=this.computeStandaloneComponentScope(a,l);return this.standaloneComponentsScopeCache.set(a,h),h}computeStandaloneComponentScope(a,l){const h={compilation:{directives:new Set([a]),pipes:new Set,ngModules:new Set}};for(const y of st(l??[])){const S=or(y);try{GR(S,a)}catch{return h.compilation.isPoisoned=!0,h}if(Py(S)){h.compilation.ngModules.add(S);const L=this.getNgModuleScope(S);if(L.exported.isPoisoned)return h.compilation.isPoisoned=!0,h;__(L.exported.directives,h.compilation.directives),__(L.exported.pipes,h.compilation.pipes)}else if(xS(S))h.compilation.pipes.add(S);else{if(!Bf(S)&&!zf(S))return h.compilation.isPoisoned=!0,h;h.compilation.directives.add(S)}}return h}isOrphanComponent(a){const l=da(a);return!(!l||l.standalone||(this.resolveNgModulesDecls(),this.ownerNgModule.has(a)))}}function __(r,a){for(const l of r)a.add(l)}const FC=new NS;function gI(r,a,l){let h=l?r.styles:null,y=l?r.classes:null,S=0;if(null!==a)for(let L=0;L<a.length;L++){const W=a[L];"number"==typeof W?S=W:1==S?y=Ln(y,W):2==S&&(h=Ln(h,W+": "+a[++L]+";"))}l?r.styles=h:r.stylesWithoutHost=h,l?r.classes=y:r.classesWithoutHost=y}class N4 extends kC{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=da(a);return new au(l,this.ngModule)}}function DS(r,a){const l=[];for(const h in r){if(!r.hasOwnProperty(h))continue;const y=r[h];if(void 0===y)continue;const S=Array.isArray(y),L=S?y[0]:y;l.push(a?{propName:L,templateName:h,isSignal:!!((S?y[1]:di.None)&di.SignalBased)}:{propName:L,templateName:h})}return l}class au extends DC{get inputs(){const a=this.componentDef,l=a.inputTransforms,h=DS(a.inputs,!0);if(null!==l)for(const y of h)l.hasOwnProperty(y.propName)&&(y.transform=l[y.propName]);return h}get outputs(){return DS(this.componentDef.outputs,!1)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function Ym(r){return r.map(Km).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,h,y){const S=M(null);try{let L=(y=y||this.ngModule)instanceof oh?y:y?.injector;L&&null!==this.componentDef.getStandaloneInjector&&(L=this.componentDef.getStandaloneInjector(L)||L);const W=L?new Kv(a,L):a,oe=W.get($R,null);if(null===oe)throw new Mr(407,!1);const et={rendererFactory:oe,sanitizer:W.get(RS,null),inlineEffectRunner:null,changeDetectionScheduler:W.get(Uf,null)},Ot=oe.createRenderer(null,this.componentDef),Ft=this.componentDef.selectors[0][0]||"div",ln=h?function oH(r,a,l,h){const S=h.get(gL,!1)||l===yr.ShadowDom,L=r.selectRootElement(a,S);return function eI(r){yR(r)}(L),L}(Ot,h,this.componentDef.encapsulation,W):iS(Ot,Ft,function zH(r){const a=r.toLowerCase();return"svg"===a?cA:"math"===a?SE:null}(Ft));let cr=512;this.componentDef.signals?cr|=4096:this.componentDef.onPush||(cr|=16);let Fr=null;null!==ln&&(Fr=q2(ln,W,!0));const Jr=_R(0,null,null,1,0,null,null,null,null,null,null),nr=JA(null,Jr,null,cr,null,null,et,Ot,W,null,Fr);dn(nr);let pa,Ts,dc=null;try{const Au=this.componentDef;let kh,gv=null;Au.findHostDirectiveDefs?(kh=[],gv=new Map,Au.findHostDirectiveDefs(Au,kh,gv),kh.push(Au)):kh=[Au];const Y_=function kc(r,a){const l=r[Kr],h=_o;return r[h]=a,Sy(l,h,2,"#host",null)}(nr,ln);dc=function Ry(r,a,l,h,y,S,L){const W=y[Kr];!function kS(r,a,l,h){for(const y of r)a.mergedAttrs=ss(a.mergedAttrs,y.hostAttrs);null!==a.mergedAttrs&&(gI(a,a.mergedAttrs,!0),null!==l&&es(h,l,a))}(h,r,a,L);let oe=null;null!==a&&(oe=q2(a,y[bu]));const ye=S.rendererFactory.createRenderer(a,l);let Me=16;l.signals?Me=4096:l.onPush&&(Me=64);const et=JA(y,t4(l),null,Me,y[r.index],r,S,ye,null,null,oe);return W.firstCreatePass&&tI(W,r,h.length-1),nI(y,et),y[r.index]=et}(Y_,ln,Au,kh,nr,et,Ot),Ts=n_(Jr,_o),ln&&function qR(r,a,l,h){if(h)Ni(r,l,["ng-version","18.2.5"]);else{const{attrs:y,classes:S}=function Vd(r){const a=[],l=[];let h=1,y=2;for(;h<r.length;){let S=r[h];if("string"==typeof S)2===y?""!==S&&a.push(S,r[++h]):8===y&&l.push(S);else{if(!Ws(y))break;y=S}h++}return{attrs:a,classes:l}}(a.selectors[0]);y&&Ni(r,l,y),S&&S.length>0&&WL(r,l,S.join(" "))}}(Ot,Au,ln,h),void 0!==l&&function LS(r,a,l){const h=r.projection=[];for(let y=0;y<a.length;y++){const S=l[y];h.push(null!=S?Array.from(S):null)}}(Ts,this.ngContentSelectors,l),pa=function D4(r,a,l,h,y,S){const L=sc(),W=y[Kr],oe=wd(L,y);bR(W,y,L,l,null,h);for(let Me=0;Me<l.length;Me++)sh(lC(y,W,L.directiveStart+Me,L),y);hS(W,y,L),oe&&sh(oe,y);const ye=lC(y,W,L.directiveStart+L.componentOffset,L);if(r[Nc]=y[Nc]=ye,null!==S)for(const Me of S)Me(ye,a);return gR(W,L,y),ye}(dc,Au,kh,gv,nr,[KR]),MR(Jr,nr,null)}catch(Au){throw null!==dc&&D2(dc),D2(nr),Au}finally{Ja()}return new y_(this.componentType,pa,UE(Ts,nr),nr,Ts)}finally{M(S)}}}class y_ extends O4{constructor(a,l,h,y,S){super(),this.location=h,this._rootLView=y,this._tNode=S,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new wC(y,void 0,!1),this.componentType=a}setInput(a,l){const h=this._tNode.inputs;let y;if(null!==h&&(y=h[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),l))return;const S=this._rootLView;IR(S[Kr],S,y,a,l),this.previousInputValues.set(a,l),wg(iu(this._tNode.index,S),1)}}get injector(){return new Td(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function KR(){const r=sc();fA(Xn()[Kr],r)}let v_=(()=>{class r{static{this.__NG_ELEMENT_ID__=mI}}return r})();function mI(){return FS(sc(),Xn())}const jf=v_,$u=class extends jf{constructor(a,l,h){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=h}get element(){return UE(this._hostTNode,this._hostLView)}get injector(){return new Td(this._hostTNode,this._hostLView)}get parentInjector(){const a=vA(this._hostTNode,this._hostLView);if(E2(a)){const l=LE(a,this._hostLView),h=kE(a);return new Td(l[Kr].data[h+8],l)}return new Td(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=YR(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-Mc}createEmbeddedView(a,l,h){let y,S;"number"==typeof h?y=h:null!=h&&(y=h.index,S=h.injector);const L=xp(this._lContainer,a.ssrId),W=a.createEmbeddedViewImpl(l||{},S,L);return this.insertImpl(W,y,r0(this._hostTNode,L)),W}createComponent(a,l,h,y,S){const L=a&&!Zm(a);let W;if(L)W=l;else{const ln=l||{};W=ln.index,h=ln.injector,y=ln.projectableNodes,S=ln.environmentInjector||ln.ngModuleRef}const oe=L?a:new au(da(a)),ye=h||this.parentInjector;if(!S&&null==oe.ngModule){const cr=(L?ye:this.parentInjector).get(oh,null);cr&&(S=cr)}const Me=da(oe.componentType??{}),et=xp(this._lContainer,Me?.id??null),Ft=oe.create(ye,y,et?.firstChild??null,S);return this.insertImpl(Ft.hostView,W,r0(this._hostTNode,et)),Ft}insert(a,l){return this.insertImpl(a,l,!0)}insertImpl(a,l,h){const y=a._lView;if(function h2(r){return nd(r[Ou])}(y)){const W=this.indexOf(a);if(-1!==W)this.detach(W);else{const oe=y[Ou],ye=new $u(oe,oe[Us],oe[Ou]);ye.detach(ye.indexOf(a))}}const S=this._adjustIndex(l),L=this._lContainer;return i0(L,y,S,h),a.attachToViewContainerRef(),ee(Kd(L),S,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=YR(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),h=oS(this._lContainer,l);h&&(ne(Kd(this._lContainer),l),CC(h[Kr],h))}detach(a){const l=this._adjustIndex(a,-1),h=oS(this._lContainer,l);return h&&null!=ne(Kd(this._lContainer),l)?new wC(h):null}_adjustIndex(a,l=0){return a??this.length+l}};function YR(r){return r[8]}function Kd(r){return r[8]||(r[8]=[])}function FS(r,a){let l;const h=a[r.index];return nd(h)?l=h:(l=wR(h,a,null,r),a[r.index]=l,nI(a,l)),k4(l,a,r,h),new $u(l,r,a)}let k4=Zh,$f=()=>!1;function L4(r,a,l){return $f(r,a,l)}function Zh(r,a,l,h){if(r[Rf])return;let y;y=8&l.type?ac(h):function Np(r,a){const l=r[ea],h=l.createComment(""),y=wd(a,r);return Ey(l,WA(l,y),h,function tH(r,a){return r.nextSibling(a)}(l,y),!1),h}(a,l),r[Rf]=y}function WR(r,a,l){if(r[Rf]&&r[Hv])return!0;const h=l[qd],y=a.index-_o;if(!h||zE(a)||Qv(h,y))return!1;const L=YE(h,y),W=h.data[VE]?.[y],[oe,ye]=function HH(r,a){const l=[];for(const h of a)for(let y=0;y<(h[$2]??1);y++){const S={data:h,firstChild:null};h[fC]>0&&(S.firstChild=r,r=sd(h[fC],r)),l.push(S)}return[r,l]}(L,W);return r[Rf]=oe,r[Hv]=ye,!0}function QR(r,a,l,h){$f(r,l,a)||Zh(r,a,l,h)}class XR{constructor(a){this.queryList=a,this.matches=null}clone(){return new XR(this.queryList)}setDirty(){this.queryList.setDirty()}}class _I{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const h=null!==a.contentQueries?a.contentQueries[0]:l.length,y=[];for(let S=0;S<h;S++){const L=l.getByIndex(S);y.push(this.queries[L.indexInDeclarationView].clone())}return new _I(y)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}finishViewCreation(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==vI(a,l).matches&&this.queries[l].setDirty()}}class HS{constructor(a,l,h=null){this.flags=l,this.read=h,this.predicate="string"==typeof a?function BS(r){return r.split(",").map(a=>a.trim())}(a):a}}class ZR{constructor(a=[]){this.queries=a}elementStart(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let h=0;h<this.length;h++){const y=null!==l?l.length:0,S=this.getByIndex(h).embeddedTView(a,y);S&&(S.indexInDeclarationView=h,null!==l?l.push(S):l=[S])}return null!==l?new ZR(l):null}template(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class JR{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new JR(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1&~this.metadata.flags){const l=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let y=0;y<h.length;y++){const S=h[y];this.matchTNodeWithReadOption(a,l,ex(l,S)),this.matchTNodeWithReadOption(a,l,bA(l,a,S,!1,!1))}else h===yS?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,bA(l,a,h,!1,!1))}matchTNodeWithReadOption(a,l,h){if(null!==h){const y=this.metadata.read;if(null!==y)if(y===Yl||y===v_||y===yS&&4&l.type)this.addMatch(l.index,-2);else{const S=bA(l,a,y,!1,!1);null!==S&&this.addMatch(l.index,S)}else this.addMatch(l.index,h)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function ex(r,a){const l=r.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===a)return l[h+1];return null}function tx(r,a,l,h){return-1===l?function US(r,a){return 11&r.type?UE(r,a):4&r.type?oI(r,a):null}(a,r):-2===l?function nx(r,a,l){return l===Yl?UE(a,r):l===yS?oI(a,r):l===v_?FS(a,r):void 0}(r,a,h):lC(r,r[Kr],l,a)}function H4(r,a,l,h){const y=a[Pf].queries[h];if(null===y.matches){const S=r.data,L=l.matches,W=[];for(let oe=0;null!==L&&oe<L.length;oe+=2){const ye=L[oe];W.push(ye<0?null:tx(a,S[ye],L[oe+1],l.metadata.read))}y.matches=W}return y.matches}function rx(r,a,l,h){const y=r.queries.getByIndex(l),S=y.matches;if(null!==S){const L=H4(r,a,y,l);for(let W=0;W<S.length;W+=2){const oe=S[W];if(oe>0)h.push(L[W/2]);else{const ye=S[W+1],Me=a[-oe];for(let et=Mc;et<Me.length;et++){const Ot=Me[et];Ot[ws]===Ot[Ou]&&rx(Ot[Kr],Ot,ye,h)}if(null!==Me[Cg]){const et=Me[Cg];for(let Ot=0;Ot<et.length;Ot++){const Ft=et[Ot];rx(Ft[Kr],Ft,ye,h)}}}}}return h}function xy(r,a){return r[Pf].queries[a].queryList}function h0(r,a,l){const h=new AA(!(4&~l));return function cH(r,a,l,h){const y=a4(a);y.push(l),r.firstCreatePass&&AR(r).push(h,y.length-1)}(r,a,h,h.destroy),(a[Pf]??=new _I).queries.push(new XR(h))-1}function lo(r,a,l){const h=Ha();return h.firstCreatePass&&(yI(h,new HS(r,a,l),-1),!(2&~a)&&(h.staticViewQueries=!0)),h0(h,Xn(),a)}function uh(r,a,l,h){const y=Ha();if(y.firstCreatePass){const S=sc();yI(y,new HS(a,l,h),S.index),function U4(r,a){const l=r.contentQueries||(r.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(r.queries.length-1,a)}(y,r),!(2&~l)&&(y.staticContentQueries=!0)}return h0(y,Xn(),l)}function yI(r,a,l){null===r.queries&&(r.queries=new ZR),r.queries.track(new JR(a,l))}function vI(r,a){return r.queries.getByIndex(a)}function B4(r,a){const l=r[Kr],h=vI(l,a);return h.crossesNgTemplate?rx(l,r,a,[]):H4(l,r,h,a)}const C_=new Set;function Ph(r){C_.has(r)||(C_.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}function CI(r){return"function"==typeof r&&void 0!==r[R]}function z4(r){return null}function ix(r,a){Ph("NgSignals");const l=function qt(r){const a=Object.create(ui);a.value=r;const l=()=>(se(a),a.value);return l[R]=a,l}(r),h=l[R];return a?.equal&&(h.equal=a.equal),l.set=y=>bn(h,y),l.update=y=>function Pn(r,a){Ne()||Nn(),bn(r,a(r.value))}(h,y),l.asReadonly=j4.bind(l),l}function j4(){const r=this[R];if(void 0===r.readonlyFn){const a=()=>this();a[R]=r,r.readonlyFn=a}return r.readonlyFn}function Ag(r){return CI(r)&&"function"==typeof r.set}function ox(r,a){let l;const h=On(()=>{l._dirtyCounter();const y=function jH(r,a){const l=r._lView,h=r._queryIndex;if(void 0===l||void 0===h||4&l[Ao])return a?void 0:Nt;const y=xy(l,h),S=B4(l,h);return y.reset(S,U3),a?y.first:y._changesDetected||void 0===r._flatValue?r._flatValue=y.toArray():r._flatValue}(l,r);if(a&&void 0===y)throw new Mr(-951,!1);return y});return l=h[R],l._dirtyCounter=ix(0),l._flatValue=void 0,h}function $4(){return ox(!0,!1)}function bI(){return ox(!0,!0)}function EI(){return ox(!1,!1)}function ax(r,a){const l=r[R];l._lView=Xn(),l._queryIndex=a,l._queryList=xy(l._lView,a),l._queryList.onDirty(()=>l._dirtyCounter.update(h=>h+1))}function Vu(r,a){return $4()}const $H=(Vu.required=function Dp(r,a){return bI()},Vu);function V4(r,a){return EI()}function G4(r,a){return $4()}const q4=(G4.required=function sx(r,a){return bI()},G4);function VH(r,a){return EI()}function K4(r){const a=Object.create(Ol),l=new fl;function h(){return se(a),Y4(a.value),a.value}return a.value=r,h[R]=a,h.asReadonly=j4.bind(h),h.set=y=>{a.equal(a.value,y)||(bn(a,y),l.emit(y))},h.update=y=>{Y4(a.value),h.set(y(a.value))},h.subscribe=l.subscribe.bind(l),h.destroyRef=l.destroyRef,h}function Y4(r){if(r===gd)throw new Mr(952,!1)}function W4(r){return K4(r)}const Q4=(W4.required=function GH(){return K4(gd)},W4);class HC{}const qH=Ac("ContentChildren",(r,a={})=>({selector:r,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...a}),HC),SI=Ac("ContentChild",(r,a={})=>({selector:r,first:!0,isViewQuery:!1,descendants:!0,...a}),HC),KH=Ac("ViewChildren",(r,a={})=>({selector:r,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!0,...a}),HC),b_=Ac("ViewChild",(r,a)=>({selector:r,first:!0,isViewQuery:!0,descendants:!0,...a}),HC);function lx(r){const a=[],l=new Map;function h(y){let S=l.get(y);if(!S){const L=r(y);l.set(y,S=L.then(QH))}return S}return p0.forEach((y,S)=>{const L=[];y.templateUrl&&L.push(h(y.templateUrl).then(ye=>{y.template=ye}));const W="string"==typeof y.styles?[y.styles]:y.styles||[];if(y.styles=W,y.styleUrl&&y.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(y.styleUrls?.length){const ye=y.styles.length,Me=y.styleUrls;y.styleUrls.forEach((et,Ot)=>{W.push(""),L.push(h(et).then(Ft=>{W[ye+Ot]=Ft,Me.splice(Me.indexOf(et),1),0==Me.length&&(y.styleUrls=void 0)}))})}else y.styleUrl&&L.push(h(y.styleUrl).then(ye=>{W.push(ye),y.styleUrl=void 0}));const oe=Promise.all(L).then(()=>function X4(r){UC.delete(r)}(S));a.push(oe)}),TI(),Promise.all(a).then(()=>{})}let p0=new Map;const UC=new Set;function kp(r){return UC.has(r)}function wI(r){return!!(r.templateUrl&&!r.hasOwnProperty("template")||r.styleUrls&&r.styleUrls.length||r.styleUrl)}function TI(){const r=p0;return p0=new Map,r}function ux(r){UC.clear(),r.forEach((a,l)=>UC.add(l)),p0=r}function QH(r){return"string"==typeof r?r:r.text()}const Lp=new Map;let Z4=!0;function hx(r,a){(function dx(r,a,l){if(a&&a!==l&&Z4)throw new Error(`Duplicate module registered for ${r} - ${rr(a)} vs ${rr(a.name)}`)})(a,Lp.get(a)||null,r),Lp.set(a,r)}function f0(r){return Lp.get(r)}function AI(r){Z4=!r}function Ua(r,a,l){const h=Xn(),y=yc(),S=wd(y,h);if(2===y.type&&"iframe"===a.toLowerCase()){const L=S;throw L.src="",L.srcdoc=gC(""),sS(h[ea],L),new Mr(-910,!1)}return r}function zS(r){return Object.getPrototypeOf(r.prototype).constructor}function BC(r){let a=zS(r.type),l=!0;const h=[r];for(;a;){let y;if(af(r))y=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Mr(903,!1);y=a.\u0275dir}if(y){if(l){h.push(y);const L=r;L.inputs=E_(r.inputs),L.inputTransforms=E_(r.inputTransforms),L.declaredInputs=E_(r.declaredInputs),L.outputs=E_(r.outputs);const W=y.hostBindings;W&&g0(r,W);const oe=y.viewQuery,ye=y.contentQueries;if(oe&&Ny(r,oe),ye&&Gu(r,ye),II(r,y),md(r.outputs,y.outputs),af(y)&&y.data.animation){const Me=r.data;Me.animation=(Me.animation||[]).concat(y.data.animation)}}const S=y.features;if(S)for(let L=0;L<S.length;L++){const W=S[L];W&&W.ngInherit&&W(r),W===BC&&(l=!1)}}a=Object.getPrototypeOf(a)}!function jS(r){let a=0,l=null;for(let h=r.length-1;h>=0;h--){const y=r[h];y.hostVars=a+=y.hostVars,y.hostAttrs=ss(y.hostAttrs,l=ss(l,y.hostAttrs))}}(h)}function II(r,a){for(const l in a.inputs){if(!a.inputs.hasOwnProperty(l)||r.inputs.hasOwnProperty(l))continue;const h=a.inputs[l];if(void 0!==h&&(r.inputs[l]=h,r.declaredInputs[l]=a.declaredInputs[l],null!==a.inputTransforms)){const y=Array.isArray(h)?h[0]:h;if(!a.inputTransforms.hasOwnProperty(y))continue;r.inputTransforms??={},r.inputTransforms[y]=a.inputTransforms[y]}}}function E_(r){return r===Vn?{}:r===Nt?[]:r}function Ny(r,a){const l=r.viewQuery;r.viewQuery=l?(h,y)=>{a(h,y),l(h,y)}:a}function Gu(r,a){const l=r.contentQueries;r.contentQueries=l?(h,y,S)=>{a(h,y,S),l(h,y,S)}:a}function g0(r,a){const l=r.hostBindings;r.hostBindings=l?(h,y)=>{a(h,y),l(h,y)}:a}const ml=["providersResolver"],zC=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function px(r){let l,a=zS(r.type);l=af(r)?a.\u0275cmp:a.\u0275dir;const h=r;for(const y of ml)h[y]=l[y];if(af(l))for(const y of zC)h[y]=l[y]}function jC(r){const a=l=>{const h=(Array.isArray(r)?r:r()).map(y=>"function"==typeof y?{directive:or(y),inputs:Vn,outputs:Vn}:{directive:or(y.directive),inputs:S_(y.inputs),outputs:S_(y.outputs)});null===l.hostDirectives?(l.findHostDirectiveDefs=$C,l.hostDirectives=h):l.hostDirectives.unshift(...h)};return a.ngInherit=!0,a}function $C(r,a,l){if(null!==r.hostDirectives)for(const h of r.hostDirectives){const y=Cu(h.directive);gm(y.declaredInputs,h.inputs),$C(y,a,l),l.set(y,h),a.push(y)}}function S_(r){if(void 0===r||0===r.length)return Vn;const a={};for(let l=0;l<r.length;l+=2)a[r[l]]=r[l+1];return a}function gm(r,a){for(const l in a)a.hasOwnProperty(l)&&(r[a[l]]=r[l])}function w_(r){const a=r.inputConfig,l={};for(const h in a)if(a.hasOwnProperty(h)){const y=a[h];Array.isArray(y)&&y[3]&&(l[h]=y[3])}r.inputTransforms=l}class Vf{}class Rh{}function gx(r,a){return new m0(r,a??null,[])}const $S=gx;class m0 extends Vf{constructor(a,l,h,y=!0){super(),this.ngModuleType=a,this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new N4(this);const S=ue(a);this._bootstrapComponents=Ap(S.bootstrap),this._r3Injector=M3(a,l,[{provide:Vf,useValue:this},{provide:kC,useValue:this.componentFactoryResolver},...h],rr(a),new Set(["environment"])),y&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class _0 extends Rh{constructor(a){super(),this.moduleType=a}create(a){return new m0(this.moduleType,a,[])}}class mx extends Vf{constructor(a){super(),this.componentFactoryResolver=new N4(this),this.instance=null;const l=new yg([...a.providers,{provide:Vf,useValue:this},{provide:kC,useValue:this.componentFactoryResolver}],a.parent||V1(),a.debugName,new Set(["environment"]));this.injector=l,a.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function mm(r,a,l=null){return new mx({providers:r,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}let OI=(()=>{class r{constructor(){this.cachedInjectors=new Map}getOrCreateInjector(l,h,y,S){if(!this.cachedInjectors.has(l)){const L=y.length>0?mm(y,h,S):null;this.cachedInjectors.set(l,L)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=as({token:r,providedIn:"environment",factory:()=>new r})}}return r})();function VS(r){return!!GC(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function GC(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Dy(r,a){const l=VS(r),h=VS(a);return l&&h?function y0(r,a,l){const h=r[Symbol.iterator](),y=a[Symbol.iterator]();for(;;){const S=h.next(),L=y.next();if(S.done&&L.done)return!0;if(S.done||L.done||!l(S.value,L.value))return!1}}(r,a,Dy):!(l||!r||"object"!=typeof r&&"function"!=typeof r||h||!a||"object"!=typeof a&&"function"!=typeof a)||Object.is(r,a)}function Jh(r,a,l){return r[a]=l}function Gf(r,a){return r[a]}function su(r,a,l){return!Object.is(r[a],l)&&(r[a]=l,!0)}function Ig(r,a,l,h){const y=su(r,a,l);return su(r,a+1,h)||y}function hf(r,a,l,h,y){const S=Ig(r,a,l,h);return su(r,a+2,y)||S}function xh(r,a,l,h,y,S){const L=Ig(r,a,l,h);return Ig(r,a+2,y,S)||L}function v0(r){return!(32&~r.flags)}function _m(r,a,l,h,y,S,L,W,oe,ye){const Me=l+_o,et=a.firstCreatePass?function yx(r,a,l,h,y,S,L,W,oe){const ye=a.consts,Me=Sy(a,r,4,L||null,W||null);CR(a,l,Me,Tp(ye,oe)),fA(a,Me);const et=Me.tView=_R(2,Me,h,y,S,a.directiveRegistry,a.pipeRegistry,null,a.schemas,ye,null);return null!==a.queries&&(a.queries.template(a,Me),et.queries=a.queries.embeddedTView(Me)),Me}(Me,a,r,h,y,S,L,W,oe):a.data[Me];sf(et,!1);const Ot=ky(a,r,et,l);xE()&&pm(a,r,Ot,et),sh(Ot,r);const Ft=wR(Ot,r,Ot,et);return r[Me]=Ft,nI(r,Ft),L4(Ft,et,r),Kh(et)&&dS(a,r,et),null!=oe&&mR(r,et,ye),et}function GS(r,a,l,h,y,S,L,W){const oe=Xn(),ye=Ha();return _m(oe,ye,r,a,l,h,y,Tp(ye.consts,S),L,W),GS}let ky=vx;function vx(r,a,l,h){return s_(!0),a[ea].createComment("")}function A_(r,a,l,h){const y=a[qd],S=!y||r_()||v0(l)||Qv(y,h);if(s_(S),S)return vx(0,a);const L=y.data[aL]?.[h]??null;null!==L&&null!==l.tView&&null===l.tView.ssrId&&(l.tView.ssrId=L);const W=Ay(y,r,a,l);return DA(y,h,W),sd(Y2(y,h),W)}var Ql=function(r){return r[r.NOT_STARTED=0]="NOT_STARTED",r[r.IN_PROGRESS=1]="IN_PROGRESS",r[r.COMPLETE=2]="COMPLETE",r[r.FAILED=3]="FAILED",r}(Ql||{});const bx=0,J4=1;var Su=function(r){return r[r.Placeholder=0]="Placeholder",r[r.Loading=1]="Loading",r[r.Complete=2]="Complete",r[r.Error=3]="Error",r}(Su||{}),C0=function(r){return r[r.Initial=-1]="Initial",r}(C0||{});const Mg=0,I_=1,Fp=2,qC=3,KC=4,Ex=5;var qS=function(r){return r[r.Manual=0]="Manual",r[r.Playthrough=1]="Playthrough",r}(qS||{});function M_(r,a,l){const h=1===r?Ex:KC;null===a[h]&&(a[h]=[]),a[h].push(l)}function PI(r,a){const l=1===r?Ex:KC,h=a[l];if(null!==h){for(const y of h)y();a[l]=null}}function RI(r){PI(1,r),PI(0,r)}function Sx(r,a){if(null!==G())throw new Mr(-602,!1)}var O_=function(r){return r[r.EarlyRead=0]="EarlyRead",r[r.Write=1]="Write",r[r.MixedReadWrite=2]="MixedReadWrite",r[r.Read=3]="Read",r}(O_||{});let wx=(()=>{class r{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>new r})}}return r})();class b0{constructor(){this.ngZone=Tr(ou),this.scheduler=Tr(Uf),this.errorHandler=Tr(l_,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[O_.EarlyRead,O_.Write,O_.MixedReadWrite,O_.Read]}execute(){this.executing=!0;for(const a of b0.PHASES)for(const l of this.sequences)if(!l.erroredOrDestroyed&&l.hooks[a])try{l.pipelinedValue=this.ngZone.runOutsideAngular(()=>l.hooks[a](l.pipelinedValue))}catch(h){l.erroredOrDestroyed=!0,this.errorHandler?.handleError(h)}this.executing=!1;for(const a of this.sequences)a.afterRun(),a.once&&this.sequences.delete(a);for(const a of this.deferredRegistrations)this.sequences.add(a);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(a){this.executing?this.deferredRegistrations.add(a):(this.sequences.add(a),this.scheduler.notify(6))}unregister(a){this.executing&&this.sequences.has(a)?(a.erroredOrDestroyed=!0,a.pipelinedValue=void 0,a.once=!0):(this.sequences.delete(a),this.deferredRegistrations.delete(a))}static{this.\u0275prov=as({token:b0,providedIn:"root",factory:()=>new b0})}}class e8{constructor(a,l,h,y){this.impl=a,this.hooks=l,this.once=h,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=y.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}}function Tx(r,a){!a?.injector&&uy();const l=a?.injector??Tr(ah);return Ip(l)?(Ph("NgAfterRender"),xI(r,l,a,!1)):t8}function YC(r,a){!a?.injector&&uy();const l=a?.injector??Tr(ah);return Ip(l)?(Ph("NgAfterNextRender"),xI(r,l,a,!0)):t8}function xI(r,a,l,h){const y=a.get(wx);y.impl??=a.get(b0);const L=new e8(y.impl,function ym(r,a){if(r instanceof Function){const l=[void 0,void 0,void 0,void 0];return l[a]=r,l}return[r.earlyRead,r.write,r.mixedReadWrite,r.read]}(r,l?.phase??O_.MixedReadWrite),h,a.get(hC));return y.impl.register(L),L}const t8={destroy(){}};function KS(r){return r+1}function E0(r,a){return r[KS(a.index)]}function Hp(r,a){const l=KS(a.index);return r.data[l]}function WC(r,a){return a===Su.Placeholder?r.placeholderBlockConfig?.[bx]??null:a===Su.Loading?r.loadingBlockConfig?.[bx]??null:null}function vm(r){return r.loadingBlockConfig?.[J4]??null}function YS(r,a){if(!r||0===r.length)return a;const l=new Set(r);for(const h of a)l.add(h);return r.length===l.size?r:Array.from(l)}function QC(r){return null!==r&&"object"==typeof r&&"number"==typeof r.primaryTmplIndex}const DI={passive:!0,capture:!0},WS=new WeakMap,S0=new WeakMap,w0=new WeakMap,Ax=["click","keydown"],kI=["mouseenter","focusin"];let R_=null,LI=0;class QS{constructor(){this.callbacks=new Set,this.listener=()=>{for(const a of this.callbacks)a()}}}function XS(r,a){let l=S0.get(r);if(!l){l=new QS,S0.set(r,l);for(const h of Ax)r.addEventListener(h,l.listener,DI)}return l.callbacks.add(a),()=>{const{callbacks:h,listener:y}=l;if(h.delete(a),0===h.size){S0.delete(r);for(const S of Ax)r.removeEventListener(S,y,DI)}}}function FI(r,a){let l=WS.get(r);if(!l){l=new QS,WS.set(r,l);for(const h of kI)r.addEventListener(h,l.listener,DI)}return l.callbacks.add(a),()=>{const{callbacks:h,listener:y}=l;if(h.delete(a),0===h.size){for(const S of kI)r.removeEventListener(S,y,DI);WS.delete(r)}}}function HI(r,a,l){const h=l.get(ou);let y=w0.get(r);return R_=R_||h.runOutsideAngular(()=>new IntersectionObserver(S=>{for(const L of S)L.isIntersecting&&w0.has(L.target)&&h.run(w0.get(L.target).listener)})),y||(y=new QS,h.runOutsideAngular(()=>R_.observe(r)),w0.set(r,y),LI++),y.callbacks.add(a),()=>{w0.has(r)&&(y.callbacks.delete(a),0===y.callbacks.size&&(R_?.unobserve(r),w0.delete(r),LI--),0===LI&&(R_?.disconnect(),R_=null))}}function T0(r,a,l,h,y,S,L){const W=r[bu],oe=W.get(ou);YC({read:function ye(){if(gy(r))return;const Me=E0(r,a),et=Me[I_];if(et!==C0.Initial&&et!==Su.Placeholder)return;const Ot=function ZS(r,a,l){return null==l?r:l>=0?dA(l,r):r[a.index][Mc]??null}(r,a,h);if(!Ot)return void YC({read:ye},{injector:W});if(gy(Ot))return;const Ft=function i8(r,a){return Sp(_o+a,r)}(Ot,l),ln=y(Ft,()=>{oe.run(()=>{r!==Ot&&AE(Ot,ln),S()})},W);r!==Ot&&rC(Ot,ln),M_(L,Me,ln)}},{injector:W})}function UI(r,a){const h=a[bu].get(A0);return h.add(r),()=>h.remove(r)}let A0=(()=>{class r{constructor(){this.executingCallbacks=!1,this.idleId=null,this.current=new Set,this.deferred=new Set,this.ngZone=Tr(ou),this.requestIdleCallbackFn=(typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout).bind(globalThis),this.cancelIdleCallbackFn=(typeof requestIdleCallback<"u"?cancelIdleCallback:clearTimeout).bind(globalThis)}add(l){(this.executingCallbacks?this.deferred:this.current).add(l),null===this.idleId&&this.scheduleIdleCallback()}remove(l){const{current:h,deferred:y}=this;h.delete(l),y.delete(l),0===h.size&&0===y.size&&this.cancelIdleCallback()}scheduleIdleCallback(){const l=()=>{this.cancelIdleCallback(),this.executingCallbacks=!0;for(const h of this.current)h();if(this.current.clear(),this.executingCallbacks=!1,this.deferred.size>0){for(const h of this.deferred)this.current.add(h);this.deferred.clear(),this.scheduleIdleCallback()}};this.idleId=this.requestIdleCallbackFn(()=>this.ngZone.run(l))}cancelIdleCallback(){null!==this.idleId&&(this.cancelIdleCallbackFn(this.idleId),this.idleId=null)}ngOnDestroy(){this.cancelIdleCallback(),this.current.clear(),this.deferred.clear()}static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>new r})}}return r})();function JS(r){return(a,l)=>zI(r,a,l)}function zI(r,a,l){const y=l[bu].get(jI);return y.add(r,a),()=>y.remove(a)}let jI=(()=>{class r{constructor(){this.executingCallbacks=!1,this.timeoutId=null,this.invokeTimerAt=null,this.current=[],this.deferred=[]}add(l,h){this.addToQueue(this.executingCallbacks?this.deferred:this.current,Date.now()+l,h),this.scheduleTimer()}remove(l){const{current:h,deferred:y}=this;-1===this.removeFromQueue(h,l)&&this.removeFromQueue(y,l),0===h.length&&0===y.length&&this.clearTimeout()}addToQueue(l,h,y){let S=l.length;for(let L=0;L<l.length;L+=2)if(l[L]>h){S=L;break}De(l,S,h,y)}removeFromQueue(l,h){let y=-1;for(let S=0;S<l.length;S+=2)if(l[S+1]===h){y=S;break}return y>-1&&Ce(l,y,2),y}scheduleTimer(){const l=()=>{this.clearTimeout(),this.executingCallbacks=!0;const y=[...this.current],S=Date.now();for(let W=0;W<y.length;W+=2){const ye=y[W+1];if(!(y[W]<=S))break;ye()}let L=-1;for(let W=0;W<this.current.length&&this.current[W]<=S;W+=2)L=W+1;if(L>=0&&Ce(this.current,0,L+1),this.executingCallbacks=!1,this.deferred.length>0){for(let W=0;W<this.deferred.length;W+=2)this.addToQueue(this.current,this.deferred[W],this.deferred[W+1]);this.deferred.length=0}this.scheduleTimer()};if(this.current.length>0){const y=Date.now(),S=this.current[0];if(null===this.timeoutId||this.invokeTimerAt&&this.invokeTimerAt-S>16){this.clearTimeout();const L=Math.max(S-y,16);this.invokeTimerAt=S,this.timeoutId=setTimeout(l,L)}}}clearTimeout(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}ngOnDestroy(){this.clearTimeout(),this.current.length=0,this.deferred.length=0}static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>new r})}}return r})();const XH=new no("DEFER_BLOCK_DEPENDENCY_INTERCEPTOR"),$I=new no("");function Mx(r){return r.get($I,null,{optional:!0})?.behavior!==qS.Manual&&Ip(r)}let Ox=null;function o8(r,a,l,h){const y=r.consts;null!=l&&(a.placeholderBlockConfig=Tp(y,l)),null!=h&&(a.loadingBlockConfig=Tp(y,h)),null===Ox&&(Ox=ZH)}function a8(r,a,l,h,y,S,L,W,oe){const ye=Xn(),Me=Ha(),et=r+_o,Ot=_m(ye,Me,r,null,0,0);if(Me.firstCreatePass){Ph("NgDefer");const Fr={primaryTmplIndex:a,loadingTmplIndex:h??null,placeholderTmplIndex:y??null,errorTmplIndex:S??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:l??null,loadingState:Ql.NOT_STARTED,loadingPromise:null,providers:null};oe?.(Me,Fr,W,L),function P_(r,a,l){const h=KS(a);r.data[h]=l}(Me,et,Fr)}L4(ye[et],Ot,ye);const ln=[null,C0.Initial,null,null,null,null];!function ep(r,a,l){r[KS(a)]=l}(ye,et,ln);const cr=()=>RI(ln);M_(0,ln,()=>AE(ye,cr)),rC(ye,cr)}function s8(r){const a=Xn();if(su(a,Hl(),r)){const h=M(null);try{const y=!!r,S=yc(),W=E0(a,S)[I_];!1===y&&W===C0.Initial?N_(a,S):!0===y&&(W===C0.Initial||W===Su.Placeholder)&&tp(a,S)}finally{M(h)}}}function VI(r){const a=Xn();if(su(a,Hl(),r)){const h=M(null);try{const y=!!r,S=a[Kr],L=yc(),W=Hp(S,L);!0===y&&W.loadingState===Ql.NOT_STARTED&&tw(W,a,L)}finally{M(h)}}}function Rl(){d8(UI)}function I0(){Dx(UI)}function Px(){const r=Xn(),a=sc(),h=r[bu],y=Hp(r[Kr],a);(!Mx(h)||null===y.loadingTmplIndex)&&N_(r,a),tp(r,a)}function c8(){const r=Xn(),a=sc(),h=Hp(r[Kr],a);h.loadingState===Ql.NOT_STARTED&&Og(h,r,a)}function GI(r){d8(JS(r))}function Rx(r){Dx(JS(r))}function xx(r,a){const l=Xn(),h=sc();N_(l,h),T0(l,h,r,a,FI,()=>tp(l,h),0)}function l8(r,a){const l=Xn(),h=sc(),S=Hp(l[Kr],h);S.loadingState===Ql.NOT_STARTED&&T0(l,h,r,a,FI,()=>tw(S,l,h),1)}function qI(r,a){const l=Xn(),h=sc();N_(l,h),T0(l,h,r,a,XS,()=>tp(l,h),0)}function ew(r,a){const l=Xn(),h=sc(),S=Hp(l[Kr],h);S.loadingState===Ql.NOT_STARTED&&T0(l,h,r,a,XS,()=>tw(S,l,h),1)}function Nx(r,a){const l=Xn(),h=sc();N_(l,h),T0(l,h,r,a,HI,()=>tp(l,h),0)}function u8(r,a){const l=Xn(),h=sc(),S=Hp(l[Kr],h);S.loadingState===Ql.NOT_STARTED&&T0(l,h,r,a,HI,()=>tw(S,l,h),1)}function d8(r){const a=Xn(),l=sc();if(N_(a,l),Ip(a[bu])){const h=r(()=>tp(a,l),a);M_(0,E0(a,l),h)}}function Dx(r){const a=Xn();if(Ip(a[bu])){const l=sc(),y=Hp(a[Kr],l);y.loadingState===Ql.NOT_STARTED&&M_(1,E0(a,l),r(()=>tw(y,a,l),a))}}function x_(r,a,l,h=!1){const y=l[Ou],S=y[Kr];if(gy(y))return;const L=E0(y,a);if(Fx(L[I_],r)&&Fx(L[Mg]??-1,r)){const oe=y[bu],ye=Hp(S,a),et=h||!Ip(oe)||null===vm(ye)&&null===WC(ye,Su.Loading)&&!WC(ye,Su.Placeholder)?Lx:Ox;try{et(r,L,l,a,y)}catch(Ot){pS(y,Ot)}}}function kx(r,a,l){return r.get(OI).getOrCreateInjector(a,r,l,"")}function Lx(r,a,l,h,y){const S=function n8(r,a,l){const y=Hp(a[Kr],l);switch(r){case Su.Complete:return y.primaryTmplIndex;case Su.Loading:return y.loadingTmplIndex;case Su.Error:return y.errorTmplIndex;case Su.Placeholder:return y.placeholderTmplIndex;default:return null}}(r,y,h);if(null!==S){a[I_]=r;const L=y[Kr],oe=n_(L,S+_o),ye=0;let Me;if(rI(l,ye),r===Su.Complete){const Ft=Hp(L,h),ln=Ft.providers;ln&&ln.length>0&&(Me=function h8(r,a,l){if(r instanceof Kv){const y=r.injector,L=kx(r.parentInjector,a,l);return new Kv(y,L)}const h=r.get(oh);if(h!==r){const y=kx(h,a,l);return new Kv(r,y)}return kx(r,a,l)}(y[bu],Ft,ln))}const et=xp(l,oe.tView.ssrId),Ot=EC(y,oe,null,{dehydratedView:et,injector:Me});i0(l,Ot,ye,r0(oe,et)),wg(Ot,2)}}function ZH(r,a,l,h,y){const S=Date.now(),W=Hp(y[Kr],h);if(null===a[Fp]||a[Fp]<=S){a[Fp]=null;const oe=vm(W),ye=null!==a[qC];if(r!==Su.Loading||null===oe||ye){r>Su.Loading&&ye&&(a[qC](),a[qC]=null,a[Mg]=null),Lx(r,a,l,h,y);const Me=WC(W,r);null!==Me&&(a[Fp]=S+Me,p8(Me,a,h,l,y))}else{a[Mg]=r;const Me=p8(oe,a,h,l,y);a[qC]=Me}}else a[Mg]=r}function p8(r,a,l,h,y){return zI(r,()=>{const L=a[Mg];a[Fp]=null,a[Mg]=null,null!==L&&x_(L,l,h)},y)}function Fx(r,a){return r<a}function tw(r,a,l){a[bu]&&Mx(a[bu])&&Og(r,a,l)}function Og(r,a,l){const h=a[bu],y=a[Kr];if(r.loadingState!==Ql.NOT_STARTED)return r.loadingPromise??Promise.resolve();const S=E0(a,l),L=function NI(r,a){return n_(r,a.primaryTmplIndex+_o)}(y,r);r.loadingState=Ql.IN_PROGRESS,PI(1,S);let W=r.dependencyResolverFn;const oe=h.get(c_),ye=oe.add();return W?(r.loadingPromise=Promise.allSettled(W()).then(Me=>{let et=!1;const Ot=[],Ft=[];for(const ln of Me){if("fulfilled"!==ln.status){et=!0;break}{const cr=ln.value,Fr=da(cr)||Cu(cr);if(Fr)Ot.push(Fr);else{const Jr=el(cr);Jr&&Ft.push(Jr)}}}if(r.loadingPromise=null,oe.remove(ye),et){if(r.loadingState=Ql.FAILED,null===r.errorTmplIndex){const cr=new Mr(750,!1);pS(a,cr)}}else{r.loadingState=Ql.COMPLETE;const ln=L.tView;if(Ot.length>0){ln.directiveRegistry=YS(ln.directiveRegistry,Ot);const Fr=lr(!1,...Ot.map(Jr=>Jr.type));r.providers=Fr}Ft.length>0&&(ln.pipeRegistry=YS(ln.pipeRegistry,Ft))}}),r.loadingPromise):(r.loadingPromise=Promise.resolve().then(()=>{r.loadingPromise=null,r.loadingState=Ql.COMPLETE,oe.remove(ye)}),r.loadingPromise)}function N_(r,a){x_(Su.Placeholder,a,r[a.index])}function f8(r,a,l){r.loadingPromise.then(()=>{r.loadingState===Ql.COMPLETE?x_(Su.Complete,a,l):r.loadingState===Ql.FAILED&&x_(Su.Error,a,l)})}function tp(r,a){const l=r[Kr],h=r[a.index];if(!Mx(r[bu]))return;const S=E0(r,a),L=Hp(l,a);switch(RI(S),L.loadingState){case Ql.NOT_STARTED:x_(Su.Loading,a,h),Og(L,r,a),L.loadingState===Ql.IN_PROGRESS&&f8(L,a,h);break;case Ql.IN_PROGRESS:x_(Su.Loading,a,h),f8(L,a,h);break;case Ql.COMPLETE:x_(Su.Complete,a,h);break;case Ql.FAILED:x_(Su.Error,a,h)}}function Bs(r,a,l,h){const y=Xn();return su(y,Hl(),a)&&(Ha(),Sg(yc(),y,r,a,l,h)),Bs}function qf(r,a){let l=!1,h=kf();for(let S=1;S<a.length;S+=2)l=su(r,h++,a[S])||l;if(RE(h),!l)return Qo;let y=a[0];for(let S=1;S<a.length;S+=2)y+=go(a[S])+a[S+1];return y}function cu(r,a,l,h){return su(r,Hl(),l)?a+go(l)+h:Qo}function Ly(r,a,l,h,y,S){const W=Ig(r,kf(),l,y);return Lf(2),W?a+go(l)+h+go(y)+S:Qo}function Fy(r,a,l,h,y,S,L,W){const ye=hf(r,kf(),l,y,L);return Lf(3),ye?a+go(l)+h+go(y)+S+go(L)+W:Qo}function Pg(r,a,l,h,y,S,L,W,oe,ye){const et=xh(r,kf(),l,y,L,oe);return Lf(4),et?a+go(l)+h+go(y)+S+go(L)+W+go(oe)+ye:Qo}function Rg(r,a,l,h,y,S,L,W,oe,ye,Me,et){const Ot=kf();let Ft=xh(r,Ot,l,y,L,oe);return Ft=su(r,Ot+4,Me)||Ft,Lf(5),Ft?a+go(l)+h+go(y)+S+go(L)+W+go(oe)+ye+go(Me)+et:Qo}function np(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft){const ln=kf();let cr=xh(r,ln,l,y,L,oe);return cr=Ig(r,ln+4,Me,Ot)||cr,Lf(6),cr?a+go(l)+h+go(y)+S+go(L)+W+go(oe)+ye+go(Me)+et+go(Ot)+Ft:Qo}function D_(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr){const Fr=kf();let Jr=xh(r,Fr,l,y,L,oe);return Jr=hf(r,Fr+4,Me,Ot,ln)||Jr,Lf(7),Jr?a+go(l)+h+go(y)+S+go(L)+W+go(oe)+ye+go(Me)+et+go(Ot)+Ft+go(ln)+cr:Qo}function k_(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr){const nr=kf();let pa=xh(r,nr,l,y,L,oe);return pa=xh(r,nr+4,Me,Ot,ln,Fr)||pa,Lf(8),pa?a+go(l)+h+go(y)+S+go(L)+W+go(oe)+ye+go(Me)+et+go(Ot)+Ft+go(ln)+cr+go(Fr)+Jr:Qo}function M0(r,a,l,h,y,S){const L=Xn(),W=cu(L,a,l,h);return W!==Qo&&Sg(yc(),L,r,W,y,S),M0}function XC(r,a,l,h,y,S,L,W){const oe=Xn(),ye=Ly(oe,a,l,h,y,S);return ye!==Qo&&Sg(yc(),oe,r,ye,L,W),XC}function L_(r,a,l,h,y,S,L,W,oe,ye){const Me=Xn(),et=Fy(Me,a,l,h,y,S,L,W);return et!==Qo&&Sg(yc(),Me,r,et,oe,ye),L_}function nw(r,a,l,h,y,S,L,W,oe,ye,Me,et){const Ot=Xn(),Ft=Pg(Ot,a,l,h,y,S,L,W,oe,ye);return Ft!==Qo&&Sg(yc(),Ot,r,Ft,Me,et),nw}function rw(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft){const ln=Xn(),cr=Rg(ln,a,l,h,y,S,L,W,oe,ye,Me,et);return cr!==Qo&&Sg(yc(),ln,r,cr,Ot,Ft),rw}function iw(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr){const Fr=Xn(),Jr=np(Fr,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft);return Jr!==Qo&&Sg(yc(),Fr,r,Jr,ln,cr),iw}function ZC(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr){const nr=Xn(),pa=D_(nr,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr);return pa!==Qo&&Sg(yc(),nr,r,pa,Fr,Jr),ZC}function ow(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr,nr,pa){const Ts=Xn(),dc=k_(Ts,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr);return dc!==Qo&&Sg(yc(),Ts,r,dc,nr,pa),ow}function aw(r,a,l,h){const y=Xn(),S=qf(y,a);return S!==Qo&&Sg(yc(),y,r,S,l,h),aw}function KI(r,a){return r<<17|a<<2}function Cm(r){return r>>17&32767}function Hx(r){return 2|r}function Hy(r){return(131068&r)>>2}function Ux(r,a){return-131069&r|a<<2}function Bx(r){return 1|r}function m8(r,a,l,h){const y=r[l+1],S=null===a;let L=h?Cm(y):Hy(y),W=!1;for(;0!==L&&(!1===W||S);){const ye=r[L+1];tU(r[L],a)&&(W=!0,r[L+1]=h?Bx(ye):Hx(ye)),L=h?Cm(ye):Hy(ye)}W&&(r[l+1]=h?Hx(y):Bx(y))}function tU(r,a){return null===r||null==a||(Array.isArray(r)?r[1]:r)===a||!(!Array.isArray(r)||"string"!=typeof a)&&Xt(r,a)>=0}const qu={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WI(r){return r.substring(qu.key,qu.keyEnd)}function _8(r){return r.substring(qu.value,qu.valueEnd)}function jx(r,a){const l=qu.textEnd;return l===a?-1:(a=qu.keyEnd=function bm(r,a,l){for(;a<l&&r.charCodeAt(a)>32;)a++;return a}(r,qu.key=a,l),O0(r,a,l))}function JC(r,a){const l=qu.textEnd;let h=qu.key=O0(r,a,l);return l===h?-1:(h=qu.keyEnd=function rU(r,a,l){let h;for(;a<l&&(45===(h=r.charCodeAt(a))||95===h||(-33&h)>=65&&(-33&h)<=90||h>=48&&h<=57);)a++;return a}(r,h,l),h=eb(r,h,l),h=qu.value=O0(r,h,l),h=qu.valueEnd=function xg(r,a,l){let h=-1,y=-1,S=-1,L=a,W=L;for(;L<l;){const oe=r.charCodeAt(L++);if(59===oe)return W;34===oe||39===oe?W=L=y8(r,oe,L,l):a===L-4&&85===S&&82===y&&76===h&&40===oe?W=L=y8(r,41,L,l):oe>32&&(W=L),S=y,y=h,h=-33&oe}return W}(r,h,l),eb(r,h,l))}function QI(r){qu.key=0,qu.keyEnd=0,qu.value=0,qu.valueEnd=0,qu.textEnd=r.length}function O0(r,a,l){for(;a<l&&r.charCodeAt(a)<=32;)a++;return a}function eb(r,a,l,h){return(a=O0(r,a,l))<l&&a++,a}function y8(r,a,l,h){let y=-1,S=l;for(;S<h;){const L=r.charCodeAt(S++);if(L==a&&92!==y)return S;y=92==L&&92===y?0:L}throw new Error}function $x(r,a,l){const h=Xn();return su(h,Hl(),a)&&Op(Ha(),yc(),h,r,a,h[ea],l,!1),$x}function cw(r,a,l,h,y){const L=y?"class":"style";IR(r,l,a.inputs[L],L,h)}function XI(r,a,l){return Ng(r,a,l,!1),XI}function P0(r,a){return Ng(r,a,null,!0),P0}function pf(r){Dg(Uy,iU,r,!1)}function iU(r,a){for(let l=function nU(r){return QI(r),JC(r,O0(r,0,qu.textEnd))}(a);l>=0;l=JC(a,l))Uy(r,WI(a),_8(a))}function lw(r){Dg(JI,Em,r,!0)}function Em(r,a){for(let l=function zx(r){return QI(r),jx(r,O0(r,0,qu.textEnd))}(a);l>=0;l=jx(a,l))nt(r,WI(a),!0)}function Ng(r,a,l,h){const y=Xn(),S=Ha(),L=Lf(2);S.firstUpdatePass&&v8(S,r,L,h),a!==Qo&&su(y,L,a)&&Di(S,S.data[Dc()],y,y[ea],r,y[L+1]=function lU(r,a){return null==r||""===r||("string"==typeof a?r+=a:"object"==typeof r&&(r=rr(u_(r)))),r}(a,l),h,L)}function Dg(r,a,l,h){const y=Ha(),S=Lf(2);y.firstUpdatePass&&v8(y,null,S,h);const L=Xn();if(l!==Qo&&su(L,S,l)){const W=y.data[Dc()];if(C8(W,h)&&!Vx(y,S)){let oe=h?W.classesWithoutHost:W.stylesWithoutHost;null!==oe&&(l=Ln(oe,l||"")),cw(y,W,L,l,h)}else!function Gx(r,a,l,h,y,S,L,W){y===Qo&&(y=Nt);let oe=0,ye=0,Me=0<y.length?y[0]:null,et=0<S.length?S[0]:null;for(;null!==Me||null!==et;){const Ot=oe<y.length?y[oe+1]:void 0,Ft=ye<S.length?S[ye+1]:void 0;let cr,ln=null;Me===et?(oe+=2,ye+=2,Ot!==Ft&&(ln=et,cr=Ft)):null===et||null!==Me&&Me<et?(oe+=2,ln=Me):(ye+=2,ln=et,cr=Ft),null!==ln&&Di(r,a,l,h,ln,cr,L,W),Me=oe<y.length?y[oe]:null,et=ye<S.length?S[ye]:null}}(y,W,L,L[ea],L[S+1],L[S+1]=function uw(r,a,l){if(null==l||""===l)return Nt;const h=[],y=u_(l);if(Array.isArray(y))for(let S=0;S<y.length;S++)r(h,y[S],!0);else if("object"==typeof y)for(const S in y)y.hasOwnProperty(S)&&r(h,S,y[S]);else"string"==typeof y&&a(h,y);return h}(r,a,l),h,S)}}function Vx(r,a){return a>=r.expandoStartIndex}function v8(r,a,l,h){const y=r.data;if(null===y[l+1]){const S=y[Dc()],L=Vx(r,l);C8(S,h)&&null===a&&!L&&(a=!1),a=function oU(r,a,l,h){const y=de(r);let S=h?a.residualClasses:a.residualStyles;if(null===y)0===(h?a.classBindings:a.styleBindings)&&(l=R0(l=ZI(null,r,a,l,h),a.attrs,h),S=null);else{const L=a.directiveStylingLast;if(-1===L||r[L]!==y)if(l=ZI(y,r,a,l,h),null===S){let oe=function aU(r,a,l){const h=l?a.classBindings:a.styleBindings;if(0!==Hy(h))return r[Cm(h)]}(r,a,h);void 0!==oe&&Array.isArray(oe)&&(oe=ZI(null,r,a,oe[1],h),oe=R0(oe,a.attrs,h),function sU(r,a,l,h){r[Cm(l?a.classBindings:a.styleBindings)]=h}(r,a,h,oe))}else S=function cU(r,a,l){let h;const y=a.directiveEnd;for(let S=1+a.directiveStylingLast;S<y;S++)h=R0(h,r[S].hostAttrs,l);return R0(h,a.attrs,l)}(r,a,h)}return void 0!==S&&(h?a.residualClasses=S:a.residualStyles=S),l}(y,S,a,h),function g8(r,a,l,h,y,S){let L=S?a.classBindings:a.styleBindings,W=Cm(L),oe=Hy(L);r[h]=l;let Me,ye=!1;if(Array.isArray(l)?(Me=l[1],(null===Me||Xt(l,Me)>0)&&(ye=!0)):Me=l,y)if(0!==oe){const Ot=Cm(r[W+1]);r[h+1]=KI(Ot,W),0!==Ot&&(r[Ot+1]=Ux(r[Ot+1],h)),r[W+1]=function JH(r,a){return 131071&r|a<<17}(r[W+1],h)}else r[h+1]=KI(W,0),0!==W&&(r[W+1]=Ux(r[W+1],h)),W=h;else r[h+1]=KI(oe,0),0===W?W=h:r[oe+1]=Ux(r[oe+1],h),oe=h;ye&&(r[h+1]=Hx(r[h+1])),m8(r,Me,h,!0),m8(r,Me,h,!1),function eU(r,a,l,h,y){const S=y?r.residualClasses:r.residualStyles;null!=S&&"string"==typeof a&&Xt(S,a)>=0&&(l[h+1]=Bx(l[h+1]))}(a,Me,r,h,S),L=KI(W,oe),S?a.classBindings=L:a.styleBindings=L}(y,S,a,l,L,h)}}function ZI(r,a,l,h,y){let S=null;const L=l.directiveEnd;let W=l.directiveStylingLast;for(-1===W?W=l.directiveStart:W++;W<L&&(S=a[W],h=R0(h,S.hostAttrs,y),S!==r);)W++;return null!==r&&(l.directiveStylingLast=W),h}function R0(r,a,l){const h=l?1:2;let y=-1;if(null!==a)for(let S=0;S<a.length;S++){const L=a[S];"number"==typeof L?y=L:y===h&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),nt(r,L,!!l||a[++S]))}return void 0===r?null:r}function Uy(r,a,l){nt(r,a,u_(l))}function JI(r,a,l){const h=String(a);""!==h&&!h.includes(" ")&&nt(r,h,l)}function Di(r,a,l,h,y,S,L,W){if(!(3&a.type))return;const oe=r.data,ye=oe[W+1],Me=function sw(r){return!(1&~r)}(ye)?By(oe,a,l,y,Hy(ye),L):void 0;eM(Me)||(eM(S)||function YI(r){return!(2&~r)}(ye)&&(S=By(oe,null,l,y,W,L)),function Bl(r,a,l,h,y){if(a)y?r.addClass(l,h):r.removeClass(l,h);else{let S=-1===h.indexOf("-")?void 0:yC.DashCase;null==y?r.removeStyle(l,h,S):("string"==typeof y&&y.endsWith("!important")&&(y=y.slice(0,-10),S|=yC.Important),r.setStyle(l,h,y,S))}}(h,L,Sp(Dc(),l),y,S))}function By(r,a,l,h,y,S){const L=null===a;let W;for(;y>0;){const oe=r[y],ye=Array.isArray(oe),Me=ye?oe[1]:oe,et=null===Me;let Ot=l[y+1];Ot===Qo&&(Ot=et?Nt:void 0);let Ft=et?ht(Ot,h):Me===h?Ot:void 0;if(ye&&!eM(Ft)&&(Ft=ht(oe,h)),eM(Ft)&&(W=Ft,L))return W;const ln=r[y+1];y=L?Cm(ln):Hy(ln)}if(null!==a){let oe=S?a.residualClasses:a.residualStyles;null!=oe&&(W=ht(oe,h))}return W}function eM(r){return void 0!==r}function C8(r,a){return!!(r.flags&(a?8:16))}function b8(r,a,l){Dg(nt,Em,cu(Xn(),r,a,l),!0)}function E8(r,a,l,h,y){Dg(nt,Em,Ly(Xn(),r,a,l,h,y),!0)}function S8(r,a,l,h,y,S,L){Dg(nt,Em,Fy(Xn(),r,a,l,h,y,S,L),!0)}function x0(r,a,l,h,y,S,L,W,oe){Dg(nt,Em,Pg(Xn(),r,a,l,h,y,S,L,W,oe),!0)}function dw(r,a,l,h,y,S,L,W,oe,ye,Me){Dg(nt,Em,Rg(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me),!0)}function dh(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot){Dg(nt,Em,np(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot),!0)}function N0(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln){Dg(nt,Em,D_(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln),!0)}function Cc(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr){Dg(nt,Em,k_(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr),!0)}function _l(r){Dg(nt,Em,qf(Xn(),r),!0)}function Nh(){return Xn()[Uo][Nc]}class w8{destroy(a){}updateValue(a,l){}swap(a,l){const h=Math.min(a,l),y=Math.max(a,l),S=this.detach(y);if(y-h>1){const L=this.detach(h);this.attach(h,S),this.attach(y,L)}else this.attach(h,S)}move(a,l){this.attach(l,this.detach(a))}}function qx(r,a,l,h,y){return r===l&&Object.is(a,h)?1:Object.is(y(r,a),y(l,h))?-1:0}function Yx(r,a,l,h){return!(void 0===a||!a.has(h)||(r.attach(l,a.get(h)),a.delete(h),0))}function Wx(r,a,l,h,y){if(Yx(r,a,h,l(h,y)))r.updateValue(h,y);else{const S=r.create(h,y);r.attach(h,S)}}function Qx(r,a,l,h){const y=new Set;for(let S=a;S<=l;S++)y.add(h(S,r.at(S)));return y}class tM{constructor(){this.kvMap=new Map,this._vMap=void 0}has(a){return this.kvMap.has(a)}delete(a){if(!this.has(a))return!1;const l=this.kvMap.get(a);return void 0!==this._vMap&&this._vMap.has(l)?(this.kvMap.set(a,this._vMap.get(l)),this._vMap.delete(l)):this.kvMap.delete(a),!0}get(a){return this.kvMap.get(a)}set(a,l){if(this.kvMap.has(a)){let h=this.kvMap.get(a);void 0===this._vMap&&(this._vMap=new Map);const y=this._vMap;for(;y.has(h);)h=y.get(h);y.set(h,l)}else this.kvMap.set(a,l)}forEach(a){for(let[l,h]of this.kvMap)if(a(h,l),void 0!==this._vMap){const y=this._vMap;for(;y.has(h);)h=y.get(h),a(h,l)}}}function pw(r,a){Ph("NgControlFlow");const l=Xn(),h=Hl(),y=l[h]!==Qo?l[h]:-1,S=-1!==y?tb(l,_o+y):void 0;if(su(l,h,r)){const W=M(null);try{if(void 0!==S&&rI(S,0),-1!==r){const oe=_o+r,ye=tb(l,oe),Me=Jx(l[Kr],oe),et=xp(ye,Me.tView.ssrId);i0(ye,EC(l,Me,a,{dehydratedView:et}),0,r0(Me,et))}}finally{M(W)}}else if(void 0!==S){const W=c4(S,0);void 0!==W&&(W[Nc]=a)}}class T8{constructor(a,l,h){this.lContainer=a,this.$implicit=l,this.$index=h}get $count(){return this.lContainer.length-Mc}}function fw(r){return r}function Xx(r,a){return a}class Zx{constructor(a,l,h){this.hasEmptyBlock=a,this.trackByFn=l,this.liveCollection=h}}function A8(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot){Ph("NgControlFlow");const Ft=Xn(),ln=Ha(),cr=void 0!==oe,Fr=Xn(),Jr=W?L.bind(Fr[Uo][Nc]):L,nr=new Zx(cr,Jr);Fr[_o+r]=nr,_m(Ft,ln,r+1,a,l,h,y,Tp(ln.consts,S)),cr&&_m(Ft,ln,r+2,oe,ye,Me,et,Tp(ln.consts,Ot))}class dU extends w8{constructor(a,l,h){super(),this.lContainer=a,this.hostLView=l,this.templateTNode=h,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Mc}at(a){return this.getLView(a)[Nc].$implicit}attach(a,l){const h=l[qd];this.needsIndexUpdate||=a!==this.length,i0(this.lContainer,l,a,r0(this.templateTNode,h))}detach(a){return this.needsIndexUpdate||=a!==this.length-1,function hU(r,a){return oS(r,a)}(this.lContainer,a)}create(a,l){const h=xp(this.lContainer,this.templateTNode.tView.ssrId),y=EC(this.hostLView,this.templateTNode,new T8(this.lContainer,l,a),{dehydratedView:h});return this.operationsCounter?.recordCreate(),y}destroy(a){CC(a[Kr],a),this.operationsCounter?.recordDestroy()}updateValue(a,l){this.getLView(a)[Nc].$implicit=l}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let a=0;a<this.length;a++)this.getLView(a)[Nc].$index=a}getLView(a){return function pU(r,a){return c4(r,a)}(this.lContainer,a)}}function I8(r){const a=M(null),l=Dc();try{const h=Xn(),y=h[Kr],S=h[l],L=l+1,W=tb(h,L);if(void 0===S.liveCollection){const ye=Jx(y,L);S.liveCollection=new dU(W,h,ye)}else S.liveCollection.reset();const oe=S.liveCollection;if(function hw(r,a,l){let h,y,S=0,L=r.length-1;if(Array.isArray(a)){let oe=a.length-1;for(;S<=L&&S<=oe;){const ye=r.at(S),Me=a[S],et=qx(S,ye,S,Me,l);if(0!==et){et<0&&r.updateValue(S,Me),S++;continue}const Ot=r.at(L),Ft=a[oe],ln=qx(L,Ot,oe,Ft,l);if(0!==ln){ln<0&&r.updateValue(L,Ft),L--,oe--;continue}const cr=l(S,ye),Fr=l(L,Ot),Jr=l(S,Me);if(Object.is(Jr,Fr)){const nr=l(oe,Ft);Object.is(nr,cr)?(r.swap(S,L),r.updateValue(L,Ft),oe--,L--):r.move(L,S),r.updateValue(S,Me),S++}else if(h??=new tM,y??=Qx(r,S,L,l),Yx(r,h,S,Jr))r.updateValue(S,Me),S++,L++;else if(y.has(Jr))h.set(cr,r.detach(S)),L--;else{const nr=r.create(S,a[S]);r.attach(S,nr),S++,L++}}for(;S<=oe;)Wx(r,h,l,S,a[S]),S++}else if(null!=a){const oe=a[Symbol.iterator]();let ye=oe.next();for(;!ye.done&&S<=L;){const Me=r.at(S),et=ye.value,Ot=qx(S,Me,S,et,l);if(0!==Ot)Ot<0&&r.updateValue(S,et),S++,ye=oe.next();else{h??=new tM,y??=Qx(r,S,L,l);const Ft=l(S,et);if(Yx(r,h,S,Ft))r.updateValue(S,et),S++,L++,ye=oe.next();else if(y.has(Ft)){const ln=l(S,Me);h.set(ln,r.detach(S)),L--}else r.attach(S,r.create(S,et)),S++,L++,ye=oe.next()}}for(;!ye.done;)Wx(r,h,l,r.length,ye.value),ye=oe.next()}for(;S<=L;)r.destroy(r.detach(L--));h?.forEach(oe=>{r.destroy(oe)})}(oe,r,S.trackByFn),oe.updateIndexes(),S.hasEmptyBlock){const ye=Hl(),Me=0===oe.length;if(su(h,ye,Me)){const et=l+2,Ot=tb(h,et);if(Me){const Ft=Jx(y,et),ln=xp(Ot,Ft.tView.ssrId);i0(Ot,EC(h,Ft,void 0,{dehydratedView:ln}),0,r0(Ft,ln))}else rI(Ot,0)}}}finally{M(a)}}function tb(r,a){return r[a]}function Jx(r,a){return n_(r,a)}function gw(r,a,l,h){const y=Xn(),S=Ha(),L=_o+r,W=y[ea],oe=S.firstCreatePass?function eN(r,a,l,h,y,S){const L=a.consts,oe=Sy(a,r,2,h,Tp(L,y));return CR(a,l,oe,Tp(L,S)),null!==oe.attrs&&gI(oe,oe.attrs,!1),null!==oe.mergedAttrs&&gI(oe,oe.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,oe),oe}(L,S,y,a,l,h):S.data[L],ye=tN(S,y,oe,W,a,r);y[L]=ye;const Me=Kh(oe);return sf(oe,!0),es(W,ye,oe),!v0(oe)&&xE()&&pm(S,y,ye,oe),0===function p2(){return aa.lFrame.elementDepthCount}()&&sh(ye,y),function Df(){aa.lFrame.elementDepthCount++}(),Me&&(dS(S,y,oe),gR(S,oe,y)),null!==h&&mR(y,oe),gw}function kg(){let r=sc();o_()?yy():(r=r.parent,sf(r,!1));const a=r;(function f2(r){return aa.skipHydrationRootTNode===r})(a)&&function iC(){aa.skipHydrationRootTNode=null}(),function ME(){aa.lFrame.elementDepthCount--}();const l=Ha();return l.firstCreatePass&&(fA(l,r),K1(r)&&l.queries.elementEnd(r)),null!=a.classesWithoutHost&&function y7(r){return!!(8&r.flags)}(a)&&cw(l,a,Xn(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function v7(r){return!!(16&r.flags)}(a)&&cw(l,a,Xn(),a.stylesWithoutHost,!1),kg}function nM(r,a,l,h){return gw(r,a,l,h),kg(),nM}let tN=(r,a,l,h,y,S)=>(s_(!0),iS(h,y,y2()));function M8(r,a,l,h,y,S){const L=a[qd],W=!L||r_()||v0(l)||Qv(L,S);if(s_(W),W)return iS(h,y,y2());const oe=Ay(L,r,a,l);return WE(L,S)&&DA(L,S,oe.nextSibling),L&&(B3(l)||e9(oe))&&bg(l)&&(function m2(r){aa.skipHydrationRootTNode=r}(l),cS(oe)),oe}function oM(r,a,l){const h=Xn(),y=Ha(),S=r+_o,L=y.firstCreatePass?function iM(r,a,l,h,y){const S=a.consts,L=Tp(S,h),W=Sy(a,r,8,"ng-container",L);return null!==L&&gI(W,L,!0),CR(a,l,W,Tp(S,y)),null!==a.queries&&a.queries.elementStart(a,W),W}(S,y,h,a,l):y.data[S];sf(L,!0);const W=nb(y,h,L,r);return h[S]=W,xE()&&pm(y,h,W,L),sh(W,h),Kh(L)&&(dS(y,h,L),gR(y,L,h)),null!=l&&mR(h,L),oM}function aM(){let r=sc();const a=Ha();return o_()?yy():(r=r.parent,sf(r,!1)),a.firstCreatePass&&(fA(a,r),K1(r)&&a.queries.elementEnd(r)),aM}function nN(r,a,l){return oM(r,a,l),aM(),nN}let nb=(r,a,l,h)=>(s_(!0),rS(a[ea],""));function fU(r,a,l,h){let y;const S=a[qd],L=!S||r_()||Qv(S,h)||v0(l);if(s_(L),L)return rS(a[ea],"");const W=Ay(S,r,a,l),oe=pL(S,h);return DA(S,h,W),y=sd(oe,W),y}function iN(){return Xn()}function oN(r,a,l){const h=Xn();return su(h,Hl(),a)&&Op(Ha(),yc(),h,r,a,h[ea],l,!0),oN}function aN(r,a,l){const h=Xn();if(su(h,Hl(),a)){const S=Ha(),L=yc();Op(S,L,h,r,a,s4(de(S.data),L,h),l,!0)}return aN}const zy=void 0;var Kf=["en",[["a","p"],["AM","PM"],zy],[["AM","PM"],zy,zy],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zy,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zy,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zy,"{1} 'at' {0}",zy],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gU(r){const l=Math.floor(Math.abs(r)),h=r.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let D0={};function sM(r,a,l){"string"!=typeof a&&(l=a,a=r[rb.LocaleId]),a=a.toLowerCase().replace(/_/g,"-"),D0[a]=r,l&&(D0[a][rb.ExtraData]=l)}function cM(r){const a=function P8(r){return r.toLowerCase().replace(/_/g,"-")}(r);let l=F_(a);if(l)return l;const h=a.split("-")[0];if(l=F_(h),l)return l;if("en"===h)return Kf;throw new Mr(701,!1)}function sN(r){return cM(r)[rb.CurrencyCode]||null}function lM(r){return cM(r)[rb.PluralCase]}function F_(r){return r in D0||(D0[r]=oc.ng&&oc.ng.common&&oc.ng.common.locales&&oc.ng.common.locales[r]),D0[r]}function O8(){D0={}}var rb=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(rb||{});const mU=["zero","one","two","few","many"],k0="en-US",uM={marker:"element"},jy={marker:"ICU"};var Up=function(r){return r[r.SHIFT=2]="SHIFT",r[r.APPEND_EAGERLY=1]="APPEND_EAGERLY",r[r.COMMENT=2]="COMMENT",r}(Up||{});let mw=k0;function x8(r){"string"==typeof r&&(mw=r.toLowerCase().replace(/_/g,"-"))}let L0=0,$y=0;function N8(r,a,l){const h=r[ea];switch(l){case Node.COMMENT_NODE:return rS(h,a);case Node.TEXT_NODE:return dR(h,a);case Node.ELEMENT_NODE:return iS(h,a,null)}}let vw=(r,a,l,h)=>(s_(!0),N8(r,l,h));function yU(r,a,l,h){const y=r[qd],S=a-_o,L=!FR()||!y||r_()||Qv(y,S);return s_(L),L?N8(r,l,h):C4(y,S)}function xu(r,a,l,h){const y=l[ea];let L,S=null;for(let W=0;W<a.length;W++){const oe=a[W];if("string"==typeof oe){const ye=a[++W];null===l[ye]&&(l[ye]=vw(l,ye,oe,Node.TEXT_NODE))}else if("number"==typeof oe)switch(1&oe){case 0:const ye=PC(oe);let Me,et;if(null===S&&(S=ye,L=WA(y,h)),ye===S?(Me=h,et=L):(Me=null,et=ac(l[ye])),null!==et){const cr=v4(oe);Ey(y,et,l[cr],Me,!1);const Jr=OC(r,cr);if(null!==Jr&&"object"==typeof Jr){const nr=c0(Jr,l);null!==nr&&xu(r,Jr.create[nr],l,l[Jr.anchorIdx])}}break;case 1:const Ft=a[++W],ln=a[++W];ER(y,Sp(oe>>>1,l),null,null,Ft,ln,null)}else switch(oe){case jy:const ye=a[++W],Me=a[++W];null===l[Me]&&sh(l[Me]=vw(l,Me,ye,Node.COMMENT_NODE),l);break;case uM:const et=a[++W],Ot=a[++W];null===l[Ot]&&sh(l[Ot]=vw(l,Ot,et,Node.ELEMENT_NODE),l)}}}function F0(r,a,l,h,y){for(let S=0;S<l.length;S++){const L=l[S],W=l[++S];if(L&y){let oe="";for(let ye=S+1;ye<=S+W;ye++){const Me=l[ye];if("string"==typeof Me)oe+=Me;else if("number"==typeof Me)if(Me<0)oe+=go(a[h-Me]);else{const et=Me>>>2;switch(3&Me){case 1:const Ot=l[++ye],Ft=l[++ye],ln=r.data[et];"string"==typeof ln?ER(a[ea],a[et],null,ln,Ot,oe,Ft):Op(r,ln,a,Ot,oe,a[ea],Ft,!1);break;case 0:const cr=a[et];null!==cr&&h_(a[ea],cr,oe);break;case 2:D8(r,OC(r,et),a,oe);break;case 3:cN(r,OC(r,et),h,a)}}}}else{const oe=l[S+1];if(oe>0&&!(3&~oe)){const Me=OC(r,oe>>>2);a[Me.currentCaseLViewIndex]<0&&cN(r,Me,h,a)}}S+=W}}function cN(r,a,l,h){let y=h[a.currentCaseLViewIndex];if(null!==y){let S=L0;y<0&&(y=h[a.currentCaseLViewIndex]=~y,S=-1),F0(r,h,a.update[y],l,S)}}function D8(r,a,l,h){const y=function CU(r,a){let l=r.cases.indexOf(a);if(-1===l)switch(r.type){case 1:{const h=function _U(r,a){const l=lM(a)(parseInt(r,10)),h=mU[l];return void 0!==h?h:"other"}(a,function dM(){return mw}());l=r.cases.indexOf(h),-1===l&&"other"!==h&&(l=r.cases.indexOf("other"));break}case 0:l=r.cases.indexOf("other")}return-1===l?null:l}(a,h);if(c0(a,l)!==y&&(H0(r,a,l),l[a.currentCaseLViewIndex]=null===y?null:~y,null!==y)){const L=l[a.anchorIdx];L&&xu(r,a.create[y],l,L),function fI(r,a,l){PS(r,a,l)}(l,a.anchorIdx,y)}}function H0(r,a,l){let h=c0(a,l);if(null!==h){const y=a.remove[h];for(let S=0;S<y.length;S++){const L=y[S];if(L>0){const W=Sp(L,l);null!==W&&sS(l[ea],W)}else H0(r,OC(r,~L),l)}}}const wu=/\ufffd(\d+):?\d*\ufffd/gi,SU=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,Sm=/\ufffd(\d+)\ufffd/,lN=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,ib="\ufffd",uN=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,dN=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,k8=/\uE500/g;function pM(r,a,l,h,y,S,L){const W=uS(r,h,1,null);let oe=W<<Up.SHIFT,ye=i_();a===ye&&(ye=null),null===ye&&(oe|=Up.APPEND_EAGERLY),L&&(oe|=Up.COMMENT,function FL(r){void 0===qA&&(qA=r())}(Pp)),y.push(oe,null===S?"":S);const Me=lS(r,W,L?32:1,null===S?"":S,null);_4(l,Me);const et=Me.index;return sf(Me,!1),null!==ye&&a!==ye&&function AS(r,a){let l=r.insertBeforeIndex;null===l?(GL(xR,TS),l=r.insertBeforeIndex=[null,a]):(function vd(r,a,l){r!=a&&To(l,r,a,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(a))}(ye,et),Me}function L8(r,a,l,h,y,S,L,W){const oe=W.match(wu),Me=pM(a,l,h,L,y,oe?null:W,!1).index;oe&&Vy(S,W,Me,null,0,null),r.push({kind:0,index:Me})}function Vy(r,a,l,h,y,S){const L=r.length,W=L+1;r.push(null,null);const oe=L+2,ye=a.split(wu);let Me=0;for(let et=0;et<ye.length;et++){const Ot=ye[et];if(1&et){const Ft=y+parseInt(Ot,10);r.push(-1-Ft),Me|=fM(Ft)}else""!==Ot&&r.push(Ot)}return r.push(l<<2|(h?1:0)),h&&r.push(h,S),r[L]=Me,r[W]=r.length-oe,Me}function wU(r){let a=0;for(let l=0;l<r.length;l++){const h=r[l];"number"==typeof h&&h<0&&a++}return a}function fM(r){return 1<<Math.min(r,31)}function H8(r){let a,S,l="",h=0,y=!1;for(;null!==(a=uN.exec(r));)y?a[0]===`${ib}/*${S}${ib}`&&(h=a.index,y=!1):(l+=r.substring(h,a.index+a[0].length),S=a[1],y=!0);return l+=r.slice(h),l}function pN(r,a,l,h,y,S,L){let W=0;const oe={type:S.type,currentCaseLViewIndex:uS(a,l,1,null),anchorIdx:L,cases:[],create:[],remove:[],update:[]};(function B8(r,a,l){r.push(fM(a.mainBinding),2,-1-a.mainBinding,l<<2|2)})(h,S,L),function RH(r,a,l){const h=r.data[a];null===h?r.data[a]=l:h.value=l}(a,L,oe);const ye=S.values,Me=[];for(let et=0;et<ye.length;et++){const Ot=ye[et],Ft=[];for(let cr=0;cr<Ot.length;cr++){const Fr=Ot[cr];if("string"!=typeof Fr){const Jr=Ft.push(Fr)-1;Ot[cr]=`\x3c!--\ufffd${Jr}\ufffd--\x3e`}}const ln=[];Me.push(ln),W=fN(ln,a,oe,l,h,y,S.cases[et],Ot.join(""),Ft)|W}W&&function z8(r,a,l){r.push(a,1,l<<2|3)}(h,W,L),r.push({kind:3,index:L,cases:Me,currentCaseLViewIndex:oe.currentCaseLViewIndex})}function TU(r){const a=[],l=[];let h=1,y=0;const S=mM(r=r.replace(lN,function(L,W,oe){return h="select"===oe?0:1,y=parseInt(W.slice(1),10),""}));for(let L=0;L<S.length;){let W=S[L++].trim();1===h&&(W=W.replace(/\s*(?:=)?(\w+)\s*/,"$1")),W.length&&a.push(W);const oe=mM(S[L++]);a.length>l.length&&l.push(oe)}return{type:h,mainBinding:y,cases:a,values:l}}function mM(r){if(!r)return[];let a=0;const l=[],h=[],y=/[{}]/g;let S;for(y.lastIndex=0;S=y.exec(r);){const W=S.index;if("}"==S[0]){if(l.pop(),0==l.length){const oe=r.substring(a,W);lN.test(oe)?h.push(TU(oe)):h.push(oe),a=W+1}}else{if(0==l.length){const oe=r.substring(a,W);h.push(oe),a=W+1}l.push("{")}}const L=r.substring(a);return h.push(L),h}function fN(r,a,l,h,y,S,L,W,oe){const ye=[],Me=[],et=[];l.cases.push(L),l.create.push(ye),l.remove.push(Me),l.update.push(et);const Ft=TL(Wv()).getInertBodyElement(W),ln=zA(Ft)||Ft;return ln?ob(r,a,l,h,y,ye,Me,et,ln,S,oe,0):0}function ob(r,a,l,h,y,S,L,W,oe,ye,Me,et){let Ot=0,Ft=oe.firstChild;for(;Ft;){const ln=uS(a,h,1,null);switch(Ft.nodeType){case Node.ELEMENT_NODE:const cr=Ft,Fr=cr.tagName.toLowerCase();if(J2.hasOwnProperty(Fr)){mN(S,uM,Fr,ye,ln),a.data[ln]=Fr;const Ts=cr.attributes;for(let Au=0;Au<Ts.length;Au++){const kh=Ts.item(Au),gv=kh.name.toLowerCase();kh.value.match(wu)?PL.hasOwnProperty(gv)&&Vy(W,kh.value,ln,kh.name,0,UA[gv]?HA:null):j8(S,ln,kh)}const dc={kind:1,index:ln,children:[]};r.push(dc),Ot=ob(dc.children,a,l,h,y,S,L,W,Ft,ln,Me,et+1)|Ot,gN(L,ln,et)}break;case Node.TEXT_NODE:const Jr=Ft.textContent||"",nr=Jr.match(wu);mN(S,null,nr?"":Jr,ye,ln),gN(L,ln,et),nr&&(Ot=Vy(W,Jr,ln,null,0,null)|Ot),r.push({kind:0,index:ln});break;case Node.COMMENT_NODE:const pa=Sm.exec(Ft.textContent||"");if(pa){const dc=Me[parseInt(pa[1],10)];mN(S,jy,"",ye,ln),pN(r,a,h,y,ye,dc,ln),U8(L,ln,et)}}Ft=Ft.nextSibling}return Ot}function gN(r,a,l){0===l&&r.push(a)}function U8(r,a,l){0===l&&(r.push(~a),r.push(a))}function mN(r,a,l,h,y){null!==a&&r.push(a),r.push(l,y,function NH(r,a,l){return r|a<<17|l<<1}(0,h,y))}function j8(r,a,l){r.push(a<<1|1,l.name,l.value)}const $8=0,AU=/\[(\ufffd.+?\ufffd?)\]/,Gy=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,IU=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,ab=/{([A-Z0-9_]+)}/g,_N=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,bw=/\/\*/,MU=/\d+\:(\d+)/;function yN(r,a,l=-1){const h=Ha(),y=Xn(),S=_o+r,L=Tp(h.consts,a),W=i_();h.firstCreatePass&&function hM(r,a,l,h,y,S){const L=i_(),W=[],oe=[],ye=[[]],Me=[[]];y=function gM(r,a){if(IS(a))return H8(r);{const l=r.indexOf(`:${a}${ib}`)+2+a.toString().length,h=r.search(new RegExp(`${ib}\\/\\*\\d+:${a}${ib}`));return H8(r.substring(l,h))}}(y,S);const et=function hN(r){return r.replace(k8," ")}(y).split(dN);for(let Ot=0;Ot<et.length;Ot++){let Ft=et[Ot];if(1&Ot){const ln=47===Ft.charCodeAt(0),cr=Ft.charCodeAt(ln?1:0),Fr=_o+Number.parseInt(Ft.substring(ln?2:1));if(ln)ye.shift(),Me.shift(),sf(i_(),!1);else{const Jr=xH(r,ye[0],Fr);ye.unshift([]),sf(Jr,!0);const nr={kind:2,index:Fr,children:[],type:35===cr?0:1};Me[0].push(nr),Me.unshift(nr.children)}}else{const ln=mM(Ft);for(let cr=0;cr<ln.length;cr++){let Fr=ln[cr];if(1&cr){const Jr=Fr;if("object"!=typeof Jr)throw new Error(`Unable to parse ICU expression in "${y}" message.`);const pa=pM(r,L,ye[0],l,W,"",!0).index;pN(Me[0],r,l,oe,a,Jr,pa)}else""!==Fr&&L8(Me[0],r,L,ye[0],W,oe,l,Fr)}}}r.data[h]={create:W,update:oe,ast:Me[0],parentTNodeIndex:a}}(h,null===W?0:W.index,y,S,L,l),2===h.type?y[Uo][Ao]|=32:y[Ao]|=32;const oe=h.data[S],Me=n0(h,W===y[Us]?null:W,y),et=W&&8&W.type?y[W.index]:null;(function hI(r,a,l,h){fm(r,a,l,h)})(y,S,W,l),function Yf(r,a,l,h){const y=r[ea];for(let S=0;S<a.length;S++){const L=a[S++],ye=(L&Up.APPEND_EAGERLY)===Up.APPEND_EAGERLY,Me=L>>>Up.SHIFT;let et=r[Me],Ot=!1;null===et&&(et=r[Me]=vw(r,Me,a[S],(L&Up.COMMENT)===Up.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),Ot=xE()),ye&&null!==l&&Ot&&Ey(y,l,et,h,!1)}}(y,oe.create,Me,et),p(!0)}function Ew(){p(!1)}function Sw(r,a,l){yN(r,a,l),Ew()}function V8(r,a){const l=Ha(),h=Tp(l.consts,a);!function F8(r,a,l){const y=sc().index,S=[];if(r.firstCreatePass&&null===r.data[a]){for(let L=0;L<l.length;L+=2){const W=l[L],oe=l[L+1];if(""!==oe){if(SU.test(oe))throw new Error(`ICU expressions are not supported in attributes. Message: "${oe}".`);Vy(S,oe,y,W,wU(S),null)}}r.data[a]=S}}(l,r+_o,h)}function wm(r){return function _w(r){r&&(L0|=1<<Math.min($y,31)),$y++}(su(Xn(),Hl(),r)),wm}function yM(r){!function yw(r,a,l){if($y>0){const h=r.data[l];F0(r,a,Array.isArray(h)?h:h.update,kf()-$y-1,L0)}L0=0,$y=0}(Ha(),Xn(),r+_o)}function G8(r,a={}){return function _M(r,a={}){let l=r;if(AU.test(r)){const h={},y=[$8];l=l.replace(Gy,(S,L,W)=>{const oe=L||W,ye=h[oe]||[];if(ye.length||(oe.split("|").forEach(cr=>{const Fr=cr.match(MU),Jr=Fr?parseInt(Fr[1],10):$8,nr=bw.test(cr);ye.push([Jr,nr,cr])}),h[oe]=ye),!ye.length)throw new Error(`i18n postprocess: unmatched placeholder - ${oe}`);const Me=y[y.length-1];let et=0;for(let cr=0;cr<ye.length;cr++)if(ye[cr][0]===Me){et=cr;break}const[Ot,Ft,ln]=ye[et];return Ft?y.pop():Me!==Ot&&y.push(Ot),ye.splice(et,1),ln})}return Object.keys(a).length&&(l=l.replace(IU,(h,y,S,L,W,oe)=>a.hasOwnProperty(S)?`${y}${a[S]}${oe}`:h),l=l.replace(ab,(h,y)=>a.hasOwnProperty(y)?a[y]:h),l=l.replace(_N,(h,y)=>{if(a.hasOwnProperty(y)){const S=a[y];if(!S.length)throw new Error(`i18n postprocess: unmatched ICU - ${h} with key: ${y}`);return S.shift()}return h})),l}(r,a)}let vN=(r,a,l)=>{};function CN(r){vN=r}function z0(r,a,l,h){const y=Xn(),S=Ha(),L=sc();return CM(S,y,y[ea],L,r,a,h),z0}function vM(r,a){const l=sc(),h=Xn(),y=Ha();return CM(y,h,s4(de(y.data),l,h),l,r,a),vM}function CM(r,a,l,h,y,S,L){const W=Kh(h),ye=r.firstCreatePass&&AR(r),Me=a[Nc],et=a4(a);let Ot=!0;if(3&h.type||L){const cr=wd(h,a),Fr=L?L(cr):cr,Jr=et.length,nr=L?Ts=>L(ac(Ts[h.index])):h.index;let pa=null;if(!L&&W&&(pa=function OU(r,a,l,h){const y=r.cleanup;if(null!=y)for(let S=0;S<y.length-1;S+=2){const L=y[S];if(L===l&&y[S+1]===h){const W=a[Jm],oe=y[S+2];return W.length>oe?W[oe]:null}"string"==typeof L&&(S+=2)}return null}(r,a,y,h.index)),null!==pa)(pa.__ngLastListenerFn__||pa).__ngNextListenerFn__=S,pa.__ngLastListenerFn__=S,Ot=!1;else{S=EM(h,a,Me,S),vN(cr,y,S);const Ts=l.listen(Fr,y,S);et.push(S,Ts),ye&&ye.push(y,nr,Jr,Jr+1)}}else S=EM(h,a,Me,S);const Ft=h.outputs;let ln;if(Ot&&null!==Ft&&(ln=Ft[y])){const cr=ln.length;if(cr)for(let Fr=0;Fr<cr;Fr+=2){const dc=a[ln[Fr]][ln[Fr+1]].subscribe(S),Au=et.length;et.push(S,dc),ye&&ye.push(y,h.index,Au,-(Au+1))}}}function bM(r,a,l,h){const y=M(null);try{return xf(6,a,l),!1!==l(h)}catch(S){return pS(r,S),!1}finally{xf(7,a,l),M(y)}}function EM(r,a,l,h){return function y(S){if(S===Function)return h;wg(r.componentOffset>-1?iu(r.index,a):a,5);let W=bM(a,l,h,S),oe=y.__ngNextListenerFn__;for(;oe;)W=bM(a,l,oe,S)&&W,oe=oe.__ngNextListenerFn__;return W}}function q8(r=1){return function zu(r){return(aa.lFrame.contextLView=dA(r,aa.lFrame.contextLView))[Nc]}(r)}function j0(r,a){let l=null;const h=function Ih(r){const a=r.attrs;if(null!=a){const l=a.indexOf(5);if(!(1&l))return a[l+1]}return null}(r);for(let y=0;y<a.length;y++){const S=a[y];if("*"!==S){if(null===h?jd(r,S,!0):Kl(h,S))return y}else l=y}return l}function bN(r){const a=Xn()[Uo][Us];if(!a.projection){const h=a.projection=ce(r?r.length:1,null),y=h.slice();let S=a.child;for(;null!==S;){if(128!==S.type){const L=r?j0(S,r):0;null!==L&&(y[L]?y[L].projectionNext=S:h[L]=S,y[L]=S)}S=S.next}}}function SM(r,a=0,l,h,y,S){const L=Xn(),W=Ha(),oe=h?r+1:null;null!==oe&&_m(L,W,oe,h,y,S,null,l);const ye=Sy(W,_o+r,16,null,l||null);null===ye.projection&&(ye.projection=a),yy();const et=!L[qd]||r_();null===L[Uo][Us].projection[ye.projection]&&null!==oe?function RU(r,a,l){const h=_o+l,y=a.data[h],S=r[h],L=xp(S,y.tView.ssrId);i0(S,EC(r,y,void 0,{dehydratedView:L}),0,r0(y,L))}(L,W,oe):et&&32&~ye.flags&&function ZA(r,a,l){KL(a[ea],0,a,l,p_(r,l,a),$L(l.parent||a[Us],l,a))}(W,L,ye)}function wM(r,a,l){return TM(r,"",a,"",l),wM}function TM(r,a,l,h,y){const S=Xn(),L=cu(S,a,l,h);return L!==Qo&&Op(Ha(),yc(),S,r,L,S[ea],y,!1),TM}function AM(r,a,l,h,y,S,L){const W=Xn(),oe=Ly(W,a,l,h,y,S);return oe!==Qo&&Op(Ha(),yc(),W,r,oe,W[ea],L,!1),AM}function IM(r,a,l,h,y,S,L,W,oe){const ye=Xn(),Me=Fy(ye,a,l,h,y,S,L,W);return Me!==Qo&&Op(Ha(),yc(),ye,r,Me,ye[ea],oe,!1),IM}function MM(r,a,l,h,y,S,L,W,oe,ye,Me){const et=Xn(),Ot=Pg(et,a,l,h,y,S,L,W,oe,ye);return Ot!==Qo&&Op(Ha(),yc(),et,r,Ot,et[ea],Me,!1),MM}function EN(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot){const Ft=Xn(),ln=Rg(Ft,a,l,h,y,S,L,W,oe,ye,Me,et);return ln!==Qo&&Op(Ha(),yc(),Ft,r,ln,Ft[ea],Ot,!1),EN}function ww(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln){const cr=Xn(),Fr=np(cr,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft);return Fr!==Qo&&Op(Ha(),yc(),cr,r,Fr,cr[ea],ln,!1),ww}function ff(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr){const Jr=Xn(),nr=D_(Jr,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr);return nr!==Qo&&Op(Ha(),yc(),Jr,r,nr,Jr[ea],Fr,!1),ff}function sb(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr,nr){const pa=Xn(),Ts=k_(pa,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr);return Ts!==Qo&&Op(Ha(),yc(),pa,r,Ts,pa[ea],nr,!1),sb}function Tw(r,a,l){const h=Xn(),y=qf(h,a);return y!==Qo&&Op(Ha(),yc(),h,r,y,h[ea],l,!1),Tw}function qy(r,a,l,h){uh(r,a,l,h)}function K8(r,a,l){lo(r,a,l)}function SN(r){const a=Xn(),l=Ha(),h=be();He(h+1);const y=vI(l,h);if(r.dirty&&function tC(r){return!(4&~r[Ao])}(a)===!(2&~y.metadata.flags)){if(null===y.matches)r.reset([]);else{const S=B4(a,h);r.reset(S,U3),r.notifyOnChanges()}return!0}return!1}function wN(){return xy(Xn(),be())}function H_(r,a,l,h,y){ax(a,uh(r,l,h,y))}function Y8(r,a,l,h){ax(r,lo(a,l,h))}function $0(r=1){He(be()+r)}function OM(r,a,l,h){l>=r.data.length&&(r.data[l]=null,r.blueprint[l]=null),a[l]=h}function W8(r){return wp(aC(),_o+r)}function Ky(r,a,l){pf(cu(Xn(),r,a,l))}function Q8(r,a,l,h,y){pf(Ly(Xn(),r,a,l,h,y))}function TN(r,a,l,h,y,S,L){pf(Fy(Xn(),r,a,l,h,y,S,L))}function X8(r,a,l,h,y,S,L,W,oe){pf(Pg(Xn(),r,a,l,h,y,S,L,W,oe))}function AN(r,a,l,h,y,S,L,W,oe,ye,Me){pf(Rg(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me))}function Z8(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot){pf(np(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot))}function PM(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln){pf(D_(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln))}function J8(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr){pf(k_(Xn(),r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr))}function e5(r){pf(qf(Xn(),r))}function RM(r,a,l,h,y){return Ng(r,cu(Xn(),a,l,h),y,!1),RM}function Aw(r,a,l,h,y,S,L){return Ng(r,Ly(Xn(),a,l,h,y,S),L,!1),Aw}function xM(r,a,l,h,y,S,L,W,oe){return Ng(r,Fy(Xn(),a,l,h,y,S,L,W),oe,!1),xM}function IN(r,a,l,h,y,S,L,W,oe,ye,Me){return Ng(r,Pg(Xn(),a,l,h,y,S,L,W,oe,ye),Me,!1),IN}function MN(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot){return Ng(r,Rg(Xn(),a,l,h,y,S,L,W,oe,ye,Me,et),Ot,!1),MN}function ON(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln){return Ng(r,np(Xn(),a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft),ln,!1),ON}function Wf(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr){return Ng(r,D_(Xn(),a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr),Fr,!1),Wf}function PN(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr,nr){return Ng(r,k_(Xn(),a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr,Jr),nr,!1),PN}function NM(r,a,l){return Ng(r,qf(Xn(),a),l,!1),NM}function DM(r,a=""){const l=Xn(),h=Ha(),y=r+_o,S=h.firstCreatePass?Sy(h,y,1,a,null):h.data[y],L=t5(h,l,S,a,r);l[y]=L,xE()&&pm(h,l,L,S),sf(S,!1)}let t5=(r,a,l,h,y)=>(s_(!0),dR(a[ea],h));function n5(r,a,l,h,y){const S=a[qd],L=!S||r_()||v0(l)||Qv(S,y);return s_(L),L?dR(a[ea],h):Ay(S,r,a,l)}function kM(r){return Iw("",r,""),kM}function Iw(r,a,l){const h=Xn(),y=cu(h,r,a,l);return y!==Qo&&vc(h,Dc(),y),Iw}function LM(r,a,l,h,y){const S=Xn(),L=Ly(S,r,a,l,h,y);return L!==Qo&&vc(S,Dc(),L),LM}function Mw(r,a,l,h,y,S,L){const W=Xn(),oe=Fy(W,r,a,l,h,y,S,L);return oe!==Qo&&vc(W,Dc(),oe),Mw}function Ow(r,a,l,h,y,S,L,W,oe){const ye=Xn(),Me=Pg(ye,r,a,l,h,y,S,L,W,oe);return Me!==Qo&&vc(ye,Dc(),Me),Ow}function cb(r,a,l,h,y,S,L,W,oe,ye,Me){const et=Xn(),Ot=Rg(et,r,a,l,h,y,S,L,W,oe,ye,Me);return Ot!==Qo&&vc(et,Dc(),Ot),cb}function FM(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot){const Ft=Xn(),ln=np(Ft,r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot);return ln!==Qo&&vc(Ft,Dc(),ln),FM}function HM(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln){const cr=Xn(),Fr=D_(cr,r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln);return Fr!==Qo&&vc(cr,Dc(),Fr),HM}function UM(r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr){const Jr=Xn(),nr=k_(Jr,r,a,l,h,y,S,L,W,oe,ye,Me,et,Ot,Ft,ln,cr,Fr);return nr!==Qo&&vc(Jr,Dc(),nr),UM}function RN(r){const a=Xn(),l=qf(a,r);return l!==Qo&&vc(a,Dc(),l),RN}function xN(r,a,l){Ag(a)&&(a=a());const h=Xn();return su(h,Hl(),a)&&Op(Ha(),yc(),h,r,a,h[ea],l,!1),xN}function i5(r,a){const l=Ag(r);return l&&r.set(a),l}function lb(r,a){const l=Xn(),h=Ha(),y=sc();return CM(h,l,l[ea],y,r,a),lb}const o5={};function BM(r){const a=Ha(),l=Xn(),h=r+_o;return sf(Sy(a,h,128,null,null),!1),OM(a,l,h,o5),BM}function zM(r){return Ph("NgLet"),OM(Ha(),Xn(),Dc(),r),r}function NN(r){const l=wp(aC(),_o+r);if(l===o5)throw new Mr(314,!1);return l}function DN(r,a,l,h,y){if(r=or(r),Array.isArray(r))for(let S=0;S<r.length;S++)DN(r[S],a,l,h,y);else{const S=Ha(),L=Xn(),W=sc();let oe=_g(r)?r:or(r.provide);const ye=lE(r),Me=1048575&W.providerIndexes,et=W.directiveStart,Ot=W.providerIndexes>>20;if(_g(r)||!r.multi){const Ft=new DE(ye,y,bC),ln=Tm(oe,a,y?Me:Me+Ot,et);-1===ln?(CA(yA(W,L),S,oe),jM(S,r,a.length),a.push(oe),W.directiveStart++,W.directiveEnd++,y&&(W.providerIndexes+=1048576),l.push(Ft),L.push(Ft)):(l[ln]=Ft,L[ln]=Ft)}else{const Ft=Tm(oe,a,Me+Ot,et),ln=Tm(oe,a,Me,Me+Ot),Fr=ln>=0&&l[ln];if(y&&!Fr||!y&&!(Ft>=0&&l[Ft])){CA(yA(W,L),S,oe);const Jr=function xU(r,a,l,h,y){const S=new DE(r,l,bC);return S.multi=[],S.index=a,S.componentProviders=0,s5(S,y,h&&!l),S}(y?ub:U_,l.length,y,h,ye);!y&&Fr&&(l[ln].providerFactory=Jr),jM(S,r,a.length,0),a.push(oe),W.directiveStart++,W.directiveEnd++,y&&(W.providerIndexes+=1048576),l.push(Jr),L.push(Jr)}else jM(S,r,Ft>-1?Ft:ln,s5(l[y?ln:Ft],ye,!y&&h));!y&&h&&Fr&&l[ln].componentProviders++}}}function jM(r,a,l,h){const y=_g(a),S=function cy(r){return!!r.useClass}(a);if(y||S){const oe=(S?or(a.useClass):a).prototype.ngOnDestroy;if(oe){const ye=r.destroyHooks||(r.destroyHooks=[]);if(!y&&a.multi){const Me=ye.indexOf(l);-1===Me?ye.push(l,[h,oe]):ye[Me+1].push(h,oe)}else ye.push(l,oe)}}}function s5(r,a,l){return l&&r.componentProviders++,r.multi.push(a)-1}function Tm(r,a,l,h){for(let y=l;y<h;y++)if(a[y]===r)return y;return-1}function U_(r,a,l,h){return kN(this.multi,[])}function ub(r,a,l,h){const y=this.multi;let S;if(this.providerFactory){const L=this.providerFactory.componentProviders,W=lC(l,l[Kr],this.providerFactory.index,h);S=W.slice(0,L),kN(y,S);for(let oe=L;oe<W.length;oe++)S.push(W[oe])}else S=[],kN(y,S);return S}function kN(r,a){for(let l=0;l<r.length;l++)a.push((0,r[l])());return a}function Pw(r,a=[]){return l=>{l.providersResolver=(h,y)=>function a5(r,a,l){const h=Ha();if(h.firstCreatePass){const y=af(r);DN(l,h.data,h.blueprint,y,!0),DN(a,h.data,h.blueprint,y,!1)}}(h,y?y(r):r,a)}}let NU=(()=>{class r{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const h=lr(0,l.type),y=h.length>0?mm([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,y)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=as({token:r,providedIn:"environment",factory:()=>new r($o(oh))})}}return r})();function $M(r){Ph("NgStandalone"),r.getStandaloneInjector=a=>a.get(NU).getOrCreateStandaloneInjector(r)}function c5(r,a,l){const h=r.\u0275cmp;h.directiveDefs=we(a,!1),h.pipeDefs=we(l,!0)}function l5(r,a){return Xc(()=>{const l=ue(r,!0);l.declarations=db(a.declarations||Nt),l.imports=db(a.imports||Nt),l.exports=db(a.exports||Nt),a.bootstrap&&(l.bootstrap=db(a.bootstrap)),FC.registerNgModule(r,a)})}function db(r){if("function"==typeof r)return r;const a=st(r);return a.some(qo)?()=>a.map(or).map(u5):a.map(u5)}function u5(r){return VR(r)?r.ngModule:r}const Rw="__ngAsyncComponentMetadataFn__";function d5(r){return r[Rw]??null}function VM(r,a,l){const h=r;return h[Rw]=()=>Promise.all(a()).then(y=>(l(...y),h[Rw]=null,y)),h[Rw]}function xw(r,a,l,h){return Xc(()=>{const y=r;null!==a&&(y.hasOwnProperty("decorators")&&void 0!==y.decorators?y.decorators.push(...a):y.decorators=a),null!==l&&(y.ctorParameters=l),null!==h&&(y.propDecorators=y.hasOwnProperty("propDecorators")&&void 0!==y.propDecorators?{...y.propDecorators,...h}:h)})}function h5(r,a,l){const h=rd()+r,y=Xn();return y[h]===Qo?Jh(y,h,l?a.call(l):a()):Gf(y,h)}function GM(r,a,l,h){return hb(Xn(),rd(),r,a,l,h)}function p5(r,a,l,h,y){return Lg(Xn(),rd(),r,a,l,h,y)}function LN(r,a,l,h,y,S){return YM(Xn(),rd(),r,a,l,h,y,S)}function qM(r,a,l,h,y,S,L){return rl(Xn(),rd(),r,a,l,h,y,S,L)}function Nw(r,a,l,h,y,S,L,W){const oe=rd()+r,ye=Xn(),Me=xh(ye,oe,l,h,y,S);return su(ye,oe+4,L)||Me?Jh(ye,oe+5,W?a.call(W,l,h,y,S,L):a(l,h,y,S,L)):Gf(ye,oe+5)}function Dw(r,a,l,h,y,S,L,W,oe){const ye=rd()+r,Me=Xn(),et=xh(Me,ye,l,h,y,S);return Ig(Me,ye+4,L,W)||et?Jh(Me,ye+6,oe?a.call(oe,l,h,y,S,L,W):a(l,h,y,S,L,W)):Gf(Me,ye+6)}function FN(r,a,l,h,y,S,L,W,oe,ye){const Me=rd()+r,et=Xn();let Ot=xh(et,Me,l,h,y,S);return hf(et,Me+4,L,W,oe)||Ot?Jh(et,Me+7,ye?a.call(ye,l,h,y,S,L,W,oe):a(l,h,y,S,L,W,oe)):Gf(et,Me+7)}function KM(r,a,l,h,y,S,L,W,oe,ye,Me){const et=rd()+r,Ot=Xn(),Ft=xh(Ot,et,l,h,y,S);return xh(Ot,et+4,L,W,oe,ye)||Ft?Jh(Ot,et+8,Me?a.call(Me,l,h,y,S,L,W,oe,ye):a(l,h,y,S,L,W,oe,ye)):Gf(Ot,et+8)}function HN(r,a,l,h){return G0(Xn(),rd(),r,a,l,h)}function V0(r,a){const l=r[a];return l===Qo?void 0:l}function hb(r,a,l,h,y,S){const L=a+l;return su(r,L,y)?Jh(r,L+1,S?h.call(S,y):h(y)):V0(r,L+1)}function Lg(r,a,l,h,y,S,L){const W=a+l;return Ig(r,W,y,S)?Jh(r,W+2,L?h.call(L,y,S):h(y,S)):V0(r,W+2)}function YM(r,a,l,h,y,S,L,W){const oe=a+l;return hf(r,oe,y,S,L)?Jh(r,oe+3,W?h.call(W,y,S,L):h(y,S,L)):V0(r,oe+3)}function rl(r,a,l,h,y,S,L,W,oe){const ye=a+l;return xh(r,ye,y,S,L,W)?Jh(r,ye+4,oe?h.call(oe,y,S,L,W):h(y,S,L,W)):V0(r,ye+4)}function G0(r,a,l,h,y,S){let L=a+l,W=!1;for(let oe=0;oe<y.length;oe++)su(r,L++,y[oe])&&(W=!0);return W?Jh(r,L,h.apply(S,y)):V0(r,L)}function Ba(r,a){const l=Ha();let h;const y=r+_o;l.firstCreatePass?(h=function kw(r,a){if(a)for(let l=a.length-1;l>=0;l--){const h=a[l];if(r===h.name)return h}}(a,l.pipeRegistry),l.data[y]=h,h.onDestroy&&(l.destroyHooks??=[]).push(y,h.onDestroy)):h=l.data[y];const S=h.factory||(h.factory=Th(h.type)),W=Zc(bC);try{const oe=_A(!1),ye=S();return _A(oe),OM(l,Xn(),y,ye),ye}finally{Zc(W)}}function Fw(r,a,l){const h=r+_o,y=Xn(),S=wp(y,h);return K0(y,h)?hb(y,rd(),a,S.transform,l,S):S.transform(l)}function WM(r,a,l,h){const y=r+_o,S=Xn(),L=wp(S,y);return K0(S,y)?Lg(S,rd(),a,L.transform,l,h,L):L.transform(l,h)}function Qf(r,a,l,h,y){const S=r+_o,L=Xn(),W=wp(L,S);return K0(L,S)?YM(L,rd(),a,W.transform,l,h,y,W):W.transform(l,h,y)}function B_(r,a,l,h,y,S){const L=r+_o,W=Xn(),oe=wp(W,L);return K0(W,L)?rl(W,rd(),a,oe.transform,l,h,y,S,oe):oe.transform(l,h,y,S)}function q0(r,a,l){const h=r+_o,y=Xn(),S=wp(y,h);return K0(y,h)?G0(y,rd(),a,S.transform,l,S):S.transform.apply(S,l)}function K0(r,a){return r[Kr].data[a].pure}function QM(r,a){return oI(r,a)}function XM(r,a){return()=>{try{return FC.getComponentDependencies(r,a).dependencies}catch(l){throw console.error(`Computing dependencies in local compilation mode for the component "${r.name}" failed with the exception:`,l),l}}}function UN(r,a){const l=da(r);null!==l&&(l.debugInfo=a)}const hh={\u0275\u0275attribute:Bs,\u0275\u0275attributeInterpolate1:M0,\u0275\u0275attributeInterpolate2:XC,\u0275\u0275attributeInterpolate3:L_,\u0275\u0275attributeInterpolate4:nw,\u0275\u0275attributeInterpolate5:rw,\u0275\u0275attributeInterpolate6:iw,\u0275\u0275attributeInterpolate7:ZC,\u0275\u0275attributeInterpolate8:ow,\u0275\u0275attributeInterpolateV:aw,\u0275\u0275defineComponent:im,\u0275\u0275defineDirective:mg,\u0275\u0275defineInjectable:as,\u0275\u0275defineInjector:nu,\u0275\u0275defineNgModule:vp,\u0275\u0275definePipe:om,\u0275\u0275directiveInject:bC,\u0275\u0275getInheritedFactory:A7,\u0275\u0275inject:$o,\u0275\u0275injectAttribute:FE,\u0275\u0275invalidFactory:ZL,\u0275\u0275invalidFactoryDep:Xa,\u0275\u0275templateRefExtractor:QM,\u0275\u0275resetView:oC,\u0275\u0275HostDirectivesFeature:jC,\u0275\u0275NgOnChangesFeature:CE,\u0275\u0275ProvidersFeature:Pw,\u0275\u0275CopyDefinitionFeature:px,\u0275\u0275InheritDefinitionFeature:BC,\u0275\u0275InputTransformsFeature:w_,\u0275\u0275StandaloneFeature:$M,\u0275\u0275nextContext:q8,\u0275\u0275namespaceHTML:u3,\u0275\u0275namespaceMathML:qv,\u0275\u0275namespaceSVG:vy,\u0275\u0275enableBindings:g2,\u0275\u0275disableBindings:Ru,\u0275\u0275elementStart:gw,\u0275\u0275elementEnd:kg,\u0275\u0275element:nM,\u0275\u0275elementContainerStart:oM,\u0275\u0275elementContainerEnd:aM,\u0275\u0275elementContainer:nN,\u0275\u0275pureFunction0:h5,\u0275\u0275pureFunction1:GM,\u0275\u0275pureFunction2:p5,\u0275\u0275pureFunction3:LN,\u0275\u0275pureFunction4:qM,\u0275\u0275pureFunction5:Nw,\u0275\u0275pureFunction6:Dw,\u0275\u0275pureFunction7:FN,\u0275\u0275pureFunction8:KM,\u0275\u0275pureFunctionV:HN,\u0275\u0275getCurrentView:iN,\u0275\u0275restoreView:OE,\u0275\u0275listener:z0,\u0275\u0275projection:SM,\u0275\u0275syntheticHostProperty:aN,\u0275\u0275syntheticHostListener:vM,\u0275\u0275pipeBind1:Fw,\u0275\u0275pipeBind2:WM,\u0275\u0275pipeBind3:Qf,\u0275\u0275pipeBind4:B_,\u0275\u0275pipeBindV:q0,\u0275\u0275projectionDef:bN,\u0275\u0275hostProperty:oN,\u0275\u0275property:$x,\u0275\u0275propertyInterpolate:wM,\u0275\u0275propertyInterpolate1:TM,\u0275\u0275propertyInterpolate2:AM,\u0275\u0275propertyInterpolate3:IM,\u0275\u0275propertyInterpolate4:MM,\u0275\u0275propertyInterpolate5:EN,\u0275\u0275propertyInterpolate6:ww,\u0275\u0275propertyInterpolate7:ff,\u0275\u0275propertyInterpolate8:sb,\u0275\u0275propertyInterpolateV:Tw,\u0275\u0275pipe:Ba,\u0275\u0275queryRefresh:SN,\u0275\u0275queryAdvance:$0,\u0275\u0275viewQuery:K8,\u0275\u0275viewQuerySignal:Y8,\u0275\u0275loadQuery:wN,\u0275\u0275contentQuery:qy,\u0275\u0275contentQuerySignal:H_,\u0275\u0275reference:W8,\u0275\u0275classMap:lw,\u0275\u0275classMapInterpolate1:b8,\u0275\u0275classMapInterpolate2:E8,\u0275\u0275classMapInterpolate3:S8,\u0275\u0275classMapInterpolate4:x0,\u0275\u0275classMapInterpolate5:dw,\u0275\u0275classMapInterpolate6:dh,\u0275\u0275classMapInterpolate7:N0,\u0275\u0275classMapInterpolate8:Cc,\u0275\u0275classMapInterpolateV:_l,\u0275\u0275styleMap:pf,\u0275\u0275styleMapInterpolate1:Ky,\u0275\u0275styleMapInterpolate2:Q8,\u0275\u0275styleMapInterpolate3:TN,\u0275\u0275styleMapInterpolate4:X8,\u0275\u0275styleMapInterpolate5:AN,\u0275\u0275styleMapInterpolate6:Z8,\u0275\u0275styleMapInterpolate7:PM,\u0275\u0275styleMapInterpolate8:J8,\u0275\u0275styleMapInterpolateV:e5,\u0275\u0275styleProp:XI,\u0275\u0275stylePropInterpolate1:RM,\u0275\u0275stylePropInterpolate2:Aw,\u0275\u0275stylePropInterpolate3:xM,\u0275\u0275stylePropInterpolate4:IN,\u0275\u0275stylePropInterpolate5:MN,\u0275\u0275stylePropInterpolate6:ON,\u0275\u0275stylePropInterpolate7:Wf,\u0275\u0275stylePropInterpolate8:PN,\u0275\u0275stylePropInterpolateV:NM,\u0275\u0275classProp:P0,\u0275\u0275advance:QL,\u0275\u0275template:GS,\u0275\u0275conditional:pw,\u0275\u0275defer:a8,\u0275\u0275deferWhen:s8,\u0275\u0275deferOnIdle:Rl,\u0275\u0275deferOnImmediate:Px,\u0275\u0275deferOnTimer:GI,\u0275\u0275deferOnHover:xx,\u0275\u0275deferOnInteraction:qI,\u0275\u0275deferOnViewport:Nx,\u0275\u0275deferPrefetchWhen:VI,\u0275\u0275deferPrefetchOnIdle:I0,\u0275\u0275deferPrefetchOnImmediate:c8,\u0275\u0275deferPrefetchOnTimer:Rx,\u0275\u0275deferPrefetchOnHover:l8,\u0275\u0275deferPrefetchOnInteraction:ew,\u0275\u0275deferPrefetchOnViewport:u8,\u0275\u0275deferEnableTimerScheduling:o8,\u0275\u0275repeater:I8,\u0275\u0275repeaterCreate:A8,\u0275\u0275repeaterTrackByIndex:fw,\u0275\u0275repeaterTrackByIdentity:Xx,\u0275\u0275componentInstance:Nh,\u0275\u0275text:DM,\u0275\u0275textInterpolate:kM,\u0275\u0275textInterpolate1:Iw,\u0275\u0275textInterpolate2:LM,\u0275\u0275textInterpolate3:Mw,\u0275\u0275textInterpolate4:Ow,\u0275\u0275textInterpolate5:cb,\u0275\u0275textInterpolate6:FM,\u0275\u0275textInterpolate7:HM,\u0275\u0275textInterpolate8:UM,\u0275\u0275textInterpolateV:RN,\u0275\u0275i18n:Sw,\u0275\u0275i18nAttributes:V8,\u0275\u0275i18nExp:wm,\u0275\u0275i18nStart:yN,\u0275\u0275i18nEnd:Ew,\u0275\u0275i18nApply:yM,\u0275\u0275i18nPostprocess:G8,\u0275\u0275resolveWindow:lR,\u0275\u0275resolveDocument:uR,\u0275\u0275resolveBody:GA,\u0275\u0275setComponentScope:c5,\u0275\u0275setNgModuleScope:l5,\u0275\u0275registerNgModuleType:hx,\u0275\u0275getComponentDepsFactory:XM,\u0275setClassDebugInfo:UN,\u0275\u0275declareLet:BM,\u0275\u0275storeLet:zM,\u0275\u0275readContextLet:NN,\u0275\u0275sanitizeHtml:tR,\u0275\u0275sanitizeStyle:nR,\u0275\u0275sanitizeResourceUrl:rR,\u0275\u0275sanitizeScript:iR,\u0275\u0275sanitizeUrl:mC,\u0275\u0275sanitizeUrlOrResourceUrl:oR,\u0275\u0275trustConstantHtml:NL,\u0275\u0275trustConstantResourceUrl:Y9,\u0275\u0275validateIframeAttribute:Ua,forwardRef:xi,resolveForwardRef:or,\u0275\u0275twoWayProperty:xN,\u0275\u0275twoWayBindingSet:i5,\u0275\u0275twoWayListener:lb};let Yy=null;function f5(){Yy=null}const rp=[];let Fg=!1;function Y0(){if(!Fg){Fg=!0;try{for(let r=rp.length-1;r>=0;r--){const{moduleType:a,ngModule:l}=rp[r];l.declarations&&l.declarations.every(Im)&&(rp.splice(r,1),nO(a,l))}}finally{Fg=!1}}}function Im(r){return Array.isArray(r)?r.every(Im):!!or(r)}function fb(r,a={}){JM(r,a),void 0!==a.id&&hx(r,a.id),function Am(r,a){rp.push({moduleType:r,ngModule:a})}(r,a)}function JM(r,a,l=!1){const h=st(a.declarations||Nt);let y=null;Object.defineProperty(r,hg,{configurable:!0,get:()=>(null===y&&(y=Ea().compileNgModule(hh,`ng:///${r.name}/\u0275mod.js`,{type:r,bootstrap:st(a.bootstrap||Nt).map(or),declarations:h.map(or),imports:st(a.imports||Nt).map(or).map(Ku),exports:st(a.exports||Nt).map(or).map(Ku),schemas:a.schemas?st(a.schemas):null,id:a.id||null}),y.schemas||(y.schemas=[])),y)});let S=null;Object.defineProperty(r,bd,{get:()=>{if(null===S){const W=Ea();S=W.compileFactory(hh,`ng:///${r.name}/\u0275fac.js`,{name:r.name,type:r,deps:EA(r),target:W.FactoryTarget.NgModule,typeArgumentCount:0})}return S},configurable:!1});let L=null;Object.defineProperty(r,tf,{get:()=>{if(null===L){const W={name:r.name,type:r,providers:a.providers||Nt,imports:[(a.imports||Nt).map(or),(a.exports||Nt).map(or)]};L=Ea().compileInjector(hh,`ng:///${r.name}/\u0275inj.js`,W)}return L},configurable:!1})}function eO(r,a){return`Unexpected "${Oa(r)}" found in the "declarations" array of the ${a}, "${Oa(r)}" is marked as standalone and can't be declared in any NgModule - did you intend to import it instead (by adding it to the "imports" array)?`}let X0=new WeakMap,gb=new WeakMap;function mb(){X0=new WeakMap,gb=new WeakMap,rp.length=0,Ke.clear()}function nO(r,a){const l=st(a.declarations||Nt),h=Wy(r);l.forEach(y=>{(y=or(y)).hasOwnProperty($c)?rO(da(y),h):!y.hasOwnProperty(Ls)&&!y.hasOwnProperty(pl)&&(y.ngSelectorScope=r)})}function rO(r,a){r.directiveDefs=()=>Array.from(a.compilation.directives).map(l=>l.hasOwnProperty($c)?da(l):Cu(l)).filter(l=>!!l),r.pipeDefs=()=>Array.from(a.compilation.pipes).map(l=>el(l)),r.schemas=a.schemas,r.tView=null}function Wy(r){if(Py(r)){if(LC){const a=FC.getNgModuleScope(r);return{schemas:ue(r,!0).schemas||null,...a}}return function DU(r){const a=ue(r,!0);if(null!==a.transitiveCompileScopes)return a.transitiveCompileScopes;const l={schemas:a.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return Ap(a.imports).forEach(h=>{const y=Wy(h);y.exported.directives.forEach(S=>l.compilation.directives.add(S)),y.exported.pipes.forEach(S=>l.compilation.pipes.add(S))}),Ap(a.declarations).forEach(h=>{el(h)?l.compilation.pipes.add(h):l.compilation.directives.add(h)}),Ap(a.exports).forEach(h=>{const y=h;if(Py(y)){const S=Wy(y);S.exported.directives.forEach(L=>{l.compilation.directives.add(L),l.exported.directives.add(L)}),S.exported.pipes.forEach(L=>{l.compilation.pipes.add(L),l.exported.pipes.add(L)})}else el(y)?l.exported.pipes.add(y):l.exported.directives.add(y)}),a.transitiveCompileScopes=l,l}(r)}if(q(r)){if(null!==(da(r)||Cu(r)))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set([r]),pipes:new Set}};if(null!==el(r))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set([r])}}}throw new Error(`${r.name} does not have a module def (\u0275mod property)`)}function Ku(r){return VR(r)?r.ngModule:r}let yb=0;function zN(r,a){let l=null;(function YH(r,a){wI(a)&&(p0.set(r,a),UC.add(r))})(r,a),jN(r,a),Object.defineProperty(r,$c,{get:()=>{if(null===l){const h=Ea();if(wI(a)){const ye=[`Component '${r.name}' is not resolved:`];throw a.templateUrl&&ye.push(` - templateUrl: ${a.templateUrl}`),a.styleUrls&&a.styleUrls.length&&ye.push(` - styleUrls: ${JSON.stringify(a.styleUrls)}`),a.styleUrl&&ye.push(` - styleUrl: ${a.styleUrl}`),ye.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(ye.join("\n"))}const y=function BN(){return Yy}();let S=a.preserveWhitespaces;void 0===S&&(S=null!==y&&void 0!==y.preserveWhitespaces&&y.preserveWhitespaces);let L=a.encapsulation;void 0===L&&(L=null!==y&&void 0!==y.defaultEncapsulation?y.defaultEncapsulation:yr.Emulated);const W=a.templateUrl||`ng:///${r.name}/template.html`,oe={...$N(r,a),typeSourceSpan:h.createParseSourceSpan("Component",r.name,W),template:a.template||"",preserveWhitespaces:S,styles:"string"==typeof a.styles?[a.styles]:a.styles||Nt,animations:a.animations,declarations:[],changeDetection:a.changeDetection,encapsulation:L,interpolation:a.interpolation,viewProviders:a.viewProviders||null};yb++;try{if(oe.usesInheritance&&VN(r),l=h.compileComponent(hh,W,oe),a.standalone){const ye=st(a.imports||Nt),{directiveDefs:Me,pipeDefs:et}=function kU(r,a){let l=null,h=null;return{directiveDefs:()=>{if(LC)return zf(r)?[...FC.getStandaloneComponentScope(r,a).compilation.directives].map(W=>da(W)||Cu(W)).filter(W=>null!==W):[];if(null===l){l=[da(r)];const L=new Set([r]);for(const W of a){const oe=or(W);if(!L.has(oe))if(L.add(oe),ue(oe)){const ye=Wy(oe);for(const Me of ye.exported.directives){const et=da(Me)||Cu(Me);et&&!L.has(Me)&&(L.add(Me),l.push(et))}}else{const ye=da(oe)||Cu(oe);ye&&l.push(ye)}}}return l},pipeDefs:()=>{if(LC)return zf(r)?[...FC.getStandaloneComponentScope(r,a).compilation.pipes].map(W=>el(W)).filter(W=>null!==W):[];if(null===h){h=[];const L=new Set;for(const W of a){const oe=or(W);if(!L.has(oe))if(L.add(oe),ue(oe)){const ye=Wy(oe);for(const Me of ye.exported.pipes){const et=el(Me);et&&!L.has(Me)&&(L.add(Me),h.push(et))}}else{const ye=el(oe);ye&&h.push(ye)}}}return h}}}(r,ye);l.directiveDefs=Me,l.pipeDefs=et,l.dependencies=()=>ye.map(or)}}finally{yb--}if(0===yb&&Y0(),function Z0(r){return void 0!==r.ngSelectorScope}(r)){const ye=Wy(r.ngSelectorScope);rO(l,ye)}if(a.schemas){if(!a.standalone)throw new Error(`The 'schemas' was specified for the ${Oa(r)} but is only valid on a component that is standalone.`);l.schemas=a.schemas}else a.standalone&&(l.schemas=[])}return l},configurable:!1})}function z_(r,a){let l=null;jN(r,a||{}),Object.defineProperty(r,Ls,{get:()=>{if(null===l){const h=g5(r,a||{});l=Ea().compileDirective(hh,h.sourceMapUrl,h.metadata)}return l},configurable:!1})}function g5(r,a){const l=r&&r.name,h=`ng:///${l}/\u0275dir.js`,y=Ea(),S=$N(r,a);return S.typeSourceSpan=y.createParseSourceSpan("Directive",l,h),S.usesInheritance&&VN(r),{metadata:S,sourceMapUrl:h}}function jN(r,a){let l=null;Object.defineProperty(r,bd,{get:()=>{if(null===l){const h=g5(r,a),y=Ea();l=y.compileFactory(hh,`ng:///${r.name}/\u0275fac.js`,{name:h.metadata.name,type:h.metadata.type,typeArgumentCount:0,deps:EA(r),target:y.FactoryTarget.Directive})}return l},configurable:!1})}function LU(r){return Object.getPrototypeOf(r.prototype)===Object.prototype}function $N(r,a){const l=A2(),h=l.ownPropMetadata(r);return{name:r.name,type:r,selector:void 0!==a.selector?a.selector:null,host:a.host||Vn,propMetadata:h,inputs:a.inputs||Nt,outputs:a.outputs||Nt,queries:m5(r,h,_5),lifecycle:{usesOnChanges:l.hasLifecycleHook(r,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!LU(r),exportAs:HU(a.exportAs),providers:a.providers||null,viewQueries:m5(r,h,qN),isStandalone:!!a.standalone,isSignal:!!a.signals,hostDirectives:a.hostDirectives?.map(y=>"function"==typeof y?{directive:y}:y)||null}}function VN(r){const a=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==a;)!Cu(l)&&!da(l)&&C5(l)&&z_(l,null),l=Object.getPrototypeOf(l)}function FU(r){return"string"==typeof r?v5(r):or(r)}function GN(r,a){return{propertyName:r,predicate:FU(a.selector),descendants:a.descendants,first:a.first,read:a.read?a.read:null,static:!!a.static,emitDistinctChangesOnly:!!a.emitDistinctChangesOnly,isSignal:!!a.isSignal}}function m5(r,a,l){const h=[];for(const y in a)if(a.hasOwnProperty(y)){const S=a[y];S.forEach(L=>{if(l(L)){if(!L.selector)throw new Error(`Can't construct a query for the property "${y}" of "${Oa(r)}" since the query selector wasn't defined.`);if(S.some(y5))throw new Error("Cannot combine @Input decorators with query decorators");h.push(GN(y,L))}})}return h}function HU(r){return void 0===r?null:v5(r)}function _5(r){const a=r.ngMetadataName;return"ContentChild"===a||"ContentChildren"===a}function qN(r){const a=r.ngMetadataName;return"ViewChild"===a||"ViewChildren"===a}function y5(r){return"Input"===r.ngMetadataName}function v5(r){return r.split(",").map(a=>a.trim())}const KN=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function C5(r){const a=A2();if(KN.some(h=>a.hasLifecycleHook(r,h)))return!0;const l=a.propMetadata(r);for(const h in l){const y=l[h];for(let S=0;S<y.length;S++){const L=y[S],W=L.ngMetadataName;if(y5(L)||_5(L)||qN(L)||"Output"===W||"HostBinding"===W||"HostListener"===W)return!0}}return!1}function YN(r,a){let l=null,h=null;Object.defineProperty(r,bd,{get:()=>{if(null===h){const y=b5(r,a),S=Ea();h=S.compileFactory(hh,`ng:///${y.name}/\u0275fac.js`,{name:y.name,type:y.type,typeArgumentCount:0,deps:EA(r),target:S.FactoryTarget.Pipe})}return h},configurable:!1}),Object.defineProperty(r,pl,{get:()=>{if(null===l){const y=b5(r,a);l=Ea().compilePipe(hh,`ng:///${y.name}/\u0275pipe.js`,y)}return l},configurable:!1})}function b5(r,a){return{type:r,name:r.name,pipeName:a.name,pure:void 0===a.pure||a.pure,isStandalone:!!a.standalone}}const E5=kl("Directive",(r={})=>r,void 0,void 0,(r,a)=>z_(r,a)),iO=kl("Component",(r={})=>({changeDetection:Or.Default,...r}),E5,void 0,(r,a)=>zN(r,a)),Bp=kl("Pipe",r=>({pure:!0,...r}),void 0,void 0,(r,a)=>YN(r,a)),WN=Ac("Input",r=>r?"string"==typeof r?{alias:r}:r:{}),Uw=Ac("Output",r=>({alias:r})),Qy=Ac("HostBinding",r=>({hostPropertyName:r})),Xy=Ac("HostListener",(r,a)=>({eventName:r,args:a})),S5=kl("NgModule",r=>r,void 0,void 0,(r,a)=>fb(r,a));class oO{constructor(a){this.full=a;const l=a.split(".");this.major=l[0],this.minor=l[1],this.patch=l.slice(2).join(".")}}const aO=new oO("18.2.5");let T5=(()=>{class r{log(l){console.log(l)}warn(l){console.warn(l)}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();const N5=new no(""),jw=new no("");let $w,tD=(()=>{class r{constructor(l,h,y){this._ngZone=l,this.registry=h,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,$w||(nD(y),y.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ou.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb()}});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,y){let S=-1;h&&h>0&&(S=setTimeout(()=>{this._callbacks=this._callbacks.filter(L=>L.timeoutId!==S),l()},h)),this._callbacks.push({doneCb:l,timeoutId:S,updateCb:y})}whenStable(l,h,y){if(y&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,y),this._runCallbacksIfReady()}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,y){return[]}static{this.\u0275fac=function(h){return new(h||r)($o(ou),$o(gf),$o(jw))}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac})}}return r})(),gf=(()=>{class r{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return $w?.findTestabilityInTree(this,l,h)??null}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();function nD(r){$w=r}function rD(r){return!!r&&"function"==typeof r.then}function Jy(r){return!!r&&"function"==typeof r.subscribe}const Cb=new no("");let Mm=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h}),this.appInits=Tr(Cb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const y of this.appInits){const S=y();if(rD(S))l.push(S);else if(Jy(S)){const L=new Promise((W,oe)=>{S.subscribe({complete:W,error:oe})});l.push(L)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{h()}).catch(y=>{this.reject(y)}),0===l.length&&h(),this.initialized=!0}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const lO=new no("");function ev(){!function br(r){Tn=r}(()=>{throw new Mr(600,!1)})}function n1(r){return r.isBoundToModule}class bb{constructor(a,l){this.name=a,this.token=l}}function Eb(r,a){return Array.isArray(a)?a.reduce(Eb,r):{...r,...a}}let j_,yl=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Tr(L3),this.afterRenderManager=Tr(wx),this.zonelessEnabled=Tr(Oy),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new No.B,this.afterTick=new No.B,this.componentTypes=[],this.components=[],this.isStable=Tr(c_).hasPendingTasks.pipe((0,jr.T)(l=>!l)),this._injector=Tr(oh)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let l;return new Promise(h=>{l=this.isStable.subscribe({next:y=>{y&&h()}})}).finally(()=>{l.unsubscribe()})}get injector(){return this._injector}bootstrap(l,h){const y=l instanceof DC;if(!this._injector.get(Mm).done)throw!y&&q(l),new Mr(405,!1);let L;L=y?l:this._injector.get(kC).resolveComponentFactory(l),this.componentTypes.push(L.componentType);const W=n1(L)?void 0:this._injector.get(Vf),ye=L.create(ah.NULL,[],h||L.selector,W),Me=ye.location.nativeElement,et=ye.injector.get(N5,null);return et?.registerApplication(Me),ye.onDestroy(()=>{this.detachView(ye.hostView),i1(this.components,ye),et?.unregisterApplication(Me)}),this._loadComponent(ye),ye}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Mr(101,!1);const l=M(null);try{this._runningTick=!0,this.synchronize()}catch(h){this.internalErrorHandler(h)}finally{this._runningTick=!1,M(l),this.afterTick.next()}}synchronize(){let l=null;this._injector.destroyed||(l=this._injector.get($R,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let h=0;for(;0!==this.dirtyFlags&&h++<10;)this.synchronizeOnce(l)}synchronizeOnce(l){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const h=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(h);for(let{_lView:y,notifyErrorHandler:S}of this._views)$_(y,S,h,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else l?.begin?.(),l?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:l})=>_y(l))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;i1(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const h=this._injector.get(lO,[]);[...this._bootstrapListeners,...h].forEach(y=>y(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>i1(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Mr(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function i1(r,a){const l=r.indexOf(a);l>-1&&r.splice(l,1)}function Vw(r){j_??=new WeakMap;const a=j_.get(r);if(a)return a;const l=r.isStable.pipe((0,Do.$)(h=>h)).toPromise().then(()=>{});return j_.set(r,l),r.onDestroy(()=>j_?.delete(r)),l}function $_(r,a,l,h){(l||_y(r))&&iI(r,a,l&&!h?0:1)}class nv{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Gw=(()=>{class r{compileModuleSync(l){return new _0(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),S=Ap(ue(l).declarations).reduce((L,W)=>{const oe=da(W);return oe&&L.push(new au(oe)),L},[]);return new nv(h,S)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const iD=new no("");class rv{}function jp(r,a,l){const h=new _0(l);return Promise.resolve(h)}let qw=(()=>{class r{constructor(){this.zone=Tr(ou),this.changeDetectionScheduler=Tr(Uf),this.applicationRef=Tr(yl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const oD=new no("",{factory:()=>!1});function uO({ngZoneFactory:r,ignoreChangesOutsideZone:a,scheduleInRootZone:l}){return r??=()=>new ou({...hO(),scheduleInRootZone:l}),[{provide:ou,useFactory:r},{provide:Gn,multi:!0,useFactory:()=>{const h=Tr(qw,{optional:!0});return()=>h.initialize()}},{provide:Gn,multi:!0,useFactory:()=>{const h=Tr(D5);return()=>{h.initialize()}}},!0===a?{provide:M4,useValue:!0}:[],{provide:jR,useValue:l??R3}]}function dO(r){const a=r?.ignoreChangesOutsideZone,l=r?.scheduleInRootZone,h=uO({ngZoneFactory:()=>{const y=hO(r);return y.scheduleInRootZone=l,y.shouldCoalesceEventChangeDetection&&Ph("NgZone_CoalesceEvent"),new ou(y)},ignoreChangesOutsideZone:a,scheduleInRootZone:l});return an([{provide:oD,useValue:!0},{provide:Oy,useValue:!1},h])}function hO(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}let D5=(()=>{class r{constructor(){this.subscription=new fo.yU,this.initialized=!1,this.zone=Tr(ou),this.pendingTasks=Tr(c_)}initialize(){if(this.initialized)return;this.initialized=!0;let l=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(l=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ou.assertNotInAngularZone(),queueMicrotask(()=>{null!==l&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(l),l=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ou.assertInAngularZone(),l??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),mf=(()=>{class r{constructor(){this.appRef=Tr(yl),this.taskService=Tr(c_),this.ngZone=Tr(ou),this.zonelessEnabled=Tr(Oy),this.disableScheduling=Tr(M4,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new fo.yU,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(HE):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Tr(jR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wA||!this.zoneIsDefined)}notify(l){if(!this.zonelessEnabled&&5===l)return;switch(l){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const h=this.useMicrotaskScheduler?x3:O2;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>h(()=>this.tick())):this.ngZone.runOutsideAngular(()=>h(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(HE+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const l=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(h){throw this.taskService.remove(l),h}finally{this.cleanup()}this.useMicrotaskScheduler=!0,x3(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(l)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const l=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(l)}}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function a1(){return Ph("NgZoneless"),an([{provide:Uf,useExisting:mf},{provide:ou,useClass:wA},{provide:Oy,useValue:!0},{provide:jR,useValue:!1},[]])}const V_=new no("",{providedIn:"root",factory:()=>Tr(V_,_a.Optional|_a.SkipSelf)||function _f(){return typeof $localize<"u"&&$localize.locale||k0}()}),pO=new no("",{providedIn:"root",factory:()=>"USD"}),aD=new no(""),s1=new no("");var c1=function(r){return r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Ignore=2]="Ignore",r}(c1||{});const fO=new no("");function Sb(r){return!!r.platformInjector}function wb(r){const a=Sb(r)?r.r3Injector:r.moduleRef.injector,l=a.get(ou);return l.run(()=>{Sb(r)?r.r3Injector.resolveInjectorInitializers():r.moduleRef.resolveInjectorInitializers();const h=a.get(l_,null);let y;if(l.runOutsideAngular(()=>{y=l.onError.subscribe({next:S=>{h.handleError(S)}})}),Sb(r)){const S=()=>a.destroy(),L=r.platformInjector.get(fO);L.add(S),a.onDestroy(()=>{y.unsubscribe(),L.delete(S)})}else r.moduleRef.onDestroy(()=>{i1(r.allPlatformModules,r.moduleRef),y.unsubscribe()});return function tv(r,a,l){try{const h=l();return rD(h)?h.catch(y=>{throw a.runOutsideAngular(()=>r.handleError(y)),y}):h}catch(h){throw a.runOutsideAngular(()=>r.handleError(h)),h}}(h,l,()=>{const S=a.get(Mm);return S.runInitializers(),S.donePromise.then(()=>{if(x8(a.get(V_,k0)||k0),Sb(r)){const W=a.get(yl);return void 0!==r.rootComponent&&W.bootstrap(r.rootComponent),W}return function lD(r,a){const l=r.injector.get(yl);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!r.instance.ngDoBootstrap)throw new Mr(-403,!1);r.instance.ngDoBootstrap(l)}a.push(r)}(r.moduleRef,r.allPlatformModules),r.moduleRef})})})}let Qw=(()=>{class r{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const y=h?.scheduleInRootZone,L=h?.ignoreChangesOutsideZone,W=[uO({ngZoneFactory:()=>function Y7(r="zone.js",a){return"noop"===r?new wA:"zone.js"===r?new ou(a):r}(h?.ngZone,{...hO({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}),scheduleInRootZone:y}),ignoreChangesOutsideZone:L}),{provide:Uf,useExisting:mf}],oe=function VC(r,a,l){return new m0(r,a,l,!1)}(l.moduleType,this.injector,W);return wb({moduleRef:oe,allPlatformModules:this._modules})}bootstrapModule(l,h=[]){const y=Eb({},h);return jp(0,0,l).then(S=>this.bootstrapModuleFactory(S,y))}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Mr(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(fO,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(h){return new(h||r)($o(ah))}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})(),Om=null;const Xw=new no("");function uD(r){if(Om&&!Om.get(Xw,!1))throw new Mr(400,!1);ev(),Om=r;const a=r.get(Qw);return dD(r),a}function gO(r,a,l=[]){const h=`Platform: ${a}`,y=new no(h);return(S=[])=>{let L=Jw();if(!L||L.injector.get(Xw,!1)){const W=[...l,...S,{provide:y,useValue:!0}];r?r(W):uD(Zw(W,h))}return L5()}}function Zw(r=[],a){return ah.create({name:a,providers:[{provide:Gd,useValue:"platform"},{provide:fO,useValue:new Set([()=>Om=null])},...r]})}function L5(r){const a=Jw();if(!a)throw new Mr(401,!1);return a}function Jw(){return Om?.get(Qw)??null}function F5(){Jw()?.destroy()}function dD(r){r.get(oL,null)?.forEach(l=>l())}function H5(r){return an([])}function z5(){return!1}function j5(){}function mO(r){const a=f0(r);if(!a)throw pD(r);return new _0(a)}function hD(r){const a=f0(r);if(!a)throw pD(r);return a}function pD(r){return new Error(`No module with ID ${r} loaded`)}let l1=(()=>{class r{static{this.__NG_ELEMENT_ID__=$5}}return r})();function $5(r){return function _O(r,a,l){if(bg(r)&&!l){const h=iu(r.index,a);return new wC(h,h)}return 175&r.type?new wC(a[Uo],a):null}(sc(),Xn(),!(16&~r))}class yO extends l1{}class vO extends yO{}class ZU{constructor(a,l){this.name=a,this.callback=l}}function JU(r){return r.map(a=>a.nativeElement)}class CO{constructor(a){this.nativeNode=a}get parent(){const a=this.nativeNode.parentNode;return a?new Tb(a):null}get injector(){return function tL(r){const a=Wh(r),l=a?a.lView:null;return null===l?ah.NULL:new Td(l[Kr].data[a.nodeIndex],l)}(this.nativeNode)}get componentInstance(){const a=this.nativeNode;return a&&(MA(a)||function eL(r){const a=Wh(r);let h,l=a?a.lView:null;if(null===l)return null;for(;2===l[Kr].type&&(h=Nf(l));)l=h;return 512&l[Ao]?null:l[Nc]}(a))}get context(){return MA(this.nativeNode)||function J3(r){!function m9(r){if(typeof Element<"u"&&!(r instanceof Element))throw new Error("Expecting instance of DOM Element")}(r);const a=Wh(r),l=a?a.lView:null;return null===l?null:l[Nc]}(this.nativeNode)}get listeners(){return function nL(r){const a=Wh(r),l=null===a?null:a.lView;if(null===l)return[];const y=l[Jm],S=l[Kr].cleanup,L=[];if(S&&y)for(let W=0;W<S.length;){const oe=S[W++],ye=S[W++];if("string"==typeof oe){const Me=oe,et=ac(l[ye]),Ot=y[S[W++]],Ft=S[W++];r==et&&L.push({element:r,name:Me,callback:Ot,useCapture:"boolean"==typeof Ft&&Ft,type:"boolean"==typeof Ft||Ft>=0?"dom":"output"})}}return L.sort(p9),L}(this.nativeNode).filter(a=>"dom"===a.type)}get references(){return function h9(r){const a=Wh(r);if(null===a)return{};if(void 0===a.localRefs){const l=a.lView;if(null===l)return{};a.localRefs=function c9(r,a){const l=r[Kr].data[a];if(l&&l.localNames){const h={};let y=l.index+1;for(let S=0;S<l.localNames.length;S+=2)h[l.localNames[S]]=r[y],y++;return h}return null}(l,a.nodeIndex)}return a.localRefs||{}}(this.nativeNode)}get providerTokens(){return function l9(r){const a=Wh(r),l=a?a.lView:null;if(null===l)return[];const h=l[Kr],y=h.data[a.nodeIndex],S=[],W=y.directiveEnd;for(let oe=1048575&y.providerIndexes;oe<W;oe++){let ye=h.data[oe];f9(ye)&&(ye=ye.type),S.push(ye)}return S}(this.nativeNode)}}class Tb extends CO{constructor(a){super(a)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const a=Wh(this.nativeNode),l=a?a.lView:null;return null!==l?l[Kr].data[a.nodeIndex].value:this.nativeNode.nodeName}get properties(){const a=Wh(this.nativeNode),l=a?a.lView:null;if(null===l)return{};const h=l[Kr].data,y=h[a.nodeIndex],S={};return function eB(r,a){if(r){let l=Object.getPrototypeOf(r);const h=Node.prototype;for(;null!==l&&l!==h;){const y=Object.getOwnPropertyDescriptors(l);for(let S in y)if(!S.startsWith("__")&&!S.startsWith("on")){const L=r[S];tB(L)&&(a[S]=L)}l=Object.getPrototypeOf(l)}}}(this.nativeElement,S),function nB(r,a,l,h){let y=a.propertyBindings;if(null!==y)for(let S=0;S<y.length;S++){const L=y[S],oe=h[L].split("\ufffd"),ye=oe[0];if(oe.length>1){let Me=oe[1];for(let et=1;et<oe.length-1;et++)Me+=go(l[L+et-1])+oe[et+1];r[ye]=Me}else r[ye]=l[L]}}(S,y,l,h),S}get attributes(){const a={},l=this.nativeElement;if(!l)return a;const h=Wh(l),y=h?h.lView:null;if(null===y)return{};const S=y[Kr].data[h.nodeIndex].attrs,L=[];if(S){let W=0;for(;W<S.length;){const oe=S[W];if("string"!=typeof oe)break;a[oe]=S[W+1],L.push(oe.toLowerCase()),W+=2}}for(const W of l.attributes)L.includes(W.name)||(a[W.name]=W.value);return a}get styles(){return this.nativeElement?.style??{}}get classes(){const a={},h=this.nativeElement.className;return("string"!=typeof h?h.baseVal.split(" "):h.split(" ")).forEach(S=>a[S]=!0),a}get childNodes(){const a=this.nativeNode.childNodes,l=[];for(let h=0;h<a.length;h++)l.push(Ab(a[h]));return l}get children(){const a=this.nativeElement;if(!a)return[];const l=a.children,h=[];for(let y=0;y<l.length;y++)h.push(Ab(l[y]));return h}query(a){return this.queryAll(a)[0]||null}queryAll(a){const l=[];return fD(this,a,l,!0),l}queryAllNodes(a){const l=[];return fD(this,a,l,!1),l}triggerEventHandler(a,l){const h=this.nativeNode,y=[];this.listeners.forEach(S=>{if(S.name===a){const L=S.callback;L.call(h,l),y.push(L)}}),"function"==typeof h.eventListeners&&h.eventListeners(a).forEach(S=>{if(-1!==S.toString().indexOf("__ngUnwrap__")){const L=S("__ngUnwrap__");return-1===y.indexOf(L)&&L.call(h,l)}})}}function tB(r){return"string"==typeof r||"boolean"==typeof r||"number"==typeof r||null===r}function fD(r,a,l,h){const y=Wh(r.nativeNode),S=y?y.lView:null;null!==S?u1(S[Kr].data[y.nodeIndex],S,a,l,h,r.nativeNode):gD(r.nativeNode,a,l,h)}function u1(r,a,l,h,y,S){const L=function lA(r,a){const l=null===r?-1:r.index;return-1!==l?ac(a[l]):null}(r,a);if(11&r.type){if(ip(L,l,h,y,S),bg(r)){const oe=iu(r.index,a);oe&&oe[Kr].firstChild&&u1(oe[Kr].firstChild,oe,l,h,y,S)}else r.child&&u1(r.child,a,l,h,y,S),L&&gD(L,l,h,y);const W=a[r.index];nd(W)&&V5(W,l,h,y,S)}else if(4&r.type){const W=a[r.index];ip(W[Rf],l,h,y,S),V5(W,l,h,y,S)}else if(16&r.type){const W=a[Uo],ye=W[Us].projection[r.projection];if(Array.isArray(ye))for(let Me of ye)ip(Me,l,h,y,S);else if(ye){const Me=W[Ou];u1(Me[Kr].data[ye.index],Me,l,h,y,S)}}else r.child&&u1(r.child,a,l,h,y,S);if(S!==L){const W=2&r.flags?r.projectionNext:r.next;W&&u1(W,a,l,h,y,S)}}function V5(r,a,l,h,y){for(let S=Mc;S<r.length;S++){const L=r[S],W=L[Kr].firstChild;W&&u1(W,L,a,l,h,y)}}function ip(r,a,l,h,y){if(y!==r){const S=Ab(r);if(!S)return;(h&&S instanceof Tb&&a(S)&&-1===l.indexOf(S)||!h&&a(S)&&-1===l.indexOf(S))&&l.push(S)}}function gD(r,a,l,h){const y=r.childNodes,S=y.length;for(let L=0;L<S;L++){const W=y[L],oe=Ab(W);oe&&((h&&oe instanceof Tb&&a(oe)&&-1===l.indexOf(oe)||!h&&a(oe)&&-1===l.indexOf(oe))&&l.push(oe),gD(W,a,l,h))}}const bO="__ng_debug__";function Ab(r){return r instanceof Node?(r.hasOwnProperty(bO)||(r[bO]=r.nodeType==Node.ELEMENT_NODE?new Tb(r):new CO(r)),r[bO]):null}class G5{constructor(){}supports(a){return VS(a)}create(a){return new K5(a)}}const q5=(r,a)=>a;class K5{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||q5}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,h=this._removalsHead,y=0,S=null;for(;l||h;){const L=!h||l&&l.currentIndex<_D(h,y,S)?l:h,W=_D(L,y,S),oe=L.currentIndex;if(L===h)y--,h=h._nextRemoved;else if(l=l._next,null==L.previousIndex)y++;else{S||(S=[]);const ye=W-y,Me=oe-y;if(ye!=Me){for(let Ot=0;Ot<ye;Ot++){const Ft=Ot<S.length?S[Ot]:S[Ot]=0,ln=Ft+Ot;Me<=ln&&ln<ye&&(S[Ot]=Ft+1)}S[L.previousIndex]=Me-ye}}W!==oe&&a(L,W,oe)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!VS(a))throw new Mr(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let y,S,L,l=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let W=0;W<this.length;W++)S=a[W],L=this._trackByFn(W,S),null!==l&&Object.is(l.trackById,L)?(h&&(l=this._verifyReinsertion(l,S,L,W)),Object.is(l.item,S)||this._addIdentityChange(l,S)):(l=this._mismatch(l,S,L,W),h=!0),l=l._next}else y=0,function T_(r,a){if(Array.isArray(r))for(let l=0;l<r.length;l++)a(r[l]);else{const l=r[Symbol.iterator]();let h;for(;!(h=l.next()).done;)a(h.value)}}(a,W=>{L=this._trackByFn(y,W),null!==l&&Object.is(l.trackById,L)?(h&&(l=this._verifyReinsertion(l,W,L,y)),Object.is(l.item,W)||this._addIdentityChange(l,W)):(l=this._mismatch(l,W,L,y),h=!0),l=l._next,y++}),this.length=y;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,h,y){let S;return null===a?S=this._itTail:(S=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,S,y)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,y))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,S,y)):a=this._addAfter(new iB(l,h),S,y),a}_verifyReinsertion(a,l,h,y){let S=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==S?a=this._reinsertAfter(S,a._prev,y):a.currentIndex!=y&&(a.currentIndex=y,this._addToMoves(a,y)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const y=a._prevRemoved,S=a._nextRemoved;return null===y?this._removalsHead=S:y._nextRemoved=S,null===S?this._removalsTail=y:S._prevRemoved=y,this._insertAfter(a,l,h),this._addToMoves(a,h),a}_moveAfter(a,l,h){return this._unlink(a),this._insertAfter(a,l,h),this._addToMoves(a,h),a}_addAfter(a,l,h){return this._insertAfter(a,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,h){const y=null===l?this._itHead:l._next;return a._next=y,a._prev=l,null===y?this._itTail=a:y._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new tT),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,h=a._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class iB{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oB{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const l=a._prevDup,h=a._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class tT{constructor(){this.map=new Map}put(a){const l=a.trackById;let h=this.map.get(l);h||(h=new oB,this.map.set(l,h)),h.add(a)}get(a,l){const y=this.map.get(a);return y?y.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _D(r,a,l){const h=r.previousIndex;if(null===h)return h;let y=0;return l&&h<l.length&&(y=l[h]),h+a+y}class yD{constructor(){}supports(a){return a instanceof Map||GC(a)}create(){return new Y5}}class Y5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||GC(a)))throw new Mr(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,y)=>{if(l&&l.key===y)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const S=this._getOrCreateRecordForKey(y,h);l=this._insertBeforeOrAppend(l,S)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const h=a._prev;return l._next=a,l._prev=h,a._prev=l,h&&(h._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const y=this._records.get(a);this._maybeAddToChanges(y,l);const S=y._prev,L=y._next;return S&&(S._next=L),L&&(L._prev=S),y._next=null,y._prev=null,y}const h=new W5(a);return this._records.set(a,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(h=>l(a[h],h))}}class W5{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nT(){return new iv([new G5])}let iv=(()=>{class r{static{this.\u0275prov=as({token:r,providedIn:"root",factory:nT})}constructor(l){this.factories=l}static create(l,h){if(null!=h){const y=h.factories.slice();l=l.concat(y)}return new r(l)}static extend(l){return{provide:r,useFactory:h=>r.create(l,h||nT()),deps:[[r,new td,new Iu]]}}find(l){const h=this.factories.find(y=>y.supports(l));if(null!=h)return h;throw new Mr(901,!1)}}return r})();function vD(){return new SO([new yD])}let SO=(()=>{class r{static{this.\u0275prov=as({token:r,providedIn:"root",factory:vD})}constructor(l){this.factories=l}static create(l,h){if(h){const y=h.factories.slice();l=l.concat(y)}return new r(l)}static extend(l){return{provide:r,useFactory:h=>r.create(l,h||vD()),deps:[[r,new td,new Iu]]}}find(l){const h=this.factories.find(y=>y.supports(l));if(h)return h;throw new Mr(901,!1)}}return r})();const sB=[new yD],lB=new iv([new G5]),uB=new SO(sB),Q5=gO(null,"core",[]);let dB=(()=>{class r{constructor(l){}static{this.\u0275fac=function(h){return new(h||r)($o(yl))}}static{this.\u0275mod=vp({type:r})}static{this.\u0275inj=nu({})}}return r})();function a6(r){}function s6(r){try{const{rootComponent:a,appProviders:l,platformProviders:h}=r,y=function eT(r=[]){if(Om)return Om;const a=Zw(r);return Om=a,ev(),dD(a),a}(h),S=[uO({}),{provide:Uf,useExisting:mf},...l||[]];return wb({r3Injector:new mx({providers:S,parent:y,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:y,rootComponent:a})}catch(a){return Promise.reject(a)}}function MO(r,a){const l=r[Kr];for(let h=_o;h<l.bindingStartIndex;h++)if(nd(r[h])){const y=r[h];if(h!==l.bindingStartIndex-1){const L=l.data[h],W=Hp(l,L);if(QC(W)){a.push({lContainer:y,lView:r,tNode:L,tDetails:W});continue}}for(let L=Mc;L<y.length;L++)MO(y[L],a)}else tl(r[h])&&MO(r[h],a)}function dT(r){const a=r.currentTarget?.__jsaction_fns?.get(r.type);if(a)for(const l of a)l(r)}function xb(r,a){if(!a.length)return;const l=a.reduce((y,S)=>y+S+":;",""),h=r.getAttribute(_i.JSACTION);r.setAttribute(_i.JSACTION,`${h??""}${l}`)}const OO=(r,a,l)=>{const h=r,y=h.__jsaction_fns??new Map,S=y.get(a)??[];S.push(l),y.set(a,S),h.__jsaction_fns=y},PO=r=>{r.removeAttribute(_i.JSACTION),r.__jsaction_fns=void 0},Nb=new no("",{providedIn:"root",factory:()=>({})}),c6=new no("");let ED=(()=>{class r{constructor(){this.eventContractDetails=Tr(Nb)}ngOnDestroy(){this.eventContractDetails.instance?.cleanUp()}supports(l){return ua(l)}addEventListener(l,h,y){return l.nodeType===Node.ELEMENT_NODE?(this.eventContractDetails.instance.addEvent(h),Vs(l)[h]="",OO(l,h,y)):l.addEventListener(h,y),()=>this.removeEventListener(l,h,y)}removeEventListener(l,h,y){l.nodeType===Node.ELEMENT_NODE?Vs(l)[h]=void 0:l.removeEventListener(h,y)}static{this.\u0275fac=function(h){return new(h||r)}}static{this.\u0275prov=as({token:r,factory:r.\u0275fac})}}return r})();const SD=(r,a)=>{a.get(kA,_L)||Ml(r.instance=new bs(new Dl(document.body)),new Fu(dT,!1))},hT=new Set;function wD(r){return r.get(kA,_L)&&!function l6(r){return r.get(yL,!1)}(r)}function gB(){return[{provide:kA,useFactory:()=>{let r=!0;if(Ip()){const a=Tr(PA);r=!!window._ejsas?.[a]}return r&&Ph("NgEventReplay"),r}},{provide:Gn,useValue:()=>{const r=Tr(ah);Ip(r)&&wD(r)&&CN((a,l,h)=>{OO(a,l,h),hT.add(a)})},multi:!0},{provide:lO,useFactory:()=>{if(Ip()){const r=Tr(ah),a=Tr(yl);return()=>{wD(r)&&Vw(a).then(()=>{const l=r.get(Nb);TD(l,r),hT.forEach(PO),CN(()=>{})})}}return()=>{}},multi:!0}]}const TD=(r,a)=>{const l=a.get(PA),h=window._ejsas[l],y=r.instance=new bs(new Dl(h.c));for(const W of h.et)y.addEvent(W);for(const W of h.etc)y.addEvent(W);const S=function _u(r,a=window){return function Go(r){return r?.q??[]}(a._ejsas?.[r])}(l);y.replayEarlyEventInfos(S),function Rc(r,a=window){a._ejsas&&(a._ejsas[r]=void 0)}(l),Ml(y,new Fu(dT))};class Wd{constructor(){this.views=[],this.indexByContent=new Map}add(a){const l=JSON.stringify(a);if(!this.indexByContent.has(l)){const h=this.views.length;return this.views.push(a),this.indexByContent.set(l,h),h}return this.indexByContent.get(l)}getAll(){return this.views}}let u6=0;function Yu(r){return r.ssrId||(r.ssrId="t"+u6++),r.ssrId}function d6(r,a,l){const h=[];return o0(r,a,l,h),h.length}function uv(r){const a=[];return l4(r,a),a.length}function dv(r,a){const l=r[Ic];return l&&!l.hasAttribute(pC)?xO(l,r,a):null}function hv(r,a){const l=Ep(r[Ic]),h=dv(l,a);if(null===h)return;const y=ac(l[Ic]),L=xO(y,r[Ou],a);l[ea].setAttribute(y,qE,`${h}|${L}`)}function f1(r,a){const l=r.injector,h=function DH(r){return(r=r??Tr(ah)).get(mL,!1)}(l),y=new Wd,S=new Map,L=r._views,W=l.get(kA,_L),oe={regular:new Set,capture:new Set};for(const et of L){const Ot=uL(et);if(null!==Ot){const Ft={serializedViewCollection:y,corruptedTextNodes:S,isI18nHydrationEnabled:h,i18nChildren:new Map,eventTypesToReplay:oe,shouldReplayEvents:W};nd(Ot)?hv(Ot,Ft):dv(Ot,Ft),vB(S,a)}}const ye=y.getAll();return l.get(jE).set(G2,ye),oe}function mB(r,a){const l=[];let h="";for(let y=Mc;y<r.length;y++){let L,W,oe,S=r[y];if(Uv(S)&&(S=S[_o],nd(S))){W=uv(S)+1,hv(S,a);const Me=Ep(S[Ic]);oe={[V2]:Me[Kr].ssrId,[fC]:W}}if(!oe){const Me=S[Kr];1===Me.type?(L=Me.ssrId,W=1):(L=Yu(Me),W=d6(Me,S,Me.firstChild)),oe={[V2]:L,[fC]:W,...h6(r[y],a)}}const ye=JSON.stringify(oe);if(l.length>0&&ye===h){const Me=l[l.length-1];Me[$2]??=1,Me[$2]++}else h=ye,l.push(oe)}return l}function pT(r,a,l,h){const y=a.index-_o;r[xA]??={},r[xA][y]??=S4(a,l,h)}function RO(r,a){const l="number"==typeof a?a:a.index-_o;r[GE]??=[],r[GE].includes(l)||r[GE].push(l)}function h6(r,a){const l={},h=r[Kr],y=function Wl(r,a){let l=a.i18nChildren.get(r);return void 0===l&&(l=function Xr(r){const a=new Set;function l(h){switch(a.add(h.index),h.kind){case 1:case 2:for(const y of h.children)l(y);break;case 3:for(const y of h.cases)for(const S of y)l(S)}}for(let h=_o;h<r.bindingStartIndex;h++){const y=r.data[h];if(y&&y.ast)for(const S of y.ast)l(S)}return 0===a.size?null:a}(r),a.i18nChildren.set(r,l)),l}(h,a),S=a.shouldReplayEvents?function lu(r,a,l){const h=new Map,S=r.cleanup;if(!S||!a[Jm])return h;for(let L=0;L<S.length;){const W=S[L++],oe=S[L++];if("string"!=typeof W)continue;const ye=W;if(!ua(ye))continue;ca(ye)?l.capture.add(ye):l.regular.add(ye);const Me=ac(a[oe]);L++;const et=S[L++];("boolean"==typeof et||et>=0)&&(h.has(Me)?h.get(Me).push(ye):h.set(Me,[ye]))}return h}(h,r,a.eventTypesToReplay):null;for(let L=_o;L<h.bindingStartIndex;L++){const W=h.data[L],oe=L-_o,ye=kH(r,L,a);if(ye){l[sL]??={},l[sL][oe]=ye.caseQueue;for(const Me of ye.disconnectedNodes)RO(l,Me);for(const Me of ye.disjointNodes)pT(l,h.data[Me+_o],r,y)}else if(p3(W)&&!v0(W)){if(l0(W,r)&&Tu(W)){RO(l,W);continue}if(S&&2&W.type){const Me=ac(r[L]);S.has(Me)&&xb(Me,S.get(Me))}if(Array.isArray(W.projection))for(const Me of W.projection)if(Me){if(Array.isArray(Me))throw aI(ac(r[L]));!Y1(Me)&&!zE(Me)&&(l0(Me,r)?RO(l,Me):pT(l,Me,r,y))}if(_B(l,W,r,y),nd(r[L])){const Me=W.tView;null!==Me&&(l[aL]??={},l[aL][oe]=Yu(Me));const et=r[L][Ic];if(Array.isArray(et)){const Ot=ac(et);Ot.hasAttribute(pC)||xO(Ot,et,a)}l[VE]??={},l[VE][oe]=mB(r[L],a)}else if(Array.isArray(r[L])&&!_7(W)){const Me=ac(r[L][Ic]);Me.hasAttribute(pC)||xO(Me,r[L],a)}else if(8&W.type)l[j2]??={},l[j2][oe]=d6(h,r,W.child);else if(144&W.type){let Me=W.next;for(;null!==Me&&144&Me.type;)Me=Me.next;Me&&!zE(Me)&&pT(l,Me,r,y)}else 1&W.type&&W2(a,ac(r[L]))}}return l}function _B(r,a,l,h){Y1(a)||(a.projectionNext&&a.projectionNext!==a.next&&!zE(a.projectionNext)&&pT(r,a.projectionNext,l,h),null===a.prev&&null!==a.parent&&l0(a.parent,l)&&!l0(a,l)&&pT(r,a,l,h))}function xO(r,a,l){const h=a[ea];if(function i2(r){return!(32&~r[Ao])}(a)&&!FR()||function yB(r){const a=r[Nc];return!!a?.constructor&&da(a.constructor)?.encapsulation===yr.ShadowDom}(a))return h.setAttribute(r,pC,""),null;{const y=h6(a,l),S=l.serializedViewCollection.add(y);return h.setAttribute(r,qE,S.toString()),S}}function vB(r,a){for(const[l,h]of r)l.after(a.createComment(h))}function Tu(r){let a=r;for(;null!=a;){if(bg(a))return!0;a=a.parent}return!1}let G_=!1,AD=!1;function EB(){return an([{provide:QE,useFactory:()=>{let r=!0;return Ip()&&(r=!!Tr(jE,{optional:!0})?.get(G2,null)),r&&Ph("NgHydration"),r}},{provide:Gn,useValue:()=>{uf(!1),Ip()&&Tr(QE)&&(function g6(){const r=Wv();let a;for(const l of r.body.childNodes)if(l.nodeType===Node.COMMENT_NODE&&l.textContent?.trim()===cL){a=l;break}if(!a)throw new Mr(-507,!1)}(),function f6(){G_||(G_=!0,function w9(){lL=zj}(),function rM(){tN=M8}(),function r5(){t5=n5}(),function rN(){nb=fU}(),function Cx(){ky=A_}(),function F4(){k4=QR,$f=WR}(),function m_(){I4=zR}(),function sH(){yR=aH}())}())},multi:!0},{provide:gL,useFactory:()=>Ip()&&Tr(QE)},{provide:lO,useFactory:()=>{if(Ip()&&Tr(QE)){const r=Tr(yl);return Tr(ah),()=>{(function bB(r,a){return Vw(r)})(r).then(()=>{!function BR(r){const a=r._views;for(const l of a){const h=uL(l);null!==h&&null!==h[Ic]&&(tl(h)?df(h):Rp(h))}}(r)})}}return()=>{}},multi:!0}])}function SB(){return[{provide:mL,useValue:!0},{provide:Gn,useValue:()=>{(function CB(){AD||(AD=!0,function vU(){vw=yU}(),function w4(){fm=T4}(),function UR(){PS=Hf}())})(),uf(!0),Ph("NgI18nHydration")},multi:!0}]}function wB(r=!1){return[{provide:yL,useValue:!0},{provide:Gn,useValue:()=>{const a=Tr(ah),l=a.get(Nb);r&&window.__jsaction_contract?l.instance=window.__jsaction_contract:(SD(l,a),window.__jsaction_contract=l.instance)},multi:!0},{provide:c6,useClass:ED}]}function m6(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function TB(r,a=NaN){return isNaN(parseFloat(r))||isNaN(Number(r))?a:Number(r)}function _6(r){return Ea().compileDirectiveDeclaration(hh,`ng:///${r.type.name}/\u0275fac.js`,r)}function AB(r){xw(r.type,r.decorators,r.ctorParameters??null,r.propDecorators??null)}function IB(r){VM(r.type,r.resolveDeferredDeps,(...a)=>{const l=r.resolveMetadata(...a);xw(r.type,l.decorators,l.ctorParameters,l.propDecorators)})}function MB(r){return Ea().compileComponentDeclaration(hh,`ng:///${r.type.name}/\u0275cmp.js`,r)}function y6(r){return Ea(function g1(r){switch(r){case Xm.Directive:return"directive";case Xm.Component:return"component";case Xm.Injectable:return"injectable";case Xm.Pipe:return"pipe";case Xm.NgModule:return"NgModule"}}(r.target)).compileFactoryDeclaration(hh,`ng:///${r.type.name}/\u0275fac.js`,r)}function Bg(r){return Ea().compileInjectableDeclaration(hh,`ng:///${r.type.name}/\u0275prov.js`,r)}function fT(r){return Ea().compileInjectorDeclaration(hh,`ng:///${r.type.name}/\u0275inj.js`,r)}function q_(r){return Ea().compileNgModuleDeclaration(hh,`ng:///${r.type.name}/\u0275mod.js`,r)}function K_(r){return Ea().compilePipeDeclaration(hh,`ng:///${r.type.name}/\u0275pipe.js`,r)}function fv(r,a){Ph("NgSignals");const l=On(r);return a?.equal&&(l[R].equal=a.equal),l}function Xf(r){const a=M(null);try{return r()}finally{M(a)}}const gT=new no("",{providedIn:"root",factory:()=>Tr(m1)});let m1=(()=>{class r{static{this.\u0275prov=as({token:r,providedIn:"root",factory:()=>new NO})}}return r})();class NO{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Tr(c_),this.taskId=null}scheduleEffect(a){if(this.enqueue(a),null===this.taskId){const l=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(l),this.taskId=null})}}enqueue(a){const l=a.creationZone;this.queues.has(l)||this.queues.set(l,new Set);const h=this.queues.get(l);h.has(a)||(this.queuedEffectCount++,h.add(a))}flush(){for(;this.queuedEffectCount>0;)for(const[a,l]of this.queues)null===a?this.flushQueue(l):a.run(()=>this.flushQueue(l))}flushQueue(a){for(const l of a)a.delete(l),this.queuedEffectCount--,l.run()}}class DO{constructor(a,l,h,y,S,L){this.scheduler=a,this.effectFn=l,this.creationZone=h,this.injector=S,this.watcher=function Dr(r,a,l){const h=Object.create(ei);l&&(h.consumerAllowSignalWrites=!0),h.fn=r,h.schedule=a;const y=oe=>{h.cleanupFn=oe};return h.ref={notify:()=>Le(h),run:()=>{if(null===h.fn)return;if(function Y(){return V}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(h.dirty=!1,h.hasRun&&!Bt(h))return;h.hasRun=!0;const oe=tt(h);try{h.cleanupFn(),h.cleanupFn=hr,h.fn(y)}finally{_t(h,oe)}},cleanup:()=>h.cleanupFn(),destroy:()=>function L(oe){(function S(oe){return null===oe.fn&&null===oe.schedule})(oe)||(yt(oe),oe.cleanupFn(),oe.fn=null,oe.schedule=null,oe.cleanupFn=hr)}(h),[R]:h},h.ref}(W=>this.runEffect(W),()=>this.schedule(),L),this.unregisterOnDestroy=y?.onDestroy(()=>this.destroy())}runEffect(a){try{this.effectFn(a)}catch(l){this.injector.get(l_,null,{optional:!0})?.handleError(l)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function mT(r,a){Ph("NgSignals"),!a?.injector&&uy();const l=a?.injector??Tr(ah),h=!0!==a?.manualCleanup?l.get(hC):null,y=new DO(l.get(gT),r,typeof Zone>"u"?null:Zone.current,h,l,a?.allowSignalWrites??!1),S=l.get(l1,null,{optional:!0});return S&&8&S._lView[Ao]?(S._lView[lm]??=[]).push(y.watcher.notify):y.watcher.notify(),y}function zg(r,a){const l=da(r),h=a.elementInjector||V1();return new au(l).create(h,a.projectableNodes,a.hostElement,a.environmentInjector)}function ID(r){const a=da(r);if(!a)return null;const l=new au(a);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}function MD(...r){return r.reduce((a,l)=>Object.assign(a,l,{providers:[...a.providers,...l.providers]}),{providers:[]})}},345:(it,C,w)=>{"use strict";w.r(C),w.d(C,{BrowserModule:()=>jr,By:()=>Ei,DomSanitizer:()=>Ho,EVENT_MANAGER_PLUGINS:()=>se,EventManager:()=>U,EventManagerPlugin:()=>_e,HAMMER_GESTURE_CONFIG:()=>va,HAMMER_LOADER:()=>$a,HammerGestureConfig:()=>ca,HammerModule:()=>ua,HydrationFeatureKind:()=>oo,Meta:()=>Do,REMOVE_STYLES_ON_COMPONENT_DESTROY:()=>vt,Title:()=>xs,VERSION:()=>_s,bootstrapApplication:()=>bn,createApplication:()=>Pn,disableDebugTools:()=>kr,enableDebugTools:()=>Ta,platformBrowser:()=>ra,provideClientHydration:()=>ba,provideProtractorTestingSupport:()=>ui,withEventReplay:()=>Ds,withHttpTransferCacheOptions:()=>Oc,withI18nSupport:()=>Ns,withNoHttpTransferCache:()=>Ci,\u0275BrowserDomAdapter:()=>R,\u0275BrowserGetTestability:()=>K,\u0275DomEventsPlugin:()=>Nn,\u0275DomRendererFactory2:()=>Yt,\u0275DomSanitizerImpl:()=>Aa,\u0275HammerGesturesPlugin:()=>Xo,\u0275INTERNAL_BROWSER_PLATFORM_PROVIDERS:()=>ei,\u0275KeyEventsPlugin:()=>Ut,\u0275SharedStylesHost:()=>Ne,\u0275getDOM:()=>z.\u0275getDOM,\u0275initDomAdapter:()=>Oi});var z=w(177),T=w(3953),V=w(1626);class N extends z.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class R extends N{static makeCurrent(){(0,z.\u0275setRootDomAdapter)(new R)}onAndCancel(en,Qe,Et){return en.addEventListener(Qe,Et),()=>{en.removeEventListener(Qe,Et)}}dispatchEvent(en,Qe){en.dispatchEvent(Qe)}remove(en){en.remove()}createElement(en,Qe){return(Qe=Qe||this.getDefaultDocument()).createElement(en)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(en){return en.nodeType===Node.ELEMENT_NODE}isShadowRoot(en){return en instanceof DocumentFragment}getGlobalEventTarget(en,Qe){return"window"===Qe?window:"document"===Qe?en:"body"===Qe?en.body:null}getBaseHref(en){const Qe=function G(){return M=M||document.querySelector("base"),M?M.getAttribute("href"):null}();return null==Qe?null:function Y(Kt){return new URL(Kt,document.baseURI).pathname}(Qe)}resetBaseElement(){M=null}getUserAgent(){return window.navigator.userAgent}getCookie(en){return(0,z.\u0275parseCookieValue)(document.cookie,en)}}let M=null;class K{addToWindow(en){T.\u0275global.getAngularTestability=(Et,wn=!0)=>{const $n=en.findTestabilityInTree(Et,wn);if(null==$n)throw new T.\u0275RuntimeError(5103,!1);return $n},T.\u0275global.getAllAngularTestabilities=()=>en.getAllTestabilities(),T.\u0275global.getAllAngularRootElements=()=>en.getAllRootElements(),T.\u0275global.frameworkStabilizers||(T.\u0275global.frameworkStabilizers=[]),T.\u0275global.frameworkStabilizers.push(Et=>{const wn=T.\u0275global.getAllAngularTestabilities();let $n=wn.length;const Ti=function(){$n--,0==$n&&Et()};wn.forEach(ji=>{ji.whenStable(Ti)})})}findTestabilityInTree(en,Qe,Et){return null==Qe?null:en.getTestability(Qe)??(Et?(0,z.\u0275getDOM)().isShadowRoot(Qe)?this.findTestabilityInTree(en,Qe.host,!0):this.findTestabilityInTree(en,Qe.parentElement,!0):null)}}let J=(()=>{class Kt{build(){return new XMLHttpRequest}static{this.\u0275fac=function(Et){return new(Et||Kt)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})();const se=new T.InjectionToken("");let U=(()=>{class Kt{constructor(Qe,Et){this._zone=Et,this._eventNameToPlugin=new Map,Qe.forEach(wn=>{wn.manager=this}),this._plugins=Qe.slice().reverse()}addEventListener(Qe,Et,wn){return this._findPluginFor(Et).addEventListener(Qe,Et,wn)}getZone(){return this._zone}_findPluginFor(Qe){let Et=this._eventNameToPlugin.get(Qe);if(Et)return Et;if(Et=this._plugins.find($n=>$n.supports(Qe)),!Et)throw new T.\u0275RuntimeError(5101,!1);return this._eventNameToPlugin.set(Qe,Et),Et}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(se),T.\u0275\u0275inject(T.NgZone))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})();class _e{constructor(en){this._doc=en}}const Ae="ng-app-id";let Ne=(()=>{class Kt{constructor(Qe,Et,wn,$n={}){this.doc=Qe,this.appId=Et,this.nonce=wn,this.platformId=$n,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,z.isPlatformServer)($n),this.resetHostNodes()}addStyles(Qe){for(const Et of Qe)1===this.changeUsageCount(Et,1)&&this.onStyleAdded(Et)}removeStyles(Qe){for(const Et of Qe)this.changeUsageCount(Et,-1)<=0&&this.onStyleRemoved(Et)}ngOnDestroy(){const Qe=this.styleNodesInDOM;Qe&&(Qe.forEach(Et=>Et.remove()),Qe.clear());for(const Et of this.getAllStyles())this.onStyleRemoved(Et);this.resetHostNodes()}addHost(Qe){this.hostNodes.add(Qe);for(const Et of this.getAllStyles())this.addStyleToHost(Qe,Et)}removeHost(Qe){this.hostNodes.delete(Qe)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Qe){for(const Et of this.hostNodes)this.addStyleToHost(Et,Qe)}onStyleRemoved(Qe){const Et=this.styleRef;Et.get(Qe)?.elements?.forEach(wn=>wn.remove()),Et.delete(Qe)}collectServerRenderedStyles(){const Qe=this.doc.head?.querySelectorAll(`style[${Ae}="${this.appId}"]`);if(Qe?.length){const Et=new Map;return Qe.forEach(wn=>{null!=wn.textContent&&Et.set(wn.textContent,wn)}),Et}return null}changeUsageCount(Qe,Et){const wn=this.styleRef;if(wn.has(Qe)){const $n=wn.get(Qe);return $n.usage+=Et,$n.usage}return wn.set(Qe,{usage:Et,elements:[]}),Et}getStyleElement(Qe,Et){const wn=this.styleNodesInDOM,$n=wn?.get(Et);if($n?.parentNode===Qe)return wn.delete(Et),$n.removeAttribute(Ae),$n;{const Ti=this.doc.createElement("style");return this.nonce&&Ti.setAttribute("nonce",this.nonce),Ti.textContent=Et,this.platformIsServer&&Ti.setAttribute(Ae,this.appId),Qe.appendChild(Ti),Ti}}addStyleToHost(Qe,Et){const wn=this.getStyleElement(Qe,Et),$n=this.styleRef,Ti=$n.get(Et)?.elements;Ti?Ti.push(wn):$n.set(Et,{elements:[wn],usage:1})}resetHostNodes(){const Qe=this.hostNodes;Qe.clear(),Qe.add(this.doc.head)}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT),T.\u0275\u0275inject(T.APP_ID),T.\u0275\u0275inject(T.CSP_NONCE,8),T.\u0275\u0275inject(T.PLATFORM_ID))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})();const Le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},tt=/%COMP%/g,vt=new T.InjectionToken("",{providedIn:"root",factory:()=>!0});function jt(Kt,en){return en.map(Qe=>Qe.replace(tt,Kt))}let Yt=(()=>{class Kt{constructor(Qe,Et,wn,$n,Ti,ji,xn,ia=null){this.eventManager=Qe,this.sharedStylesHost=Et,this.appId=wn,this.removeStylesOnCompDestroy=$n,this.doc=Ti,this.platformId=ji,this.ngZone=xn,this.nonce=ia,this.rendererByCompId=new Map,this.platformIsServer=(0,z.isPlatformServer)(ji),this.defaultRenderer=new On(Qe,Ti,xn,this.platformIsServer)}createRenderer(Qe,Et){if(!Qe||!Et)return this.defaultRenderer;this.platformIsServer&&Et.encapsulation===T.ViewEncapsulation.ShadowDom&&(Et={...Et,encapsulation:T.ViewEncapsulation.Emulated});const wn=this.getOrCreateRenderer(Qe,Et);return wn instanceof Tn?wn.applyToHost(Qe):wn instanceof Gr&&wn.applyStyles(),wn}getOrCreateRenderer(Qe,Et){const wn=this.rendererByCompId;let $n=wn.get(Et.id);if(!$n){const Ti=this.doc,ji=this.ngZone,xn=this.eventManager,ia=this.sharedStylesHost,oa=this.removeStylesOnCompDestroy,ys=this.platformIsServer;switch(Et.encapsulation){case T.ViewEncapsulation.Emulated:$n=new Tn(xn,ia,Et,this.appId,oa,Ti,ji,ys);break;case T.ViewEncapsulation.ShadowDom:return new wr(xn,ia,Qe,Et,Ti,ji,this.nonce,ys);default:$n=new Gr(xn,ia,Et,oa,Ti,ji,ys)}wn.set(Et.id,$n)}return $n}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(U),T.\u0275\u0275inject(Ne),T.\u0275\u0275inject(T.APP_ID),T.\u0275\u0275inject(vt),T.\u0275\u0275inject(z.DOCUMENT),T.\u0275\u0275inject(T.PLATFORM_ID),T.\u0275\u0275inject(T.NgZone),T.\u0275\u0275inject(T.CSP_NONCE))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})();class On{constructor(en,Qe,Et,wn){this.eventManager=en,this.doc=Qe,this.ngZone=Et,this.platformIsServer=wn,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(en,Qe){return Qe?this.doc.createElementNS(Le[Qe]||Qe,en):this.doc.createElement(en)}createComment(en){return this.doc.createComment(en)}createText(en){return this.doc.createTextNode(en)}appendChild(en,Qe){(Nr(en)?en.content:en).appendChild(Qe)}insertBefore(en,Qe,Et){en&&(Nr(en)?en.content:en).insertBefore(Qe,Et)}removeChild(en,Qe){Qe.remove()}selectRootElement(en,Qe){let Et="string"==typeof en?this.doc.querySelector(en):en;if(!Et)throw new T.\u0275RuntimeError(-5104,!1);return Qe||(Et.textContent=""),Et}parentNode(en){return en.parentNode}nextSibling(en){return en.nextSibling}setAttribute(en,Qe,Et,wn){if(wn){Qe=wn+":"+Qe;const $n=Le[wn];$n?en.setAttributeNS($n,Qe,Et):en.setAttribute(Qe,Et)}else en.setAttribute(Qe,Et)}removeAttribute(en,Qe,Et){if(Et){const wn=Le[Et];wn?en.removeAttributeNS(wn,Qe):en.removeAttribute(`${Et}:${Qe}`)}else en.removeAttribute(Qe)}addClass(en,Qe){en.classList.add(Qe)}removeClass(en,Qe){en.classList.remove(Qe)}setStyle(en,Qe,Et,wn){wn&(T.RendererStyleFlags2.DashCase|T.RendererStyleFlags2.Important)?en.style.setProperty(Qe,Et,wn&T.RendererStyleFlags2.Important?"important":""):en.style[Qe]=Et}removeStyle(en,Qe,Et){Et&T.RendererStyleFlags2.DashCase?en.style.removeProperty(Qe):en.style[Qe]=""}setProperty(en,Qe,Et){null!=en&&(en[Qe]=Et)}setValue(en,Qe){en.nodeValue=Qe}listen(en,Qe,Et){if("string"==typeof en&&!(en=(0,z.\u0275getDOM)().getGlobalEventTarget(this.doc,en)))throw new Error(`Unsupported event target ${en} for event ${Qe}`);return this.eventManager.addEventListener(en,Qe,this.decoratePreventDefault(Et))}decoratePreventDefault(en){return Qe=>{if("__ngUnwrap__"===Qe)return en;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>en(Qe)):en(Qe))&&Qe.preventDefault()}}}function Nr(Kt){return"TEMPLATE"===Kt.tagName&&void 0!==Kt.content}class wr extends On{constructor(en,Qe,Et,wn,$n,Ti,ji,xn){super(en,$n,Ti,xn),this.sharedStylesHost=Qe,this.hostEl=Et,this.shadowRoot=Et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ia=jt(wn.id,wn.styles);for(const oa of ia){const ys=document.createElement("style");ji&&ys.setAttribute("nonce",ji),ys.textContent=oa,this.shadowRoot.appendChild(ys)}}nodeOrShadowRoot(en){return en===this.hostEl?this.shadowRoot:en}appendChild(en,Qe){return super.appendChild(this.nodeOrShadowRoot(en),Qe)}insertBefore(en,Qe,Et){return super.insertBefore(this.nodeOrShadowRoot(en),Qe,Et)}removeChild(en,Qe){return super.removeChild(null,Qe)}parentNode(en){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(en)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gr extends On{constructor(en,Qe,Et,wn,$n,Ti,ji,xn){super(en,$n,Ti,ji),this.sharedStylesHost=Qe,this.removeStylesOnCompDestroy=wn,this.styles=xn?jt(xn,Et.styles):Et.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Tn extends Gr{constructor(en,Qe,Et,wn,$n,Ti,ji,xn){const ia=wn+"-"+Et.id;super(en,Qe,Et,$n,Ti,ji,xn,ia),this.contentAttr=function Gt(Kt){return"_ngcontent-%COMP%".replace(tt,Kt)}(ia),this.hostAttr=function Ht(Kt){return"_nghost-%COMP%".replace(tt,Kt)}(ia)}applyToHost(en){this.applyStyles(),this.setAttribute(en,this.hostAttr,"")}createElement(en,Qe){const Et=super.createElement(en,Qe);return super.setAttribute(Et,this.contentAttr,""),Et}}let Nn=(()=>{class Kt extends _e{constructor(Qe){super(Qe)}supports(Qe){return!0}addEventListener(Qe,Et,wn){return Qe.addEventListener(Et,wn,!1),()=>this.removeEventListener(Qe,Et,wn)}removeEventListener(Qe,Et,wn){return Qe.removeEventListener(Et,wn)}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})(),br=(()=>{class Kt extends _e{constructor(Qe){super(Qe),this.delegate=(0,T.inject)(T.\u0275GLOBAL_EVENT_DELEGATION,{optional:!0})}supports(Qe){return!!this.delegate&&this.delegate.supports(Qe)}addEventListener(Qe,Et,wn){return this.delegate.addEventListener(Qe,Et,wn)}removeEventListener(Qe,Et,wn){return this.delegate.removeEventListener(Qe,Et,wn)}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})();const bt=["alt","control","meta","shift"],qt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fn={alt:Kt=>Kt.altKey,control:Kt=>Kt.ctrlKey,meta:Kt=>Kt.metaKey,shift:Kt=>Kt.shiftKey};let Ut=(()=>{class Kt extends _e{constructor(Qe){super(Qe)}supports(Qe){return null!=Kt.parseEventName(Qe)}addEventListener(Qe,Et,wn){const $n=Kt.parseEventName(Et),Ti=Kt.eventCallback($n.fullKey,wn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,z.\u0275getDOM)().onAndCancel(Qe,$n.domEventName,Ti))}static parseEventName(Qe){const Et=Qe.toLowerCase().split("."),wn=Et.shift();if(0===Et.length||"keydown"!==wn&&"keyup"!==wn)return null;const $n=Kt._normalizeKey(Et.pop());let Ti="",ji=Et.indexOf("code");if(ji>-1&&(Et.splice(ji,1),Ti="code."),bt.forEach(ia=>{const oa=Et.indexOf(ia);oa>-1&&(Et.splice(oa,1),Ti+=ia+".")}),Ti+=$n,0!=Et.length||0===$n.length)return null;const xn={};return xn.domEventName=wn,xn.fullKey=Ti,xn}static matchEventFullKeyCode(Qe,Et){let wn=qt[Qe.key]||Qe.key,$n="";return Et.indexOf("code.")>-1&&(wn=Qe.code,$n="code."),!(null==wn||!wn)&&(wn=wn.toLowerCase()," "===wn?wn="space":"."===wn&&(wn="dot"),bt.forEach(Ti=>{Ti!==wn&&(0,fn[Ti])(Qe)&&($n+=Ti+".")}),$n+=wn,$n===Et)}static eventCallback(Qe,Et,wn){return $n=>{Kt.matchEventFullKeyCode($n,Qe)&&wn.runGuarded(()=>Et($n))}}static _normalizeKey(Qe){return"esc"===Qe?"escape":Qe}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})();function bn(Kt,en){return(0,T.\u0275internalCreateApplication)({rootComponent:Kt,...gr(en)})}function Pn(Kt){return(0,T.\u0275internalCreateApplication)(gr(Kt))}function gr(Kt){return{appProviders:[...fo,...Kt?.providers??[]],platformProviders:ei}}function ui(){return[...No]}function Oi(){R.makeCurrent()}const ei=[{provide:T.PLATFORM_ID,useValue:z.\u0275PLATFORM_BROWSER_ID},{provide:T.PLATFORM_INITIALIZER,useValue:Oi,multi:!0},{provide:z.DOCUMENT,useFactory:function hr(){return(0,T.\u0275setDocument)(document),document},deps:[]}],ra=(0,T.createPlatformFactory)(T.platformCore,"browser",ei),Hi=new T.InjectionToken(""),No=[{provide:T.\u0275TESTABILITY_GETTER,useClass:K,deps:[]},{provide:T.\u0275TESTABILITY,useClass:T.Testability,deps:[T.NgZone,T.TestabilityRegistry,T.\u0275TESTABILITY_GETTER]},{provide:T.Testability,useClass:T.Testability,deps:[T.NgZone,T.TestabilityRegistry,T.\u0275TESTABILITY_GETTER]}],fo=[{provide:T.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:T.ErrorHandler,useFactory:function Dr(){return new T.ErrorHandler},deps:[]},{provide:se,useClass:Nn,multi:!0,deps:[z.DOCUMENT,T.NgZone,T.PLATFORM_ID]},{provide:se,useClass:Ut,multi:!0,deps:[z.DOCUMENT]},{provide:se,useClass:br,multi:!0},Yt,Ne,U,{provide:T.RendererFactory2,useExisting:Yt},{provide:z.XhrFactory,useClass:J,deps:[]},[]];let jr=(()=>{class Kt{constructor(Qe){}static withServerTransition(Qe){return{ngModule:Kt,providers:[{provide:T.APP_ID,useValue:Qe.appId}]}}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(Hi,12))}}static{this.\u0275mod=T.\u0275\u0275defineNgModule({type:Kt})}static{this.\u0275inj=T.\u0275\u0275defineInjector({providers:[...fo,...No],imports:[z.CommonModule,T.ApplicationModule]})}}return Kt})(),Do=(()=>{class Kt{constructor(Qe){this._doc=Qe,this._dom=(0,z.\u0275getDOM)()}addTag(Qe,Et=!1){return Qe?this._getOrCreateElement(Qe,Et):null}addTags(Qe,Et=!1){return Qe?Qe.reduce((wn,$n)=>($n&&wn.push(this._getOrCreateElement($n,Et)),wn),[]):[]}getTag(Qe){return Qe&&this._doc.querySelector(`meta[${Qe}]`)||null}getTags(Qe){if(!Qe)return[];const Et=this._doc.querySelectorAll(`meta[${Qe}]`);return Et?[].slice.call(Et):[]}updateTag(Qe,Et){if(!Qe)return null;Et=Et||this._parseSelector(Qe);const wn=this.getTag(Et);return wn?this._setMetaElementAttributes(Qe,wn):this._getOrCreateElement(Qe,!0)}removeTag(Qe){this.removeTagElement(this.getTag(Qe))}removeTagElement(Qe){Qe&&this._dom.remove(Qe)}_getOrCreateElement(Qe,Et=!1){if(!Et){const Ti=this._parseSelector(Qe),ji=this.getTags(Ti).filter(xn=>this._containsAttributes(Qe,xn))[0];if(void 0!==ji)return ji}const wn=this._dom.createElement("meta");return this._setMetaElementAttributes(Qe,wn),this._doc.getElementsByTagName("head")[0].appendChild(wn),wn}_setMetaElementAttributes(Qe,Et){return Object.keys(Qe).forEach(wn=>Et.setAttribute(this._getMetaKeyMap(wn),Qe[wn])),Et}_parseSelector(Qe){const Et=Qe.name?"name":"property";return`${Et}="${Qe[Et]}"`}_containsAttributes(Qe,Et){return Object.keys(Qe).every(wn=>Et.getAttribute(this._getMetaKeyMap(wn))===Qe[wn])}_getMetaKeyMap(Qe){return _i[Qe]||Qe}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac,providedIn:"root"})}}return Kt})();const _i={httpEquiv:"http-equiv"};let xs=(()=>{class Kt{constructor(Qe){this._doc=Qe}getTitle(){return this._doc.title}setTitle(Qe){this._doc.title=Qe||""}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac,providedIn:"root"})}}return Kt})();function tc(Kt,en){(typeof COMPILED>"u"||!COMPILED)&&((T.\u0275global.ng=T.\u0275global.ng||{})[Kt]=en)}class gc{constructor(en,Qe){this.msPerTick=en,this.numTicks=Qe}}class Vs{constructor(en){this.appRef=en.injector.get(T.ApplicationRef)}timeChangeDetection(en){const Qe=en&&en.record,Et="Change Detection";Qe&&"profile"in console&&"function"==typeof console.profile&&console.profile(Et);const wn=performance.now();let $n=0;for(;$n<5||performance.now()-wn<500;)this.appRef.tick(),$n++;const Ti=performance.now();Qe&&"profileEnd"in console&&"function"==typeof console.profileEnd&&console.profileEnd(Et);const ji=(Ti-wn)/$n;return console.log(`ran ${$n} change detection cycles`),console.log(`${ji.toFixed(2)} ms per check`),new gc(ji,$n)}}const Fo="profiler";function Ta(Kt){return tc(Fo,new Vs(Kt)),Kt}function kr(){tc(Fo,null)}class Ei{static all(){return()=>!0}static css(en){return Qe=>null!=Qe.nativeElement&&function dr(Kt,en){return!!(0,z.\u0275getDOM)().isElementNode(Kt)&&(Kt.matches&&Kt.matches(en)||Kt.msMatchesSelector&&Kt.msMatchesSelector(en)||Kt.webkitMatchesSelector&&Kt.webkitMatchesSelector(en))}(Qe.nativeElement,en)}static directive(en){return Qe=>-1!==Qe.providerTokens.indexOf(en)}}const Gs={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},va=new T.InjectionToken("HammerGestureConfig"),$a=new T.InjectionToken("HammerLoader");let ca=(()=>{class Kt{constructor(){this.events=[],this.overrides={}}buildHammer(Qe){const Et=new Hammer(Qe,this.options);Et.get("pinch").set({enable:!0}),Et.get("rotate").set({enable:!0});for(const wn in this.overrides)Et.get(wn).set(this.overrides[wn]);return Et}static{this.\u0275fac=function(Et){return new(Et||Kt)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})(),Xo=(()=>{class Kt extends _e{constructor(Qe,Et,wn,$n){super(Qe),this._config=Et,this.console=wn,this.loader=$n,this._loaderPromise=null}supports(Qe){return!(!Gs.hasOwnProperty(Qe.toLowerCase())&&!this.isCustomEvent(Qe)||!window.Hammer&&!this.loader)}addEventListener(Qe,Et,wn){const $n=this.manager.getZone();if(Et=Et.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||$n.runOutsideAngular(()=>this.loader());let Ti=!1,ji=()=>{Ti=!0};return $n.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?Ti||(ji=this.addEventListener(Qe,Et,wn)):ji=()=>{}}).catch(()=>{ji=()=>{}})),()=>{ji()}}return $n.runOutsideAngular(()=>{const Ti=this._config.buildHammer(Qe),ji=function(xn){$n.runGuarded(function(){wn(xn)})};return Ti.on(Et,ji),()=>{Ti.off(Et,ji),"function"==typeof Ti.destroy&&Ti.destroy()}})}isCustomEvent(Qe){return this._config.events.indexOf(Qe)>-1}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT),T.\u0275\u0275inject(va),T.\u0275\u0275inject(T.\u0275Console),T.\u0275\u0275inject($a,8))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac})}}return Kt})(),ua=(()=>{class Kt{static{this.\u0275fac=function(Et){return new(Et||Kt)}}static{this.\u0275mod=T.\u0275\u0275defineNgModule({type:Kt})}static{this.\u0275inj=T.\u0275\u0275defineInjector({providers:[{provide:se,useClass:Xo,multi:!0,deps:[z.DOCUMENT,va,T.\u0275Console,[new T.Optional,$a]]},{provide:va,useClass:ca,deps:[]}]})}}return Kt})(),Ho=(()=>{class Kt{static{this.\u0275fac=function(Et){return new(Et||Kt)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:function(Et){let wn=null;return wn=Et?new(Et||Kt):T.\u0275\u0275inject(Aa),wn},providedIn:"root"})}}return Kt})(),Aa=(()=>{class Kt extends Ho{constructor(Qe){super(),this._doc=Qe}sanitize(Qe,Et){if(null==Et)return null;switch(Qe){case T.SecurityContext.NONE:return Et;case T.SecurityContext.HTML:return(0,T.\u0275allowSanitizationBypassAndThrow)(Et,"HTML")?(0,T.\u0275unwrapSafeValue)(Et):(0,T.\u0275_sanitizeHtml)(this._doc,String(Et)).toString();case T.SecurityContext.STYLE:return(0,T.\u0275allowSanitizationBypassAndThrow)(Et,"Style")?(0,T.\u0275unwrapSafeValue)(Et):Et;case T.SecurityContext.SCRIPT:if((0,T.\u0275allowSanitizationBypassAndThrow)(Et,"Script"))return(0,T.\u0275unwrapSafeValue)(Et);throw new T.\u0275RuntimeError(5200,!1);case T.SecurityContext.URL:return(0,T.\u0275allowSanitizationBypassAndThrow)(Et,"URL")?(0,T.\u0275unwrapSafeValue)(Et):(0,T.\u0275_sanitizeUrl)(String(Et));case T.SecurityContext.RESOURCE_URL:if((0,T.\u0275allowSanitizationBypassAndThrow)(Et,"ResourceURL"))return(0,T.\u0275unwrapSafeValue)(Et);throw new T.\u0275RuntimeError(5201,!1);default:throw new T.\u0275RuntimeError(5202,!1)}}bypassSecurityTrustHtml(Qe){return(0,T.\u0275bypassSanitizationTrustHtml)(Qe)}bypassSecurityTrustStyle(Qe){return(0,T.\u0275bypassSanitizationTrustStyle)(Qe)}bypassSecurityTrustScript(Qe){return(0,T.\u0275bypassSanitizationTrustScript)(Qe)}bypassSecurityTrustUrl(Qe){return(0,T.\u0275bypassSanitizationTrustUrl)(Qe)}bypassSecurityTrustResourceUrl(Qe){return(0,T.\u0275bypassSanitizationTrustResourceUrl)(Qe)}static{this.\u0275fac=function(Et){return new(Et||Kt)(T.\u0275\u0275inject(z.DOCUMENT))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac,providedIn:"root"})}}return Kt})();var oo=function(Kt){return Kt[Kt.NoHttpTransferCache=0]="NoHttpTransferCache",Kt[Kt.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",Kt[Kt.I18nSupport=2]="I18nSupport",Kt[Kt.EventReplay=3]="EventReplay",Kt}(oo||{});function so(Kt,en=[],Qe={}){return{\u0275kind:Kt,\u0275providers:en}}function Ci(){return so(oo.NoHttpTransferCache)}function Oc(Kt){return so(oo.HttpTransferCacheOptions,(0,V.\u0275withHttpTransferCache)(Kt))}function Ns(){return so(oo.I18nSupport,(0,T.\u0275withI18nSupport)())}function Ds(){return so(oo.EventReplay,(0,T.\u0275withEventReplay)())}function ba(...Kt){const en=[],Qe=new Set,Et=Qe.has(oo.HttpTransferCacheOptions);for(const{\u0275providers:wn,\u0275kind:$n}of Kt)Qe.add($n),wn.length&&en.push(wn);return(0,T.makeEnvironmentProviders)([[],(0,T.\u0275withDomHydration)(),Qe.has(oo.NoHttpTransferCache)||Et?[]:(0,V.\u0275withHttpTransferCache)({}),en])}const _s=new T.Version("18.2.5")},7768:(it,C,w)=>{"use strict";w.r(C),w.d(C,{ActivatedRoute:()=>yu,ActivatedRouteSnapshot:()=>Xc,ActivationEnd:()=>Hu,ActivationStart:()=>Fu,BaseRouteReuseStrategy:()=>wh,ChildActivationEnd:()=>Ld,ChildActivationStart:()=>Ca,ChildrenOutletContexts:()=>Qc,DefaultTitleStrategy:()=>Te,DefaultUrlSerializer:()=>ji,EventType:()=>oi,GuardsCheckEnd:()=>Ks,GuardsCheckStart:()=>Lo,NavigationCancel:()=>mc,NavigationCancellationCode:()=>os,NavigationEnd:()=>ls,NavigationError:()=>tu,NavigationSkipped:()=>Co,NavigationSkippedCode:()=>ka,NavigationStart:()=>Wc,NoPreloading:()=>Vn,OutletContext:()=>Qa,PRIMARY_OUTLET:()=>kr,PreloadAllModules:()=>En,PreloadingStrategy:()=>Cn,ROUTER_CONFIGURATION:()=>ot,ROUTER_INITIALIZER:()=>gg,ROUTES:()=>zr,RedirectCommand:()=>$t,ResolveEnd:()=>kd,ResolveStart:()=>Dd,RouteConfigLoadEnd:()=>_c,RouteConfigLoadStart:()=>La,RouteReuseStrategy:()=>td,Router:()=>Oe,RouterEvent:()=>Ma,RouterLink:()=>nt,RouterLinkActive:()=>ht,RouterLinkWithHref:()=>nt,RouterModule:()=>$d,RouterOutlet:()=>Ac,RouterPreloader:()=>Nt,RouterState:()=>gd,RouterStateSnapshot:()=>vu,RoutesRecognized:()=>Lu,Scroll:()=>Zu,TitleStrategy:()=>pe,UrlHandlingStrategy:()=>us,UrlSegment:()=>Qe,UrlSegmentGroup:()=>en,UrlSerializer:()=>Ti,UrlTree:()=>Kt,VERSION:()=>el,convertToParamMap:()=>Gs,createUrlTreeFromSnapshot:()=>Ga,defaultUrlMatcher:()=>va,mapToCanActivate:()=>mg,mapToCanActivateChild:()=>om,mapToCanDeactivate:()=>da,mapToCanMatch:()=>Qm,mapToResolve:()=>Cu,provideRouter:()=>Ir,provideRoutes:()=>Mi,withComponentInputBinding:()=>jd,withDebugTracing:()=>Vc,withDisabledInitialNavigation:()=>Ss,withEnabledBlockingInitialNavigation:()=>ds,withHashLocation:()=>Ws,withInMemoryScrolling:()=>Ni,withNavigationErrorHandler:()=>Ah,withPreloading:()=>qc,withRouterConfig:()=>Jc,withViewTransitions:()=>Ih,\u0275EmptyOutletComponent:()=>gn,\u0275ROUTER_PROVIDERS:()=>Kl,\u0275afterNextNavigation:()=>ee,\u0275loadChildren:()=>$o});var z=w(3953),T=w(1985),V=w(8071),R=w(6648),M=w(7673),G=w(4412);const{isArray:Y}=Array,{getPrototypeOf:K,prototype:J,keys:se}=Object;var Ae=w(3669),Ne=w(6354);const{isArray:Le}=Array;var Bt=w(9326),Pt=w(4360),vt=w(5225);function Gt(...q){const ue=(0,Bt.lI)(q),te=(0,Bt.ms)(q),{args:le,keys:we}=function U(q){if(1===q.length){const ue=q[0];if(Y(ue))return{args:ue,keys:null};if(function _e(q){return q&&"object"==typeof q&&K(q)===J}(ue)){const te=se(ue);return{args:te.map(le=>ue[le]),keys:te}}}return{args:q,keys:null}}(q);if(0===le.length)return(0,R.H)([],ue);const Ke=new T.c(function Ht(q,ue,te=Ae.D){return le=>{jt(ue,()=>{const{length:we}=q,Ke=new Array(we);let pt=we,an=we;for(let nn=0;nn<we;nn++)jt(ue,()=>{const lr=(0,R.H)(q[nn],ue);let ro=!1;lr.subscribe((0,Pt._)(le,Oo=>{Ke[nn]=Oo,ro||(ro=!0,an--),an||le.next(te(Ke.slice()))},()=>{--pt||le.complete()}))},le)},le)}}(le,ue,we?pt=>function yt(q,ue){return q.reduce((te,le,we)=>(te[le]=ue[we],te),{})}(we,pt):Ae.D));return te?Ke.pipe(function _t(q){return(0,Ne.T)(ue=>function tt(q,ue){return Le(ue)?q(...ue):q(ue)}(q,ue))}(te)):Ke}function jt(q,ue,te){q?(0,vt.N)(te,q,ue):ue()}var Yt=w(9350),On=w(3028);function In(q=1/0){return(0,On.Z)(Ae.D,q)}function Nr(...q){return function Rn(){return In(1)}()((0,R.H)(q,(0,Bt.lI)(q)))}var wr=w(9030),Gr=w(1203),Tn=w(8810),Nn=w(983),br=w(8359),bt=w(9974);function qt(){return(0,bt.N)((q,ue)=>{let te=null;q._refCount++;const le=(0,Pt._)(ue,void 0,void 0,void 0,()=>{if(!q||q._refCount<=0||0<--q._refCount)return void(te=null);const we=q._connection,Ke=te;te=null,we&&(!Ke||we===Ke)&&we.unsubscribe(),ue.unsubscribe()});q.subscribe(le),le.closed||(te=q.connect())})}class fn extends T.c{constructor(ue,te){super(),this.source=ue,this.subjectFactory=te,this._subject=null,this._refCount=0,this._connection=null,(0,bt.S)(ue)&&(this.lift=ue.lift)}_subscribe(ue){return this.getSubject().subscribe(ue)}getSubject(){const ue=this._subject;return(!ue||ue.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ue}=this;this._subject=this._connection=null,ue?.unsubscribe()}connect(){let ue=this._connection;if(!ue){ue=this._connection=new br.yU;const te=this.getSubject();ue.add(this.source.subscribe((0,Pt._)(te,void 0,()=>{this._teardown(),te.complete()},le=>{this._teardown(),te.error(le)},()=>this._teardown()))),ue.closed&&(this._connection=null,ue=br.yU.EMPTY)}return ue}refCount(){return qt()(this)}}var Ut=w(1413),bn=w(177),Pn=w(5558),gr=w(6697),Oi=w(5964),Dr=w(1594),hr=w(274),ei=w(8141),ra=w(9437);var fo=w(9901);function jr(q){return q<=0?()=>Nn.w:(0,bt.N)((ue,te)=>{let le=[];ue.subscribe((0,Pt._)(te,we=>{le.push(we),q<le.length&&le.shift()},()=>{for(const we of le)te.next(we);te.complete()},void 0,()=>{le=null}))})}var Do=w(3774),xs=w(3703),tc=w(980),gc=w(8750),Vs=w(5343),Ta=w(345);const kr="primary",Ei=Symbol("RouteTitle");class dr{constructor(ue){this.params=ue||{}}has(ue){return Object.prototype.hasOwnProperty.call(this.params,ue)}get(ue){if(this.has(ue)){const te=this.params[ue];return Array.isArray(te)?te[0]:te}return null}getAll(ue){if(this.has(ue)){const te=this.params[ue];return Array.isArray(te)?te:[te]}return[]}get keys(){return Object.keys(this.params)}}function Gs(q){return new dr(q)}function va(q,ue,te){const le=te.path.split("/");if(le.length>q.length||"full"===te.pathMatch&&(ue.hasChildren()||le.length<q.length))return null;const we={};for(let Ke=0;Ke<le.length;Ke++){const pt=le[Ke],an=q[Ke];if(":"===pt[0])we[pt.substring(1)]=an;else if(pt!==an.path)return null}return{consumed:q.slice(0,le.length),posParams:we}}function ca(q,ue){const te=q?Xo(q):void 0,le=ue?Xo(ue):void 0;if(!te||!le||te.length!=le.length)return!1;let we;for(let Ke=0;Ke<te.length;Ke++)if(we=te[Ke],!ua(q[we],ue[we]))return!1;return!0}function Xo(q){return[...Object.keys(q),...Object.getOwnPropertySymbols(q)]}function ua(q,ue){if(Array.isArray(q)&&Array.isArray(ue)){if(q.length!==ue.length)return!1;const te=[...q].sort(),le=[...ue].sort();return te.every((we,Ke)=>le[Ke]===we)}return q===ue}function Ho(q){return q.length>0?q[q.length-1]:null}function Aa(q){return function N(q){return!!q&&(q instanceof T.c||(0,V.T)(q.lift)&&(0,V.T)(q.subscribe))}(q)?q:(0,z.\u0275isPromise)(q)?(0,R.H)(Promise.resolve(q)):(0,M.of)(q)}const oo={exact:function Ns(q,ue,te){if(!wn(q.segments,ue.segments)||!_s(q.segments,ue.segments,te)||q.numberOfChildren!==ue.numberOfChildren)return!1;for(const le in ue.children)if(!q.children[le]||!Ns(q.children[le],ue.children[le],te))return!1;return!0},subset:ns},so={exact:function Oc(q,ue){return ca(q,ue)},subset:function Ds(q,ue){return Object.keys(ue).length<=Object.keys(q).length&&Object.keys(ue).every(te=>ua(q[te],ue[te]))},ignored:()=>!0};function Ci(q,ue,te){return oo[te.paths](q.root,ue.root,te.matrixParams)&&so[te.queryParams](q.queryParams,ue.queryParams)&&!("exact"===te.fragment&&q.fragment!==ue.fragment)}function ns(q,ue,te){return ba(q,ue,ue.segments,te)}function ba(q,ue,te,le){if(q.segments.length>te.length){const we=q.segments.slice(0,te.length);return!(!wn(we,te)||ue.hasChildren()||!_s(we,te,le))}if(q.segments.length===te.length){if(!wn(q.segments,te)||!_s(q.segments,te,le))return!1;for(const we in ue.children)if(!q.children[we]||!ns(q.children[we],ue.children[we],le))return!1;return!0}{const we=te.slice(0,q.segments.length),Ke=te.slice(q.segments.length);return!!(wn(q.segments,we)&&_s(q.segments,we,le)&&q.children[kr])&&ba(q.children[kr],ue,Ke,le)}}function _s(q,ue,te){return ue.every((le,we)=>so[te](q[we].parameters,le.parameters))}class Kt{constructor(ue=new en([],{}),te={},le=null){this.root=ue,this.queryParams=te,this.fragment=le}get queryParamMap(){return this._queryParamMap??=Gs(this.queryParams),this._queryParamMap}toString(){return xn.serialize(this)}}class en{constructor(ue,te){this.segments=ue,this.children=te,this.parent=null,Object.values(te).forEach(le=>le.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ia(this)}}class Qe{constructor(ue,te){this.path=ue,this.parameters=te}get parameterMap(){return this._parameterMap??=Gs(this.parameters),this._parameterMap}toString(){return vs(this)}}function wn(q,ue){return q.length===ue.length&&q.every((te,le)=>te.path===ue[le].path)}let Ti=(()=>{class q{static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:()=>new ji,providedIn:"root"})}}return q})();class ji{parse(ue){const te=new Il(ue);return new Kt(te.parseRootSegment(),te.parseQueryParams(),te.parseFragment())}serialize(ue){const te=`/${oa(ue.root,!0)}`,le=function Pc(q){const ue=Object.entries(q).map(([te,le])=>Array.isArray(le)?le.map(we=>`${jc(te)}=${jc(we)}`).join("&"):`${jc(te)}=${jc(le)}`).filter(te=>te);return ue.length?`?${ue.join("&")}`:""}(ue.queryParams);return`${te}${le}${"string"==typeof ue.fragment?`#${function Tl(q){return encodeURI(q)}(ue.fragment)}`:""}`}}const xn=new ji;function ia(q){return q.segments.map(ue=>vs(ue)).join("/")}function oa(q,ue){if(!q.hasChildren())return ia(q);if(ue){const te=q.children[kr]?oa(q.children[kr],!1):"",le=[];return Object.entries(q.children).forEach(([we,Ke])=>{we!==kr&&le.push(`${we}:${oa(Ke,!1)}`)}),le.length>0?`${te}(${le.join("//")})`:te}{const te=function $n(q,ue){let te=[];return Object.entries(q.children).forEach(([le,we])=>{le===kr&&(te=te.concat(ue(we,le)))}),Object.entries(q.children).forEach(([le,we])=>{le!==kr&&(te=te.concat(ue(we,le)))}),te}(q,(le,we)=>we===kr?[oa(q.children[kr],!1)]:[`${we}:${oa(le,!1)}`]);return 1===Object.keys(q.children).length&&null!=q.children[kr]?`${ia(q)}/${te[0]}`:`${ia(q)}/(${te.join("//")})`}}function ys(q){return encodeURIComponent(q).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jc(q){return ys(q).replace(/%3B/gi,";")}function qs(q){return ys(q).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wo(q){return decodeURIComponent(q)}function eu(q){return Wo(q.replace(/\+/g,"%20"))}function vs(q){return`${qs(q.path)}${function Va(q){return Object.entries(q).map(([ue,te])=>`;${qs(ue)}=${qs(te)}`).join("")}(q.parameters)}`}const rs=/^[^\/()?;#]+/;function ks(q){const ue=q.match(rs);return ue?ue[0]:""}const Ia=/^[^\/()?;=#]+/,cl=/^[^=?&#]+/,ul=/^[^&#]+/;class Il{constructor(ue){this.url=ue,this.remaining=ue}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const ue={};if(this.consumeOptional("?"))do{this.parseQueryParam(ue)}while(this.consumeOptional("&"));return ue}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const ue=[];for(this.peekStartsWith("(")||ue.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),ue.push(this.parseSegment());let te={};this.peekStartsWith("/(")&&(this.capture("/"),te=this.parseParens(!0));let le={};return this.peekStartsWith("(")&&(le=this.parseParens(!1)),(ue.length>0||Object.keys(te).length>0)&&(le[kr]=new en(ue,te)),le}parseSegment(){const ue=ks(this.remaining);if(""===ue&&this.peekStartsWith(";"))throw new z.\u0275RuntimeError(4009,!1);return this.capture(ue),new Qe(Wo(ue),this.parseMatrixParams())}parseMatrixParams(){const ue={};for(;this.consumeOptional(";");)this.parseParam(ue);return ue}parseParam(ue){const te=function Al(q){const ue=q.match(Ia);return ue?ue[0]:""}(this.remaining);if(!te)return;this.capture(te);let le="";if(this.consumeOptional("=")){const we=ks(this.remaining);we&&(le=we,this.capture(le))}ue[Wo(te)]=Wo(le)}parseQueryParam(ue){const te=function ll(q){const ue=q.match(cl);return ue?ue[0]:""}(this.remaining);if(!te)return;this.capture(te);let le="";if(this.consumeOptional("=")){const pt=function Cs(q){const ue=q.match(ul);return ue?ue[0]:""}(this.remaining);pt&&(le=pt,this.capture(le))}const we=eu(te),Ke=eu(le);if(ue.hasOwnProperty(we)){let pt=ue[we];Array.isArray(pt)||(pt=[pt],ue[we]=pt),pt.push(Ke)}else ue[we]=Ke}parseParens(ue){const te={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const le=ks(this.remaining),we=this.remaining[le.length];if("/"!==we&&")"!==we&&";"!==we)throw new z.\u0275RuntimeError(4010,!1);let Ke;le.indexOf(":")>-1?(Ke=le.slice(0,le.indexOf(":")),this.capture(Ke),this.capture(":")):ue&&(Ke=kr);const pt=this.parseChildren();te[Ke]=1===Object.keys(pt).length?pt[kr]:new en([],pt),this.consumeOptional("//")}return te}peekStartsWith(ue){return this.remaining.startsWith(ue)}consumeOptional(ue){return!!this.peekStartsWith(ue)&&(this.remaining=this.remaining.substring(ue.length),!0)}capture(ue){if(!this.consumeOptional(ue))throw new z.\u0275RuntimeError(4011,!1)}}function jl(q){return q.segments.length>0?new en([],{[kr]:q}):q}function Dl(q){const ue={};for(const[le,we]of Object.entries(q.children)){const Ke=Dl(we);if(le===kr&&0===Ke.segments.length&&Ke.hasChildren())for(const[pt,an]of Object.entries(Ke.children))ue[pt]=an;else(Ke.segments.length>0||Ke.hasChildren())&&(ue[le]=Ke)}return function dl(q){if(1===q.numberOfChildren&&q.children[kr]){const ue=q.children[kr];return new en(q.segments.concat(ue.segments),ue.children)}return q}(new en(q.segments,ue))}function Zo(q){return q instanceof Kt}function Ga(q,ue,te=null,le=null){return We(hl(q),ue,te,le)}function hl(q){let ue;const we=jl(function te(Ke){const pt={};for(const nn of Ke.children){const lr=te(nn);pt[nn.outlet]=lr}const an=new en(Ke.url,pt);return Ke===q&&(ue=an),an}(q.root));return ue??we}function We(q,ue,te,le){let we=q;for(;we.parent;)we=we.parent;if(0===ue.length)return vn(we,we,we,te,le);const Ke=function pr(q){if("string"==typeof q[0]&&1===q.length&&"/"===q[0])return new mr(!0,0,q);let ue=0,te=!1;const le=q.reduce((we,Ke,pt)=>{if("object"==typeof Ke&&null!=Ke){if(Ke.outlets){const an={};return Object.entries(Ke.outlets).forEach(([nn,lr])=>{an[nn]="string"==typeof lr?lr.split("/"):lr}),[...we,{outlets:an}]}if(Ke.segmentPath)return[...we,Ke.segmentPath]}return"string"!=typeof Ke?[...we,Ke]:0===pt?(Ke.split("/").forEach((an,nn)=>{0==nn&&"."===an||(0==nn&&""===an?te=!0:".."===an?ue++:""!=an&&we.push(an))}),we):[...we,Ke]},[]);return new mr(te,ue,le)}(ue);if(Ke.toRoot())return vn(we,we,new en([],{}),te,le);const pt=function Ii(q,ue,te){if(q.isAbsolute)return new Ai(ue,!0,0);if(!te)return new Ai(ue,!1,NaN);if(null===te.parent)return new Ai(te,!0,0);const le=At(q.commands[0])?0:1;return function co(q,ue,te){let le=q,we=ue,Ke=te;for(;Ke>we;){if(Ke-=we,le=le.parent,!le)throw new z.\u0275RuntimeError(4005,!1);we=le.segments.length}return new Ai(le,!1,we-Ke)}(te,te.segments.length-1+le,q.numberOfDoubleDots)}(Ke,we,q),an=pt.processChildren?An(pt.segmentGroup,pt.index,Ke.commands):jo(pt.segmentGroup,pt.index,Ke.commands);return vn(we,pt.segmentGroup,an,te,le)}function At(q){return"object"==typeof q&&null!=q&&!q.outlets&&!q.segmentPath}function ut(q){return"object"==typeof q&&null!=q&&q.outlets}function vn(q,ue,te,le,we){let pt,Ke={};le&&Object.entries(le).forEach(([nn,lr])=>{Ke[nn]=Array.isArray(lr)?lr.map(ro=>`${ro}`):`${lr}`}),pt=q===ue?te:Jn(q,ue,te);const an=jl(Dl(pt));return new Kt(an,Ke,we)}function Jn(q,ue,te){const le={};return Object.entries(q.children).forEach(([we,Ke])=>{le[we]=Ke===ue?te:Jn(Ke,ue,te)}),new en(q.segments,le)}class mr{constructor(ue,te,le){if(this.isAbsolute=ue,this.numberOfDoubleDots=te,this.commands=le,ue&&le.length>0&&At(le[0]))throw new z.\u0275RuntimeError(4003,!1);const we=le.find(ut);if(we&&we!==Ho(le))throw new z.\u0275RuntimeError(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ai{constructor(ue,te,le){this.segmentGroup=ue,this.processChildren=te,this.index=le}}function jo(q,ue,te){if(q??=new en([],{}),0===q.segments.length&&q.hasChildren())return An(q,ue,te);const le=function is(q,ue,te){let le=0,we=ue;const Ke={match:!1,pathIndex:0,commandIndex:0};for(;we<q.segments.length;){if(le>=te.length)return Ke;const pt=q.segments[we],an=te[le];if(ut(an))break;const nn=`${an}`,lr=le<te.length-1?te[le+1]:null;if(we>0&&void 0===nn)break;if(nn&&lr&&"object"==typeof lr&&void 0===lr.outlets){if(!$s(nn,lr,pt))return Ke;le+=2}else{if(!$s(nn,{},pt))return Ke;le++}we++}return{match:!0,pathIndex:we,commandIndex:le}}(q,ue,te),we=te.slice(le.commandIndex);if(le.match&&le.pathIndex<q.segments.length){const Ke=new en(q.segments.slice(0,le.pathIndex),{});return Ke.children[kr]=new en(q.segments.slice(le.pathIndex),q.children),An(Ke,0,we)}return le.match&&0===we.length?new en(q.segments,{}):le.match&&!q.hasChildren()?ao(q,ue,te):le.match?An(q,0,we):ao(q,ue,te)}function An(q,ue,te){if(0===te.length)return new en(q.segments,{});{const le=function ko(q){return ut(q[0])?q[0].outlets:{[kr]:q}}(te),we={};if(Object.keys(le).some(Ke=>Ke!==kr)&&q.children[kr]&&1===q.numberOfChildren&&0===q.children[kr].segments.length){const Ke=An(q.children[kr],ue,te);return new en(q.segments,Ke.children)}return Object.entries(le).forEach(([Ke,pt])=>{"string"==typeof pt&&(pt=[pt]),null!==pt&&(we[Ke]=jo(q.children[Ke],ue,pt))}),Object.entries(q.children).forEach(([Ke,pt])=>{void 0===le[Ke]&&(we[Ke]=pt)}),new en(q.segments,we)}}function ao(q,ue,te){const le=q.segments.slice(0,ue);let we=0;for(;we<te.length;){const Ke=te[we];if(ut(Ke)){const nn=Jo(Ke.outlets);return new en(le,nn)}if(0===we&&At(te[0])){le.push(new Qe(q.segments[ue].path,la(te[0]))),we++;continue}const pt=ut(Ke)?Ke.outlets[kr]:`${Ke}`,an=we<te.length-1?te[we+1]:null;pt&&an&&At(an)?(le.push(new Qe(pt,la(an))),we+=2):(le.push(new Qe(pt,{})),we++)}return new en(le,{})}function Jo(q){const ue={};return Object.entries(q).forEach(([te,le])=>{"string"==typeof le&&(le=[le]),null!==le&&(ue[te]=ao(new en([],{}),0,le))}),ue}function la(q){const ue={};return Object.entries(q).forEach(([te,le])=>ue[te]=`${le}`),ue}function $s(q,ue,te){return q==te.path&&ca(ue,te.parameters)}const wc="imperative";var oi=function(q){return q[q.NavigationStart=0]="NavigationStart",q[q.NavigationEnd=1]="NavigationEnd",q[q.NavigationCancel=2]="NavigationCancel",q[q.NavigationError=3]="NavigationError",q[q.RoutesRecognized=4]="RoutesRecognized",q[q.ResolveStart=5]="ResolveStart",q[q.ResolveEnd=6]="ResolveEnd",q[q.GuardsCheckStart=7]="GuardsCheckStart",q[q.GuardsCheckEnd=8]="GuardsCheckEnd",q[q.RouteConfigLoadStart=9]="RouteConfigLoadStart",q[q.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",q[q.ChildActivationStart=11]="ChildActivationStart",q[q.ChildActivationEnd=12]="ChildActivationEnd",q[q.ActivationStart=13]="ActivationStart",q[q.ActivationEnd=14]="ActivationEnd",q[q.Scroll=15]="Scroll",q[q.NavigationSkipped=16]="NavigationSkipped",q}(oi||{});class Ma{constructor(ue,te){this.id=ue,this.url=te}}class Wc extends Ma{constructor(ue,te,le="imperative",we=null){super(ue,te),this.type=oi.NavigationStart,this.navigationTrigger=le,this.restoredState=we}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ls extends Ma{constructor(ue,te,le){super(ue,te),this.urlAfterRedirects=le,this.type=oi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var os=function(q){return q[q.Redirect=0]="Redirect",q[q.SupersededByNewNavigation=1]="SupersededByNewNavigation",q[q.NoDataFromResolver=2]="NoDataFromResolver",q[q.GuardRejected=3]="GuardRejected",q}(os||{}),ka=function(q){return q[q.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",q[q.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",q}(ka||{});class mc extends Ma{constructor(ue,te,le,we){super(ue,te),this.reason=le,this.code=we,this.type=oi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Co extends Ma{constructor(ue,te,le,we){super(ue,te),this.reason=le,this.code=we,this.type=oi.NavigationSkipped}}class tu extends Ma{constructor(ue,te,le,we){super(ue,te),this.error=le,this.target=we,this.type=oi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lu extends Ma{constructor(ue,te,le,we){super(ue,te),this.urlAfterRedirects=le,this.state=we,this.type=oi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lo extends Ma{constructor(ue,te,le,we){super(ue,te),this.urlAfterRedirects=le,this.state=we,this.type=oi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ks extends Ma{constructor(ue,te,le,we,Ke){super(ue,te),this.urlAfterRedirects=le,this.state=we,this.shouldActivate=Ke,this.type=oi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dd extends Ma{constructor(ue,te,le,we){super(ue,te),this.urlAfterRedirects=le,this.state=we,this.type=oi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kd extends Ma{constructor(ue,te,le,we){super(ue,te),this.urlAfterRedirects=le,this.state=we,this.type=oi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class La{constructor(ue){this.route=ue,this.type=oi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _c{constructor(ue){this.route=ue,this.type=oi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ca{constructor(ue){this.snapshot=ue,this.type=oi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ld{constructor(ue){this.snapshot=ue,this.type=oi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fu{constructor(ue){this.snapshot=ue,this.type=oi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hu{constructor(ue){this.snapshot=ue,this.type=oi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zu{constructor(ue,te,le){this.routerEvent=ue,this.position=te,this.anchor=le,this.type=oi.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Uu{}class Wa{constructor(ue,te){this.url=ue,this.navigationBehaviorOptions=te}}function bs(q){return q.outlet||kr}function _u(q){if(!q)return null;if(q.routeConfig?._injector)return q.routeConfig._injector;for(let ue=q.parent;ue;ue=ue.parent){const te=ue.routeConfig;if(te?._loadedInjector)return te._loadedInjector;if(te?._injector)return te._injector}return null}class Qa{get injector(){return _u(this.route?.snapshot)??this.rootInjector}set injector(ue){}constructor(ue){this.rootInjector=ue,this.outlet=null,this.route=null,this.children=new Qc(this.rootInjector),this.attachRef=null}}let Qc=(()=>{class q{constructor(te){this.rootInjector=te,this.contexts=new Map}onChildOutletCreated(te,le){const we=this.getOrCreateContext(te);we.outlet=le,this.contexts.set(te,we)}onChildOutletDestroyed(te){const le=this.getContext(te);le&&(le.outlet=null,le.attachRef=null)}onOutletDeactivated(){const te=this.contexts;return this.contexts=new Map,te}onOutletReAttached(te){this.contexts=te}getOrCreateContext(te){let le=this.getContext(te);return le||(le=new Qa(this.rootInjector),this.contexts.set(te,le)),le}getContext(te){return this.contexts.get(te)||null}static{this.\u0275fac=function(le){return new(le||q)(z.\u0275\u0275inject(z.EnvironmentInjector))}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();class Rc{constructor(ue){this._root=ue}get root(){return this._root.value}parent(ue){const te=this.pathFromRoot(ue);return te.length>1?te[te.length-2]:null}children(ue){const te=Jd(ue,this._root);return te?te.children.map(le=>le.value):[]}firstChild(ue){const te=Jd(ue,this._root);return te&&te.children.length>0?te.children[0].value:null}siblings(ue){const te=Tc(ue,this._root);return te.length<2?[]:te[te.length-2].children.map(we=>we.value).filter(we=>we!==ue)}pathFromRoot(ue){return Tc(ue,this._root).map(te=>te.value)}}function Jd(q,ue){if(q===ue.value)return ue;for(const te of ue.children){const le=Jd(q,te);if(le)return le}return null}function Tc(q,ue){if(q===ue.value)return[ue];for(const te of ue.children){const le=Tc(q,te);if(le.length)return le.unshift(ue),le}return[]}class Mr{constructor(ue,te){this.value=ue,this.children=te}toString(){return`TreeNode(${this.value})`}}function $l(q){const ue={};return q&&q.children.forEach(te=>ue[te.value.outlet]=te),ue}class gd extends Rc{constructor(ue,te){super(ue),this.snapshot=te,rc(this,ue)}toString(){return this.snapshot.toString()}}function Ol(q){const ue=function Xp(q){const Ke=new Xc([],{},{},"",{},kr,q,null,{});return new vu("",new Mr(Ke,[]))}(q),te=new G.t([new Qe("",{})]),le=new G.t({}),we=new G.t({}),Ke=new G.t({}),pt=new G.t(""),an=new yu(te,le,Ke,pt,we,kr,q,ue.root);return an.snapshot=ue.root,new gd(new Mr(an,[]),ue)}class yu{constructor(ue,te,le,we,Ke,pt,an,nn){this.urlSubject=ue,this.paramsSubject=te,this.queryParamsSubject=le,this.fragmentSubject=we,this.dataSubject=Ke,this.outlet=pt,this.component=an,this._futureSnapshot=nn,this.title=this.dataSubject?.pipe((0,Ne.T)(lr=>lr[Ei]))??(0,M.of)(void 0),this.url=ue,this.params=te,this.queryParams=le,this.fragment=we,this.data=Ke}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Ne.T)(ue=>Gs(ue))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Ne.T)(ue=>Gs(ue))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vl(q,ue,te="emptyOnly"){let le;const{routeConfig:we}=q;return le=null===ue||"always"!==te&&""!==we?.path&&(ue.component||ue.routeConfig?.loadComponent)?{params:{...q.params},data:{...q.data},resolve:{...q.data,...q._resolvedData??{}}}:{params:{...ue.params,...q.params},data:{...ue.data,...q.data},resolve:{...q.data,...ue.data,...we?.data,...q._resolvedData}},we&&ic(we)&&(le.resolve[Ei]=we.title),le}class Xc{get title(){return this.data?.[Ei]}constructor(ue,te,le,we,Ke,pt,an,nn,lr){this.url=ue,this.params=te,this.queryParams=le,this.fragment=we,this.data=Ke,this.outlet=pt,this.component=an,this.routeConfig=nn,this._resolve=lr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gs(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(le=>le.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vu extends Rc{constructor(ue,te){super(te),this.url=ue,rc(this,te)}toString(){return Gl(this._root)}}function rc(q,ue){ue.value._routerState=q,ue.children.forEach(te=>rc(q,te))}function Gl(q){const ue=q.children.length>0?` { ${q.children.map(Gl).join(", ")} } `:"";return`${q.value}${ue}`}function kl(q){if(q.snapshot){const ue=q.snapshot,te=q._futureSnapshot;q.snapshot=te,ca(ue.queryParams,te.queryParams)||q.queryParamsSubject.next(te.queryParams),ue.fragment!==te.fragment&&q.fragmentSubject.next(te.fragment),ca(ue.params,te.params)||q.paramsSubject.next(te.params),function $a(q,ue){if(q.length!==ue.length)return!1;for(let te=0;te<q.length;++te)if(!ca(q[te],ue[te]))return!1;return!0}(ue.url,te.url)||q.urlSubject.next(te.url),ca(ue.data,te.data)||q.dataSubject.next(te.data)}else q.snapshot=q._futureSnapshot,q.dataSubject.next(q._futureSnapshot.data)}function Fd(q,ue){const te=ca(q.params,ue.params)&&function Et(q,ue){return wn(q,ue)&&q.every((te,le)=>ca(te.parameters,ue[le].parameters))}(q.url,ue.url);return te&&!(!q.parent!=!ue.parent)&&(!q.parent||Fd(q.parent,ue.parent))}function ic(q){return"string"==typeof q.title||null===q.title}let Ac=(()=>{class q{constructor(){this.activated=null,this._activatedRoute=null,this.name=kr,this.activateEvents=new z.EventEmitter,this.deactivateEvents=new z.EventEmitter,this.attachEvents=new z.EventEmitter,this.detachEvents=new z.EventEmitter,this.parentContexts=(0,z.inject)(Qc),this.location=(0,z.inject)(z.ViewContainerRef),this.changeDetector=(0,z.inject)(z.ChangeDetectorRef),this.inputBinder=(0,z.inject)(Pl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(te){if(te.name){const{firstChange:le,previousValue:we}=te.name;if(le)return;this.isTrackedInParentContexts(we)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(we)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(te){return this.parentContexts.getContext(te)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const te=this.parentContexts.getContext(this.name);te?.route&&(te.attachRef?this.attach(te.attachRef,te.route):this.activateWith(te.route,te.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z.\u0275RuntimeError(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z.\u0275RuntimeError(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z.\u0275RuntimeError(4012,!1);this.location.detach();const te=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(te.instance),te}attach(te,le){this.activated=te,this._activatedRoute=le,this.location.insert(te.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(te.instance)}deactivate(){if(this.activated){const te=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(te)}}activateWith(te,le){if(this.isActivated)throw new z.\u0275RuntimeError(4013,!1);this._activatedRoute=te;const we=this.location,pt=te.snapshot.component,an=this.parentContexts.getOrCreateContext(this.name).children,nn=new oc(te,an,we.injector);this.activated=we.createComponent(pt,{index:we.length,injector:nn,environmentInjector:le}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275dir=z.\u0275\u0275defineDirective({type:q,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[z.\u0275\u0275NgOnChangesFeature]})}}return q})();class oc{__ngOutletInjector(ue){return new oc(this.route,this.childContexts,ue)}constructor(ue,te,le){this.route=ue,this.childContexts=te,this.parent=le}get(ue,te){return ue===yu?this.route:ue===Qc?this.childContexts:this.parent.get(ue,te)}}const Pl=new z.InjectionToken("");let Ch=(()=>{class q{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(te){this.unsubscribeFromRouteData(te),this.subscribeToRouteData(te)}unsubscribeFromRouteData(te){this.outletDataSubscriptions.get(te)?.unsubscribe(),this.outletDataSubscriptions.delete(te)}subscribeToRouteData(te){const{activatedRoute:le}=te,we=Gt([le.queryParams,le.params,le.data]).pipe((0,Pn.n)(([Ke,pt,an],nn)=>(an={...Ke,...pt,...an},0===nn?(0,M.of)(an):Promise.resolve(an)))).subscribe(Ke=>{if(!te.isActivated||!te.activatedComponentRef||te.activatedRoute!==le||null===le.component)return void this.unsubscribeFromRouteData(te);const pt=(0,z.reflectComponentType)(le.component);if(pt)for(const{templateName:an}of pt.inputs)te.activatedComponentRef.setInput(an,Ke[an]);else this.unsubscribeFromRouteData(te)});this.outletDataSubscriptions.set(te,we)}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac})}}return q})();function md(q,ue,te){if(te&&q.shouldReuseRoute(ue.value,te.value.snapshot)){const le=te.value;le._futureSnapshot=ue.value;const we=function rr(q,ue,te){return ue.children.map(le=>{for(const we of te.children)if(q.shouldReuseRoute(le.value,we.value.snapshot))return md(q,le,we);return md(q,le)})}(q,ue,te);return new Mr(le,we)}{if(q.shouldAttach(ue.value)){const Ke=q.retrieve(ue.value);if(null!==Ke){const pt=Ke.route;return pt.value._futureSnapshot=ue.value,pt.children=ue.children.map(an=>md(q,an)),pt}}const le=function Ln(q){return new yu(new G.t(q.url),new G.t(q.params),new G.t(q.queryParams),new G.t(q.fragment),new G.t(q.data),q.outlet,q.component,q)}(ue.value),we=ue.children.map(Ke=>md(q,Ke));return new Mr(le,we)}}class $t{constructor(ue,te){this.redirectTo=ue,this.navigationBehaviorOptions=te}}const _r="ngNavigationCancelingError";function xi(q,ue){const{redirectTo:te,navigationBehaviorOptions:le}=Zo(ue)?{redirectTo:ue,navigationBehaviorOptions:void 0}:ue,we=or(!1,os.Redirect);return we.url=te,we.navigationBehaviorOptions=le,we}function or(q,ue){const te=new Error(`NavigationCancelingError: ${q||""}`);return te[_r]=!0,te.cancellationCode=ue,te}function ma(q){return!!q&&q[_r]}class Af{constructor(ue,te,le,we,Ke){this.routeReuseStrategy=ue,this.futureState=te,this.currState=le,this.forwardEvent=we,this.inputBindingEnabled=Ke}activate(ue){const te=this.futureState._root,le=this.currState?this.currState._root:null;this.deactivateChildRoutes(te,le,ue),kl(this.futureState.root),this.activateChildRoutes(te,le,ue)}deactivateChildRoutes(ue,te,le){const we=$l(te);ue.children.forEach(Ke=>{const pt=Ke.value.outlet;this.deactivateRoutes(Ke,we[pt],le),delete we[pt]}),Object.values(we).forEach(Ke=>{this.deactivateRouteAndItsChildren(Ke,le)})}deactivateRoutes(ue,te,le){const we=ue.value,Ke=te?te.value:null;if(we===Ke)if(we.component){const pt=le.getContext(we.outlet);pt&&this.deactivateChildRoutes(ue,te,pt.children)}else this.deactivateChildRoutes(ue,te,le);else Ke&&this.deactivateRouteAndItsChildren(te,le)}deactivateRouteAndItsChildren(ue,te){ue.value.component&&this.routeReuseStrategy.shouldDetach(ue.value.snapshot)?this.detachAndStoreRouteSubtree(ue,te):this.deactivateRouteAndOutlet(ue,te)}detachAndStoreRouteSubtree(ue,te){const le=te.getContext(ue.value.outlet),we=le&&ue.value.component?le.children:te,Ke=$l(ue);for(const pt of Object.values(Ke))this.deactivateRouteAndItsChildren(pt,we);if(le&&le.outlet){const pt=le.outlet.detach(),an=le.children.onOutletDeactivated();this.routeReuseStrategy.store(ue.value.snapshot,{componentRef:pt,route:ue,contexts:an})}}deactivateRouteAndOutlet(ue,te){const le=te.getContext(ue.value.outlet),we=le&&ue.value.component?le.children:te,Ke=$l(ue);for(const pt of Object.values(Ke))this.deactivateRouteAndItsChildren(pt,we);le&&(le.outlet&&(le.outlet.deactivate(),le.children.onOutletDeactivated()),le.attachRef=null,le.route=null)}activateChildRoutes(ue,te,le){const we=$l(te);ue.children.forEach(Ke=>{this.activateRoutes(Ke,we[Ke.value.outlet],le),this.forwardEvent(new Hu(Ke.value.snapshot))}),ue.children.length&&this.forwardEvent(new Ld(ue.value.snapshot))}activateRoutes(ue,te,le){const we=ue.value,Ke=te?te.value:null;if(kl(we),we===Ke)if(we.component){const pt=le.getOrCreateContext(we.outlet);this.activateChildRoutes(ue,te,pt.children)}else this.activateChildRoutes(ue,te,le);else if(we.component){const pt=le.getOrCreateContext(we.outlet);if(this.routeReuseStrategy.shouldAttach(we.snapshot)){const an=this.routeReuseStrategy.retrieve(we.snapshot);this.routeReuseStrategy.store(we.snapshot,null),pt.children.onOutletReAttached(an.contexts),pt.attachRef=an.componentRef,pt.route=an.route.value,pt.outlet&&pt.outlet.attach(an.componentRef,an.route.value),kl(an.route.value),this.activateChildRoutes(ue,null,pt.children)}else pt.attachRef=null,pt.route=we,pt.outlet&&pt.outlet.activateWith(we,pt.injector),this.activateChildRoutes(ue,null,pt.children)}else this.activateChildRoutes(ue,null,le)}}class vd{constructor(ue){this.path=ue,this.route=this.path[this.path.length-1]}}class Zp{constructor(ue,te){this.component=ue,this.route=te}}function Ys(q,ue,te){const le=q._root;return If(le,ue?ue._root:null,te,[le.value])}function gp(q,ue){const te=Symbol(),le=ue.get(q,te);return le===te?"function"!=typeof q||(0,z.\u0275isInjectable)(q)?ue.get(q):q:le}function If(q,ue,te,le,we={canDeactivateChecks:[],canActivateChecks:[]}){const Ke=$l(ue);return q.children.forEach(pt=>{(function ry(q,ue,te,le,we={canDeactivateChecks:[],canActivateChecks:[]}){const Ke=q.value,pt=ue?ue.value:null,an=te?te.getContext(q.value.outlet):null;if(pt&&Ke.routeConfig===pt.routeConfig){const nn=function iy(q,ue,te){if("function"==typeof te)return te(q,ue);switch(te){case"pathParamsChange":return!wn(q.url,ue.url);case"pathParamsOrQueryParamsChange":return!wn(q.url,ue.url)||!ca(q.queryParams,ue.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fd(q,ue)||!ca(q.queryParams,ue.queryParams);default:return!Fd(q,ue)}}(pt,Ke,Ke.routeConfig.runGuardsAndResolvers);nn?we.canActivateChecks.push(new vd(le)):(Ke.data=pt.data,Ke._resolvedData=pt._resolvedData),If(q,ue,Ke.component?an?an.children:null:te,le,we),nn&&an&&an.outlet&&an.outlet.isActivated&&we.canDeactivateChecks.push(new Zp(an.outlet.component,pt))}else pt&&jh(ue,an,we),we.canActivateChecks.push(new vd(le)),If(q,null,Ke.component?an?an.children:null:te,le,we)})(pt,Ke[pt.value.outlet],te,le.concat([pt.value]),we),delete Ke[pt.value.outlet]}),Object.entries(Ke).forEach(([pt,an])=>jh(an,te.getContext(pt),we)),we}function jh(q,ue,te){const le=$l(q),we=q.value;Object.entries(le).forEach(([Ke,pt])=>{jh(pt,we.component?ue?ue.children.getContext(Ke):null:ue,te)}),te.canDeactivateChecks.push(new Zp(we.component&&ue&&ue.outlet&&ue.outlet.isActivated?ue.outlet.component:null,we))}function ql(q){return"function"==typeof q}function as(q){return q instanceof Yt.G||"EmptyError"===q?.name}const Eh=Symbol("INITIAL_VALUE");function nu(){return(0,Pn.n)(q=>Gt(q.map(ue=>ue.pipe((0,gr.s)(1),function ui(...q){const ue=(0,Bt.lI)(q);return(0,bt.N)((te,le)=>{(ue?Nr(q,te,ue):Nr(q,te)).subscribe(le)})}(Eh)))).pipe((0,Ne.T)(ue=>{for(const te of ue)if(!0!==te){if(te===Eh)return Eh;if(!1===te||ef(te))return te}return!0}),(0,Oi.p)(ue=>ue!==Eh),(0,gr.s)(1)))}function ef(q){return Zo(q)||q instanceof $t}function Cd(q){return(0,Gr.F)((0,ei.M)(ue=>{if("boolean"!=typeof ue)throw xi(0,ue)}),(0,Ne.T)(ue=>!0===ue))}class Ud{constructor(ue){this.segmentGroup=ue||null}}class nf extends Error{constructor(ue){super(),this.urlTree=ue}}function It(q){return(0,Tn.$)(new Ud(q))}class _p{constructor(ue,te){this.urlSerializer=ue,this.urlTree=te}lineralizeSegments(ue,te){let le=[],we=te.root;for(;;){if(le=le.concat(we.segments),0===we.numberOfChildren)return(0,M.of)(le);if(we.numberOfChildren>1||!we.children[kr])return(0,Tn.$)(new z.\u0275RuntimeError(4e3,!1));we=we.children[kr]}}applyRedirectCommands(ue,te,le,we,Ke){if("string"!=typeof te){const an=te,{queryParams:nn,fragment:lr,routeConfig:ro,url:Oo,outlet:Ko,params:Kc,data:Mu,title:qh}=we,Mh=(0,z.runInInjectionContext)(Ke,()=>an({params:Kc,data:Mu,queryParams:nn,fragment:lr,routeConfig:ro,url:Oo,outlet:Ko,title:qh}));if(Mh instanceof Kt)throw new nf(Mh);te=Mh}const pt=this.applyRedirectCreateUrlTree(te,this.urlSerializer.parse(te),ue,le);if("/"===te[0])throw new nf(pt);return pt}applyRedirectCreateUrlTree(ue,te,le,we){const Ke=this.createSegmentGroup(ue,te.root,le,we);return new Kt(Ke,this.createQueryParams(te.queryParams,this.urlTree.queryParams),te.fragment)}createQueryParams(ue,te){const le={};return Object.entries(ue).forEach(([we,Ke])=>{if("string"==typeof Ke&&":"===Ke[0]){const an=Ke.substring(1);le[we]=te[an]}else le[we]=Ke}),le}createSegmentGroup(ue,te,le,we){const Ke=this.createSegments(ue,te.segments,le,we);let pt={};return Object.entries(te.children).forEach(([an,nn])=>{pt[an]=this.createSegmentGroup(ue,nn,le,we)}),new en(Ke,pt)}createSegments(ue,te,le,we){return te.map(Ke=>":"===Ke.path[0]?this.findPosParam(ue,Ke,we):this.findOrReturn(Ke,le))}findPosParam(ue,te,le){const we=le[te.path.substring(1)];if(!we)throw new z.\u0275RuntimeError(4001,!1);return we}findOrReturn(ue,te){let le=0;for(const we of te){if(we.path===ue.path)return te.splice(le),we;le++}return ue}}const Wr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jg(q,ue,te,le,we){const Ke=$c(q,ue,te);return Ke.matched?(le=function Ml(q,ue){return q.providers&&!q._injector&&(q._injector=(0,z.createEnvironmentInjector)(q.providers,ue,`Route: ${q.path}`)),q._injector??ue}(ue,le),function dg(q,ue,te,le){const we=ue.canMatch;if(!we||0===we.length)return(0,M.of)(!0);const Ke=we.map(pt=>{const an=gp(pt,q);return Aa(function bh(q){return q&&ql(q.canMatch)}(an)?an.canMatch(ue,te):(0,z.runInInjectionContext)(q,()=>an(ue,te)))});return(0,M.of)(Ke).pipe(nu(),Cd())}(le,ue,te).pipe((0,Ne.T)(pt=>!0===pt?Ke:{...Wr}))):(0,M.of)(Ke)}function $c(q,ue,te){if("**"===ue.path)return function Ls(q){return{matched:!0,parameters:q.length>0?Ho(q).parameters:{},consumedSegments:q,remainingSegments:[],positionalParamSegments:{}}}(te);if(""===ue.path)return"full"===ue.pathMatch&&(q.hasChildren()||te.length>0)?{...Wr}:{matched:!0,consumedSegments:[],remainingSegments:te,parameters:{},positionalParamSegments:{}};const we=(ue.matcher||va)(te,q,ue);if(!we)return{...Wr};const Ke={};Object.entries(we.posParams??{}).forEach(([an,nn])=>{Ke[an]=nn.path});const pt=we.consumed.length>0?{...Ke,...we.consumed[we.consumed.length-1].parameters}:Ke;return{matched:!0,consumedSegments:we.consumed,remainingSegments:te.slice(we.consumed.length),parameters:pt,positionalParamSegments:we.posParams??{}}}function pl(q,ue,te,le){return te.length>0&&function Gh(q,ue,te){return te.some(le=>go(q,ue,le)&&bs(le)!==kr)}(q,te,le)?{segmentGroup:new en(ue,bd(le,new en(te,q.children))),slicedSegments:[]}:0===te.length&&function rf(q,ue,te){return te.some(le=>go(q,ue,le))}(q,te,le)?{segmentGroup:new en(q.segments,hg(q,te,le,q.children)),slicedSegments:te}:{segmentGroup:new en(q.segments,q.children),slicedSegments:te}}function hg(q,ue,te,le){const we={};for(const Ke of te)if(go(q,ue,Ke)&&!le[bs(Ke)]){const pt=new en([],{});we[bs(Ke)]=pt}return{...le,...we}}function bd(q,ue){const te={};te[kr]=ue;for(const le of q)if(""===le.path&&bs(le)!==kr){const we=new en([],{});te[bs(le)]=we}return te}function go(q,ue,te){return(!(q.hasChildren()||ue.length>0)||"full"!==te.pathMatch)&&""===te.path}class Ed{}class tm{constructor(ue,te,le,we,Ke,pt,an){this.injector=ue,this.configLoader=te,this.rootComponentType=le,this.config=we,this.urlTree=Ke,this.paramsInheritanceStrategy=pt,this.urlSerializer=an,this.applyRedirects=new _p(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(ue){return new z.\u0275RuntimeError(4002,`'${ue.segmentGroup}'`)}recognize(){const ue=pl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(ue).pipe((0,Ne.T)(({children:te,rootSnapshot:le})=>{const we=new Mr(le,te),Ke=new vu("",we),pt=Ga(le,[],this.urlTree.queryParams,this.urlTree.fragment);return pt.queryParams=this.urlTree.queryParams,Ke.url=this.urlSerializer.serialize(pt),{state:Ke,tree:pt}}))}match(ue){const te=new Xc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),kr,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,ue,kr,te).pipe((0,Ne.T)(le=>({children:le,rootSnapshot:te})),(0,ra.W)(le=>{if(le instanceof nf)return this.urlTree=le.urlTree,this.match(le.urlTree.root);throw le instanceof Ud?this.noMatchError(le):le}))}processSegmentGroup(ue,te,le,we,Ke){return 0===le.segments.length&&le.hasChildren()?this.processChildren(ue,te,le,Ke):this.processSegment(ue,te,le,le.segments,we,!0,Ke).pipe((0,Ne.T)(pt=>pt instanceof Mr?[pt]:[]))}processChildren(ue,te,le,we){const Ke=[];for(const pt of Object.keys(le.children))"primary"===pt?Ke.unshift(pt):Ke.push(pt);return(0,R.H)(Ke).pipe((0,hr.H)(pt=>{const an=le.children[pt],nn=function zh(q,ue){const te=q.filter(le=>bs(le)===ue);return te.push(...q.filter(le=>bs(le)!==ue)),te}(te,pt);return this.processSegmentGroup(ue,nn,an,pt,we)}),function No(q,ue){return(0,bt.N)(function Hi(q,ue,te,le,we){return(Ke,pt)=>{let an=te,nn=ue,lr=0;Ke.subscribe((0,Pt._)(pt,ro=>{const Oo=lr++;nn=an?q(nn,ro,Oo):(an=!0,ro),le&&pt.next(nn)},we&&(()=>{an&&pt.next(nn),pt.complete()})))}}(q,ue,arguments.length>=2,!0))}((pt,an)=>(pt.push(...an),pt)),(0,fo.U)(null),function _i(q,ue){const te=arguments.length>=2;return le=>le.pipe(q?(0,Oi.p)((we,Ke)=>q(we,Ke,le)):Ae.D,jr(1),te?(0,fo.U)(ue):(0,Do.v)(()=>new Yt.G))}(),(0,On.Z)(pt=>{if(null===pt)return It(le);const an=_a(pt);return function Sh(q){q.sort((ue,te)=>ue.value.outlet===kr?-1:te.value.outlet===kr?1:ue.value.outlet.localeCompare(te.value.outlet))}(an),(0,M.of)(an)}))}processSegment(ue,te,le,we,Ke,pt,an){return(0,R.H)(te).pipe((0,hr.H)(nn=>this.processSegmentAgainstRoute(nn._injector??ue,te,nn,le,we,Ke,pt,an).pipe((0,ra.W)(lr=>{if(lr instanceof Ud)return(0,M.of)(null);throw lr}))),(0,Dr.$)(nn=>!!nn),(0,ra.W)(nn=>{if(as(nn))return function Oa(q,ue,te){return 0===ue.length&&!q.children[te]}(le,we,Ke)?(0,M.of)(new Ed):It(le);throw nn}))}processSegmentAgainstRoute(ue,te,le,we,Ke,pt,an,nn){return bs(le)===pt||pt!==kr&&go(we,Ke,le)?void 0===le.redirectTo?this.matchSegmentAgainstRoute(ue,we,le,Ke,pt,nn):this.allowRedirects&&an?this.expandSegmentAgainstRouteUsingRedirect(ue,we,te,le,Ke,pt,nn):It(we):It(we)}expandSegmentAgainstRouteUsingRedirect(ue,te,le,we,Ke,pt,an){const{matched:nn,parameters:lr,consumedSegments:ro,positionalParamSegments:Oo,remainingSegments:Ko}=$c(te,we,Ke);if(!nn)return It(te);"string"==typeof we.redirectTo&&"/"===we.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Kc=new Xc(Ke,lr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Bd(we),bs(we),we.component??we._loadedComponent??null,we,Zc(we)),Mu=Vl(Kc,an,this.paramsInheritanceStrategy);Kc.params=Object.freeze(Mu.params),Kc.data=Object.freeze(Mu.data);const qh=this.applyRedirects.applyRedirectCommands(ro,we.redirectTo,Oo,Kc,ue);return this.applyRedirects.lineralizeSegments(we,qh).pipe((0,On.Z)(Mh=>this.processSegment(ue,le,te,Mh.concat(Ko),pt,!1,an)))}matchSegmentAgainstRoute(ue,te,le,we,Ke,pt){const an=Jg(te,le,we,ue);return"**"===le.path&&(te.children={}),an.pipe((0,Pn.n)(nn=>nn.matched?this.getChildConfig(ue=le._injector??ue,le,we).pipe((0,Pn.n)(({routes:lr})=>{const ro=le._loadedInjector??ue,{parameters:Oo,consumedSegments:Ko,remainingSegments:Kc}=nn,Mu=new Xc(Ko,Oo,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Bd(le),bs(le),le.component??le._loadedComponent??null,le,Zc(le)),qh=Vl(Mu,pt,this.paramsInheritanceStrategy);Mu.params=Object.freeze(qh.params),Mu.data=Object.freeze(qh.data);const{segmentGroup:Mh,slicedSegments:Of}=pl(te,Ko,Kc,lr);if(0===Of.length&&Mh.hasChildren())return this.processChildren(ro,lr,Mh,Mu).pipe((0,Ne.T)(cy=>new Mr(Mu,cy)));if(0===lr.length&&0===Of.length)return(0,M.of)(new Mr(Mu,[]));const _g=bs(le)===Ke;return this.processSegment(ro,lr,Mh,Of,_g?kr:Ke,!0,Mu).pipe((0,Ne.T)(cy=>new Mr(Mu,cy instanceof Mr?[cy]:[])))})):It(te)))}getChildConfig(ue,te,le){return te.children?(0,M.of)({routes:te.children,injector:ue}):te.loadChildren?void 0!==te._loadedRoutes?(0,M.of)({routes:te._loadedRoutes,injector:te._loadedInjector}):function no(q,ue,te,le){const we=ue.canLoad;if(void 0===we||0===we.length)return(0,M.of)(!0);const Ke=we.map(pt=>{const an=gp(pt,q);return Aa(function oy(q){return q&&ql(q.canLoad)}(an)?an.canLoad(ue,te):(0,z.runInInjectionContext)(q,()=>an(ue,te)))});return(0,M.of)(Ke).pipe(nu(),Cd())}(ue,te,le).pipe((0,On.Z)(we=>we?this.configLoader.loadChildren(ue,te).pipe((0,ei.M)(Ke=>{te._loadedRoutes=Ke.routes,te._loadedInjector=Ke.injector})):function j1(q){return(0,Tn.$)(or(!1,os.GuardRejected))}())):(0,M.of)({routes:[],injector:ue})}}function pg(q){const ue=q.value.routeConfig;return ue&&""===ue.path}function _a(q){const ue=[],te=new Set;for(const le of q){if(!pg(le)){ue.push(le);continue}const we=ue.find(Ke=>le.value.routeConfig===Ke.value.routeConfig);void 0!==we?(we.children.push(...le.children),te.add(we)):ue.push(le)}for(const le of te){const we=_a(le.children);ue.push(new Mr(le.value,we))}return ue.filter(le=>!te.has(le))}function Bd(q){return q.data||{}}function Zc(q){return q.resolve||{}}function ed(q){const ue=q.children.map(te=>ed(te)).flat();return[q,...ue]}function Fe(q){return(0,Pn.n)(ue=>{const te=q(ue);return te?(0,R.H)(te).pipe((0,Ne.T)(()=>ue)):(0,M.of)(ue)})}let pe=(()=>{class q{buildTitle(te){let le,we=te.root;for(;void 0!==we;)le=this.getResolvedTitleForRoute(we)??le,we=we.children.find(Ke=>Ke.outlet===kr);return le}getResolvedTitleForRoute(te){return te.data[Ei]}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:()=>(0,z.inject)(Te),providedIn:"root"})}}return q})(),Te=(()=>{class q extends pe{constructor(te){super(),this.title=te}updateTitle(te){const le=this.buildTitle(te);void 0!==le&&this.title.setTitle(le)}static{this.\u0275fac=function(le){return new(le||q)(z.\u0275\u0275inject(Ta.Title))}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();const ot=new z.InjectionToken("",{providedIn:"root",factory:()=>({})});let gn=(()=>{class q{static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275cmp=z.\u0275\u0275defineComponent({type:q,selectors:[["ng-component"]],standalone:!0,features:[z.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(le,we){1&le&&z.\u0275\u0275element(0,"router-outlet")},dependencies:[Ac],encapsulation:2})}}return q})();function qn(q){const ue=q.children&&q.children.map(qn),te=ue?{...q,children:ue}:{...q};return!te.component&&!te.loadComponent&&(ue||te.loadChildren)&&te.outlet&&te.outlet!==kr&&(te.component=gn),te}const zr=new z.InjectionToken("");let Fs=(()=>{class q{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,z.inject)(z.Compiler)}loadComponent(te){if(this.componentLoaders.get(te))return this.componentLoaders.get(te);if(te._loadedComponent)return(0,M.of)(te._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(te);const le=Aa(te.loadComponent()).pipe((0,Ne.T)(Tr),(0,ei.M)(Ke=>{this.onLoadEndListener&&this.onLoadEndListener(te),te._loadedComponent=Ke}),(0,tc.j)(()=>{this.componentLoaders.delete(te)})),we=new fn(le,()=>new Ut.B).pipe(qt());return this.componentLoaders.set(te,we),we}loadChildren(te,le){if(this.childrenLoaders.get(le))return this.childrenLoaders.get(le);if(le._loadedRoutes)return(0,M.of)({routes:le._loadedRoutes,injector:le._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(le);const Ke=$o(le,this.compiler,te,this.onLoadEndListener).pipe((0,tc.j)(()=>{this.childrenLoaders.delete(le)})),pt=new fn(Ke,()=>new Ut.B).pipe(qt());return this.childrenLoaders.set(le,pt),pt}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();function $o(q,ue,te,le){return Aa(q.loadChildren()).pipe((0,Ne.T)(Tr),(0,On.Z)(we=>we instanceof z.NgModuleFactory||Array.isArray(we)?(0,M.of)(we):(0,R.H)(ue.compileModuleAsync(we))),(0,Ne.T)(we=>{le&&le(q);let Ke,pt;return Array.isArray(we)?pt=we:(Ke=we.create(te).injector,pt=Ke.get(zr,[],{optional:!0,self:!0}).flat()),{routes:pt.map(qn),injector:Ke}}))}function Tr(q){return function Xa(q){return q&&"object"==typeof q&&"default"in q}(q)?q.default:q}let us=(()=>{class q{static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:()=>(0,z.inject)(qa),providedIn:"root"})}}return q})(),qa=(()=>{class q{shouldProcessUrl(te){return!0}extract(te){return te}merge(te,le){return te}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();const Hs=new z.InjectionToken(""),Bu=new z.InjectionToken("");function ru(q,ue,te){const le=q.get(Bu),we=q.get(bn.DOCUMENT);return q.get(z.NgZone).runOutsideAngular(()=>{if(!we.startViewTransition||le.skipNextTransition)return le.skipNextTransition=!1,new Promise(lr=>setTimeout(lr));let Ke;const pt=new Promise(lr=>{Ke=lr}),an=we.startViewTransition(()=>(Ke(),function zd(q){return new Promise(ue=>{(0,z.afterNextRender)({read:()=>setTimeout(ue)},{injector:q})})}(q))),{onViewTransitionCreated:nn}=le;return nn&&(0,z.runInInjectionContext)(q,()=>nn({transition:an,from:ue,to:te})),pt})}const Sd=new z.InjectionToken("");let Iu=(()=>{class q{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ut.B,this.transitionAbortSubject=new Ut.B,this.configLoader=(0,z.inject)(Fs),this.environmentInjector=(0,z.inject)(z.EnvironmentInjector),this.urlSerializer=(0,z.inject)(Ti),this.rootContexts=(0,z.inject)(Qc),this.location=(0,z.inject)(bn.Location),this.inputBindingEnabled=null!==(0,z.inject)(Pl,{optional:!0}),this.titleStrategy=(0,z.inject)(pe),this.options=(0,z.inject)(ot,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,z.inject)(us),this.createViewTransition=(0,z.inject)(Hs,{optional:!0}),this.navigationErrorHandler=(0,z.inject)(Sd,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,M.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=we=>this.events.next(new _c(we)),this.configLoader.onLoadStartListener=we=>this.events.next(new La(we))}complete(){this.transitions?.complete()}handleNavigationRequest(te){const le=++this.navigationId;this.transitions?.next({...this.transitions.value,...te,id:le})}setupNavigations(te,le,we){return this.transitions=new G.t({id:0,currentUrlTree:le,currentRawUrl:le,extractedUrl:this.urlHandlingStrategy.extract(le),urlAfterRedirects:this.urlHandlingStrategy.extract(le),rawUrl:le,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:wc,restoredState:null,currentSnapshot:we.snapshot,targetSnapshot:null,currentRouterState:we,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Oi.p)(Ke=>0!==Ke.id),(0,Ne.T)(Ke=>({...Ke,extractedUrl:this.urlHandlingStrategy.extract(Ke.rawUrl)})),(0,Pn.n)(Ke=>{let pt=!1,an=!1;return(0,M.of)(Ke).pipe((0,Pn.n)(nn=>{if(this.navigationId>Ke.id)return this.cancelNavigationTransition(Ke,"",os.SupersededByNewNavigation),Nn.w;this.currentTransition=Ke,this.currentNavigation={id:nn.id,initialUrl:nn.rawUrl,extractedUrl:nn.extractedUrl,targetBrowserUrl:"string"==typeof nn.extras.browserUrl?this.urlSerializer.parse(nn.extras.browserUrl):nn.extras.browserUrl,trigger:nn.source,extras:nn.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const lr=!te.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!lr&&"reload"!==(nn.extras.onSameUrlNavigation??te.onSameUrlNavigation)){const Oo="";return this.events.next(new Co(nn.id,this.urlSerializer.serialize(nn.rawUrl),Oo,ka.IgnoredSameUrlNavigation)),nn.resolve(!1),Nn.w}if(this.urlHandlingStrategy.shouldProcessUrl(nn.rawUrl))return(0,M.of)(nn).pipe((0,Pn.n)(Oo=>{const Ko=this.transitions?.getValue();return this.events.next(new Wc(Oo.id,this.urlSerializer.serialize(Oo.extractedUrl),Oo.source,Oo.restoredState)),Ko!==this.transitions?.getValue()?Nn.w:Promise.resolve(Oo)}),function Ll(q,ue,te,le,we,Ke){return(0,On.Z)(pt=>function em(q,ue,te,le,we,Ke,pt="emptyOnly"){return new tm(q,ue,te,le,we,pt,Ke).recognize()}(q,ue,te,le,pt.extractedUrl,we,Ke).pipe((0,Ne.T)(({state:an,tree:nn})=>({...pt,targetSnapshot:an,urlAfterRedirects:nn}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,te.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,ei.M)(Oo=>{Ke.targetSnapshot=Oo.targetSnapshot,Ke.urlAfterRedirects=Oo.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Oo.urlAfterRedirects};const Ko=new Lu(Oo.id,this.urlSerializer.serialize(Oo.extractedUrl),this.urlSerializer.serialize(Oo.urlAfterRedirects),Oo.targetSnapshot);this.events.next(Ko)}));if(lr&&this.urlHandlingStrategy.shouldProcessUrl(nn.currentRawUrl)){const{id:Oo,extractedUrl:Ko,source:Kc,restoredState:Mu,extras:qh}=nn,Mh=new Wc(Oo,this.urlSerializer.serialize(Ko),Kc,Mu);this.events.next(Mh);const Of=Ol(this.rootComponentType).snapshot;return this.currentTransition=Ke={...nn,targetSnapshot:Of,urlAfterRedirects:Ko,extras:{...qh,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Ko,(0,M.of)(Ke)}{const Oo="";return this.events.next(new Co(nn.id,this.urlSerializer.serialize(nn.extractedUrl),Oo,ka.IgnoredByUrlHandlingStrategy)),nn.resolve(!1),Nn.w}}),(0,ei.M)(nn=>{const lr=new Lo(nn.id,this.urlSerializer.serialize(nn.extractedUrl),this.urlSerializer.serialize(nn.urlAfterRedirects),nn.targetSnapshot);this.events.next(lr)}),(0,Ne.T)(nn=>(this.currentTransition=Ke={...nn,guards:Ys(nn.targetSnapshot,nn.currentSnapshot,this.rootContexts)},Ke)),function eh(q,ue){return(0,On.Z)(te=>{const{targetSnapshot:le,currentSnapshot:we,guards:{canActivateChecks:Ke,canDeactivateChecks:pt}}=te;return 0===pt.length&&0===Ke.length?(0,M.of)({...te,guardsResult:!0}):function Hd(q,ue,te,le){return(0,R.H)(q).pipe((0,On.Z)(we=>function Zg(q,ue,te,le,we){const Ke=ue&&ue.routeConfig?ue.routeConfig.canDeactivate:null;if(!Ke||0===Ke.length)return(0,M.of)(!0);const pt=Ke.map(an=>{const nn=_u(ue)??we,lr=gp(an,nn);return Aa(function ug(q){return q&&ql(q.canDeactivate)}(lr)?lr.canDeactivate(q,ue,te,le):(0,z.runInInjectionContext)(nn,()=>lr(q,ue,te,le))).pipe((0,Dr.$)())});return(0,M.of)(pt).pipe(nu())}(we.component,we.route,te,ue,le)),(0,Dr.$)(we=>!0!==we,!0))}(pt,le,we,q).pipe((0,On.Z)(an=>an&&function To(q){return"boolean"==typeof q}(an)?function Vh(q,ue,te,le){return(0,R.H)(ue).pipe((0,hr.H)(we=>Nr(function mp(q,ue){return null!==q&&ue&&ue(new Ca(q)),(0,M.of)(!0)}(we.route.parent,le),function th(q,ue){return null!==q&&ue&&ue(new Fu(q)),(0,M.of)(!0)}(we.route,le),function Mf(q,ue,te){const le=ue[ue.length-1],Ke=ue.slice(0,ue.length-1).reverse().map(pt=>function qm(q){const ue=q.routeConfig?q.routeConfig.canActivateChild:null;return ue&&0!==ue.length?{node:q,guards:ue}:null}(pt)).filter(pt=>null!==pt).map(pt=>(0,wr.v)(()=>{const an=pt.guards.map(nn=>{const lr=_u(pt.node)??te,ro=gp(nn,lr);return Aa(function Jp(q){return q&&ql(q.canActivateChild)}(ro)?ro.canActivateChild(le,q):(0,z.runInInjectionContext)(lr,()=>ro(le,q))).pipe((0,Dr.$)())});return(0,M.of)(an).pipe(nu())}));return(0,M.of)(Ke).pipe(nu())}(q,we.path,te),function tf(q,ue,te){const le=ue.routeConfig?ue.routeConfig.canActivate:null;if(!le||0===le.length)return(0,M.of)(!0);const we=le.map(Ke=>(0,wr.v)(()=>{const pt=_u(ue)??te,an=gp(Ke,pt);return Aa(function $h(q){return q&&ql(q.canActivate)}(an)?an.canActivate(ue,q):(0,z.runInInjectionContext)(pt,()=>an(ue,q))).pipe((0,Dr.$)())}));return(0,M.of)(we).pipe(nu())}(q,we.route,te))),(0,Dr.$)(we=>!0!==we,!0))}(le,Ke,q,ue):(0,M.of)(an)),(0,Ne.T)(an=>({...te,guardsResult:an})))})}(this.environmentInjector,nn=>this.events.next(nn)),(0,ei.M)(nn=>{if(Ke.guardsResult=nn.guardsResult,nn.guardsResult&&"boolean"!=typeof nn.guardsResult)throw xi(0,nn.guardsResult);const lr=new Ks(nn.id,this.urlSerializer.serialize(nn.extractedUrl),this.urlSerializer.serialize(nn.urlAfterRedirects),nn.targetSnapshot,!!nn.guardsResult);this.events.next(lr)}),(0,Oi.p)(nn=>!!nn.guardsResult||(this.cancelNavigationTransition(nn,"",os.GuardRejected),!1)),Fe(nn=>{if(nn.guards.canActivateChecks.length)return(0,M.of)(nn).pipe((0,ei.M)(lr=>{const ro=new Dd(lr.id,this.urlSerializer.serialize(lr.extractedUrl),this.urlSerializer.serialize(lr.urlAfterRedirects),lr.targetSnapshot);this.events.next(ro)}),(0,Pn.n)(lr=>{let ro=!1;return(0,M.of)(lr).pipe(function sy(q,ue){return(0,On.Z)(te=>{const{targetSnapshot:le,guards:{canActivateChecks:we}}=te;if(!we.length)return(0,M.of)(te);const Ke=new Set(we.map(nn=>nn.route)),pt=new Set;for(const nn of Ke)if(!pt.has(nn))for(const lr of ed(nn))pt.add(lr);let an=0;return(0,R.H)(pt).pipe((0,hr.H)(nn=>Ke.has(nn)?function xc(q,ue,te,le){const we=q.routeConfig,Ke=q._resolve;return void 0!==we?.title&&!ic(we)&&(Ke[Ei]=we.title),function fg(q,ue,te,le){const we=Xo(q);if(0===we.length)return(0,M.of)({});const Ke={};return(0,R.H)(we).pipe((0,On.Z)(pt=>function ie(q,ue,te,le){const we=_u(ue)??le,Ke=gp(q,we);return Aa(Ke.resolve?Ke.resolve(ue,te):(0,z.runInInjectionContext)(we,()=>Ke(ue,te)))}(q[pt],ue,te,le).pipe((0,Dr.$)(),(0,ei.M)(an=>{if(an instanceof $t)throw xi(new ji,an);Ke[pt]=an}))),jr(1),(0,xs.u)(Ke),(0,ra.W)(pt=>as(pt)?Nn.w:(0,Tn.$)(pt)))}(Ke,q,ue,le).pipe((0,Ne.T)(pt=>(q._resolvedData=pt,q.data=Vl(q,q.parent,te).resolve,null)))}(nn,le,q,ue):(nn.data=Vl(nn,nn.parent,q).resolve,(0,M.of)(void 0))),(0,ei.M)(()=>an++),jr(1),(0,On.Z)(nn=>an===pt.size?(0,M.of)(te):Nn.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,ei.M)({next:()=>ro=!0,complete:()=>{ro||this.cancelNavigationTransition(lr,"",os.NoDataFromResolver)}}))}),(0,ei.M)(lr=>{const ro=new kd(lr.id,this.urlSerializer.serialize(lr.extractedUrl),this.urlSerializer.serialize(lr.urlAfterRedirects),lr.targetSnapshot);this.events.next(ro)}))}),Fe(nn=>{const lr=ro=>{const Oo=[];ro.routeConfig?.loadComponent&&!ro.routeConfig._loadedComponent&&Oo.push(this.configLoader.loadComponent(ro.routeConfig).pipe((0,ei.M)(Ko=>{ro.component=Ko}),(0,Ne.T)(()=>{})));for(const Ko of ro.children)Oo.push(...lr(Ko));return Oo};return Gt(lr(nn.targetSnapshot.root)).pipe((0,fo.U)(null),(0,gr.s)(1))}),Fe(()=>this.afterPreactivation()),(0,Pn.n)(()=>{const{currentSnapshot:nn,targetSnapshot:lr}=Ke,ro=this.createViewTransition?.(this.environmentInjector,nn.root,lr.root);return ro?(0,R.H)(ro).pipe((0,Ne.T)(()=>Ke)):(0,M.of)(Ke)}),(0,Ne.T)(nn=>{const lr=function Es(q,ue,te){const le=md(q,ue._root,te?te._root:void 0);return new gd(le,ue)}(te.routeReuseStrategy,nn.targetSnapshot,nn.currentRouterState);return this.currentTransition=Ke={...nn,targetRouterState:lr},this.currentNavigation.targetRouterState=lr,Ke}),(0,ei.M)(()=>{this.events.next(new Uu)}),((q,ue,te,le)=>(0,Ne.T)(we=>(new Af(ue,we.targetRouterState,we.currentRouterState,te,le).activate(q),we)))(this.rootContexts,te.routeReuseStrategy,nn=>this.events.next(nn),this.inputBindingEnabled),(0,gr.s)(1),(0,ei.M)({next:nn=>{pt=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ls(nn.id,this.urlSerializer.serialize(nn.extractedUrl),this.urlSerializer.serialize(nn.urlAfterRedirects))),this.titleStrategy?.updateTitle(nn.targetRouterState.snapshot),nn.resolve(!0)},complete:()=>{pt=!0}}),function Fo(q){return(0,bt.N)((ue,te)=>{(0,gc.Tg)(q).subscribe((0,Pt._)(te,()=>te.complete(),Vs.l)),!te.closed&&ue.subscribe(te)})}(this.transitionAbortSubject.pipe((0,ei.M)(nn=>{throw nn}))),(0,tc.j)(()=>{!pt&&!an&&this.cancelNavigationTransition(Ke,"",os.SupersededByNewNavigation),this.currentTransition?.id===Ke.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,ra.W)(nn=>{if(an=!0,ma(nn))this.events.next(new mc(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),nn.message,nn.cancellationCode)),function qo(q){return ma(q)&&Zo(q.url)}(nn)?this.events.next(new Wa(nn.url,nn.navigationBehaviorOptions)):Ke.resolve(!1);else{const lr=new tu(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),nn,Ke.targetSnapshot??void 0);try{const ro=(0,z.runInInjectionContext)(this.environmentInjector,()=>this.navigationErrorHandler?.(lr));if(ro instanceof $t){const{message:Oo,cancellationCode:Ko}=xi(0,ro);this.events.next(new mc(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),Oo,Ko)),this.events.next(new Wa(ro.redirectTo,ro.navigationBehaviorOptions))}else{this.events.next(lr);const Oo=te.errorHandler(nn);Ke.resolve(!!Oo)}}catch(ro){this.options.resolveNavigationPromiseOnError?Ke.resolve(!1):Ke.reject(ro)}}return Nn.w}))}))}cancelNavigationTransition(te,le,we){const Ke=new mc(te.id,this.urlSerializer.serialize(te.extractedUrl),le,we);this.events.next(Ke),te.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const te=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),le=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return te.toString()!==le?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();function rh(q){return q!==wc}let td=(()=>{class q{static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:()=>(0,z.inject)(Th),providedIn:"root"})}}return q})();class wh{shouldDetach(ue){return!1}store(ue,te){}shouldAttach(ue){return!1}retrieve(ue){return null}shouldReuseRoute(ue,te){return ue.routeConfig===te.routeConfig}}let Th=(()=>{class q extends wh{static{this.\u0275fac=(()=>{let te;return function(we){return(te||(te=z.\u0275\u0275getInheritedFactory(q)))(we||q)}})()}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})(),rm=(()=>{class q{static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:()=>(0,z.inject)(st),providedIn:"root"})}}return q})(),st=(()=>{class q extends rm{constructor(){super(...arguments),this.location=(0,z.inject)(bn.Location),this.urlSerializer=(0,z.inject)(Ti),this.options=(0,z.inject)(ot,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,z.inject)(us),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Kt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ol(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(te){return this.location.subscribe(le=>{"popstate"===le.type&&te(le.url,le.state)})}handleRouterEvent(te,le){if(te instanceof Wc)this.stateMemento=this.createStateMemento();else if(te instanceof Co)this.rawUrlTree=le.initialUrl;else if(te instanceof Lu){if("eager"===this.urlUpdateStrategy&&!le.extras.skipLocationChange){const we=this.urlHandlingStrategy.merge(le.finalUrl,le.initialUrl);this.setBrowserUrl(le.targetBrowserUrl??we,le)}}else te instanceof Uu?(this.currentUrlTree=le.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(le.finalUrl,le.initialUrl),this.routerState=le.targetRouterState,"deferred"===this.urlUpdateStrategy&&!le.extras.skipLocationChange&&this.setBrowserUrl(le.targetBrowserUrl??this.rawUrlTree,le)):te instanceof mc&&(te.code===os.GuardRejected||te.code===os.NoDataFromResolver)?this.restoreHistory(le):te instanceof tu?this.restoreHistory(le,!0):te instanceof ls&&(this.lastSuccessfulId=te.id,this.currentPageId=this.browserPageId)}setBrowserUrl(te,le){const we=te instanceof Kt?this.urlSerializer.serialize(te):te;if(this.location.isCurrentPathEqualTo(we)||le.extras.replaceUrl){const pt={...le.extras.state,...this.generateNgRouterState(le.id,this.browserPageId)};this.location.replaceState(we,"",pt)}else{const Ke={...le.extras.state,...this.generateNgRouterState(le.id,this.browserPageId+1)};this.location.go(we,"",Ke)}}restoreHistory(te,le=!1){if("computed"===this.canceledNavigationResolution){const Ke=this.currentPageId-this.browserPageId;0!==Ke?this.location.historyGo(Ke):this.currentUrlTree===te.finalUrl&&0===Ke&&(this.resetState(te),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(le&&this.resetState(te),this.resetUrlToCurrentUrlTree())}resetState(te){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,te.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(te,le){return"computed"===this.canceledNavigationResolution?{navigationId:te,\u0275routerPageId:le}:{navigationId:te}}static{this.\u0275fac=(()=>{let te;return function(we){return(te||(te=z.\u0275\u0275getInheritedFactory(q)))(we||q)}})()}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();var H=function(q){return q[q.COMPLETE=0]="COMPLETE",q[q.FAILED=1]="FAILED",q[q.REDIRECTING=2]="REDIRECTING",q}(H||{});function ee(q,ue){q.events.pipe((0,Oi.p)(te=>te instanceof ls||te instanceof mc||te instanceof tu||te instanceof Co),(0,Ne.T)(te=>te instanceof ls||te instanceof Co?H.COMPLETE:te instanceof mc&&(te.code===os.Redirect||te.code===os.SupersededByNewNavigation)?H.REDIRECTING:H.FAILED),(0,Oi.p)(te=>te!==H.REDIRECTING),(0,gr.s)(1)).subscribe(()=>{ue()})}function ne(q){throw q}const ce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oe=(()=>{class q{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,z.inject)(z.\u0275Console),this.stateManager=(0,z.inject)(rm),this.options=(0,z.inject)(ot,{optional:!0})||{},this.pendingTasks=(0,z.inject)(z.\u0275PendingTasks),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,z.inject)(Iu),this.urlSerializer=(0,z.inject)(Ti),this.location=(0,z.inject)(bn.Location),this.urlHandlingStrategy=(0,z.inject)(us),this._events=new Ut.B,this.errorHandler=this.options.errorHandler||ne,this.navigated=!1,this.routeReuseStrategy=(0,z.inject)(td),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,z.inject)(zr,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,z.inject)(Pl,{optional:!0}),this.eventsSubscription=new br.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:te=>{this.console.warn(te)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const te=this.navigationTransitions.events.subscribe(le=>{try{const we=this.navigationTransitions.currentTransition,Ke=this.navigationTransitions.currentNavigation;if(null!==we&&null!==Ke)if(this.stateManager.handleRouterEvent(le,Ke),le instanceof mc&&le.code!==os.Redirect&&le.code!==os.SupersededByNewNavigation)this.navigated=!0;else if(le instanceof ls)this.navigated=!0;else if(le instanceof Wa){const pt=le.navigationBehaviorOptions,an=this.urlHandlingStrategy.merge(le.url,we.currentRawUrl),nn={browserUrl:we.extras.browserUrl,info:we.extras.info,skipLocationChange:we.extras.skipLocationChange,replaceUrl:we.extras.replaceUrl||"eager"===this.urlUpdateStrategy||rh(we.source),...pt};this.scheduleNavigation(an,wc,null,nn,{resolve:we.resolve,reject:we.reject,promise:we.promise})}(function at(q){return!(q instanceof Uu||q instanceof Wa)})(le)&&this._events.next(le)}catch(we){this.navigationTransitions.transitionAbortSubject.next(we)}});this.eventsSubscription.add(te)}resetRootComponentType(te){this.routerState.root.component=te,this.navigationTransitions.rootComponentType=te}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((te,le)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(te,"popstate",le)},0)})}navigateToSyncWithBrowser(te,le,we){const Ke={replaceUrl:!0},pt=we?.navigationId?we:null;if(we){const nn={...we};delete nn.navigationId,delete nn.\u0275routerPageId,0!==Object.keys(nn).length&&(Ke.state=nn)}const an=this.parseUrl(te);this.scheduleNavigation(an,le,pt,Ke)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(te){this.config=te.map(qn),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(te,le={}){const{relativeTo:we,queryParams:Ke,fragment:pt,queryParamsHandling:an,preserveFragment:nn}=le,lr=nn?this.currentUrlTree.fragment:pt;let Oo,ro=null;switch(an??this.options.defaultQueryParamsHandling){case"merge":ro={...this.currentUrlTree.queryParams,...Ke};break;case"preserve":ro=this.currentUrlTree.queryParams;break;default:ro=Ke||null}null!==ro&&(ro=this.removeEmptyProps(ro));try{Oo=hl(we?we.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof te[0]||"/"!==te[0][0])&&(te=[]),Oo=this.currentUrlTree.root}return We(Oo,te,ro,lr??null)}navigateByUrl(te,le={skipLocationChange:!1}){const we=Zo(te)?te:this.parseUrl(te),Ke=this.urlHandlingStrategy.merge(we,this.rawUrlTree);return this.scheduleNavigation(Ke,wc,null,le)}navigate(te,le={skipLocationChange:!1}){return function De(q){for(let ue=0;ue<q.length;ue++)if(null==q[ue])throw new z.\u0275RuntimeError(4008,!1)}(te),this.navigateByUrl(this.createUrlTree(te,le),le)}serializeUrl(te){return this.urlSerializer.serialize(te)}parseUrl(te){try{return this.urlSerializer.parse(te)}catch{return this.urlSerializer.parse("/")}}isActive(te,le){let we;if(we=!0===le?{...ce}:!1===le?{...Ce}:le,Zo(te))return Ci(this.currentUrlTree,te,we);const Ke=this.parseUrl(te);return Ci(this.currentUrlTree,Ke,we)}removeEmptyProps(te){return Object.entries(te).reduce((le,[we,Ke])=>(null!=Ke&&(le[we]=Ke),le),{})}scheduleNavigation(te,le,we,Ke,pt){if(this.disposed)return Promise.resolve(!1);let an,nn,lr;pt?(an=pt.resolve,nn=pt.reject,lr=pt.promise):lr=new Promise((Oo,Ko)=>{an=Oo,nn=Ko});const ro=this.pendingTasks.add();return ee(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(ro))}),this.navigationTransitions.handleNavigationRequest({source:le,restoredState:we,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:te,extras:Ke,resolve:an,reject:nn,promise:lr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),lr.catch(Oo=>Promise.reject(Oo))}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})(),nt=(()=>{class q{constructor(te,le,we,Ke,pt,an){this.router=te,this.route=le,this.tabIndexAttribute=we,this.renderer=Ke,this.el=pt,this.locationStrategy=an,this.href=null,this.onChanges=new Ut.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const nn=pt.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===nn||"area"===nn,this.isAnchorElement?this.subscription=te.events.subscribe(lr=>{lr instanceof ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(te){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",te)}ngOnChanges(te){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(te){null==te?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Zo(te)||Array.isArray(te)?te:[te],this.setTabIndexIfNotOnNativeEl("0"))}onClick(te,le,we,Ke,pt){const an=this.urlTree;return!!(null===an||this.isAnchorElement&&(0!==te||le||we||Ke||pt||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(an,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const te=this.urlTree;this.href=null!==te&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(te)):null;const le=null===this.href?null:(0,z.\u0275\u0275sanitizeUrlOrResourceUrl)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",le)}applyAttributeValue(te,le){const we=this.renderer,Ke=this.el.nativeElement;null!==le?we.setAttribute(Ke,te,le):we.removeAttribute(Ke,te)}get urlTree(){return null===this.routerLinkInput?null:Zo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(le){return new(le||q)(z.\u0275\u0275directiveInject(Oe),z.\u0275\u0275directiveInject(yu),z.\u0275\u0275injectAttribute("tabindex"),z.\u0275\u0275directiveInject(z.Renderer2),z.\u0275\u0275directiveInject(z.ElementRef),z.\u0275\u0275directiveInject(bn.LocationStrategy))}}static{this.\u0275dir=z.\u0275\u0275defineDirective({type:q,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(le,we){1&le&&z.\u0275\u0275listener("click",function(pt){return we.onClick(pt.button,pt.ctrlKey,pt.shiftKey,pt.altKey,pt.metaKey)}),2&le&&z.\u0275\u0275attribute("target",we.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",z.booleanAttribute],skipLocationChange:[2,"skipLocationChange","skipLocationChange",z.booleanAttribute],replaceUrl:[2,"replaceUrl","replaceUrl",z.booleanAttribute],routerLink:"routerLink"},standalone:!0,features:[z.\u0275\u0275InputTransformsFeature,z.\u0275\u0275NgOnChangesFeature]})}}return q})(),ht=(()=>{class q{get isActive(){return this._isActive}constructor(te,le,we,Ke,pt){this.router=te,this.element=le,this.renderer=we,this.cdr=Ke,this.link=pt,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new z.EventEmitter,this.routerEventsSubscription=te.events.subscribe(an=>{an instanceof ls&&this.update()})}ngAfterContentInit(){(0,M.of)(this.links.changes,(0,M.of)(null)).pipe(In()).subscribe(te=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const te=[...this.links.toArray(),this.link].filter(le=>!!le).map(le=>le.onChanges);this.linkInputChangesSubscription=(0,R.H)(te).pipe(In()).subscribe(le=>{this._isActive!==this.isLinkActive(this.router)(le)&&this.update()})}set routerLinkActive(te){const le=Array.isArray(te)?te:te.split(" ");this.classes=le.filter(we=>!!we)}ngOnChanges(te){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const te=this.hasActiveLinks();this.classes.forEach(le=>{te?this.renderer.addClass(this.element.nativeElement,le):this.renderer.removeClass(this.element.nativeElement,le)}),te&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==te&&(this._isActive=te,this.cdr.markForCheck(),this.isActiveChange.emit(te))})}isLinkActive(te){const le=function Xt(q){return!!q.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return we=>{const Ke=we.urlTree;return!!Ke&&te.isActive(Ke,le)}}hasActiveLinks(){const te=this.isLinkActive(this.router);return this.link&&te(this.link)||this.links.some(te)}static{this.\u0275fac=function(le){return new(le||q)(z.\u0275\u0275directiveInject(Oe),z.\u0275\u0275directiveInject(z.ElementRef),z.\u0275\u0275directiveInject(z.Renderer2),z.\u0275\u0275directiveInject(z.ChangeDetectorRef),z.\u0275\u0275directiveInject(nt,8))}}static{this.\u0275dir=z.\u0275\u0275defineDirective({type:q,selectors:[["","routerLinkActive",""]],contentQueries:function(le,we,Ke){if(1&le&&z.\u0275\u0275contentQuery(Ke,nt,5),2&le){let pt;z.\u0275\u0275queryRefresh(pt=z.\u0275\u0275loadQuery())&&(we.links=pt)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[z.\u0275\u0275NgOnChangesFeature]})}}return q})();class Cn{}let En=(()=>{class q{preload(te,le){return le().pipe((0,ra.W)(()=>(0,M.of)(null)))}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})(),Vn=(()=>{class q{preload(te,le){return(0,M.of)(null)}static{this.\u0275fac=function(le){return new(le||q)}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})(),Nt=(()=>{class q{constructor(te,le,we,Ke,pt){this.router=te,this.injector=we,this.preloadingStrategy=Ke,this.loader=pt}setUpPreloading(){this.subscription=this.router.events.pipe((0,Oi.p)(te=>te instanceof ls),(0,hr.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(te,le){const we=[];for(const Ke of le){Ke.providers&&!Ke._injector&&(Ke._injector=(0,z.createEnvironmentInjector)(Ke.providers,te,`Route: ${Ke.path}`));const pt=Ke._injector??te,an=Ke._loadedInjector??pt;(Ke.loadChildren&&!Ke._loadedRoutes&&void 0===Ke.canLoad||Ke.loadComponent&&!Ke._loadedComponent)&&we.push(this.preloadConfig(pt,Ke)),(Ke.children||Ke._loadedRoutes)&&we.push(this.processRoutes(an,Ke.children??Ke._loadedRoutes))}return(0,R.H)(we).pipe(In())}preloadConfig(te,le){return this.preloadingStrategy.preload(le,()=>{let we;we=le.loadChildren&&void 0===le.canLoad?this.loader.loadChildren(te,le):(0,M.of)(null);const Ke=we.pipe((0,On.Z)(pt=>null===pt?(0,M.of)(void 0):(le._loadedRoutes=pt.routes,le._loadedInjector=pt.injector,this.processRoutes(pt.injector??te,pt.routes))));if(le.loadComponent&&!le._loadedComponent){const pt=this.loader.loadComponent(le);return(0,R.H)([Ke,pt]).pipe(In())}return Ke})}static{this.\u0275fac=function(le){return new(le||q)(z.\u0275\u0275inject(Oe),z.\u0275\u0275inject(z.Compiler),z.\u0275\u0275inject(z.EnvironmentInjector),z.\u0275\u0275inject(Cn),z.\u0275\u0275inject(Fs))}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"})}}return q})();const Gn=new z.InjectionToken("");let Lr=(()=>{class q{constructor(te,le,we,Ke,pt={}){this.urlSerializer=te,this.transitions=le,this.viewportScroller=we,this.zone=Ke,this.options=pt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},pt.scrollPositionRestoration||="disabled",pt.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(te=>{te instanceof Wc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=te.navigationTrigger,this.restoredId=te.restoredState?te.restoredState.navigationId:0):te instanceof ls?(this.lastId=te.id,this.scheduleScrollEvent(te,this.urlSerializer.parse(te.urlAfterRedirects).fragment)):te instanceof Co&&te.code===ka.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(te,this.urlSerializer.parse(te.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(te=>{te instanceof Zu&&(te.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(te.position):te.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(te.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(te,le){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zu(te,"popstate"===this.lastSource?this.store[this.restoredId]:null,le))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(le){z.\u0275\u0275invalidFactory()}}static{this.\u0275prov=z.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac})}}return q})();function Ir(q,...ue){return(0,z.makeEnvironmentProviders)([{provide:zr,multi:!0,useValue:q},[],{provide:yu,useFactory:Qr,deps:[Oe]},{provide:z.APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:qr},ue.map(te=>te.\u0275providers)])}function Qr(q){return q.routerState.root}function Or(q,ue){return{\u0275kind:q,\u0275providers:ue}}function Mi(q){return[{provide:zr,multi:!0,useValue:q},[]]}function Ni(q={}){return Or(4,[{provide:Gn,useFactory:()=>{const te=(0,z.inject)(bn.ViewportScroller),le=(0,z.inject)(z.NgZone),we=(0,z.inject)(Iu),Ke=(0,z.inject)(Ti);return new Lr(Ke,we,te,le,q)}}])}function qr(){const q=(0,z.inject)(z.Injector);return ue=>{const te=q.get(z.ApplicationRef);if(ue!==te.components[0])return;const le=q.get(Oe),we=q.get(Fa);1===q.get(ss)&&le.initialNavigation(),q.get(Gc,null,z.InjectFlags.Optional)?.setUpPreloading(),q.get(Gn,null,z.InjectFlags.Optional)?.init(),le.resetRootComponentType(te.componentTypes[0]),we.closed||(we.next(),we.complete(),we.unsubscribe())}}const Fa=new z.InjectionToken("",{factory:()=>new Ut.B}),ss=new z.InjectionToken("",{providedIn:"root",factory:()=>1});function ds(){return Or(2,[{provide:ss,useValue:0},{provide:z.APP_INITIALIZER,multi:!0,deps:[z.Injector],useFactory:ue=>{const te=ue.get(bn.LOCATION_INITIALIZED,Promise.resolve());return()=>te.then(()=>new Promise(le=>{const we=ue.get(Oe),Ke=ue.get(Fa);ee(we,()=>{le(!0)}),ue.get(Iu).afterPreactivation=()=>(le(!0),Ke.closed?(0,M.of)(void 0):Ke),we.initialNavigation()}))}}])}function Ss(){return Or(3,[{provide:z.APP_INITIALIZER,multi:!0,useFactory:()=>{const ue=(0,z.inject)(Oe);return()=>{ue.setUpLocationChangeListener()}}},{provide:ss,useValue:2}])}function Vc(){let q=[];return q=[],Or(1,q)}const Gc=new z.InjectionToken("");function qc(q){return Or(0,[{provide:Gc,useExisting:Nt},{provide:Cn,useExisting:q}])}function Jc(q){return Or(5,[{provide:ot,useValue:q}])}function Ws(){return Or(6,[{provide:bn.LocationStrategy,useClass:bn.HashLocationStrategy}])}function Ah(q){return Or(7,[{provide:Sd,useValue:q}])}function jd(){return Or(8,[Ch,{provide:Pl,useExisting:Ch}])}function Ih(q){return Or(9,[{provide:Hs,useValue:ru},{provide:Bu,useValue:{skipNextTransition:!!q?.skipInitialTransition,...q}}])}const of=new z.InjectionToken("ROUTER_FORROOT_GUARD"),Kl=[bn.Location,{provide:Ti,useClass:ji},Oe,Qc,{provide:yu,useFactory:Qr,deps:[Oe]},Fs,[]];let $d=(()=>{class q{constructor(te){}static forRoot(te,le){return{ngModule:q,providers:[Kl,[],{provide:zr,multi:!0,useValue:te},{provide:of,useFactory:im,deps:[[Oe,new z.Optional,new z.SkipSelf]]},{provide:ot,useValue:le||{}},le?.useHash?{provide:bn.LocationStrategy,useClass:bn.HashLocationStrategy}:{provide:bn.LocationStrategy,useClass:bn.PathLocationStrategy},{provide:Gn,useFactory:()=>{const q=(0,z.inject)(bn.ViewportScroller),ue=(0,z.inject)(z.NgZone),te=(0,z.inject)(ot),le=(0,z.inject)(Iu),we=(0,z.inject)(Ti);return te.scrollOffset&&q.setOffset(te.scrollOffset),new Lr(we,le,q,ue,te)}},le?.preloadingStrategy?qc(le.preloadingStrategy).\u0275providers:[],le?.initialNavigation?Wm(le):[],le?.bindToComponentInputs?jd().\u0275providers:[],le?.enableViewTransitions?Ih().\u0275providers:[],[{provide:gg,useFactory:qr},{provide:z.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:gg}]]}}static forChild(te){return{ngModule:q,providers:[{provide:zr,multi:!0,useValue:te}]}}static{this.\u0275fac=function(le){return new(le||q)(z.\u0275\u0275inject(of,8))}}static{this.\u0275mod=z.\u0275\u0275defineNgModule({type:q})}static{this.\u0275inj=z.\u0275\u0275defineInjector({})}}return q})();function im(q){return"guarded"}function Wm(q){return["disabled"===q.initialNavigation?Ss().\u0275providers:[],"enabledBlocking"===q.initialNavigation?ds().\u0275providers:[]]}const gg=new z.InjectionToken("");function Qm(q){return q.map(ue=>(...te)=>(0,z.inject)(ue).canMatch(...te))}function mg(q){return q.map(ue=>(...te)=>(0,z.inject)(ue).canActivate(...te))}function om(q){return q.map(ue=>(...te)=>(0,z.inject)(ue).canActivateChild(...te))}function da(q){return q.map(ue=>(...te)=>(0,z.inject)(ue).canDeactivate(...te))}function Cu(q){return(...ue)=>(0,z.inject)(q).resolve(...ue)}const el=new z.Version("18.2.5")},4569:(it,C,w)=>{"use strict";w.r(C),w.d(C,{MSAL_BROADCAST_CONFIG:()=>Fd,MSAL_GUARD_CONFIG:()=>Gl,MSAL_INSTANCE:()=>rc,MSAL_INTERCEPTOR_CONFIG:()=>kl,MsalBroadcastService:()=>Ac,MsalCustomNavigationClient:()=>md,MsalGuard:()=>oc,MsalInterceptor:()=>Pl,MsalModule:()=>Es,MsalRedirectComponent:()=>Ch,MsalService:()=>ic,version:()=>vu});var z=w(467),T=w(3953);var hr=function(rr){return rr.Redirect="redirect",rr.Popup="popup",rr.Silent="silent",rr.None="none",rr}(hr||{});class Ta{static getInteractionStatusFromEvent(Ln,$t){switch(Ln.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(Ln.interactionType===hr.Redirect||Ln.interactionType===hr.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if($t&&"ssoSilent"!==$t)break;return"none";case"msal:logoutEnd":if($t&&"logout"!==$t)break;return"none";case"msal:handleRedirectEnd":if($t&&"handleRedirect"!==$t)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(Ln.interactionType===hr.Redirect||Ln.interactionType===hr.Popup){if($t&&"login"!==$t&&"acquireToken"!==$t)break;return"none"}}return null}}class va extends Error{constructor(Ln,$t,_r){super($t?`${Ln}: ${$t}`:Ln),Object.setPrototypeOf(this,va.prototype),this.errorCode=Ln||"",this.errorMessage=$t||"",this.subError=_r||"",this.name="AuthError"}setCorrelationId(Ln){this.correlationId=Ln}}class oo extends va{constructor(Ln,$t){super(Ln,$t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,oo.prototype)}}const Ns="authority_uri_insecure",Ds="url_parse_error",ns="empty_url_error",Wo={redirect_uri_empty:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",[Ns]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ds]:"URL could not be parsed into appropriate segments.",[ns]:"URL was empty or null.",empty_input_scopes_error:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",invalid_prompt_value:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",invalid_claims:"Given claims parameter must be a stringified JSON object.",token_request_empty:"Token request was empty and not found in cache.",logout_request_empty:"The logout request was null or undefined.",invalid_code_challenge_method:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',pkce_params_missing:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",invalid_cloud_discovery_metadata:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",invalid_authority_metadata:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",untrusted_authority:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",missing_ssh_jwk:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",missing_ssh_kid:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",cannot_set_OIDCOptions:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",cannot_allow_native_broker:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",authority_mismatch:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class vs extends va{constructor(Ln){super(Ln,Wo[Ln]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,vs.prototype)}}function Va(rr){return new vs(rr)}class Pc{static isEmptyObj(Ln){if(Ln)try{const $t=JSON.parse(Ln);return 0===Object.keys($t).length}catch{}return!0}static startsWith(Ln,$t){return 0===Ln.indexOf($t)}static endsWith(Ln,$t){return Ln.length>=$t.length&&Ln.lastIndexOf($t)===Ln.length-$t.length}static queryStringToObject(Ln){const $t={},_r=Ln.split("&"),xi=or=>decodeURIComponent(or.replace(/\+/g," "));return _r.forEach(or=>{if(or.trim()){const[qo,ma]=or.split(/=(.+)/g,2);qo&&ma&&($t[xi(qo)]=xi(ma))}}),$t}static trimArrayEntries(Ln){return Ln.map($t=>$t.trim())}static removeEmptyStringsFromArray(Ln){return Ln.filter($t=>!!$t)}static jsonParseHelper(Ln){try{return JSON.parse(Ln)}catch{return null}}static matchPattern(Ln,$t){return new RegExp(Ln.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test($t)}}const Cs="hash_not_deserialized",Lo={client_info_decoding_error:"The client info could not be parsed/decoded correctly",client_info_empty_error:"The client info was empty",token_parsing_error:"Token cannot be parsed",null_or_empty_token:"The token is null or empty",endpoints_resolution_error:"Endpoints cannot be resolved",network_error:"Network request failed",openid_config_error:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Cs]:"The hash parameters could not be deserialized",invalid_state:"State was not the expected format",state_mismatch:"State mismatch error",state_not_found:"State not found",nonce_mismatch:"Nonce mismatch error",auth_time_not_found:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",max_age_transpired:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",multiple_matching_appMetadata:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",request_cannot_be_made:"Token request cannot be made without authorization code or refresh token.",cannot_remove_empty_scope:"Cannot remove null or empty scope from ScopeSet",cannot_append_scopeset:"Cannot append ScopeSet",empty_input_scopeset:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",no_account_in_silent_request:"Please pass an account object, silent flow is not supported without account information",invalid_cache_record:"Cache record object was null or undefined.",invalid_cache_environment:"Invalid environment when attempting to create cache entry",no_account_found:"No account found in cache for given key.",no_crypto_object:"No crypto object detected.",unexpected_credential_type:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",token_refresh_required:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",token_claims_cnf_required_for_signedjwt:"Cannot generate a POP jwt if the token_claims are not populated",authorization_code_missing_from_server_response:"Server response does not contain an authorization code to proceed",binding_key_not_removed:"Could not remove the credential's binding key from storage.",end_session_endpoint_not_supported:"The provided authority does not support logout",key_id_missing:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",no_network_connectivity:"No network connectivity. Check your internet connection.",user_canceled:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",method_not_implemented:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled"};class Dd extends va{constructor(Ln,$t){super(Ln,$t?`${Lo[Ln]}: ${$t}`:Lo[Ln]),this.name="ClientAuthError",Object.setPrototypeOf(this,Dd.prototype)}}class Ca{get urlString(){return this._urlString}constructor(Ln){if(this._urlString=Ln,!this._urlString)throw Va(ns);Ln.includes("#")||(this._urlString=Ca.canonicalizeUri(Ln))}static canonicalizeUri(Ln){if(Ln){let $t=Ln.toLowerCase();return Pc.endsWith($t,"?")?$t=$t.slice(0,-1):Pc.endsWith($t,"?/")&&($t=$t.slice(0,-2)),Pc.endsWith($t,"/")||($t+="/"),$t}return Ln}validateAsUri(){let Ln;try{Ln=this.getUrlComponents()}catch{throw Va(Ds)}if(!Ln.HostNameAndPort||!Ln.PathSegments)throw Va(Ds);if(!Ln.Protocol||"https:"!==Ln.Protocol.toLowerCase())throw Va(Ns)}static appendQueryString(Ln,$t){return $t?Ln.indexOf("?")<0?`${Ln}?${$t}`:`${Ln}&${$t}`:Ln}static removeHashFromUrl(Ln){return Ca.canonicalizeUri(Ln.split("#")[0])}replaceTenantPath(Ln){const $t=this.getUrlComponents(),_r=$t.PathSegments;return Ln&&0!==_r.length&&("common"===_r[0]||"organizations"===_r[0])&&(_r[0]=Ln),Ca.constructAuthorityUriFromObject($t)}getUrlComponents(){const Ln=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),$t=this.urlString.match(Ln);if(!$t)throw Va(Ds);const _r={Protocol:$t[1],HostNameAndPort:$t[4],AbsolutePath:$t[5],QueryString:$t[7]};let xi=_r.AbsolutePath.split("/");return xi=xi.filter(or=>or&&or.length>0),_r.PathSegments=xi,_r.QueryString&&_r.QueryString.endsWith("/")&&(_r.QueryString=_r.QueryString.substring(0,_r.QueryString.length-1)),_r}static getDomainFromUrl(Ln){const $t=RegExp("^([^:/?#]+://)?([^/?#]*)"),_r=Ln.match($t);if(!_r)throw Va(Ds);return _r[2]}static getAbsoluteUrl(Ln,$t){if("/"===Ln[0]){const xi=new Ca($t).getUrlComponents();return xi.Protocol+"//"+xi.HostNameAndPort+Ln}return Ln}static constructAuthorityUriFromObject(Ln){return new Ca(Ln.Protocol+"//"+Ln.HostNameAndPort+"/"+Ln.PathSegments.join("/"))}static hashContainsKnownProperties(Ln){return!!function _c(rr){if(!rr||rr.indexOf("=")<0)return null;try{const Ln=function La(rr){return rr.startsWith("#/")?rr.substring(2):rr.startsWith("#")||rr.startsWith("?")?rr.substring(1):rr}(rr),$t=Object.fromEntries(new URLSearchParams(Ln));if($t.code||$t.error||$t.error_description||$t.state)return $t}catch{throw function kd(rr,Ln){return new Dd(rr,Ln)}(Cs)}return null}(Ln)}}class fd{navigateInternal(Ln,$t){return fd.defaultNavigateWindow(Ln,$t)}navigateExternal(Ln,$t){return fd.defaultNavigateWindow(Ln,$t)}static defaultNavigateWindow(Ln,$t){return $t.noHistory?window.location.replace(Ln):window.location.assign(Ln),new Promise(_r=>{setTimeout(()=>{_r(!0)},$t.timeout)})}}var bs=w(6648),zh=w(1413),_u=w(6129);class Qa extends zh.B{constructor(Ln=1/0,$t=1/0,_r=_u.U){super(),this._bufferSize=Ln,this._windowTime=$t,this._timestampProvider=_r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=$t===1/0,this._bufferSize=Math.max(1,Ln),this._windowTime=Math.max(1,$t)}next(Ln){const{isStopped:$t,_buffer:_r,_infiniteTimeWindow:xi,_timestampProvider:or,_windowTime:qo}=this;$t||(_r.push(Ln),!xi&&_r.push(or.now()+qo)),this._trimBuffer(),super.next(Ln)}_subscribe(Ln){this._throwIfClosed(),this._trimBuffer();const $t=this._innerSubscribe(Ln),{_infiniteTimeWindow:_r,_buffer:xi}=this,or=xi.slice();for(let qo=0;qo<or.length&&!Ln.closed;qo+=_r?1:2)Ln.next(or[qo]);return this._checkFinalizedStatuses(Ln),$t}_trimBuffer(){const{_bufferSize:Ln,_timestampProvider:$t,_buffer:_r,_infiniteTimeWindow:xi}=this,or=(xi?1:2)*Ln;if(Ln<1/0&&or<_r.length&&_r.splice(0,_r.length-or),!xi){const qo=$t.now();let ma=0;for(let _d=1;_d<_r.length&&_r[_d]<=qo;_d+=2)ma=_d;ma&&_r.splice(0,ma+1)}}}var Qc=w(4412),Rc=w(7673),Jd=w(983),Tc=w(177),Mr=w(6354),$l=w(274),gd=w(9437),Ol=w(5558),Xp=w(6697),yu=w(5964),Vl=w(7768);const Xc="@azure/msal-angular",vu="3.0.24",rc=new T.InjectionToken("MSAL_INSTANCE"),Gl=new T.InjectionToken("MSAL_GUARD_CONFIG"),kl=new T.InjectionToken("MSAL_INTERCEPTOR_CONFIG"),Fd=new T.InjectionToken("MSAL_BROADCAST_CONFIG");let ic=(()=>{class rr{constructor($t,_r){this.instance=$t,this.location=_r;const xi=this.location.path(!0).split("#").pop();xi&&(this.redirectHash=`#${xi}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",vu)}initialize(){return(0,bs.H)(this.instance.initialize())}acquireTokenPopup($t){return(0,bs.H)(this.instance.acquireTokenPopup($t))}acquireTokenRedirect($t){return(0,bs.H)(this.instance.acquireTokenRedirect($t))}acquireTokenSilent($t){return(0,bs.H)(this.instance.acquireTokenSilent($t))}handleRedirectObservable($t){return(0,bs.H)(this.instance.initialize().then(()=>this.instance.handleRedirectPromise($t||this.redirectHash)))}loginPopup($t){return(0,bs.H)(this.instance.loginPopup($t))}loginRedirect($t){return(0,bs.H)(this.instance.loginRedirect($t))}logout($t){return(0,bs.H)(this.instance.logout($t))}logoutRedirect($t){return(0,bs.H)(this.instance.logoutRedirect($t))}logoutPopup($t){return(0,bs.H)(this.instance.logoutPopup($t))}ssoSilent($t){return(0,bs.H)(this.instance.ssoSilent($t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(Xc,vu)),this.logger}setLogger($t){this.logger=$t.clone(Xc,vu),this.instance.setLogger($t)}}return rr.\u0275fac=function($t){return new($t||rr)(T.\u0275\u0275inject(rc),T.\u0275\u0275inject(Tc.Location))},rr.\u0275prov=T.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac}),rr})(),Ac=(()=>{class rr{constructor($t,_r,xi){this.msalInstance=$t,this.authService=_r,this.msalBroadcastConfig=xi,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new Qa(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new zh.B,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Qc.t("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(or=>{this._msalSubject.next(or);const qo=Ta.getInteractionStatusFromEvent(or,this._inProgress.value);null!==qo&&(this.authService.getLogger().verbose(`BroadcastService - ${or.eventType} results in setting inProgress from ${this._inProgress.value} to ${qo}`),this._inProgress.next(qo))})}}return rr.\u0275fac=function($t){return new($t||rr)(T.\u0275\u0275inject(rc),T.\u0275\u0275inject(ic),T.\u0275\u0275inject(Fd,8))},rr.\u0275prov=T.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac}),rr})(),oc=(()=>{class rr{constructor($t,_r,xi,or,qo){this.msalGuardConfig=$t,this.msalBroadcastService=_r,this.authService=xi,this.location=or,this.router=qo,this.msalBroadcastService.inProgress$.subscribe()}parseUrl($t){return this.router.parseUrl($t)}getDestinationUrl($t){this.authService.getLogger().verbose("Guard - getting destination url");const _r=document.getElementsByTagName("base"),xi=this.location.normalize(_r.length?_r[0].href:window.location.origin),or=this.location.prepareExternalUrl($t);return or.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${xi}/${or}`):`${xi}${$t}`}loginInteractively($t){const _r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,$t):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===hr.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(_r).pipe((0,Mr.T)(or=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(or.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const xi=this.getDestinationUrl($t.url);return this.authService.loginRedirect({redirectStartPage:xi,..._r}).pipe((0,Mr.T)(()=>!1))}activateHelper($t){if(this.msalGuardConfig.interactionType!==hr.Popup&&this.msalGuardConfig.interactionType!==hr.Redirect)throw new oo("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),(0,Rc.of)(!0);if(Ca.hashContainsKnownProperties(window.location.hash)&&function Hu(){return window.parent!==window}()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),(0,Rc.of)(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const _r=this.location.path(!0);return this.authService.initialize().pipe((0,$l.H)(()=>this.authService.handleRedirectObservable()),(0,$l.H)(()=>{if(!this.authService.instance.getAllAccounts().length)return $t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively($t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),(0,Rc.of)(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),$t){const xi=this.includesCode($t.url),or=!!$t.root&&!!$t.root.fragment&&this.includesCode(`#${$t.root.fragment}`),qo=0===this.location.prepareExternalUrl($t.url).indexOf("#");if(xi&&(or||qo))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),_r.indexOf("#")>-1?(0,Rc.of)(this.parseUrl(this.location.path())):(0,Rc.of)(this.parseUrl(""))}return(0,Rc.of)(!0)}),(0,gd.W)(xi=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${xi.message}`),this.loginFailedRoute&&$t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),(0,Rc.of)(this.loginFailedRoute)):(0,Rc.of)(!1))))}includesCode($t){return $t.lastIndexOf("/code")>-1&&$t.lastIndexOf("/code")===$t.length-5||$t.indexOf("#code=")>-1||$t.indexOf("&code=")>-1}canActivate($t,_r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(_r)}canActivateChild($t,_r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(_r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return rr.\u0275fac=function($t){return new($t||rr)(T.\u0275\u0275inject(Gl),T.\u0275\u0275inject(Ac),T.\u0275\u0275inject(ic),T.\u0275\u0275inject(Tc.Location),T.\u0275\u0275inject(Vl.Router))},rr.\u0275prov=T.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac}),rr})(),Pl=(()=>{class rr{constructor($t,_r,xi,or,qo){this.msalInterceptorConfig=$t,this.authService=_r,this.location=xi,this.msalBroadcastService=or,this._document=qo}intercept($t,_r){if(this.msalInterceptorConfig.interactionType!==hr.Popup&&this.msalInterceptorConfig.interactionType!==hr.Redirect)throw new oo("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const xi=this.getScopesForEndpoint($t.url,$t.method);if(!xi||0===xi.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),_r.handle($t);let or;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),or=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),or=this.authService.instance.getAllAccounts()[0]);const qo="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,$t,{account:or}):{...this.msalInterceptorConfig.authRequest,account:or};return this.authService.getLogger().info(`Interceptor - ${xi.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${xi}] scopes found for ${$t.url}`),this.acquireToken(qo,xi,or).pipe((0,Ol.n)(ma=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const _d=$t.headers.set("Authorization",`Bearer ${ma.accessToken}`),yd=$t.clone({headers:_d});return _r.handle(yd)}))}acquireToken($t,_r,xi){return this.authService.acquireTokenSilent({...$t,scopes:_r,account:xi}).pipe((0,gd.W)(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe((0,Xp.s)(1),(0,Ol.n)(or=>"none"===or?this.acquireTokenInteractively($t,_r):this.msalBroadcastService.inProgress$.pipe((0,yu.p)(qo=>"none"===qo),(0,Xp.s)(1),(0,Ol.n)(()=>this.acquireToken($t,_r,xi))))))),(0,Ol.n)(or=>or.accessToken?(0,Rc.of)(or):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe((0,yu.p)(qo=>"none"===qo),(0,Xp.s)(1),(0,Ol.n)(()=>this.acquireTokenInteractively($t,_r))))))}acquireTokenInteractively($t,_r){if(this.msalInterceptorConfig.interactionType===hr.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...$t,scopes:_r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const xi=window.location.href;return this.authService.acquireTokenRedirect({...$t,scopes:_r,redirectStartPage:xi}),Jd.w}getScopesForEndpoint($t,_r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const xi=this.location.normalize($t),or=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),qo=this.matchResourcesToEndpoint(or,xi);return qo.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,qo,_r):null}matchResourcesToEndpoint($t,_r){const xi=[];return $t.forEach(or=>{const qo=this.location.normalize(or),ma=this.getAbsoluteUrl(qo),_d=new URL(ma),yd=this.getAbsoluteUrl(_r),Af=new URL(yd);this.checkUrlComponents(_d,Af)&&xi.push(or)}),xi}checkUrlComponents($t,_r){const xi=["protocol","host","pathname","search","hash"];for(const or of xi)if($t[or]){const qo=decodeURIComponent($t[or]);if(!Pc.matchPattern(qo,_r[or]))return!1}return!0}getAbsoluteUrl($t){const _r=this._document.createElement("a");return _r.href=$t,_r.href}matchScopesToEndpoint($t,_r,xi){const or=[];return _r.forEach(qo=>{const ma=[],_d=$t.get(qo);null!==_d?(_d.forEach(yd=>{if("string"==typeof yd)ma.push(yd);else{const Af=xi.toLowerCase();yd.httpMethod.toLowerCase()===Af&&(null===yd.scopes?or.push(null):yd.scopes.forEach(Zp=>{ma.push(Zp)}))}}),ma.length>0&&or.push(ma)):or.push(null)}),or.length>0?(or.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),or[0]):null}}return rr.\u0275fac=function($t){return new($t||rr)(T.\u0275\u0275inject(kl),T.\u0275\u0275inject(ic),T.\u0275\u0275inject(Tc.Location),T.\u0275\u0275inject(Ac),T.\u0275\u0275inject(Tc.DOCUMENT))},rr.\u0275prov=T.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac}),rr})(),Ch=(()=>{class rr{constructor($t){this.authService=$t}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return rr.\u0275fac=function($t){return new($t||rr)(T.\u0275\u0275directiveInject(ic))},rr.\u0275cmp=T.\u0275\u0275defineComponent({type:rr,selectors:[["app-redirect"]],decls:0,vars:0,template:function($t,_r){},encapsulation:2}),rr})(),Es=(()=>{class rr{static forRoot($t,_r,xi){return{ngModule:rr,providers:[{provide:rc,useValue:$t},{provide:Gl,useValue:_r},{provide:kl,useValue:xi},ic]}}}return rr.\u0275fac=function($t){return new($t||rr)},rr.\u0275mod=T.\u0275\u0275defineNgModule({type:rr}),rr.\u0275inj=T.\u0275\u0275defineInjector({providers:[oc,Ac],imports:[Tc.CommonModule]}),rr})(),md=(()=>{class rr extends fd{constructor($t,_r,xi){super(),this.authService=$t,this.router=_r,this.location=xi}navigateInternal($t,_r){var xi=()=>super.navigateInternal,or=this;return(0,z.A)(function*(){if(or.authService.getLogger().trace("MsalCustomNavigationClient called"),or.authService.getLogger().verbose("MsalCustomNavigationClient - navigating"),or.authService.getLogger().verbosePii(`MsalCustomNavigationClient - navigating to url: ${$t}`),_r.noHistory)return xi().call(or,$t,_r);{const qo=new Ca($t).getUrlComponents(),ma=qo.QueryString?`${qo.AbsolutePath}?${qo.QueryString}`:or.location.normalize(qo.AbsolutePath);yield or.router.navigateByUrl(ma,{replaceUrl:_r.noHistory})}return Promise.resolve(_r.noHistory)})()}}return rr.\u0275fac=function($t){return new($t||rr)(T.\u0275\u0275inject(ic),T.\u0275\u0275inject(Vl.Router),T.\u0275\u0275inject(Tc.Location))},rr.\u0275prov=T.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac}),rr})()},467:(it,C,w)=>{"use strict";function z(V,N,R,M,G,Y,K){try{var J=V[Y](K),se=J.value}catch(U){return void R(U)}J.done?N(se):Promise.resolve(se).then(M,G)}function T(V){return function(){var N=this,R=arguments;return new Promise(function(M,G){var Y=V.apply(N,R);function K(se){z(Y,M,G,K,J,"next",se)}function J(se){z(Y,M,G,K,J,"throw",se)}K(void 0)})}}w.d(C,{A:()=>T})},1635:(it,C,w)=>{"use strict";w.r(C),w.d(C,{__addDisposableResource:()=>Gr,__assign:()=>V,__asyncDelegator:()=>Gt,__asyncGenerator:()=>vt,__asyncValues:()=>Ht,__await:()=>Pt,__awaiter:()=>U,__classPrivateFieldGet:()=>Rn,__classPrivateFieldIn:()=>wr,__classPrivateFieldSet:()=>Nr,__createBinding:()=>Ae,__decorate:()=>R,__disposeResources:()=>Nn,__esDecorate:()=>G,__exportStar:()=>Ne,__extends:()=>T,__generator:()=>_e,__importDefault:()=>In,__importStar:()=>On,__makeTemplateObject:()=>jt,__metadata:()=>se,__param:()=>M,__propKey:()=>K,__read:()=>tt,__rest:()=>N,__runInitializers:()=>Y,__setFunctionName:()=>J,__spread:()=>_t,__spreadArray:()=>yt,__spreadArrays:()=>Bt,__values:()=>Le,default:()=>br});var z=function(bt,qt){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(fn,Ut){fn.__proto__=Ut}||function(fn,Ut){for(var bn in Ut)Object.prototype.hasOwnProperty.call(Ut,bn)&&(fn[bn]=Ut[bn])})(bt,qt)};function T(bt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Class extends value "+String(qt)+" is not a constructor or null");function fn(){this.constructor=bt}z(bt,qt),bt.prototype=null===qt?Object.create(qt):(fn.prototype=qt.prototype,new fn)}var V=function(){return V=Object.assign||function(qt){for(var fn,Ut=1,bn=arguments.length;Ut<bn;Ut++)for(var Pn in fn=arguments[Ut])Object.prototype.hasOwnProperty.call(fn,Pn)&&(qt[Pn]=fn[Pn]);return qt},V.apply(this,arguments)};function N(bt,qt){var fn={};for(var Ut in bt)Object.prototype.hasOwnProperty.call(bt,Ut)&&qt.indexOf(Ut)<0&&(fn[Ut]=bt[Ut]);if(null!=bt&&"function"==typeof Object.getOwnPropertySymbols){var bn=0;for(Ut=Object.getOwnPropertySymbols(bt);bn<Ut.length;bn++)qt.indexOf(Ut[bn])<0&&Object.prototype.propertyIsEnumerable.call(bt,Ut[bn])&&(fn[Ut[bn]]=bt[Ut[bn]])}return fn}function R(bt,qt,fn,Ut){var gr,bn=arguments.length,Pn=bn<3?qt:null===Ut?Ut=Object.getOwnPropertyDescriptor(qt,fn):Ut;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Pn=Reflect.decorate(bt,qt,fn,Ut);else for(var ui=bt.length-1;ui>=0;ui--)(gr=bt[ui])&&(Pn=(bn<3?gr(Pn):bn>3?gr(qt,fn,Pn):gr(qt,fn))||Pn);return bn>3&&Pn&&Object.defineProperty(qt,fn,Pn),Pn}function M(bt,qt){return function(fn,Ut){qt(fn,Ut,bt)}}function G(bt,qt,fn,Ut,bn,Pn){function gr(Do){if(void 0!==Do&&"function"!=typeof Do)throw new TypeError("Function expected");return Do}for(var ei,ui=Ut.kind,Oi="getter"===ui?"get":"setter"===ui?"set":"value",Dr=!qt&&bt?Ut.static?bt:bt.prototype:null,hr=qt||(Dr?Object.getOwnPropertyDescriptor(Dr,Ut.name):{}),ra=!1,Hi=fn.length-1;Hi>=0;Hi--){var No={};for(var fo in Ut)No[fo]="access"===fo?{}:Ut[fo];for(var fo in Ut.access)No.access[fo]=Ut.access[fo];No.addInitializer=function(Do){if(ra)throw new TypeError("Cannot add initializers after decoration has completed");Pn.push(gr(Do||null))};var jr=(0,fn[Hi])("accessor"===ui?{get:hr.get,set:hr.set}:hr[Oi],No);if("accessor"===ui){if(void 0===jr)continue;if(null===jr||"object"!=typeof jr)throw new TypeError("Object expected");(ei=gr(jr.get))&&(hr.get=ei),(ei=gr(jr.set))&&(hr.set=ei),(ei=gr(jr.init))&&bn.unshift(ei)}else(ei=gr(jr))&&("field"===ui?bn.unshift(ei):hr[Oi]=ei)}Dr&&Object.defineProperty(Dr,Ut.name,hr),ra=!0}function Y(bt,qt,fn){for(var Ut=arguments.length>2,bn=0;bn<qt.length;bn++)fn=Ut?qt[bn].call(bt,fn):qt[bn].call(bt);return Ut?fn:void 0}function K(bt){return"symbol"==typeof bt?bt:"".concat(bt)}function J(bt,qt,fn){return"symbol"==typeof qt&&(qt=qt.description?"[".concat(qt.description,"]"):""),Object.defineProperty(bt,"name",{configurable:!0,value:fn?"".concat(fn," ",qt):qt})}function se(bt,qt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(bt,qt)}function U(bt,qt,fn,Ut){return new(fn||(fn=Promise))(function(Pn,gr){function ui(hr){try{Dr(Ut.next(hr))}catch(ei){gr(ei)}}function Oi(hr){try{Dr(Ut.throw(hr))}catch(ei){gr(ei)}}function Dr(hr){hr.done?Pn(hr.value):function bn(Pn){return Pn instanceof fn?Pn:new fn(function(gr){gr(Pn)})}(hr.value).then(ui,Oi)}Dr((Ut=Ut.apply(bt,qt||[])).next())})}function _e(bt,qt){var Ut,bn,Pn,gr,fn={label:0,sent:function(){if(1&Pn[0])throw Pn[1];return Pn[1]},trys:[],ops:[]};return gr={next:ui(0),throw:ui(1),return:ui(2)},"function"==typeof Symbol&&(gr[Symbol.iterator]=function(){return this}),gr;function ui(Dr){return function(hr){return function Oi(Dr){if(Ut)throw new TypeError("Generator is already executing.");for(;gr&&(gr=0,Dr[0]&&(fn=0)),fn;)try{if(Ut=1,bn&&(Pn=2&Dr[0]?bn.return:Dr[0]?bn.throw||((Pn=bn.return)&&Pn.call(bn),0):bn.next)&&!(Pn=Pn.call(bn,Dr[1])).done)return Pn;switch(bn=0,Pn&&(Dr=[2&Dr[0],Pn.value]),Dr[0]){case 0:case 1:Pn=Dr;break;case 4:return fn.label++,{value:Dr[1],done:!1};case 5:fn.label++,bn=Dr[1],Dr=[0];continue;case 7:Dr=fn.ops.pop(),fn.trys.pop();continue;default:if(!(Pn=(Pn=fn.trys).length>0&&Pn[Pn.length-1])&&(6===Dr[0]||2===Dr[0])){fn=0;continue}if(3===Dr[0]&&(!Pn||Dr[1]>Pn[0]&&Dr[1]<Pn[3])){fn.label=Dr[1];break}if(6===Dr[0]&&fn.label<Pn[1]){fn.label=Pn[1],Pn=Dr;break}if(Pn&&fn.label<Pn[2]){fn.label=Pn[2],fn.ops.push(Dr);break}Pn[2]&&fn.ops.pop(),fn.trys.pop();continue}Dr=qt.call(bt,fn)}catch(hr){Dr=[6,hr],bn=0}finally{Ut=Pn=0}if(5&Dr[0])throw Dr[1];return{value:Dr[0]?Dr[1]:void 0,done:!0}}([Dr,hr])}}}var Ae=Object.create?function(bt,qt,fn,Ut){void 0===Ut&&(Ut=fn);var bn=Object.getOwnPropertyDescriptor(qt,fn);(!bn||("get"in bn?!qt.__esModule:bn.writable||bn.configurable))&&(bn={enumerable:!0,get:function(){return qt[fn]}}),Object.defineProperty(bt,Ut,bn)}:function(bt,qt,fn,Ut){void 0===Ut&&(Ut=fn),bt[Ut]=qt[fn]};function Ne(bt,qt){for(var fn in bt)"default"!==fn&&!Object.prototype.hasOwnProperty.call(qt,fn)&&Ae(qt,bt,fn)}function Le(bt){var qt="function"==typeof Symbol&&Symbol.iterator,fn=qt&&bt[qt],Ut=0;if(fn)return fn.call(bt);if(bt&&"number"==typeof bt.length)return{next:function(){return bt&&Ut>=bt.length&&(bt=void 0),{value:bt&&bt[Ut++],done:!bt}}};throw new TypeError(qt?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(bt,qt){var fn="function"==typeof Symbol&&bt[Symbol.iterator];if(!fn)return bt;var bn,gr,Ut=fn.call(bt),Pn=[];try{for(;(void 0===qt||qt-- >0)&&!(bn=Ut.next()).done;)Pn.push(bn.value)}catch(ui){gr={error:ui}}finally{try{bn&&!bn.done&&(fn=Ut.return)&&fn.call(Ut)}finally{if(gr)throw gr.error}}return Pn}function _t(){for(var bt=[],qt=0;qt<arguments.length;qt++)bt=bt.concat(tt(arguments[qt]));return bt}function Bt(){for(var bt=0,qt=0,fn=arguments.length;qt<fn;qt++)bt+=arguments[qt].length;var Ut=Array(bt),bn=0;for(qt=0;qt<fn;qt++)for(var Pn=arguments[qt],gr=0,ui=Pn.length;gr<ui;gr++,bn++)Ut[bn]=Pn[gr];return Ut}function yt(bt,qt,fn){if(fn||2===arguments.length)for(var Pn,Ut=0,bn=qt.length;Ut<bn;Ut++)(Pn||!(Ut in qt))&&(Pn||(Pn=Array.prototype.slice.call(qt,0,Ut)),Pn[Ut]=qt[Ut]);return bt.concat(Pn||Array.prototype.slice.call(qt))}function Pt(bt){return this instanceof Pt?(this.v=bt,this):new Pt(bt)}function vt(bt,qt,fn){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bn,Ut=fn.apply(bt,qt||[]),Pn=[];return bn={},ui("next"),ui("throw"),ui("return",function gr(Hi){return function(No){return Promise.resolve(No).then(Hi,ei)}}),bn[Symbol.asyncIterator]=function(){return this},bn;function ui(Hi,No){Ut[Hi]&&(bn[Hi]=function(fo){return new Promise(function(jr,Do){Pn.push([Hi,fo,jr,Do])>1||Oi(Hi,fo)})},No&&(bn[Hi]=No(bn[Hi])))}function Oi(Hi,No){try{!function Dr(Hi){Hi.value instanceof Pt?Promise.resolve(Hi.value.v).then(hr,ei):ra(Pn[0][2],Hi)}(Ut[Hi](No))}catch(fo){ra(Pn[0][3],fo)}}function hr(Hi){Oi("next",Hi)}function ei(Hi){Oi("throw",Hi)}function ra(Hi,No){Hi(No),Pn.shift(),Pn.length&&Oi(Pn[0][0],Pn[0][1])}}function Gt(bt){var qt,fn;return qt={},Ut("next"),Ut("throw",function(bn){throw bn}),Ut("return"),qt[Symbol.iterator]=function(){return this},qt;function Ut(bn,Pn){qt[bn]=bt[bn]?function(gr){return(fn=!fn)?{value:Pt(bt[bn](gr)),done:!1}:Pn?Pn(gr):gr}:Pn}}function Ht(bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fn,qt=bt[Symbol.asyncIterator];return qt?qt.call(bt):(bt=Le(bt),fn={},Ut("next"),Ut("throw"),Ut("return"),fn[Symbol.asyncIterator]=function(){return this},fn);function Ut(Pn){fn[Pn]=bt[Pn]&&function(gr){return new Promise(function(ui,Oi){!function bn(Pn,gr,ui,Oi){Promise.resolve(Oi).then(function(Dr){Pn({value:Dr,done:ui})},gr)}(ui,Oi,(gr=bt[Pn](gr)).done,gr.value)})}}}function jt(bt,qt){return Object.defineProperty?Object.defineProperty(bt,"raw",{value:qt}):bt.raw=qt,bt}var Yt=Object.create?function(bt,qt){Object.defineProperty(bt,"default",{enumerable:!0,value:qt})}:function(bt,qt){bt.default=qt};function On(bt){if(bt&&bt.__esModule)return bt;var qt={};if(null!=bt)for(var fn in bt)"default"!==fn&&Object.prototype.hasOwnProperty.call(bt,fn)&&Ae(qt,bt,fn);return Yt(qt,bt),qt}function In(bt){return bt&&bt.__esModule?bt:{default:bt}}function Rn(bt,qt,fn,Ut){if("a"===fn&&!Ut)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof qt?bt!==qt||!Ut:!qt.has(bt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===fn?Ut:"a"===fn?Ut.call(bt):Ut?Ut.value:qt.get(bt)}function Nr(bt,qt,fn,Ut,bn){if("m"===Ut)throw new TypeError("Private method is not writable");if("a"===Ut&&!bn)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof qt?bt!==qt||!bn:!qt.has(bt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===Ut?bn.call(bt,fn):bn?bn.value=fn:qt.set(bt,fn),fn}function wr(bt,qt){if(null===qt||"object"!=typeof qt&&"function"!=typeof qt)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof bt?qt===bt:bt.has(qt)}function Gr(bt,qt,fn){if(null!=qt){if("object"!=typeof qt&&"function"!=typeof qt)throw new TypeError("Object expected.");var Ut,bn;if(fn){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");Ut=qt[Symbol.asyncDispose]}if(void 0===Ut){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");Ut=qt[Symbol.dispose],fn&&(bn=Ut)}if("function"!=typeof Ut)throw new TypeError("Object not disposable.");bn&&(Ut=function(){try{bn.call(this)}catch(Pn){return Promise.reject(Pn)}}),bt.stack.push({value:qt,dispose:Ut,async:fn})}else fn&&bt.stack.push({async:!0});return qt}var Tn="function"==typeof SuppressedError?SuppressedError:function(bt,qt,fn){var Ut=new Error(fn);return Ut.name="SuppressedError",Ut.error=bt,Ut.suppressed=qt,Ut};function Nn(bt){function qt(Ut){bt.error=bt.hasError?new Tn(Ut,bt.error,"An error was suppressed during disposal."):Ut,bt.hasError=!0}return function fn(){for(;bt.stack.length;){var Ut=bt.stack.pop();try{var bn=Ut.dispose&&Ut.dispose.call(Ut.value);if(Ut.async)return Promise.resolve(bn).then(fn,function(Pn){return qt(Pn),fn()})}catch(Pn){qt(Pn)}}if(bt.hasError)throw bt.error}()}const br={__extends:T,__assign:V,__rest:N,__decorate:R,__param:M,__metadata:se,__awaiter:U,__generator:_e,__createBinding:Ae,__exportStar:Ne,__values:Le,__read:tt,__spread:_t,__spreadArrays:Bt,__spreadArray:yt,__await:Pt,__asyncGenerator:vt,__asyncDelegator:Gt,__asyncValues:Ht,__makeTemplateObject:jt,__importStar:On,__importDefault:In,__classPrivateFieldGet:Rn,__classPrivateFieldSet:Nr,__classPrivateFieldIn:wr,__addDisposableResource:Gr,__disposeResources:Nn}}},it=>{it(it.s=4429)}]);